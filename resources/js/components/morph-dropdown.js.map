{"version":3,"sources":["build/resources/node_modules/browser-pack/_prelude.js","build/resources/js/components/build/resources/js/components/morph-dropdown.js"],"names":[],"mappings":"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","file":"morph-dropdown.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function() {\n  (function($, window, document) {\n    \"use strict\";\n    var _defaults;\n    _defaults = {\n      duration: 0.5,\n      animate: \"TweenLite\",\n      selectors: {\n        link: '.has-morph-dropdown',\n        dropdown_target: '.morph-dropdown',\n        dropdown_list: '.morph-dropdown-list',\n        dropdown_wrapper: '.morph-dropdown-wrapper',\n        content: '.morph-content'\n      },\n      events: {\n        link_create: 'morph.linkCreate'\n      },\n      threshold: {\n        xl: 32,\n        lg: 32,\n        md: 32,\n        sm: 16,\n        xs: 8\n      },\n      screen: {\n        xs: 0,\n        sm: 768,\n        md: 992,\n        lg: 1200,\n        xl: 1560\n      }\n    };\n    $.morphDropdown = function(element, options) {\n      this.settings = $.extend({}, _defaults);\n      this.element = $(element);\n      this.links = $(this.settings.selectors.link, this.element);\n      this.dropdown_targets = $(this.settings.selectors.dropdown_target, this.element);\n      this.dropdown_list = $(this.settings.selectors.dropdown_list, this.element);\n      this.dropdown_wrapper = $(this.settings.selectors.dropdown_wrapper, this.element);\n      if (this.dropdown_wrapper.hasClass('-left')) {\n        this.from = 'left';\n      } else {\n        this.from = 'right';\n      }\n      this.initialize = (function(_this) {\n        return function() {\n          _this.link_create_bindings();\n          _this.dropdown_bindings();\n          _this.resize_bindings();\n          _this.touch_bindings();\n          _this.set_responsive_context();\n          _this.set_threshold();\n          _this.init_animator();\n          _this.init_link_bindings();\n        };\n      })(this);\n      this.touch_bindings = (function(_this) {\n        return function() {\n          _this.dropdown_wrapper.on('touchstart', (function() {}));\n          _this.links.on('touchstart', (function() {}));\n        };\n      })(this);\n      this.dropdown_bindings = (function(_this) {\n        return function() {\n          _this.dropdown_wrapper.on('mouseenter', function() {\n            _this.cancel_hide_dropdown();\n          });\n          _this.dropdown_wrapper.on('mouseleave', function() {\n            _this.hide_dropdown();\n          });\n        };\n      })(this);\n      this.link_create_bindings = (function(_this) {\n        return function() {\n          _this.element.on(_this.settings.events.link_create, function(e, link) {\n            var content, target;\n            target = $(link.attr('href'));\n            content = $(_this.settings.selectors.content, target);\n            link.on('mouseenter', function(e) {\n              _this.show_dropdown(link, target, content);\n            }).on('mouseleave', function(e) {\n              _this.link_hovered = false;\n              _this.hide_dropdown();\n            }).on('click', function(e) {\n              e.preventDefault();\n            });\n          });\n        };\n      })(this);\n      this.cancel_hide_dropdown = (function(_this) {\n        return function() {\n          _this.show_dropdown(_this.current_link, _this.current_target, _this.current_content);\n        };\n      })(this);\n      this.hide_dropdown = (function(_this) {\n        return function() {\n          _this.dropdown_targets.removeClass('-active');\n          _this.animate.to(_this.dropdown_list, _this.settings.duration, {\n            width: 0,\n            height: 0,\n            x: 0\n          });\n        };\n      })(this);\n      this.show_dropdown = (function(_this) {\n        return function(link, target, content) {\n          var height, width, x;\n          _this.current_link = link;\n          _this.current_target = target;\n          _this.current_content = content;\n          _this.link_hovered = true;\n          if (_this.window_width < 767) {\n            content.width(_this.window_width - 50);\n          } else {\n            content.attr('style', '');\n          }\n          width = content.outerWidth(true);\n          height = content.outerHeight(true);\n          if (width + _this.threshold > _this.window_width) {\n            width = _this.window_width - 2 * _this.threshold;\n          }\n          if (_this.from === 'right') {\n            x = (_this.element.width() - link.width() / 2) - (link.offset().left - _this.element.offset().left) - width / 2;\n            if (x < _this.threshold) {\n              x = _this.threshold;\n            }\n            if (x + width + _this.threshold > _this.window_width) {\n              x = _this.window_width - width - _this.threshold;\n            }\n            x = -x;\n          } else {\n            x = (link.offset().left - _this.element.offset().left) - (width / 2 - link.width() / 2);\n            if (x < _this.threshold) {\n              x = _this.threshold;\n            }\n            if (x + width + _this.threshold > _this.window_width) {\n              x = _this.window_width - width - _this.threshold;\n            }\n          }\n          _this.dropdown_targets.removeClass('-active');\n          if (_this.window_width < 767) {\n            width = _this.window_width - 20;\n            x = -8;\n          }\n          clearTimeout(_this.link_timeout);\n          _this.link_timeout = setTimeout(function() {\n            target.addClass('-active');\n          }, _this.settings.duration);\n          _this.animate.to(_this.dropdown_list, _this.settings.duration, {\n            width: width,\n            height: height,\n            'margin-right': -x\n          });\n        };\n      })(this);\n      this.set_threshold = (function(_this) {\n        return function() {\n          _this.threshold = _this.settings.threshold[_this.current_responsive_size];\n        };\n      })(this);\n      this.resize_bindings = (function(_this) {\n        return function() {\n          _this.set_window_size = function() {\n            _this.window_width = $(window).width();\n            _this.window_height = $(window).height();\n          };\n          $(window).on('resize', function() {\n            _this.set_window_size();\n            _this.set_threshold();\n          });\n          _this.set_window_size();\n        };\n      })(this);\n      this.init_link_bindings = (function(_this) {\n        return function() {\n          return _this.links.each(function(index, link) {\n            _this.element.triggerHandler(_this.settings.events.link_create, [$(link)]);\n          });\n        };\n      })(this);\n      this.init_animator = (function(_this) {\n        return function() {\n          _this.animate = window[_this.settings.animate];\n        };\n      })(this);\n\n      /*\n      Set current responsive range parameter as xs, sm, md, lg or xl\n       */\n      this.set_responsive_context = (function(_this) {\n        return function() {\n          if (_this.window_width >= _this.settings.screen.xl) {\n            _this.current_responsive_size = 'xl';\n          } else if (_this.window_width >= _this.settings.screen.lg) {\n            _this.current_responsive_size = 'lg';\n          } else if (_this.window_width >= _this.settings.screen.md) {\n            _this.current_responsive_size = 'md';\n          } else if (_this.window_width >= _this.settings.screen.sm) {\n            _this.current_responsive_size = 'sm';\n          } else {\n            _this.current_responsive_size = 'xs';\n          }\n        };\n      })(this);\n      this.initialize();\n    };\n    return $.fn.morphDropdown = function(opts) {\n      return this.each(function(index, element) {\n        if (!$.data(element, \"morphDropdown\")) {\n          return $.data(element, \"morphDropdown\", new $.morphDropdown(element, opts));\n        }\n      });\n    };\n  })(window.jQuery, window, document);\n\n}).call(this);\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9tb3JwaC1kcm9wZG93bi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsQ0FBQyxZQUFXO0FBQ1YsR0FBQyxVQUFTLENBQVQsRUFBWSxNQUFaLEVBQW9CLFFBQXBCLEVBQThCO0FBQzdCOztBQUNBLFFBQUksU0FBSjtBQUNBLGdCQUFZO0FBQ1YsZ0JBQVUsR0FEQTtBQUVWLGVBQVMsV0FGQztBQUdWLGlCQUFXO0FBQ1QsY0FBTSxxQkFERztBQUVULHlCQUFpQixpQkFGUjtBQUdULHVCQUFlLHNCQUhOO0FBSVQsMEJBQWtCLHlCQUpUO0FBS1QsaUJBQVM7QUFMQSxPQUhEO0FBVVYsY0FBUTtBQUNOLHFCQUFhO0FBRFAsT0FWRTtBQWFWLGlCQUFXO0FBQ1QsWUFBSSxFQURLO0FBRVQsWUFBSSxFQUZLO0FBR1QsWUFBSSxFQUhLO0FBSVQsWUFBSSxFQUpLO0FBS1QsWUFBSTtBQUxLLE9BYkQ7QUFvQlYsY0FBUTtBQUNOLFlBQUksQ0FERTtBQUVOLFlBQUksR0FGRTtBQUdOLFlBQUksR0FIRTtBQUlOLFlBQUksSUFKRTtBQUtOLFlBQUk7QUFMRTtBQXBCRSxLQUFaO0FBNEJBLE1BQUUsYUFBRixHQUFrQixVQUFTLE9BQVQsRUFBa0IsT0FBbEIsRUFBMkI7QUFDM0MsV0FBSyxRQUFMLEdBQWdCLEVBQUUsTUFBRixDQUFTLEVBQVQsRUFBYSxTQUFiLENBQWhCO0FBQ0EsV0FBSyxPQUFMLEdBQWUsRUFBRSxPQUFGLENBQWY7QUFDQSxXQUFLLEtBQUwsR0FBYSxFQUFFLEtBQUssUUFBTCxDQUFjLFNBQWQsQ0FBd0IsSUFBMUIsRUFBZ0MsS0FBSyxPQUFyQyxDQUFiO0FBQ0EsV0FBSyxnQkFBTCxHQUF3QixFQUFFLEtBQUssUUFBTCxDQUFjLFNBQWQsQ0FBd0IsZUFBMUIsRUFBMkMsS0FBSyxPQUFoRCxDQUF4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UCxFQUFnQixlQUFoQixFQUFpQyxJQUFJLEVBQUUsYUFBTixDQUFvQixPQUFwQixFQUE2QixJQUE3QixDQUFqQyxDQUFQO0FBQ0Q7QUFDRixPQUpNLENBQVA7QUFLRCxLQU5EO0FBT0QsR0FwTkQsRUFvTkcsT0FBTyxNQXBOVixFQW9Oa0IsTUFwTmxCLEVBb04wQixRQXBOMUI7QUFzTkQsQ0F2TkQsRUF1TkcsSUF2TkgiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiKGZ1bmN0aW9uKCkge1xuICAoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBfZGVmYXVsdHM7XG4gICAgX2RlZmF1bHRzID0ge1xuICAgICAgZHVyYXRpb246IDAuNSxcbiAgICAgIGFuaW1hdGU6IFwiVHdlZW5MaXRlXCIsXG4gICAgICBzZWxlY3RvcnM6IHtcbiAgICAgICAgbGluazogJy5oYXMtbW9ycGgtZHJvcGRvd24nLFxuICAgICAgICBkcm9wZG93bl90YXJnZXQ6ICcubW9ycGgtZHJvcGRvd24nLFxuICAgICAgICBkcm9wZG93bl9saXN0OiAnLm1vcnBoLWRyb3Bkb3duLWxpc3QnLFxuICAgICAgICBkcm9wZG93bl93cmFwcGVyOiAnLm1vcnBoLWRyb3Bkb3duLXdyYXBwZXInLFxuICAgICAgICBjb250ZW50OiAnLm1vcnBoLWNvbnRlbnQnXG4gICAgICB9LFxuICAgICAgZXZlbnRzOiB7XG4gICAgICAgIGxpbmtfY3JlYXRlOiAnbW9ycGgubGlua0NyZWF0ZSdcbiAgICAgIH0sXG4gICAgICB0aHJlc2hvbGQ6IHtcbiAgICAgICAgeGw6IDMyLFxuICAgICAgICBsZzogMzIsXG4gICAgICAgIG1kOiAzMixcbiAgICAgICAgc206IDE2LFxuICAgICAgICB4czogOFxuICAgICAgfSxcbiAgICAgIHNjcmVlbjoge1xuICAgICAgICB4czogMCxcbiAgICAgICAgc206IDc2OCxcbiAgICAgICAgbWQ6IDk5MixcbiAgICAgICAgbGc6IDEyMDAsXG4gICAgICAgIHhsOiAxNTYwXG4gICAgICB9XG4gICAgfTtcbiAgICAkLm1vcnBoRHJvcGRvd24gPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICB0aGlzLnNldHRpbmdzID0gJC5leHRlbmQoe30sIF9kZWZhdWx0cyk7XG4gICAgICB0aGlzLmVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICAgICAgdGhpcy5saW5rcyA9ICQodGhpcy5zZXR0aW5ncy5zZWxlY3RvcnMubGluaywgdGhpcy5lbGVtZW50KTtcbiAgICAgIHRoaXMuZHJvcGRvd25fdGFyZ2V0cyA9ICQodGhpcy5zZXR0aW5ncy5zZWxlY3RvcnMuZHJvcGRvd25fdGFyZ2V0LCB0aGlzLmVsZW1lbnQpO1xuICAgICAgdGhpcy5kcm9wZG93bl9saXN0ID0gJCh0aGlzLnNldHRpbmdzLnNlbGVjdG9ycy5kcm9wZG93bl9saXN0LCB0aGlzLmVsZW1lbnQpO1xuICAgICAgdGhpcy5kcm9wZG93bl93cmFwcGVyID0gJCh0aGlzLnNldHRpbmdzLnNlbGVjdG9ycy5kcm9wZG93bl93cmFwcGVyLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgaWYgKHRoaXMuZHJvcGRvd25fd3JhcHBlci5oYXNDbGFzcygnLWxlZnQnKSkge1xuICAgICAgICB0aGlzLmZyb20gPSAnbGVmdCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZyb20gPSAncmlnaHQnO1xuICAgICAgfVxuICAgICAgdGhpcy5pbml0aWFsaXplID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBfdGhpcy5saW5rX2NyZWF0ZV9iaW5kaW5ncygpO1xuICAgICAgICAgIF90aGlzLmRyb3Bkb3duX2JpbmRpbmdzKCk7XG4gICAgICAgICAgX3RoaXMucmVzaXplX2JpbmRpbmdzKCk7XG4gICAgICAgICAgX3RoaXMudG91Y2hfYmluZGluZ3MoKTtcbiAgICAgICAgICBfdGhpcy5zZXRfcmVzcG9uc2l2ZV9jb250ZXh0KCk7XG4gICAgICAgICAgX3RoaXMuc2V0X3RocmVzaG9sZCgpO1xuICAgICAgICAgIF90aGlzLmluaXRfYW5pbWF0b3IoKTtcbiAgICAgICAgICBfdGhpcy5pbml0X2xpbmtfYmluZGluZ3MoKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy50b3VjaF9iaW5kaW5ncyA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMuZHJvcGRvd25fd3JhcHBlci5vbigndG91Y2hzdGFydCcsIChmdW5jdGlvbigpIHt9KSk7XG4gICAgICAgICAgX3RoaXMubGlua3Mub24oJ3RvdWNoc3RhcnQnLCAoZnVuY3Rpb24oKSB7fSkpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLmRyb3Bkb3duX2JpbmRpbmdzID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBfdGhpcy5kcm9wZG93bl93cmFwcGVyLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy5jYW5jZWxfaGlkZV9kcm9wZG93bigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIF90aGlzLmRyb3Bkb3duX3dyYXBwZXIub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF90aGlzLmhpZGVfZHJvcGRvd24oKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5saW5rX2NyZWF0ZV9iaW5kaW5ncyA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMuZWxlbWVudC5vbihfdGhpcy5zZXR0aW5ncy5ldmVudHMubGlua19jcmVhdGUsIGZ1bmN0aW9uKGUsIGxpbmspIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50LCB0YXJnZXQ7XG4gICAgICAgICAgICB0YXJnZXQgPSAkKGxpbmsuYXR0cignaHJlZicpKTtcbiAgICAgICAgICAgIGNvbnRlbnQgPSAkKF90aGlzLnNldHRpbmdzLnNlbGVjdG9ycy5jb250ZW50LCB0YXJnZXQpO1xuICAgICAgICAgICAgbGluay5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgX3RoaXMuc2hvd19kcm9wZG93bihsaW5rLCB0YXJnZXQsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfSkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIF90aGlzLmxpbmtfaG92ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICBfdGhpcy5oaWRlX2Ryb3Bkb3duKCk7XG4gICAgICAgICAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLmNhbmNlbF9oaWRlX2Ryb3Bkb3duID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBfdGhpcy5zaG93X2Ryb3Bkb3duKF90aGlzLmN1cnJlbnRfbGluaywgX3RoaXMuY3VycmVudF90YXJnZXQsIF90aGlzLmN1cnJlbnRfY29udGVudCk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuaGlkZV9kcm9wZG93biA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMuZHJvcGRvd25fdGFyZ2V0cy5yZW1vdmVDbGFzcygnLWFjdGl2ZScpO1xuICAgICAgICAgIF90aGlzLmFuaW1hdGUudG8oX3RoaXMuZHJvcGRvd25fbGlzdCwgX3RoaXMuc2V0dGluZ3MuZHVyYXRpb24sIHtcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgeDogMFxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLnNob3dfZHJvcGRvd24gPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGxpbmssIHRhcmdldCwgY29udGVudCkge1xuICAgICAgICAgIHZhciBoZWlnaHQsIHdpZHRoLCB4O1xuICAgICAgICAgIF90aGlzLmN1cnJlbnRfbGluayA9IGxpbms7XG4gICAgICAgICAgX3RoaXMuY3VycmVudF90YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgICAgX3RoaXMuY3VycmVudF9jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgICBfdGhpcy5saW5rX2hvdmVyZWQgPSB0cnVlO1xuICAgICAgICAgIGlmIChfdGhpcy53aW5kb3dfd2lkdGggPCA3NjcpIHtcbiAgICAgICAgICAgIGNvbnRlbnQud2lkdGgoX3RoaXMud2luZG93X3dpZHRoIC0gNTApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZW50LmF0dHIoJ3N0eWxlJywgJycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB3aWR0aCA9IGNvbnRlbnQub3V0ZXJXaWR0aCh0cnVlKTtcbiAgICAgICAgICBoZWlnaHQgPSBjb250ZW50Lm91dGVySGVpZ2h0KHRydWUpO1xuICAgICAgICAgIGlmICh3aWR0aCArIF90aGlzLnRocmVzaG9sZCA+IF90aGlzLndpbmRvd193aWR0aCkge1xuICAgICAgICAgICAgd2lkdGggPSBfdGhpcy53aW5kb3dfd2lkdGggLSAyICogX3RoaXMudGhyZXNob2xkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoX3RoaXMuZnJvbSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgeCA9IChfdGhpcy5lbGVtZW50LndpZHRoKCkgLSBsaW5rLndpZHRoKCkgLyAyKSAtIChsaW5rLm9mZnNldCgpLmxlZnQgLSBfdGhpcy5lbGVtZW50Lm9mZnNldCgpLmxlZnQpIC0gd2lkdGggLyAyO1xuICAgICAgICAgICAgaWYgKHggPCBfdGhpcy50aHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgeCA9IF90aGlzLnRocmVzaG9sZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh4ICsgd2lkdGggKyBfdGhpcy50aHJlc2hvbGQgPiBfdGhpcy53aW5kb3dfd2lkdGgpIHtcbiAgICAgICAgICAgICAgeCA9IF90aGlzLndpbmRvd193aWR0aCAtIHdpZHRoIC0gX3RoaXMudGhyZXNob2xkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeCA9IC14O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4ID0gKGxpbmsub2Zmc2V0KCkubGVmdCAtIF90aGlzLmVsZW1lbnQub2Zmc2V0KCkubGVmdCkgLSAod2lkdGggLyAyIC0gbGluay53aWR0aCgpIC8gMik7XG4gICAgICAgICAgICBpZiAoeCA8IF90aGlzLnRocmVzaG9sZCkge1xuICAgICAgICAgICAgICB4ID0gX3RoaXMudGhyZXNob2xkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHggKyB3aWR0aCArIF90aGlzLnRocmVzaG9sZCA+IF90aGlzLndpbmRvd193aWR0aCkge1xuICAgICAgICAgICAgICB4ID0gX3RoaXMud2luZG93X3dpZHRoIC0gd2lkdGggLSBfdGhpcy50aHJlc2hvbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIF90aGlzLmRyb3Bkb3duX3RhcmdldHMucmVtb3ZlQ2xhc3MoJy1hY3RpdmUnKTtcbiAgICAgICAgICBpZiAoX3RoaXMud2luZG93X3dpZHRoIDwgNzY3KSB7XG4gICAgICAgICAgICB3aWR0aCA9IF90aGlzLndpbmRvd193aWR0aCAtIDIwO1xuICAgICAgICAgICAgeCA9IC04O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMubGlua190aW1lb3V0KTtcbiAgICAgICAgICBfdGhpcy5saW5rX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGFyZ2V0LmFkZENsYXNzKCctYWN0aXZlJyk7XG4gICAgICAgICAgfSwgX3RoaXMuc2V0dGluZ3MuZHVyYXRpb24pO1xuICAgICAgICAgIF90aGlzLmFuaW1hdGUudG8oX3RoaXMuZHJvcGRvd25fbGlzdCwgX3RoaXMuc2V0dGluZ3MuZHVyYXRpb24sIHtcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6IC14XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuc2V0X3RocmVzaG9sZCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMudGhyZXNob2xkID0gX3RoaXMuc2V0dGluZ3MudGhyZXNob2xkW190aGlzLmN1cnJlbnRfcmVzcG9uc2l2ZV9zaXplXTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5yZXNpemVfYmluZGluZ3MgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF90aGlzLnNldF93aW5kb3dfc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX3RoaXMud2luZG93X3dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgICAgICBfdGhpcy53aW5kb3dfaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF90aGlzLnNldF93aW5kb3dfc2l6ZSgpO1xuICAgICAgICAgICAgX3RoaXMuc2V0X3RocmVzaG9sZCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIF90aGlzLnNldF93aW5kb3dfc2l6ZSgpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLmluaXRfbGlua19iaW5kaW5ncyA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmxpbmtzLmVhY2goZnVuY3Rpb24oaW5kZXgsIGxpbmspIHtcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQudHJpZ2dlckhhbmRsZXIoX3RoaXMuc2V0dGluZ3MuZXZlbnRzLmxpbmtfY3JlYXRlLCBbJChsaW5rKV0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLmluaXRfYW5pbWF0b3IgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF90aGlzLmFuaW1hdGUgPSB3aW5kb3dbX3RoaXMuc2V0dGluZ3MuYW5pbWF0ZV07XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcblxuICAgICAgLypcbiAgICAgIFNldCBjdXJyZW50IHJlc3BvbnNpdmUgcmFuZ2UgcGFyYW1ldGVyIGFzIHhzLCBzbSwgbWQsIGxnIG9yIHhsXG4gICAgICAgKi9cbiAgICAgIHRoaXMuc2V0X3Jlc3BvbnNpdmVfY29udGV4dCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKF90aGlzLndpbmRvd193aWR0aCA+PSBfdGhpcy5zZXR0aW5ncy5zY3JlZW4ueGwpIHtcbiAgICAgICAgICAgIF90aGlzLmN1cnJlbnRfcmVzcG9uc2l2ZV9zaXplID0gJ3hsJztcbiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLndpbmRvd193aWR0aCA+PSBfdGhpcy5zZXR0aW5ncy5zY3JlZW4ubGcpIHtcbiAgICAgICAgICAgIF90aGlzLmN1cnJlbnRfcmVzcG9uc2l2ZV9zaXplID0gJ2xnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLndpbmRvd193aWR0aCA+PSBfdGhpcy5zZXR0aW5ncy5zY3JlZW4ubWQpIHtcbiAgICAgICAgICAgIF90aGlzLmN1cnJlbnRfcmVzcG9uc2l2ZV9zaXplID0gJ21kJztcbiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLndpbmRvd193aWR0aCA+PSBfdGhpcy5zZXR0aW5ncy5zY3JlZW4uc20pIHtcbiAgICAgICAgICAgIF90aGlzLmN1cnJlbnRfcmVzcG9uc2l2ZV9zaXplID0gJ3NtJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuY3VycmVudF9yZXNwb25zaXZlX3NpemUgPSAneHMnO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfTtcbiAgICByZXR1cm4gJC5mbi5tb3JwaERyb3Bkb3duID0gZnVuY3Rpb24ob3B0cykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgICBpZiAoISQuZGF0YShlbGVtZW50LCBcIm1vcnBoRHJvcGRvd25cIikpIHtcbiAgICAgICAgICByZXR1cm4gJC5kYXRhKGVsZW1lbnQsIFwibW9ycGhEcm9wZG93blwiLCBuZXcgJC5tb3JwaERyb3Bkb3duKGVsZW1lbnQsIG9wdHMpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSkod2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iXX0="}