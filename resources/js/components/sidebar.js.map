{"version":3,"sources":["build/resources/node_modules/browser-pack/_prelude.js","build/resources/js/components/build/resources/js/components/sidebar.js"],"names":[],"mappings":"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","file":"sidebar.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function() {\n  (function($, window, document) {\n    \"use strict\";\n    var _defaults;\n    _defaults = {\n      offset: 75,\n      collapse: 992,\n      duration: 0.3,\n      touch: true,\n      visibilityThreshold: 0.5,\n      slideable: false,\n      overlay: false,\n      affectContent: true,\n      slideContent: false,\n      debug: false\n    };\n    $.sidebar = function(element, options) {\n      this.settings = $.extend({}, _defaults);\n      this.sidebar = $(element);\n      this.sidebar_id = this.sidebar.attr('id');\n      this.sidebar_menu = $('.sidebar-menu', this.sidebar);\n      this.sidebar_toggle = $('.sidebar-toggle[data-target=\"#' + this.sidebar_id + '\"]');\n      this.sidebar_tabs = $('.sidebar-tab', this.sidebar);\n      this.sidebar_tab_contents = $('.sidebar-tab-content', this.sidebar);\n      this.animate = TweenLite;\n      this.body = $('body');\n      this.content = $('.content');\n      this.window = $(window);\n      this.is_visible = true;\n      this.on_resize = (function(_this) {\n        return function() {\n          if (_this.is_collapsible && (_this.window.width() < _this.collapse_threshold || _this.collapse_threshold === 0)) {\n            _this.is_collapsed = true;\n            _this.sidebar.addClass('-collapsed -responsive');\n            if (_this.is_slideable) {\n              _this.slide_toggle(false);\n            }\n            _this.log('Resize toggle');\n            if (_this.affects_content) {\n              if (_this.is_slideable) {\n                _this.content.removeClass('-with-' + _this.position + '-sidebar');\n              }\n            }\n          } else {\n            _this.is_collapsed = false;\n            _this.sidebar.removeClass('-collapsed -responsive');\n            if (_this.affects_content) {\n              _this.content.addClass('-with-' + _this.position + '-sidebar');\n            }\n          }\n          _this.width = _this.sidebar.width();\n        };\n      })(this);\n      this.bind_resize = (function(_this) {\n        return function() {\n          _this.window.on('resize', _this.on_resize);\n        };\n      })(this);\n      this.initialize_scrollbar = (function(_this) {\n        return function() {\n          $('.nano-content', _this.sidebar).perfectScrollbar();\n        };\n      })(this);\n      this.initialize_menu = (function(_this) {\n        return function() {\n          _this.sidebar_menu.metisMenu();\n        };\n      })(this);\n      this.initialize_attributes = (function(_this) {\n        return function() {\n          _this.collapse_threshold = _this.sidebar.attr('data-collapse') ? parseInt(_this.sidebar.attr('data-collapse'), 10) : _this.settings.collapse;\n          _this.offset = _this.sidebar.attr('data-offset') ? parseInt(_this.sidebar.attr('data-offset'), 10) : _this.settings.offset;\n          _this.is_collapsible = !isNaN(_this.collapse_threshold);\n          _this.is_slideable = _this.sidebar.hasClass('-slideable') || _this.settings.slideable;\n          _this.is_overlay = _this.sidebar.attr('data-overlay') || _this.settings.overlay;\n          _this.affects_content = _this.sidebar.attr('data-affect-content') || _this.settings.affectContent;\n          _this.slides_content = _this.sidebar.attr('data-slide-content') || _this.settings.slideContent;\n          if (_this.slides_content === 'false') {\n            _this.slides_content = false;\n          }\n          if (_this.slides_content) {\n            _this.sidebar.addClass('-slides-content');\n          }\n          if (_this.sidebar.hasClass('-right')) {\n            _this.position = 'right';\n            _this.sign = -1;\n          } else {\n            _this.position = 'left';\n            _this.sign = 1;\n          }\n        };\n      })(this);\n      this.bind_menu = (function(_this) {\n        return function() {\n          var showing;\n          showing = false;\n          _this.sidebar_menu.on('show.metisMenu', function() {\n            _this.sidebar.addClass('-open');\n            showing = true;\n          });\n          _this.sidebar_menu.on('hidden.metisMenu', function() {\n            if (!showing) {\n              _this.sidebar.removeClass('-open');\n            }\n            showing = false;\n          });\n        };\n      })(this);\n      this.slide_toggle = (function(_this) {\n        return function(visible, duration) {\n          var slidingComplete;\n          if (visible == null) {\n            visible = !_this.is_visible;\n          }\n          if (duration == null) {\n            duration = _this.settings.duration;\n          }\n          _this.is_sliding = true;\n          slidingComplete = function() {\n            setTimeout(function() {\n              _this.is_sliding = false;\n              _this.is_toggling = false;\n              if (!visible) {\n                $.sidebar.active = null;\n              }\n            }, 250);\n          };\n          if (visible) {\n            $.sidebar.active = _this.sidebar;\n            _this.animate.to(_this.sidebar, duration, {\n              onComplete: slidingComplete,\n              x: _this.width * _this.sign\n            });\n            if (_this.slides_content) {\n              _this.animate.to(_this.content, duration, {\n                x: _this.width * _this.sign\n              });\n            }\n          } else {\n            _this.animate.to(_this.sidebar, duration, {\n              onComplete: slidingComplete,\n              x: 0\n            });\n            if (_this.slides_content) {\n              _this.animate.to(_this.content, duration, {\n                x: 0\n              });\n            }\n          }\n          _this.is_visible = visible;\n        };\n      })(this);\n      this.bind_body_click = (function(_this) {\n        return function() {\n          _this.body.on('mouseup', function(e) {\n            if (_this.is_collapsed && _this.sidebar.hasClass('-open') && $($(e.target).closest('.sidebar-menu'), _this.sidebar).length === 0) {\n              $('.active a', _this.sidebar).trigger('click');\n              _this.log('Sidebar toggle button click');\n            }\n            if (_this.is_slideable && _this.is_visible && !_this.is_sliding && $(e.target) !== _this.sidebar_toggle && $(e.target).closest(_this.sidebar_toggle).length === 0 && $(e.target).closest('.-slideable').length === 0) {\n              _this.slide_toggle(false);\n              _this.log('Body click');\n            }\n          });\n        };\n      })(this);\n      this.bind_slideable = (function(_this) {\n        return function() {\n          var bodyTouch;\n          bodyTouch = new Hammer(_this.body[0]);\n          bodyTouch.get('pan').set({\n            direction: Hammer.DIRECTION_HORIZONTAL\n          });\n          return bodyTouch.on('panstart panleft panright panend', function(e) {\n            var can_slide, direction_valid, distance, duration, is_active_sidebar, is_inside_boundaries, x;\n            if (e.type === 'panstart') {\n              _this.first_touch = e;\n            }\n            is_active_sidebar = $.sidebar.active === null || _this.sidebar === $.sidebar.active;\n            is_inside_boundaries = true;\n            if (!(_this.is_collapsed && is_active_sidebar)) {\n              return;\n            }\n            distance = Math.abs(e.deltaX) - _this.offset;\n            can_slide = (0 < distance && distance < _this.width);\n            if (_this.is_visible) {\n              x = _this.width - distance;\n              direction_valid = e.deltaX < 0;\n            } else {\n              x = distance;\n              direction_valid = e.deltaX > 0;\n              is_inside_boundaries = _this.first_touch.center.x < _this.window.width() / 3;\n            }\n            if (_this.position === 'right') {\n              x = -x;\n              direction_valid = !direction_valid;\n              if (!_this.is_visible) {\n                is_inside_boundaries = _this.first_touch.center.x > _this.window.width() * 2 / 3;\n              }\n            }\n            if (!(_this.is_slideable && can_slide && direction_valid && is_inside_boundaries)) {\n              return;\n            }\n            _this.is_sliding = true;\n            if (e.type === 'panend' && (_this.previous_event === 'panleft' || _this.previous_event === 'panright')) {\n              duration = _this.settings.duration * e.distance / _this.width;\n              if (e.distance > _this.width * 0.5) {\n                if (_this.is_visible) {\n                  _this.slide_toggle(false, duration);\n                  _this.log('Slide out');\n                } else {\n                  _this.slide_toggle(true, duration);\n                  _this.log('Slide in');\n                }\n              } else {\n                _this.log('Slide back');\n                _this.slide_toggle(_this.is_visible, duration);\n              }\n              return;\n            }\n            _this.animate.set(_this.sidebar, {\n              x: x\n            });\n            if (_this.slides_content) {\n              _this.animate.set(_this.content, {\n                x: x\n              });\n            }\n            _this.previous_event = e.type;\n          });\n        };\n      })(this);\n      this.initialize_tabs = (function(_this) {\n        return function() {\n          _this.sidebar_tabs.each(function(index, tab) {\n            var target;\n            tab = $(tab);\n            target = $(tab.attr('data-target'));\n            tab.on('click', function(e) {\n              _this.sidebar_tabs.removeClass('-active');\n              _this.sidebar_tab_contents.removeClass('-active');\n              tab.addClass('-active');\n              target.addClass('-active');\n              target.triggerHandler('tab.show', [target]);\n            });\n          });\n        };\n      })(this);\n      this.initialize_chat = (function(_this) {\n        return function() {\n          var chat_form, chat_form_message, chat_items, chat_user, chat_view_tab, chat_wrapper;\n          chat_view_tab = $('.chat-view-tab', _this.sidebar);\n          chat_wrapper = $('.chat', chat_view_tab);\n          chat_items = $('.chat-items', chat_view_tab);\n          chat_form = $('.chat-form', chat_view_tab);\n          chat_user = $('.chat-user', chat_view_tab);\n          chat_form_message = $('input[name=\"message\"]', chat_view_tab);\n          if (chat_view_tab.length > 0) {\n            chat_form.on('submit', function(e) {\n              var message;\n              message = chat_form_message.val();\n              chat_form_message.val('');\n              chat_items.append($('<div>', {\n                \"class\": 'chat-item -to',\n                text: message\n              }));\n              e.preventDefault();\n              return false;\n            });\n          }\n        };\n      })(this);\n      this.initialize_toggle = (function(_this) {\n        return function() {\n          _this.sidebar_toggle.on('click', function() {\n            _this.slide_toggle();\n          });\n        };\n      })(this);\n      this.log = (function(_this) {\n        return function() {\n          if (_this.settings.debug) {\n            console.log(_this.sidebar_id, arguments);\n          }\n        };\n      })(this);\n      this.initialize = (function(_this) {\n        return function() {\n          _this.initialize_attributes();\n          _this.initialize_scrollbar();\n          _this.initialize_menu();\n          _this.initialize_toggle();\n          _this.initialize_tabs();\n          _this.initialize_chat();\n          _this.bind_menu();\n          _this.bind_resize();\n          _this.bind_body_click();\n          if (_this.settings.touch) {\n            _this.bind_slideable();\n          }\n          _this.on_resize();\n        };\n      })(this);\n      this.initialize();\n    };\n    $.sidebar.active = null;\n    return $.fn.sidebar = function(opts) {\n      return this.each(function(index, element) {\n        if (!$.data(element, \"sidebar\")) {\n          return $.data(element, \"sidebar\", new $.sidebar(element, opts));\n        }\n      });\n    };\n  })(window.jQuery, window, document);\n\n}).call(this);\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9zaWRlYmFyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxDQUFDLFlBQVc7QUFDVixHQUFDLFVBQVMsQ0FBVCxFQUFZLE1BQVosRUFBb0IsUUFBcEIsRUFBOEI7QUFDN0I7O0FBQ0EsUUFBSSxTQUFKO0FBQ0EsZ0JBQVk7QUFDVixjQUFRLEVBREU7QUFFVixnQkFBVSxHQUZBO0FBR1YsZ0JBQVUsR0FIQTtBQUlWLGFBQU8sSUFKRztBQUtWLDJCQUFxQixHQUxYO0FBTVYsaUJBQVcsS0FORDtBQU9WLGVBQVMsS0FQQztBQVFWLHFCQUFlLElBUkw7QUFTVixvQkFBYyxLQVRKO0FBVVYsYUFBTztBQVZHLEtBQVo7QUFZQSxNQUFFLE9BQUYsR0FBWSxVQUFTLE9BQVQsRUFBa0IsT0FBbEIsRUFBMkI7QUFDckMsV0FBSyxRQUFMLEdBQWdCLEVBQUUsTUFBRixDQUFTLEVBQVQsRUFBYSxTQUFiLENBQWhCO0FBQ0EsV0FBSyxPQUFMLEdBQWUsRUFBRSxPQUFGLENBQWY7QUFDQSxXQUFLLFVBQUwsR0FBa0IsS0FBSyxPQUFMLENBQWEsSUFBYixDQUFrQixJQUFsQixDQUFsQjtBQUNBLFdBQUssWUFBTCxHQUFvQixFQUFFLGVBQUYsRUFBbUIsS0FBSyxPQUF4QixDQUFwQjtBQUNBLFdBQUssY0FBTCxHQUFzQixFQUFFLG1DQUFtQyxLQUFLLFVBQXhDLEdBQXFELElBQXZELENBQXRCO0FBQ0EsV0FBSyxZQUFMLEdBQW9CLEVBQUUsY0FBRixFQUFrQixLQUFLLE9BQXZCLENBQXBCO0FBQ0EsV0FBSyxvQkFBTCxHQUE0QixFQUFFLHNCQUFGLEVBQTBCLEtBQUssT0FBL0IsQ0FBNUI7QUFDQSxXQUFLLE9BQUwsR0FBZSxTQUFmO0FBQ0EsV0FBSyxJQUFMLEdBQVksRUFBRSxNQUFGLENBQVo7QUFDQSxXQUFLLE9B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TyxZQUFXO0FBQ2hCLGdCQUFNLHFCQUFOO0FBQ0EsZ0JBQU0sb0JBQU47QUFDQSxnQkFBTSxlQUFOO0FBQ0EsZ0JBQU0saUJBQU47QUFDQSxnQkFBTSxlQUFOO0FBQ0EsZ0JBQU0sZUFBTjtBQUNBLGdCQUFNLFNBQU47QUFDQSxnQkFBTSxXQUFOO0FBQ0EsZ0JBQU0sZUFBTjtBQUNBLGNBQUksTUFBTSxRQUFOLENBQWUsS0FBbkIsRUFBMEI7QUFDeEIsa0JBQU0sY0FBTjtBQUNEO0FBQ0QsZ0JBQU0sU0FBTjtBQUNELFNBZEQ7QUFlRCxPQWhCaUIsQ0FnQmYsSUFoQmUsQ0FBbEI7QUFpQkEsV0FBSyxVQUFMO0FBQ0QsS0FoU0Q7QUFpU0EsTUFBRSxPQUFGLENBQVUsTUFBVixHQUFtQixJQUFuQjtBQUNBLFdBQU8sRUFBRSxFQUFGLENBQUssT0FBTCxHQUFlLFVBQVMsSUFBVCxFQUFlO0FBQ25DLGFBQU8sS0FBSyxJQUFMLENBQVUsVUFBUyxLQUFULEVBQWdCLE9BQWhCLEVBQXlCO0FBQ3hDLFlBQUksQ0FBQyxFQUFFLElBQUYsQ0FBTyxPQUFQLEVBQWdCLFNBQWhCLENBQUwsRUFBaUM7QUFDL0IsaUJBQU8sRUFBRSxJQUFGLENBQU8sT0FBUCxFQUFnQixTQUFoQixFQUEyQixJQUFJLEVBQUUsT0FBTixDQUFjLE9BQWQsRUFBdUIsSUFBdkIsQ0FBM0IsQ0FBUDtBQUNEO0FBQ0YsT0FKTSxDQUFQO0FBS0QsS0FORDtBQU9ELEdBeFRELEVBd1RHLE9BQU8sTUF4VFYsRUF3VGtCLE1BeFRsQixFQXdUMEIsUUF4VDFCO0FBMFRELENBM1RELEVBMlRHLElBM1RIIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbigpIHtcbiAgKGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgX2RlZmF1bHRzO1xuICAgIF9kZWZhdWx0cyA9IHtcbiAgICAgIG9mZnNldDogNzUsXG4gICAgICBjb2xsYXBzZTogOTkyLFxuICAgICAgZHVyYXRpb246IDAuMyxcbiAgICAgIHRvdWNoOiB0cnVlLFxuICAgICAgdmlzaWJpbGl0eVRocmVzaG9sZDogMC41LFxuICAgICAgc2xpZGVhYmxlOiBmYWxzZSxcbiAgICAgIG92ZXJsYXk6IGZhbHNlLFxuICAgICAgYWZmZWN0Q29udGVudDogdHJ1ZSxcbiAgICAgIHNsaWRlQ29udGVudDogZmFsc2UsXG4gICAgICBkZWJ1ZzogZmFsc2VcbiAgICB9O1xuICAgICQuc2lkZWJhciA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgX2RlZmF1bHRzKTtcbiAgICAgIHRoaXMuc2lkZWJhciA9ICQoZWxlbWVudCk7XG4gICAgICB0aGlzLnNpZGViYXJfaWQgPSB0aGlzLnNpZGViYXIuYXR0cignaWQnKTtcbiAgICAgIHRoaXMuc2lkZWJhcl9tZW51ID0gJCgnLnNpZGViYXItbWVudScsIHRoaXMuc2lkZWJhcik7XG4gICAgICB0aGlzLnNpZGViYXJfdG9nZ2xlID0gJCgnLnNpZGViYXItdG9nZ2xlW2RhdGEtdGFyZ2V0PVwiIycgKyB0aGlzLnNpZGViYXJfaWQgKyAnXCJdJyk7XG4gICAgICB0aGlzLnNpZGViYXJfdGFicyA9ICQoJy5zaWRlYmFyLXRhYicsIHRoaXMuc2lkZWJhcik7XG4gICAgICB0aGlzLnNpZGViYXJfdGFiX2NvbnRlbnRzID0gJCgnLnNpZGViYXItdGFiLWNvbnRlbnQnLCB0aGlzLnNpZGViYXIpO1xuICAgICAgdGhpcy5hbmltYXRlID0gVHdlZW5MaXRlO1xuICAgICAgdGhpcy5ib2R5ID0gJCgnYm9keScpO1xuICAgICAgdGhpcy5jb250ZW50ID0gJCgnLmNvbnRlbnQnKTtcbiAgICAgIHRoaXMud2luZG93ID0gJCh3aW5kb3cpO1xuICAgICAgdGhpcy5pc192aXNpYmxlID0gdHJ1ZTtcbiAgICAgIHRoaXMub25fcmVzaXplID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoX3RoaXMuaXNfY29sbGFwc2libGUgJiYgKF90aGlzLndpbmRvdy53aWR0aCgpIDwgX3RoaXMuY29sbGFwc2VfdGhyZXNob2xkIHx8IF90aGlzLmNvbGxhcHNlX3RocmVzaG9sZCA9PT0gMCkpIHtcbiAgICAgICAgICAgIF90aGlzLmlzX2NvbGxhcHNlZCA9IHRydWU7XG4gICAgICAgICAgICBfdGhpcy5zaWRlYmFyLmFkZENsYXNzKCctY29sbGFwc2VkIC1yZXNwb25zaXZlJyk7XG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNfc2xpZGVhYmxlKSB7XG4gICAgICAgICAgICAgIF90aGlzLnNsaWRlX3RvZ2dsZShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5sb2coJ1Jlc2l6ZSB0b2dnbGUnKTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5hZmZlY3RzX2NvbnRlbnQpIHtcbiAgICAgICAgICAgICAgaWYgKF90aGlzLmlzX3NsaWRlYWJsZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmNvbnRlbnQucmVtb3ZlQ2xhc3MoJy13aXRoLScgKyBfdGhpcy5wb3NpdGlvbiArICctc2lkZWJhcicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmlzX2NvbGxhcHNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuc2lkZWJhci5yZW1vdmVDbGFzcygnLWNvbGxhcHNlZCAtcmVzcG9uc2l2ZScpO1xuICAgICAgICAgICAgaWYgKF90aGlzLmFmZmVjdHNfY29udGVudCkge1xuICAgICAgICAgICAgICBfdGhpcy5jb250ZW50LmFkZENsYXNzKCctd2l0aC0nICsgX3RoaXMucG9zaXRpb24gKyAnLXNpZGViYXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgX3RoaXMud2lkdGggPSBfdGhpcy5zaWRlYmFyLndpZHRoKCk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuYmluZF9yZXNpemUgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF90aGlzLndpbmRvdy5vbigncmVzaXplJywgX3RoaXMub25fcmVzaXplKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5pbml0aWFsaXplX3Njcm9sbGJhciA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJCgnLm5hbm8tY29udGVudCcsIF90aGlzLnNpZGViYXIpLnBlcmZlY3RTY3JvbGxiYXIoKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5pbml0aWFsaXplX21lbnUgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF90aGlzLnNpZGViYXJfbWVudS5tZXRpc01lbnUoKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5pbml0aWFsaXplX2F0dHJpYnV0ZXMgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF90aGlzLmNvbGxhcHNlX3RocmVzaG9sZCA9IF90aGlzLnNpZGViYXIuYXR0cignZGF0YS1jb2xsYXBzZScpID8gcGFyc2VJbnQoX3RoaXMuc2lkZWJhci5hdHRyKCdkYXRhLWNvbGxhcHNlJyksIDEwKSA6IF90aGlzLnNldHRpbmdzLmNvbGxhcHNlO1xuICAgICAgICAgIF90aGlzLm9mZnNldCA9IF90aGlzLnNpZGViYXIuYXR0cignZGF0YS1vZmZzZXQnKSA/IHBhcnNlSW50KF90aGlzLnNpZGViYXIuYXR0cignZGF0YS1vZmZzZXQnKSwgMTApIDogX3RoaXMuc2V0dGluZ3Mub2Zmc2V0O1xuICAgICAgICAgIF90aGlzLmlzX2NvbGxhcHNpYmxlID0gIWlzTmFOKF90aGlzLmNvbGxhcHNlX3RocmVzaG9sZCk7XG4gICAgICAgICAgX3RoaXMuaXNfc2xpZGVhYmxlID0gX3RoaXMuc2lkZWJhci5oYXNDbGFzcygnLXNsaWRlYWJsZScpIHx8IF90aGlzLnNldHRpbmdzLnNsaWRlYWJsZTtcbiAgICAgICAgICBfdGhpcy5pc19vdmVybGF5ID0gX3RoaXMuc2lkZWJhci5hdHRyKCdkYXRhLW92ZXJsYXknKSB8fCBfdGhpcy5zZXR0aW5ncy5vdmVybGF5O1xuICAgICAgICAgIF90aGlzLmFmZmVjdHNfY29udGVudCA9IF90aGlzLnNpZGViYXIuYXR0cignZGF0YS1hZmZlY3QtY29udGVudCcpIHx8IF90aGlzLnNldHRpbmdzLmFmZmVjdENvbnRlbnQ7XG4gICAgICAgICAgX3RoaXMuc2xpZGVzX2NvbnRlbnQgPSBfdGhpcy5zaWRlYmFyLmF0dHIoJ2RhdGEtc2xpZGUtY29udGVudCcpIHx8IF90aGlzLnNldHRpbmdzLnNsaWRlQ29udGVudDtcbiAgICAgICAgICBpZiAoX3RoaXMuc2xpZGVzX2NvbnRlbnQgPT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgIF90aGlzLnNsaWRlc19jb250ZW50ID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfdGhpcy5zbGlkZXNfY29udGVudCkge1xuICAgICAgICAgICAgX3RoaXMuc2lkZWJhci5hZGRDbGFzcygnLXNsaWRlcy1jb250ZW50Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfdGhpcy5zaWRlYmFyLmhhc0NsYXNzKCctcmlnaHQnKSkge1xuICAgICAgICAgICAgX3RoaXMucG9zaXRpb24gPSAncmlnaHQnO1xuICAgICAgICAgICAgX3RoaXMuc2lnbiA9IC0xO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5wb3NpdGlvbiA9ICdsZWZ0JztcbiAgICAgICAgICAgIF90aGlzLnNpZ24gPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5iaW5kX21lbnUgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBzaG93aW5nO1xuICAgICAgICAgIHNob3dpbmcgPSBmYWxzZTtcbiAgICAgICAgICBfdGhpcy5zaWRlYmFyX21lbnUub24oJ3Nob3cubWV0aXNNZW51JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy5zaWRlYmFyLmFkZENsYXNzKCctb3BlbicpO1xuICAgICAgICAgICAgc2hvd2luZyA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgX3RoaXMuc2lkZWJhcl9tZW51Lm9uKCdoaWRkZW4ubWV0aXNNZW51JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXNob3dpbmcpIHtcbiAgICAgICAgICAgICAgX3RoaXMuc2lkZWJhci5yZW1vdmVDbGFzcygnLW9wZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNob3dpbmcgPSBmYWxzZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5zbGlkZV90b2dnbGUgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZpc2libGUsIGR1cmF0aW9uKSB7XG4gICAgICAgICAgdmFyIHNsaWRpbmdDb21wbGV0ZTtcbiAgICAgICAgICBpZiAodmlzaWJsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICB2aXNpYmxlID0gIV90aGlzLmlzX3Zpc2libGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkdXJhdGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IF90aGlzLnNldHRpbmdzLmR1cmF0aW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfdGhpcy5pc19zbGlkaW5nID0gdHJ1ZTtcbiAgICAgICAgICBzbGlkaW5nQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIF90aGlzLmlzX3NsaWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgX3RoaXMuaXNfdG9nZ2xpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgaWYgKCF2aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgJC5zaWRlYmFyLmFjdGl2ZSA9IG51bGw7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICAgICAgJC5zaWRlYmFyLmFjdGl2ZSA9IF90aGlzLnNpZGViYXI7XG4gICAgICAgICAgICBfdGhpcy5hbmltYXRlLnRvKF90aGlzLnNpZGViYXIsIGR1cmF0aW9uLCB7XG4gICAgICAgICAgICAgIG9uQ29tcGxldGU6IHNsaWRpbmdDb21wbGV0ZSxcbiAgICAgICAgICAgICAgeDogX3RoaXMud2lkdGggKiBfdGhpcy5zaWduXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5zbGlkZXNfY29udGVudCkge1xuICAgICAgICAgICAgICBfdGhpcy5hbmltYXRlLnRvKF90aGlzLmNvbnRlbnQsIGR1cmF0aW9uLCB7XG4gICAgICAgICAgICAgICAgeDogX3RoaXMud2lkdGggKiBfdGhpcy5zaWduXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5hbmltYXRlLnRvKF90aGlzLnNpZGViYXIsIGR1cmF0aW9uLCB7XG4gICAgICAgICAgICAgIG9uQ29tcGxldGU6IHNsaWRpbmdDb21wbGV0ZSxcbiAgICAgICAgICAgICAgeDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoX3RoaXMuc2xpZGVzX2NvbnRlbnQpIHtcbiAgICAgICAgICAgICAgX3RoaXMuYW5pbWF0ZS50byhfdGhpcy5jb250ZW50LCBkdXJhdGlvbiwge1xuICAgICAgICAgICAgICAgIHg6IDBcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIF90aGlzLmlzX3Zpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLmJpbmRfYm9keV9jbGljayA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMuYm9keS5vbignbW91c2V1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc19jb2xsYXBzZWQgJiYgX3RoaXMuc2lkZWJhci5oYXNDbGFzcygnLW9wZW4nKSAmJiAkKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy5zaWRlYmFyLW1lbnUnKSwgX3RoaXMuc2lkZWJhcikubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICQoJy5hY3RpdmUgYScsIF90aGlzLnNpZGViYXIpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgIF90aGlzLmxvZygnU2lkZWJhciB0b2dnbGUgYnV0dG9uIGNsaWNrJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNfc2xpZGVhYmxlICYmIF90aGlzLmlzX3Zpc2libGUgJiYgIV90aGlzLmlzX3NsaWRpbmcgJiYgJChlLnRhcmdldCkgIT09IF90aGlzLnNpZGViYXJfdG9nZ2xlICYmICQoZS50YXJnZXQpLmNsb3Nlc3QoX3RoaXMuc2lkZWJhcl90b2dnbGUpLmxlbmd0aCA9PT0gMCAmJiAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuLXNsaWRlYWJsZScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICBfdGhpcy5zbGlkZV90b2dnbGUoZmFsc2UpO1xuICAgICAgICAgICAgICBfdGhpcy5sb2coJ0JvZHkgY2xpY2snKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5iaW5kX3NsaWRlYWJsZSA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGJvZHlUb3VjaDtcbiAgICAgICAgICBib2R5VG91Y2ggPSBuZXcgSGFtbWVyKF90aGlzLmJvZHlbMF0pO1xuICAgICAgICAgIGJvZHlUb3VjaC5nZXQoJ3BhbicpLnNldCh7XG4gICAgICAgICAgICBkaXJlY3Rpb246IEhhbW1lci5ESVJFQ1RJT05fSE9SSVpPTlRBTFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBib2R5VG91Y2gub24oJ3BhbnN0YXJ0IHBhbmxlZnQgcGFucmlnaHQgcGFuZW5kJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGNhbl9zbGlkZSwgZGlyZWN0aW9uX3ZhbGlkLCBkaXN0YW5jZSwgZHVyYXRpb24sIGlzX2FjdGl2ZV9zaWRlYmFyLCBpc19pbnNpZGVfYm91bmRhcmllcywgeDtcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdwYW5zdGFydCcpIHtcbiAgICAgICAgICAgICAgX3RoaXMuZmlyc3RfdG91Y2ggPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNfYWN0aXZlX3NpZGViYXIgPSAkLnNpZGViYXIuYWN0aXZlID09PSBudWxsIHx8IF90aGlzLnNpZGViYXIgPT09ICQuc2lkZWJhci5hY3RpdmU7XG4gICAgICAgICAgICBpc19pbnNpZGVfYm91bmRhcmllcyA9IHRydWU7XG4gICAgICAgICAgICBpZiAoIShfdGhpcy5pc19jb2xsYXBzZWQgJiYgaXNfYWN0aXZlX3NpZGViYXIpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoZS5kZWx0YVgpIC0gX3RoaXMub2Zmc2V0O1xuICAgICAgICAgICAgY2FuX3NsaWRlID0gKDAgPCBkaXN0YW5jZSAmJiBkaXN0YW5jZSA8IF90aGlzLndpZHRoKTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc192aXNpYmxlKSB7XG4gICAgICAgICAgICAgIHggPSBfdGhpcy53aWR0aCAtIGRpc3RhbmNlO1xuICAgICAgICAgICAgICBkaXJlY3Rpb25fdmFsaWQgPSBlLmRlbHRhWCA8IDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB4ID0gZGlzdGFuY2U7XG4gICAgICAgICAgICAgIGRpcmVjdGlvbl92YWxpZCA9IGUuZGVsdGFYID4gMDtcbiAgICAgICAgICAgICAgaXNfaW5zaWRlX2JvdW5kYXJpZXMgPSBfdGhpcy5maXJzdF90b3VjaC5jZW50ZXIueCA8IF90aGlzLndpbmRvdy53aWR0aCgpIC8gMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5wb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICB4ID0gLXg7XG4gICAgICAgICAgICAgIGRpcmVjdGlvbl92YWxpZCA9ICFkaXJlY3Rpb25fdmFsaWQ7XG4gICAgICAgICAgICAgIGlmICghX3RoaXMuaXNfdmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGlzX2luc2lkZV9ib3VuZGFyaWVzID0gX3RoaXMuZmlyc3RfdG91Y2guY2VudGVyLnggPiBfdGhpcy53aW5kb3cud2lkdGgoKSAqIDIgLyAzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIShfdGhpcy5pc19zbGlkZWFibGUgJiYgY2FuX3NsaWRlICYmIGRpcmVjdGlvbl92YWxpZCAmJiBpc19pbnNpZGVfYm91bmRhcmllcykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuaXNfc2xpZGluZyA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAncGFuZW5kJyAmJiAoX3RoaXMucHJldmlvdXNfZXZlbnQgPT09ICdwYW5sZWZ0JyB8fCBfdGhpcy5wcmV2aW91c19ldmVudCA9PT0gJ3BhbnJpZ2h0JykpIHtcbiAgICAgICAgICAgICAgZHVyYXRpb24gPSBfdGhpcy5zZXR0aW5ncy5kdXJhdGlvbiAqIGUuZGlzdGFuY2UgLyBfdGhpcy53aWR0aDtcbiAgICAgICAgICAgICAgaWYgKGUuZGlzdGFuY2UgPiBfdGhpcy53aWR0aCAqIDAuNSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc192aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZV90b2dnbGUoZmFsc2UsIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgIF90aGlzLmxvZygnU2xpZGUgb3V0Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlX3RvZ2dsZSh0cnVlLCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICBfdGhpcy5sb2coJ1NsaWRlIGluJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmxvZygnU2xpZGUgYmFjaycpO1xuICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlX3RvZ2dsZShfdGhpcy5pc192aXNpYmxlLCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuYW5pbWF0ZS5zZXQoX3RoaXMuc2lkZWJhciwge1xuICAgICAgICAgICAgICB4OiB4XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5zbGlkZXNfY29udGVudCkge1xuICAgICAgICAgICAgICBfdGhpcy5hbmltYXRlLnNldChfdGhpcy5jb250ZW50LCB7XG4gICAgICAgICAgICAgICAgeDogeFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnByZXZpb3VzX2V2ZW50ID0gZS50eXBlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLmluaXRpYWxpemVfdGFicyA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMuc2lkZWJhcl90YWJzLmVhY2goZnVuY3Rpb24oaW5kZXgsIHRhYikge1xuICAgICAgICAgICAgdmFyIHRhcmdldDtcbiAgICAgICAgICAgIHRhYiA9ICQodGFiKTtcbiAgICAgICAgICAgIHRhcmdldCA9ICQodGFiLmF0dHIoJ2RhdGEtdGFyZ2V0JykpO1xuICAgICAgICAgICAgdGFiLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgX3RoaXMuc2lkZWJhcl90YWJzLnJlbW92ZUNsYXNzKCctYWN0aXZlJyk7XG4gICAgICAgICAgICAgIF90aGlzLnNpZGViYXJfdGFiX2NvbnRlbnRzLnJlbW92ZUNsYXNzKCctYWN0aXZlJyk7XG4gICAgICAgICAgICAgIHRhYi5hZGRDbGFzcygnLWFjdGl2ZScpO1xuICAgICAgICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoJy1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgdGFyZ2V0LnRyaWdnZXJIYW5kbGVyKCd0YWIuc2hvdycsIFt0YXJnZXRdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLmluaXRpYWxpemVfY2hhdCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGNoYXRfZm9ybSwgY2hhdF9mb3JtX21lc3NhZ2UsIGNoYXRfaXRlbXMsIGNoYXRfdXNlciwgY2hhdF92aWV3X3RhYiwgY2hhdF93cmFwcGVyO1xuICAgICAgICAgIGNoYXRfdmlld190YWIgPSAkKCcuY2hhdC12aWV3LXRhYicsIF90aGlzLnNpZGViYXIpO1xuICAgICAgICAgIGNoYXRfd3JhcHBlciA9ICQoJy5jaGF0JywgY2hhdF92aWV3X3RhYik7XG4gICAgICAgICAgY2hhdF9pdGVtcyA9ICQoJy5jaGF0LWl0ZW1zJywgY2hhdF92aWV3X3RhYik7XG4gICAgICAgICAgY2hhdF9mb3JtID0gJCgnLmNoYXQtZm9ybScsIGNoYXRfdmlld190YWIpO1xuICAgICAgICAgIGNoYXRfdXNlciA9ICQoJy5jaGF0LXVzZXInLCBjaGF0X3ZpZXdfdGFiKTtcbiAgICAgICAgICBjaGF0X2Zvcm1fbWVzc2FnZSA9ICQoJ2lucHV0W25hbWU9XCJtZXNzYWdlXCJdJywgY2hhdF92aWV3X3RhYik7XG4gICAgICAgICAgaWYgKGNoYXRfdmlld190YWIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY2hhdF9mb3JtLm9uKCdzdWJtaXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIHZhciBtZXNzYWdlO1xuICAgICAgICAgICAgICBtZXNzYWdlID0gY2hhdF9mb3JtX21lc3NhZ2UudmFsKCk7XG4gICAgICAgICAgICAgIGNoYXRfZm9ybV9tZXNzYWdlLnZhbCgnJyk7XG4gICAgICAgICAgICAgIGNoYXRfaXRlbXMuYXBwZW5kKCQoJzxkaXY+Jywge1xuICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogJ2NoYXQtaXRlbSAtdG8nLFxuICAgICAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2VcbiAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5pbml0aWFsaXplX3RvZ2dsZSA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMuc2lkZWJhcl90b2dnbGUub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy5zbGlkZV90b2dnbGUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5sb2cgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChfdGhpcy5zZXR0aW5ncy5kZWJ1Zykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMuc2lkZWJhcl9pZCwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMuaW5pdGlhbGl6ZV9hdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgX3RoaXMuaW5pdGlhbGl6ZV9zY3JvbGxiYXIoKTtcbiAgICAgICAgICBfdGhpcy5pbml0aWFsaXplX21lbnUoKTtcbiAgICAgICAgICBfdGhpcy5pbml0aWFsaXplX3RvZ2dsZSgpO1xuICAgICAgICAgIF90aGlzLmluaXRpYWxpemVfdGFicygpO1xuICAgICAgICAgIF90aGlzLmluaXRpYWxpemVfY2hhdCgpO1xuICAgICAgICAgIF90aGlzLmJpbmRfbWVudSgpO1xuICAgICAgICAgIF90aGlzLmJpbmRfcmVzaXplKCk7XG4gICAgICAgICAgX3RoaXMuYmluZF9ib2R5X2NsaWNrKCk7XG4gICAgICAgICAgaWYgKF90aGlzLnNldHRpbmdzLnRvdWNoKSB7XG4gICAgICAgICAgICBfdGhpcy5iaW5kX3NsaWRlYWJsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfdGhpcy5vbl9yZXNpemUoKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfTtcbiAgICAkLnNpZGViYXIuYWN0aXZlID0gbnVsbDtcbiAgICByZXR1cm4gJC5mbi5zaWRlYmFyID0gZnVuY3Rpb24ob3B0cykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgICBpZiAoISQuZGF0YShlbGVtZW50LCBcInNpZGViYXJcIikpIHtcbiAgICAgICAgICByZXR1cm4gJC5kYXRhKGVsZW1lbnQsIFwic2lkZWJhclwiLCBuZXcgJC5zaWRlYmFyKGVsZW1lbnQsIG9wdHMpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSkod2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iXX0="}