{"version":3,"sources":["build/node_modules/browser-pack/_prelude.js","build/vendors/fullcalendar/build/vendors/fullcalendar/fullcalendar.js"],"names":[],"mappings":"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","file":"fullcalendar.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*!\n * FullCalendar v3.1.0\n * Docs & License: http://fullcalendar.io/\n * (c) 2016 Adam Shaw\n */\n\n(function(factory) {\n\tfactory(jQuery, moment);\n})(function($, moment) {\n\n;;\n\nvar FC = $.fullCalendar = {\n\tversion: \"3.1.0\",\n\tinternalApiVersion: 7\n};\nvar fcViews = FC.views = {};\n\n\n$.fn.fullCalendar = function(options) {\n\tvar args = Array.prototype.slice.call(arguments, 1); // for a possible method call\n\tvar res = this; // what this function will return (this jQuery object by default)\n\n\tthis.each(function(i, _element) { // loop each DOM element involved\n\t\tvar element = $(_element);\n\t\tvar calendar = element.data('fullCalendar'); // get the existing calendar object (if any)\n\t\tvar singleRes; // the returned value of this single method call\n\n\t\t// a method call\n\t\tif (typeof options === 'string') {\n\t\t\tif (calendar && $.isFunction(calendar[options])) {\n\t\t\t\tsingleRes = calendar[options].apply(calendar, args);\n\t\t\t\tif (!i) {\n\t\t\t\t\tres = singleRes; // record the first method call result\n\t\t\t\t}\n\t\t\t\tif (options === 'destroy') { // for the destroy method, must remove Calendar object data\n\t\t\t\t\telement.removeData('fullCalendar');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// a new calendar initialization\n\t\telse if (!calendar) { // don't initialize twice\n\t\t\tcalendar = new Calendar(element, options);\n\t\t\telement.data('fullCalendar', calendar);\n\t\t\tcalendar.render();\n\t\t}\n\t});\n\n\treturn res;\n};\n\n\nvar complexOptions = [ // names of options that are objects whose properties should be combined\n\t'header',\n\t'footer',\n\t'buttonText',\n\t'buttonIcons',\n\t'themeButtonIcons'\n];\n\n\n// Merges an array of option objects into a single object\nfunction mergeOptions(optionObjs) {\n\treturn mergeProps(optionObjs, complexOptions);\n}\n\n;;\n\n// exports\nFC.intersectRanges = intersectRanges;\nFC.applyAll = applyAll;\nFC.debounce = debounce;\nFC.isInt = isInt;\nFC.htmlEscape = htmlEscape;\nFC.cssToStr = cssToStr;\nFC.proxy = proxy;\nFC.capitaliseFirstLetter = capitaliseFirstLetter;\n\n\n/* FullCalendar-specific DOM Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\nfunction compensateScroll(rowEls, scrollbarWidths) {\n\tif (scrollbarWidths.left) {\n\t\trowEls.css({\n\t\t\t'border-left-width': 1,\n\t\t\t'margin-left': scrollbarWidths.left - 1\n\t\t});\n\t}\n\tif (scrollbarWidths.right) {\n\t\trowEls.css({\n\t\t\t'border-right-width': 1,\n\t\t\t'margin-right': scrollbarWidths.right - 1\n\t\t});\n\t}\n}\n\n\n// Undoes compensateScroll and restores all borders/margins\nfunction uncompensateScroll(rowEls) {\n\trowEls.css({\n\t\t'margin-left': '',\n\t\t'margin-right': '',\n\t\t'border-left-width': '',\n\t\t'border-right-width': ''\n\t});\n}\n\n\n// Make the mouse cursor express that an event is not allowed in the current area\nfunction disableCursor() {\n\t$('body').addClass('fc-not-allowed');\n}\n\n\n// Returns the mouse cursor to its original look\nfunction enableCursor() {\n\t$('body').removeClass('fc-not-allowed');\n}\n\n\n// Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and\n// reduces the available height.\nfunction distributeHeight(els, availableHeight, shouldRedistribute) {\n\n\t// *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\n\t// and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\n\n\tvar minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\n\tvar minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\n\tvar flexEls = []; // elements that are allowed to expand. array of DOM nodes\n\tvar flexOffsets = []; // amount of vertical space it takes up\n\tvar flexHeights = []; // actual css height\n\tvar usedHeight = 0;\n\n\tundistributeHeight(els); // give all elements their natural height\n\n\t// find elements that are below the recommended height (expandable).\n\t// important to query for heights in a single first pass (to avoid reflow oscillation).\n\tels.each(function(i, el) {\n\t\tvar minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\n\t\tvar naturalOffset = $(el).outerHeight(true);\n\n\t\tif (naturalOffset < minOffset) {\n\t\t\tflexEls.push(el);\n\t\t\tflexOffsets.push(naturalOffset);\n\t\t\tflexHeights.push($(el).height());\n\t\t}\n\t\telse {\n\t\t\t// this element stretches past recommended height (non-expandable). mark the space as occupied.\n\t\t\tusedHeight += naturalOffset;\n\t\t}\n\t});\n\n\t// readjust the recommended height to only consider the height available to non-maxed-out rows.\n\tif (shouldRedistribute) {\n\t\tavailableHeight -= usedHeight;\n\t\tminOffset1 = Math.floor(availableHeight / flexEls.length);\n\t\tminOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\n\t}\n\n\t// assign heights to all expandable elements\n\t$(flexEls).each(function(i, el) {\n\t\tvar minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\n\t\tvar naturalOffset = flexOffsets[i];\n\t\tvar naturalHeight = flexHeights[i];\n\t\tvar newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\n\n\t\tif (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\n\t\t\t$(el).height(newHeight);\n\t\t}\n\t});\n}\n\n\n// Undoes distrubuteHeight, restoring all els to their natural height\nfunction undistributeHeight(els) {\n\tels.height('');\n}\n\n\n// Given `els`, a jQuery set of <td> cells, find the cell with the largest natural width and set the widths of all the\n// cells to be that width.\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\nfunction matchCellWidths(els) {\n\tvar maxInnerWidth = 0;\n\n\tels.find('> *').each(function(i, innerEl) {\n\t\tvar innerWidth = $(innerEl).outerWidth();\n\t\tif (innerWidth > maxInnerWidth) {\n\t\t\tmaxInnerWidth = innerWidth;\n\t\t}\n\t});\n\n\tmaxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\n\n\tels.width(maxInnerWidth);\n\n\treturn maxInnerWidth;\n}\n\n\n// Given one element that resides inside another,\n// Subtracts the height of the inner element from the outer element.\nfunction subtractInnerElHeight(outerEl, innerEl) {\n\tvar both = outerEl.add(innerEl);\n\tvar diff;\n\n\t// effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\n\tboth.css({\n\t\tposition: 'relative', // cause a reflow, which will force fresh dimension recalculation\n\t\tleft: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\n\t});\n\tdiff = outerEl.outerHeight() - innerEl.outerHeight(); // grab the dimensions\n\tboth.css({ position: '', left: '' }); // undo hack\n\n\treturn diff;\n}\n\n\n/* Element Geom Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.getOuterRect = getOuterRect;\nFC.getClientRect = getClientRect;\nFC.getContentRect = getContentRect;\nFC.getScrollbarWidths = getScrollbarWidths;\n\n\n// borrowed from https://github.com/jquery/jquery-ui/blob/1.11.0/ui/core.js#L51\nfunction getScrollParent(el) {\n\tvar position = el.css('position'),\n\t\tscrollParent = el.parents().filter(function() {\n\t\t\tvar parent = $(this);\n\t\t\treturn (/(auto|scroll)/).test(\n\t\t\t\tparent.css('overflow') + parent.css('overflow-y') + parent.css('overflow-x')\n\t\t\t);\n\t\t}).eq(0);\n\n\treturn position === 'fixed' || !scrollParent.length ? $(el[0].ownerDocument || document) : scrollParent;\n}\n\n\n// Queries the outer bounding area of a jQuery element.\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\n// Origin is optional.\nfunction getOuterRect(el, origin) {\n\tvar offset = el.offset();\n\tvar left = offset.left - (origin ? origin.left : 0);\n\tvar top = offset.top - (origin ? origin.top : 0);\n\n\treturn {\n\t\tleft: left,\n\t\tright: left + el.outerWidth(),\n\t\ttop: top,\n\t\tbottom: top + el.outerHeight()\n\t};\n}\n\n\n// Queries the area within the margin/border/scrollbars of a jQuery element. Does not go within the padding.\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\n// Origin is optional.\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\nfunction getClientRect(el, origin) {\n\tvar offset = el.offset();\n\tvar scrollbarWidths = getScrollbarWidths(el);\n\tvar left = offset.left + getCssFloat(el, 'border-left-width') + scrollbarWidths.left - (origin ? origin.left : 0);\n\tvar top = offset.top + getCssFloat(el, 'border-top-width') + scrollbarWidths.top - (origin ? origin.top : 0);\n\n\treturn {\n\t\tleft: left,\n\t\tright: left + el[0].clientWidth, // clientWidth includes padding but NOT scrollbars\n\t\ttop: top,\n\t\tbottom: top + el[0].clientHeight // clientHeight includes padding but NOT scrollbars\n\t};\n}\n\n\n// Queries the area within the margin/border/padding of a jQuery element. Assumed not to have scrollbars.\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\n// Origin is optional.\nfunction getContentRect(el, origin) {\n\tvar offset = el.offset(); // just outside of border, margin not included\n\tvar left = offset.left + getCssFloat(el, 'border-left-width') + getCssFloat(el, 'padding-left') -\n\t\t(origin ? origin.left : 0);\n\tvar top = offset.top + getCssFloat(el, 'border-top-width') + getCssFloat(el, 'padding-top') -\n\t\t(origin ? origin.top : 0);\n\n\treturn {\n\t\tleft: left,\n\t\tright: left + el.width(),\n\t\ttop: top,\n\t\tbottom: top + el.height()\n\t};\n}\n\n\n// Returns the computed left/right/top/bottom scrollbar widths for the given jQuery element.\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\nfunction getScrollbarWidths(el) {\n\tvar leftRightWidth = el.innerWidth() - el[0].clientWidth; // the paddings cancel out, leaving the scrollbars\n\tvar widths = {\n\t\tleft: 0,\n\t\tright: 0,\n\t\ttop: 0,\n\t\tbottom: el.innerHeight() - el[0].clientHeight // the paddings cancel out, leaving the bottom scrollbar\n\t};\n\n\tif (getIsLeftRtlScrollbars() && el.css('direction') == 'rtl') { // is the scrollbar on the left side?\n\t\twidths.left = leftRightWidth;\n\t}\n\telse {\n\t\twidths.right = leftRightWidth;\n\t}\n\n\treturn widths;\n}\n\n\n// Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\n\nvar _isLeftRtlScrollbars = null;\n\nfunction getIsLeftRtlScrollbars() { // responsible for caching the computation\n\tif (_isLeftRtlScrollbars === null) {\n\t\t_isLeftRtlScrollbars = computeIsLeftRtlScrollbars();\n\t}\n\treturn _isLeftRtlScrollbars;\n}\n\nfunction computeIsLeftRtlScrollbars() { // creates an offscreen test element, then removes it\n\tvar el = $('<div><div/></div>')\n\t\t.css({\n\t\t\tposition: 'absolute',\n\t\t\ttop: -1000,\n\t\t\tleft: 0,\n\t\t\tborder: 0,\n\t\t\tpadding: 0,\n\t\t\toverflow: 'scroll',\n\t\t\tdirection: 'rtl'\n\t\t})\n\t\t.appendTo('body');\n\tvar innerEl = el.children();\n\tvar res = innerEl.offset().left > el.offset().left; // is the inner div shifted to accommodate a left scrollbar?\n\tel.remove();\n\treturn res;\n}\n\n\n// Retrieves a jQuery element's computed CSS value as a floating-point number.\n// If the queried value is non-numeric (ex: IE can return \"medium\" for border width), will just return zero.\nfunction getCssFloat(el, prop) {\n\treturn parseFloat(el.css(prop)) || 0;\n}\n\n\n/* Mouse / Touch Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.preventDefault = preventDefault;\n\n\n// Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\nfunction isPrimaryMouseButton(ev) {\n\treturn ev.which == 1 && !ev.ctrlKey;\n}\n\n\nfunction getEvX(ev) {\n\tif (ev.pageX !== undefined) {\n\t\treturn ev.pageX;\n\t}\n\tvar touches = ev.originalEvent.touches;\n\tif (touches) {\n\t\treturn touches[0].pageX;\n\t}\n}\n\n\nfunction getEvY(ev) {\n\tif (ev.pageY !== undefined) {\n\t\treturn ev.pageY;\n\t}\n\tvar touches = ev.originalEvent.touches;\n\tif (touches) {\n\t\treturn touches[0].pageY;\n\t}\n}\n\n\nfunction getEvIsTouch(ev) {\n\treturn /^touch/.test(ev.type);\n}\n\n\nfunction preventSelection(el) {\n\tel.addClass('fc-unselectable')\n\t\t.on('selectstart', preventDefault);\n}\n\n\n// Stops a mouse/touch event from doing it's native browser action\nfunction preventDefault(ev) {\n\tev.preventDefault();\n}\n\n\n// attach a handler to get called when ANY scroll action happens on the page.\n// this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n// http://stackoverflow.com/a/32954565/96342\n// returns `true` on success.\nfunction bindAnyScroll(handler) {\n\tif (window.addEventListener) {\n\t\twindow.addEventListener('scroll', handler, true); // useCapture=true\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n// undoes bindAnyScroll. must pass in the original function.\n// returns `true` on success.\nfunction unbindAnyScroll(handler) {\n\tif (window.removeEventListener) {\n\t\twindow.removeEventListener('scroll', handler, true); // useCapture=true\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n/* General Geometry Utils\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.intersectRects = intersectRects;\n\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\nfunction intersectRects(rect1, rect2) {\n\tvar res = {\n\t\tleft: Math.max(rect1.left, rect2.left),\n\t\tright: Math.min(rect1.right, rect2.right),\n\t\ttop: Math.max(rect1.top, rect2.top),\n\t\tbottom: Math.min(rect1.bottom, rect2.bottom)\n\t};\n\n\tif (res.left < res.right && res.top < res.bottom) {\n\t\treturn res;\n\t}\n\treturn false;\n}\n\n\n// Returns a new point that will have been moved to reside within the given rectangle\nfunction constrainPoint(point, rect) {\n\treturn {\n\t\tleft: Math.min(Math.max(point.left, rect.left), rect.right),\n\t\ttop: Math.min(Math.max(point.top, rect.top), rect.bottom)\n\t};\n}\n\n\n// Returns a point that is the center of the given rectangle\nfunction getRectCenter(rect) {\n\treturn {\n\t\tleft: (rect.left + rect.right) / 2,\n\t\ttop: (rect.top + rect.bottom) / 2\n\t};\n}\n\n\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\nfunction diffPoints(point1, point2) {\n\treturn {\n\t\tleft: point1.left - point2.left,\n\t\ttop: point1.top - point2.top\n\t};\n}\n\n\n/* Object Ordering by Field\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.parseFieldSpecs = parseFieldSpecs;\nFC.compareByFieldSpecs = compareByFieldSpecs;\nFC.compareByFieldSpec = compareByFieldSpec;\nFC.flexibleCompare = flexibleCompare;\n\n\nfunction parseFieldSpecs(input) {\n\tvar specs = [];\n\tvar tokens = [];\n\tvar i, token;\n\n\tif (typeof input === 'string') {\n\t\ttokens = input.split(/\\s*,\\s*/);\n\t}\n\telse if (typeof input === 'function') {\n\t\ttokens = [ input ];\n\t}\n\telse if ($.isArray(input)) {\n\t\ttokens = input;\n\t}\n\n\tfor (i = 0; i < tokens.length; i++) {\n\t\ttoken = tokens[i];\n\n\t\tif (typeof token === 'string') {\n\t\t\tspecs.push(\n\t\t\t\ttoken.charAt(0) == '-' ?\n\t\t\t\t\t{ field: token.substring(1), order: -1 } :\n\t\t\t\t\t{ field: token, order: 1 }\n\t\t\t);\n\t\t}\n\t\telse if (typeof token === 'function') {\n\t\t\tspecs.push({ func: token });\n\t\t}\n\t}\n\n\treturn specs;\n}\n\n\nfunction compareByFieldSpecs(obj1, obj2, fieldSpecs) {\n\tvar i;\n\tvar cmp;\n\n\tfor (i = 0; i < fieldSpecs.length; i++) {\n\t\tcmp = compareByFieldSpec(obj1, obj2, fieldSpecs[i]);\n\t\tif (cmp) {\n\t\t\treturn cmp;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\n\nfunction compareByFieldSpec(obj1, obj2, fieldSpec) {\n\tif (fieldSpec.func) {\n\t\treturn fieldSpec.func(obj1, obj2);\n\t}\n\treturn flexibleCompare(obj1[fieldSpec.field], obj2[fieldSpec.field]) *\n\t\t(fieldSpec.order || 1);\n}\n\n\nfunction flexibleCompare(a, b) {\n\tif (!a && !b) {\n\t\treturn 0;\n\t}\n\tif (b == null) {\n\t\treturn -1;\n\t}\n\tif (a == null) {\n\t\treturn 1;\n\t}\n\tif ($.type(a) === 'string' || $.type(b) === 'string') {\n\t\treturn String(a).localeCompare(String(b));\n\t}\n\treturn a - b;\n}\n\n\n/* FullCalendar-specific Misc Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\n// Computes the intersection of the two ranges. Will return fresh date clones in a range.\n// Returns undefined if no intersection.\n// Expects all dates to be normalized to the same timezone beforehand.\n// TODO: move to date section?\nfunction intersectRanges(subjectRange, constraintRange) {\n\tvar subjectStart = subjectRange.start;\n\tvar subjectEnd = subjectRange.end;\n\tvar constraintStart = constraintRange.start;\n\tvar constraintEnd = constraintRange.end;\n\tvar segStart, segEnd;\n\tvar isStart, isEnd;\n\n\tif (subjectEnd > constraintStart && subjectStart < constraintEnd) { // in bounds at all?\n\n\t\tif (subjectStart >= constraintStart) {\n\t\t\tsegStart = subjectStart.clone();\n\t\t\tisStart = true;\n\t\t}\n\t\telse {\n\t\t\tsegStart = constraintStart.clone();\n\t\t\tisStart =  false;\n\t\t}\n\n\t\tif (subjectEnd <= constraintEnd) {\n\t\t\tsegEnd = subjectEnd.clone();\n\t\t\tisEnd = true;\n\t\t}\n\t\telse {\n\t\t\tsegEnd = constraintEnd.clone();\n\t\t\tisEnd = false;\n\t\t}\n\n\t\treturn {\n\t\t\tstart: segStart,\n\t\t\tend: segEnd,\n\t\t\tisStart: isStart,\n\t\t\tisEnd: isEnd\n\t\t};\n\t}\n}\n\n\n/* Date Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.computeIntervalUnit = computeIntervalUnit;\nFC.divideRangeByDuration = divideRangeByDuration;\nFC.divideDurationByDuration = divideDurationByDuration;\nFC.multiplyDuration = multiplyDuration;\nFC.durationHasTime = durationHasTime;\n\nvar dayIDs = [ 'sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat' ];\nvar intervalUnits = [ 'year', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond' ];\n\n\n// Diffs the two moments into a Duration where full-days are recorded first, then the remaining time.\n// Moments will have their timezones normalized.\nfunction diffDayTime(a, b) {\n\treturn moment.duration({\n\t\tdays: a.clone().stripTime().diff(b.clone().stripTime(), 'days'),\n\t\tms: a.time() - b.time() // time-of-day from day start. disregards timezone\n\t});\n}\n\n\n// Diffs the two moments via their start-of-day (regardless of timezone). Produces whole-day durations.\nfunction diffDay(a, b) {\n\treturn moment.duration({\n\t\tdays: a.clone().stripTime().diff(b.clone().stripTime(), 'days')\n\t});\n}\n\n\n// Diffs two moments, producing a duration, made of a whole-unit-increment of the given unit. Uses rounding.\nfunction diffByUnit(a, b, unit) {\n\treturn moment.duration(\n\t\tMath.round(a.diff(b, unit, true)), // returnFloat=true\n\t\tunit\n\t);\n}\n\n\n// Computes the unit name of the largest whole-unit period of time.\n// For example, 48 hours will be \"days\" whereas 49 hours will be \"hours\".\n// Accepts start/end, a range object, or an original duration object.\nfunction computeIntervalUnit(start, end) {\n\tvar i, unit;\n\tvar val;\n\n\tfor (i = 0; i < intervalUnits.length; i++) {\n\t\tunit = intervalUnits[i];\n\t\tval = computeRangeAs(unit, start, end);\n\n\t\tif (val >= 1 && isInt(val)) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn unit; // will be \"milliseconds\" if nothing else matches\n}\n\n\n// Computes the number of units (like \"hours\") in the given range.\n// Range can be a {start,end} object, separate start/end args, or a Duration.\n// Results are based on Moment's .as() and .diff() methods, so results can depend on internal handling\n// of month-diffing logic (which tends to vary from version to version).\nfunction computeRangeAs(unit, start, end) {\n\n\tif (end != null) { // given start, end\n\t\treturn end.diff(start, unit, true);\n\t}\n\telse if (moment.isDuration(start)) { // given duration\n\t\treturn start.as(unit);\n\t}\n\telse { // given { start, end } range object\n\t\treturn start.end.diff(start.start, unit, true);\n\t}\n}\n\n\n// Intelligently divides a range (specified by a start/end params) by a duration\nfunction divideRangeByDuration(start, end, dur) {\n\tvar months;\n\n\tif (durationHasTime(dur)) {\n\t\treturn (end - start) / dur;\n\t}\n\tmonths = dur.asMonths();\n\tif (Math.abs(months) >= 1 && isInt(months)) {\n\t\treturn end.diff(start, 'months', true) / months;\n\t}\n\treturn end.diff(start, 'days', true) / dur.asDays();\n}\n\n\n// Intelligently divides one duration by another\nfunction divideDurationByDuration(dur1, dur2) {\n\tvar months1, months2;\n\n\tif (durationHasTime(dur1) || durationHasTime(dur2)) {\n\t\treturn dur1 / dur2;\n\t}\n\tmonths1 = dur1.asMonths();\n\tmonths2 = dur2.asMonths();\n\tif (\n\t\tMath.abs(months1) >= 1 && isInt(months1) &&\n\t\tMath.abs(months2) >= 1 && isInt(months2)\n\t) {\n\t\treturn months1 / months2;\n\t}\n\treturn dur1.asDays() / dur2.asDays();\n}\n\n\n// Intelligently multiplies a duration by a number\nfunction multiplyDuration(dur, n) {\n\tvar months;\n\n\tif (durationHasTime(dur)) {\n\t\treturn moment.duration(dur * n);\n\t}\n\tmonths = dur.asMonths();\n\tif (Math.abs(months) >= 1 && isInt(months)) {\n\t\treturn moment.duration({ months: months * n });\n\t}\n\treturn moment.duration({ days: dur.asDays() * n });\n}\n\n\n// Returns a boolean about whether the given duration has any time parts (hours/minutes/seconds/ms)\nfunction durationHasTime(dur) {\n\treturn Boolean(dur.hours() || dur.minutes() || dur.seconds() || dur.milliseconds());\n}\n\n\nfunction isNativeDate(input) {\n\treturn  Object.prototype.toString.call(input) === '[object Date]' || input instanceof Date;\n}\n\n\n// Returns a boolean about whether the given input is a time string, like \"06:40:00\" or \"06:00\"\nfunction isTimeString(str) {\n\treturn /^\\d+\\:\\d+(?:\\:\\d+\\.?(?:\\d{3})?)?$/.test(str);\n}\n\n\n/* Logging and Debug\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.log = function() {\n\tvar console = window.console;\n\n\tif (console && console.log) {\n\t\treturn console.log.apply(console, arguments);\n\t}\n};\n\nFC.warn = function() {\n\tvar console = window.console;\n\n\tif (console && console.warn) {\n\t\treturn console.warn.apply(console, arguments);\n\t}\n\telse {\n\t\treturn FC.log.apply(FC, arguments);\n\t}\n};\n\n\n/* General Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar hasOwnPropMethod = {}.hasOwnProperty;\n\n\n// Merges an array of objects into a single object.\n// The second argument allows for an array of property names who's object values will be merged together.\nfunction mergeProps(propObjs, complexProps) {\n\tvar dest = {};\n\tvar i, name;\n\tvar complexObjs;\n\tvar j, val;\n\tvar props;\n\n\tif (complexProps) {\n\t\tfor (i = 0; i < complexProps.length; i++) {\n\t\t\tname = complexProps[i];\n\t\t\tcomplexObjs = [];\n\n\t\t\t// collect the trailing object values, stopping when a non-object is discovered\n\t\t\tfor (j = propObjs.length - 1; j >= 0; j--) {\n\t\t\t\tval = propObjs[j][name];\n\n\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\tcomplexObjs.unshift(val);\n\t\t\t\t}\n\t\t\t\telse if (val !== undefined) {\n\t\t\t\t\tdest[name] = val; // if there were no objects, this value will be used\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if the trailing values were objects, use the merged value\n\t\t\tif (complexObjs.length) {\n\t\t\t\tdest[name] = mergeProps(complexObjs);\n\t\t\t}\n\t\t}\n\t}\n\n\t// copy values into the destination, going from last to first\n\tfor (i = propObjs.length - 1; i >= 0; i--) {\n\t\tprops = propObjs[i];\n\n\t\tfor (name in props) {\n\t\t\tif (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\n\t\t\t\tdest[name] = props[name];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dest;\n}\n\n\n// Create an object that has the given prototype. Just like Object.create\nfunction createObject(proto) {\n\tvar f = function() {};\n\tf.prototype = proto;\n\treturn new f();\n}\nFC.createObject = createObject;\n\n\nfunction copyOwnProps(src, dest) {\n\tfor (var name in src) {\n\t\tif (hasOwnProp(src, name)) {\n\t\t\tdest[name] = src[name];\n\t\t}\n\t}\n}\n\n\nfunction hasOwnProp(obj, name) {\n\treturn hasOwnPropMethod.call(obj, name);\n}\n\n\n// Is the given value a non-object non-function value?\nfunction isAtomic(val) {\n\treturn /undefined|null|boolean|number|string/.test($.type(val));\n}\n\n\nfunction applyAll(functions, thisObj, args) {\n\tif ($.isFunction(functions)) {\n\t\tfunctions = [ functions ];\n\t}\n\tif (functions) {\n\t\tvar i;\n\t\tvar ret;\n\t\tfor (i=0; i<functions.length; i++) {\n\t\t\tret = functions[i].apply(thisObj, args) || ret;\n\t\t}\n\t\treturn ret;\n\t}\n}\n\n\nfunction firstDefined() {\n\tfor (var i=0; i<arguments.length; i++) {\n\t\tif (arguments[i] !== undefined) {\n\t\t\treturn arguments[i];\n\t\t}\n\t}\n}\n\n\nfunction htmlEscape(s) {\n\treturn (s + '').replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/'/g, '&#039;')\n\t\t.replace(/\"/g, '&quot;')\n\t\t.replace(/\\n/g, '<br />');\n}\n\n\nfunction stripHtmlEntities(text) {\n\treturn text.replace(/&.*?;/g, '');\n}\n\n\n// Given a hash of CSS properties, returns a string of CSS.\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\nfunction cssToStr(cssProps) {\n\tvar statements = [];\n\n\t$.each(cssProps, function(name, val) {\n\t\tif (val != null) {\n\t\t\tstatements.push(name + ':' + val);\n\t\t}\n\t});\n\n\treturn statements.join(';');\n}\n\n\n// Given an object hash of HTML attribute names to values,\n// generates a string that can be injected between < > in HTML\nfunction attrsToStr(attrs) {\n\tvar parts = [];\n\n\t$.each(attrs, function(name, val) {\n\t\tif (val != null) {\n\t\t\tparts.push(name + '=\"' + htmlEscape(val) + '\"');\n\t\t}\n\t});\n\n\treturn parts.join(' ');\n}\n\n\nfunction capitaliseFirstLetter(str) {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\nfunction compareNumbers(a, b) { // for .sort()\n\treturn a - b;\n}\n\n\nfunction isInt(n) {\n\treturn n % 1 === 0;\n}\n\n\n// Returns a method bound to the given object context.\n// Just like one of the jQuery.proxy signatures, but without the undesired behavior of treating the same method with\n// different contexts as identical when binding/unbinding events.\nfunction proxy(obj, methodName) {\n\tvar method = obj[methodName];\n\n\treturn function() {\n\t\treturn method.apply(obj, arguments);\n\t};\n}\n\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\nfunction debounce(func, wait, immediate) {\n\tvar timeout, args, context, timestamp, result;\n\n\tvar later = function() {\n\t\tvar last = +new Date() - timestamp;\n\t\tif (last < wait) {\n\t\t\ttimeout = setTimeout(later, wait - last);\n\t\t}\n\t\telse {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) {\n\t\t\t\tresult = func.apply(context, args);\n\t\t\t\tcontext = args = null;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn function() {\n\t\tcontext = this;\n\t\targs = arguments;\n\t\ttimestamp = +new Date();\n\t\tvar callNow = immediate && !timeout;\n\t\tif (!timeout) {\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t}\n\t\tif (callNow) {\n\t\t\tresult = func.apply(context, args);\n\t\t\tcontext = args = null;\n\t\t}\n\t\treturn result;\n\t};\n}\n\n;;\n\n/*\nGENERAL NOTE on moments throughout the *entire rest* of the codebase:\nAll moments are assumed to be ambiguously-zoned unless otherwise noted,\nwith the NOTABLE EXCEOPTION of start/end dates that live on *Event Objects*.\nAmbiguously-TIMED moments are assumed to be ambiguously-zoned by nature.\n*/\n\nvar ambigDateOfMonthRegex = /^\\s*\\d{4}-\\d\\d$/;\nvar ambigTimeOrZoneRegex =\n\t/^\\s*\\d{4}-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?)?$/;\nvar newMomentProto = moment.fn; // where we will attach our new methods\nvar oldMomentProto = $.extend({}, newMomentProto); // copy of original moment methods\n\n// tell momentjs to transfer these properties upon clone\nvar momentProperties = moment.momentProperties;\nmomentProperties.push('_fullCalendar');\nmomentProperties.push('_ambigTime');\nmomentProperties.push('_ambigZone');\n\n\n// Creating\n// -------------------------------------------------------------------------------------------------\n\n// Creates a new moment, similar to the vanilla moment(...) constructor, but with\n// extra features (ambiguous time, enhanced formatting). When given an existing moment,\n// it will function as a clone (and retain the zone of the moment). Anything else will\n// result in a moment in the local zone.\nFC.moment = function() {\n\treturn makeMoment(arguments);\n};\n\n// Sames as FC.moment, but forces the resulting moment to be in the UTC timezone.\nFC.moment.utc = function() {\n\tvar mom = makeMoment(arguments, true);\n\n\t// Force it into UTC because makeMoment doesn't guarantee it\n\t// (if given a pre-existing moment for example)\n\tif (mom.hasTime()) { // don't give ambiguously-timed moments a UTC zone\n\t\tmom.utc();\n\t}\n\n\treturn mom;\n};\n\n// Same as FC.moment, but when given an ISO8601 string, the timezone offset is preserved.\n// ISO8601 strings with no timezone offset will become ambiguously zoned.\nFC.moment.parseZone = function() {\n\treturn makeMoment(arguments, true, true);\n};\n\n// Builds an enhanced moment from args. When given an existing moment, it clones. When given a\n// native Date, or called with no arguments (the current time), the resulting moment will be local.\n// Anything else needs to be \"parsed\" (a string or an array), and will be affected by:\n//    parseAsUTC - if there is no zone information, should we parse the input in UTC?\n//    parseZone - if there is zone information, should we force the zone of the moment?\nfunction makeMoment(args, parseAsUTC, parseZone) {\n\tvar input = args[0];\n\tvar isSingleString = args.length == 1 && typeof input === 'string';\n\tvar isAmbigTime;\n\tvar isAmbigZone;\n\tvar ambigMatch;\n\tvar mom;\n\n\tif (moment.isMoment(input) || isNativeDate(input) || input === undefined) {\n\t\tmom = moment.apply(null, args);\n\t}\n\telse { // \"parsing\" is required\n\t\tisAmbigTime = false;\n\t\tisAmbigZone = false;\n\n\t\tif (isSingleString) {\n\t\t\tif (ambigDateOfMonthRegex.test(input)) {\n\t\t\t\t// accept strings like '2014-05', but convert to the first of the month\n\t\t\t\tinput += '-01';\n\t\t\t\targs = [ input ]; // for when we pass it on to moment's constructor\n\t\t\t\tisAmbigTime = true;\n\t\t\t\tisAmbigZone = true;\n\t\t\t}\n\t\t\telse if ((ambigMatch = ambigTimeOrZoneRegex.exec(input))) {\n\t\t\t\tisAmbigTime = !ambigMatch[5]; // no time part?\n\t\t\t\tisAmbigZone = true;\n\t\t\t}\n\t\t}\n\t\telse if ($.isArray(input)) {\n\t\t\t// arrays have no timezone information, so assume ambiguous zone\n\t\t\tisAmbigZone = true;\n\t\t}\n\t\t// otherwise, probably a string with a format\n\n\t\tif (parseAsUTC || isAmbigTime) {\n\t\t\tmom = moment.utc.apply(moment, args);\n\t\t}\n\t\telse {\n\t\t\tmom = moment.apply(null, args);\n\t\t}\n\n\t\tif (isAmbigTime) {\n\t\t\tmom._ambigTime = true;\n\t\t\tmom._ambigZone = true; // ambiguous time always means ambiguous zone\n\t\t}\n\t\telse if (parseZone) { // let's record the inputted zone somehow\n\t\t\tif (isAmbigZone) {\n\t\t\t\tmom._ambigZone = true;\n\t\t\t}\n\t\t\telse if (isSingleString) {\n\t\t\t\tmom.utcOffset(input); // if not a valid zone, will assign UTC\n\t\t\t}\n\t\t}\n\t}\n\n\tmom._fullCalendar = true; // flag for extended functionality\n\n\treturn mom;\n}\n\n\n// Week Number\n// -------------------------------------------------------------------------------------------------\n\n\n// Returns the week number, considering the locale's custom week number calcuation\n// `weeks` is an alias for `week`\nnewMomentProto.week = newMomentProto.weeks = function(input) {\n\tvar weekCalc = this._locale._fullCalendar_weekCalc;\n\n\tif (input == null && typeof weekCalc === 'function') { // custom function only works for getter\n\t\treturn weekCalc(this);\n\t}\n\telse if (weekCalc === 'ISO') {\n\t\treturn oldMomentProto.isoWeek.apply(this, arguments); // ISO getter/setter\n\t}\n\n\treturn oldMomentProto.week.apply(this, arguments); // local getter/setter\n};\n\n\n// Time-of-day\n// -------------------------------------------------------------------------------------------------\n\n// GETTER\n// Returns a Duration with the hours/minutes/seconds/ms values of the moment.\n// If the moment has an ambiguous time, a duration of 00:00 will be returned.\n//\n// SETTER\n// You can supply a Duration, a Moment, or a Duration-like argument.\n// When setting the time, and the moment has an ambiguous time, it then becomes unambiguous.\nnewMomentProto.time = function(time) {\n\n\t// Fallback to the original method (if there is one) if this moment wasn't created via FullCalendar.\n\t// `time` is a generic enough method name where this precaution is necessary to avoid collisions w/ other plugins.\n\tif (!this._fullCalendar) {\n\t\treturn oldMomentProto.time.apply(this, arguments);\n\t}\n\n\tif (time == null) { // getter\n\t\treturn moment.duration({\n\t\t\thours: this.hours(),\n\t\t\tminutes: this.minutes(),\n\t\t\tseconds: this.seconds(),\n\t\t\tmilliseconds: this.milliseconds()\n\t\t});\n\t}\n\telse { // setter\n\n\t\tthis._ambigTime = false; // mark that the moment now has a time\n\n\t\tif (!moment.isDuration(time) && !moment.isMoment(time)) {\n\t\t\ttime = moment.duration(time);\n\t\t}\n\n\t\t// The day value should cause overflow (so 24 hours becomes 00:00:00 of next day).\n\t\t// Only for Duration times, not Moment times.\n\t\tvar dayHours = 0;\n\t\tif (moment.isDuration(time)) {\n\t\t\tdayHours = Math.floor(time.asDays()) * 24;\n\t\t}\n\n\t\t// We need to set the individual fields.\n\t\t// Can't use startOf('day') then add duration. In case of DST at start of day.\n\t\treturn this.hours(dayHours + time.hours())\n\t\t\t.minutes(time.minutes())\n\t\t\t.seconds(time.seconds())\n\t\t\t.milliseconds(time.milliseconds());\n\t}\n};\n\n// Converts the moment to UTC, stripping out its time-of-day and timezone offset,\n// but preserving its YMD. A moment with a stripped time will display no time\n// nor timezone offset when .format() is called.\nnewMomentProto.stripTime = function() {\n\n\tif (!this._ambigTime) {\n\n\t\tthis.utc(true); // keepLocalTime=true (for keeping *date* value)\n\n\t\t// set time to zero\n\t\tthis.set({\n\t\t\thours: 0,\n\t\t\tminutes: 0,\n\t\t\tseconds: 0,\n\t\t\tms: 0\n\t\t});\n\n\t\t// Mark the time as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\n\t\t// which clears all ambig flags.\n\t\tthis._ambigTime = true;\n\t\tthis._ambigZone = true; // if ambiguous time, also ambiguous timezone offset\n\t}\n\n\treturn this; // for chaining\n};\n\n// Returns if the moment has a non-ambiguous time (boolean)\nnewMomentProto.hasTime = function() {\n\treturn !this._ambigTime;\n};\n\n\n// Timezone\n// -------------------------------------------------------------------------------------------------\n\n// Converts the moment to UTC, stripping out its timezone offset, but preserving its\n// YMD and time-of-day. A moment with a stripped timezone offset will display no\n// timezone offset when .format() is called.\nnewMomentProto.stripZone = function() {\n\tvar wasAmbigTime;\n\n\tif (!this._ambigZone) {\n\n\t\twasAmbigTime = this._ambigTime;\n\n\t\tthis.utc(true); // keepLocalTime=true (for keeping date and time values)\n\n\t\t// the above call to .utc()/.utcOffset() unfortunately might clear the ambig flags, so restore\n\t\tthis._ambigTime = wasAmbigTime || false;\n\n\t\t// Mark the zone as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\n\t\t// which clears the ambig flags.\n\t\tthis._ambigZone = true;\n\t}\n\n\treturn this; // for chaining\n};\n\n// Returns of the moment has a non-ambiguous timezone offset (boolean)\nnewMomentProto.hasZone = function() {\n\treturn !this._ambigZone;\n};\n\n\n// implicitly marks a zone\nnewMomentProto.local = function(keepLocalTime) {\n\n\t// for when converting from ambiguously-zoned to local,\n\t// keep the time values when converting from UTC -> local\n\toldMomentProto.local.call(this, this._ambigZone || keepLocalTime);\n\n\t// ensure non-ambiguous\n\t// this probably already happened via local() -> utcOffset(), but don't rely on Moment's internals\n\tthis._ambigTime = false;\n\tthis._ambigZone = false;\n\n\treturn this; // for chaining\n};\n\n\n// implicitly marks a zone\nnewMomentProto.utc = function(keepLocalTime) {\n\n\toldMomentProto.utc.call(this, keepLocalTime);\n\n\t// ensure non-ambiguous\n\t// this probably already happened via utc() -> utcOffset(), but don't rely on Moment's internals\n\tthis._ambigTime = false;\n\tthis._ambigZone = false;\n\n\treturn this;\n};\n\n\n// implicitly marks a zone (will probably get called upon .utc() and .local())\nnewMomentProto.utcOffset = function(tzo) {\n\n\tif (tzo != null) { // setter\n\t\t// these assignments needs to happen before the original zone method is called.\n\t\t// I forget why, something to do with a browser crash.\n\t\tthis._ambigTime = false;\n\t\tthis._ambigZone = false;\n\t}\n\n\treturn oldMomentProto.utcOffset.apply(this, arguments);\n};\n\n\n// Formatting\n// -------------------------------------------------------------------------------------------------\n\nnewMomentProto.format = function() {\n\tif (this._fullCalendar && arguments[0]) { // an enhanced moment? and a format string provided?\n\t\treturn formatDate(this, arguments[0]); // our extended formatting\n\t}\n\tif (this._ambigTime) {\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD');\n\t}\n\tif (this._ambigZone) {\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD[T]HH:mm:ss');\n\t}\n\treturn oldMomentProto.format.apply(this, arguments);\n};\n\nnewMomentProto.toISOString = function() {\n\tif (this._ambigTime) {\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD');\n\t}\n\tif (this._ambigZone) {\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD[T]HH:mm:ss');\n\t}\n\treturn oldMomentProto.toISOString.apply(this, arguments);\n};\n\n;;\n\n// Single Date Formatting\n// -------------------------------------------------------------------------------------------------\n\n\n// call this if you want Moment's original format method to be used\nfunction oldMomentFormat(mom, formatStr) {\n\treturn oldMomentProto.format.call(mom, formatStr); // oldMomentProto defined in moment-ext.js\n}\n\n\n// Formats `date` with a Moment formatting string, but allow our non-zero areas and\n// additional token.\nfunction formatDate(date, formatStr) {\n\treturn formatDateWithChunks(date, getFormatStringChunks(formatStr));\n}\n\n\nfunction formatDateWithChunks(date, chunks) {\n\tvar s = '';\n\tvar i;\n\n\tfor (i=0; i<chunks.length; i++) {\n\t\ts += formatDateWithChunk(date, chunks[i]);\n\t}\n\n\treturn s;\n}\n\n\n// addition formatting tokens we want recognized\nvar tokenOverrides = {\n\tt: function(date) { // \"a\" or \"p\"\n\t\treturn oldMomentFormat(date, 'a').charAt(0);\n\t},\n\tT: function(date) { // \"A\" or \"P\"\n\t\treturn oldMomentFormat(date, 'A').charAt(0);\n\t}\n};\n\n\nfunction formatDateWithChunk(date, chunk) {\n\tvar token;\n\tvar maybeStr;\n\n\tif (typeof chunk === 'string') { // a literal string\n\t\treturn chunk;\n\t}\n\telse if ((token = chunk.token)) { // a token, like \"YYYY\"\n\t\tif (tokenOverrides[token]) {\n\t\t\treturn tokenOverrides[token](date); // use our custom token\n\t\t}\n\t\treturn oldMomentFormat(date, token);\n\t}\n\telse if (chunk.maybe) { // a grouping of other chunks that must be non-zero\n\t\tmaybeStr = formatDateWithChunks(date, chunk.maybe);\n\t\tif (maybeStr.match(/[1-9]/)) {\n\t\t\treturn maybeStr;\n\t\t}\n\t}\n\n\treturn '';\n}\n\n\n// Date Range Formatting\n// -------------------------------------------------------------------------------------------------\n// TODO: make it work with timezone offset\n\n// Using a formatting string meant for a single date, generate a range string, like\n// \"Sep 2 - 9 2013\", that intelligently inserts a separator where the dates differ.\n// If the dates are the same as far as the format string is concerned, just return a single\n// rendering of one date, without any separator.\nfunction formatRange(date1, date2, formatStr, separator, isRTL) {\n\tvar localeData;\n\n\tdate1 = FC.moment.parseZone(date1);\n\tdate2 = FC.moment.parseZone(date2);\n\n\tlocaleData = date1.localeData();\n\n\t// Expand localized format strings, like \"LL\" -> \"MMMM D YYYY\"\n\tformatStr = localeData.longDateFormat(formatStr) || formatStr;\n\t// BTW, this is not important for `formatDate` because it is impossible to put custom tokens\n\t// or non-zero areas in Moment's localized format strings.\n\n\tseparator = separator || ' - ';\n\n\treturn formatRangeWithChunks(\n\t\tdate1,\n\t\tdate2,\n\t\tgetFormatStringChunks(formatStr),\n\t\tseparator,\n\t\tisRTL\n\t);\n}\nFC.formatRange = formatRange; // expose\n\n\nfunction formatRangeWithChunks(date1, date2, chunks, separator, isRTL) {\n\tvar unzonedDate1 = date1.clone().stripZone(); // for formatSimilarChunk\n\tvar unzonedDate2 = date2.clone().stripZone(); // \"\n\tvar chunkStr; // the rendering of the chunk\n\tvar leftI;\n\tvar leftStr = '';\n\tvar rightI;\n\tvar rightStr = '';\n\tvar middleI;\n\tvar middleStr1 = '';\n\tvar middleStr2 = '';\n\tvar middleStr = '';\n\n\t// Start at the leftmost side of the formatting string and continue until you hit a token\n\t// that is not the same between dates.\n\tfor (leftI=0; leftI<chunks.length; leftI++) {\n\t\tchunkStr = formatSimilarChunk(date1, date2, unzonedDate1, unzonedDate2, chunks[leftI]);\n\t\tif (chunkStr === false) {\n\t\t\tbreak;\n\t\t}\n\t\tleftStr += chunkStr;\n\t}\n\n\t// Similarly, start at the rightmost side of the formatting string and move left\n\tfor (rightI=chunks.length-1; rightI>leftI; rightI--) {\n\t\tchunkStr = formatSimilarChunk(date1, date2, unzonedDate1, unzonedDate2,  chunks[rightI]);\n\t\tif (chunkStr === false) {\n\t\t\tbreak;\n\t\t}\n\t\trightStr = chunkStr + rightStr;\n\t}\n\n\t// The area in the middle is different for both of the dates.\n\t// Collect them distinctly so we can jam them together later.\n\tfor (middleI=leftI; middleI<=rightI; middleI++) {\n\t\tmiddleStr1 += formatDateWithChunk(date1, chunks[middleI]);\n\t\tmiddleStr2 += formatDateWithChunk(date2, chunks[middleI]);\n\t}\n\n\tif (middleStr1 || middleStr2) {\n\t\tif (isRTL) {\n\t\t\tmiddleStr = middleStr2 + separator + middleStr1;\n\t\t}\n\t\telse {\n\t\t\tmiddleStr = middleStr1 + separator + middleStr2;\n\t\t}\n\t}\n\n\treturn leftStr + middleStr + rightStr;\n}\n\n\nvar similarUnitMap = {\n\tY: 'year',\n\tM: 'month',\n\tD: 'day', // day of month\n\td: 'day', // day of week\n\t// prevents a separator between anything time-related...\n\tA: 'second', // AM/PM\n\ta: 'second', // am/pm\n\tT: 'second', // A/P\n\tt: 'second', // a/p\n\tH: 'second', // hour (24)\n\th: 'second', // hour (12)\n\tm: 'second', // minute\n\ts: 'second' // second\n};\n// TODO: week maybe?\n\n\n// Given a formatting chunk, and given that both dates are similar in the regard the\n// formatting chunk is concerned, format date1 against `chunk`. Otherwise, return `false`.\nfunction formatSimilarChunk(date1, date2, unzonedDate1, unzonedDate2, chunk) {\n\tvar token;\n\tvar unit;\n\n\tif (typeof chunk === 'string') { // a literal string\n\t\treturn chunk;\n\t}\n\telse if ((token = chunk.token)) {\n\t\tunit = similarUnitMap[token.charAt(0)];\n\n\t\t// are the dates the same for this unit of measurement?\n\t\t// use the unzoned dates for this calculation because unreliable when near DST (bug #2396)\n\t\tif (unit && unzonedDate1.isSame(unzonedDate2, unit)) {\n\t\t\treturn oldMomentFormat(date1, token); // would be the same if we used `date2`\n\t\t\t// BTW, don't support custom tokens\n\t\t}\n\t}\n\n\treturn false; // the chunk is NOT the same for the two dates\n\t// BTW, don't support splitting on non-zero areas\n}\n\n\n// Chunking Utils\n// -------------------------------------------------------------------------------------------------\n\n\nvar formatStringChunkCache = {};\n\n\nfunction getFormatStringChunks(formatStr) {\n\tif (formatStr in formatStringChunkCache) {\n\t\treturn formatStringChunkCache[formatStr];\n\t}\n\treturn (formatStringChunkCache[formatStr] = chunkFormatString(formatStr));\n}\n\n\n// Break the formatting string into an array of chunks\nfunction chunkFormatString(formatStr) {\n\tvar chunks = [];\n\tvar chunker = /\\[([^\\]]*)\\]|\\(([^\\)]*)\\)|(LTS|LT|(\\w)\\4*o?)|([^\\w\\[\\(]+)/g; // TODO: more descrimination\n\tvar match;\n\n\twhile ((match = chunker.exec(formatStr))) {\n\t\tif (match[1]) { // a literal string inside [ ... ]\n\t\t\tchunks.push(match[1]);\n\t\t}\n\t\telse if (match[2]) { // non-zero formatting inside ( ... )\n\t\t\tchunks.push({ maybe: chunkFormatString(match[2]) });\n\t\t}\n\t\telse if (match[3]) { // a formatting token\n\t\t\tchunks.push({ token: match[3] });\n\t\t}\n\t\telse if (match[5]) { // an unenclosed literal string\n\t\t\tchunks.push(match[5]);\n\t\t}\n\t}\n\n\treturn chunks;\n}\n\n\n// Misc Utils\n// -------------------------------------------------------------------------------------------------\n\n\n// granularity only goes up until day\n// TODO: unify with similarUnitMap\nvar tokenGranularities = {\n\tY: { value: 1, unit: 'year' },\n\tM: { value: 2, unit: 'month' },\n\tW: { value: 3, unit: 'week' },\n\tw: { value: 3, unit: 'week' },\n\tD: { value: 4, unit: 'day' }, // day of month\n\td: { value: 4, unit: 'day' } // day of week\n};\n\n// returns a unit string, either 'year', 'month', 'day', or null\n// for the most granular formatting token in the string.\nFC.queryMostGranularFormatUnit = function(formatStr) {\n\tvar chunks = getFormatStringChunks(formatStr);\n\tvar i, chunk;\n\tvar candidate;\n\tvar best;\n\n\tfor (i = 0; i < chunks.length; i++) {\n\t\tchunk = chunks[i];\n\t\tif (chunk.token) {\n\t\t\tcandidate = tokenGranularities[chunk.token.charAt(0)];\n\t\t\tif (candidate) {\n\t\t\t\tif (!best || candidate.value > best.value) {\n\t\t\t\t\tbest = candidate;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (best) {\n\t\treturn best.unit;\n\t}\n\n\treturn null;\n};\n\n;;\n\nFC.Class = Class; // export\n\n// Class that all other classes will inherit from\nfunction Class() { }\n\n\n// Called on a class to create a subclass.\n// Last argument contains instance methods. Any argument before the last are considered mixins.\nClass.extend = function() {\n\tvar len = arguments.length;\n\tvar i;\n\tvar members;\n\n\tfor (i = 0; i < len; i++) {\n\t\tmembers = arguments[i];\n\t\tif (i < len - 1) { // not the last argument?\n\t\t\tmixIntoClass(this, members);\n\t\t}\n\t}\n\n\treturn extendClass(this, members || {}); // members will be undefined if no arguments\n};\n\n\n// Adds new member variables/methods to the class's prototype.\n// Can be called with another class, or a plain object hash containing new members.\nClass.mixin = function(members) {\n\tmixIntoClass(this, members);\n};\n\n\nfunction extendClass(superClass, members) {\n\tvar subClass;\n\n\t// ensure a constructor for the subclass, forwarding all arguments to the super-constructor if it doesn't exist\n\tif (hasOwnProp(members, 'constructor')) {\n\t\tsubClass = members.constructor;\n\t}\n\tif (typeof subClass !== 'function') {\n\t\tsubClass = members.constructor = function() {\n\t\t\tsuperClass.apply(this, arguments);\n\t\t};\n\t}\n\n\t// build the base prototype for the subclass, which is an new object chained to the superclass's prototype\n\tsubClass.prototype = createObject(superClass.prototype);\n\n\t// copy each member variable/method onto the the subclass's prototype\n\tcopyOwnProps(members, subClass.prototype);\n\n\t// copy over all class variables/methods to the subclass, such as `extend` and `mixin`\n\tcopyOwnProps(superClass, subClass);\n\n\treturn subClass;\n}\n\n\nfunction mixIntoClass(theClass, members) {\n\tcopyOwnProps(members, theClass.prototype);\n}\n;;\n\n/*\nWrap jQuery's Deferred Promise object to be slightly more Promise/A+ compliant.\nWith the added non-standard feature of synchronously executing handlers on resolved promises,\nwhich doesn't always happen otherwise (esp with nested .then handlers!?),\nso, this makes things a lot easier, esp because jQuery 3 changed the synchronicity for Deferred objects.\n\nTODO: write tests and more comments\n*/\n\nfunction Promise(executor) {\n\tvar deferred = $.Deferred();\n\tvar promise = deferred.promise();\n\n\tif (typeof executor === 'function') {\n\t\texecutor(\n\t\t\tfunction(value) { // resolve\n\t\t\t\tif (Promise.immediate) {\n\t\t\t\t\tpromise._value = value;\n\t\t\t\t}\n\t\t\t\tdeferred.resolve(value);\n\t\t\t},\n\t\t\tfunction() { // reject\n\t\t\t\tdeferred.reject();\n\t\t\t}\n\t\t);\n\t}\n\n\tif (Promise.immediate) {\n\t\tvar origThen = promise.then;\n\n\t\tpromise.then = function(onFulfilled, onRejected) {\n\t\t\tvar state = promise.state();\n\n\t\t\tif (state === 'resolved') {\n\t\t\t\tif (typeof onFulfilled === 'function') {\n\t\t\t\t\treturn Promise.resolve(onFulfilled(promise._value));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (state === 'rejected') {\n\t\t\t\tif (typeof onRejected === 'function') {\n\t\t\t\t\tonRejected();\n\t\t\t\t\treturn promise; // already rejected\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn origThen.call(promise, onFulfilled, onRejected);\n\t\t};\n\t}\n\n\treturn promise; // instanceof Promise will break :( TODO: make Promise a real class\n}\n\nFC.Promise = Promise;\n\nPromise.immediate = true;\n\n\nPromise.resolve = function(value) {\n\tif (value && typeof value.resolve === 'function') {\n\t\treturn value.promise();\n\t}\n\tif (value && typeof value.then === 'function') {\n\t\treturn value;\n\t}\n\telse {\n\t\tvar deferred = $.Deferred().resolve(value);\n\t\tvar promise = deferred.promise();\n\n\t\tif (Promise.immediate) {\n\t\t\tvar origThen = promise.then;\n\n\t\t\tpromise._value = value;\n\n\t\t\tpromise.then = function(onFulfilled, onRejected) {\n\t\t\t\tif (typeof onFulfilled === 'function') {\n\t\t\t\t\treturn Promise.resolve(onFulfilled(value));\n\t\t\t\t}\n\t\t\t\treturn origThen.call(promise, onFulfilled, onRejected);\n\t\t\t};\n\t\t}\n\n\t\treturn promise;\n\t}\n};\n\n\nPromise.reject = function() {\n\treturn $.Deferred().reject().promise();\n};\n\n\nPromise.all = function(inputs) {\n\tvar hasAllValues = false;\n\tvar values;\n\tvar i, input;\n\n\tif (Promise.immediate) {\n\t\thasAllValues = true;\n\t\tvalues = [];\n\n\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\tinput = inputs[i];\n\n\t\t\tif (input && typeof input.state === 'function' && input.state() === 'resolved' && ('_value' in input)) {\n\t\t\t\tvalues.push(input._value);\n\t\t\t}\n\t\t\telse if (input && typeof input.then === 'function') {\n\t\t\t\thasAllValues = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalues.push(input);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (hasAllValues) {\n\t\treturn Promise.resolve(values);\n\t}\n\telse {\n\t\treturn $.when.apply($.when, inputs).then(function() {\n\t\t\treturn $.when($.makeArray(arguments));\n\t\t});\n\t}\n};\n\n;;\n\n// TODO: write tests and clean up code\n\nfunction TaskQueue(debounceWait) {\n\tvar q = []; // array of runFuncs\n\n\tfunction addTask(taskFunc) {\n\t\treturn new Promise(function(resolve) {\n\n\t\t\t// should run this function when it's taskFunc's turn to run.\n\t\t\t// responsible for popping itself off the queue.\n\t\t\tvar runFunc = function() {\n\t\t\t\tPromise.resolve(taskFunc()) // result might be async, coerce to promise\n\t\t\t\t\t.then(resolve) // resolve TaskQueue::push's promise, for the caller. will receive result of taskFunc.\n\t\t\t\t\t.then(function() {\n\t\t\t\t\t\tq.shift(); // pop itself off\n\n\t\t\t\t\t\t// run the next task, if any\n\t\t\t\t\t\tif (q.length) {\n\t\t\t\t\t\t\tq[0]();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\t// always put the task at the end of the queue, BEFORE running the task\n\t\t\tq.push(runFunc);\n\n\t\t\t// if it's the only task in the queue, run immediately\n\t\t\tif (q.length === 1) {\n\t\t\t\trunFunc();\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.add = // potentially debounce, for the public method\n\t\ttypeof debounceWait === 'number' ?\n\t\t\tdebounce(addTask, debounceWait) :\n\t\t\taddTask; // if not a number (null/undefined/false), no debounce at all\n\n\tthis.addQuickly = addTask; // guaranteed no debounce\n}\n\nFC.TaskQueue = TaskQueue;\n\n/*\nq = new TaskQueue();\n\nfunction work(i) {\n\treturn q.push(function() {\n\t\ttrigger();\n\t\tconsole.log('work' + i);\n\t});\n}\n\nvar cnt = 0;\n\nfunction trigger() {\n\tif (cnt < 5) {\n\t\tcnt++;\n\t\twork(cnt);\n\t}\n}\n\nwork(9);\n*/\n\n;;\n\nvar EmitterMixin = FC.EmitterMixin = {\n\n\t// jQuery-ification via $(this) allows a non-DOM object to have\n\t// the same event handling capabilities (including namespaces).\n\n\n\ton: function(types, handler) {\n\t\t$(this).on(types, this._prepareIntercept(handler));\n\t\treturn this; // for chaining\n\t},\n\n\n\tone: function(types, handler) {\n\t\t$(this).one(types, this._prepareIntercept(handler));\n\t\treturn this; // for chaining\n\t},\n\n\n\t_prepareIntercept: function(handler) {\n\t\t// handlers are always called with an \"event\" object as their first param.\n\t\t// sneak the `this` context and arguments into the extra parameter object\n\t\t// and forward them on to the original handler.\n\t\tvar intercept = function(ev, extra) {\n\t\t\treturn handler.apply(\n\t\t\t\textra.context || this,\n\t\t\t\textra.args || []\n\t\t\t);\n\t\t};\n\n\t\t// mimick jQuery's internal \"proxy\" system (risky, I know)\n\t\t// causing all functions with the same .guid to appear to be the same.\n\t\t// https://github.com/jquery/jquery/blob/2.2.4/src/core.js#L448\n\t\t// this is needed for calling .off with the original non-intercept handler.\n\t\tif (!handler.guid) {\n\t\t\thandler.guid = $.guid++;\n\t\t}\n\t\tintercept.guid = handler.guid;\n\n\t\treturn intercept;\n\t},\n\n\n\toff: function(types, handler) {\n\t\t$(this).off(types, handler);\n\n\t\treturn this; // for chaining\n\t},\n\n\n\ttrigger: function(types) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1); // arguments after the first\n\n\t\t// pass in \"extra\" info to the intercept\n\t\t$(this).triggerHandler(types, { args: args });\n\n\t\treturn this; // for chaining\n\t},\n\n\n\ttriggerWith: function(types, context, args) {\n\n\t\t// `triggerHandler` is less reliant on the DOM compared to `trigger`.\n\t\t// pass in \"extra\" info to the intercept.\n\t\t$(this).triggerHandler(types, { context: context, args: args });\n\n\t\treturn this; // for chaining\n\t}\n\n};\n\n;;\n\n/*\nUtility methods for easily listening to events on another object,\nand more importantly, easily unlistening from them.\n*/\nvar ListenerMixin = FC.ListenerMixin = (function() {\n\tvar guid = 0;\n\tvar ListenerMixin = {\n\n\t\tlistenerId: null,\n\n\t\t/*\n\t\tGiven an `other` object that has on/off methods, bind the given `callback` to an event by the given name.\n\t\tThe `callback` will be called with the `this` context of the object that .listenTo is being called on.\n\t\tCan be called:\n\t\t\t.listenTo(other, eventName, callback)\n\t\tOR\n\t\t\t.listenTo(other, {\n\t\t\t\teventName1: callback1,\n\t\t\t\teventName2: callback2\n\t\t\t})\n\t\t*/\n\t\tlistenTo: function(other, arg, callback) {\n\t\t\tif (typeof arg === 'object') { // given dictionary of callbacks\n\t\t\t\tfor (var eventName in arg) {\n\t\t\t\t\tif (arg.hasOwnProperty(eventName)) {\n\t\t\t\t\t\tthis.listenTo(other, eventName, arg[eventName]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof arg === 'string') {\n\t\t\t\tother.on(\n\t\t\t\t\targ + '.' + this.getListenerNamespace(), // use event namespacing to identify this object\n\t\t\t\t\t$.proxy(callback, this) // always use `this` context\n\t\t\t\t\t\t// the usually-undesired jQuery guid behavior doesn't matter,\n\t\t\t\t\t\t// because we always unbind via namespace\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\tCauses the current object to stop listening to events on the `other` object.\n\t\t`eventName` is optional. If omitted, will stop listening to ALL events on `other`.\n\t\t*/\n\t\tstopListeningTo: function(other, eventName) {\n\t\t\tother.off((eventName || '') + '.' + this.getListenerNamespace());\n\t\t},\n\n\t\t/*\n\t\tReturns a string, unique to this object, to be used for event namespacing\n\t\t*/\n\t\tgetListenerNamespace: function() {\n\t\t\tif (this.listenerId == null) {\n\t\t\t\tthis.listenerId = guid++;\n\t\t\t}\n\t\t\treturn '_listener' + this.listenerId;\n\t\t}\n\n\t};\n\treturn ListenerMixin;\n})();\n;;\n\n// simple class for toggle a `isIgnoringMouse` flag on delay\n// initMouseIgnoring must first be called, with a millisecond delay setting.\nvar MouseIgnorerMixin = {\n\n\tisIgnoringMouse: false, // bool\n\tdelayUnignoreMouse: null, // method\n\n\n\tinitMouseIgnoring: function(delay) {\n\t\tthis.delayUnignoreMouse = debounce(proxy(this, 'unignoreMouse'), delay || 1000);\n\t},\n\n\n\t// temporarily ignore mouse actions on segments\n\ttempIgnoreMouse: function() {\n\t\tthis.isIgnoringMouse = true;\n\t\tthis.delayUnignoreMouse();\n\t},\n\n\n\t// delayUnignoreMouse eventually calls this\n\tunignoreMouse: function() {\n\t\tthis.isIgnoringMouse = false;\n\t}\n\n};\n\n;;\n\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n\t- className (string)\n\t- content (HTML string or jQuery element set)\n\t- parentEl\n\t- top\n\t- left\n\t- right (the x coord of where the right edge should be. not a \"CSS\" right)\n\t- autoHide (boolean)\n\t- show (callback)\n\t- hide (callback)\n*/\n\nvar Popover = Class.extend(ListenerMixin, {\n\n\tisHidden: true,\n\toptions: null,\n\tel: null, // the container element for the popover. generated by this object\n\tmargin: 10, // the space required between the popover and the edges of the scroll container\n\n\n\tconstructor: function(options) {\n\t\tthis.options = options || {};\n\t},\n\n\n\t// Shows the popover on the specified position. Renders it if not already\n\tshow: function() {\n\t\tif (this.isHidden) {\n\t\t\tif (!this.el) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t\tthis.el.show();\n\t\t\tthis.position();\n\t\t\tthis.isHidden = false;\n\t\t\tthis.trigger('show');\n\t\t}\n\t},\n\n\n\t// Hides the popover, through CSS, but does not remove it from the DOM\n\thide: function() {\n\t\tif (!this.isHidden) {\n\t\t\tthis.el.hide();\n\t\t\tthis.isHidden = true;\n\t\t\tthis.trigger('hide');\n\t\t}\n\t},\n\n\n\t// Creates `this.el` and renders content inside of it\n\trender: function() {\n\t\tvar _this = this;\n\t\tvar options = this.options;\n\n\t\tthis.el = $('<div class=\"fc-popover\"/>')\n\t\t\t.addClass(options.className || '')\n\t\t\t.css({\n\t\t\t\t// position initially to the top left to avoid creating scrollbars\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t})\n\t\t\t.append(options.content)\n\t\t\t.appendTo(options.parentEl);\n\n\t\t// when a click happens on anything inside with a 'fc-close' className, hide the popover\n\t\tthis.el.on('click', '.fc-close', function() {\n\t\t\t_this.hide();\n\t\t});\n\n\t\tif (options.autoHide) {\n\t\t\tthis.listenTo($(document), 'mousedown', this.documentMousedown);\n\t\t}\n\t},\n\n\n\t// Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n\tdocumentMousedown: function(ev) {\n\t\t// only hide the popover if the click happened outside the popover\n\t\tif (this.el && !$(ev.target).closest(this.el).length) {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\n\n\t// Hides and unregisters any handlers\n\tremoveElement: function() {\n\t\tthis.hide();\n\n\t\tif (this.el) {\n\t\t\tthis.el.remove();\n\t\t\tthis.el = null;\n\t\t}\n\n\t\tthis.stopListeningTo($(document), 'mousedown');\n\t},\n\n\n\t// Positions the popover optimally, using the top/left/right options\n\tposition: function() {\n\t\tvar options = this.options;\n\t\tvar origin = this.el.offsetParent().offset();\n\t\tvar width = this.el.outerWidth();\n\t\tvar height = this.el.outerHeight();\n\t\tvar windowEl = $(window);\n\t\tvar viewportEl = getScrollParent(this.el);\n\t\tvar viewportTop;\n\t\tvar viewportLeft;\n\t\tvar viewportOffset;\n\t\tvar top; // the \"position\" (not \"offset\") values for the popover\n\t\tvar left; //\n\n\t\t// compute top and left\n\t\ttop = options.top || 0;\n\t\tif (options.left !== undefined) {\n\t\t\tleft = options.left;\n\t\t}\n\t\telse if (options.right !== undefined) {\n\t\t\tleft = options.right - width; // derive the left value from the right value\n\t\t}\n\t\telse {\n\t\t\tleft = 0;\n\t\t}\n\n\t\tif (viewportEl.is(window) || viewportEl.is(document)) { // normalize getScrollParent's result\n\t\t\tviewportEl = windowEl;\n\t\t\tviewportTop = 0; // the window is always at the top left\n\t\t\tviewportLeft = 0; // (and .offset() won't work if called here)\n\t\t}\n\t\telse {\n\t\t\tviewportOffset = viewportEl.offset();\n\t\t\tviewportTop = viewportOffset.top;\n\t\t\tviewportLeft = viewportOffset.left;\n\t\t}\n\n\t\t// if the window is scrolled, it causes the visible area to be further down\n\t\tviewportTop += windowEl.scrollTop();\n\t\tviewportLeft += windowEl.scrollLeft();\n\n\t\t// constrain to the view port. if constrained by two edges, give precedence to top/left\n\t\tif (options.viewportConstrain !== false) {\n\t\t\ttop = Math.min(top, viewportTop + viewportEl.outerHeight() - height - this.margin);\n\t\t\ttop = Math.max(top, viewportTop + this.margin);\n\t\t\tleft = Math.min(left, viewportLeft + viewportEl.outerWidth() - width - this.margin);\n\t\t\tleft = Math.max(left, viewportLeft + this.margin);\n\t\t}\n\n\t\tthis.el.css({\n\t\t\ttop: top - origin.top,\n\t\t\tleft: left - origin.left\n\t\t});\n\t},\n\n\n\t// Triggers a callback. Calls a function in the option hash of the same name.\n\t// Arguments beyond the first `name` are forwarded on.\n\t// TODO: better code reuse for this. Repeat code\n\ttrigger: function(name) {\n\t\tif (this.options[name]) {\n\t\t\tthis.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t}\n\n});\n\n;;\n\n/*\nA cache for the left/right/top/bottom/width/height values for one or more elements.\nWorks with both offset (from topleft document) and position (from offsetParent).\n\noptions:\n- els\n- isHorizontal\n- isVertical\n*/\nvar CoordCache = FC.CoordCache = Class.extend({\n\n\tels: null, // jQuery set (assumed to be siblings)\n\tforcedOffsetParentEl: null, // options can override the natural offsetParent\n\torigin: null, // {left,top} position of offsetParent of els\n\tboundingRect: null, // constrain cordinates to this rectangle. {left,right,top,bottom} or null\n\tisHorizontal: false, // whether to query for left/right/width\n\tisVertical: false, // whether to query for top/bottom/height\n\n\t// arrays of coordinates (offsets from topleft of document)\n\tlefts: null,\n\trights: null,\n\ttops: null,\n\tbottoms: null,\n\n\n\tconstructor: function(options) {\n\t\tthis.els = $(options.els);\n\t\tthis.isHorizontal = options.isHorizontal;\n\t\tthis.isVertical = options.isVertical;\n\t\tthis.forcedOffsetParentEl = options.offsetParent ? $(options.offsetParent) : null;\n\t},\n\n\n\t// Queries the els for coordinates and stores them.\n\t// Call this method before using and of the get* methods below.\n\tbuild: function() {\n\t\tvar offsetParentEl = this.forcedOffsetParentEl;\n\t\tif (!offsetParentEl && this.els.length > 0) {\n\t\t\toffsetParentEl = this.els.eq(0).offsetParent();\n\t\t}\n\n\t\tthis.origin = offsetParentEl ?\n\t\t\toffsetParentEl.offset() :\n\t\t\tnull;\n\n\t\tthis.boundingRect = this.queryBoundingRect();\n\n\t\tif (this.isHorizontal) {\n\t\t\tthis.buildElHorizontals();\n\t\t}\n\t\tif (this.isVertical) {\n\t\t\tthis.buildElVerticals();\n\t\t}\n\t},\n\n\n\t// Destroys all internal data about coordinates, freeing memory\n\tclear: function() {\n\t\tthis.origin = null;\n\t\tthis.boundingRect = null;\n\t\tthis.lefts = null;\n\t\tthis.rights = null;\n\t\tthis.tops = null;\n\t\tthis.bottoms = null;\n\t},\n\n\n\t// When called, if coord caches aren't built, builds them\n\tensureBuilt: function() {\n\t\tif (!this.origin) {\n\t\t\tthis.build();\n\t\t}\n\t},\n\n\n\t// Populates the left/right internal coordinate arrays\n\tbuildElHorizontals: function() {\n\t\tvar lefts = [];\n\t\tvar rights = [];\n\n\t\tthis.els.each(function(i, node) {\n\t\t\tvar el = $(node);\n\t\t\tvar left = el.offset().left;\n\t\t\tvar width = el.outerWidth();\n\n\t\t\tlefts.push(left);\n\t\t\trights.push(left + width);\n\t\t});\n\n\t\tthis.lefts = lefts;\n\t\tthis.rights = rights;\n\t},\n\n\n\t// Populates the top/bottom internal coordinate arrays\n\tbuildElVerticals: function() {\n\t\tvar tops = [];\n\t\tvar bottoms = [];\n\n\t\tthis.els.each(function(i, node) {\n\t\t\tvar el = $(node);\n\t\t\tvar top = el.offset().top;\n\t\t\tvar height = el.outerHeight();\n\n\t\t\ttops.push(top);\n\t\t\tbottoms.push(top + height);\n\t\t});\n\n\t\tthis.tops = tops;\n\t\tthis.bottoms = bottoms;\n\t},\n\n\n\t// Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n\t// If no intersection is made, returns undefined.\n\tgetHorizontalIndex: function(leftOffset) {\n\t\tthis.ensureBuilt();\n\n\t\tvar lefts = this.lefts;\n\t\tvar rights = this.rights;\n\t\tvar len = lefts.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (leftOffset >= lefts[i] && leftOffset < rights[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Given a top offset (from document top), returns the index of the el that it vertically intersects.\n\t// If no intersection is made, returns undefined.\n\tgetVerticalIndex: function(topOffset) {\n\t\tthis.ensureBuilt();\n\n\t\tvar tops = this.tops;\n\t\tvar bottoms = this.bottoms;\n\t\tvar len = tops.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (topOffset >= tops[i] && topOffset < bottoms[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Gets the left offset (from document left) of the element at the given index\n\tgetLeftOffset: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.lefts[leftIndex];\n\t},\n\n\n\t// Gets the left position (from offsetParent left) of the element at the given index\n\tgetLeftPosition: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.lefts[leftIndex] - this.origin.left;\n\t},\n\n\n\t// Gets the right offset (from document left) of the element at the given index.\n\t// This value is NOT relative to the document's right edge, like the CSS concept of \"right\" would be.\n\tgetRightOffset: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.rights[leftIndex];\n\t},\n\n\n\t// Gets the right position (from offsetParent left) of the element at the given index.\n\t// This value is NOT relative to the offsetParent's right edge, like the CSS concept of \"right\" would be.\n\tgetRightPosition: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.rights[leftIndex] - this.origin.left;\n\t},\n\n\n\t// Gets the width of the element at the given index\n\tgetWidth: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.rights[leftIndex] - this.lefts[leftIndex];\n\t},\n\n\n\t// Gets the top offset (from document top) of the element at the given index\n\tgetTopOffset: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.tops[topIndex];\n\t},\n\n\n\t// Gets the top position (from offsetParent top) of the element at the given position\n\tgetTopPosition: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.tops[topIndex] - this.origin.top;\n\t},\n\n\t// Gets the bottom offset (from the document top) of the element at the given index.\n\t// This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\n\tgetBottomOffset: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.bottoms[topIndex];\n\t},\n\n\n\t// Gets the bottom position (from the offsetParent top) of the element at the given index.\n\t// This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\n\tgetBottomPosition: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.bottoms[topIndex] - this.origin.top;\n\t},\n\n\n\t// Gets the height of the element at the given index\n\tgetHeight: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.bottoms[topIndex] - this.tops[topIndex];\n\t},\n\n\n\t// Bounding Rect\n\t// TODO: decouple this from CoordCache\n\n\t// Compute and return what the elements' bounding rectangle is, from the user's perspective.\n\t// Right now, only returns a rectangle if constrained by an overflow:scroll element.\n\t// Returns null if there are no elements\n\tqueryBoundingRect: function() {\n\t\tvar scrollParentEl;\n\n\t\tif (this.els.length > 0) {\n\t\t\tscrollParentEl = getScrollParent(this.els.eq(0));\n\n\t\t\tif (!scrollParentEl.is(document)) {\n\t\t\t\treturn getClientRect(scrollParentEl);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tisPointInBounds: function(leftOffset, topOffset) {\n\t\treturn this.isLeftInBounds(leftOffset) && this.isTopInBounds(topOffset);\n\t},\n\n\tisLeftInBounds: function(leftOffset) {\n\t\treturn !this.boundingRect || (leftOffset >= this.boundingRect.left && leftOffset < this.boundingRect.right);\n\t},\n\n\tisTopInBounds: function(topOffset) {\n\t\treturn !this.boundingRect || (topOffset >= this.boundingRect.top && topOffset < this.boundingRect.bottom);\n\t}\n\n});\n\n;;\n\n/* Tracks a drag's mouse movement, firing various handlers\n----------------------------------------------------------------------------------------------------------------------*/\n// TODO: use Emitter\n\nvar DragListener = FC.DragListener = Class.extend(ListenerMixin, MouseIgnorerMixin, {\n\n\toptions: null,\n\tsubjectEl: null,\n\n\t// coordinates of the initial mousedown\n\toriginX: null,\n\toriginY: null,\n\n\t// the wrapping element that scrolls, or MIGHT scroll if there's overflow.\n\t// TODO: do this for wrappers that have overflow:hidden as well.\n\tscrollEl: null,\n\n\tisInteracting: false,\n\tisDistanceSurpassed: false,\n\tisDelayEnded: false,\n\tisDragging: false,\n\tisTouch: false,\n\n\tdelay: null,\n\tdelayTimeoutId: null,\n\tminDistance: null,\n\n\thandleTouchScrollProxy: null, // calls handleTouchScroll, always bound to `this`\n\n\n\tconstructor: function(options) {\n\t\tthis.options = options || {};\n\t\tthis.handleTouchScrollProxy = proxy(this, 'handleTouchScroll');\n\t\tthis.initMouseIgnoring(500);\n\t},\n\n\n\t// Interaction (high-level)\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tstartInteraction: function(ev, extraOptions) {\n\t\tvar isTouch = getEvIsTouch(ev);\n\n\t\tif (ev.type === 'mousedown') {\n\t\t\tif (this.isIgnoringMouse) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (!isPrimaryMouseButton(ev)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tev.preventDefault(); // prevents native selection in most browsers\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isInteracting) {\n\n\t\t\t// process options\n\t\t\textraOptions = extraOptions || {};\n\t\t\tthis.delay = firstDefined(extraOptions.delay, this.options.delay, 0);\n\t\t\tthis.minDistance = firstDefined(extraOptions.distance, this.options.distance, 0);\n\t\t\tthis.subjectEl = this.options.subjectEl;\n\n\t\t\tthis.isInteracting = true;\n\t\t\tthis.isTouch = isTouch;\n\t\t\tthis.isDelayEnded = false;\n\t\t\tthis.isDistanceSurpassed = false;\n\n\t\t\tthis.originX = getEvX(ev);\n\t\t\tthis.originY = getEvY(ev);\n\t\t\tthis.scrollEl = getScrollParent($(ev.target));\n\n\t\t\tthis.bindHandlers();\n\t\t\tthis.initAutoScroll();\n\t\t\tthis.handleInteractionStart(ev);\n\t\t\tthis.startDelay(ev);\n\n\t\t\tif (!this.minDistance) {\n\t\t\t\tthis.handleDistanceSurpassed(ev);\n\t\t\t}\n\t\t}\n\t},\n\n\n\thandleInteractionStart: function(ev) {\n\t\tthis.trigger('interactionStart', ev);\n\t},\n\n\n\tendInteraction: function(ev, isCancelled) {\n\t\tif (this.isInteracting) {\n\t\t\tthis.endDrag(ev);\n\n\t\t\tif (this.delayTimeoutId) {\n\t\t\t\tclearTimeout(this.delayTimeoutId);\n\t\t\t\tthis.delayTimeoutId = null;\n\t\t\t}\n\n\t\t\tthis.destroyAutoScroll();\n\t\t\tthis.unbindHandlers();\n\n\t\t\tthis.isInteracting = false;\n\t\t\tthis.handleInteractionEnd(ev, isCancelled);\n\n\t\t\t// a touchstart+touchend on the same element will result in the following addition simulated events:\n\t\t\t// mouseover + mouseout + click\n\t\t\t// let's ignore these bogus events\n\t\t\tif (this.isTouch) {\n\t\t\t\tthis.tempIgnoreMouse();\n\t\t\t}\n\t\t}\n\t},\n\n\n\thandleInteractionEnd: function(ev, isCancelled) {\n\t\tthis.trigger('interactionEnd', ev, isCancelled || false);\n\t},\n\n\n\t// Binding To DOM\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tbindHandlers: function() {\n\t\tvar _this = this;\n\t\tvar touchStartIgnores = 1;\n\n\t\tif (this.isTouch) {\n\t\t\tthis.listenTo($(document), {\n\t\t\t\ttouchmove: this.handleTouchMove,\n\t\t\t\ttouchend: this.endInteraction,\n\t\t\t\ttouchcancel: this.endInteraction,\n\n\t\t\t\t// Sometimes touchend doesn't fire\n\t\t\t\t// (can't figure out why. touchcancel doesn't fire either. has to do with scrolling?)\n\t\t\t\t// If another touchstart happens, we know it's bogus, so cancel the drag.\n\t\t\t\t// touchend will continue to be broken until user does a shorttap/scroll, but this is best we can do.\n\t\t\t\ttouchstart: function(ev) {\n\t\t\t\t\tif (touchStartIgnores) { // bindHandlers is called from within a touchstart,\n\t\t\t\t\t\ttouchStartIgnores--; // and we don't want this to fire immediately, so ignore.\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t_this.endInteraction(ev, true); // isCancelled=true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// listen to ALL scroll actions on the page\n\t\t\tif (\n\t\t\t\t!bindAnyScroll(this.handleTouchScrollProxy) && // hopefully this works and short-circuits the rest\n\t\t\t\tthis.scrollEl // otherwise, attach a single handler to this\n\t\t\t) {\n\t\t\t\tthis.listenTo(this.scrollEl, 'scroll', this.handleTouchScroll);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.listenTo($(document), {\n\t\t\t\tmousemove: this.handleMouseMove,\n\t\t\t\tmouseup: this.endInteraction\n\t\t\t});\n\t\t}\n\n\t\tthis.listenTo($(document), {\n\t\t\tselectstart: preventDefault, // don't allow selection while dragging\n\t\t\tcontextmenu: preventDefault // long taps would open menu on Chrome dev tools\n\t\t});\n\t},\n\n\n\tunbindHandlers: function() {\n\t\tthis.stopListeningTo($(document));\n\n\t\t// unbind scroll listening\n\t\tunbindAnyScroll(this.handleTouchScrollProxy);\n\t\tif (this.scrollEl) {\n\t\t\tthis.stopListeningTo(this.scrollEl, 'scroll');\n\t\t}\n\t},\n\n\n\t// Drag (high-level)\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// extraOptions ignored if drag already started\n\tstartDrag: function(ev, extraOptions) {\n\t\tthis.startInteraction(ev, extraOptions); // ensure interaction began\n\n\t\tif (!this.isDragging) {\n\t\t\tthis.isDragging = true;\n\t\t\tthis.handleDragStart(ev);\n\t\t}\n\t},\n\n\n\thandleDragStart: function(ev) {\n\t\tthis.trigger('dragStart', ev);\n\t},\n\n\n\thandleMove: function(ev) {\n\t\tvar dx = getEvX(ev) - this.originX;\n\t\tvar dy = getEvY(ev) - this.originY;\n\t\tvar minDistance = this.minDistance;\n\t\tvar distanceSq; // current distance from the origin, squared\n\n\t\tif (!this.isDistanceSurpassed) {\n\t\t\tdistanceSq = dx * dx + dy * dy;\n\t\t\tif (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\n\t\t\t\tthis.handleDistanceSurpassed(ev);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDragging) {\n\t\t\tthis.handleDrag(dx, dy, ev);\n\t\t}\n\t},\n\n\n\t// Called while the mouse is being moved and when we know a legitimate drag is taking place\n\thandleDrag: function(dx, dy, ev) {\n\t\tthis.trigger('drag', dx, dy, ev);\n\t\tthis.updateAutoScroll(ev); // will possibly cause scrolling\n\t},\n\n\n\tendDrag: function(ev) {\n\t\tif (this.isDragging) {\n\t\t\tthis.isDragging = false;\n\t\t\tthis.handleDragEnd(ev);\n\t\t}\n\t},\n\n\n\thandleDragEnd: function(ev) {\n\t\tthis.trigger('dragEnd', ev);\n\t},\n\n\n\t// Delay\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tstartDelay: function(initialEv) {\n\t\tvar _this = this;\n\n\t\tif (this.delay) {\n\t\t\tthis.delayTimeoutId = setTimeout(function() {\n\t\t\t\t_this.handleDelayEnd(initialEv);\n\t\t\t}, this.delay);\n\t\t}\n\t\telse {\n\t\t\tthis.handleDelayEnd(initialEv);\n\t\t}\n\t},\n\n\n\thandleDelayEnd: function(initialEv) {\n\t\tthis.isDelayEnded = true;\n\n\t\tif (this.isDistanceSurpassed) {\n\t\t\tthis.startDrag(initialEv);\n\t\t}\n\t},\n\n\n\t// Distance\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleDistanceSurpassed: function(ev) {\n\t\tthis.isDistanceSurpassed = true;\n\n\t\tif (this.isDelayEnded) {\n\t\t\tthis.startDrag(ev);\n\t\t}\n\t},\n\n\n\t// Mouse / Touch\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleTouchMove: function(ev) {\n\t\t// prevent inertia and touchmove-scrolling while dragging\n\t\tif (this.isDragging) {\n\t\t\tev.preventDefault();\n\t\t}\n\n\t\tthis.handleMove(ev);\n\t},\n\n\n\thandleMouseMove: function(ev) {\n\t\tthis.handleMove(ev);\n\t},\n\n\n\t// Scrolling (unrelated to auto-scroll)\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleTouchScroll: function(ev) {\n\t\t// if the drag is being initiated by touch, but a scroll happens before\n\t\t// the drag-initiating delay is over, cancel the drag\n\t\tif (!this.isDragging) {\n\t\t\tthis.endInteraction(ev, true); // isCancelled=true\n\t\t}\n\t},\n\n\n\t// Utils\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Triggers a callback. Calls a function in the option hash of the same name.\n\t// Arguments beyond the first `name` are forwarded on.\n\ttrigger: function(name) {\n\t\tif (this.options[name]) {\n\t\t\tthis.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t\t// makes _methods callable by event name. TODO: kill this\n\t\tif (this['_' + name]) {\n\t\t\tthis['_' + name].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t}\n\n\n});\n\n;;\n/*\nthis.scrollEl is set in DragListener\n*/\nDragListener.mixin({\n\n\tisAutoScroll: false,\n\n\tscrollBounds: null, // { top, bottom, left, right }\n\tscrollTopVel: null, // pixels per second\n\tscrollLeftVel: null, // pixels per second\n\tscrollIntervalId: null, // ID of setTimeout for scrolling animation loop\n\n\t// defaults\n\tscrollSensitivity: 30, // pixels from edge for scrolling to start\n\tscrollSpeed: 200, // pixels per second, at maximum speed\n\tscrollIntervalMs: 50, // millisecond wait between scroll increment\n\n\n\tinitAutoScroll: function() {\n\t\tvar scrollEl = this.scrollEl;\n\n\t\tthis.isAutoScroll =\n\t\t\tthis.options.scroll &&\n\t\t\tscrollEl &&\n\t\t\t!scrollEl.is(window) &&\n\t\t\t!scrollEl.is(document);\n\n\t\tif (this.isAutoScroll) {\n\t\t\t// debounce makes sure rapid calls don't happen\n\t\t\tthis.listenTo(scrollEl, 'scroll', debounce(this.handleDebouncedScroll, 100));\n\t\t}\n\t},\n\n\n\tdestroyAutoScroll: function() {\n\t\tthis.endAutoScroll(); // kill any animation loop\n\n\t\t// remove the scroll handler if there is a scrollEl\n\t\tif (this.isAutoScroll) {\n\t\t\tthis.stopListeningTo(this.scrollEl, 'scroll'); // will probably get removed by unbindHandlers too :(\n\t\t}\n\t},\n\n\n\t// Computes and stores the bounding rectangle of scrollEl\n\tcomputeScrollBounds: function() {\n\t\tif (this.isAutoScroll) {\n\t\t\tthis.scrollBounds = getOuterRect(this.scrollEl);\n\t\t\t// TODO: use getClientRect in future. but prevents auto scrolling when on top of scrollbars\n\t\t}\n\t},\n\n\n\t// Called when the dragging is in progress and scrolling should be updated\n\tupdateAutoScroll: function(ev) {\n\t\tvar sensitivity = this.scrollSensitivity;\n\t\tvar bounds = this.scrollBounds;\n\t\tvar topCloseness, bottomCloseness;\n\t\tvar leftCloseness, rightCloseness;\n\t\tvar topVel = 0;\n\t\tvar leftVel = 0;\n\n\t\tif (bounds) { // only scroll if scrollEl exists\n\n\t\t\t// compute closeness to edges. valid range is from 0.0 - 1.0\n\t\t\ttopCloseness = (sensitivity - (getEvY(ev) - bounds.top)) / sensitivity;\n\t\t\tbottomCloseness = (sensitivity - (bounds.bottom - getEvY(ev))) / sensitivity;\n\t\t\tleftCloseness = (sensitivity - (getEvX(ev) - bounds.left)) / sensitivity;\n\t\t\trightCloseness = (sensitivity - (bounds.right - getEvX(ev))) / sensitivity;\n\n\t\t\t// translate vertical closeness into velocity.\n\t\t\t// mouse must be completely in bounds for velocity to happen.\n\t\t\tif (topCloseness >= 0 && topCloseness <= 1) {\n\t\t\t\ttopVel = topCloseness * this.scrollSpeed * -1; // negative. for scrolling up\n\t\t\t}\n\t\t\telse if (bottomCloseness >= 0 && bottomCloseness <= 1) {\n\t\t\t\ttopVel = bottomCloseness * this.scrollSpeed;\n\t\t\t}\n\n\t\t\t// translate horizontal closeness into velocity\n\t\t\tif (leftCloseness >= 0 && leftCloseness <= 1) {\n\t\t\t\tleftVel = leftCloseness * this.scrollSpeed * -1; // negative. for scrolling left\n\t\t\t}\n\t\t\telse if (rightCloseness >= 0 && rightCloseness <= 1) {\n\t\t\t\tleftVel = rightCloseness * this.scrollSpeed;\n\t\t\t}\n\t\t}\n\n\t\tthis.setScrollVel(topVel, leftVel);\n\t},\n\n\n\t// Sets the speed-of-scrolling for the scrollEl\n\tsetScrollVel: function(topVel, leftVel) {\n\n\t\tthis.scrollTopVel = topVel;\n\t\tthis.scrollLeftVel = leftVel;\n\n\t\tthis.constrainScrollVel(); // massages into realistic values\n\n\t\t// if there is non-zero velocity, and an animation loop hasn't already started, then START\n\t\tif ((this.scrollTopVel || this.scrollLeftVel) && !this.scrollIntervalId) {\n\t\t\tthis.scrollIntervalId = setInterval(\n\t\t\t\tproxy(this, 'scrollIntervalFunc'), // scope to `this`\n\t\t\t\tthis.scrollIntervalMs\n\t\t\t);\n\t\t}\n\t},\n\n\n\t// Forces scrollTopVel and scrollLeftVel to be zero if scrolling has already gone all the way\n\tconstrainScrollVel: function() {\n\t\tvar el = this.scrollEl;\n\n\t\tif (this.scrollTopVel < 0) { // scrolling up?\n\t\t\tif (el.scrollTop() <= 0) { // already scrolled all the way up?\n\t\t\t\tthis.scrollTopVel = 0;\n\t\t\t}\n\t\t}\n\t\telse if (this.scrollTopVel > 0) { // scrolling down?\n\t\t\tif (el.scrollTop() + el[0].clientHeight >= el[0].scrollHeight) { // already scrolled all the way down?\n\t\t\t\tthis.scrollTopVel = 0;\n\t\t\t}\n\t\t}\n\n\t\tif (this.scrollLeftVel < 0) { // scrolling left?\n\t\t\tif (el.scrollLeft() <= 0) { // already scrolled all the left?\n\t\t\t\tthis.scrollLeftVel = 0;\n\t\t\t}\n\t\t}\n\t\telse if (this.scrollLeftVel > 0) { // scrolling right?\n\t\t\tif (el.scrollLeft() + el[0].clientWidth >= el[0].scrollWidth) { // already scrolled all the way right?\n\t\t\t\tthis.scrollLeftVel = 0;\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// This function gets called during every iteration of the scrolling animation loop\n\tscrollIntervalFunc: function() {\n\t\tvar el = this.scrollEl;\n\t\tvar frac = this.scrollIntervalMs / 1000; // considering animation frequency, what the vel should be mult'd by\n\n\t\t// change the value of scrollEl's scroll\n\t\tif (this.scrollTopVel) {\n\t\t\tel.scrollTop(el.scrollTop() + this.scrollTopVel * frac);\n\t\t}\n\t\tif (this.scrollLeftVel) {\n\t\t\tel.scrollLeft(el.scrollLeft() + this.scrollLeftVel * frac);\n\t\t}\n\n\t\tthis.constrainScrollVel(); // since the scroll values changed, recompute the velocities\n\n\t\t// if scrolled all the way, which causes the vels to be zero, stop the animation loop\n\t\tif (!this.scrollTopVel && !this.scrollLeftVel) {\n\t\t\tthis.endAutoScroll();\n\t\t}\n\t},\n\n\n\t// Kills any existing scrolling animation loop\n\tendAutoScroll: function() {\n\t\tif (this.scrollIntervalId) {\n\t\t\tclearInterval(this.scrollIntervalId);\n\t\t\tthis.scrollIntervalId = null;\n\n\t\t\tthis.handleScrollEnd();\n\t\t}\n\t},\n\n\n\t// Get called when the scrollEl is scrolled (NOTE: this is delayed via debounce)\n\thandleDebouncedScroll: function() {\n\t\t// recompute all coordinates, but *only* if this is *not* part of our scrolling animation\n\t\tif (!this.scrollIntervalId) {\n\t\t\tthis.handleScrollEnd();\n\t\t}\n\t},\n\n\n\t// Called when scrolling has stopped, whether through auto scroll, or the user scrolling\n\thandleScrollEnd: function() {\n\t}\n\n});\n;;\n\n/* Tracks mouse movements over a component and raises events about which hit the mouse is over.\n------------------------------------------------------------------------------------------------------------------------\noptions:\n- subjectEl\n- subjectCenter\n*/\n\nvar HitDragListener = DragListener.extend({\n\n\tcomponent: null, // converts coordinates to hits\n\t\t// methods: prepareHits, releaseHits, queryHit\n\n\torigHit: null, // the hit the mouse was over when listening started\n\thit: null, // the hit the mouse is over\n\tcoordAdjust: null, // delta that will be added to the mouse coordinates when computing collisions\n\n\n\tconstructor: function(component, options) {\n\t\tDragListener.call(this, options); // call the super-constructor\n\n\t\tthis.component = component;\n\t},\n\n\n\t// Called when drag listening starts (but a real drag has not necessarily began).\n\t// ev might be undefined if dragging was started manually.\n\thandleInteractionStart: function(ev) {\n\t\tvar subjectEl = this.subjectEl;\n\t\tvar subjectRect;\n\t\tvar origPoint;\n\t\tvar point;\n\n\t\tthis.computeCoords();\n\n\t\tif (ev) {\n\t\t\torigPoint = { left: getEvX(ev), top: getEvY(ev) };\n\t\t\tpoint = origPoint;\n\n\t\t\t// constrain the point to bounds of the element being dragged\n\t\t\tif (subjectEl) {\n\t\t\t\tsubjectRect = getOuterRect(subjectEl); // used for centering as well\n\t\t\t\tpoint = constrainPoint(point, subjectRect);\n\t\t\t}\n\n\t\t\tthis.origHit = this.queryHit(point.left, point.top);\n\n\t\t\t// treat the center of the subject as the collision point?\n\t\t\tif (subjectEl && this.options.subjectCenter) {\n\n\t\t\t\t// only consider the area the subject overlaps the hit. best for large subjects.\n\t\t\t\t// TODO: skip this if hit didn't supply left/right/top/bottom\n\t\t\t\tif (this.origHit) {\n\t\t\t\t\tsubjectRect = intersectRects(this.origHit, subjectRect) ||\n\t\t\t\t\t\tsubjectRect; // in case there is no intersection\n\t\t\t\t}\n\n\t\t\t\tpoint = getRectCenter(subjectRect);\n\t\t\t}\n\n\t\t\tthis.coordAdjust = diffPoints(point, origPoint); // point - origPoint\n\t\t}\n\t\telse {\n\t\t\tthis.origHit = null;\n\t\t\tthis.coordAdjust = null;\n\t\t}\n\n\t\t// call the super-method. do it after origHit has been computed\n\t\tDragListener.prototype.handleInteractionStart.apply(this, arguments);\n\t},\n\n\n\t// Recomputes the drag-critical positions of elements\n\tcomputeCoords: function() {\n\t\tthis.component.prepareHits();\n\t\tthis.computeScrollBounds(); // why is this here??????\n\t},\n\n\n\t// Called when the actual drag has started\n\thandleDragStart: function(ev) {\n\t\tvar hit;\n\n\t\tDragListener.prototype.handleDragStart.apply(this, arguments); // call the super-method\n\n\t\t// might be different from this.origHit if the min-distance is large\n\t\thit = this.queryHit(getEvX(ev), getEvY(ev));\n\n\t\t// report the initial hit the mouse is over\n\t\t// especially important if no min-distance and drag starts immediately\n\t\tif (hit) {\n\t\t\tthis.handleHitOver(hit);\n\t\t}\n\t},\n\n\n\t// Called when the drag moves\n\thandleDrag: function(dx, dy, ev) {\n\t\tvar hit;\n\n\t\tDragListener.prototype.handleDrag.apply(this, arguments); // call the super-method\n\n\t\thit = this.queryHit(getEvX(ev), getEvY(ev));\n\n\t\tif (!isHitsEqual(hit, this.hit)) { // a different hit than before?\n\t\t\tif (this.hit) {\n\t\t\t\tthis.handleHitOut();\n\t\t\t}\n\t\t\tif (hit) {\n\t\t\t\tthis.handleHitOver(hit);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Called when dragging has been stopped\n\thandleDragEnd: function() {\n\t\tthis.handleHitDone();\n\t\tDragListener.prototype.handleDragEnd.apply(this, arguments); // call the super-method\n\t},\n\n\n\t// Called when a the mouse has just moved over a new hit\n\thandleHitOver: function(hit) {\n\t\tvar isOrig = isHitsEqual(hit, this.origHit);\n\n\t\tthis.hit = hit;\n\n\t\tthis.trigger('hitOver', this.hit, isOrig, this.origHit);\n\t},\n\n\n\t// Called when the mouse has just moved out of a hit\n\thandleHitOut: function() {\n\t\tif (this.hit) {\n\t\t\tthis.trigger('hitOut', this.hit);\n\t\t\tthis.handleHitDone();\n\t\t\tthis.hit = null;\n\t\t}\n\t},\n\n\n\t// Called after a hitOut. Also called before a dragStop\n\thandleHitDone: function() {\n\t\tif (this.hit) {\n\t\t\tthis.trigger('hitDone', this.hit);\n\t\t}\n\t},\n\n\n\t// Called when the interaction ends, whether there was a real drag or not\n\thandleInteractionEnd: function() {\n\t\tDragListener.prototype.handleInteractionEnd.apply(this, arguments); // call the super-method\n\n\t\tthis.origHit = null;\n\t\tthis.hit = null;\n\n\t\tthis.component.releaseHits();\n\t},\n\n\n\t// Called when scrolling has stopped, whether through auto scroll, or the user scrolling\n\thandleScrollEnd: function() {\n\t\tDragListener.prototype.handleScrollEnd.apply(this, arguments); // call the super-method\n\n\t\tthis.computeCoords(); // hits' absolute positions will be in new places. recompute\n\t},\n\n\n\t// Gets the hit underneath the coordinates for the given mouse event\n\tqueryHit: function(left, top) {\n\n\t\tif (this.coordAdjust) {\n\t\t\tleft += this.coordAdjust.left;\n\t\t\ttop += this.coordAdjust.top;\n\t\t}\n\n\t\treturn this.component.queryHit(left, top);\n\t}\n\n});\n\n\n// Returns `true` if the hits are identically equal. `false` otherwise. Must be from the same component.\n// Two null values will be considered equal, as two \"out of the component\" states are the same.\nfunction isHitsEqual(hit0, hit1) {\n\n\tif (!hit0 && !hit1) {\n\t\treturn true;\n\t}\n\n\tif (hit0 && hit1) {\n\t\treturn hit0.component === hit1.component &&\n\t\t\tisHitPropsWithin(hit0, hit1) &&\n\t\t\tisHitPropsWithin(hit1, hit0); // ensures all props are identical\n\t}\n\n\treturn false;\n}\n\n\n// Returns true if all of subHit's non-standard properties are within superHit\nfunction isHitPropsWithin(subHit, superHit) {\n\tfor (var propName in subHit) {\n\t\tif (!/^(component|left|right|top|bottom)$/.test(propName)) {\n\t\t\tif (subHit[propName] !== superHit[propName]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n\n;;\n\n/* Creates a clone of an element and lets it track the mouse as it moves\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar MouseFollower = Class.extend(ListenerMixin, {\n\n\toptions: null,\n\n\tsourceEl: null, // the element that will be cloned and made to look like it is dragging\n\tel: null, // the clone of `sourceEl` that will track the mouse\n\tparentEl: null, // the element that `el` (the clone) will be attached to\n\n\t// the initial position of el, relative to the offset parent. made to match the initial offset of sourceEl\n\ttop0: null,\n\tleft0: null,\n\n\t// the absolute coordinates of the initiating touch/mouse action\n\ty0: null,\n\tx0: null,\n\n\t// the number of pixels the mouse has moved from its initial position\n\ttopDelta: null,\n\tleftDelta: null,\n\n\tisFollowing: false,\n\tisHidden: false,\n\tisAnimating: false, // doing the revert animation?\n\n\tconstructor: function(sourceEl, options) {\n\t\tthis.options = options = options || {};\n\t\tthis.sourceEl = sourceEl;\n\t\tthis.parentEl = options.parentEl ? $(options.parentEl) : sourceEl.parent(); // default to sourceEl's parent\n\t},\n\n\n\t// Causes the element to start following the mouse\n\tstart: function(ev) {\n\t\tif (!this.isFollowing) {\n\t\t\tthis.isFollowing = true;\n\n\t\t\tthis.y0 = getEvY(ev);\n\t\t\tthis.x0 = getEvX(ev);\n\t\t\tthis.topDelta = 0;\n\t\t\tthis.leftDelta = 0;\n\n\t\t\tif (!this.isHidden) {\n\t\t\t\tthis.updatePosition();\n\t\t\t}\n\n\t\t\tif (getEvIsTouch(ev)) {\n\t\t\t\tthis.listenTo($(document), 'touchmove', this.handleMove);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.listenTo($(document), 'mousemove', this.handleMove);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Causes the element to stop following the mouse. If shouldRevert is true, will animate back to original position.\n\t// `callback` gets invoked when the animation is complete. If no animation, it is invoked immediately.\n\tstop: function(shouldRevert, callback) {\n\t\tvar _this = this;\n\t\tvar revertDuration = this.options.revertDuration;\n\n\t\tfunction complete() { // might be called by .animate(), which might change `this` context\n\t\t\t_this.isAnimating = false;\n\t\t\t_this.removeElement();\n\n\t\t\t_this.top0 = _this.left0 = null; // reset state for future updatePosition calls\n\n\t\t\tif (callback) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif (this.isFollowing && !this.isAnimating) { // disallow more than one stop animation at a time\n\t\t\tthis.isFollowing = false;\n\n\t\t\tthis.stopListeningTo($(document));\n\n\t\t\tif (shouldRevert && revertDuration && !this.isHidden) { // do a revert animation?\n\t\t\t\tthis.isAnimating = true;\n\t\t\t\tthis.el.animate({\n\t\t\t\t\ttop: this.top0,\n\t\t\t\t\tleft: this.left0\n\t\t\t\t}, {\n\t\t\t\t\tduration: revertDuration,\n\t\t\t\t\tcomplete: complete\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcomplete();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Gets the tracking element. Create it if necessary\n\tgetEl: function() {\n\t\tvar el = this.el;\n\n\t\tif (!el) {\n\t\t\tel = this.el = this.sourceEl.clone()\n\t\t\t\t.addClass(this.options.additionalClass || '')\n\t\t\t\t.css({\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tvisibility: '', // in case original element was hidden (commonly through hideEvents())\n\t\t\t\t\tdisplay: this.isHidden ? 'none' : '', // for when initially hidden\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tright: 'auto', // erase and set width instead\n\t\t\t\t\tbottom: 'auto', // erase and set height instead\n\t\t\t\t\twidth: this.sourceEl.width(), // explicit height in case there was a 'right' value\n\t\t\t\t\theight: this.sourceEl.height(), // explicit width in case there was a 'bottom' value\n\t\t\t\t\topacity: this.options.opacity || '',\n\t\t\t\t\tzIndex: this.options.zIndex\n\t\t\t\t});\n\n\t\t\t// we don't want long taps or any mouse interaction causing selection/menus.\n\t\t\t// would use preventSelection(), but that prevents selectstart, causing problems.\n\t\t\tel.addClass('fc-unselectable');\n\n\t\t\tel.appendTo(this.parentEl);\n\t\t}\n\n\t\treturn el;\n\t},\n\n\n\t// Removes the tracking element if it has already been created\n\tremoveElement: function() {\n\t\tif (this.el) {\n\t\t\tthis.el.remove();\n\t\t\tthis.el = null;\n\t\t}\n\t},\n\n\n\t// Update the CSS position of the tracking element\n\tupdatePosition: function() {\n\t\tvar sourceOffset;\n\t\tvar origin;\n\n\t\tthis.getEl(); // ensure this.el\n\n\t\t// make sure origin info was computed\n\t\tif (this.top0 === null) {\n\t\t\tsourceOffset = this.sourceEl.offset();\n\t\t\torigin = this.el.offsetParent().offset();\n\t\t\tthis.top0 = sourceOffset.top - origin.top;\n\t\t\tthis.left0 = sourceOffset.left - origin.left;\n\t\t}\n\n\t\tthis.el.css({\n\t\t\ttop: this.top0 + this.topDelta,\n\t\t\tleft: this.left0 + this.leftDelta\n\t\t});\n\t},\n\n\n\t// Gets called when the user moves the mouse\n\thandleMove: function(ev) {\n\t\tthis.topDelta = getEvY(ev) - this.y0;\n\t\tthis.leftDelta = getEvX(ev) - this.x0;\n\n\t\tif (!this.isHidden) {\n\t\t\tthis.updatePosition();\n\t\t}\n\t},\n\n\n\t// Temporarily makes the tracking element invisible. Can be called before following starts\n\thide: function() {\n\t\tif (!this.isHidden) {\n\t\t\tthis.isHidden = true;\n\t\t\tif (this.el) {\n\t\t\t\tthis.el.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Show the tracking element after it has been temporarily hidden\n\tshow: function() {\n\t\tif (this.isHidden) {\n\t\t\tthis.isHidden = false;\n\t\t\tthis.updatePosition();\n\t\t\tthis.getEl().show();\n\t\t}\n\t}\n\n});\n\n;;\n\n/* An abstract class comprised of a \"grid\" of areas that each represent a specific datetime\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar Grid = FC.Grid = Class.extend(ListenerMixin, MouseIgnorerMixin, {\n\n\t// self-config, overridable by subclasses\n\thasDayInteractions: true, // can user click/select ranges of time?\n\n\tview: null, // a View object\n\tisRTL: null, // shortcut to the view's isRTL option\n\n\tstart: null,\n\tend: null,\n\n\tel: null, // the containing element\n\telsByFill: null, // a hash of jQuery element sets used for rendering each fill. Keyed by fill name.\n\n\t// derived from options\n\teventTimeFormat: null,\n\tdisplayEventTime: null,\n\tdisplayEventEnd: null,\n\n\tminResizeDuration: null, // TODO: hack. set by subclasses. minumum event resize duration\n\n\t// if defined, holds the unit identified (ex: \"year\" or \"month\") that determines the level of granularity\n\t// of the date areas. if not defined, assumes to be day and time granularity.\n\t// TODO: port isTimeScale into same system?\n\tlargeUnit: null,\n\n\tdayDragListener: null,\n\tsegDragListener: null,\n\tsegResizeListener: null,\n\texternalDragListener: null,\n\n\n\tconstructor: function(view) {\n\t\tthis.view = view;\n\t\tthis.isRTL = view.opt('isRTL');\n\t\tthis.elsByFill = {};\n\n\t\tthis.dayDragListener = this.buildDayDragListener();\n\t\tthis.initMouseIgnoring();\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Generates the format string used for event time text, if not explicitly defined by 'timeFormat'\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.view.opt('smallTimeFormat');\n\t},\n\n\n\t// Determines whether events should have their end times displayed, if not explicitly defined by 'displayEventTime'.\n\t// Only applies to non-all-day events.\n\tcomputeDisplayEventTime: function() {\n\t\treturn true;\n\t},\n\n\n\t// Determines whether events should have their end times displayed, if not explicitly defined by 'displayEventEnd'\n\tcomputeDisplayEventEnd: function() {\n\t\treturn true;\n\t},\n\n\n\t/* Dates\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Tells the grid about what period of time to display.\n\t// Any date-related internal data should be generated.\n\tsetRange: function(range) {\n\t\tthis.start = range.start.clone();\n\t\tthis.end = range.end.clone();\n\n\t\tthis.rangeUpdated();\n\t\tthis.processRangeOptions();\n\t},\n\n\n\t// Called when internal variables that rely on the range should be updated\n\trangeUpdated: function() {\n\t},\n\n\n\t// Updates values that rely on options and also relate to range\n\tprocessRangeOptions: function() {\n\t\tvar view = this.view;\n\t\tvar displayEventTime;\n\t\tvar displayEventEnd;\n\n\t\tthis.eventTimeFormat =\n\t\t\tview.opt('eventTimeFormat') ||\n\t\t\tview.opt('timeFormat') || // deprecated\n\t\t\tthis.computeEventTimeFormat();\n\n\t\tdisplayEventTime = view.opt('displayEventTime');\n\t\tif (displayEventTime == null) {\n\t\t\tdisplayEventTime = this.computeDisplayEventTime(); // might be based off of range\n\t\t}\n\n\t\tdisplayEventEnd = view.opt('displayEventEnd');\n\t\tif (displayEventEnd == null) {\n\t\t\tdisplayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\n\t\t}\n\n\t\tthis.displayEventTime = displayEventTime;\n\t\tthis.displayEventEnd = displayEventEnd;\n\t},\n\n\n\t// Converts a span (has unzoned start/end and any other grid-specific location information)\n\t// into an array of segments (pieces of events whose format is decided by the grid).\n\tspanToSegs: function(span) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Diffs the two dates, returning a duration, based on granularity of the grid\n\t// TODO: port isTimeScale into this system?\n\tdiffDates: function(a, b) {\n\t\tif (this.largeUnit) {\n\t\t\treturn diffByUnit(a, b, this.largeUnit);\n\t\t}\n\t\telse {\n\t\t\treturn diffDayTime(a, b);\n\t\t}\n\t},\n\n\n\t/* Hit Area\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Called before one or more queryHit calls might happen. Should prepare any cached coordinates for queryHit\n\tprepareHits: function() {\n\t},\n\n\n\t// Called when queryHit calls have subsided. Good place to clear any coordinate caches.\n\treleaseHits: function() {\n\t},\n\n\n\t// Given coordinates from the topleft of the document, return data about the date-related area underneath.\n\t// Can return an object with arbitrary properties (although top/right/left/bottom are encouraged).\n\t// Must have a `grid` property, a reference to this current grid. TODO: avoid this\n\t// The returned object will be processed by getHitSpan and getHitEl.\n\tqueryHit: function(leftOffset, topOffset) {\n\t},\n\n\n\t// Given position-level information about a date-related area within the grid,\n\t// should return an object with at least a start/end date. Can provide other information as well.\n\tgetHitSpan: function(hit) {\n\t},\n\n\n\t// Given position-level information about a date-related area within the grid,\n\t// should return a jQuery element that best represents it. passed to dayClick callback.\n\tgetHitEl: function(hit) {\n\t},\n\n\n\t/* Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Sets the container element that the grid should render inside of.\n\t// Does other DOM-related initializations.\n\tsetElement: function(el) {\n\t\tthis.el = el;\n\n\t\tif (this.hasDayInteractions) {\n\t\t\tpreventSelection(el);\n\n\t\t\tthis.bindDayHandler('touchstart', this.dayTouchStart);\n\t\t\tthis.bindDayHandler('mousedown', this.dayMousedown);\n\t\t}\n\n\t\t// attach event-element-related handlers. in Grid.events\n\t\t// same garbage collection note as above.\n\t\tthis.bindSegHandlers();\n\n\t\tthis.bindGlobalHandlers();\n\t},\n\n\n\tbindDayHandler: function(name, handler) {\n\t\tvar _this = this;\n\n\t\t// attach a handler to the grid's root element.\n\t\t// jQuery will take care of unregistering them when removeElement gets called.\n\t\tthis.el.on(name, function(ev) {\n\t\t\tif (\n\t\t\t\t!$(ev.target).is(\n\t\t\t\t\t_this.segSelector + ',' + // directly on an event element\n\t\t\t\t\t_this.segSelector + ' *,' + // within an event element\n\t\t\t\t\t'.fc-more,' + // a \"more..\" link\n\t\t\t\t\t'a[data-goto]' // a clickable nav link\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn handler.call(_this, ev);\n\t\t\t}\n\t\t});\n\t},\n\n\n\t// Removes the grid's container element from the DOM. Undoes any other DOM-related attachments.\n\t// DOES NOT remove any content beforehand (doesn't clear events or call unrenderDates), unlike View\n\tremoveElement: function() {\n\t\tthis.unbindGlobalHandlers();\n\t\tthis.clearDragListeners();\n\n\t\tthis.el.remove();\n\n\t\t// NOTE: we don't null-out this.el for the same reasons we don't do it within View::removeElement\n\t},\n\n\n\t// Renders the basic structure of grid view before any content is rendered\n\trenderSkeleton: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Renders the grid's date-related content (like areas that represent days/times).\n\t// Assumes setRange has already been called and the skeleton has already been rendered.\n\trenderDates: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Unrenders the grid's date-related content\n\tunrenderDates: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Handlers\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Binds DOM handlers to elements that reside outside the grid, such as the document\n\tbindGlobalHandlers: function() {\n\t\tthis.listenTo($(document), {\n\t\t\tdragstart: this.externalDragStart, // jqui\n\t\t\tsortstart: this.externalDragStart // jqui\n\t\t});\n\t},\n\n\n\t// Unbinds DOM handlers from elements that reside outside the grid\n\tunbindGlobalHandlers: function() {\n\t\tthis.stopListeningTo($(document));\n\t},\n\n\n\t// Process a mousedown on an element that represents a day. For day clicking and selecting.\n\tdayMousedown: function(ev) {\n\t\tif (!this.isIgnoringMouse) {\n\t\t\tthis.dayDragListener.startInteraction(ev, {\n\t\t\t\t//distance: 5, // needs more work if we want dayClick to fire correctly\n\t\t\t});\n\t\t}\n\t},\n\n\n\tdayTouchStart: function(ev) {\n\t\tvar view = this.view;\n\t\tvar selectLongPressDelay = view.opt('selectLongPressDelay');\n\n\t\t// HACK to prevent a user's clickaway for unselecting a range or an event\n\t\t// from causing a dayClick.\n\t\tif (view.isSelected || view.selectedEvent) {\n\t\t\tthis.tempIgnoreMouse();\n\t\t}\n\n\t\tif (selectLongPressDelay == null) {\n\t\t\tselectLongPressDelay = view.opt('longPressDelay'); // fallback\n\t\t}\n\n\t\tthis.dayDragListener.startInteraction(ev, {\n\t\t\tdelay: selectLongPressDelay\n\t\t});\n\t},\n\n\n\t// Creates a listener that tracks the user's drag across day elements.\n\t// For day clicking and selecting.\n\tbuildDayDragListener: function() {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar isSelectable = view.opt('selectable');\n\t\tvar dayClickHit; // null if invalid dayClick\n\t\tvar selectionSpan; // null if invalid selection\n\n\t\t// this listener tracks a mousedown on a day element, and a subsequent drag.\n\t\t// if the drag ends on the same day, it is a 'dayClick'.\n\t\t// if 'selectable' is enabled, this listener also detects selections.\n\t\tvar dragListener = new HitDragListener(this, {\n\t\t\tscroll: view.opt('dragScroll'),\n\t\t\tinteractionStart: function() {\n\t\t\t\tdayClickHit = dragListener.origHit; // for dayClick, where no dragging happens\n\t\t\t\tselectionSpan = null;\n\t\t\t},\n\t\t\tdragStart: function() {\n\t\t\t\tview.unselect(); // since we could be rendering a new selection, we want to clear any old one\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\tif (origHit) { // click needs to have started on a hit\n\n\t\t\t\t\t// if user dragged to another cell at any point, it can no longer be a dayClick\n\t\t\t\t\tif (!isOrig) {\n\t\t\t\t\t\tdayClickHit = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isSelectable) {\n\t\t\t\t\t\tselectionSpan = _this.computeSelection(\n\t\t\t\t\t\t\t_this.getHitSpan(origHit),\n\t\t\t\t\t\t\t_this.getHitSpan(hit)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (selectionSpan) {\n\t\t\t\t\t\t\t_this.renderSelection(selectionSpan);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (selectionSpan === false) {\n\t\t\t\t\t\t\tdisableCursor();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tdayClickHit = null;\n\t\t\t\tselectionSpan = null;\n\t\t\t\t_this.unrenderSelection();\n\t\t\t},\n\t\t\thitDone: function() { // called after a hitOut OR before a dragEnd\n\t\t\t\tenableCursor();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev, isCancelled) {\n\t\t\t\tif (!isCancelled) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tdayClickHit &&\n\t\t\t\t\t\t!_this.isIgnoringMouse // see hack in dayTouchStart\n\t\t\t\t\t) {\n\t\t\t\t\t\tview.triggerDayClick(\n\t\t\t\t\t\t\t_this.getHitSpan(dayClickHit),\n\t\t\t\t\t\t\t_this.getHitEl(dayClickHit),\n\t\t\t\t\t\t\tev\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (selectionSpan) {\n\t\t\t\t\t\t// the selection will already have been rendered. just report it\n\t\t\t\t\t\tview.reportSelection(selectionSpan, ev);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Kills all in-progress dragging.\n\t// Useful for when public API methods that result in re-rendering are invoked during a drag.\n\t// Also useful for when touch devices misbehave and don't fire their touchend.\n\tclearDragListeners: function() {\n\t\tthis.dayDragListener.endInteraction();\n\n\t\tif (this.segDragListener) {\n\t\t\tthis.segDragListener.endInteraction(); // will clear this.segDragListener\n\t\t}\n\t\tif (this.segResizeListener) {\n\t\t\tthis.segResizeListener.endInteraction(); // will clear this.segResizeListener\n\t\t}\n\t\tif (this.externalDragListener) {\n\t\t\tthis.externalDragListener.endInteraction(); // will clear this.externalDragListener\n\t\t}\n\t},\n\n\n\t/* Event Helper\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// TODO: should probably move this to Grid.events, like we did event dragging / resizing\n\n\n\t// Renders a mock event at the given event location, which contains zoned start/end properties.\n\t// Returns all mock event elements.\n\trenderEventLocationHelper: function(eventLocation, sourceSeg) {\n\t\tvar fakeEvent = this.fabricateHelperEvent(eventLocation, sourceSeg);\n\n\t\treturn this.renderHelper(fakeEvent, sourceSeg); // do the actual rendering\n\t},\n\n\n\t// Builds a fake event given zoned event date properties and a segment is should be inspired from.\n\t// The range's end can be null, in which case the mock event that is rendered will have a null end time.\n\t// `sourceSeg` is the internal segment object involved in the drag. If null, something external is dragging.\n\tfabricateHelperEvent: function(eventLocation, sourceSeg) {\n\t\tvar fakeEvent = sourceSeg ? createObject(sourceSeg.event) : {}; // mask the original event object if possible\n\n\t\tfakeEvent.start = eventLocation.start.clone();\n\t\tfakeEvent.end = eventLocation.end ? eventLocation.end.clone() : null;\n\t\tfakeEvent.allDay = null; // force it to be freshly computed by normalizeEventDates\n\t\tthis.view.calendar.normalizeEventDates(fakeEvent);\n\n\t\t// this extra className will be useful for differentiating real events from mock events in CSS\n\t\tfakeEvent.className = (fakeEvent.className || []).concat('fc-helper');\n\n\t\t// if something external is being dragged in, don't render a resizer\n\t\tif (!sourceSeg) {\n\t\t\tfakeEvent.editable = false;\n\t\t}\n\n\t\treturn fakeEvent;\n\t},\n\n\n\t// Renders a mock event. Given zoned event date properties.\n\t// Must return all mock event elements.\n\trenderHelper: function(eventLocation, sourceSeg) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a mock event\n\tunrenderHelper: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection. Will highlight by default but can be overridden by subclasses.\n\t// Given a span (unzoned start/end and other misc data)\n\trenderSelection: function(span) {\n\t\tthis.renderHighlight(span);\n\t},\n\n\n\t// Unrenders any visual indications of a selection. Will unrender a highlight by default.\n\tunrenderSelection: function() {\n\t\tthis.unrenderHighlight();\n\t},\n\n\n\t// Given the first and last date-spans of a selection, returns another date-span object.\n\t// Subclasses can override and provide additional data in the span object. Will be passed to renderSelection().\n\t// Will return false if the selection is invalid and this should be indicated to the user.\n\t// Will return null/undefined if a selection invalid but no error should be reported.\n\tcomputeSelection: function(span0, span1) {\n\t\tvar span = this.computeSelectionSpan(span0, span1);\n\n\t\tif (span && !this.view.calendar.isSelectionSpanAllowed(span)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn span;\n\t},\n\n\n\t// Given two spans, must return the combination of the two.\n\t// TODO: do this separation of concerns (combining VS validation) for event dnd/resize too.\n\tcomputeSelectionSpan: function(span0, span1) {\n\t\tvar dates = [ span0.start, span0.end, span1.start, span1.end ];\n\n\t\tdates.sort(compareNumbers); // sorts chronologically. works with Moments\n\n\t\treturn { start: dates[0].clone(), end: dates[3].clone() };\n\t},\n\n\n\t/* Highlight\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders an emphasis on the given date range. Given a span (unzoned start/end and other misc data)\n\trenderHighlight: function(span) {\n\t\tthis.renderFill('highlight', this.spanToSegs(span));\n\t},\n\n\n\t// Unrenders the emphasis on a date range\n\tunrenderHighlight: function() {\n\t\tthis.unrenderFill('highlight');\n\t},\n\n\n\t// Generates an array of classNames for rendering the highlight. Used by the fill system.\n\thighlightSegClasses: function() {\n\t\treturn [ 'fc-highlight' ];\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBusinessHours: function() {\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tgetNowIndicatorUnit: function() {\n\t},\n\n\n\trenderNowIndicator: function(date) {\n\t},\n\n\n\tunrenderNowIndicator: function() {\n\t},\n\n\n\t/* Fill System (highlight, background events, business hours)\n\t--------------------------------------------------------------------------------------------------------------------\n\tTODO: remove this system. like we did in TimeGrid\n\t*/\n\n\n\t// Renders a set of rectangles over the given segments of time.\n\t// MUST RETURN a subset of segs, the segs that were actually rendered.\n\t// Responsible for populating this.elsByFill. TODO: better API for expressing this requirement\n\trenderFill: function(type, segs) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a specific type of fill that is currently rendered on the grid\n\tunrenderFill: function(type) {\n\t\tvar el = this.elsByFill[type];\n\n\t\tif (el) {\n\t\t\tel.remove();\n\t\t\tdelete this.elsByFill[type];\n\t\t}\n\t},\n\n\n\t// Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\n\t// Only returns segments that successfully rendered.\n\t// To be harnessed by renderFill (implemented by subclasses).\n\t// Analagous to renderFgSegEls.\n\trenderFillSegEls: function(type, segs) {\n\t\tvar _this = this;\n\t\tvar segElMethod = this[type + 'SegEl'];\n\t\tvar html = '';\n\t\tvar renderedSegs = [];\n\t\tvar i;\n\n\t\tif (segs.length) {\n\n\t\t\t// build a large concatenation of segment HTML\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\thtml += this.fillSegHtml(type, segs[i]);\n\t\t\t}\n\n\t\t\t// Grab individual elements from the combined HTML string. Use each as the default rendering.\n\t\t\t// Then, compute the 'el' for each segment.\n\t\t\t$(html).each(function(i, node) {\n\t\t\t\tvar seg = segs[i];\n\t\t\t\tvar el = $(node);\n\n\t\t\t\t// allow custom filter methods per-type\n\t\t\t\tif (segElMethod) {\n\t\t\t\t\tel = segElMethod.call(_this, seg, el);\n\t\t\t\t}\n\n\t\t\t\tif (el) { // custom filters did not cancel the render\n\t\t\t\t\tel = $(el); // allow custom filter to return raw DOM node\n\n\t\t\t\t\t// correct element type? (would be bad if a non-TD were inserted into a table for example)\n\t\t\t\t\tif (el.is(_this.fillSegTag)) {\n\t\t\t\t\t\tseg.el = el;\n\t\t\t\t\t\trenderedSegs.push(seg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn renderedSegs;\n\t},\n\n\n\tfillSegTag: 'div', // subclasses can override\n\n\n\t// Builds the HTML needed for one fill segment. Generic enough to work with different types.\n\tfillSegHtml: function(type, seg) {\n\n\t\t// custom hooks per-type\n\t\tvar classesMethod = this[type + 'SegClasses'];\n\t\tvar cssMethod = this[type + 'SegCss'];\n\n\t\tvar classes = classesMethod ? classesMethod.call(this, seg) : [];\n\t\tvar css = cssToStr(cssMethod ? cssMethod.call(this, seg) : {});\n\n\t\treturn '<' + this.fillSegTag +\n\t\t\t(classes.length ? ' class=\"' + classes.join(' ') + '\"' : '') +\n\t\t\t(css ? ' style=\"' + css + '\"' : '') +\n\t\t\t' />';\n\t},\n\n\n\n\t/* Generic rendering utilities for subclasses\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes HTML classNames for a single-day element\n\tgetDayClasses: function(date, noThemeHighlight) {\n\t\tvar view = this.view;\n\t\tvar today = view.calendar.getNow();\n\t\tvar classes = [ 'fc-' + dayIDs[date.day()] ];\n\n\t\tif (\n\t\t\tview.intervalDuration.as('months') == 1 &&\n\t\t\tdate.month() != view.intervalStart.month()\n\t\t) {\n\t\t\tclasses.push('fc-other-month');\n\t\t}\n\n\t\tif (date.isSame(today, 'day')) {\n\t\t\tclasses.push('fc-today');\n\n\t\t\tif (noThemeHighlight !== true) {\n\t\t\t\tclasses.push(view.highlightStateClass);\n\t\t\t}\n\t\t}\n\t\telse if (date < today) {\n\t\t\tclasses.push('fc-past');\n\t\t}\n\t\telse {\n\t\t\tclasses.push('fc-future');\n\t\t}\n\n\t\treturn classes;\n\t}\n\n});\n\n;;\n\n/* Event-rendering and event-interaction methods for the abstract Grid class\n----------------------------------------------------------------------------------------------------------------------*/\n\nGrid.mixin({\n\n\t// self-config, overridable by subclasses\n\tsegSelector: '.fc-event-container > *', // what constitutes an event element?\n\n\tmousedOverSeg: null, // the segment object the user's mouse is over. null if over nothing\n\tisDraggingSeg: false, // is a segment being dragged? boolean\n\tisResizingSeg: false, // is a segment being resized? boolean\n\tisDraggingExternal: false, // jqui-dragging an external element? boolean\n\tsegs: null, // the *event* segments currently rendered in the grid. TODO: rename to `eventSegs`\n\n\n\t// Renders the given events onto the grid\n\trenderEvents: function(events) {\n\t\tvar bgEvents = [];\n\t\tvar fgEvents = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < events.length; i++) {\n\t\t\t(isBgEvent(events[i]) ? bgEvents : fgEvents).push(events[i]);\n\t\t}\n\n\t\tthis.segs = [].concat( // record all segs\n\t\t\tthis.renderBgEvents(bgEvents),\n\t\t\tthis.renderFgEvents(fgEvents)\n\t\t);\n\t},\n\n\n\trenderBgEvents: function(events) {\n\t\tvar segs = this.eventsToSegs(events);\n\n\t\t// renderBgSegs might return a subset of segs, segs that were actually rendered\n\t\treturn this.renderBgSegs(segs) || segs;\n\t},\n\n\n\trenderFgEvents: function(events) {\n\t\tvar segs = this.eventsToSegs(events);\n\n\t\t// renderFgSegs might return a subset of segs, segs that were actually rendered\n\t\treturn this.renderFgSegs(segs) || segs;\n\t},\n\n\n\t// Unrenders all events currently rendered on the grid\n\tunrenderEvents: function() {\n\t\tthis.handleSegMouseout(); // trigger an eventMouseout if user's mouse is over an event\n\t\tthis.clearDragListeners();\n\n\t\tthis.unrenderFgSegs();\n\t\tthis.unrenderBgSegs();\n\n\t\tthis.segs = null;\n\t},\n\n\n\t// Retrieves all rendered segment objects currently rendered on the grid\n\tgetEventSegs: function() {\n\t\treturn this.segs || [];\n\t},\n\n\n\t/* Foreground Segment Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders foreground event segments onto the grid. May return a subset of segs that were rendered.\n\trenderFgSegs: function(segs) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders all currently rendered foreground segments\n\tunrenderFgSegs: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Renders and assigns an `el` property for each foreground event segment.\n\t// Only returns segments that successfully rendered.\n\t// A utility that subclasses may use.\n\trenderFgSegEls: function(segs, disableResizing) {\n\t\tvar view = this.view;\n\t\tvar html = '';\n\t\tvar renderedSegs = [];\n\t\tvar i;\n\n\t\tif (segs.length) { // don't build an empty html string\n\n\t\t\t// build a large concatenation of event segment HTML\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\thtml += this.fgSegHtml(segs[i], disableResizing);\n\t\t\t}\n\n\t\t\t// Grab individual elements from the combined HTML string. Use each as the default rendering.\n\t\t\t// Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n\t\t\t$(html).each(function(i, node) {\n\t\t\t\tvar seg = segs[i];\n\t\t\t\tvar el = view.resolveEventEl(seg.event, $(node));\n\n\t\t\t\tif (el) {\n\t\t\t\t\tel.data('fc-seg', seg); // used by handlers\n\t\t\t\t\tseg.el = el;\n\t\t\t\t\trenderedSegs.push(seg);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn renderedSegs;\n\t},\n\n\n\t// Generates the HTML for the default rendering of a foreground event segment. Used by renderFgSegEls()\n\tfgSegHtml: function(seg, disableResizing) {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Background Segment Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders the given background event segments onto the grid.\n\t// Returns a subset of the segs that were actually rendered.\n\trenderBgSegs: function(segs) {\n\t\treturn this.renderFill('bgEvent', segs);\n\t},\n\n\n\t// Unrenders all the currently rendered background event segments\n\tunrenderBgSegs: function() {\n\t\tthis.unrenderFill('bgEvent');\n\t},\n\n\n\t// Renders a background event element, given the default rendering. Called by the fill system.\n\tbgEventSegEl: function(seg, el) {\n\t\treturn this.view.resolveEventEl(seg.event, el); // will filter through eventRender\n\t},\n\n\n\t// Generates an array of classNames to be used for the default rendering of a background event.\n\t// Called by fillSegHtml.\n\tbgEventSegClasses: function(seg) {\n\t\tvar event = seg.event;\n\t\tvar source = event.source || {};\n\n\t\treturn [ 'fc-bgevent' ].concat(\n\t\t\tevent.className,\n\t\t\tsource.className || []\n\t\t);\n\t},\n\n\n\t// Generates a semicolon-separated CSS string to be used for the default rendering of a background event.\n\t// Called by fillSegHtml.\n\tbgEventSegCss: function(seg) {\n\t\treturn {\n\t\t\t'background-color': this.getSegSkinCss(seg)['background-color']\n\t\t};\n\t},\n\n\n\t// Generates an array of classNames to be used for the rendering business hours overlay. Called by the fill system.\n\t// Called by fillSegHtml.\n\tbusinessHoursSegClasses: function(seg) {\n\t\treturn [ 'fc-nonbusiness', 'fc-bgevent' ];\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Compute business hour segs for the grid's current date range.\n\t// Caller must ask if whole-day business hours are needed.\n\t// If no `businessHours` configuration value is specified, assumes the calendar default.\n\tbuildBusinessHourSegs: function(wholeDay, businessHours) {\n\t\treturn this.eventsToSegs(\n\t\t\tthis.buildBusinessHourEvents(wholeDay, businessHours)\n\t\t);\n\t},\n\n\n\t// Compute business hour *events* for the grid's current date range.\n\t// Caller must ask if whole-day business hours are needed.\n\t// If no `businessHours` configuration value is specified, assumes the calendar default.\n\tbuildBusinessHourEvents: function(wholeDay, businessHours) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar events;\n\n\t\tif (businessHours == null) {\n\t\t\t// fallback\n\t\t\t// access from calendawr. don't access from view. doesn't update with dynamic options.\n\t\t\tbusinessHours = calendar.options.businessHours;\n\t\t}\n\n\t\tevents = calendar.computeBusinessHourEvents(wholeDay, businessHours);\n\n\t\t// HACK. Eventually refactor business hours \"events\" system.\n\t\t// If no events are given, but businessHours is activated, this means the entire visible range should be\n\t\t// marked as *not* business-hours, via inverse-background rendering.\n\t\tif (!events.length && businessHours) {\n\t\t\tevents = [\n\t\t\t\t$.extend({}, BUSINESS_HOUR_EVENT_DEFAULTS, {\n\t\t\t\t\tstart: this.view.end, // guaranteed out-of-range\n\t\t\t\t\tend: this.view.end,   // \"\n\t\t\t\t\tdow: null\n\t\t\t\t})\n\t\t\t];\n\t\t}\n\n\t\treturn events;\n\t},\n\n\n\t/* Handlers\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Attaches event-element-related handlers for *all* rendered event segments of the view.\n\tbindSegHandlers: function() {\n\t\tthis.bindSegHandlersToEl(this.el);\n\t},\n\n\n\t// Attaches event-element-related handlers to an arbitrary container element. leverages bubbling.\n\tbindSegHandlersToEl: function(el) {\n\t\tthis.bindSegHandlerToEl(el, 'touchstart', this.handleSegTouchStart);\n\t\tthis.bindSegHandlerToEl(el, 'touchend', this.handleSegTouchEnd);\n\t\tthis.bindSegHandlerToEl(el, 'mouseenter', this.handleSegMouseover);\n\t\tthis.bindSegHandlerToEl(el, 'mouseleave', this.handleSegMouseout);\n\t\tthis.bindSegHandlerToEl(el, 'mousedown', this.handleSegMousedown);\n\t\tthis.bindSegHandlerToEl(el, 'click', this.handleSegClick);\n\t},\n\n\n\t// Executes a handler for any a user-interaction on a segment.\n\t// Handler gets called with (seg, ev), and with the `this` context of the Grid\n\tbindSegHandlerToEl: function(el, name, handler) {\n\t\tvar _this = this;\n\n\t\tel.on(name, this.segSelector, function(ev) {\n\t\t\tvar seg = $(this).data('fc-seg'); // grab segment data. put there by View::renderEvents\n\n\t\t\t// only call the handlers if there is not a drag/resize in progress\n\t\t\tif (seg && !_this.isDraggingSeg && !_this.isResizingSeg) {\n\t\t\t\treturn handler.call(_this, seg, ev); // context will be the Grid\n\t\t\t}\n\t\t});\n\t},\n\n\n\thandleSegClick: function(seg, ev) {\n\t\tvar res = this.view.publiclyTrigger('eventClick', seg.el[0], seg.event, ev); // can return `false` to cancel\n\t\tif (res === false) {\n\t\t\tev.preventDefault();\n\t\t}\n\t},\n\n\n\t// Updates internal state and triggers handlers for when an event element is moused over\n\thandleSegMouseover: function(seg, ev) {\n\t\tif (\n\t\t\t!this.isIgnoringMouse &&\n\t\t\t!this.mousedOverSeg\n\t\t) {\n\t\t\tthis.mousedOverSeg = seg;\n\t\t\tif (this.view.isEventResizable(seg.event)) {\n\t\t\t\tseg.el.addClass('fc-allow-mouse-resize');\n\t\t\t}\n\t\t\tthis.view.publiclyTrigger('eventMouseover', seg.el[0], seg.event, ev);\n\t\t}\n\t},\n\n\n\t// Updates internal state and triggers handlers for when an event element is moused out.\n\t// Can be given no arguments, in which case it will mouseout the segment that was previously moused over.\n\thandleSegMouseout: function(seg, ev) {\n\t\tev = ev || {}; // if given no args, make a mock mouse event\n\n\t\tif (this.mousedOverSeg) {\n\t\t\tseg = seg || this.mousedOverSeg; // if given no args, use the currently moused-over segment\n\t\t\tthis.mousedOverSeg = null;\n\t\t\tif (this.view.isEventResizable(seg.event)) {\n\t\t\t\tseg.el.removeClass('fc-allow-mouse-resize');\n\t\t\t}\n\t\t\tthis.view.publiclyTrigger('eventMouseout', seg.el[0], seg.event, ev);\n\t\t}\n\t},\n\n\n\thandleSegMousedown: function(seg, ev) {\n\t\tvar isResizing = this.startSegResize(seg, ev, { distance: 5 });\n\n\t\tif (!isResizing && this.view.isEventDraggable(seg.event)) {\n\t\t\tthis.buildSegDragListener(seg)\n\t\t\t\t.startInteraction(ev, {\n\t\t\t\t\tdistance: 5\n\t\t\t\t});\n\t\t}\n\t},\n\n\n\thandleSegTouchStart: function(seg, ev) {\n\t\tvar view = this.view;\n\t\tvar event = seg.event;\n\t\tvar isSelected = view.isEventSelected(event);\n\t\tvar isDraggable = view.isEventDraggable(event);\n\t\tvar isResizable = view.isEventResizable(event);\n\t\tvar isResizing = false;\n\t\tvar dragListener;\n\t\tvar eventLongPressDelay;\n\n\t\tif (isSelected && isResizable) {\n\t\t\t// only allow resizing of the event is selected\n\t\t\tisResizing = this.startSegResize(seg, ev);\n\t\t}\n\n\t\tif (!isResizing && (isDraggable || isResizable)) { // allowed to be selected?\n\n\t\t\teventLongPressDelay = view.opt('eventLongPressDelay');\n\t\t\tif (eventLongPressDelay == null) {\n\t\t\t\teventLongPressDelay = view.opt('longPressDelay'); // fallback\n\t\t\t}\n\n\t\t\tdragListener = isDraggable ?\n\t\t\t\tthis.buildSegDragListener(seg) :\n\t\t\t\tthis.buildSegSelectListener(seg); // seg isn't draggable, but still needs to be selected\n\n\t\t\tdragListener.startInteraction(ev, { // won't start if already started\n\t\t\t\tdelay: isSelected ? 0 : eventLongPressDelay // do delay if not already selected\n\t\t\t});\n\t\t}\n\n\t\t// a long tap simulates a mouseover. ignore this bogus mouseover.\n\t\tthis.tempIgnoreMouse();\n\t},\n\n\n\thandleSegTouchEnd: function(seg, ev) {\n\t\t// touchstart+touchend = click, which simulates a mouseover.\n\t\t// ignore this bogus mouseover.\n\t\tthis.tempIgnoreMouse();\n\t},\n\n\n\t// returns boolean whether resizing actually started or not.\n\t// assumes the seg allows resizing.\n\t// `dragOptions` are optional.\n\tstartSegResize: function(seg, ev, dragOptions) {\n\t\tif ($(ev.target).is('.fc-resizer')) {\n\t\t\tthis.buildSegResizeListener(seg, $(ev.target).is('.fc-start-resizer'))\n\t\t\t\t.startInteraction(ev, dragOptions);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\n\n\t/* Event Dragging\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Builds a listener that will track user-dragging on an event segment.\n\t// Generic enough to work with any type of Grid.\n\t// Has side effect of setting/unsetting `segDragListener`\n\tbuildSegDragListener: function(seg) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar el = seg.el;\n\t\tvar event = seg.event;\n\t\tvar isDragging;\n\t\tvar mouseFollower; // A clone of the original element that will move with the mouse\n\t\tvar dropLocation; // zoned event date properties\n\n\t\tif (this.segDragListener) {\n\t\t\treturn this.segDragListener;\n\t\t}\n\n\t\t// Tracks mouse movement over the *view's* coordinate map. Allows dragging and dropping between subcomponents\n\t\t// of the view.\n\t\tvar dragListener = this.segDragListener = new HitDragListener(view, {\n\t\t\tscroll: view.opt('dragScroll'),\n\t\t\tsubjectEl: el,\n\t\t\tsubjectCenter: true,\n\t\t\tinteractionStart: function(ev) {\n\t\t\t\tseg.component = _this; // for renderDrag\n\t\t\t\tisDragging = false;\n\t\t\t\tmouseFollower = new MouseFollower(seg.el, {\n\t\t\t\t\tadditionalClass: 'fc-dragging',\n\t\t\t\t\tparentEl: view.el,\n\t\t\t\t\topacity: dragListener.isTouch ? null : view.opt('dragOpacity'),\n\t\t\t\t\trevertDuration: view.opt('dragRevertDuration'),\n\t\t\t\t\tzIndex: 2 // one above the .fc-view\n\t\t\t\t});\n\t\t\t\tmouseFollower.hide(); // don't show until we know this is a real drag\n\t\t\t\tmouseFollower.start(ev);\n\t\t\t},\n\t\t\tdragStart: function(ev) {\n\t\t\t\tif (dragListener.isTouch && !view.isEventSelected(event)) {\n\t\t\t\t\t// if not previously selected, will fire after a delay. then, select the event\n\t\t\t\t\tview.selectEvent(event);\n\t\t\t\t}\n\t\t\t\tisDragging = true;\n\t\t\t\t_this.handleSegMouseout(seg, ev); // ensure a mouseout on the manipulated event has been reported\n\t\t\t\t_this.segDragStart(seg, ev);\n\t\t\t\tview.hideEvent(event); // hide all event segments. our mouseFollower will take over\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\tvar dragHelperEls;\n\n\t\t\t\t// starting hit could be forced (DayGrid.limit)\n\t\t\t\tif (seg.hit) {\n\t\t\t\t\torigHit = seg.hit;\n\t\t\t\t}\n\n\t\t\t\t// since we are querying the parent view, might not belong to this grid\n\t\t\t\tdropLocation = _this.computeEventDrop(\n\t\t\t\t\torigHit.component.getHitSpan(origHit),\n\t\t\t\t\thit.component.getHitSpan(hit),\n\t\t\t\t\tevent\n\t\t\t\t);\n\n\t\t\t\tif (dropLocation && !calendar.isEventSpanAllowed(_this.eventToSpan(dropLocation), event)) {\n\t\t\t\t\tdisableCursor();\n\t\t\t\t\tdropLocation = null;\n\t\t\t\t}\n\n\t\t\t\t// if a valid drop location, have the subclass render a visual indication\n\t\t\t\tif (dropLocation && (dragHelperEls = view.renderDrag(dropLocation, seg))) {\n\n\t\t\t\t\tdragHelperEls.addClass('fc-dragging');\n\t\t\t\t\tif (!dragListener.isTouch) {\n\t\t\t\t\t\t_this.applyDragOpacity(dragHelperEls);\n\t\t\t\t\t}\n\n\t\t\t\t\tmouseFollower.hide(); // if the subclass is already using a mock event \"helper\", hide our own\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmouseFollower.show(); // otherwise, have the helper follow the mouse (no snapping)\n\t\t\t\t}\n\n\t\t\t\tif (isOrig) {\n\t\t\t\t\tdropLocation = null; // needs to have moved hits to be a valid drop\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tview.unrenderDrag(); // unrender whatever was done in renderDrag\n\t\t\t\tmouseFollower.show(); // show in case we are moving out of all hits\n\t\t\t\tdropLocation = null;\n\t\t\t},\n\t\t\thitDone: function() { // Called after a hitOut OR before a dragEnd\n\t\t\t\tenableCursor();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\tdelete seg.component; // prevent side effects\n\n\t\t\t\t// do revert animation if hasn't changed. calls a callback when finished (whether animation or not)\n\t\t\t\tmouseFollower.stop(!dropLocation, function() {\n\t\t\t\t\tif (isDragging) {\n\t\t\t\t\t\tview.unrenderDrag();\n\t\t\t\t\t\t_this.segDragStop(seg, ev);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dropLocation) {\n\t\t\t\t\t\t// no need to re-show original, will rerender all anyways. esp important if eventRenderWait\n\t\t\t\t\t\tview.reportEventDrop(event, dropLocation, _this.largeUnit, el, ev);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tview.showEvent(event);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t_this.segDragListener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// seg isn't draggable, but let's use a generic DragListener\n\t// simply for the delay, so it can be selected.\n\t// Has side effect of setting/unsetting `segDragListener`\n\tbuildSegSelectListener: function(seg) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar event = seg.event;\n\n\t\tif (this.segDragListener) {\n\t\t\treturn this.segDragListener;\n\t\t}\n\n\t\tvar dragListener = this.segDragListener = new DragListener({\n\t\t\tdragStart: function(ev) {\n\t\t\t\tif (dragListener.isTouch && !view.isEventSelected(event)) {\n\t\t\t\t\t// if not previously selected, will fire after a delay. then, select the event\n\t\t\t\t\tview.selectEvent(event);\n\t\t\t\t}\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\t_this.segDragListener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Called before event segment dragging starts\n\tsegDragStart: function(seg, ev) {\n\t\tthis.isDraggingSeg = true;\n\t\tthis.view.publiclyTrigger('eventDragStart', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\n\t},\n\n\n\t// Called after event segment dragging stops\n\tsegDragStop: function(seg, ev) {\n\t\tthis.isDraggingSeg = false;\n\t\tthis.view.publiclyTrigger('eventDragStop', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\n\t},\n\n\n\t// Given the spans an event drag began, and the span event was dropped, calculates the new zoned start/end/allDay\n\t// values for the event. Subclasses may override and set additional properties to be used by renderDrag.\n\t// A falsy returned value indicates an invalid drop.\n\t// DOES NOT consider overlap/constraint.\n\tcomputeEventDrop: function(startSpan, endSpan, event) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar dragStart = startSpan.start;\n\t\tvar dragEnd = endSpan.start;\n\t\tvar delta;\n\t\tvar dropLocation; // zoned event date properties\n\n\t\tif (dragStart.hasTime() === dragEnd.hasTime()) {\n\t\t\tdelta = this.diffDates(dragEnd, dragStart);\n\n\t\t\t// if an all-day event was in a timed area and it was dragged to a different time,\n\t\t\t// guarantee an end and adjust start/end to have times\n\t\t\tif (event.allDay && durationHasTime(delta)) {\n\t\t\t\tdropLocation = {\n\t\t\t\t\tstart: event.start.clone(),\n\t\t\t\t\tend: calendar.getEventEnd(event), // will be an ambig day\n\t\t\t\t\tallDay: false // for normalizeEventTimes\n\t\t\t\t};\n\t\t\t\tcalendar.normalizeEventTimes(dropLocation);\n\t\t\t}\n\t\t\t// othewise, work off existing values\n\t\t\telse {\n\t\t\t\tdropLocation = pluckEventDateProps(event);\n\t\t\t}\n\n\t\t\tdropLocation.start.add(delta);\n\t\t\tif (dropLocation.end) {\n\t\t\t\tdropLocation.end.add(delta);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// if switching from day <-> timed, start should be reset to the dropped date, and the end cleared\n\t\t\tdropLocation = {\n\t\t\t\tstart: dragEnd.clone(),\n\t\t\t\tend: null, // end should be cleared\n\t\t\t\tallDay: !dragEnd.hasTime()\n\t\t\t};\n\t\t}\n\n\t\treturn dropLocation;\n\t},\n\n\n\t// Utility for apply dragOpacity to a jQuery set\n\tapplyDragOpacity: function(els) {\n\t\tvar opacity = this.view.opt('dragOpacity');\n\n\t\tif (opacity != null) {\n\t\t\tels.css('opacity', opacity);\n\t\t}\n\t},\n\n\n\t/* External Element Dragging\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Called when a jQuery UI drag is initiated anywhere in the DOM\n\texternalDragStart: function(ev, ui) {\n\t\tvar view = this.view;\n\t\tvar el;\n\t\tvar accept;\n\n\t\tif (view.opt('droppable')) { // only listen if this setting is on\n\t\t\tel = $((ui ? ui.item : null) || ev.target);\n\n\t\t\t// Test that the dragged element passes the dropAccept selector or filter function.\n\t\t\t// FYI, the default is \"*\" (matches all)\n\t\t\taccept = view.opt('dropAccept');\n\t\t\tif ($.isFunction(accept) ? accept.call(el[0], el) : el.is(accept)) {\n\t\t\t\tif (!this.isDraggingExternal) { // prevent double-listening if fired twice\n\t\t\t\t\tthis.listenToExternalDrag(el, ev, ui);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Called when a jQuery UI drag starts and it needs to be monitored for dropping\n\tlistenToExternalDrag: function(el, ev, ui) {\n\t\tvar _this = this;\n\t\tvar calendar = this.view.calendar;\n\t\tvar meta = getDraggedElMeta(el); // extra data about event drop, including possible event to create\n\t\tvar dropLocation; // a null value signals an unsuccessful drag\n\n\t\t// listener that tracks mouse movement over date-associated pixel regions\n\t\tvar dragListener = _this.externalDragListener = new HitDragListener(this, {\n\t\t\tinteractionStart: function() {\n\t\t\t\t_this.isDraggingExternal = true;\n\t\t\t},\n\t\t\thitOver: function(hit) {\n\t\t\t\tdropLocation = _this.computeExternalDrop(\n\t\t\t\t\thit.component.getHitSpan(hit), // since we are querying the parent view, might not belong to this grid\n\t\t\t\t\tmeta\n\t\t\t\t);\n\n\t\t\t\tif ( // invalid hit?\n\t\t\t\t\tdropLocation &&\n\t\t\t\t\t!calendar.isExternalSpanAllowed(_this.eventToSpan(dropLocation), dropLocation, meta.eventProps)\n\t\t\t\t) {\n\t\t\t\t\tdisableCursor();\n\t\t\t\t\tdropLocation = null;\n\t\t\t\t}\n\n\t\t\t\tif (dropLocation) {\n\t\t\t\t\t_this.renderDrag(dropLocation); // called without a seg parameter\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() {\n\t\t\t\tdropLocation = null; // signal unsuccessful\n\t\t\t},\n\t\t\thitDone: function() { // Called after a hitOut OR before a dragEnd\n\t\t\t\tenableCursor();\n\t\t\t\t_this.unrenderDrag();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\tif (dropLocation) { // element was dropped on a valid hit\n\t\t\t\t\t_this.view.reportExternalDrop(meta, dropLocation, el, ev, ui);\n\t\t\t\t}\n\t\t\t\t_this.isDraggingExternal = false;\n\t\t\t\t_this.externalDragListener = null;\n\t\t\t}\n\t\t});\n\n\t\tdragListener.startDrag(ev); // start listening immediately\n\t},\n\n\n\t// Given a hit to be dropped upon, and misc data associated with the jqui drag (guaranteed to be a plain object),\n\t// returns the zoned start/end dates for the event that would result from the hypothetical drop. end might be null.\n\t// Returning a null value signals an invalid drop hit.\n\t// DOES NOT consider overlap/constraint.\n\tcomputeExternalDrop: function(span, meta) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar dropLocation = {\n\t\t\tstart: calendar.applyTimezone(span.start), // simulate a zoned event start date\n\t\t\tend: null\n\t\t};\n\n\t\t// if dropped on an all-day span, and element's metadata specified a time, set it\n\t\tif (meta.startTime && !dropLocation.start.hasTime()) {\n\t\t\tdropLocation.start.time(meta.startTime);\n\t\t}\n\n\t\tif (meta.duration) {\n\t\t\tdropLocation.end = dropLocation.start.clone().add(meta.duration);\n\t\t}\n\n\t\treturn dropLocation;\n\t},\n\n\n\n\t/* Drag Rendering (for both events and an external elements)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event or external element being dragged.\n\t// `dropLocation` contains hypothetical start/end/allDay values the event would have if dropped. end can be null.\n\t// `seg` is the internal segment object that is being dragged. If dragging an external element, `seg` is null.\n\t// A truthy returned value indicates this method has rendered a helper element.\n\t// Must return elements used for any mock events.\n\trenderDrag: function(dropLocation, seg) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a visual indication of an event or external element being dragged\n\tunrenderDrag: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t/* Resizing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Creates a listener that tracks the user as they resize an event segment.\n\t// Generic enough to work with any type of Grid.\n\tbuildSegResizeListener: function(seg, isStart) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar el = seg.el;\n\t\tvar event = seg.event;\n\t\tvar eventEnd = calendar.getEventEnd(event);\n\t\tvar isDragging;\n\t\tvar resizeLocation; // zoned event date properties. falsy if invalid resize\n\n\t\t// Tracks mouse movement over the *grid's* coordinate map\n\t\tvar dragListener = this.segResizeListener = new HitDragListener(this, {\n\t\t\tscroll: view.opt('dragScroll'),\n\t\t\tsubjectEl: el,\n\t\t\tinteractionStart: function() {\n\t\t\t\tisDragging = false;\n\t\t\t},\n\t\t\tdragStart: function(ev) {\n\t\t\t\tisDragging = true;\n\t\t\t\t_this.handleSegMouseout(seg, ev); // ensure a mouseout on the manipulated event has been reported\n\t\t\t\t_this.segResizeStart(seg, ev);\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\tvar origHitSpan = _this.getHitSpan(origHit);\n\t\t\t\tvar hitSpan = _this.getHitSpan(hit);\n\n\t\t\t\tresizeLocation = isStart ?\n\t\t\t\t\t_this.computeEventStartResize(origHitSpan, hitSpan, event) :\n\t\t\t\t\t_this.computeEventEndResize(origHitSpan, hitSpan, event);\n\n\t\t\t\tif (resizeLocation) {\n\t\t\t\t\tif (!calendar.isEventSpanAllowed(_this.eventToSpan(resizeLocation), event)) {\n\t\t\t\t\t\tdisableCursor();\n\t\t\t\t\t\tresizeLocation = null;\n\t\t\t\t\t}\n\t\t\t\t\t// no change? (FYI, event dates might have zones)\n\t\t\t\t\telse if (\n\t\t\t\t\t\tresizeLocation.start.isSame(event.start.clone().stripZone()) &&\n\t\t\t\t\t\tresizeLocation.end.isSame(eventEnd.clone().stripZone())\n\t\t\t\t\t) {\n\t\t\t\t\t\tresizeLocation = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (resizeLocation) {\n\t\t\t\t\tview.hideEvent(event);\n\t\t\t\t\t_this.renderEventResize(resizeLocation, seg);\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tresizeLocation = null;\n\t\t\t\tview.showEvent(event); // for when out-of-bounds. show original\n\t\t\t},\n\t\t\thitDone: function() { // resets the rendering to show the original event\n\t\t\t\t_this.unrenderEventResize();\n\t\t\t\tenableCursor();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\tif (isDragging) {\n\t\t\t\t\t_this.segResizeStop(seg, ev);\n\t\t\t\t}\n\n\t\t\t\tif (resizeLocation) { // valid date to resize to?\n\t\t\t\t\t// no need to re-show original, will rerender all anyways. esp important if eventRenderWait\n\t\t\t\t\tview.reportEventResize(event, resizeLocation, _this.largeUnit, el, ev);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tview.showEvent(event);\n\t\t\t\t}\n\t\t\t\t_this.segResizeListener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Called before event segment resizing starts\n\tsegResizeStart: function(seg, ev) {\n\t\tthis.isResizingSeg = true;\n\t\tthis.view.publiclyTrigger('eventResizeStart', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\n\t},\n\n\n\t// Called after event segment resizing stops\n\tsegResizeStop: function(seg, ev) {\n\t\tthis.isResizingSeg = false;\n\t\tthis.view.publiclyTrigger('eventResizeStop', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\n\t},\n\n\n\t// Returns new date-information for an event segment being resized from its start\n\tcomputeEventStartResize: function(startSpan, endSpan, event) {\n\t\treturn this.computeEventResize('start', startSpan, endSpan, event);\n\t},\n\n\n\t// Returns new date-information for an event segment being resized from its end\n\tcomputeEventEndResize: function(startSpan, endSpan, event) {\n\t\treturn this.computeEventResize('end', startSpan, endSpan, event);\n\t},\n\n\n\t// Returns new zoned date information for an event segment being resized from its start OR end\n\t// `type` is either 'start' or 'end'.\n\t// DOES NOT consider overlap/constraint.\n\tcomputeEventResize: function(type, startSpan, endSpan, event) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar delta = this.diffDates(endSpan[type], startSpan[type]);\n\t\tvar resizeLocation; // zoned event date properties\n\t\tvar defaultDuration;\n\n\t\t// build original values to work from, guaranteeing a start and end\n\t\tresizeLocation = {\n\t\t\tstart: event.start.clone(),\n\t\t\tend: calendar.getEventEnd(event),\n\t\t\tallDay: event.allDay\n\t\t};\n\n\t\t// if an all-day event was in a timed area and was resized to a time, adjust start/end to have times\n\t\tif (resizeLocation.allDay && durationHasTime(delta)) {\n\t\t\tresizeLocation.allDay = false;\n\t\t\tcalendar.normalizeEventTimes(resizeLocation);\n\t\t}\n\n\t\tresizeLocation[type].add(delta); // apply delta to start or end\n\n\t\t// if the event was compressed too small, find a new reasonable duration for it\n\t\tif (!resizeLocation.start.isBefore(resizeLocation.end)) {\n\n\t\t\tdefaultDuration =\n\t\t\t\tthis.minResizeDuration || // TODO: hack\n\t\t\t\t(event.allDay ?\n\t\t\t\t\tcalendar.defaultAllDayEventDuration :\n\t\t\t\t\tcalendar.defaultTimedEventDuration);\n\n\t\t\tif (type == 'start') { // resizing the start?\n\t\t\t\tresizeLocation.start = resizeLocation.end.clone().subtract(defaultDuration);\n\t\t\t}\n\t\t\telse { // resizing the end?\n\t\t\t\tresizeLocation.end = resizeLocation.start.clone().add(defaultDuration);\n\t\t\t}\n\t\t}\n\n\t\treturn resizeLocation;\n\t},\n\n\n\t// Renders a visual indication of an event being resized.\n\t// `range` has the updated dates of the event. `seg` is the original segment object involved in the drag.\n\t// Must return elements used for any mock events.\n\trenderEventResize: function(range, seg) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a visual indication of an event being resized.\n\tunrenderEventResize: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t/* Rendering Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Compute the text that should be displayed on an event's element.\n\t// `range` can be the Event object itself, or something range-like, with at least a `start`.\n\t// If event times are disabled, or the event has no time, will return a blank string.\n\t// If not specified, formatStr will default to the eventTimeFormat setting,\n\t// and displayEnd will default to the displayEventEnd setting.\n\tgetEventTimeText: function(range, formatStr, displayEnd) {\n\n\t\tif (formatStr == null) {\n\t\t\tformatStr = this.eventTimeFormat;\n\t\t}\n\n\t\tif (displayEnd == null) {\n\t\t\tdisplayEnd = this.displayEventEnd;\n\t\t}\n\n\t\tif (this.displayEventTime && range.start.hasTime()) {\n\t\t\tif (displayEnd && range.end) {\n\t\t\t\treturn this.view.formatRange(range, formatStr);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn range.start.format(formatStr);\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generic utility for generating the HTML classNames for an event segment's element\n\tgetSegClasses: function(seg, isDraggable, isResizable) {\n\t\tvar view = this.view;\n\t\tvar classes = [\n\t\t\t'fc-event',\n\t\t\tseg.isStart ? 'fc-start' : 'fc-not-start',\n\t\t\tseg.isEnd ? 'fc-end' : 'fc-not-end'\n\t\t].concat(this.getSegCustomClasses(seg));\n\n\t\tif (isDraggable) {\n\t\t\tclasses.push('fc-draggable');\n\t\t}\n\t\tif (isResizable) {\n\t\t\tclasses.push('fc-resizable');\n\t\t}\n\n\t\t// event is currently selected? attach a className.\n\t\tif (view.isEventSelected(seg.event)) {\n\t\t\tclasses.push('fc-selected');\n\t\t}\n\n\t\treturn classes;\n\t},\n\n\n\t// List of classes that were defined by the caller of the API in some way\n\tgetSegCustomClasses: function(seg) {\n\t\tvar event = seg.event;\n\n\t\treturn [].concat(\n\t\t\tevent.className, // guaranteed to be an array\n\t\t\tevent.source ? event.source.className : []\n\t\t);\n\t},\n\n\n\t// Utility for generating event skin-related CSS properties\n\tgetSegSkinCss: function(seg) {\n\t\treturn {\n\t\t\t'background-color': this.getSegBackgroundColor(seg),\n\t\t\t'border-color': this.getSegBorderColor(seg),\n\t\t\tcolor: this.getSegTextColor(seg)\n\t\t};\n\t},\n\n\n\t// Queries for caller-specified color, then falls back to default\n\tgetSegBackgroundColor: function(seg) {\n\t\treturn seg.event.backgroundColor ||\n\t\t\tseg.event.color ||\n\t\t\tthis.getSegDefaultBackgroundColor(seg);\n\t},\n\n\n\tgetSegDefaultBackgroundColor: function(seg) {\n\t\tvar source = seg.event.source || {};\n\n\t\treturn source.backgroundColor ||\n\t\t\tsource.color ||\n\t\t\tthis.view.opt('eventBackgroundColor') ||\n\t\t\tthis.view.opt('eventColor');\n\t},\n\n\n\t// Queries for caller-specified color, then falls back to default\n\tgetSegBorderColor: function(seg) {\n\t\treturn seg.event.borderColor ||\n\t\t\tseg.event.color ||\n\t\t\tthis.getSegDefaultBorderColor(seg);\n\t},\n\n\n\tgetSegDefaultBorderColor: function(seg) {\n\t\tvar source = seg.event.source || {};\n\n\t\treturn source.borderColor ||\n\t\t\tsource.color ||\n\t\t\tthis.view.opt('eventBorderColor') ||\n\t\t\tthis.view.opt('eventColor');\n\t},\n\n\n\t// Queries for caller-specified color, then falls back to default\n\tgetSegTextColor: function(seg) {\n\t\treturn seg.event.textColor ||\n\t\t\tthis.getSegDefaultTextColor(seg);\n\t},\n\n\n\tgetSegDefaultTextColor: function(seg) {\n\t\tvar source = seg.event.source || {};\n\n\t\treturn source.textColor ||\n\t\t\tthis.view.opt('eventTextColor');\n\t},\n\n\n\t/* Converting events -> eventRange -> eventSpan -> eventSegs\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Generates an array of segments for the given single event\n\t// Can accept an event \"location\" as well (which only has start/end and no allDay)\n\teventToSegs: function(event) {\n\t\treturn this.eventsToSegs([ event ]);\n\t},\n\n\n\teventToSpan: function(event) {\n\t\treturn this.eventToSpans(event)[0];\n\t},\n\n\n\t// Generates spans (always unzoned) for the given event.\n\t// Does not do any inverting for inverse-background events.\n\t// Can accept an event \"location\" as well (which only has start/end and no allDay)\n\teventToSpans: function(event) {\n\t\tvar range = this.eventToRange(event);\n\t\treturn this.eventRangeToSpans(range, event);\n\t},\n\n\n\n\t// Converts an array of event objects into an array of event segment objects.\n\t// A custom `segSliceFunc` may be given for arbitrarily slicing up events.\n\t// Doesn't guarantee an order for the resulting array.\n\teventsToSegs: function(allEvents, segSliceFunc) {\n\t\tvar _this = this;\n\t\tvar eventsById = groupEventsById(allEvents);\n\t\tvar segs = [];\n\n\t\t$.each(eventsById, function(id, events) {\n\t\t\tvar ranges = [];\n\t\t\tvar i;\n\n\t\t\tfor (i = 0; i < events.length; i++) {\n\t\t\t\tranges.push(_this.eventToRange(events[i]));\n\t\t\t}\n\n\t\t\t// inverse-background events (utilize only the first event in calculations)\n\t\t\tif (isInverseBgEvent(events[0])) {\n\t\t\t\tranges = _this.invertRanges(ranges);\n\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\tsegs.push.apply(segs, // append to\n\t\t\t\t\t\t_this.eventRangeToSegs(ranges[i], events[0], segSliceFunc));\n\t\t\t\t}\n\t\t\t}\n\t\t\t// normal event ranges\n\t\t\telse {\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\t\t\tsegs.push.apply(segs, // append to\n\t\t\t\t\t\t_this.eventRangeToSegs(ranges[i], events[i], segSliceFunc));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn segs;\n\t},\n\n\n\t// Generates the unzoned start/end dates an event appears to occupy\n\t// Can accept an event \"location\" as well (which only has start/end and no allDay)\n\teventToRange: function(event) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar start = event.start.clone().stripZone();\n\t\tvar end = (\n\t\t\t\tevent.end ?\n\t\t\t\t\tevent.end.clone() :\n\t\t\t\t\t// derive the end from the start and allDay. compute allDay if necessary\n\t\t\t\t\tcalendar.getDefaultEventEnd(\n\t\t\t\t\t\tevent.allDay != null ?\n\t\t\t\t\t\t\tevent.allDay :\n\t\t\t\t\t\t\t!event.start.hasTime(),\n\t\t\t\t\t\tevent.start\n\t\t\t\t\t)\n\t\t\t).stripZone();\n\n\t\t// hack: dynamic locale change forgets to upate stored event localed\n\t\tcalendar.localizeMoment(start);\n\t\tcalendar.localizeMoment(end);\n\n\t\treturn { start: start, end: end };\n\t},\n\n\n\t// Given an event's range (unzoned start/end), and the event itself,\n\t// slice into segments (using the segSliceFunc function if specified)\n\teventRangeToSegs: function(range, event, segSliceFunc) {\n\t\tvar spans = this.eventRangeToSpans(range, event);\n\t\tvar segs = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < spans.length; i++) {\n\t\t\tsegs.push.apply(segs, // append to\n\t\t\t\tthis.eventSpanToSegs(spans[i], event, segSliceFunc));\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t// Given an event's unzoned date range, return an array of \"span\" objects.\n\t// Subclasses can override.\n\teventRangeToSpans: function(range, event) {\n\t\treturn [ $.extend({}, range) ]; // copy into a single-item array\n\t},\n\n\n\t// Given an event's span (unzoned start/end and other misc data), and the event itself,\n\t// slices into segments and attaches event-derived properties to them.\n\teventSpanToSegs: function(span, event, segSliceFunc) {\n\t\tvar segs = segSliceFunc ? segSliceFunc(span) : this.spanToSegs(span);\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.event = event;\n\t\t\tseg.eventStartMS = +span.start; // TODO: not the best name after making spans unzoned\n\t\t\tseg.eventDurationMS = span.end - span.start;\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t// Produces a new array of range objects that will cover all the time NOT covered by the given ranges.\n\t// SIDE EFFECT: will mutate the given array and will use its date references.\n\tinvertRanges: function(ranges) {\n\t\tvar view = this.view;\n\t\tvar viewStart = view.start.clone(); // need a copy\n\t\tvar viewEnd = view.end.clone(); // need a copy\n\t\tvar inverseRanges = [];\n\t\tvar start = viewStart; // the end of the previous range. the start of the new range\n\t\tvar i, range;\n\n\t\t// ranges need to be in order. required for our date-walking algorithm\n\t\tranges.sort(compareRanges);\n\n\t\tfor (i = 0; i < ranges.length; i++) {\n\t\t\trange = ranges[i];\n\n\t\t\t// add the span of time before the event (if there is any)\n\t\t\tif (range.start > start) { // compare millisecond time (skip any ambig logic)\n\t\t\t\tinverseRanges.push({\n\t\t\t\t\tstart: start,\n\t\t\t\t\tend: range.start\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tstart = range.end;\n\t\t}\n\n\t\t// add the span of time after the last event (if there is any)\n\t\tif (start < viewEnd) { // compare millisecond time (skip any ambig logic)\n\t\t\tinverseRanges.push({\n\t\t\t\tstart: start,\n\t\t\t\tend: viewEnd\n\t\t\t});\n\t\t}\n\n\t\treturn inverseRanges;\n\t},\n\n\n\tsortEventSegs: function(segs) {\n\t\tsegs.sort(proxy(this, 'compareEventSegs'));\n\t},\n\n\n\t// A cmp function for determining which segments should take visual priority\n\tcompareEventSegs: function(seg1, seg2) {\n\t\treturn seg1.eventStartMS - seg2.eventStartMS || // earlier events go first\n\t\t\tseg2.eventDurationMS - seg1.eventDurationMS || // tie? longer events go first\n\t\t\tseg2.event.allDay - seg1.event.allDay || // tie? put all-day events first (booleans cast to 0/1)\n\t\t\tcompareByFieldSpecs(seg1.event, seg2.event, this.view.eventOrderSpecs);\n\t}\n\n});\n\n\n/* Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nfunction pluckEventDateProps(event) {\n\treturn {\n\t\tstart: event.start.clone(),\n\t\tend: event.end ? event.end.clone() : null,\n\t\tallDay: event.allDay // keep it the same\n\t};\n}\nFC.pluckEventDateProps = pluckEventDateProps;\n\n\nfunction isBgEvent(event) { // returns true if background OR inverse-background\n\tvar rendering = getEventRendering(event);\n\treturn rendering === 'background' || rendering === 'inverse-background';\n}\nFC.isBgEvent = isBgEvent; // export\n\n\nfunction isInverseBgEvent(event) {\n\treturn getEventRendering(event) === 'inverse-background';\n}\n\n\nfunction getEventRendering(event) {\n\treturn firstDefined((event.source || {}).rendering, event.rendering);\n}\n\n\nfunction groupEventsById(events) {\n\tvar eventsById = {};\n\tvar i, event;\n\n\tfor (i = 0; i < events.length; i++) {\n\t\tevent = events[i];\n\t\t(eventsById[event._id] || (eventsById[event._id] = [])).push(event);\n\t}\n\n\treturn eventsById;\n}\n\n\n// A cmp function for determining which non-inverted \"ranges\" (see above) happen earlier\nfunction compareRanges(range1, range2) {\n\treturn range1.start - range2.start; // earlier ranges go first\n}\n\n\n/* External-Dragging-Element Data\n----------------------------------------------------------------------------------------------------------------------*/\n\n// Require all HTML5 data-* attributes used by FullCalendar to have this prefix.\n// A value of '' will query attributes like data-event. A value of 'fc' will query attributes like data-fc-event.\nFC.dataAttrPrefix = '';\n\n// Given a jQuery element that might represent a dragged FullCalendar event, returns an intermediate data structure\n// to be used for Event Object creation.\n// A defined `.eventProps`, even when empty, indicates that an event should be created.\nfunction getDraggedElMeta(el) {\n\tvar prefix = FC.dataAttrPrefix;\n\tvar eventProps; // properties for creating the event, not related to date/time\n\tvar startTime; // a Duration\n\tvar duration;\n\tvar stick;\n\n\tif (prefix) { prefix += '-'; }\n\teventProps = el.data(prefix + 'event') || null;\n\n\tif (eventProps) {\n\t\tif (typeof eventProps === 'object') {\n\t\t\teventProps = $.extend({}, eventProps); // make a copy\n\t\t}\n\t\telse { // something like 1 or true. still signal event creation\n\t\t\teventProps = {};\n\t\t}\n\n\t\t// pluck special-cased date/time properties\n\t\tstartTime = eventProps.start;\n\t\tif (startTime == null) { startTime = eventProps.time; } // accept 'time' as well\n\t\tduration = eventProps.duration;\n\t\tstick = eventProps.stick;\n\t\tdelete eventProps.start;\n\t\tdelete eventProps.time;\n\t\tdelete eventProps.duration;\n\t\tdelete eventProps.stick;\n\t}\n\n\t// fallback to standalone attribute values for each of the date/time properties\n\tif (startTime == null) { startTime = el.data(prefix + 'start'); }\n\tif (startTime == null) { startTime = el.data(prefix + 'time'); } // accept 'time' as well\n\tif (duration == null) { duration = el.data(prefix + 'duration'); }\n\tif (stick == null) { stick = el.data(prefix + 'stick'); }\n\n\t// massage into correct data types\n\tstartTime = startTime != null ? moment.duration(startTime) : null;\n\tduration = duration != null ? moment.duration(duration) : null;\n\tstick = Boolean(stick);\n\n\treturn { eventProps: eventProps, startTime: startTime, duration: duration, stick: stick };\n}\n\n\n;;\n\n/*\nA set of rendering and date-related methods for a visual component comprised of one or more rows of day columns.\nPrerequisite: the object being mixed into needs to be a *Grid*\n*/\nvar DayTableMixin = FC.DayTableMixin = {\n\n\tbreakOnWeeks: false, // should create a new row for each week?\n\tdayDates: null, // whole-day dates for each column. left to right\n\tdayIndices: null, // for each day from start, the offset\n\tdaysPerRow: null,\n\trowCnt: null,\n\tcolCnt: null,\n\tcolHeadFormat: null,\n\n\n\t// Populates internal variables used for date calculation and rendering\n\tupdateDayTable: function() {\n\t\tvar view = this.view;\n\t\tvar date = this.start.clone();\n\t\tvar dayIndex = -1;\n\t\tvar dayIndices = [];\n\t\tvar dayDates = [];\n\t\tvar daysPerRow;\n\t\tvar firstDay;\n\t\tvar rowCnt;\n\n\t\twhile (date.isBefore(this.end)) { // loop each day from start to end\n\t\t\tif (view.isHiddenDay(date)) {\n\t\t\t\tdayIndices.push(dayIndex + 0.5); // mark that it's between indices\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdayIndex++;\n\t\t\t\tdayIndices.push(dayIndex);\n\t\t\t\tdayDates.push(date.clone());\n\t\t\t}\n\t\t\tdate.add(1, 'days');\n\t\t}\n\n\t\tif (this.breakOnWeeks) {\n\t\t\t// count columns until the day-of-week repeats\n\t\t\tfirstDay = dayDates[0].day();\n\t\t\tfor (daysPerRow = 1; daysPerRow < dayDates.length; daysPerRow++) {\n\t\t\t\tif (dayDates[daysPerRow].day() == firstDay) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\trowCnt = Math.ceil(dayDates.length / daysPerRow);\n\t\t}\n\t\telse {\n\t\t\trowCnt = 1;\n\t\t\tdaysPerRow = dayDates.length;\n\t\t}\n\n\t\tthis.dayDates = dayDates;\n\t\tthis.dayIndices = dayIndices;\n\t\tthis.daysPerRow = daysPerRow;\n\t\tthis.rowCnt = rowCnt;\n\n\t\tthis.updateDayTableCols();\n\t},\n\n\n\t// Computes and assigned the colCnt property and updates any options that may be computed from it\n\tupdateDayTableCols: function() {\n\t\tthis.colCnt = this.computeColCnt();\n\t\tthis.colHeadFormat = this.view.opt('columnFormat') || this.computeColHeadFormat();\n\t},\n\n\n\t// Determines how many columns there should be in the table\n\tcomputeColCnt: function() {\n\t\treturn this.daysPerRow;\n\t},\n\n\n\t// Computes the ambiguously-timed moment for the given cell\n\tgetCellDate: function(row, col) {\n\t\treturn this.dayDates[\n\t\t\t\tthis.getCellDayIndex(row, col)\n\t\t\t].clone();\n\t},\n\n\n\t// Computes the ambiguously-timed date range for the given cell\n\tgetCellRange: function(row, col) {\n\t\tvar start = this.getCellDate(row, col);\n\t\tvar end = start.clone().add(1, 'days');\n\n\t\treturn { start: start, end: end };\n\t},\n\n\n\t// Returns the number of day cells, chronologically, from the first of the grid (0-based)\n\tgetCellDayIndex: function(row, col) {\n\t\treturn row * this.daysPerRow + this.getColDayIndex(col);\n\t},\n\n\n\t// Returns the numner of day cells, chronologically, from the first cell in *any given row*\n\tgetColDayIndex: function(col) {\n\t\tif (this.isRTL) {\n\t\t\treturn this.colCnt - 1 - col;\n\t\t}\n\t\telse {\n\t\t\treturn col;\n\t\t}\n\t},\n\n\n\t// Given a date, returns its chronolocial cell-index from the first cell of the grid.\n\t// If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n\t// If before the first offset, returns a negative number.\n\t// If after the last offset, returns an offset past the last cell offset.\n\t// Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n\tgetDateDayIndex: function(date) {\n\t\tvar dayIndices = this.dayIndices;\n\t\tvar dayOffset = date.diff(this.start, 'days');\n\n\t\tif (dayOffset < 0) {\n\t\t\treturn dayIndices[0] - 1;\n\t\t}\n\t\telse if (dayOffset >= dayIndices.length) {\n\t\t\treturn dayIndices[dayIndices.length - 1] + 1;\n\t\t}\n\t\telse {\n\t\t\treturn dayIndices[dayOffset];\n\t\t}\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes a default column header formatting string if `colFormat` is not explicitly defined\n\tcomputeColHeadFormat: function() {\n\t\t// if more than one week row, or if there are a lot of columns with not much space,\n\t\t// put just the day numbers will be in each cell\n\t\tif (this.rowCnt > 1 || this.colCnt > 10) {\n\t\t\treturn 'ddd'; // \"Sat\"\n\t\t}\n\t\t// multiple days, so full single date string WON'T be in title text\n\t\telse if (this.colCnt > 1) {\n\t\t\treturn this.view.opt('dayOfMonthFormat'); // \"Sat 12/10\"\n\t\t}\n\t\t// single day, so full single date string will probably be in title text\n\t\telse {\n\t\t\treturn 'dddd'; // \"Saturday\"\n\t\t}\n\t},\n\n\n\t/* Slicing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Slices up a date range into a segment for every week-row it intersects with\n\tsliceRangeByRow: function(range) {\n\t\tvar daysPerRow = this.daysPerRow;\n\t\tvar normalRange = this.view.computeDayRange(range); // make whole-day range, considering nextDayThreshold\n\t\tvar rangeFirst = this.getDateDayIndex(normalRange.start); // inclusive first index\n\t\tvar rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')); // inclusive last index\n\t\tvar segs = [];\n\t\tvar row;\n\t\tvar rowFirst, rowLast; // inclusive day-index range for current row\n\t\tvar segFirst, segLast; // inclusive day-index range for segment\n\n\t\tfor (row = 0; row < this.rowCnt; row++) {\n\t\t\trowFirst = row * daysPerRow;\n\t\t\trowLast = rowFirst + daysPerRow - 1;\n\n\t\t\t// intersect segment's offset range with the row's\n\t\t\tsegFirst = Math.max(rangeFirst, rowFirst);\n\t\t\tsegLast = Math.min(rangeLast, rowLast);\n\n\t\t\t// deal with in-between indices\n\t\t\tsegFirst = Math.ceil(segFirst); // in-between starts round to next cell\n\t\t\tsegLast = Math.floor(segLast); // in-between ends round to prev cell\n\n\t\t\tif (segFirst <= segLast) { // was there any intersection with the current row?\n\t\t\t\tsegs.push({\n\t\t\t\t\trow: row,\n\n\t\t\t\t\t// normalize to start of row\n\t\t\t\t\tfirstRowDayIndex: segFirst - rowFirst,\n\t\t\t\t\tlastRowDayIndex: segLast - rowFirst,\n\n\t\t\t\t\t// must be matching integers to be the segment's start/end\n\t\t\t\t\tisStart: segFirst === rangeFirst,\n\t\t\t\t\tisEnd: segLast === rangeLast\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t// Slices up a date range into a segment for every day-cell it intersects with.\n\t// TODO: make more DRY with sliceRangeByRow somehow.\n\tsliceRangeByDay: function(range) {\n\t\tvar daysPerRow = this.daysPerRow;\n\t\tvar normalRange = this.view.computeDayRange(range); // make whole-day range, considering nextDayThreshold\n\t\tvar rangeFirst = this.getDateDayIndex(normalRange.start); // inclusive first index\n\t\tvar rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')); // inclusive last index\n\t\tvar segs = [];\n\t\tvar row;\n\t\tvar rowFirst, rowLast; // inclusive day-index range for current row\n\t\tvar i;\n\t\tvar segFirst, segLast; // inclusive day-index range for segment\n\n\t\tfor (row = 0; row < this.rowCnt; row++) {\n\t\t\trowFirst = row * daysPerRow;\n\t\t\trowLast = rowFirst + daysPerRow - 1;\n\n\t\t\tfor (i = rowFirst; i <= rowLast; i++) {\n\n\t\t\t\t// intersect segment's offset range with the row's\n\t\t\t\tsegFirst = Math.max(rangeFirst, i);\n\t\t\t\tsegLast = Math.min(rangeLast, i);\n\n\t\t\t\t// deal with in-between indices\n\t\t\t\tsegFirst = Math.ceil(segFirst); // in-between starts round to next cell\n\t\t\t\tsegLast = Math.floor(segLast); // in-between ends round to prev cell\n\n\t\t\t\tif (segFirst <= segLast) { // was there any intersection with the current row?\n\t\t\t\t\tsegs.push({\n\t\t\t\t\t\trow: row,\n\n\t\t\t\t\t\t// normalize to start of row\n\t\t\t\t\t\tfirstRowDayIndex: segFirst - rowFirst,\n\t\t\t\t\t\tlastRowDayIndex: segLast - rowFirst,\n\n\t\t\t\t\t\t// must be matching integers to be the segment's start/end\n\t\t\t\t\t\tisStart: segFirst === rangeFirst,\n\t\t\t\t\t\tisEnd: segLast === rangeLast\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Header Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderHeadHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '' +\n\t\t\t'<div class=\"fc-row ' + view.widgetHeaderClass + '\">' +\n\t\t\t\t'<table>' +\n\t\t\t\t\t'<thead>' +\n\t\t\t\t\t\tthis.renderHeadTrHtml() +\n\t\t\t\t\t'</thead>' +\n\t\t\t\t'</table>' +\n\t\t\t'</div>';\n\t},\n\n\n\trenderHeadIntroHtml: function() {\n\t\treturn this.renderIntroHtml(); // fall back to generic\n\t},\n\n\n\trenderHeadTrHtml: function() {\n\t\treturn '' +\n\t\t\t'<tr>' +\n\t\t\t\t(this.isRTL ? '' : this.renderHeadIntroHtml()) +\n\t\t\t\tthis.renderHeadDateCellsHtml() +\n\t\t\t\t(this.isRTL ? this.renderHeadIntroHtml() : '') +\n\t\t\t'</tr>';\n\t},\n\n\n\trenderHeadDateCellsHtml: function() {\n\t\tvar htmls = [];\n\t\tvar col, date;\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tdate = this.getCellDate(0, col);\n\t\t\thtmls.push(this.renderHeadDateCellHtml(date));\n\t\t}\n\n\t\treturn htmls.join('');\n\t},\n\n\n\t// TODO: when internalApiVersion, accept an object for HTML attributes\n\t// (colspan should be no different)\n\trenderHeadDateCellHtml: function(date, colspan, otherAttrs) {\n\t\tvar view = this.view;\n\t\tvar classNames = [\n\t\t\t'fc-day-header',\n\t\t\tview.widgetHeaderClass\n\t\t];\n\n\t\t// if only one row of days, the classNames on the header can represent the specific days beneath\n\t\tif (this.rowCnt === 1) {\n\t\t\tclassNames = classNames.concat(\n\t\t\t\t// includes the day-of-week class\n\t\t\t\t// noThemeHighlight=true (don't highlight the header)\n\t\t\t\tthis.getDayClasses(date, true)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tclassNames.push('fc-' + dayIDs[date.day()]); // only add the day-of-week class\n\t\t}\n\n\t\treturn '' +\n            '<th class=\"' + classNames.join(' ') + '\"' +\n\t\t\t\t(this.rowCnt === 1 ?\n\t\t\t\t\t' data-date=\"' + date.format('YYYY-MM-DD') + '\"' :\n\t\t\t\t\t'') +\n\t\t\t\t(colspan > 1 ?\n\t\t\t\t\t' colspan=\"' + colspan + '\"' :\n\t\t\t\t\t'') +\n\t\t\t\t(otherAttrs ?\n\t\t\t\t\t' ' + otherAttrs :\n\t\t\t\t\t'') +\n\t\t\t\t'>' +\n\t\t\t\t// don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\n\t\t\t\tview.buildGotoAnchorHtml(\n\t\t\t\t\t{ date: date, forceOff: this.rowCnt > 1 || this.colCnt === 1 },\n\t\t\t\t\thtmlEscape(date.format(this.colHeadFormat)) // inner HTML\n\t\t\t\t) +\n\t\t\t'</th>';\n\t},\n\n\n\t/* Background Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBgTrHtml: function(row) {\n\t\treturn '' +\n\t\t\t'<tr>' +\n\t\t\t\t(this.isRTL ? '' : this.renderBgIntroHtml(row)) +\n\t\t\t\tthis.renderBgCellsHtml(row) +\n\t\t\t\t(this.isRTL ? this.renderBgIntroHtml(row) : '') +\n\t\t\t'</tr>';\n\t},\n\n\n\trenderBgIntroHtml: function(row) {\n\t\treturn this.renderIntroHtml(); // fall back to generic\n\t},\n\n\n\trenderBgCellsHtml: function(row) {\n\t\tvar htmls = [];\n\t\tvar col, date;\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tdate = this.getCellDate(row, col);\n\t\t\thtmls.push(this.renderBgCellHtml(date));\n\t\t}\n\n\t\treturn htmls.join('');\n\t},\n\n\n\trenderBgCellHtml: function(date, otherAttrs) {\n\t\tvar view = this.view;\n\t\tvar classes = this.getDayClasses(date);\n\n\t\tclasses.unshift('fc-day', view.widgetContentClass);\n\n\t\treturn '<td class=\"' + classes.join(' ') + '\"' +\n\t\t\t' data-date=\"' + date.format('YYYY-MM-DD') + '\"' + // if date has a time, won't format it\n\t\t\t(otherAttrs ?\n\t\t\t\t' ' + otherAttrs :\n\t\t\t\t'') +\n\t\t\t'></td>';\n\t},\n\n\n\t/* Generic\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Generates the default HTML intro for any row. User classes should override\n\trenderIntroHtml: function() {\n\t},\n\n\n\t// TODO: a generic method for dealing with <tr>, RTL, intro\n\t// when increment internalApiVersion\n\t// wrapTr (scheduler)\n\n\n\t/* Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Applies the generic \"intro\" and \"outro\" HTML to the given cells.\n\t// Intro means the leftmost cell when the calendar is LTR and the rightmost cell when RTL. Vice-versa for outro.\n\tbookendCells: function(trEl) {\n\t\tvar introHtml = this.renderIntroHtml();\n\n\t\tif (introHtml) {\n\t\t\tif (this.isRTL) {\n\t\t\t\ttrEl.append(introHtml);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttrEl.prepend(introHtml);\n\t\t\t}\n\t\t}\n\t}\n\n};\n\n;;\n\n/* A component that renders a grid of whole-days that runs horizontally. There can be multiple rows, one per week.\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar DayGrid = FC.DayGrid = Grid.extend(DayTableMixin, {\n\n\tnumbersVisible: false, // should render a row for day/week numbers? set by outside view. TODO: make internal\n\tbottomCoordPadding: 0, // hack for extending the hit area for the last row of the coordinate grid\n\n\trowEls: null, // set of fake row elements\n\tcellEls: null, // set of whole-day elements comprising the row's background\n\thelperEls: null, // set of cell skeleton elements for rendering the mock event \"helper\"\n\n\trowCoordCache: null,\n\tcolCoordCache: null,\n\n\n\t// Renders the rows and columns into the component's `this.el`, which should already be assigned.\n\t// isRigid determins whether the individual rows should ignore the contents and be a constant height.\n\t// Relies on the view's colCnt and rowCnt. In the future, this component should probably be self-sufficient.\n\trenderDates: function(isRigid) {\n\t\tvar view = this.view;\n\t\tvar rowCnt = this.rowCnt;\n\t\tvar colCnt = this.colCnt;\n\t\tvar html = '';\n\t\tvar row;\n\t\tvar col;\n\n\t\tfor (row = 0; row < rowCnt; row++) {\n\t\t\thtml += this.renderDayRowHtml(row, isRigid);\n\t\t}\n\t\tthis.el.html(html);\n\n\t\tthis.rowEls = this.el.find('.fc-row');\n\t\tthis.cellEls = this.el.find('.fc-day');\n\n\t\tthis.rowCoordCache = new CoordCache({\n\t\t\tels: this.rowEls,\n\t\t\tisVertical: true\n\t\t});\n\t\tthis.colCoordCache = new CoordCache({\n\t\t\tels: this.cellEls.slice(0, this.colCnt), // only the first row\n\t\t\tisHorizontal: true\n\t\t});\n\n\t\t// trigger dayRender with each cell's element\n\t\tfor (row = 0; row < rowCnt; row++) {\n\t\t\tfor (col = 0; col < colCnt; col++) {\n\t\t\t\tview.publiclyTrigger(\n\t\t\t\t\t'dayRender',\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.getCellDate(row, col),\n\t\t\t\t\tthis.getCellEl(row, col)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tunrenderDates: function() {\n\t\tthis.removeSegPopover();\n\t},\n\n\n\trenderBusinessHours: function() {\n\t\tvar segs = this.buildBusinessHourSegs(true); // wholeDay=true\n\t\tthis.renderFill('businessHours', segs, 'bgevent');\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t\tthis.unrenderFill('businessHours');\n\t},\n\n\n\t// Generates the HTML for a single row, which is a div that wraps a table.\n\t// `row` is the row number.\n\trenderDayRowHtml: function(row, isRigid) {\n\t\tvar view = this.view;\n\t\tvar classes = [ 'fc-row', 'fc-week', view.widgetContentClass ];\n\n\t\tif (isRigid) {\n\t\t\tclasses.push('fc-rigid');\n\t\t}\n\n\t\treturn '' +\n\t\t\t'<div class=\"' + classes.join(' ') + '\">' +\n\t\t\t\t'<div class=\"fc-bg\">' +\n\t\t\t\t\t'<table>' +\n\t\t\t\t\t\tthis.renderBgTrHtml(row) +\n\t\t\t\t\t'</table>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'<div class=\"fc-content-skeleton\">' +\n\t\t\t\t\t'<table>' +\n\t\t\t\t\t\t(this.numbersVisible ?\n\t\t\t\t\t\t\t'<thead>' +\n\t\t\t\t\t\t\t\tthis.renderNumberTrHtml(row) +\n\t\t\t\t\t\t\t'</thead>' :\n\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t) +\n\t\t\t\t\t'</table>' +\n\t\t\t\t'</div>' +\n\t\t\t'</div>';\n\t},\n\n\n\t/* Grid Number Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderNumberTrHtml: function(row) {\n\t\treturn '' +\n\t\t\t'<tr>' +\n\t\t\t\t(this.isRTL ? '' : this.renderNumberIntroHtml(row)) +\n\t\t\t\tthis.renderNumberCellsHtml(row) +\n\t\t\t\t(this.isRTL ? this.renderNumberIntroHtml(row) : '') +\n\t\t\t'</tr>';\n\t},\n\n\n\trenderNumberIntroHtml: function(row) {\n\t\treturn this.renderIntroHtml();\n\t},\n\n\n\trenderNumberCellsHtml: function(row) {\n\t\tvar htmls = [];\n\t\tvar col, date;\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tdate = this.getCellDate(row, col);\n\t\t\thtmls.push(this.renderNumberCellHtml(date));\n\t\t}\n\n\t\treturn htmls.join('');\n\t},\n\n\n\t// Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n\t// The number row will only exist if either day numbers or week numbers are turned on.\n\trenderNumberCellHtml: function(date) {\n\t\tvar html = '';\n\t\tvar classes;\n\t\tvar weekCalcFirstDoW;\n\n\t\tif (!this.view.dayNumbersVisible && !this.view.cellWeekNumbersVisible) {\n\t\t\t// no numbers in day cell (week number must be along the side)\n\t\t\treturn '<td/>'; //  will create an empty space above events :(\n\t\t}\n\n\t\tclasses = this.getDayClasses(date);\n\t\tclasses.unshift('fc-day-top');\n\n\t\tif (this.view.cellWeekNumbersVisible) {\n\t\t\t// To determine the day of week number change under ISO, we cannot\n\t\t\t// rely on moment.js methods such as firstDayOfWeek() or weekday(),\n\t\t\t// because they rely on the locale's dow (possibly overridden by\n\t\t\t// our firstDay option), which may not be Monday. We cannot change\n\t\t\t// dow, because that would affect the calendar start day as well.\n\t\t\tif (date._locale._fullCalendar_weekCalc === 'ISO') {\n\t\t\t\tweekCalcFirstDoW = 1;  // Monday by ISO 8601 definition\n\t\t\t}\n\t\t\telse {\n\t\t\t\tweekCalcFirstDoW = date._locale.firstDayOfWeek();\n\t\t\t}\n\t\t}\n\n\t\thtml += '<td class=\"' + classes.join(' ') + '\" data-date=\"' + date.format() + '\">';\n\n\t\tif (this.view.cellWeekNumbersVisible && (date.day() == weekCalcFirstDoW)) {\n\t\t\thtml += this.view.buildGotoAnchorHtml(\n\t\t\t\t{ date: date, type: 'week' },\n\t\t\t\t{ 'class': 'fc-week-number' },\n\t\t\t\tdate.format('w') // inner HTML\n\t\t\t);\n\t\t}\n\n\t\tif (this.view.dayNumbersVisible) {\n\t\t\thtml += this.view.buildGotoAnchorHtml(\n\t\t\t\tdate,\n\t\t\t\t{ 'class': 'fc-day-number' },\n\t\t\t\tdate.date() // inner HTML\n\t\t\t);\n\t\t}\n\n\t\thtml += '</td>';\n\n\t\treturn html;\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes a default event time formatting string if `timeFormat` is not explicitly defined\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.view.opt('extraSmallTimeFormat'); // like \"6p\" or \"6:30p\"\n\t},\n\n\n\t// Computes a default `displayEventEnd` value if one is not expliclty defined\n\tcomputeDisplayEventEnd: function() {\n\t\treturn this.colCnt == 1; // we'll likely have space if there's only one day\n\t},\n\n\n\t/* Dates\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trangeUpdated: function() {\n\t\tthis.updateDayTable();\n\t},\n\n\n\t// Slices up the given span (unzoned start/end with other misc data) into an array of segments\n\tspanToSegs: function(span) {\n\t\tvar segs = this.sliceRangeByRow(span);\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tif (this.isRTL) {\n\t\t\t\tseg.leftCol = this.daysPerRow - 1 - seg.lastRowDayIndex;\n\t\t\t\tseg.rightCol = this.daysPerRow - 1 - seg.firstRowDayIndex;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tseg.leftCol = seg.firstRowDayIndex;\n\t\t\t\tseg.rightCol = seg.lastRowDayIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Hit System\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tprepareHits: function() {\n\t\tthis.colCoordCache.build();\n\t\tthis.rowCoordCache.build();\n\t\tthis.rowCoordCache.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.colCoordCache.clear();\n\t\tthis.rowCoordCache.clear();\n\t},\n\n\n\tqueryHit: function(leftOffset, topOffset) {\n\t\tif (this.colCoordCache.isLeftInBounds(leftOffset) && this.rowCoordCache.isTopInBounds(topOffset)) {\n\t\t\tvar col = this.colCoordCache.getHorizontalIndex(leftOffset);\n\t\t\tvar row = this.rowCoordCache.getVerticalIndex(topOffset);\n\n\t\t\tif (row != null && col != null) {\n\t\t\t\treturn this.getCellHit(row, col);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tgetHitSpan: function(hit) {\n\t\treturn this.getCellRange(hit.row, hit.col);\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\treturn this.getCellEl(hit.row, hit.col);\n\t},\n\n\n\t/* Cell System\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// FYI: the first column is the leftmost column, regardless of date\n\n\n\tgetCellHit: function(row, col) {\n\t\treturn {\n\t\t\trow: row,\n\t\t\tcol: col,\n\t\t\tcomponent: this, // needed unfortunately :(\n\t\t\tleft: this.colCoordCache.getLeftOffset(col),\n\t\t\tright: this.colCoordCache.getRightOffset(col),\n\t\t\ttop: this.rowCoordCache.getTopOffset(row),\n\t\t\tbottom: this.rowCoordCache.getBottomOffset(row)\n\t\t};\n\t},\n\n\n\tgetCellEl: function(row, col) {\n\t\treturn this.cellEls.eq(row * this.colCnt + col);\n\t},\n\n\n\t/* Event Drag Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// TODO: move to DayGrid.event, similar to what we did with Grid's drag methods\n\n\n\t// Renders a visual indication of an event or external element being dragged.\n\t// `eventLocation` has zoned start and end (optional)\n\trenderDrag: function(eventLocation, seg) {\n\n\t\t// always render a highlight underneath\n\t\tthis.renderHighlight(this.eventToSpan(eventLocation));\n\n\t\t// if a segment from the same calendar but another component is being dragged, render a helper event\n\t\tif (seg && seg.component !== this) {\n\t\t\treturn this.renderEventLocationHelper(eventLocation, seg); // returns mock event elements\n\t\t}\n\t},\n\n\n\t// Unrenders any visual indication of a hovering event\n\tunrenderDrag: function() {\n\t\tthis.unrenderHighlight();\n\t\tthis.unrenderHelper();\n\t},\n\n\n\t/* Event Resize Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event being resized\n\trenderEventResize: function(eventLocation, seg) {\n\t\tthis.renderHighlight(this.eventToSpan(eventLocation));\n\t\treturn this.renderEventLocationHelper(eventLocation, seg); // returns mock event elements\n\t},\n\n\n\t// Unrenders a visual indication of an event being resized\n\tunrenderEventResize: function() {\n\t\tthis.unrenderHighlight();\n\t\tthis.unrenderHelper();\n\t},\n\n\n\t/* Event Helper\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a mock \"helper\" event. `sourceSeg` is the associated internal segment object. It can be null.\n\trenderHelper: function(event, sourceSeg) {\n\t\tvar helperNodes = [];\n\t\tvar segs = this.eventToSegs(event);\n\t\tvar rowStructs;\n\n\t\tsegs = this.renderFgSegEls(segs); // assigns each seg's el and returns a subset of segs that were rendered\n\t\trowStructs = this.renderSegRows(segs);\n\n\t\t// inject each new event skeleton into each associated row\n\t\tthis.rowEls.each(function(row, rowNode) {\n\t\t\tvar rowEl = $(rowNode); // the .fc-row\n\t\t\tvar skeletonEl = $('<div class=\"fc-helper-skeleton\"><table/></div>'); // will be absolutely positioned\n\t\t\tvar skeletonTop;\n\n\t\t\t// If there is an original segment, match the top position. Otherwise, put it at the row's top level\n\t\t\tif (sourceSeg && sourceSeg.row === row) {\n\t\t\t\tskeletonTop = sourceSeg.el.position().top;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tskeletonTop = rowEl.find('.fc-content-skeleton tbody').position().top;\n\t\t\t}\n\n\t\t\tskeletonEl.css('top', skeletonTop)\n\t\t\t\t.find('table')\n\t\t\t\t\t.append(rowStructs[row].tbodyEl);\n\n\t\t\trowEl.append(skeletonEl);\n\t\t\thelperNodes.push(skeletonEl[0]);\n\t\t});\n\n\t\treturn ( // must return the elements rendered\n\t\t\tthis.helperEls = $(helperNodes) // array -> jQuery set\n\t\t);\n\t},\n\n\n\t// Unrenders any visual indication of a mock helper event\n\tunrenderHelper: function() {\n\t\tif (this.helperEls) {\n\t\t\tthis.helperEls.remove();\n\t\t\tthis.helperEls = null;\n\t\t}\n\t},\n\n\n\t/* Fill System (highlight, background events, business hours)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tfillSegTag: 'td', // override the default tag name\n\n\n\t// Renders a set of rectangles over the given segments of days.\n\t// Only returns segments that successfully rendered.\n\trenderFill: function(type, segs, className) {\n\t\tvar nodes = [];\n\t\tvar i, seg;\n\t\tvar skeletonEl;\n\n\t\tsegs = this.renderFillSegEls(type, segs); // assignes `.el` to each seg. returns successfully rendered segs\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tskeletonEl = this.renderFillRow(type, seg, className);\n\t\t\tthis.rowEls.eq(seg.row).append(skeletonEl);\n\t\t\tnodes.push(skeletonEl[0]);\n\t\t}\n\n\t\tthis.elsByFill[type] = $(nodes);\n\n\t\treturn segs;\n\t},\n\n\n\t// Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n\trenderFillRow: function(type, seg, className) {\n\t\tvar colCnt = this.colCnt;\n\t\tvar startCol = seg.leftCol;\n\t\tvar endCol = seg.rightCol + 1;\n\t\tvar skeletonEl;\n\t\tvar trEl;\n\n\t\tclassName = className || type.toLowerCase();\n\n\t\tskeletonEl = $(\n\t\t\t'<div class=\"fc-' + className + '-skeleton\">' +\n\t\t\t\t'<table><tr/></table>' +\n\t\t\t'</div>'\n\t\t);\n\t\ttrEl = skeletonEl.find('tr');\n\n\t\tif (startCol > 0) {\n\t\t\ttrEl.append('<td colspan=\"' + startCol + '\"/>');\n\t\t}\n\n\t\ttrEl.append(\n\t\t\tseg.el.attr('colspan', endCol - startCol)\n\t\t);\n\n\t\tif (endCol < colCnt) {\n\t\t\ttrEl.append('<td colspan=\"' + (colCnt - endCol) + '\"/>');\n\t\t}\n\n\t\tthis.bookendCells(trEl);\n\n\t\treturn skeletonEl;\n\t}\n\n});\n\n;;\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n\nDayGrid.mixin({\n\n\trowStructs: null, // an array of objects, each holding information about a row's foreground event-rendering\n\n\n\t// Unrenders all events currently rendered on the grid\n\tunrenderEvents: function() {\n\t\tthis.removeSegPopover(); // removes the \"more..\" events popover\n\t\tGrid.prototype.unrenderEvents.apply(this, arguments); // calls the super-method\n\t},\n\n\n\t// Retrieves all rendered segment objects currently rendered on the grid\n\tgetEventSegs: function() {\n\t\treturn Grid.prototype.getEventSegs.call(this) // get the segments from the super-method\n\t\t\t.concat(this.popoverSegs || []); // append the segments from the \"more...\" popover\n\t},\n\n\n\t// Renders the given background event segments onto the grid\n\trenderBgSegs: function(segs) {\n\n\t\t// don't render timed background events\n\t\tvar allDaySegs = $.grep(segs, function(seg) {\n\t\t\treturn seg.event.allDay;\n\t\t});\n\n\t\treturn Grid.prototype.renderBgSegs.call(this, allDaySegs); // call the super-method\n\t},\n\n\n\t// Renders the given foreground event segments onto the grid\n\trenderFgSegs: function(segs) {\n\t\tvar rowStructs;\n\n\t\t// render an `.el` on each seg\n\t\t// returns a subset of the segs. segs that were actually rendered\n\t\tsegs = this.renderFgSegEls(segs);\n\n\t\trowStructs = this.rowStructs = this.renderSegRows(segs);\n\n\t\t// append to each row's content skeleton\n\t\tthis.rowEls.each(function(i, rowNode) {\n\t\t\t$(rowNode).find('.fc-content-skeleton > table').append(\n\t\t\t\trowStructs[i].tbodyEl\n\t\t\t);\n\t\t});\n\n\t\treturn segs; // return only the segs that were actually rendered\n\t},\n\n\n\t// Unrenders all currently rendered foreground event segments\n\tunrenderFgSegs: function() {\n\t\tvar rowStructs = this.rowStructs || [];\n\t\tvar rowStruct;\n\n\t\twhile ((rowStruct = rowStructs.pop())) {\n\t\t\trowStruct.tbodyEl.remove();\n\t\t}\n\n\t\tthis.rowStructs = null;\n\t},\n\n\n\t// Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n\t// Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n\t// PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n\trenderSegRows: function(segs) {\n\t\tvar rowStructs = [];\n\t\tvar segRows;\n\t\tvar row;\n\n\t\tsegRows = this.groupSegRows(segs); // group into nested arrays\n\n\t\t// iterate each row of segment groupings\n\t\tfor (row = 0; row < segRows.length; row++) {\n\t\t\trowStructs.push(\n\t\t\t\tthis.renderSegRow(row, segRows[row])\n\t\t\t);\n\t\t}\n\n\t\treturn rowStructs;\n\t},\n\n\n\t// Builds the HTML to be used for the default element for an individual segment\n\tfgSegHtml: function(seg, disableResizing) {\n\t\tvar view = this.view;\n\t\tvar event = seg.event;\n\t\tvar isDraggable = view.isEventDraggable(event);\n\t\tvar isResizableFromStart = !disableResizing && event.allDay &&\n\t\t\tseg.isStart && view.isEventResizableFromStart(event);\n\t\tvar isResizableFromEnd = !disableResizing && event.allDay &&\n\t\t\tseg.isEnd && view.isEventResizableFromEnd(event);\n\t\tvar classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd);\n\t\tvar skinCss = cssToStr(this.getSegSkinCss(seg));\n\t\tvar timeHtml = '';\n\t\tvar timeText;\n\t\tvar titleHtml;\n\n\t\tclasses.unshift('fc-day-grid-event', 'fc-h-event');\n\n\t\t// Only display a timed events time if it is the starting segment\n\t\tif (seg.isStart) {\n\t\t\ttimeText = this.getEventTimeText(event);\n\t\t\tif (timeText) {\n\t\t\t\ttimeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n\t\t\t}\n\t\t}\n\n\t\ttitleHtml =\n\t\t\t'<span class=\"fc-title\">' +\n\t\t\t\t(htmlEscape(event.title || '') || '&nbsp;') + // we always want one line of height\n\t\t\t'</span>';\n\n\t\treturn '<a class=\"' + classes.join(' ') + '\"' +\n\t\t\t\t(event.url ?\n\t\t\t\t\t' href=\"' + htmlEscape(event.url) + '\"' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t(skinCss ?\n\t\t\t\t\t' style=\"' + skinCss + '\"' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t'>' +\n\t\t\t\t'<div class=\"fc-content\">' +\n\t\t\t\t\t(this.isRTL ?\n\t\t\t\t\t\ttitleHtml + ' ' + timeHtml : // put a natural space in between\n\t\t\t\t\t\ttimeHtml + ' ' + titleHtml   //\n\t\t\t\t\t\t) +\n\t\t\t\t'</div>' +\n\t\t\t\t(isResizableFromStart ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-start-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t(isResizableFromEnd ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-end-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t'</a>';\n\t},\n\n\n\t// Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n\t// the segments. Returns object with a bunch of internal data about how the render was calculated.\n\t// NOTE: modifies rowSegs\n\trenderSegRow: function(row, rowSegs) {\n\t\tvar colCnt = this.colCnt;\n\t\tvar segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n\t\tvar levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n\t\tvar tbody = $('<tbody/>');\n\t\tvar segMatrix = []; // lookup for which segments are rendered into which level+col cells\n\t\tvar cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n\t\tvar loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n\t\tvar i, levelSegs;\n\t\tvar col;\n\t\tvar tr;\n\t\tvar j, seg;\n\t\tvar td;\n\n\t\t// populates empty cells from the current column (`col`) to `endCol`\n\t\tfunction emptyCellsUntil(endCol) {\n\t\t\twhile (col < endCol) {\n\t\t\t\t// try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n\t\t\t\ttd = (loneCellMatrix[i - 1] || [])[col];\n\t\t\t\tif (td) {\n\t\t\t\t\ttd.attr(\n\t\t\t\t\t\t'rowspan',\n\t\t\t\t\t\tparseInt(td.attr('rowspan') || 1, 10) + 1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttd = $('<td/>');\n\t\t\t\t\ttr.append(td);\n\t\t\t\t}\n\t\t\t\tcellMatrix[i][col] = td;\n\t\t\t\tloneCellMatrix[i][col] = td;\n\t\t\t\tcol++;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < levelCnt; i++) { // iterate through all levels\n\t\t\tlevelSegs = segLevels[i];\n\t\t\tcol = 0;\n\t\t\ttr = $('<tr/>');\n\n\t\t\tsegMatrix.push([]);\n\t\t\tcellMatrix.push([]);\n\t\t\tloneCellMatrix.push([]);\n\n\t\t\t// levelCnt might be 1 even though there are no actual levels. protect against this.\n\t\t\t// this single empty row is useful for styling.\n\t\t\tif (levelSegs) {\n\t\t\t\tfor (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n\t\t\t\t\tseg = levelSegs[j];\n\n\t\t\t\t\temptyCellsUntil(seg.leftCol);\n\n\t\t\t\t\t// create a container that occupies or more columns. append the event element.\n\t\t\t\t\ttd = $('<td class=\"fc-event-container\"/>').append(seg.el);\n\t\t\t\t\tif (seg.leftCol != seg.rightCol) {\n\t\t\t\t\t\ttd.attr('colspan', seg.rightCol - seg.leftCol + 1);\n\t\t\t\t\t}\n\t\t\t\t\telse { // a single-column segment\n\t\t\t\t\t\tloneCellMatrix[i][col] = td;\n\t\t\t\t\t}\n\n\t\t\t\t\twhile (col <= seg.rightCol) {\n\t\t\t\t\t\tcellMatrix[i][col] = td;\n\t\t\t\t\t\tsegMatrix[i][col] = seg;\n\t\t\t\t\t\tcol++;\n\t\t\t\t\t}\n\n\t\t\t\t\ttr.append(td);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\temptyCellsUntil(colCnt); // finish off the row\n\t\t\tthis.bookendCells(tr);\n\t\t\ttbody.append(tr);\n\t\t}\n\n\t\treturn { // a \"rowStruct\"\n\t\t\trow: row, // the row number\n\t\t\ttbodyEl: tbody,\n\t\t\tcellMatrix: cellMatrix,\n\t\t\tsegMatrix: segMatrix,\n\t\t\tsegLevels: segLevels,\n\t\t\tsegs: rowSegs\n\t\t};\n\t},\n\n\n\t// Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n\t// NOTE: modifies segs\n\tbuildSegLevels: function(segs) {\n\t\tvar levels = [];\n\t\tvar i, seg;\n\t\tvar j;\n\n\t\t// Give preference to elements with certain criteria, so they have\n\t\t// a chance to be closer to the top.\n\t\tthis.sortEventSegs(segs);\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\n\t\t\t// loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n\t\t\tfor (j = 0; j < levels.length; j++) {\n\t\t\t\tif (!isDaySegCollision(seg, levels[j])) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// `j` now holds the desired subrow index\n\t\t\tseg.level = j;\n\n\t\t\t// create new level array if needed and append segment\n\t\t\t(levels[j] || (levels[j] = [])).push(seg);\n\t\t}\n\n\t\t// order segments left-to-right. very important if calendar is RTL\n\t\tfor (j = 0; j < levels.length; j++) {\n\t\t\tlevels[j].sort(compareDaySegCols);\n\t\t}\n\n\t\treturn levels;\n\t},\n\n\n\t// Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n\tgroupSegRows: function(segs) {\n\t\tvar segRows = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.rowCnt; i++) {\n\t\t\tsegRows.push([]);\n\t\t}\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tsegRows[segs[i].row].push(segs[i]);\n\t\t}\n\n\t\treturn segRows;\n\t}\n\n});\n\n\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\nfunction isDaySegCollision(seg, otherSegs) {\n\tvar i, otherSeg;\n\n\tfor (i = 0; i < otherSegs.length; i++) {\n\t\totherSeg = otherSegs[i];\n\n\t\tif (\n\t\t\totherSeg.leftCol <= seg.rightCol &&\n\t\t\totherSeg.rightCol >= seg.leftCol\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n\n// A cmp function for determining the leftmost event\nfunction compareDaySegCols(a, b) {\n\treturn a.leftCol - b.leftCol;\n}\n\n;;\n\n/* Methods relate to limiting the number events for a given day on a DayGrid\n----------------------------------------------------------------------------------------------------------------------*/\n// NOTE: all the segs being passed around in here are foreground segs\n\nDayGrid.mixin({\n\n\tsegPopover: null, // the Popover that holds events that can't fit in a cell. null when not visible\n\tpopoverSegs: null, // an array of segment objects that the segPopover holds. null when not visible\n\n\n\tremoveSegPopover: function() {\n\t\tif (this.segPopover) {\n\t\t\tthis.segPopover.hide(); // in handler, will call segPopover's removeElement\n\t\t}\n\t},\n\n\n\t// Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n\t// `levelLimit` can be false (don't limit), a number, or true (should be computed).\n\tlimitRows: function(levelLimit) {\n\t\tvar rowStructs = this.rowStructs || [];\n\t\tvar row; // row #\n\t\tvar rowLevelLimit;\n\n\t\tfor (row = 0; row < rowStructs.length; row++) {\n\t\t\tthis.unlimitRow(row);\n\n\t\t\tif (!levelLimit) {\n\t\t\t\trowLevelLimit = false;\n\t\t\t}\n\t\t\telse if (typeof levelLimit === 'number') {\n\t\t\t\trowLevelLimit = levelLimit;\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowLevelLimit = this.computeRowLevelLimit(row);\n\t\t\t}\n\n\t\t\tif (rowLevelLimit !== false) {\n\t\t\t\tthis.limitRow(row, rowLevelLimit);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Computes the number of levels a row will accomodate without going outside its bounds.\n\t// Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n\t// `row` is the row number.\n\tcomputeRowLevelLimit: function(row) {\n\t\tvar rowEl = this.rowEls.eq(row); // the containing \"fake\" row div\n\t\tvar rowHeight = rowEl.height(); // TODO: cache somehow?\n\t\tvar trEls = this.rowStructs[row].tbodyEl.children();\n\t\tvar i, trEl;\n\t\tvar trHeight;\n\n\t\tfunction iterInnerHeights(i, childNode) {\n\t\t\ttrHeight = Math.max(trHeight, $(childNode).outerHeight());\n\t\t}\n\n\t\t// Reveal one level <tr> at a time and stop when we find one out of bounds\n\t\tfor (i = 0; i < trEls.length; i++) {\n\t\t\ttrEl = trEls.eq(i).removeClass('fc-limited'); // reset to original state (reveal)\n\n\t\t\t// with rowspans>1 and IE8, trEl.outerHeight() would return the height of the largest cell,\n\t\t\t// so instead, find the tallest inner content element.\n\t\t\ttrHeight = 0;\n\t\t\ttrEl.find('> td > :first-child').each(iterInnerHeights);\n\n\t\t\tif (trEl.position().top + trHeight > rowHeight) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn false; // should not limit at all\n\t},\n\n\n\t// Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n\t// `row` is the row number.\n\t// `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n\tlimitRow: function(row, levelLimit) {\n\t\tvar _this = this;\n\t\tvar rowStruct = this.rowStructs[row];\n\t\tvar moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n\t\tvar col = 0; // col #, left-to-right (not chronologically)\n\t\tvar levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n\t\tvar cellMatrix; // a matrix (by level, then column) of all <td> jQuery elements in the row\n\t\tvar limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n\t\tvar i, seg;\n\t\tvar segsBelow; // array of segment objects below `seg` in the current `col`\n\t\tvar totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n\t\tvar colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n\t\tvar td, rowspan;\n\t\tvar segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n\t\tvar j;\n\t\tvar moreTd, moreWrap, moreLink;\n\n\t\t// Iterates through empty level cells and places \"more\" links inside if need be\n\t\tfunction emptyCellsUntil(endCol) { // goes from current `col` to `endCol`\n\t\t\twhile (col < endCol) {\n\t\t\t\tsegsBelow = _this.getCellSegs(row, col, levelLimit);\n\t\t\t\tif (segsBelow.length) {\n\t\t\t\t\ttd = cellMatrix[levelLimit - 1][col];\n\t\t\t\t\tmoreLink = _this.renderMoreLink(row, col, segsBelow);\n\t\t\t\t\tmoreWrap = $('<div/>').append(moreLink);\n\t\t\t\t\ttd.append(moreWrap);\n\t\t\t\t\tmoreNodes.push(moreWrap[0]);\n\t\t\t\t}\n\t\t\t\tcol++;\n\t\t\t}\n\t\t}\n\n\t\tif (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n\t\t\tlevelSegs = rowStruct.segLevels[levelLimit - 1];\n\t\t\tcellMatrix = rowStruct.cellMatrix;\n\n\t\t\tlimitedNodes = rowStruct.tbodyEl.children().slice(levelLimit) // get level <tr> elements past the limit\n\t\t\t\t.addClass('fc-limited').get(); // hide elements and get a simple DOM-nodes array\n\n\t\t\t// iterate though segments in the last allowable level\n\t\t\tfor (i = 0; i < levelSegs.length; i++) {\n\t\t\t\tseg = levelSegs[i];\n\t\t\t\temptyCellsUntil(seg.leftCol); // process empty cells before the segment\n\n\t\t\t\t// determine *all* segments below `seg` that occupy the same columns\n\t\t\t\tcolSegsBelow = [];\n\t\t\t\ttotalSegsBelow = 0;\n\t\t\t\twhile (col <= seg.rightCol) {\n\t\t\t\t\tsegsBelow = this.getCellSegs(row, col, levelLimit);\n\t\t\t\t\tcolSegsBelow.push(segsBelow);\n\t\t\t\t\ttotalSegsBelow += segsBelow.length;\n\t\t\t\t\tcol++;\n\t\t\t\t}\n\n\t\t\t\tif (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n\t\t\t\t\ttd = cellMatrix[levelLimit - 1][seg.leftCol]; // the segment's parent cell\n\t\t\t\t\trowspan = td.attr('rowspan') || 1;\n\t\t\t\t\tsegMoreNodes = [];\n\n\t\t\t\t\t// make a replacement <td> for each column the segment occupies. will be one for each colspan\n\t\t\t\t\tfor (j = 0; j < colSegsBelow.length; j++) {\n\t\t\t\t\t\tmoreTd = $('<td class=\"fc-more-cell\"/>').attr('rowspan', rowspan);\n\t\t\t\t\t\tsegsBelow = colSegsBelow[j];\n\t\t\t\t\t\tmoreLink = this.renderMoreLink(\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tseg.leftCol + j,\n\t\t\t\t\t\t\t[ seg ].concat(segsBelow) // count seg as hidden too\n\t\t\t\t\t\t);\n\t\t\t\t\t\tmoreWrap = $('<div/>').append(moreLink);\n\t\t\t\t\t\tmoreTd.append(moreWrap);\n\t\t\t\t\t\tsegMoreNodes.push(moreTd[0]);\n\t\t\t\t\t\tmoreNodes.push(moreTd[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\ttd.addClass('fc-limited').after($(segMoreNodes)); // hide original <td> and inject replacements\n\t\t\t\t\tlimitedNodes.push(td[0]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\temptyCellsUntil(this.colCnt); // finish off the level\n\t\t\trowStruct.moreEls = $(moreNodes); // for easy undoing later\n\t\t\trowStruct.limitedEls = $(limitedNodes); // for easy undoing later\n\t\t}\n\t},\n\n\n\t// Reveals all levels and removes all \"more\"-related elements for a grid's row.\n\t// `row` is a row number.\n\tunlimitRow: function(row) {\n\t\tvar rowStruct = this.rowStructs[row];\n\n\t\tif (rowStruct.moreEls) {\n\t\t\trowStruct.moreEls.remove();\n\t\t\trowStruct.moreEls = null;\n\t\t}\n\n\t\tif (rowStruct.limitedEls) {\n\t\t\trowStruct.limitedEls.removeClass('fc-limited');\n\t\t\trowStruct.limitedEls = null;\n\t\t}\n\t},\n\n\n\t// Renders an <a> element that represents hidden event element for a cell.\n\t// Responsible for attaching click handler as well.\n\trenderMoreLink: function(row, col, hiddenSegs) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\n\t\treturn $('<a class=\"fc-more\"/>')\n\t\t\t.text(\n\t\t\t\tthis.getMoreLinkText(hiddenSegs.length)\n\t\t\t)\n\t\t\t.on('click', function(ev) {\n\t\t\t\tvar clickOption = view.opt('eventLimitClick');\n\t\t\t\tvar date = _this.getCellDate(row, col);\n\t\t\t\tvar moreEl = $(this);\n\t\t\t\tvar dayEl = _this.getCellEl(row, col);\n\t\t\t\tvar allSegs = _this.getCellSegs(row, col);\n\n\t\t\t\t// rescope the segments to be within the cell's date\n\t\t\t\tvar reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n\t\t\t\tvar reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n\n\t\t\t\tif (typeof clickOption === 'function') {\n\t\t\t\t\t// the returned value can be an atomic option\n\t\t\t\t\tclickOption = view.publiclyTrigger('eventLimitClick', null, {\n\t\t\t\t\t\tdate: date,\n\t\t\t\t\t\tdayEl: dayEl,\n\t\t\t\t\t\tmoreEl: moreEl,\n\t\t\t\t\t\tsegs: reslicedAllSegs,\n\t\t\t\t\t\thiddenSegs: reslicedHiddenSegs\n\t\t\t\t\t}, ev);\n\t\t\t\t}\n\n\t\t\t\tif (clickOption === 'popover') {\n\t\t\t\t\t_this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n\t\t\t\t}\n\t\t\t\telse if (typeof clickOption === 'string') { // a view name\n\t\t\t\t\tview.calendar.zoomTo(date, clickOption);\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\n\t// Reveals the popover that displays all events within a cell\n\tshowSegPopover: function(row, col, moreLink, segs) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar moreWrap = moreLink.parent(); // the <div> wrapper around the <a>\n\t\tvar topEl; // the element we want to match the top coordinate of\n\t\tvar options;\n\n\t\tif (this.rowCnt == 1) {\n\t\t\ttopEl = view.el; // will cause the popover to cover any sort of header\n\t\t}\n\t\telse {\n\t\t\ttopEl = this.rowEls.eq(row); // will align with top of row\n\t\t}\n\n\t\toptions = {\n\t\t\tclassName: 'fc-more-popover',\n\t\t\tcontent: this.renderSegPopoverContent(row, col, segs),\n\t\t\tparentEl: this.view.el, // attach to root of view. guarantees outside of scrollbars.\n\t\t\ttop: topEl.offset().top,\n\t\t\tautoHide: true, // when the user clicks elsewhere, hide the popover\n\t\t\tviewportConstrain: view.opt('popoverViewportConstrain'),\n\t\t\thide: function() {\n\t\t\t\t// kill everything when the popover is hidden\n\t\t\t\t// notify events to be removed\n\t\t\t\tif (_this.popoverSegs) {\n\t\t\t\t\tvar seg;\n\t\t\t\t\tfor (var i = 0; i < _this.popoverSegs.length; ++i) {\n\t\t\t\t\t\tseg = _this.popoverSegs[i];\n\t\t\t\t\t\tview.publiclyTrigger('eventDestroy', seg.event, seg.event, seg.el);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_this.segPopover.removeElement();\n\t\t\t\t_this.segPopover = null;\n\t\t\t\t_this.popoverSegs = null;\n\t\t\t}\n\t\t};\n\n\t\t// Determine horizontal coordinate.\n\t\t// We use the moreWrap instead of the <td> to avoid border confusion.\n\t\tif (this.isRTL) {\n\t\t\toptions.right = moreWrap.offset().left + moreWrap.outerWidth() + 1; // +1 to be over cell border\n\t\t}\n\t\telse {\n\t\t\toptions.left = moreWrap.offset().left - 1; // -1 to be over cell border\n\t\t}\n\n\t\tthis.segPopover = new Popover(options);\n\t\tthis.segPopover.show();\n\n\t\t// the popover doesn't live within the grid's container element, and thus won't get the event\n\t\t// delegated-handlers for free. attach event-related handlers to the popover.\n\t\tthis.bindSegHandlersToEl(this.segPopover.el);\n\t},\n\n\n\t// Builds the inner DOM contents of the segment popover\n\trenderSegPopoverContent: function(row, col, segs) {\n\t\tvar view = this.view;\n\t\tvar isTheme = view.opt('theme');\n\t\tvar title = this.getCellDate(row, col).format(view.opt('dayPopoverFormat'));\n\t\tvar content = $(\n\t\t\t'<div class=\"fc-header ' + view.widgetHeaderClass + '\">' +\n\t\t\t\t'<span class=\"fc-close ' +\n\t\t\t\t\t(isTheme ? 'ui-icon ui-icon-closethick' : 'fc-icon fc-icon-x') +\n\t\t\t\t'\"></span>' +\n\t\t\t\t'<span class=\"fc-title\">' +\n\t\t\t\t\thtmlEscape(title) +\n\t\t\t\t'</span>' +\n\t\t\t\t'<div class=\"fc-clear\"/>' +\n\t\t\t'</div>' +\n\t\t\t'<div class=\"fc-body ' + view.widgetContentClass + '\">' +\n\t\t\t\t'<div class=\"fc-event-container\"></div>' +\n\t\t\t'</div>'\n\t\t);\n\t\tvar segContainer = content.find('.fc-event-container');\n\t\tvar i;\n\n\t\t// render each seg's `el` and only return the visible segs\n\t\tsegs = this.renderFgSegEls(segs, true); // disableResizing=true\n\t\tthis.popoverSegs = segs;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\n\t\t\t// because segments in the popover are not part of a grid coordinate system, provide a hint to any\n\t\t\t// grids that want to do drag-n-drop about which cell it came from\n\t\t\tthis.prepareHits();\n\t\t\tsegs[i].hit = this.getCellHit(row, col);\n\t\t\tthis.releaseHits();\n\n\t\t\tsegContainer.append(segs[i].el);\n\t\t}\n\n\t\treturn content;\n\t},\n\n\n\t// Given the events within an array of segment objects, reslice them to be in a single day\n\tresliceDaySegs: function(segs, dayDate) {\n\n\t\t// build an array of the original events\n\t\tvar events = $.map(segs, function(seg) {\n\t\t\treturn seg.event;\n\t\t});\n\n\t\tvar dayStart = dayDate.clone();\n\t\tvar dayEnd = dayStart.clone().add(1, 'days');\n\t\tvar dayRange = { start: dayStart, end: dayEnd };\n\n\t\t// slice the events with a custom slicing function\n\t\tsegs = this.eventsToSegs(\n\t\t\tevents,\n\t\t\tfunction(range) {\n\t\t\t\tvar seg = intersectRanges(range, dayRange); // undefind if no intersection\n\t\t\t\treturn seg ? [ seg ] : []; // must return an array of segments\n\t\t\t}\n\t\t);\n\n\t\t// force an order because eventsToSegs doesn't guarantee one\n\t\tthis.sortEventSegs(segs);\n\n\t\treturn segs;\n\t},\n\n\n\t// Generates the text that should be inside a \"more\" link, given the number of events it represents\n\tgetMoreLinkText: function(num) {\n\t\tvar opt = this.view.opt('eventLimitText');\n\n\t\tif (typeof opt === 'function') {\n\t\t\treturn opt(num);\n\t\t}\n\t\telse {\n\t\t\treturn '+' + num + ' ' + opt;\n\t\t}\n\t},\n\n\n\t// Returns segments within a given cell.\n\t// If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n\tgetCellSegs: function(row, col, startLevel) {\n\t\tvar segMatrix = this.rowStructs[row].segMatrix;\n\t\tvar level = startLevel || 0;\n\t\tvar segs = [];\n\t\tvar seg;\n\n\t\twhile (level < segMatrix.length) {\n\t\t\tseg = segMatrix[level][col];\n\t\t\tif (seg) {\n\t\t\t\tsegs.push(seg);\n\t\t\t}\n\t\t\tlevel++;\n\t\t}\n\n\t\treturn segs;\n\t}\n\n});\n\n;;\n\n/* A component that renders one or more columns of vertical time slots\n----------------------------------------------------------------------------------------------------------------------*/\n// We mixin DayTable, even though there is only a single row of days\n\nvar TimeGrid = FC.TimeGrid = Grid.extend(DayTableMixin, {\n\n\tslotDuration: null, // duration of a \"slot\", a distinct time segment on given day, visualized by lines\n\tsnapDuration: null, // granularity of time for dragging and selecting\n\tsnapsPerSlot: null,\n\tminTime: null, // Duration object that denotes the first visible time of any given day\n\tmaxTime: null, // Duration object that denotes the exclusive visible end time of any given day\n\tlabelFormat: null, // formatting string for times running along vertical axis\n\tlabelInterval: null, // duration of how often a label should be displayed for a slot\n\n\tcolEls: null, // cells elements in the day-row background\n\tslatContainerEl: null, // div that wraps all the slat rows\n\tslatEls: null, // elements running horizontally across all columns\n\tnowIndicatorEls: null,\n\n\tcolCoordCache: null,\n\tslatCoordCache: null,\n\n\n\tconstructor: function() {\n\t\tGrid.apply(this, arguments); // call the super-constructor\n\n\t\tthis.processOptions();\n\t},\n\n\n\t// Renders the time grid into `this.el`, which should already be assigned.\n\t// Relies on the view's colCnt. In the future, this component should probably be self-sufficient.\n\trenderDates: function() {\n\t\tthis.el.html(this.renderHtml());\n\t\tthis.colEls = this.el.find('.fc-day');\n\t\tthis.slatContainerEl = this.el.find('.fc-slats');\n\t\tthis.slatEls = this.slatContainerEl.find('tr');\n\n\t\tthis.colCoordCache = new CoordCache({\n\t\t\tels: this.colEls,\n\t\t\tisHorizontal: true\n\t\t});\n\t\tthis.slatCoordCache = new CoordCache({\n\t\t\tels: this.slatEls,\n\t\t\tisVertical: true\n\t\t});\n\n\t\tthis.renderContentSkeleton();\n\t},\n\n\n\t// Renders the basic HTML skeleton for the grid\n\trenderHtml: function() {\n\t\treturn '' +\n\t\t\t'<div class=\"fc-bg\">' +\n\t\t\t\t'<table>' +\n\t\t\t\t\tthis.renderBgTrHtml(0) + // row=0\n\t\t\t\t'</table>' +\n\t\t\t'</div>' +\n\t\t\t'<div class=\"fc-slats\">' +\n\t\t\t\t'<table>' +\n\t\t\t\t\tthis.renderSlatRowHtml() +\n\t\t\t\t'</table>' +\n\t\t\t'</div>';\n\t},\n\n\n\t// Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n\trenderSlatRowHtml: function() {\n\t\tvar view = this.view;\n\t\tvar isRTL = this.isRTL;\n\t\tvar html = '';\n\t\tvar slotTime = moment.duration(+this.minTime); // wish there was .clone() for durations\n\t\tvar slotDate; // will be on the view's first day, but we only care about its time\n\t\tvar isLabeled;\n\t\tvar axisHtml;\n\n\t\t// Calculate the time for each slot\n\t\twhile (slotTime < this.maxTime) {\n\t\t\tslotDate = this.start.clone().time(slotTime);\n\t\t\tisLabeled = isInt(divideDurationByDuration(slotTime, this.labelInterval));\n\n\t\t\taxisHtml =\n\t\t\t\t'<td class=\"fc-axis fc-time ' + view.widgetContentClass + '\" ' + view.axisStyleAttr() + '>' +\n\t\t\t\t\t(isLabeled ?\n\t\t\t\t\t\t'<span>' + // for matchCellWidths\n\t\t\t\t\t\t\thtmlEscape(slotDate.format(this.labelFormat)) +\n\t\t\t\t\t\t'</span>' :\n\t\t\t\t\t\t''\n\t\t\t\t\t\t) +\n\t\t\t\t'</td>';\n\n\t\t\thtml +=\n\t\t\t\t'<tr data-time=\"' + slotDate.format('HH:mm:ss') + '\"' +\n\t\t\t\t\t(isLabeled ? '' : ' class=\"fc-minor\"') +\n\t\t\t\t\t'>' +\n\t\t\t\t\t(!isRTL ? axisHtml : '') +\n\t\t\t\t\t'<td class=\"' + view.widgetContentClass + '\"/>' +\n\t\t\t\t\t(isRTL ? axisHtml : '') +\n\t\t\t\t\"</tr>\";\n\n\t\t\tslotTime.add(this.slotDuration);\n\t\t}\n\n\t\treturn html;\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Parses various options into properties of this object\n\tprocessOptions: function() {\n\t\tvar view = this.view;\n\t\tvar slotDuration = view.opt('slotDuration');\n\t\tvar snapDuration = view.opt('snapDuration');\n\t\tvar input;\n\n\t\tslotDuration = moment.duration(slotDuration);\n\t\tsnapDuration = snapDuration ? moment.duration(snapDuration) : slotDuration;\n\n\t\tthis.slotDuration = slotDuration;\n\t\tthis.snapDuration = snapDuration;\n\t\tthis.snapsPerSlot = slotDuration / snapDuration; // TODO: ensure an integer multiple?\n\n\t\tthis.minResizeDuration = snapDuration; // hack\n\n\t\tthis.minTime = moment.duration(view.opt('minTime'));\n\t\tthis.maxTime = moment.duration(view.opt('maxTime'));\n\n\t\t// might be an array value (for TimelineView).\n\t\t// if so, getting the most granular entry (the last one probably).\n\t\tinput = view.opt('slotLabelFormat');\n\t\tif ($.isArray(input)) {\n\t\t\tinput = input[input.length - 1];\n\t\t}\n\n\t\tthis.labelFormat =\n\t\t\tinput ||\n\t\t\tview.opt('smallTimeFormat'); // the computed default\n\n\t\tinput = view.opt('slotLabelInterval');\n\t\tthis.labelInterval = input ?\n\t\t\tmoment.duration(input) :\n\t\t\tthis.computeLabelInterval(slotDuration);\n\t},\n\n\n\t// Computes an automatic value for slotLabelInterval\n\tcomputeLabelInterval: function(slotDuration) {\n\t\tvar i;\n\t\tvar labelInterval;\n\t\tvar slotsPerLabel;\n\n\t\t// find the smallest stock label interval that results in more than one slots-per-label\n\t\tfor (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\n\t\t\tlabelInterval = moment.duration(AGENDA_STOCK_SUB_DURATIONS[i]);\n\t\t\tslotsPerLabel = divideDurationByDuration(labelInterval, slotDuration);\n\t\t\tif (isInt(slotsPerLabel) && slotsPerLabel > 1) {\n\t\t\t\treturn labelInterval;\n\t\t\t}\n\t\t}\n\n\t\treturn moment.duration(slotDuration); // fall back. clone\n\t},\n\n\n\t// Computes a default event time formatting string if `timeFormat` is not explicitly defined\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.view.opt('noMeridiemTimeFormat'); // like \"6:30\" (no AM/PM)\n\t},\n\n\n\t// Computes a default `displayEventEnd` value if one is not expliclty defined\n\tcomputeDisplayEventEnd: function() {\n\t\treturn true;\n\t},\n\n\n\t/* Hit System\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tprepareHits: function() {\n\t\tthis.colCoordCache.build();\n\t\tthis.slatCoordCache.build();\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.colCoordCache.clear();\n\t\t// NOTE: don't clear slatCoordCache because we rely on it for computeTimeTop\n\t},\n\n\n\tqueryHit: function(leftOffset, topOffset) {\n\t\tvar snapsPerSlot = this.snapsPerSlot;\n\t\tvar colCoordCache = this.colCoordCache;\n\t\tvar slatCoordCache = this.slatCoordCache;\n\n\t\tif (colCoordCache.isLeftInBounds(leftOffset) && slatCoordCache.isTopInBounds(topOffset)) {\n\t\t\tvar colIndex = colCoordCache.getHorizontalIndex(leftOffset);\n\t\t\tvar slatIndex = slatCoordCache.getVerticalIndex(topOffset);\n\n\t\t\tif (colIndex != null && slatIndex != null) {\n\t\t\t\tvar slatTop = slatCoordCache.getTopOffset(slatIndex);\n\t\t\t\tvar slatHeight = slatCoordCache.getHeight(slatIndex);\n\t\t\t\tvar partial = (topOffset - slatTop) / slatHeight; // floating point number between 0 and 1\n\t\t\t\tvar localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n\t\t\t\tvar snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n\t\t\t\tvar snapTop = slatTop + (localSnapIndex / snapsPerSlot) * slatHeight;\n\t\t\t\tvar snapBottom = slatTop + ((localSnapIndex + 1) / snapsPerSlot) * slatHeight;\n\n\t\t\t\treturn {\n\t\t\t\t\tcol: colIndex,\n\t\t\t\t\tsnap: snapIndex,\n\t\t\t\t\tcomponent: this, // needed unfortunately :(\n\t\t\t\t\tleft: colCoordCache.getLeftOffset(colIndex),\n\t\t\t\t\tright: colCoordCache.getRightOffset(colIndex),\n\t\t\t\t\ttop: snapTop,\n\t\t\t\t\tbottom: snapBottom\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\n\n\tgetHitSpan: function(hit) {\n\t\tvar start = this.getCellDate(0, hit.col); // row=0\n\t\tvar time = this.computeSnapTime(hit.snap); // pass in the snap-index\n\t\tvar end;\n\n\t\tstart.time(time);\n\t\tend = start.clone().add(this.snapDuration);\n\n\t\treturn { start: start, end: end };\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\treturn this.colEls.eq(hit.col);\n\t},\n\n\n\t/* Dates\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trangeUpdated: function() {\n\t\tthis.updateDayTable();\n\t},\n\n\n\t// Given a row number of the grid, representing a \"snap\", returns a time (Duration) from its start-of-day\n\tcomputeSnapTime: function(snapIndex) {\n\t\treturn moment.duration(this.minTime + this.snapDuration * snapIndex);\n\t},\n\n\n\t// Slices up the given span (unzoned start/end with other misc data) into an array of segments\n\tspanToSegs: function(span) {\n\t\tvar segs = this.sliceRangeByTimes(span);\n\t\tvar i;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tif (this.isRTL) {\n\t\t\t\tsegs[i].col = this.daysPerRow - 1 - segs[i].dayIndex;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsegs[i].col = segs[i].dayIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\tsliceRangeByTimes: function(range) {\n\t\tvar segs = [];\n\t\tvar seg;\n\t\tvar dayIndex;\n\t\tvar dayDate;\n\t\tvar dayRange;\n\n\t\tfor (dayIndex = 0; dayIndex < this.daysPerRow; dayIndex++) {\n\t\t\tdayDate = this.dayDates[dayIndex].clone(); // TODO: better API for this?\n\t\t\tdayRange = {\n\t\t\t\tstart: dayDate.clone().time(this.minTime),\n\t\t\t\tend: dayDate.clone().time(this.maxTime)\n\t\t\t};\n\t\t\tseg = intersectRanges(range, dayRange); // both will be ambig timezone\n\t\t\tif (seg) {\n\t\t\t\tseg.dayIndex = dayIndex;\n\t\t\t\tsegs.push(seg);\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Coordinates\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tupdateSize: function(isResize) { // NOT a standard Grid method\n\t\tthis.slatCoordCache.build();\n\n\t\tif (isResize) {\n\t\t\tthis.updateSegVerticals(\n\t\t\t\t[].concat(this.fgSegs || [], this.bgSegs || [], this.businessSegs || [])\n\t\t\t);\n\t\t}\n\t},\n\n\n\tgetTotalSlatHeight: function() {\n\t\treturn this.slatContainerEl.outerHeight();\n\t},\n\n\n\t// Computes the top coordinate, relative to the bounds of the grid, of the given date.\n\t// A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n\tcomputeDateTop: function(date, startOfDayDate) {\n\t\treturn this.computeTimeTop(\n\t\t\tmoment.duration(\n\t\t\t\tdate - startOfDayDate.clone().stripTime()\n\t\t\t)\n\t\t);\n\t},\n\n\n\t// Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n\tcomputeTimeTop: function(time) {\n\t\tvar len = this.slatEls.length;\n\t\tvar slatCoverage = (time - this.minTime) / this.slotDuration; // floating-point value of # of slots covered\n\t\tvar slatIndex;\n\t\tvar slatRemainder;\n\n\t\t// compute a floating-point number for how many slats should be progressed through.\n\t\t// from 0 to number of slats (inclusive)\n\t\t// constrained because minTime/maxTime might be customized.\n\t\tslatCoverage = Math.max(0, slatCoverage);\n\t\tslatCoverage = Math.min(len, slatCoverage);\n\n\t\t// an integer index of the furthest whole slat\n\t\t// from 0 to number slats (*exclusive*, so len-1)\n\t\tslatIndex = Math.floor(slatCoverage);\n\t\tslatIndex = Math.min(slatIndex, len - 1);\n\n\t\t// how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n\t\t// could be 1.0 if slatCoverage is covering *all* the slots\n\t\tslatRemainder = slatCoverage - slatIndex;\n\n\t\treturn this.slatCoordCache.getTopPosition(slatIndex) +\n\t\t\tthis.slatCoordCache.getHeight(slatIndex) * slatRemainder;\n\t},\n\n\n\n\t/* Event Drag Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event being dragged over the specified date(s).\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\n\trenderDrag: function(eventLocation, seg) {\n\n\t\tif (seg) { // if there is event information for this drag, render a helper event\n\n\t\t\t// returns mock event elements\n\t\t\t// signal that a helper has been rendered\n\t\t\treturn this.renderEventLocationHelper(eventLocation, seg);\n\t\t}\n\t\telse {\n\t\t\t// otherwise, just render a highlight\n\t\t\tthis.renderHighlight(this.eventToSpan(eventLocation));\n\t\t}\n\t},\n\n\n\t// Unrenders any visual indication of an event being dragged\n\tunrenderDrag: function() {\n\t\tthis.unrenderHelper();\n\t\tthis.unrenderHighlight();\n\t},\n\n\n\t/* Event Resize Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event being resized\n\trenderEventResize: function(eventLocation, seg) {\n\t\treturn this.renderEventLocationHelper(eventLocation, seg); // returns mock event elements\n\t},\n\n\n\t// Unrenders any visual indication of an event being resized\n\tunrenderEventResize: function() {\n\t\tthis.unrenderHelper();\n\t},\n\n\n\t/* Event Helper\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a mock \"helper\" event. `sourceSeg` is the original segment object and might be null (an external drag)\n\trenderHelper: function(event, sourceSeg) {\n\t\treturn this.renderHelperSegs(this.eventToSegs(event), sourceSeg); // returns mock event elements\n\t},\n\n\n\t// Unrenders any mock helper event\n\tunrenderHelper: function() {\n\t\tthis.unrenderHelperSegs();\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBusinessHours: function() {\n\t\tthis.renderBusinessSegs(\n\t\t\tthis.buildBusinessHourSegs()\n\t\t);\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t\tthis.unrenderBusinessSegs();\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tgetNowIndicatorUnit: function() {\n\t\treturn 'minute'; // will refresh on the minute\n\t},\n\n\n\trenderNowIndicator: function(date) {\n\t\t// seg system might be overkill, but it handles scenario where line needs to be rendered\n\t\t//  more than once because of columns with the same date (resources columns for example)\n\t\tvar segs = this.spanToSegs({ start: date, end: date });\n\t\tvar top = this.computeDateTop(date, date);\n\t\tvar nodes = [];\n\t\tvar i;\n\n\t\t// render lines within the columns\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tnodes.push($('<div class=\"fc-now-indicator fc-now-indicator-line\"></div>')\n\t\t\t\t.css('top', top)\n\t\t\t\t.appendTo(this.colContainerEls.eq(segs[i].col))[0]);\n\t\t}\n\n\t\t// render an arrow over the axis\n\t\tif (segs.length > 0) { // is the current time in view?\n\t\t\tnodes.push($('<div class=\"fc-now-indicator fc-now-indicator-arrow\"></div>')\n\t\t\t\t.css('top', top)\n\t\t\t\t.appendTo(this.el.find('.fc-content-skeleton'))[0]);\n\t\t}\n\n\t\tthis.nowIndicatorEls = $(nodes);\n\t},\n\n\n\tunrenderNowIndicator: function() {\n\t\tif (this.nowIndicatorEls) {\n\t\t\tthis.nowIndicatorEls.remove();\n\t\t\tthis.nowIndicatorEls = null;\n\t\t}\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\n\trenderSelection: function(span) {\n\t\tif (this.view.opt('selectHelper')) { // this setting signals that a mock helper event should be rendered\n\n\t\t\t// normally acceps an eventLocation, span has a start/end, which is good enough\n\t\t\tthis.renderEventLocationHelper(span);\n\t\t}\n\t\telse {\n\t\t\tthis.renderHighlight(span);\n\t\t}\n\t},\n\n\n\t// Unrenders any visual indication of a selection\n\tunrenderSelection: function() {\n\t\tthis.unrenderHelper();\n\t\tthis.unrenderHighlight();\n\t},\n\n\n\t/* Highlight\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderHighlight: function(span) {\n\t\tthis.renderHighlightSegs(this.spanToSegs(span));\n\t},\n\n\n\tunrenderHighlight: function() {\n\t\tthis.unrenderHighlightSegs();\n\t}\n\n});\n\n;;\n\n/* Methods for rendering SEGMENTS, pieces of content that live on the view\n ( this file is no longer just for events )\n----------------------------------------------------------------------------------------------------------------------*/\n\nTimeGrid.mixin({\n\n\tcolContainerEls: null, // containers for each column\n\n\t// inner-containers for each column where different types of segs live\n\tfgContainerEls: null,\n\tbgContainerEls: null,\n\thelperContainerEls: null,\n\thighlightContainerEls: null,\n\tbusinessContainerEls: null,\n\n\t// arrays of different types of displayed segments\n\tfgSegs: null,\n\tbgSegs: null,\n\thelperSegs: null,\n\thighlightSegs: null,\n\tbusinessSegs: null,\n\n\n\t// Renders the DOM that the view's content will live in\n\trenderContentSkeleton: function() {\n\t\tvar cellHtml = '';\n\t\tvar i;\n\t\tvar skeletonEl;\n\n\t\tfor (i = 0; i < this.colCnt; i++) {\n\t\t\tcellHtml +=\n\t\t\t\t'<td>' +\n\t\t\t\t\t'<div class=\"fc-content-col\">' +\n\t\t\t\t\t\t'<div class=\"fc-event-container fc-helper-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-event-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-highlight-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-bgevent-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-business-container\"></div>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t'</td>';\n\t\t}\n\n\t\tskeletonEl = $(\n\t\t\t'<div class=\"fc-content-skeleton\">' +\n\t\t\t\t'<table>' +\n\t\t\t\t\t'<tr>' + cellHtml + '</tr>' +\n\t\t\t\t'</table>' +\n\t\t\t'</div>'\n\t\t);\n\n\t\tthis.colContainerEls = skeletonEl.find('.fc-content-col');\n\t\tthis.helperContainerEls = skeletonEl.find('.fc-helper-container');\n\t\tthis.fgContainerEls = skeletonEl.find('.fc-event-container:not(.fc-helper-container)');\n\t\tthis.bgContainerEls = skeletonEl.find('.fc-bgevent-container');\n\t\tthis.highlightContainerEls = skeletonEl.find('.fc-highlight-container');\n\t\tthis.businessContainerEls = skeletonEl.find('.fc-business-container');\n\n\t\tthis.bookendCells(skeletonEl.find('tr')); // TODO: do this on string level\n\t\tthis.el.append(skeletonEl);\n\t},\n\n\n\t/* Foreground Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderFgSegs: function(segs) {\n\t\tsegs = this.renderFgSegsIntoContainers(segs, this.fgContainerEls);\n\t\tthis.fgSegs = segs;\n\t\treturn segs; // needed for Grid::renderEvents\n\t},\n\n\n\tunrenderFgSegs: function() {\n\t\tthis.unrenderNamedSegs('fgSegs');\n\t},\n\n\n\t/* Foreground Helper Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderHelperSegs: function(segs, sourceSeg) {\n\t\tvar helperEls = [];\n\t\tvar i, seg;\n\t\tvar sourceEl;\n\n\t\tsegs = this.renderFgSegsIntoContainers(segs, this.helperContainerEls);\n\n\t\t// Try to make the segment that is in the same row as sourceSeg look the same\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tif (sourceSeg && sourceSeg.col === seg.col) {\n\t\t\t\tsourceEl = sourceSeg.el;\n\t\t\t\tseg.el.css({\n\t\t\t\t\tleft: sourceEl.css('left'),\n\t\t\t\t\tright: sourceEl.css('right'),\n\t\t\t\t\t'margin-left': sourceEl.css('margin-left'),\n\t\t\t\t\t'margin-right': sourceEl.css('margin-right')\n\t\t\t\t});\n\t\t\t}\n\t\t\thelperEls.push(seg.el[0]);\n\t\t}\n\n\t\tthis.helperSegs = segs;\n\n\t\treturn $(helperEls); // must return rendered helpers\n\t},\n\n\n\tunrenderHelperSegs: function() {\n\t\tthis.unrenderNamedSegs('helperSegs');\n\t},\n\n\n\t/* Background Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBgSegs: function(segs) {\n\t\tsegs = this.renderFillSegEls('bgEvent', segs); // TODO: old fill system\n\t\tthis.updateSegVerticals(segs);\n\t\tthis.attachSegsByCol(this.groupSegsByCol(segs), this.bgContainerEls);\n\t\tthis.bgSegs = segs;\n\t\treturn segs; // needed for Grid::renderEvents\n\t},\n\n\n\tunrenderBgSegs: function() {\n\t\tthis.unrenderNamedSegs('bgSegs');\n\t},\n\n\n\t/* Highlight\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderHighlightSegs: function(segs) {\n\t\tsegs = this.renderFillSegEls('highlight', segs); // TODO: old fill system\n\t\tthis.updateSegVerticals(segs);\n\t\tthis.attachSegsByCol(this.groupSegsByCol(segs), this.highlightContainerEls);\n\t\tthis.highlightSegs = segs;\n\t},\n\n\n\tunrenderHighlightSegs: function() {\n\t\tthis.unrenderNamedSegs('highlightSegs');\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBusinessSegs: function(segs) {\n\t\tsegs = this.renderFillSegEls('businessHours', segs); // TODO: old fill system\n\t\tthis.updateSegVerticals(segs);\n\t\tthis.attachSegsByCol(this.groupSegsByCol(segs), this.businessContainerEls);\n\t\tthis.businessSegs = segs;\n\t},\n\n\n\tunrenderBusinessSegs: function() {\n\t\tthis.unrenderNamedSegs('businessSegs');\n\t},\n\n\n\t/* Seg Rendering Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\n\tgroupSegsByCol: function(segs) {\n\t\tvar segsByCol = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.colCnt; i++) {\n\t\t\tsegsByCol.push([]);\n\t\t}\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tsegsByCol[segs[i].col].push(segs[i]);\n\t\t}\n\n\t\treturn segsByCol;\n\t},\n\n\n\t// Given segments grouped by column, insert the segments' elements into a parallel array of container\n\t// elements, each living within a column.\n\tattachSegsByCol: function(segsByCol, containerEls) {\n\t\tvar col;\n\t\tvar segs;\n\t\tvar i;\n\n\t\tfor (col = 0; col < this.colCnt; col++) { // iterate each column grouping\n\t\t\tsegs = segsByCol[col];\n\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\tcontainerEls.eq(col).append(segs[i].el);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Given the name of a property of `this` object, assumed to be an array of segments,\n\t// loops through each segment and removes from DOM. Will null-out the property afterwards.\n\tunrenderNamedSegs: function(propName) {\n\t\tvar segs = this[propName];\n\t\tvar i;\n\n\t\tif (segs) {\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\tsegs[i].el.remove();\n\t\t\t}\n\t\t\tthis[propName] = null;\n\t\t}\n\t},\n\n\n\n\t/* Foreground Event Rendering Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Given an array of foreground segments, render a DOM element for each, computes position,\n\t// and attaches to the column inner-container elements.\n\trenderFgSegsIntoContainers: function(segs, containerEls) {\n\t\tvar segsByCol;\n\t\tvar col;\n\n\t\tsegs = this.renderFgSegEls(segs); // will call fgSegHtml\n\t\tsegsByCol = this.groupSegsByCol(segs);\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tthis.updateFgSegCoords(segsByCol[col]);\n\t\t}\n\n\t\tthis.attachSegsByCol(segsByCol, containerEls);\n\n\t\treturn segs;\n\t},\n\n\n\t// Renders the HTML for a single event segment's default rendering\n\tfgSegHtml: function(seg, disableResizing) {\n\t\tvar view = this.view;\n\t\tvar event = seg.event;\n\t\tvar isDraggable = view.isEventDraggable(event);\n\t\tvar isResizableFromStart = !disableResizing && seg.isStart && view.isEventResizableFromStart(event);\n\t\tvar isResizableFromEnd = !disableResizing && seg.isEnd && view.isEventResizableFromEnd(event);\n\t\tvar classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd);\n\t\tvar skinCss = cssToStr(this.getSegSkinCss(seg));\n\t\tvar timeText;\n\t\tvar fullTimeText; // more verbose time text. for the print stylesheet\n\t\tvar startTimeText; // just the start time text\n\n\t\tclasses.unshift('fc-time-grid-event', 'fc-v-event');\n\n\t\tif (view.isMultiDayEvent(event)) { // if the event appears to span more than one day...\n\t\t\t// Don't display time text on segments that run entirely through a day.\n\t\t\t// That would appear as midnight-midnight and would look dumb.\n\t\t\t// Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\n\t\t\tif (seg.isStart || seg.isEnd) {\n\t\t\t\ttimeText = this.getEventTimeText(seg);\n\t\t\t\tfullTimeText = this.getEventTimeText(seg, 'LT');\n\t\t\t\tstartTimeText = this.getEventTimeText(seg, null, false); // displayEnd=false\n\t\t\t}\n\t\t} else {\n\t\t\t// Display the normal time text for the *event's* times\n\t\t\ttimeText = this.getEventTimeText(event);\n\t\t\tfullTimeText = this.getEventTimeText(event, 'LT');\n\t\t\tstartTimeText = this.getEventTimeText(event, null, false); // displayEnd=false\n\t\t}\n\n\t\treturn '<a class=\"' + classes.join(' ') + '\"' +\n\t\t\t(event.url ?\n\t\t\t\t' href=\"' + htmlEscape(event.url) + '\"' :\n\t\t\t\t''\n\t\t\t\t) +\n\t\t\t(skinCss ?\n\t\t\t\t' style=\"' + skinCss + '\"' :\n\t\t\t\t''\n\t\t\t\t) +\n\t\t\t'>' +\n\t\t\t\t'<div class=\"fc-content\">' +\n\t\t\t\t\t(timeText ?\n\t\t\t\t\t\t'<div class=\"fc-time\"' +\n\t\t\t\t\t\t' data-start=\"' + htmlEscape(startTimeText) + '\"' +\n\t\t\t\t\t\t' data-full=\"' + htmlEscape(fullTimeText) + '\"' +\n\t\t\t\t\t\t'>' +\n\t\t\t\t\t\t\t'<span>' + htmlEscape(timeText) + '</span>' +\n\t\t\t\t\t\t'</div>' :\n\t\t\t\t\t\t''\n\t\t\t\t\t\t) +\n\t\t\t\t\t(event.title ?\n\t\t\t\t\t\t'<div class=\"fc-title\">' +\n\t\t\t\t\t\t\thtmlEscape(event.title) +\n\t\t\t\t\t\t'</div>' :\n\t\t\t\t\t\t''\n\t\t\t\t\t\t) +\n\t\t\t\t'</div>' +\n\t\t\t\t'<div class=\"fc-bg\"/>' +\n\t\t\t\t/* TODO: write CSS for this\n\t\t\t\t(isResizableFromStart ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-start-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t*/\n\t\t\t\t(isResizableFromEnd ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-end-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t'</a>';\n\t},\n\n\n\t/* Seg Position Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Refreshes the CSS top/bottom coordinates for each segment element.\n\t// Works when called after initial render, after a window resize/zoom for example.\n\tupdateSegVerticals: function(segs) {\n\t\tthis.computeSegVerticals(segs);\n\t\tthis.assignSegVerticals(segs);\n\t},\n\n\n\t// For each segment in an array, computes and assigns its top and bottom properties\n\tcomputeSegVerticals: function(segs) {\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.top = this.computeDateTop(seg.start, seg.start);\n\t\t\tseg.bottom = this.computeDateTop(seg.end, seg.start);\n\t\t}\n\t},\n\n\n\t// Given segments that already have their top/bottom properties computed, applies those values to\n\t// the segments' elements.\n\tassignSegVerticals: function(segs) {\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.el.css(this.generateSegVerticalCss(seg));\n\t\t}\n\t},\n\n\n\t// Generates an object with CSS properties for the top/bottom coordinates of a segment element\n\tgenerateSegVerticalCss: function(seg) {\n\t\treturn {\n\t\t\ttop: seg.top,\n\t\t\tbottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\n\t\t};\n\t},\n\n\n\t/* Foreground Event Positioning Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Given segments that are assumed to all live in the *same column*,\n\t// compute their verical/horizontal coordinates and assign to their elements.\n\tupdateFgSegCoords: function(segs) {\n\t\tthis.computeSegVerticals(segs); // horizontals relies on this\n\t\tthis.computeFgSegHorizontals(segs); // compute horizontal coordinates, z-index's, and reorder the array\n\t\tthis.assignSegVerticals(segs);\n\t\tthis.assignFgSegHorizontals(segs);\n\t},\n\n\n\t// Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\n\t// NOTE: Also reorders the given array by date!\n\tcomputeFgSegHorizontals: function(segs) {\n\t\tvar levels;\n\t\tvar level0;\n\t\tvar i;\n\n\t\tthis.sortEventSegs(segs); // order by certain criteria\n\t\tlevels = buildSlotSegLevels(segs);\n\t\tcomputeForwardSlotSegs(levels);\n\n\t\tif ((level0 = levels[0])) {\n\n\t\t\tfor (i = 0; i < level0.length; i++) {\n\t\t\t\tcomputeSlotSegPressures(level0[i]);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < level0.length; i++) {\n\t\t\t\tthis.computeFgSegForwardBack(level0[i], 0, 0);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\n\t// from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\n\t// seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\n\t//\n\t// The segment might be part of a \"series\", which means consecutive segments with the same pressure\n\t// who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\n\t// segments behind this one in the current series, and `seriesBackwardCoord` is the starting\n\t// coordinate of the first segment in the series.\n\tcomputeFgSegForwardBack: function(seg, seriesBackwardPressure, seriesBackwardCoord) {\n\t\tvar forwardSegs = seg.forwardSegs;\n\t\tvar i;\n\n\t\tif (seg.forwardCoord === undefined) { // not already computed\n\n\t\t\tif (!forwardSegs.length) {\n\n\t\t\t\t// if there are no forward segments, this segment should butt up against the edge\n\t\t\t\tseg.forwardCoord = 1;\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t// sort highest pressure first\n\t\t\t\tthis.sortForwardSegs(forwardSegs);\n\n\t\t\t\t// this segment's forwardCoord will be calculated from the backwardCoord of the\n\t\t\t\t// highest-pressure forward segment.\n\t\t\t\tthis.computeFgSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);\n\t\t\t\tseg.forwardCoord = forwardSegs[0].backwardCoord;\n\t\t\t}\n\n\t\t\t// calculate the backwardCoord from the forwardCoord. consider the series\n\t\t\tseg.backwardCoord = seg.forwardCoord -\n\t\t\t\t(seg.forwardCoord - seriesBackwardCoord) / // available width for series\n\t\t\t\t(seriesBackwardPressure + 1); // # of segments in the series\n\n\t\t\t// use this segment's coordinates to computed the coordinates of the less-pressurized\n\t\t\t// forward segments\n\t\t\tfor (i=0; i<forwardSegs.length; i++) {\n\t\t\t\tthis.computeFgSegForwardBack(forwardSegs[i], 0, seg.forwardCoord);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tsortForwardSegs: function(forwardSegs) {\n\t\tforwardSegs.sort(proxy(this, 'compareForwardSegs'));\n\t},\n\n\n\t// A cmp function for determining which forward segment to rely on more when computing coordinates.\n\tcompareForwardSegs: function(seg1, seg2) {\n\t\t// put higher-pressure first\n\t\treturn seg2.forwardPressure - seg1.forwardPressure ||\n\t\t\t// put segments that are closer to initial edge first (and favor ones with no coords yet)\n\t\t\t(seg1.backwardCoord || 0) - (seg2.backwardCoord || 0) ||\n\t\t\t// do normal sorting...\n\t\t\tthis.compareEventSegs(seg1, seg2);\n\t},\n\n\n\t// Given foreground event segments that have already had their position coordinates computed,\n\t// assigns position-related CSS values to their elements.\n\tassignFgSegHorizontals: function(segs) {\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.el.css(this.generateFgSegHorizontalCss(seg));\n\n\t\t\t// if the height is short, add a className for alternate styling\n\t\t\tif (seg.bottom - seg.top < 30) {\n\t\t\t\tseg.el.addClass('fc-short');\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Generates an object with CSS properties/values that should be applied to an event segment element.\n\t// Contains important positioning-related properties that should be applied to any event element, customized or not.\n\tgenerateFgSegHorizontalCss: function(seg) {\n\t\tvar shouldOverlap = this.view.opt('slotEventOverlap');\n\t\tvar backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\n\t\tvar forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\n\t\tvar props = this.generateSegVerticalCss(seg); // get top/bottom first\n\t\tvar left; // amount of space from left edge, a fraction of the total width\n\t\tvar right; // amount of space from right edge, a fraction of the total width\n\n\t\tif (shouldOverlap) {\n\t\t\t// double the width, but don't go beyond the maximum forward coordinate (1.0)\n\t\t\tforwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\n\t\t}\n\n\t\tif (this.isRTL) {\n\t\t\tleft = 1 - forwardCoord;\n\t\t\tright = backwardCoord;\n\t\t}\n\t\telse {\n\t\t\tleft = backwardCoord;\n\t\t\tright = 1 - forwardCoord;\n\t\t}\n\n\t\tprops.zIndex = seg.level + 1; // convert from 0-base to 1-based\n\t\tprops.left = left * 100 + '%';\n\t\tprops.right = right * 100 + '%';\n\n\t\tif (shouldOverlap && seg.forwardPressure) {\n\t\t\t// add padding to the edge so that forward stacked events don't cover the resizer's icon\n\t\t\tprops[this.isRTL ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n\t\t}\n\n\t\treturn props;\n\t}\n\n});\n\n\n// Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\n// left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\nfunction buildSlotSegLevels(segs) {\n\tvar levels = [];\n\tvar i, seg;\n\tvar j;\n\n\tfor (i=0; i<segs.length; i++) {\n\t\tseg = segs[i];\n\n\t\t// go through all the levels and stop on the first level where there are no collisions\n\t\tfor (j=0; j<levels.length; j++) {\n\t\t\tif (!computeSlotSegCollisions(seg, levels[j]).length) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tseg.level = j;\n\n\t\t(levels[j] || (levels[j] = [])).push(seg);\n\t}\n\n\treturn levels;\n}\n\n\n// For every segment, figure out the other segments that are in subsequent\n// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\nfunction computeForwardSlotSegs(levels) {\n\tvar i, level;\n\tvar j, seg;\n\tvar k;\n\n\tfor (i=0; i<levels.length; i++) {\n\t\tlevel = levels[i];\n\n\t\tfor (j=0; j<level.length; j++) {\n\t\t\tseg = level[j];\n\n\t\t\tseg.forwardSegs = [];\n\t\t\tfor (k=i+1; k<levels.length; k++) {\n\t\t\t\tcomputeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// Figure out which path forward (via seg.forwardSegs) results in the longest path until\n// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\nfunction computeSlotSegPressures(seg) {\n\tvar forwardSegs = seg.forwardSegs;\n\tvar forwardPressure = 0;\n\tvar i, forwardSeg;\n\n\tif (seg.forwardPressure === undefined) { // not already computed\n\n\t\tfor (i=0; i<forwardSegs.length; i++) {\n\t\t\tforwardSeg = forwardSegs[i];\n\n\t\t\t// figure out the child's maximum forward path\n\t\t\tcomputeSlotSegPressures(forwardSeg);\n\n\t\t\t// either use the existing maximum, or use the child's forward pressure\n\t\t\t// plus one (for the forwardSeg itself)\n\t\t\tforwardPressure = Math.max(\n\t\t\t\tforwardPressure,\n\t\t\t\t1 + forwardSeg.forwardPressure\n\t\t\t);\n\t\t}\n\n\t\tseg.forwardPressure = forwardPressure;\n\t}\n}\n\n\n// Find all the segments in `otherSegs` that vertically collide with `seg`.\n// Append into an optionally-supplied `results` array and return.\nfunction computeSlotSegCollisions(seg, otherSegs, results) {\n\tresults = results || [];\n\n\tfor (var i=0; i<otherSegs.length; i++) {\n\t\tif (isSlotSegCollision(seg, otherSegs[i])) {\n\t\t\tresults.push(otherSegs[i]);\n\t\t}\n\t}\n\n\treturn results;\n}\n\n\n// Do these segments occupy the same vertical space?\nfunction isSlotSegCollision(seg1, seg2) {\n\treturn seg1.bottom > seg2.top && seg1.top < seg2.bottom;\n}\n\n;;\n\n/* An abstract class from which other views inherit from\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar View = FC.View = Class.extend(EmitterMixin, ListenerMixin, {\n\n\ttype: null, // subclass' view name (string)\n\tname: null, // deprecated. use `type` instead\n\ttitle: null, // the text that will be displayed in the header's title\n\n\tcalendar: null, // owner Calendar object\n\toptions: null, // hash containing all options. already merged with view-specific-options\n\tel: null, // the view's containing element. set by Calendar\n\n\tisDateSet: false,\n\tisDateRendered: false,\n\tdateRenderQueue: null,\n\n\tisEventsBound: false,\n\tisEventsSet: false,\n\tisEventsRendered: false,\n\teventRenderQueue: null,\n\n\t// range the view is actually displaying (moments)\n\tstart: null,\n\tend: null, // exclusive\n\n\t// range the view is formally responsible for (moments)\n\t// may be different from start/end. for example, a month view might have 1st-31st, excluding padded dates\n\tintervalStart: null,\n\tintervalEnd: null, // exclusive\n\tintervalDuration: null,\n\tintervalUnit: null, // name of largest unit being displayed, like \"month\" or \"week\"\n\n\tisRTL: false,\n\tisSelected: false, // boolean whether a range of time is user-selected or not\n\tselectedEvent: null,\n\n\teventOrderSpecs: null, // criteria for ordering events when they have same date/time\n\n\t// classNames styled by jqui themes\n\twidgetHeaderClass: null,\n\twidgetContentClass: null,\n\thighlightStateClass: null,\n\n\t// for date utils, computed from options\n\tnextDayThreshold: null,\n\tisHiddenDayHash: null,\n\n\t// now indicator\n\tisNowIndicatorRendered: null,\n\tinitialNowDate: null, // result first getNow call\n\tinitialNowQueriedMs: null, // ms time the getNow was called\n\tnowIndicatorTimeoutID: null, // for refresh timing of now indicator\n\tnowIndicatorIntervalID: null, // \"\n\n\n\tconstructor: function(calendar, type, options, intervalDuration) {\n\n\t\tthis.calendar = calendar;\n\t\tthis.type = this.name = type; // .name is deprecated\n\t\tthis.options = options;\n\t\tthis.intervalDuration = intervalDuration || moment.duration(1, 'day');\n\n\t\tthis.nextDayThreshold = moment.duration(this.opt('nextDayThreshold'));\n\t\tthis.initThemingProps();\n\t\tthis.initHiddenDays();\n\t\tthis.isRTL = this.opt('isRTL');\n\n\t\tthis.eventOrderSpecs = parseFieldSpecs(this.opt('eventOrder'));\n\n\t\tthis.dateRenderQueue = new TaskQueue();\n\t\tthis.eventRenderQueue = new TaskQueue(this.opt('eventRenderWait'));\n\n\t\tthis.initialize();\n\t},\n\n\n\t// A good place for subclasses to initialize member variables\n\tinitialize: function() {\n\t\t// subclasses can implement\n\t},\n\n\n\t// Retrieves an option with the given name\n\topt: function(name) {\n\t\treturn this.options[name];\n\t},\n\n\n\t// Triggers handlers that are view-related. Modifies args before passing to calendar.\n\tpubliclyTrigger: function(name, thisObj) { // arguments beyond thisObj are passed along\n\t\tvar calendar = this.calendar;\n\n\t\treturn calendar.publiclyTrigger.apply(\n\t\t\tcalendar,\n\t\t\t[name, thisObj || this].concat(\n\t\t\t\tArray.prototype.slice.call(arguments, 2), // arguments beyond thisObj\n\t\t\t\t[ this ] // always make the last argument a reference to the view. TODO: deprecate\n\t\t\t)\n\t\t);\n\t},\n\n\n\t// Returns a proxy of the given promise that will be rejected if the given event fires\n\t// before the promise resolves.\n\trejectOn: function(eventName, promise) {\n\t\tvar _this = this;\n\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\t_this.one(eventName, reject);\n\n\t\t\tfunction cleanup() {\n\t\t\t\t_this.off(eventName, reject);\n\t\t\t}\n\n\t\t\tpromise.then(function(res) { // success\n\t\t\t\tcleanup();\n\t\t\t\tresolve(res);\n\t\t\t}, function() { // failure\n\t\t\t\tcleanup();\n\t\t\t\treject();\n\t\t\t});\n\t\t});\n\t},\n\n\n\t/* Date Computation\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Updates all internal dates for displaying the given unzoned range.\n\tsetRange: function(range) {\n\t\t$.extend(this, range); // assigns every property to this object's member variables\n\t\tthis.updateTitle();\n\t},\n\n\n\t// Given a single current unzoned date, produce information about what range to display.\n\t// Subclasses can override. Must return all properties.\n\tcomputeRange: function(date) {\n\t\tvar intervalUnit = computeIntervalUnit(this.intervalDuration);\n\t\tvar intervalStart = date.clone().startOf(intervalUnit);\n\t\tvar intervalEnd = intervalStart.clone().add(this.intervalDuration);\n\t\tvar start, end;\n\n\t\t// normalize the range's time-ambiguity\n\t\tif (/year|month|week|day/.test(intervalUnit)) { // whole-days?\n\t\t\tintervalStart.stripTime();\n\t\t\tintervalEnd.stripTime();\n\t\t}\n\t\telse { // needs to have a time?\n\t\t\tif (!intervalStart.hasTime()) {\n\t\t\t\tintervalStart = this.calendar.time(0); // give 00:00 time\n\t\t\t}\n\t\t\tif (!intervalEnd.hasTime()) {\n\t\t\t\tintervalEnd = this.calendar.time(0); // give 00:00 time\n\t\t\t}\n\t\t}\n\n\t\tstart = intervalStart.clone();\n\t\tstart = this.skipHiddenDays(start);\n\t\tend = intervalEnd.clone();\n\t\tend = this.skipHiddenDays(end, -1, true); // exclusively move backwards\n\n\t\treturn {\n\t\t\tintervalUnit: intervalUnit,\n\t\t\tintervalStart: intervalStart,\n\t\t\tintervalEnd: intervalEnd,\n\t\t\tstart: start,\n\t\t\tend: end\n\t\t};\n\t},\n\n\n\t// Computes the new date when the user hits the prev button, given the current date\n\tcomputePrevDate: function(date) {\n\t\treturn this.massageCurrentDate(\n\t\t\tdate.clone().startOf(this.intervalUnit).subtract(this.intervalDuration), -1\n\t\t);\n\t},\n\n\n\t// Computes the new date when the user hits the next button, given the current date\n\tcomputeNextDate: function(date) {\n\t\treturn this.massageCurrentDate(\n\t\t\tdate.clone().startOf(this.intervalUnit).add(this.intervalDuration)\n\t\t);\n\t},\n\n\n\t// Given an arbitrarily calculated current date of the calendar, returns a date that is ensured to be completely\n\t// visible. `direction` is optional and indicates which direction the current date was being\n\t// incremented or decremented (1 or -1).\n\tmassageCurrentDate: function(date, direction) {\n\t\tif (this.intervalDuration.as('days') <= 1) { // if the view displays a single day or smaller\n\t\t\tif (this.isHiddenDay(date)) {\n\t\t\t\tdate = this.skipHiddenDays(date, direction);\n\t\t\t\tdate.startOf('day');\n\t\t\t}\n\t\t}\n\n\t\treturn date;\n\t},\n\n\n\t/* Title and Date Formatting\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Sets the view's title property to the most updated computed value\n\tupdateTitle: function() {\n\t\tthis.title = this.computeTitle();\n\t\tthis.calendar.setToolbarsTitle(this.title);\n\t},\n\n\n\t// Computes what the title at the top of the calendar should be for this view\n\tcomputeTitle: function() {\n\t\treturn this.formatRange(\n\t\t\t{\n\t\t\t\t// in case intervalStart/End has a time, make sure timezone is correct\n\t\t\t\tstart: this.calendar.applyTimezone(this.intervalStart),\n\t\t\t\tend: this.calendar.applyTimezone(this.intervalEnd)\n\t\t\t},\n\t\t\tthis.opt('titleFormat') || this.computeTitleFormat(),\n\t\t\tthis.opt('titleRangeSeparator')\n\t\t);\n\t},\n\n\n\t// Generates the format string that should be used to generate the title for the current date range.\n\t// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\n\tcomputeTitleFormat: function() {\n\t\tif (this.intervalUnit == 'year') {\n\t\t\treturn 'YYYY';\n\t\t}\n\t\telse if (this.intervalUnit == 'month') {\n\t\t\treturn this.opt('monthYearFormat'); // like \"September 2014\"\n\t\t}\n\t\telse if (this.intervalDuration.as('days') > 1) {\n\t\t\treturn 'll'; // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n\t\t}\n\t\telse {\n\t\t\treturn 'LL'; // one day. longer, like \"September 9 2014\"\n\t\t}\n\t},\n\n\n\t// Utility for formatting a range. Accepts a range object, formatting string, and optional separator.\n\t// Displays all-day ranges naturally, with an inclusive end. Takes the current isRTL into account.\n\t// The timezones of the dates within `range` will be respected.\n\tformatRange: function(range, formatStr, separator) {\n\t\tvar end = range.end;\n\n\t\tif (!end.hasTime()) { // all-day?\n\t\t\tend = end.clone().subtract(1); // convert to inclusive. last ms of previous day\n\t\t}\n\n\t\treturn formatRange(range.start, end, formatStr, separator, this.opt('isRTL'));\n\t},\n\n\n\tgetAllDayHtml: function() {\n\t\treturn this.opt('allDayHtml') || htmlEscape(this.opt('allDayText'));\n\t},\n\n\n\t/* Navigation\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Generates HTML for an anchor to another view into the calendar.\n\t// Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\n\t// `gotoOptions` can either be a moment input, or an object with the form:\n\t// { date, type, forceOff }\n\t// `type` is a view-type like \"day\" or \"week\". default value is \"day\".\n\t// `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\n\tbuildGotoAnchorHtml: function(gotoOptions, attrs, innerHtml) {\n\t\tvar date, type, forceOff;\n\t\tvar finalOptions;\n\n\t\tif ($.isPlainObject(gotoOptions)) {\n\t\t\tdate = gotoOptions.date;\n\t\t\ttype = gotoOptions.type;\n\t\t\tforceOff = gotoOptions.forceOff;\n\t\t}\n\t\telse {\n\t\t\tdate = gotoOptions; // a single moment input\n\t\t}\n\t\tdate = FC.moment(date); // if a string, parse it\n\n\t\tfinalOptions = { // for serialization into the link\n\t\t\tdate: date.format('YYYY-MM-DD'),\n\t\t\ttype: type || 'day'\n\t\t};\n\n\t\tif (typeof attrs === 'string') {\n\t\t\tinnerHtml = attrs;\n\t\t\tattrs = null;\n\t\t}\n\n\t\tattrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\n\t\tinnerHtml = innerHtml || '';\n\n\t\tif (!forceOff && this.opt('navLinks')) {\n\t\t\treturn '<a' + attrs +\n\t\t\t\t' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\n\t\t\t\tinnerHtml +\n\t\t\t\t'</a>';\n\t\t}\n\t\telse {\n\t\t\treturn '<span' + attrs + '>' +\n\t\t\t\tinnerHtml +\n\t\t\t\t'</span>';\n\t\t}\n\t},\n\n\n\t// Rendering Non-date-related Content\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Sets the container element that the view should render inside of, does global DOM-related initializations,\n\t// and renders all the non-date-related content inside.\n\tsetElement: function(el) {\n\t\tthis.el = el;\n\t\tthis.bindGlobalHandlers();\n\t\tthis.renderSkeleton();\n\t},\n\n\n\t// Removes the view's container element from the DOM, clearing any content beforehand.\n\t// Undoes any other DOM-related attachments.\n\tremoveElement: function() {\n\t\tthis.unsetDate();\n\t\tthis.unrenderSkeleton();\n\n\t\tthis.unbindGlobalHandlers();\n\n\t\tthis.el.remove();\n\t\t// NOTE: don't null-out this.el in case the View was destroyed within an API callback.\n\t\t// We don't null-out the View's other jQuery element references upon destroy,\n\t\t//  so we shouldn't kill this.el either.\n\t},\n\n\n\t// Renders the basic structure of the view before any content is rendered\n\trenderSkeleton: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Unrenders the basic structure of the view\n\tunrenderSkeleton: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Date Setting/Unsetting\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tsetDate: function(date) {\n\t\tvar isReset = this.isDateSet;\n\n\t\tthis.isDateSet = true;\n\t\tthis.handleDate(date, isReset);\n\t\tthis.trigger(isReset ? 'dateReset' : 'dateSet', date);\n\t},\n\n\n\tunsetDate: function() {\n\t\tif (this.isDateSet) {\n\t\t\tthis.isDateSet = false;\n\t\t\tthis.handleDateUnset();\n\t\t\tthis.trigger('dateUnset');\n\t\t}\n\t},\n\n\n\t// Date Handling\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleDate: function(date, isReset) {\n\t\tvar _this = this;\n\n\t\tthis.unbindEvents(); // will do nothing if not already bound\n\t\tthis.requestDateRender(date).then(function() {\n\t\t\t// wish we could start earlier, but setRange/computeRange needs to execute first\n\t\t\t_this.bindEvents(); // will request events\n\t\t});\n\t},\n\n\n\thandleDateUnset: function() {\n\t\tthis.unbindEvents();\n\t\tthis.requestDateUnrender();\n\t},\n\n\n\t// Date Render Queuing\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// if date not specified, uses current\n\trequestDateRender: function(date) {\n\t\tvar _this = this;\n\n\t\treturn this.dateRenderQueue.add(function() {\n\t\t\treturn _this.executeDateRender(date);\n\t\t});\n\t},\n\n\n\trequestDateUnrender: function() {\n\t\tvar _this = this;\n\n\t\treturn this.dateRenderQueue.add(function() {\n\t\t\treturn _this.executeDateUnrender();\n\t\t});\n\t},\n\n\n\t// Date High-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// if date not specified, uses current\n\texecuteDateRender: function(date) {\n\t\tvar _this = this;\n\n\t\t// if rendering a new date, reset scroll to initial state (scrollTime)\n\t\tif (date) {\n\t\t\tthis.captureInitialScroll();\n\t\t}\n\t\telse {\n\t\t\tthis.captureScroll(); // a rerender of the current date\n\t\t}\n\n\t\tthis.freezeHeight();\n\n\t\treturn this.executeDateUnrender().then(function() {\n\n\t\t\tif (date) {\n\t\t\t\t_this.setRange(_this.computeRange(date));\n\t\t\t}\n\n\t\t\tif (_this.render) {\n\t\t\t\t_this.render(); // TODO: deprecate\n\t\t\t}\n\n\t\t\t_this.renderDates();\n\t\t\t_this.updateSize();\n\t\t\t_this.renderBusinessHours(); // might need coordinates, so should go after updateSize()\n\t\t\t_this.startNowIndicator();\n\n\t\t\t_this.thawHeight();\n\t\t\t_this.releaseScroll();\n\n\t\t\t_this.isDateRendered = true;\n\t\t\t_this.onDateRender();\n\t\t\t_this.trigger('dateRender');\n\t\t});\n\t},\n\n\n\texecuteDateUnrender: function() {\n\t\tvar _this = this;\n\n\t\tif (_this.isDateRendered) {\n\t\t\treturn this.requestEventsUnrender().then(function() {\n\n\t\t\t\t_this.unselect();\n\t\t\t\t_this.stopNowIndicator();\n\t\t\t\t_this.triggerUnrender();\n\t\t\t\t_this.unrenderBusinessHours();\n\t\t\t\t_this.unrenderDates();\n\n\t\t\t\tif (_this.destroy) {\n\t\t\t\t\t_this.destroy(); // TODO: deprecate\n\t\t\t\t}\n\n\t\t\t\t_this.isDateRendered = false;\n\t\t\t\t_this.trigger('dateUnrender');\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t},\n\n\n\t// Date Rendering Triggers\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tonDateRender: function() {\n\t\tthis.triggerRender();\n\t},\n\n\n\t// Date Low-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// date-cell content only\n\trenderDates: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// date-cell content only\n\tunrenderDates: function() {\n\t\t// subclasses should override\n\t},\n\n\n\t// Misc view rendering utils\n\t// -------------------------\n\n\n\t// Signals that the view's content has been rendered\n\ttriggerRender: function() {\n\t\tthis.publiclyTrigger('viewRender', this, this, this.el);\n\t},\n\n\n\t// Signals that the view's content is about to be unrendered\n\ttriggerUnrender: function() {\n\t\tthis.publiclyTrigger('viewDestroy', this, this, this.el);\n\t},\n\n\n\t// Binds DOM handlers to elements that reside outside the view container, such as the document\n\tbindGlobalHandlers: function() {\n\t\tthis.listenTo($(document), 'mousedown', this.handleDocumentMousedown);\n\t\tthis.listenTo($(document), 'touchstart', this.processUnselect);\n\t},\n\n\n\t// Unbinds DOM handlers from elements that reside outside the view container\n\tunbindGlobalHandlers: function() {\n\t\tthis.stopListeningTo($(document));\n\t},\n\n\n\t// Initializes internal variables related to theming\n\tinitThemingProps: function() {\n\t\tvar tm = this.opt('theme') ? 'ui' : 'fc';\n\n\t\tthis.widgetHeaderClass = tm + '-widget-header';\n\t\tthis.widgetContentClass = tm + '-widget-content';\n\t\tthis.highlightStateClass = tm + '-state-highlight';\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders business-hours onto the view. Assumes updateSize has already been called.\n\trenderBusinessHours: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Unrenders previously-rendered business-hours\n\tunrenderBusinessHours: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Immediately render the current time indicator and begins re-rendering it at an interval,\n\t// which is defined by this.getNowIndicatorUnit().\n\t// TODO: somehow do this for the current whole day's background too\n\tstartNowIndicator: function() {\n\t\tvar _this = this;\n\t\tvar unit;\n\t\tvar update;\n\t\tvar delay; // ms wait value\n\n\t\tif (this.opt('nowIndicator')) {\n\t\t\tunit = this.getNowIndicatorUnit();\n\t\t\tif (unit) {\n\t\t\t\tupdate = proxy(this, 'updateNowIndicator'); // bind to `this`\n\n\t\t\t\tthis.initialNowDate = this.calendar.getNow();\n\t\t\t\tthis.initialNowQueriedMs = +new Date();\n\t\t\t\tthis.renderNowIndicator(this.initialNowDate);\n\t\t\t\tthis.isNowIndicatorRendered = true;\n\n\t\t\t\t// wait until the beginning of the next interval\n\t\t\t\tdelay = this.initialNowDate.clone().startOf(unit).add(1, unit) - this.initialNowDate;\n\t\t\t\tthis.nowIndicatorTimeoutID = setTimeout(function() {\n\t\t\t\t\t_this.nowIndicatorTimeoutID = null;\n\t\t\t\t\tupdate();\n\t\t\t\t\tdelay = +moment.duration(1, unit);\n\t\t\t\t\tdelay = Math.max(100, delay); // prevent too frequent\n\t\t\t\t\t_this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\n\t\t\t\t}, delay);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// rerenders the now indicator, computing the new current time from the amount of time that has passed\n\t// since the initial getNow call.\n\tupdateNowIndicator: function() {\n\t\tif (this.isNowIndicatorRendered) {\n\t\t\tthis.unrenderNowIndicator();\n\t\t\tthis.renderNowIndicator(\n\t\t\t\tthis.initialNowDate.clone().add(new Date() - this.initialNowQueriedMs) // add ms\n\t\t\t);\n\t\t}\n\t},\n\n\n\t// Immediately unrenders the view's current time indicator and stops any re-rendering timers.\n\t// Won't cause side effects if indicator isn't rendered.\n\tstopNowIndicator: function() {\n\t\tif (this.isNowIndicatorRendered) {\n\n\t\t\tif (this.nowIndicatorTimeoutID) {\n\t\t\t\tclearTimeout(this.nowIndicatorTimeoutID);\n\t\t\t\tthis.nowIndicatorTimeoutID = null;\n\t\t\t}\n\t\t\tif (this.nowIndicatorIntervalID) {\n\t\t\t\tclearTimeout(this.nowIndicatorIntervalID);\n\t\t\t\tthis.nowIndicatorIntervalID = null;\n\t\t\t}\n\n\t\t\tthis.unrenderNowIndicator();\n\t\t\tthis.isNowIndicatorRendered = false;\n\t\t}\n\t},\n\n\n\t// Returns a string unit, like 'second' or 'minute' that defined how often the current time indicator\n\t// should be refreshed. If something falsy is returned, no time indicator is rendered at all.\n\tgetNowIndicatorUnit: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Renders a current time indicator at the given datetime\n\trenderNowIndicator: function(date) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Undoes the rendering actions from renderNowIndicator\n\tunrenderNowIndicator: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Dimensions\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Refreshes anything dependant upon sizing of the container element of the grid\n\tupdateSize: function(isResize) {\n\n\t\tif (isResize) {\n\t\t\tthis.captureScroll();\n\t\t}\n\n\t\tthis.updateHeight(isResize);\n\t\tthis.updateWidth(isResize);\n\t\tthis.updateNowIndicator();\n\n\t\tif (isResize) {\n\t\t\tthis.releaseScroll();\n\t\t}\n\t},\n\n\n\t// Refreshes the horizontal dimensions of the calendar\n\tupdateWidth: function(isResize) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Refreshes the vertical dimensions of the calendar\n\tupdateHeight: function(isResize) {\n\t\tvar calendar = this.calendar; // we poll the calendar for height information\n\n\t\tthis.setHeight(\n\t\t\tcalendar.getSuggestedViewHeight(),\n\t\t\tcalendar.isHeightAuto()\n\t\t);\n\t},\n\n\n\t// Updates the vertical dimensions of the calendar to the specified height.\n\t// if `isAuto` is set to true, height becomes merely a suggestion and the view should use its \"natural\" height.\n\tsetHeight: function(height, isAuto) {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Scroller\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tcapturedScroll: null,\n\tcapturedScrollDepth: 0,\n\n\n\tcaptureScroll: function() {\n\t\tif (!(this.capturedScrollDepth++)) {\n\t\t\tthis.capturedScroll = this.isDateRendered ? this.queryScroll() : {}; // require a render first\n\t\t\treturn true; // root?\n\t\t}\n\t\treturn false;\n\t},\n\n\n\tcaptureInitialScroll: function(forcedScroll) {\n\t\tif (this.captureScroll()) { // root?\n\t\t\tthis.capturedScroll.isInitial = true;\n\n\t\t\tif (forcedScroll) {\n\t\t\t\t$.extend(this.capturedScroll, forcedScroll);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.capturedScroll.isComputed = true;\n\t\t\t}\n\t\t}\n\t},\n\n\n\treleaseScroll: function() {\n\t\tvar scroll = this.capturedScroll;\n\t\tvar isRoot = this.discardScroll();\n\n\t\tif (scroll.isComputed) {\n\t\t\tif (isRoot) {\n\t\t\t\t// only compute initial scroll if it will actually be used (is the root capture)\n\t\t\t\t$.extend(scroll, this.computeInitialScroll());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tscroll = null; // scroll couldn't be computed. don't apply it to the DOM\n\t\t\t}\n\t\t}\n\n\t\tif (scroll) {\n\t\t\t// we act immediately on a releaseScroll operation, as opposed to captureScroll.\n\t\t\t// if capture/release wraps a render operation that screws up the scroll,\n\t\t\t// we still want to restore it a good state after, regardless of depth.\n\n\t\t\tif (scroll.isInitial) {\n\t\t\t\tthis.hardSetScroll(scroll); // outsmart how browsers set scroll on initial DOM\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.setScroll(scroll);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tdiscardScroll: function() {\n\t\tif (!(--this.capturedScrollDepth)) {\n\t\t\tthis.capturedScroll = null;\n\t\t\treturn true; // root?\n\t\t}\n\t\treturn false;\n\t},\n\n\n\tcomputeInitialScroll: function() {\n\t\treturn {};\n\t},\n\n\n\tqueryScroll: function() {\n\t\treturn {};\n\t},\n\n\n\thardSetScroll: function(scroll) {\n\t\tvar _this = this;\n\t\tvar exec = function() { _this.setScroll(scroll); };\n\t\texec();\n\t\tsetTimeout(exec, 0); // to surely clear the browser's initial scroll for the DOM\n\t},\n\n\n\tsetScroll: function(scroll) {\n\t},\n\n\n\t/* Height Freezing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tfreezeHeight: function() {\n\t\tthis.calendar.freezeContentHeight();\n\t},\n\n\n\tthawHeight: function() {\n\t\tthis.calendar.thawContentHeight();\n\t},\n\n\n\t// Event Binding/Unbinding\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tbindEvents: function() {\n\t\tvar _this = this;\n\n\t\tif (!this.isEventsBound) {\n\t\t\tthis.isEventsBound = true;\n\t\t\tthis.rejectOn('eventsUnbind', this.requestEvents()).then(function(events) { // TODO: test rejection\n\t\t\t\t_this.listenTo(_this.calendar, 'eventsReset', _this.setEvents);\n\t\t\t\t_this.setEvents(events);\n\t\t\t});\n\t\t}\n\t},\n\n\n\tunbindEvents: function() {\n\t\tif (this.isEventsBound) {\n\t\t\tthis.isEventsBound = false;\n\t\t\tthis.stopListeningTo(this.calendar, 'eventsReset');\n\t\t\tthis.unsetEvents();\n\t\t\tthis.trigger('eventsUnbind');\n\t\t}\n\t},\n\n\n\t// Event Setting/Unsetting\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tsetEvents: function(events) {\n\t\tvar isReset = this.isEventSet;\n\n\t\tthis.isEventsSet = true;\n\t\tthis.handleEvents(events, isReset);\n\t\tthis.trigger(isReset ? 'eventsReset' : 'eventsSet', events);\n\t},\n\n\n\tunsetEvents: function() {\n\t\tif (this.isEventsSet) {\n\t\t\tthis.isEventsSet = false;\n\t\t\tthis.handleEventsUnset();\n\t\t\tthis.trigger('eventsUnset');\n\t\t}\n\t},\n\n\n\twhenEventsSet: function() {\n\t\tvar _this = this;\n\n\t\tif (this.isEventsSet) {\n\t\t\treturn Promise.resolve(this.getCurrentEvents());\n\t\t}\n\t\telse {\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\t_this.one('eventsSet', resolve);\n\t\t\t});\n\t\t}\n\t},\n\n\n\t// Event Handling\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleEvents: function(events, isReset) {\n\t\tthis.requestEventsRender(events);\n\t},\n\n\n\thandleEventsUnset: function() {\n\t\tthis.requestEventsUnrender();\n\t},\n\n\n\t// Event Render Queuing\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// assumes any previous event renders have been cleared already\n\trequestEventsRender: function(events) {\n\t\tvar _this = this;\n\n\t\treturn this.eventRenderQueue.add(function() { // might not return a promise if debounced!? bad\n\t\t\treturn _this.executeEventsRender(events);\n\t\t});\n\t},\n\n\n\trequestEventsUnrender: function() {\n\t\tvar _this = this;\n\n\t\tif (this.isEventsRendered) {\n\t\t\treturn this.eventRenderQueue.addQuickly(function() {\n\t\t\t\treturn _this.executeEventsUnrender();\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t},\n\n\n\trequestCurrentEventsRender: function() {\n\t\tif (this.isEventsSet) {\n\t\t\tthis.requestEventsRender(this.getCurrentEvents());\n\t\t}\n\t\telse {\n\t\t\treturn Promise.reject();\n\t\t}\n\t},\n\n\n\t// Event High-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\texecuteEventsRender: function(events) {\n\t\tvar _this = this;\n\n\t\tthis.captureScroll();\n\t\tthis.freezeHeight();\n\n\t\treturn this.executeEventsUnrender().then(function() {\n\t\t\t_this.renderEvents(events);\n\n\t\t\t_this.thawHeight();\n\t\t\t_this.releaseScroll();\n\n\t\t\t_this.isEventsRendered = true;\n\t\t\t_this.onEventsRender();\n\t\t\t_this.trigger('eventsRender');\n\t\t});\n\t},\n\n\n\texecuteEventsUnrender: function() {\n\t\tif (this.isEventsRendered) {\n\t\t\tthis.onBeforeEventsUnrender();\n\n\t\t\tthis.captureScroll();\n\t\t\tthis.freezeHeight();\n\n\t\t\tif (this.destroyEvents) {\n\t\t\t\tthis.destroyEvents(); // TODO: deprecate\n\t\t\t}\n\n\t\t\tthis.unrenderEvents();\n\n\t\t\tthis.thawHeight();\n\t\t\tthis.releaseScroll();\n\n\t\t\tthis.isEventsRendered = false;\n\t\t\tthis.trigger('eventsUnrender');\n\t\t}\n\n\t\treturn Promise.resolve(); // always synchronous\n\t},\n\n\n\t// Event Rendering Triggers\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Signals that all events have been rendered\n\tonEventsRender: function() {\n\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\tthis.publiclyTrigger('eventAfterRender', seg.event, seg.event, seg.el);\n\t\t});\n\t\tthis.publiclyTrigger('eventAfterAllRender');\n\t},\n\n\n\t// Signals that all event elements are about to be removed\n\tonBeforeEventsUnrender: function() {\n\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\tthis.publiclyTrigger('eventDestroy', seg.event, seg.event, seg.el);\n\t\t});\n\t},\n\n\n\t// Event Low-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Renders the events onto the view.\n\trenderEvents: function(events) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Removes event elements from the view.\n\tunrenderEvents: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Event Data Access\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\trequestEvents: function() {\n\t\treturn this.calendar.requestEvents(this.start, this.end);\n\t},\n\n\n\tgetCurrentEvents: function() {\n\t\treturn this.calendar.getPrunedEventCache();\n\t},\n\n\n\t// Event Rendering Utils\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Given an event and the default element used for rendering, returns the element that should actually be used.\n\t// Basically runs events and elements through the eventRender hook.\n\tresolveEventEl: function(event, el) {\n\t\tvar custom = this.publiclyTrigger('eventRender', event, event, el);\n\n\t\tif (custom === false) { // means don't render at all\n\t\t\tel = null;\n\t\t}\n\t\telse if (custom && custom !== true) {\n\t\t\tel = $(custom);\n\t\t}\n\n\t\treturn el;\n\t},\n\n\n\t// Hides all rendered event segments linked to the given event\n\tshowEvent: function(event) {\n\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\tseg.el.css('visibility', '');\n\t\t}, event);\n\t},\n\n\n\t// Shows all rendered event segments linked to the given event\n\thideEvent: function(event) {\n\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\tseg.el.css('visibility', 'hidden');\n\t\t}, event);\n\t},\n\n\n\t// Iterates through event segments that have been rendered (have an el). Goes through all by default.\n\t// If the optional `event` argument is specified, only iterates through segments linked to that event.\n\t// The `this` value of the callback function will be the view.\n\trenderedEventSegEach: function(func, event) {\n\t\tvar segs = this.getEventSegs();\n\t\tvar i;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tif (!event || segs[i].event._id === event._id) {\n\t\t\t\tif (segs[i].el) {\n\t\t\t\t\tfunc.call(this, segs[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Retrieves all the rendered segment objects for the view\n\tgetEventSegs: function() {\n\t\t// subclasses must implement\n\t\treturn [];\n\t},\n\n\n\t/* Event Drag-n-Drop\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes if the given event is allowed to be dragged by the user\n\tisEventDraggable: function(event) {\n\t\treturn this.isEventStartEditable(event);\n\t},\n\n\n\tisEventStartEditable: function(event) {\n\t\treturn firstDefined(\n\t\t\tevent.startEditable,\n\t\t\t(event.source || {}).startEditable,\n\t\t\tthis.opt('eventStartEditable'),\n\t\t\tthis.isEventGenerallyEditable(event)\n\t\t);\n\t},\n\n\n\tisEventGenerallyEditable: function(event) {\n\t\treturn firstDefined(\n\t\t\tevent.editable,\n\t\t\t(event.source || {}).editable,\n\t\t\tthis.opt('editable')\n\t\t);\n\t},\n\n\n\t// Must be called when an event in the view is dropped onto new location.\n\t// `dropLocation` is an object that contains the new zoned start/end/allDay values for the event.\n\treportEventDrop: function(event, dropLocation, largeUnit, el, ev) {\n\t\tvar calendar = this.calendar;\n\t\tvar mutateResult = calendar.mutateEvent(event, dropLocation, largeUnit);\n\t\tvar undoFunc = function() {\n\t\t\tmutateResult.undo();\n\t\t\tcalendar.reportEventChange();\n\t\t};\n\n\t\tthis.triggerEventDrop(event, mutateResult.dateDelta, undoFunc, el, ev);\n\t\tcalendar.reportEventChange(); // will rerender events\n\t},\n\n\n\t// Triggers event-drop handlers that have subscribed via the API\n\ttriggerEventDrop: function(event, dateDelta, undoFunc, el, ev) {\n\t\tthis.publiclyTrigger('eventDrop', el[0], event, dateDelta, undoFunc, ev, {}); // {} = jqui dummy\n\t},\n\n\n\t/* External Element Drag-n-Drop\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Must be called when an external element, via jQuery UI, has been dropped onto the calendar.\n\t// `meta` is the parsed data that has been embedded into the dragging event.\n\t// `dropLocation` is an object that contains the new zoned start/end/allDay values for the event.\n\treportExternalDrop: function(meta, dropLocation, el, ev, ui) {\n\t\tvar eventProps = meta.eventProps;\n\t\tvar eventInput;\n\t\tvar event;\n\n\t\t// Try to build an event object and render it. TODO: decouple the two\n\t\tif (eventProps) {\n\t\t\teventInput = $.extend({}, eventProps, dropLocation);\n\t\t\tevent = this.calendar.renderEvent(eventInput, meta.stick)[0]; // renderEvent returns an array\n\t\t}\n\n\t\tthis.triggerExternalDrop(event, dropLocation, el, ev, ui);\n\t},\n\n\n\t// Triggers external-drop handlers that have subscribed via the API\n\ttriggerExternalDrop: function(event, dropLocation, el, ev, ui) {\n\n\t\t// trigger 'drop' regardless of whether element represents an event\n\t\tthis.publiclyTrigger('drop', el[0], dropLocation.start, ev, ui);\n\n\t\tif (event) {\n\t\t\tthis.publiclyTrigger('eventReceive', null, event); // signal an external event landed\n\t\t}\n\t},\n\n\n\t/* Drag-n-Drop Rendering (for both events and external elements)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a event or external-element drag over the given drop zone.\n\t// If an external-element, seg will be `null`.\n\t// Must return elements used for any mock events.\n\trenderDrag: function(dropLocation, seg) {\n\t\t// subclasses must implement\n\t},\n\n\n\t// Unrenders a visual indication of an event or external-element being dragged.\n\tunrenderDrag: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\t/* Event Resizing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes if the given event is allowed to be resized from its starting edge\n\tisEventResizableFromStart: function(event) {\n\t\treturn this.opt('eventResizableFromStart') && this.isEventResizable(event);\n\t},\n\n\n\t// Computes if the given event is allowed to be resized from its ending edge\n\tisEventResizableFromEnd: function(event) {\n\t\treturn this.isEventResizable(event);\n\t},\n\n\n\t// Computes if the given event is allowed to be resized by the user at all\n\tisEventResizable: function(event) {\n\t\tvar source = event.source || {};\n\n\t\treturn firstDefined(\n\t\t\tevent.durationEditable,\n\t\t\tsource.durationEditable,\n\t\t\tthis.opt('eventDurationEditable'),\n\t\t\tevent.editable,\n\t\t\tsource.editable,\n\t\t\tthis.opt('editable')\n\t\t);\n\t},\n\n\n\t// Must be called when an event in the view has been resized to a new length\n\treportEventResize: function(event, resizeLocation, largeUnit, el, ev) {\n\t\tvar calendar = this.calendar;\n\t\tvar mutateResult = calendar.mutateEvent(event, resizeLocation, largeUnit);\n\t\tvar undoFunc = function() {\n\t\t\tmutateResult.undo();\n\t\t\tcalendar.reportEventChange();\n\t\t};\n\n\t\tthis.triggerEventResize(event, mutateResult.durationDelta, undoFunc, el, ev);\n\t\tcalendar.reportEventChange(); // will rerender events\n\t},\n\n\n\t// Triggers event-resize handlers that have subscribed via the API\n\ttriggerEventResize: function(event, durationDelta, undoFunc, el, ev) {\n\t\tthis.publiclyTrigger('eventResize', el[0], event, durationDelta, undoFunc, ev, {}); // {} = jqui dummy\n\t},\n\n\n\t/* Selection (time range)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Selects a date span on the view. `start` and `end` are both Moments.\n\t// `ev` is the native mouse event that begin the interaction.\n\tselect: function(span, ev) {\n\t\tthis.unselect(ev);\n\t\tthis.renderSelection(span);\n\t\tthis.reportSelection(span, ev);\n\t},\n\n\n\t// Renders a visual indication of the selection\n\trenderSelection: function(span) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Called when a new selection is made. Updates internal state and triggers handlers.\n\treportSelection: function(span, ev) {\n\t\tthis.isSelected = true;\n\t\tthis.triggerSelect(span, ev);\n\t},\n\n\n\t// Triggers handlers to 'select'\n\ttriggerSelect: function(span, ev) {\n\t\tthis.publiclyTrigger(\n\t\t\t'select',\n\t\t\tnull,\n\t\t\tthis.calendar.applyTimezone(span.start), // convert to calendar's tz for external API\n\t\t\tthis.calendar.applyTimezone(span.end), // \"\n\t\t\tev\n\t\t);\n\t},\n\n\n\t// Undoes a selection. updates in the internal state and triggers handlers.\n\t// `ev` is the native mouse event that began the interaction.\n\tunselect: function(ev) {\n\t\tif (this.isSelected) {\n\t\t\tthis.isSelected = false;\n\t\t\tif (this.destroySelection) {\n\t\t\t\tthis.destroySelection(); // TODO: deprecate\n\t\t\t}\n\t\t\tthis.unrenderSelection();\n\t\t\tthis.publiclyTrigger('unselect', null, ev);\n\t\t}\n\t},\n\n\n\t// Unrenders a visual indication of selection\n\tunrenderSelection: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t/* Event Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tselectEvent: function(event) {\n\t\tif (!this.selectedEvent || this.selectedEvent !== event) {\n\t\t\tthis.unselectEvent();\n\t\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\t\tseg.el.addClass('fc-selected');\n\t\t\t}, event);\n\t\t\tthis.selectedEvent = event;\n\t\t}\n\t},\n\n\n\tunselectEvent: function() {\n\t\tif (this.selectedEvent) {\n\t\t\tthis.renderedEventSegEach(function(seg) {\n\t\t\t\tseg.el.removeClass('fc-selected');\n\t\t\t}, this.selectedEvent);\n\t\t\tthis.selectedEvent = null;\n\t\t}\n\t},\n\n\n\tisEventSelected: function(event) {\n\t\t// event references might change on refetchEvents(), while selectedEvent doesn't,\n\t\t// so compare IDs\n\t\treturn this.selectedEvent && this.selectedEvent._id === event._id;\n\t},\n\n\n\t/* Mouse / Touch Unselecting (time range & event unselection)\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// TODO: move consistently to down/start or up/end?\n\t// TODO: don't kill previous selection if touch scrolling\n\n\n\thandleDocumentMousedown: function(ev) {\n\t\tif (isPrimaryMouseButton(ev)) {\n\t\t\tthis.processUnselect(ev);\n\t\t}\n\t},\n\n\n\tprocessUnselect: function(ev) {\n\t\tthis.processRangeUnselect(ev);\n\t\tthis.processEventUnselect(ev);\n\t},\n\n\n\tprocessRangeUnselect: function(ev) {\n\t\tvar ignore;\n\n\t\t// is there a time-range selection?\n\t\tif (this.isSelected && this.opt('unselectAuto')) {\n\t\t\t// only unselect if the clicked element is not identical to or inside of an 'unselectCancel' element\n\t\t\tignore = this.opt('unselectCancel');\n\t\t\tif (!ignore || !$(ev.target).closest(ignore).length) {\n\t\t\t\tthis.unselect(ev);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tprocessEventUnselect: function(ev) {\n\t\tif (this.selectedEvent) {\n\t\t\tif (!$(ev.target).closest('.fc-selected').length) {\n\t\t\t\tthis.unselectEvent();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t/* Day Click\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Triggers handlers to 'dayClick'\n\t// Span has start/end of the clicked area. Only the start is useful.\n\ttriggerDayClick: function(span, dayEl, ev) {\n\t\tthis.publiclyTrigger(\n\t\t\t'dayClick',\n\t\t\tdayEl,\n\t\t\tthis.calendar.applyTimezone(span.start), // convert to calendar's timezone for external API\n\t\t\tev\n\t\t);\n\t},\n\n\n\t/* Date Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Initializes internal variables related to calculating hidden days-of-week\n\tinitHiddenDays: function() {\n\t\tvar hiddenDays = this.opt('hiddenDays') || []; // array of day-of-week indices that are hidden\n\t\tvar isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n\t\tvar dayCnt = 0;\n\t\tvar i;\n\n\t\tif (this.opt('weekends') === false) {\n\t\t\thiddenDays.push(0, 6); // 0=sunday, 6=saturday\n\t\t}\n\n\t\tfor (i = 0; i < 7; i++) {\n\t\t\tif (\n\t\t\t\t!(isHiddenDayHash[i] = $.inArray(i, hiddenDays) !== -1)\n\t\t\t) {\n\t\t\t\tdayCnt++;\n\t\t\t}\n\t\t}\n\n\t\tif (!dayCnt) {\n\t\t\tthrow 'invalid hiddenDays'; // all days were hidden? bad.\n\t\t}\n\n\t\tthis.isHiddenDayHash = isHiddenDayHash;\n\t},\n\n\n\t// Is the current day hidden?\n\t// `day` is a day-of-week index (0-6), or a Moment\n\tisHiddenDay: function(day) {\n\t\tif (moment.isMoment(day)) {\n\t\t\tday = day.day();\n\t\t}\n\t\treturn this.isHiddenDayHash[day];\n\t},\n\n\n\t// Incrementing the current day until it is no longer a hidden day, returning a copy.\n\t// If the initial value of `date` is not a hidden day, don't do anything.\n\t// Pass `isExclusive` as `true` if you are dealing with an end date.\n\t// `inc` defaults to `1` (increment one day forward each time)\n\tskipHiddenDays: function(date, inc, isExclusive) {\n\t\tvar out = date.clone();\n\t\tinc = inc || 1;\n\t\twhile (\n\t\t\tthis.isHiddenDayHash[(out.day() + (isExclusive ? inc : 0) + 7) % 7]\n\t\t) {\n\t\t\tout.add(inc, 'days');\n\t\t}\n\t\treturn out;\n\t},\n\n\n\t// Returns the date range of the full days the given range visually appears to occupy.\n\t// Returns a new range object.\n\tcomputeDayRange: function(range) {\n\t\tvar startDay = range.start.clone().stripTime(); // the beginning of the day the range starts\n\t\tvar end = range.end;\n\t\tvar endDay = null;\n\t\tvar endTimeMS;\n\n\t\tif (end) {\n\t\t\tendDay = end.clone().stripTime(); // the beginning of the day the range exclusively ends\n\t\t\tendTimeMS = +end.time(); // # of milliseconds into `endDay`\n\n\t\t\t// If the end time is actually inclusively part of the next day and is equal to or\n\t\t\t// beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n\t\t\t// Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n\t\t\tif (endTimeMS && endTimeMS >= this.nextDayThreshold) {\n\t\t\t\tendDay.add(1, 'days');\n\t\t\t}\n\t\t}\n\n\t\t// If no end was specified, or if it is within `startDay` but not past nextDayThreshold,\n\t\t// assign the default duration of one day.\n\t\tif (!end || endDay <= startDay) {\n\t\t\tendDay = startDay.clone().add(1, 'days');\n\t\t}\n\n\t\treturn { start: startDay, end: endDay };\n\t},\n\n\n\t// Does the given event visually appear to occupy more than one day?\n\tisMultiDayEvent: function(event) {\n\t\tvar range = this.computeDayRange(event); // event is range-ish\n\n\t\treturn range.end.diff(range.start, 'days') > 1;\n\t}\n\n});\n\n;;\n\n/*\nEmbodies a div that has potential scrollbars\n*/\nvar Scroller = FC.Scroller = Class.extend({\n\n\tel: null, // the guaranteed outer element\n\tscrollEl: null, // the element with the scrollbars\n\toverflowX: null,\n\toverflowY: null,\n\n\n\tconstructor: function(options) {\n\t\toptions = options || {};\n\t\tthis.overflowX = options.overflowX || options.overflow || 'auto';\n\t\tthis.overflowY = options.overflowY || options.overflow || 'auto';\n\t},\n\n\n\trender: function() {\n\t\tthis.el = this.renderEl();\n\t\tthis.applyOverflow();\n\t},\n\n\n\trenderEl: function() {\n\t\treturn (this.scrollEl = $('<div class=\"fc-scroller\"></div>'));\n\t},\n\n\n\t// sets to natural height, unlocks overflow\n\tclear: function() {\n\t\tthis.setHeight('auto');\n\t\tthis.applyOverflow();\n\t},\n\n\n\tdestroy: function() {\n\t\tthis.el.remove();\n\t},\n\n\n\t// Overflow\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tapplyOverflow: function() {\n\t\tthis.scrollEl.css({\n\t\t\t'overflow-x': this.overflowX,\n\t\t\t'overflow-y': this.overflowY\n\t\t});\n\t},\n\n\n\t// Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\n\t// Useful for preserving scrollbar widths regardless of future resizes.\n\t// Can pass in scrollbarWidths for optimization.\n\tlockOverflow: function(scrollbarWidths) {\n\t\tvar overflowX = this.overflowX;\n\t\tvar overflowY = this.overflowY;\n\n\t\tscrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\n\n\t\tif (overflowX === 'auto') {\n\t\t\toverflowX = (\n\t\t\t\t\tscrollbarWidths.top || scrollbarWidths.bottom || // horizontal scrollbars?\n\t\t\t\t\t// OR scrolling pane with massless scrollbars?\n\t\t\t\t\tthis.scrollEl[0].scrollWidth - 1 > this.scrollEl[0].clientWidth\n\t\t\t\t\t\t// subtract 1 because of IE off-by-one issue\n\t\t\t\t) ? 'scroll' : 'hidden';\n\t\t}\n\n\t\tif (overflowY === 'auto') {\n\t\t\toverflowY = (\n\t\t\t\t\tscrollbarWidths.left || scrollbarWidths.right || // vertical scrollbars?\n\t\t\t\t\t// OR scrolling pane with massless scrollbars?\n\t\t\t\t\tthis.scrollEl[0].scrollHeight - 1 > this.scrollEl[0].clientHeight\n\t\t\t\t\t\t// subtract 1 because of IE off-by-one issue\n\t\t\t\t) ? 'scroll' : 'hidden';\n\t\t}\n\n\t\tthis.scrollEl.css({ 'overflow-x': overflowX, 'overflow-y': overflowY });\n\t},\n\n\n\t// Getters / Setters\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tsetHeight: function(height) {\n\t\tthis.scrollEl.height(height);\n\t},\n\n\n\tgetScrollTop: function() {\n\t\treturn this.scrollEl.scrollTop();\n\t},\n\n\n\tsetScrollTop: function(top) {\n\t\tthis.scrollEl.scrollTop(top);\n\t},\n\n\n\tgetClientWidth: function() {\n\t\treturn this.scrollEl[0].clientWidth;\n\t},\n\n\n\tgetClientHeight: function() {\n\t\treturn this.scrollEl[0].clientHeight;\n\t},\n\n\n\tgetScrollbarWidths: function() {\n\t\treturn getScrollbarWidths(this.scrollEl);\n\t}\n\n});\n\n;;\nfunction Iterator(items) {\n    this.items = items || [];\n}\n\n\n/* Calls a method on every item passing the arguments through */\nIterator.prototype.proxyCall = function(methodName) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    var results = [];\n\n    this.items.forEach(function(item) {\n        results.push(item[methodName].apply(item, args));\n    });\n\n    return results;\n};\n\n;;\n\n/* Toolbar with buttons and title\n----------------------------------------------------------------------------------------------------------------------*/\n\nfunction Toolbar(calendar, toolbarOptions) {\n\tvar t = this;\n\n\t// exports\n\tt.setToolbarOptions = setToolbarOptions;\n\tt.render = render;\n\tt.removeElement = removeElement;\n\tt.updateTitle = updateTitle;\n\tt.activateButton = activateButton;\n\tt.deactivateButton = deactivateButton;\n\tt.disableButton = disableButton;\n\tt.enableButton = enableButton;\n\tt.getViewsWithButtons = getViewsWithButtons;\n\tt.el = null; // mirrors local `el`\n\n\t// locals\n\tvar el;\n\tvar viewsWithButtons = [];\n\tvar tm;\n\n\t// method to update toolbar-specific options, not calendar-wide options\n\tfunction setToolbarOptions(newToolbarOptions) {\n\t\ttoolbarOptions = newToolbarOptions;\n\t}\n\n\t// can be called repeatedly and will rerender\n\tfunction render() {\n\t\tvar sections = toolbarOptions.layout;\n\n\t\ttm = calendar.options.theme ? 'ui' : 'fc';\n\n\t\tif (sections) {\n\t\t\tif (!el) {\n\t\t\t\tel = this.el = $(\"<div class='fc-toolbar \"+ toolbarOptions.extraClasses + \"'/>\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tel.empty();\n\t\t\t}\n\t\t\tel.append(renderSection('left'))\n\t\t\t\t.append(renderSection('right'))\n\t\t\t\t.append(renderSection('center'))\n\t\t\t\t.append('<div class=\"fc-clear\"/>');\n\t\t}\n\t\telse {\n\t\t\tremoveElement();\n\t\t}\n\t}\n\n\n\tfunction removeElement() {\n\t\tif (el) {\n\t\t\tel.remove();\n\t\t\tel = t.el = null;\n\t\t}\n\t}\n\n\n\tfunction renderSection(position) {\n\t\tvar sectionEl = $('<div class=\"fc-' + position + '\"/>');\n\t\tvar buttonStr = toolbarOptions.layout[position];\n\n\t\tif (buttonStr) {\n\t\t\t$.each(buttonStr.split(' '), function(i) {\n\t\t\t\tvar groupChildren = $();\n\t\t\t\tvar isOnlyButtons = true;\n\t\t\t\tvar groupEl;\n\n\t\t\t\t$.each(this.split(','), function(j, buttonName) {\n\t\t\t\t\tvar customButtonProps;\n\t\t\t\t\tvar viewSpec;\n\t\t\t\t\tvar buttonClick;\n\t\t\t\t\tvar overrideText; // text explicitly set by calendar's constructor options. overcomes icons\n\t\t\t\t\tvar defaultText;\n\t\t\t\t\tvar themeIcon;\n\t\t\t\t\tvar normalIcon;\n\t\t\t\t\tvar innerHtml;\n\t\t\t\t\tvar classes;\n\t\t\t\t\tvar button; // the element\n\n\t\t\t\t\tif (buttonName == 'title') {\n\t\t\t\t\t\tgroupChildren = groupChildren.add($('<h2>&nbsp;</h2>')); // we always want it to take up height\n\t\t\t\t\t\tisOnlyButtons = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif ((customButtonProps = (calendar.options.customButtons || {})[buttonName])) {\n\t\t\t\t\t\t\tbuttonClick = function(ev) {\n\t\t\t\t\t\t\t\tif (customButtonProps.click) {\n\t\t\t\t\t\t\t\t\tcustomButtonProps.click.call(button[0], ev);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\toverrideText = ''; // icons will override text\n\t\t\t\t\t\t\tdefaultText = customButtonProps.text;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if ((viewSpec = calendar.getViewSpec(buttonName))) {\n\t\t\t\t\t\t\tbuttonClick = function() {\n\t\t\t\t\t\t\t\tcalendar.changeView(buttonName);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tviewsWithButtons.push(buttonName);\n\t\t\t\t\t\t\toverrideText = viewSpec.buttonTextOverride;\n\t\t\t\t\t\t\tdefaultText = viewSpec.buttonTextDefault;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (calendar[buttonName]) { // a calendar method\n\t\t\t\t\t\t\tbuttonClick = function() {\n\t\t\t\t\t\t\t\tcalendar[buttonName]();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\toverrideText = (calendar.overrides.buttonText || {})[buttonName];\n\t\t\t\t\t\t\tdefaultText = calendar.options.buttonText[buttonName]; // everything else is considered default\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (buttonClick) {\n\n\t\t\t\t\t\t\tthemeIcon =\n\t\t\t\t\t\t\t\tcustomButtonProps ?\n\t\t\t\t\t\t\t\t\tcustomButtonProps.themeIcon :\n\t\t\t\t\t\t\t\t\tcalendar.options.themeButtonIcons[buttonName];\n\n\t\t\t\t\t\t\tnormalIcon =\n\t\t\t\t\t\t\t\tcustomButtonProps ?\n\t\t\t\t\t\t\t\t\tcustomButtonProps.icon :\n\t\t\t\t\t\t\t\t\tcalendar.options.buttonIcons[buttonName];\n\n\t\t\t\t\t\t\tif (overrideText) {\n\t\t\t\t\t\t\t\tinnerHtml = htmlEscape(overrideText);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (themeIcon && calendar.options.theme) {\n\t\t\t\t\t\t\t\tinnerHtml = \"<span class='ui-icon ui-icon-\" + themeIcon + \"'></span>\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (normalIcon && !calendar.options.theme) {\n\t\t\t\t\t\t\t\tinnerHtml = \"<span class='fc-icon fc-icon-\" + normalIcon + \"'></span>\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tinnerHtml = htmlEscape(defaultText);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tclasses = [\n\t\t\t\t\t\t\t\t'fc-' + buttonName + '-button',\n\t\t\t\t\t\t\t\ttm + '-button',\n\t\t\t\t\t\t\t\ttm + '-state-default'\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tbutton = $( // type=\"button\" so that it doesn't submit a form\n\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"' + classes.join(' ') + '\">' +\n\t\t\t\t\t\t\t\t\tinnerHtml +\n\t\t\t\t\t\t\t\t'</button>'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.click(function(ev) {\n\t\t\t\t\t\t\t\t\t// don't process clicks for disabled buttons\n\t\t\t\t\t\t\t\t\tif (!button.hasClass(tm + '-state-disabled')) {\n\n\t\t\t\t\t\t\t\t\t\tbuttonClick(ev);\n\n\t\t\t\t\t\t\t\t\t\t// after the click action, if the button becomes the \"active\" tab, or disabled,\n\t\t\t\t\t\t\t\t\t\t// it should never have a hover class, so remove it now.\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tbutton.hasClass(tm + '-state-active') ||\n\t\t\t\t\t\t\t\t\t\t\tbutton.hasClass(tm + '-state-disabled')\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tbutton.removeClass(tm + '-state-hover');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.mousedown(function() {\n\t\t\t\t\t\t\t\t\t// the *down* effect (mouse pressed in).\n\t\t\t\t\t\t\t\t\t// only on buttons that are not the \"active\" tab, or disabled\n\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-active')\n\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-disabled')\n\t\t\t\t\t\t\t\t\t\t.addClass(tm + '-state-down');\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.mouseup(function() {\n\t\t\t\t\t\t\t\t\t// undo the *down* effect\n\t\t\t\t\t\t\t\t\tbutton.removeClass(tm + '-state-down');\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.hover(\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\t// the *hover* effect.\n\t\t\t\t\t\t\t\t\t\t// only on buttons that are not the \"active\" tab, or disabled\n\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-active')\n\t\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-disabled')\n\t\t\t\t\t\t\t\t\t\t\t.addClass(tm + '-state-hover');\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\t// undo the *hover* effect\n\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\t.removeClass(tm + '-state-hover')\n\t\t\t\t\t\t\t\t\t\t\t.removeClass(tm + '-state-down'); // if mouseleave happens before mouseup\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tgroupChildren = groupChildren.add(button);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (isOnlyButtons) {\n\t\t\t\t\tgroupChildren\n\t\t\t\t\t\t.first().addClass(tm + '-corner-left').end()\n\t\t\t\t\t\t.last().addClass(tm + '-corner-right').end();\n\t\t\t\t}\n\n\t\t\t\tif (groupChildren.length > 1) {\n\t\t\t\t\tgroupEl = $('<div/>');\n\t\t\t\t\tif (isOnlyButtons) {\n\t\t\t\t\t\tgroupEl.addClass('fc-button-group');\n\t\t\t\t\t}\n\t\t\t\t\tgroupEl.append(groupChildren);\n\t\t\t\t\tsectionEl.append(groupEl);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsectionEl.append(groupChildren); // 1 or 0 children\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn sectionEl;\n\t}\n\n\n\tfunction updateTitle(text) {\n\t\tif (el) {\n\t\t\tel.find('h2').text(text);\n\t\t}\n\t}\n\n\n\tfunction activateButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.addClass(tm + '-state-active');\n\t\t}\n\t}\n\n\n\tfunction deactivateButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.removeClass(tm + '-state-active');\n\t\t}\n\t}\n\n\n\tfunction disableButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.prop('disabled', true)\n\t\t\t\t.addClass(tm + '-state-disabled');\n\t\t}\n\t}\n\n\n\tfunction enableButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.prop('disabled', false)\n\t\t\t\t.removeClass(tm + '-state-disabled');\n\t\t}\n\t}\n\n\n\tfunction getViewsWithButtons() {\n\t\treturn viewsWithButtons;\n\t}\n\n}\n\n;;\n\nvar Calendar = FC.Calendar = Class.extend({\n\n\tdirDefaults: null, // option defaults related to LTR or RTL\n\tlocaleDefaults: null, // option defaults related to current locale\n\toverrides: null, // option overrides given to the fullCalendar constructor\n\tdynamicOverrides: null, // options set with dynamic setter method. higher precedence than view overrides.\n\toptions: null, // all defaults combined with overrides\n\tviewSpecCache: null, // cache of view definitions\n\tview: null, // current View object\n\theader: null,\n\tfooter: null,\n\tloadingLevel: 0, // number of simultaneous loading tasks\n\n\n\t// a lot of this class' OOP logic is scoped within this constructor function,\n\t// but in the future, write individual methods on the prototype.\n\tconstructor: Calendar_constructor,\n\n\n\t// Subclasses can override this for initialization logic after the constructor has been called\n\tinitialize: function() {\n\t},\n\n\n\t// Computes the flattened options hash for the calendar and assigns to `this.options`.\n\t// Assumes this.overrides and this.dynamicOverrides have already been initialized.\n\tpopulateOptionsHash: function() {\n\t\tvar locale, localeDefaults;\n\t\tvar isRTL, dirDefaults;\n\n\t\tlocale = firstDefined( // explicit locale option given?\n\t\t\tthis.dynamicOverrides.locale,\n\t\t\tthis.overrides.locale\n\t\t);\n\t\tlocaleDefaults = localeOptionHash[locale];\n\t\tif (!localeDefaults) { // explicit locale option not given or invalid?\n\t\t\tlocale = Calendar.defaults.locale;\n\t\t\tlocaleDefaults = localeOptionHash[locale] || {};\n\t\t}\n\n\t\tisRTL = firstDefined( // based on options computed so far, is direction RTL?\n\t\t\tthis.dynamicOverrides.isRTL,\n\t\t\tthis.overrides.isRTL,\n\t\t\tlocaleDefaults.isRTL,\n\t\t\tCalendar.defaults.isRTL\n\t\t);\n\t\tdirDefaults = isRTL ? Calendar.rtlDefaults : {};\n\n\t\tthis.dirDefaults = dirDefaults;\n\t\tthis.localeDefaults = localeDefaults;\n\t\tthis.options = mergeOptions([ // merge defaults and overrides. lowest to highest precedence\n\t\t\tCalendar.defaults, // global defaults\n\t\t\tdirDefaults,\n\t\t\tlocaleDefaults,\n\t\t\tthis.overrides,\n\t\t\tthis.dynamicOverrides\n\t\t]);\n\t\tpopulateInstanceComputableOptions(this.options); // fill in gaps with computed options\n\t},\n\n\n\t// Gets information about how to create a view. Will use a cache.\n\tgetViewSpec: function(viewType) {\n\t\tvar cache = this.viewSpecCache;\n\n\t\treturn cache[viewType] || (cache[viewType] = this.buildViewSpec(viewType));\n\t},\n\n\n\t// Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n\t// Preference is given to views that have corresponding buttons.\n\tgetUnitViewSpec: function(unit) {\n\t\tvar viewTypes;\n\t\tvar i;\n\t\tvar spec;\n\n\t\tif ($.inArray(unit, intervalUnits) != -1) {\n\n\t\t\t// put views that have buttons first. there will be duplicates, but oh well\n\t\t\tviewTypes = this.header.getViewsWithButtons(); // TODO: include footer as well?\n\t\t\t$.each(FC.views, function(viewType) { // all views\n\t\t\t\tviewTypes.push(viewType);\n\t\t\t});\n\n\t\t\tfor (i = 0; i < viewTypes.length; i++) {\n\t\t\t\tspec = this.getViewSpec(viewTypes[i]);\n\t\t\t\tif (spec) {\n\t\t\t\t\tif (spec.singleUnit == unit) {\n\t\t\t\t\t\treturn spec;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Builds an object with information on how to create a given view\n\tbuildViewSpec: function(requestedViewType) {\n\t\tvar viewOverrides = this.overrides.views || {};\n\t\tvar specChain = []; // for the view. lowest to highest priority\n\t\tvar defaultsChain = []; // for the view. lowest to highest priority\n\t\tvar overridesChain = []; // for the view. lowest to highest priority\n\t\tvar viewType = requestedViewType;\n\t\tvar spec; // for the view\n\t\tvar overrides; // for the view\n\t\tvar duration;\n\t\tvar unit;\n\n\t\t// iterate from the specific view definition to a more general one until we hit an actual View class\n\t\twhile (viewType) {\n\t\t\tspec = fcViews[viewType];\n\t\t\toverrides = viewOverrides[viewType];\n\t\t\tviewType = null; // clear. might repopulate for another iteration\n\n\t\t\tif (typeof spec === 'function') { // TODO: deprecate\n\t\t\t\tspec = { 'class': spec };\n\t\t\t}\n\n\t\t\tif (spec) {\n\t\t\t\tspecChain.unshift(spec);\n\t\t\t\tdefaultsChain.unshift(spec.defaults || {});\n\t\t\t\tduration = duration || spec.duration;\n\t\t\t\tviewType = viewType || spec.type;\n\t\t\t}\n\n\t\t\tif (overrides) {\n\t\t\t\toverridesChain.unshift(overrides); // view-specific option hashes have options at zero-level\n\t\t\t\tduration = duration || overrides.duration;\n\t\t\t\tviewType = viewType || overrides.type;\n\t\t\t}\n\t\t}\n\n\t\tspec = mergeProps(specChain);\n\t\tspec.type = requestedViewType;\n\t\tif (!spec['class']) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (duration) {\n\t\t\tduration = moment.duration(duration);\n\t\t\tif (duration.valueOf()) { // valid?\n\t\t\t\tspec.duration = duration;\n\t\t\t\tunit = computeIntervalUnit(duration);\n\n\t\t\t\t// view is a single-unit duration, like \"week\" or \"day\"\n\t\t\t\t// incorporate options for this. lowest priority\n\t\t\t\tif (duration.as(unit) === 1) {\n\t\t\t\t\tspec.singleUnit = unit;\n\t\t\t\t\toverridesChain.unshift(viewOverrides[unit] || {});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tspec.defaults = mergeOptions(defaultsChain);\n\t\tspec.overrides = mergeOptions(overridesChain);\n\n\t\tthis.buildViewSpecOptions(spec);\n\t\tthis.buildViewSpecButtonText(spec, requestedViewType);\n\n\t\treturn spec;\n\t},\n\n\n\t// Builds and assigns a view spec's options object from its already-assigned defaults and overrides\n\tbuildViewSpecOptions: function(spec) {\n\t\tspec.options = mergeOptions([ // lowest to highest priority\n\t\t\tCalendar.defaults, // global defaults\n\t\t\tspec.defaults, // view's defaults (from ViewSubclass.defaults)\n\t\t\tthis.dirDefaults,\n\t\t\tthis.localeDefaults, // locale and dir take precedence over view's defaults!\n\t\t\tthis.overrides, // calendar's overrides (options given to constructor)\n\t\t\tspec.overrides, // view's overrides (view-specific options)\n\t\t\tthis.dynamicOverrides // dynamically set via setter. highest precedence\n\t\t]);\n\t\tpopulateInstanceComputableOptions(spec.options);\n\t},\n\n\n\t// Computes and assigns a view spec's buttonText-related options\n\tbuildViewSpecButtonText: function(spec, requestedViewType) {\n\n\t\t// given an options object with a possible `buttonText` hash, lookup the buttonText for the\n\t\t// requested view, falling back to a generic unit entry like \"week\" or \"day\"\n\t\tfunction queryButtonText(options) {\n\t\t\tvar buttonText = options.buttonText || {};\n\t\t\treturn buttonText[requestedViewType] ||\n\t\t\t\t// view can decide to look up a certain key\n\t\t\t\t(spec.buttonTextKey ? buttonText[spec.buttonTextKey] : null) ||\n\t\t\t\t// a key like \"month\"\n\t\t\t\t(spec.singleUnit ? buttonText[spec.singleUnit] : null);\n\t\t}\n\n\t\t// highest to lowest priority\n\t\tspec.buttonTextOverride =\n\t\t\tqueryButtonText(this.dynamicOverrides) ||\n\t\t\tqueryButtonText(this.overrides) || // constructor-specified buttonText lookup hash takes precedence\n\t\t\tspec.overrides.buttonText; // `buttonText` for view-specific options is a string\n\n\t\t// highest to lowest priority. mirrors buildViewSpecOptions\n\t\tspec.buttonTextDefault =\n\t\t\tqueryButtonText(this.localeDefaults) ||\n\t\t\tqueryButtonText(this.dirDefaults) ||\n\t\t\tspec.defaults.buttonText || // a single string. from ViewSubclass.defaults\n\t\t\tqueryButtonText(Calendar.defaults) ||\n\t\t\t(spec.duration ? this.humanizeDuration(spec.duration) : null) || // like \"3 days\"\n\t\t\trequestedViewType; // fall back to given view name\n\t},\n\n\n\t// Given a view name for a custom view or a standard view, creates a ready-to-go View object\n\tinstantiateView: function(viewType) {\n\t\tvar spec = this.getViewSpec(viewType);\n\n\t\treturn new spec['class'](this, viewType, spec.options, spec.duration);\n\t},\n\n\n\t// Returns a boolean about whether the view is okay to instantiate at some point\n\tisValidViewType: function(viewType) {\n\t\treturn Boolean(this.getViewSpec(viewType));\n\t},\n\n\n\t// Should be called when any type of async data fetching begins\n\tpushLoading: function() {\n\t\tif (!(this.loadingLevel++)) {\n\t\t\tthis.publiclyTrigger('loading', null, true, this.view);\n\t\t}\n\t},\n\n\n\t// Should be called when any type of async data fetching completes\n\tpopLoading: function() {\n\t\tif (!(--this.loadingLevel)) {\n\t\t\tthis.publiclyTrigger('loading', null, false, this.view);\n\t\t}\n\t},\n\n\n\t// Given arguments to the select method in the API, returns a span (unzoned start/end and other info)\n\tbuildSelectSpan: function(zonedStartInput, zonedEndInput) {\n\t\tvar start = this.moment(zonedStartInput).stripZone();\n\t\tvar end;\n\n\t\tif (zonedEndInput) {\n\t\t\tend = this.moment(zonedEndInput).stripZone();\n\t\t}\n\t\telse if (start.hasTime()) {\n\t\t\tend = start.clone().add(this.defaultTimedEventDuration);\n\t\t}\n\t\telse {\n\t\t\tend = start.clone().add(this.defaultAllDayEventDuration);\n\t\t}\n\n\t\treturn { start: start, end: end };\n\t}\n\n});\n\n\nCalendar.mixin(EmitterMixin);\n\n\nfunction Calendar_constructor(element, overrides) {\n\tvar t = this;\n\n\n\t// Exports\n\t// -----------------------------------------------------------------------------------\n\n\tt.render = render;\n\tt.destroy = destroy;\n\tt.rerenderEvents = rerenderEvents;\n\tt.changeView = renderView; // `renderView` will switch to another view\n\tt.select = select;\n\tt.unselect = unselect;\n\tt.prev = prev;\n\tt.next = next;\n\tt.prevYear = prevYear;\n\tt.nextYear = nextYear;\n\tt.today = today;\n\tt.gotoDate = gotoDate;\n\tt.incrementDate = incrementDate;\n\tt.zoomTo = zoomTo;\n\tt.getDate = getDate;\n\tt.getCalendar = getCalendar;\n\tt.getView = getView;\n\tt.option = option; // getter/setter method\n\tt.publiclyTrigger = publiclyTrigger;\n\n\n\t// Options\n\t// -----------------------------------------------------------------------------------\n\n\tt.dynamicOverrides = {};\n\tt.viewSpecCache = {};\n\tt.optionHandlers = {}; // for Calendar.options.js\n\tt.overrides = $.extend({}, overrides); // make a copy\n\n\tt.populateOptionsHash(); // sets this.options\n\n\n\n\t// Locale-data Internals\n\t// -----------------------------------------------------------------------------------\n\t// Apply overrides to the current locale's data\n\n\tvar localeData;\n\n\t// Called immediately, and when any of the options change.\n\t// Happens before any internal objects rebuild or rerender, because this is very core.\n\tt.bindOptions([\n\t\t'locale', 'monthNames', 'monthNamesShort', 'dayNames', 'dayNamesShort', 'firstDay', 'weekNumberCalculation'\n\t], function(locale, monthNames, monthNamesShort, dayNames, dayNamesShort, firstDay, weekNumberCalculation) {\n\n\t\t// normalize\n\t\tif (weekNumberCalculation === 'iso') {\n\t\t\tweekNumberCalculation = 'ISO'; // normalize\n\t\t}\n\n\t\tlocaleData = createObject( // make a cheap copy\n\t\t\tgetMomentLocaleData(locale) // will fall back to en\n\t\t);\n\n\t\tif (monthNames) {\n\t\t\tlocaleData._months = monthNames;\n\t\t}\n\t\tif (monthNamesShort) {\n\t\t\tlocaleData._monthsShort = monthNamesShort;\n\t\t}\n\t\tif (dayNames) {\n\t\t\tlocaleData._weekdays = dayNames;\n\t\t}\n\t\tif (dayNamesShort) {\n\t\t\tlocaleData._weekdaysShort = dayNamesShort;\n\t\t}\n\n\t\tif (firstDay == null && weekNumberCalculation === 'ISO') {\n\t\t\tfirstDay = 1;\n\t\t}\n\t\tif (firstDay != null) {\n\t\t\tvar _week = createObject(localeData._week); // _week: { dow: # }\n\t\t\t_week.dow = firstDay;\n\t\t\tlocaleData._week = _week;\n\t\t}\n\n\t\tif ( // whitelist certain kinds of input\n\t\t\tweekNumberCalculation === 'ISO' ||\n\t\t\tweekNumberCalculation === 'local' ||\n\t\t\ttypeof weekNumberCalculation === 'function'\n\t\t) {\n\t\t\tlocaleData._fullCalendar_weekCalc = weekNumberCalculation; // moment-ext will know what to do with it\n\t\t}\n\n\t\t// If the internal current date object already exists, move to new locale.\n\t\t// We do NOT need to do this technique for event dates, because this happens when converting to \"segments\".\n\t\tif (date) {\n\t\t\tlocalizeMoment(date); // sets to localeData\n\t\t}\n\t});\n\n\n\t// Calendar-specific Date Utilities\n\t// -----------------------------------------------------------------------------------\n\n\n\tt.defaultAllDayEventDuration = moment.duration(t.options.defaultAllDayEventDuration);\n\tt.defaultTimedEventDuration = moment.duration(t.options.defaultTimedEventDuration);\n\n\n\t// Builds a moment using the settings of the current calendar: timezone and locale.\n\t// Accepts anything the vanilla moment() constructor accepts.\n\tt.moment = function() {\n\t\tvar mom;\n\n\t\tif (t.options.timezone === 'local') {\n\t\t\tmom = FC.moment.apply(null, arguments);\n\n\t\t\t// Force the moment to be local, because FC.moment doesn't guarantee it.\n\t\t\tif (mom.hasTime()) { // don't give ambiguously-timed moments a local zone\n\t\t\t\tmom.local();\n\t\t\t}\n\t\t}\n\t\telse if (t.options.timezone === 'UTC') {\n\t\t\tmom = FC.moment.utc.apply(null, arguments); // process as UTC\n\t\t}\n\t\telse {\n\t\t\tmom = FC.moment.parseZone.apply(null, arguments); // let the input decide the zone\n\t\t}\n\n\t\tlocalizeMoment(mom);\n\n\t\treturn mom;\n\t};\n\n\n\t// Updates the given moment's locale settings to the current calendar locale settings.\n\tfunction localizeMoment(mom) {\n\t\tmom._locale = localeData;\n\t}\n\tt.localizeMoment = localizeMoment;\n\n\n\t// Returns a boolean about whether or not the calendar knows how to calculate\n\t// the timezone offset of arbitrary dates in the current timezone.\n\tt.getIsAmbigTimezone = function() {\n\t\treturn t.options.timezone !== 'local' && t.options.timezone !== 'UTC';\n\t};\n\n\n\t// Returns a copy of the given date in the current timezone. Has no effect on dates without times.\n\tt.applyTimezone = function(date) {\n\t\tif (!date.hasTime()) {\n\t\t\treturn date.clone();\n\t\t}\n\n\t\tvar zonedDate = t.moment(date.toArray());\n\t\tvar timeAdjust = date.time() - zonedDate.time();\n\t\tvar adjustedZonedDate;\n\n\t\t// Safari sometimes has problems with this coersion when near DST. Adjust if necessary. (bug #2396)\n\t\tif (timeAdjust) { // is the time result different than expected?\n\t\t\tadjustedZonedDate = zonedDate.clone().add(timeAdjust); // add milliseconds\n\t\t\tif (date.time() - adjustedZonedDate.time() === 0) { // does it match perfectly now?\n\t\t\t\tzonedDate = adjustedZonedDate;\n\t\t\t}\n\t\t}\n\n\t\treturn zonedDate;\n\t};\n\n\n\t// Returns a moment for the current date, as defined by the client's computer or from the `now` option.\n\t// Will return an moment with an ambiguous timezone.\n\tt.getNow = function() {\n\t\tvar now = t.options.now;\n\t\tif (typeof now === 'function') {\n\t\t\tnow = now();\n\t\t}\n\t\treturn t.moment(now).stripZone();\n\t};\n\n\n\t// Get an event's normalized end date. If not present, calculate it from the defaults.\n\tt.getEventEnd = function(event) {\n\t\tif (event.end) {\n\t\t\treturn event.end.clone();\n\t\t}\n\t\telse {\n\t\t\treturn t.getDefaultEventEnd(event.allDay, event.start);\n\t\t}\n\t};\n\n\n\t// Given an event's allDay status and start date, return what its fallback end date should be.\n\t// TODO: rename to computeDefaultEventEnd\n\tt.getDefaultEventEnd = function(allDay, zonedStart) {\n\t\tvar end = zonedStart.clone();\n\n\t\tif (allDay) {\n\t\t\tend.stripTime().add(t.defaultAllDayEventDuration);\n\t\t}\n\t\telse {\n\t\t\tend.add(t.defaultTimedEventDuration);\n\t\t}\n\n\t\tif (t.getIsAmbigTimezone()) {\n\t\t\tend.stripZone(); // we don't know what the tzo should be\n\t\t}\n\n\t\treturn end;\n\t};\n\n\n\t// Produces a human-readable string for the given duration.\n\t// Side-effect: changes the locale of the given duration.\n\tt.humanizeDuration = function(duration) {\n\t\treturn duration.locale(t.options.locale).humanize();\n\t};\n\n\n\n\t// Imports\n\t// -----------------------------------------------------------------------------------\n\n\n\tEventManager.call(t);\n\n\n\n\t// Locals\n\t// -----------------------------------------------------------------------------------\n\n\n\tvar _element = element[0];\n\tvar toolbarsManager;\n\tvar header;\n\tvar footer;\n\tvar content;\n\tvar tm; // for making theme classes\n\tvar currentView; // NOTE: keep this in sync with this.view\n\tvar viewsByType = {}; // holds all instantiated view instances, current or not\n\tvar suggestedViewHeight;\n\tvar windowResizeProxy; // wraps the windowResize function\n\tvar ignoreWindowResize = 0;\n\tvar date; // unzoned\n\n\n\n\t// Main Rendering\n\t// -----------------------------------------------------------------------------------\n\n\n\t// compute the initial ambig-timezone date\n\tif (t.options.defaultDate != null) {\n\t\tdate = t.moment(t.options.defaultDate).stripZone();\n\t}\n\telse {\n\t\tdate = t.getNow(); // getNow already returns unzoned\n\t}\n\n\n\tfunction render() {\n\t\tif (!content) {\n\t\t\tinitialRender();\n\t\t}\n\t\telse if (elementVisible()) {\n\t\t\t// mainly for the public API\n\t\t\tcalcSize();\n\t\t\trenderView();\n\t\t}\n\t}\n\n\n\tfunction initialRender() {\n\t\telement.addClass('fc');\n\n\t\t// event delegation for nav links\n\t\telement.on('click.fc', 'a[data-goto]', function(ev) {\n\t\t\tvar anchorEl = $(this);\n\t\t\tvar gotoOptions = anchorEl.data('goto'); // will automatically parse JSON\n\t\t\tvar date = t.moment(gotoOptions.date);\n\t\t\tvar viewType = gotoOptions.type;\n\n\t\t\t// property like \"navLinkDayClick\". might be a string or a function\n\t\t\tvar customAction = currentView.opt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\n\n\t\t\tif (typeof customAction === 'function') {\n\t\t\t\tcustomAction(date, ev);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (typeof customAction === 'string') {\n\t\t\t\t\tviewType = customAction;\n\t\t\t\t}\n\t\t\t\tzoomTo(date, viewType);\n\t\t\t}\n\t\t});\n\n\t\t// called immediately, and upon option change\n\t\tt.bindOption('theme', function(theme) {\n\t\t\ttm = theme ? 'ui' : 'fc'; // affects a larger scope\n\t\t\telement.toggleClass('ui-widget', theme);\n\t\t\telement.toggleClass('fc-unthemed', !theme);\n\t\t});\n\n\t\t// called immediately, and upon option change.\n\t\t// HACK: locale often affects isRTL, so we explicitly listen to that too.\n\t\tt.bindOptions([ 'isRTL', 'locale' ], function(isRTL) {\n\t\t\telement.toggleClass('fc-ltr', !isRTL);\n\t\t\telement.toggleClass('fc-rtl', isRTL);\n\t\t});\n\n\t\tcontent = $(\"<div class='fc-view-container'/>\").prependTo(element);\n\n\t\tvar toolbars = buildToolbars();\n\t\ttoolbarsManager = new Iterator(toolbars);\n\n\t\theader = t.header = toolbars[0];\n\t\tfooter = t.footer = toolbars[1];\n\n\t\trenderHeader();\n\t\trenderFooter();\n\t\trenderView(t.options.defaultView);\n\n\t\tif (t.options.handleWindowResize) {\n\t\t\twindowResizeProxy = debounce(windowResize, t.options.windowResizeDelay); // prevents rapid calls\n\t\t\t$(window).resize(windowResizeProxy);\n\t\t}\n\t}\n\n\n\tfunction destroy() {\n\n\t\tif (currentView) {\n\t\t\tcurrentView.removeElement();\n\n\t\t\t// NOTE: don't null-out currentView/t.view in case API methods are called after destroy.\n\t\t\t// It is still the \"current\" view, just not rendered.\n\t\t}\n\n\t\ttoolbarsManager.proxyCall('removeElement');\n\t\tcontent.remove();\n\t\telement.removeClass('fc fc-ltr fc-rtl fc-unthemed ui-widget');\n\n\t\telement.off('.fc'); // unbind nav link handlers\n\n\t\tif (windowResizeProxy) {\n\t\t\t$(window).unbind('resize', windowResizeProxy);\n\t\t}\n\t}\n\n\n\tfunction elementVisible() {\n\t\treturn element.is(':visible');\n\t}\n\n\n\n\t// View Rendering\n\t// -----------------------------------------------------------------------------------\n\n\n\t// Renders a view because of a date change, view-type change, or for the first time.\n\t// If not given a viewType, keep the current view but render different dates.\n\t// Accepts an optional scroll state to restore to.\n\tfunction renderView(viewType, forcedScroll) {\n\t\tignoreWindowResize++;\n\n\t\tvar needsClearView = currentView && viewType && currentView.type !== viewType;\n\n\t\t// if viewType is changing, remove the old view's rendering\n\t\tif (needsClearView) {\n\t\t\tfreezeContentHeight(); // prevent a scroll jump when view element is removed\n\t\t\tclearView();\n\t\t}\n\n\t\t// if viewType changed, or the view was never created, create a fresh view\n\t\tif (!currentView && viewType) {\n\t\t\tcurrentView = t.view =\n\t\t\t\tviewsByType[viewType] ||\n\t\t\t\t(viewsByType[viewType] = t.instantiateView(viewType));\n\n\t\t\tcurrentView.setElement(\n\t\t\t\t$(\"<div class='fc-view fc-\" + viewType + \"-view' />\").appendTo(content)\n\t\t\t);\n\t\t\ttoolbarsManager.proxyCall('activateButton', viewType);\n\t\t}\n\n\t\tif (currentView) {\n\n\t\t\t// in case the view should render a period of time that is completely hidden\n\t\t\tdate = currentView.massageCurrentDate(date);\n\n\t\t\t// render or rerender the view\n\t\t\tif (\n\t\t\t\t!currentView.isDateSet ||\n\t\t\t\t!( // NOT within interval range signals an implicit date window change\n\t\t\t\t\tdate >= currentView.intervalStart &&\n\t\t\t\t\tdate < currentView.intervalEnd\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tif (elementVisible()) {\n\n\t\t\t\t\tif (forcedScroll) {\n\t\t\t\t\t\tcurrentView.captureInitialScroll(forcedScroll);\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentView.setDate(date, forcedScroll);\n\n\t\t\t\t\tif (forcedScroll) {\n\t\t\t\t\t\tcurrentView.releaseScroll();\n\t\t\t\t\t}\n\n\t\t\t\t\t// need to do this after View::render, so dates are calculated\n\t\t\t\t\t// NOTE: view updates title text proactively\n\t\t\t\t\tupdateToolbarsTodayButton();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (needsClearView) {\n\t\t\tthawContentHeight();\n\t\t}\n\n\t\tignoreWindowResize--;\n\t}\n\n\n\t// Unrenders the current view and reflects this change in the Header.\n\t// Unregsiters the `currentView`, but does not remove from viewByType hash.\n\tfunction clearView() {\n\t\ttoolbarsManager.proxyCall('deactivateButton', currentView.type);\n\t\tcurrentView.removeElement();\n\t\tcurrentView = t.view = null;\n\t}\n\n\n\t// Destroys the view, including the view object. Then, re-instantiates it and renders it.\n\t// Maintains the same scroll state.\n\t// TODO: maintain any other user-manipulated state.\n\tfunction reinitView() {\n\t\tignoreWindowResize++;\n\t\tfreezeContentHeight();\n\n\t\tvar viewType = currentView.type;\n\t\tvar scrollState = currentView.queryScroll();\n\t\tclearView();\n\t\tcalcSize();\n\t\trenderView(viewType, scrollState);\n\n\t\tthawContentHeight();\n\t\tignoreWindowResize--;\n\t}\n\n\n\n\t// Resizing\n\t// -----------------------------------------------------------------------------------\n\n\n\tt.getSuggestedViewHeight = function() {\n\t\tif (suggestedViewHeight === undefined) {\n\t\t\tcalcSize();\n\t\t}\n\t\treturn suggestedViewHeight;\n\t};\n\n\n\tt.isHeightAuto = function() {\n\t\treturn t.options.contentHeight === 'auto' || t.options.height === 'auto';\n\t};\n\n\n\tfunction updateSize(shouldRecalc) {\n\t\tif (elementVisible()) {\n\n\t\t\tif (shouldRecalc) {\n\t\t\t\t_calcSize();\n\t\t\t}\n\n\t\t\tignoreWindowResize++;\n\t\t\tcurrentView.updateSize(true); // isResize=true. will poll getSuggestedViewHeight() and isHeightAuto()\n\t\t\tignoreWindowResize--;\n\n\t\t\treturn true; // signal success\n\t\t}\n\t}\n\n\n\tfunction calcSize() {\n\t\tif (elementVisible()) {\n\t\t\t_calcSize();\n\t\t}\n\t}\n\n\n\tfunction _calcSize() { // assumes elementVisible\n\t\tvar contentHeightInput = t.options.contentHeight;\n\t\tvar heightInput = t.options.height;\n\n\t\tif (typeof contentHeightInput === 'number') { // exists and not 'auto'\n\t\t\tsuggestedViewHeight = contentHeightInput;\n\t\t}\n\t\telse if (typeof contentHeightInput === 'function') { // exists and is a function\n\t\t\tsuggestedViewHeight = contentHeightInput();\n\t\t}\n\t\telse if (typeof heightInput === 'number') { // exists and not 'auto'\n\t\t\tsuggestedViewHeight = heightInput - queryToolbarsHeight();\n\t\t}\n\t\telse if (typeof heightInput === 'function') { // exists and is a function\n\t\t\tsuggestedViewHeight = heightInput() - queryToolbarsHeight();\n\t\t}\n\t\telse if (heightInput === 'parent') { // set to height of parent element\n\t\t\tsuggestedViewHeight = element.parent().height() - queryToolbarsHeight();\n\t\t}\n\t\telse {\n\t\t\tsuggestedViewHeight = Math.round(content.width() / Math.max(t.options.aspectRatio, .5));\n\t\t}\n\t}\n\n\n\tfunction queryToolbarsHeight() {\n\t\treturn toolbarsManager.items.reduce(function(accumulator, toolbar) {\n\t\t\tvar toolbarHeight = toolbar.el ? toolbar.el.outerHeight(true) : 0; // includes margin\n\t\t\treturn accumulator + toolbarHeight;\n\t\t}, 0);\n\t}\n\n\n\tfunction windowResize(ev) {\n\t\tif (\n\t\t\t!ignoreWindowResize &&\n\t\t\tev.target === window && // so we don't process jqui \"resize\" events that have bubbled up\n\t\t\tcurrentView.start // view has already been rendered\n\t\t) {\n\t\t\tif (updateSize(true)) {\n\t\t\t\tcurrentView.publiclyTrigger('windowResize', _element);\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\t/* Event Rendering\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction rerenderEvents() { // API method. destroys old events if previously rendered.\n\t\tif (elementVisible()) {\n\t\t\tt.reportEventChange(); // will re-trasmit events to the view, causing a rerender\n\t\t}\n\t}\n\n\n\n\t/* Toolbars\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction buildToolbars() {\n\t\treturn [\n\t\t\tnew Toolbar(t, computeHeaderOptions()),\n\t\t\tnew Toolbar(t, computeFooterOptions())\n\t\t];\n\t}\n\n\n\tfunction computeHeaderOptions() {\n\t\treturn {\n\t\t\textraClasses: 'fc-header-toolbar',\n\t\t\tlayout: t.options.header\n\t\t};\n\t}\n\n\n\tfunction computeFooterOptions() {\n\t\treturn {\n\t\t\textraClasses: 'fc-footer-toolbar',\n\t\t\tlayout: t.options.footer\n\t\t};\n\t}\n\n\n\t// can be called repeatedly and Header will rerender\n\tfunction renderHeader() {\n\t\theader.setToolbarOptions(computeHeaderOptions());\n\t\theader.render();\n\t\tif (header.el) {\n\t\t\telement.prepend(header.el);\n\t\t}\n\t}\n\n\n\t// can be called repeatedly and Footer will rerender\n\tfunction renderFooter() {\n\t\tfooter.setToolbarOptions(computeFooterOptions());\n\t\tfooter.render();\n\t\tif (footer.el) {\n\t\t\telement.append(footer.el);\n\t\t}\n\t}\n\n\n\tt.setToolbarsTitle = function(title) {\n\t\ttoolbarsManager.proxyCall('updateTitle', title);\n\t};\n\n\n\tfunction updateToolbarsTodayButton() {\n\t\tvar now = t.getNow();\n\t\tif (now >= currentView.intervalStart && now < currentView.intervalEnd) {\n\t\t\ttoolbarsManager.proxyCall('disableButton', 'today');\n\t\t}\n\t\telse {\n\t\t\ttoolbarsManager.proxyCall('enableButton', 'today');\n\t\t}\n\t}\n\n\n\n\t/* Selection\n\t-----------------------------------------------------------------------------*/\n\n\n\t// this public method receives start/end dates in any format, with any timezone\n\tfunction select(zonedStartInput, zonedEndInput) {\n\t\tcurrentView.select(\n\t\t\tt.buildSelectSpan.apply(t, arguments)\n\t\t);\n\t}\n\n\n\tfunction unselect() { // safe to be called before renderView\n\t\tif (currentView) {\n\t\t\tcurrentView.unselect();\n\t\t}\n\t}\n\n\n\n\t/* Date\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction prev() {\n\t\tdate = currentView.computePrevDate(date);\n\t\trenderView();\n\t}\n\n\n\tfunction next() {\n\t\tdate = currentView.computeNextDate(date);\n\t\trenderView();\n\t}\n\n\n\tfunction prevYear() {\n\t\tdate.add(-1, 'years');\n\t\trenderView();\n\t}\n\n\n\tfunction nextYear() {\n\t\tdate.add(1, 'years');\n\t\trenderView();\n\t}\n\n\n\tfunction today() {\n\t\tdate = t.getNow();\n\t\trenderView();\n\t}\n\n\n\tfunction gotoDate(zonedDateInput) {\n\t\tdate = t.moment(zonedDateInput).stripZone();\n\t\trenderView();\n\t}\n\n\n\tfunction incrementDate(delta) {\n\t\tdate.add(moment.duration(delta));\n\t\trenderView();\n\t}\n\n\n\t// Forces navigation to a view for the given date.\n\t// `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n\tfunction zoomTo(newDate, viewType) {\n\t\tvar spec;\n\n\t\tviewType = viewType || 'day'; // day is default zoom\n\t\tspec = t.getViewSpec(viewType) || t.getUnitViewSpec(viewType);\n\n\t\tdate = newDate.clone();\n\t\trenderView(spec ? spec.type : null);\n\t}\n\n\n\t// for external API\n\tfunction getDate() {\n\t\treturn t.applyTimezone(date); // infuse the calendar's timezone\n\t}\n\n\n\n\t/* Height \"Freezing\"\n\t-----------------------------------------------------------------------------*/\n\n\n\tt.freezeContentHeight = freezeContentHeight;\n\tt.thawContentHeight = thawContentHeight;\n\n\tvar freezeContentHeightDepth = 0;\n\n\n\tfunction freezeContentHeight() {\n\t\tif (!(freezeContentHeightDepth++)) {\n\t\t\tcontent.css({\n\t\t\t\twidth: '100%',\n\t\t\t\theight: content.height(),\n\t\t\t\toverflow: 'hidden'\n\t\t\t});\n\t\t}\n\t}\n\n\n\tfunction thawContentHeight() {\n\t\tif (!(--freezeContentHeightDepth)) {\n\t\t\tcontent.css({\n\t\t\t\twidth: '',\n\t\t\t\theight: '',\n\t\t\t\toverflow: ''\n\t\t\t});\n\t\t}\n\t}\n\n\n\n\t/* Misc\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction getCalendar() {\n\t\treturn t;\n\t}\n\n\n\tfunction getView() {\n\t\treturn currentView;\n\t}\n\n\n\tfunction option(name, value) {\n\t\tvar newOptionHash;\n\n\t\tif (typeof name === 'string') {\n\t\t\tif (value === undefined) { // getter\n\t\t\t\treturn t.options[name];\n\t\t\t}\n\t\t\telse { // setter for individual option\n\t\t\t\tnewOptionHash = {};\n\t\t\t\tnewOptionHash[name] = value;\n\t\t\t\tsetOptions(newOptionHash);\n\t\t\t}\n\t\t}\n\t\telse if (typeof name === 'object') { // compound setter with object input\n\t\t\tsetOptions(name);\n\t\t}\n\t}\n\n\n\tfunction setOptions(newOptionHash) {\n\t\tvar optionCnt = 0;\n\t\tvar optionName;\n\n\t\tfor (optionName in newOptionHash) {\n\t\t\tt.dynamicOverrides[optionName] = newOptionHash[optionName];\n\t\t}\n\n\t\tt.viewSpecCache = {}; // the dynamic override invalidates the options in this cache, so just clear it\n\t\tt.populateOptionsHash(); // this.options needs to be recomputed after the dynamic override\n\n\t\t// trigger handlers after this.options has been updated\n\t\tfor (optionName in newOptionHash) {\n\t\t\tt.triggerOptionHandlers(optionName); // recall bindOption/bindOptions\n\t\t\toptionCnt++;\n\t\t}\n\n\t\t// special-case handling of single option change.\n\t\t// if only one option change, `optionName` will be its name.\n\t\tif (optionCnt === 1) {\n\t\t\tif (optionName === 'height' || optionName === 'contentHeight' || optionName === 'aspectRatio') {\n\t\t\t\tupdateSize(true); // true = allow recalculation of height\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (optionName === 'defaultDate') {\n\t\t\t\treturn; // can't change date this way. use gotoDate instead\n\t\t\t}\n\t\t\telse if (optionName === 'businessHours') {\n\t\t\t\tif (currentView) {\n\t\t\t\t\tcurrentView.unrenderBusinessHours();\n\t\t\t\t\tcurrentView.renderBusinessHours();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (optionName === 'timezone') {\n\t\t\t\tt.rezoneArrayEventSources();\n\t\t\t\tt.refetchEvents();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// catch-all. rerender the header and footer and rebuild/rerender the current view\n\t\trenderHeader();\n\t\trenderFooter();\n\t\tviewsByType = {}; // even non-current views will be affected by this option change. do before rerender\n\t\treinitView();\n\t}\n\n\n\tfunction publiclyTrigger(name, thisObj) {\n\t\tvar args = Array.prototype.slice.call(arguments, 2);\n\n\t\tthisObj = thisObj || _element;\n\t\tthis.triggerWith(name, thisObj, args); // Emitter's method\n\n\t\tif (t.options[name]) {\n\t\t\treturn t.options[name].apply(thisObj, args);\n\t\t}\n\t}\n\n\tt.initialize();\n}\n\n;;\n/*\nOptions binding/triggering system.\n*/\nCalendar.mixin({\n\n\t// A map of option names to arrays of handler objects. Initialized to {} in Calendar.\n\t// Format for a handler object:\n\t// {\n\t//   func // callback function to be called upon change\n\t//   names // option names whose values should be given to func\n\t// }\n\toptionHandlers: null,\n\n\t// Calls handlerFunc immediately, and when the given option has changed.\n\t// handlerFunc will be given the option value.\n\tbindOption: function(optionName, handlerFunc) {\n\t\tthis.bindOptions([ optionName ], handlerFunc);\n\t},\n\n\t// Calls handlerFunc immediately, and when any of the given options change.\n\t// handlerFunc will be given each option value as ordered function arguments.\n\tbindOptions: function(optionNames, handlerFunc) {\n\t\tvar handlerObj = { func: handlerFunc, names: optionNames };\n\t\tvar i;\n\n\t\tfor (i = 0; i < optionNames.length; i++) {\n\t\t\tthis.registerOptionHandlerObj(optionNames[i], handlerObj);\n\t\t}\n\n\t\tthis.triggerOptionHandlerObj(handlerObj);\n\t},\n\n\t// Puts the given handler object into the internal hash\n\tregisterOptionHandlerObj: function(optionName, handlerObj) {\n\t\t(this.optionHandlers[optionName] || (this.optionHandlers[optionName] = []))\n\t\t\t.push(handlerObj);\n\t},\n\n\t// Reports that the given option has changed, and calls all appropriate handlers.\n\ttriggerOptionHandlers: function(optionName) {\n\t\tvar handlerObjs = this.optionHandlers[optionName] || [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < handlerObjs.length; i++) {\n\t\t\tthis.triggerOptionHandlerObj(handlerObjs[i]);\n\t\t}\n\t},\n\n\t// Calls the callback for a specific handler object, passing in the appropriate arguments.\n\ttriggerOptionHandlerObj: function(handlerObj) {\n\t\tvar optionNames = handlerObj.names;\n\t\tvar optionValues = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < optionNames.length; i++) {\n\t\t\toptionValues.push(this.options[optionNames[i]]);\n\t\t}\n\n\t\thandlerObj.func.apply(this, optionValues); // maintain the Calendar's `this` context\n\t}\n\n});\n\n;;\n\nCalendar.defaults = {\n\n\ttitleRangeSeparator: ' \\u2013 ', // en dash\n\tmonthYearFormat: 'MMMM YYYY', // required for en. other locales rely on datepicker computable option\n\n\tdefaultTimedEventDuration: '02:00:00',\n\tdefaultAllDayEventDuration: { days: 1 },\n\tforceEventDuration: false,\n\tnextDayThreshold: '09:00:00', // 9am\n\n\t// display\n\tdefaultView: 'month',\n\taspectRatio: 1.35,\n\theader: {\n\t\tleft: 'title',\n\t\tcenter: '',\n\t\tright: 'today prev,next'\n\t},\n\tweekends: true,\n\tweekNumbers: false,\n\n\tweekNumberTitle: 'W',\n\tweekNumberCalculation: 'local',\n\n\t//editable: false,\n\n\t//nowIndicator: false,\n\n\tscrollTime: '06:00:00',\n\n\t// event ajax\n\tlazyFetching: true,\n\tstartParam: 'start',\n\tendParam: 'end',\n\ttimezoneParam: 'timezone',\n\n\ttimezone: false,\n\n\t//allDayDefault: undefined,\n\n\t// locale\n\tisRTL: false,\n\tbuttonText: {\n\t\tprev: \"prev\",\n\t\tnext: \"next\",\n\t\tprevYear: \"prev year\",\n\t\tnextYear: \"next year\",\n\t\tyear: 'year', // TODO: locale files need to specify this\n\t\ttoday: 'today',\n\t\tmonth: 'month',\n\t\tweek: 'week',\n\t\tday: 'day'\n\t},\n\n\tbuttonIcons: {\n\t\tprev: 'left-single-arrow',\n\t\tnext: 'right-single-arrow',\n\t\tprevYear: 'left-double-arrow',\n\t\tnextYear: 'right-double-arrow'\n\t},\n\n\tallDayText: 'all-day',\n\n\t// jquery-ui theming\n\ttheme: false,\n\tthemeButtonIcons: {\n\t\tprev: 'circle-triangle-w',\n\t\tnext: 'circle-triangle-e',\n\t\tprevYear: 'seek-prev',\n\t\tnextYear: 'seek-next'\n\t},\n\n\t//eventResizableFromStart: false,\n\tdragOpacity: .75,\n\tdragRevertDuration: 500,\n\tdragScroll: true,\n\n\t//selectable: false,\n\tunselectAuto: true,\n\n\tdropAccept: '*',\n\n\teventOrder: 'title',\n\t//eventRenderWait: null,\n\n\teventLimit: false,\n\teventLimitText: 'more',\n\teventLimitClick: 'popover',\n\tdayPopoverFormat: 'LL',\n\n\thandleWindowResize: true,\n\twindowResizeDelay: 100, // milliseconds before an updateSize happens\n\n\tlongPressDelay: 1000\n\n};\n\n\nCalendar.englishDefaults = { // used by locale.js\n\tdayPopoverFormat: 'dddd, MMMM D'\n};\n\n\nCalendar.rtlDefaults = { // right-to-left defaults\n\theader: { // TODO: smarter solution (first/center/last ?)\n\t\tleft: 'next,prev today',\n\t\tcenter: '',\n\t\tright: 'title'\n\t},\n\tbuttonIcons: {\n\t\tprev: 'right-single-arrow',\n\t\tnext: 'left-single-arrow',\n\t\tprevYear: 'right-double-arrow',\n\t\tnextYear: 'left-double-arrow'\n\t},\n\tthemeButtonIcons: {\n\t\tprev: 'circle-triangle-e',\n\t\tnext: 'circle-triangle-w',\n\t\tnextYear: 'seek-prev',\n\t\tprevYear: 'seek-next'\n\t}\n};\n\n;;\n\nvar localeOptionHash = FC.locales = {}; // initialize and expose\n\n\n// TODO: document the structure and ordering of a FullCalendar locale file\n\n\n// Initialize jQuery UI datepicker translations while using some of the translations\n// Will set this as the default locales for datepicker.\nFC.datepickerLocale = function(localeCode, dpLocaleCode, dpOptions) {\n\n\t// get the FullCalendar internal option hash for this locale. create if necessary\n\tvar fcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {});\n\n\t// transfer some simple options from datepicker to fc\n\tfcOptions.isRTL = dpOptions.isRTL;\n\tfcOptions.weekNumberTitle = dpOptions.weekHeader;\n\n\t// compute some more complex options from datepicker\n\t$.each(dpComputableOptions, function(name, func) {\n\t\tfcOptions[name] = func(dpOptions);\n\t});\n\n\t// is jQuery UI Datepicker is on the page?\n\tif ($.datepicker) {\n\n\t\t// Register the locale data.\n\t\t// FullCalendar and MomentJS use locale codes like \"pt-br\" but Datepicker\n\t\t// does it like \"pt-BR\" or if it doesn't have the locale, maybe just \"pt\".\n\t\t// Make an alias so the locale can be referenced either way.\n\t\t$.datepicker.regional[dpLocaleCode] =\n\t\t\t$.datepicker.regional[localeCode] = // alias\n\t\t\t\tdpOptions;\n\n\t\t// Alias 'en' to the default locale data. Do this every time.\n\t\t$.datepicker.regional.en = $.datepicker.regional[''];\n\n\t\t// Set as Datepicker's global defaults.\n\t\t$.datepicker.setDefaults(dpOptions);\n\t}\n};\n\n\n// Sets FullCalendar-specific translations. Will set the locales as the global default.\nFC.locale = function(localeCode, newFcOptions) {\n\tvar fcOptions;\n\tvar momOptions;\n\n\t// get the FullCalendar internal option hash for this locale. create if necessary\n\tfcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {});\n\n\t// provided new options for this locales? merge them in\n\tif (newFcOptions) {\n\t\tfcOptions = localeOptionHash[localeCode] = mergeOptions([ fcOptions, newFcOptions ]);\n\t}\n\n\t// compute locale options that weren't defined.\n\t// always do this. newFcOptions can be undefined when initializing from i18n file,\n\t// so no way to tell if this is an initialization or a default-setting.\n\tmomOptions = getMomentLocaleData(localeCode); // will fall back to en\n\t$.each(momComputableOptions, function(name, func) {\n\t\tif (fcOptions[name] == null) {\n\t\t\tfcOptions[name] = func(momOptions, fcOptions);\n\t\t}\n\t});\n\n\t// set it as the default locale for FullCalendar\n\tCalendar.defaults.locale = localeCode;\n};\n\n\n// NOTE: can't guarantee any of these computations will run because not every locale has datepicker\n// configs, so make sure there are English fallbacks for these in the defaults file.\nvar dpComputableOptions = {\n\n\tbuttonText: function(dpOptions) {\n\t\treturn {\n\t\t\t// the translations sometimes wrongly contain HTML entities\n\t\t\tprev: stripHtmlEntities(dpOptions.prevText),\n\t\t\tnext: stripHtmlEntities(dpOptions.nextText),\n\t\t\ttoday: stripHtmlEntities(dpOptions.currentText)\n\t\t};\n\t},\n\n\t// Produces format strings like \"MMMM YYYY\" -> \"September 2014\"\n\tmonthYearFormat: function(dpOptions) {\n\t\treturn dpOptions.showMonthAfterYear ?\n\t\t\t'YYYY[' + dpOptions.yearSuffix + '] MMMM' :\n\t\t\t'MMMM YYYY[' + dpOptions.yearSuffix + ']';\n\t}\n\n};\n\nvar momComputableOptions = {\n\n\t// Produces format strings like \"ddd M/D\" -> \"Fri 9/15\"\n\tdayOfMonthFormat: function(momOptions, fcOptions) {\n\t\tvar format = momOptions.longDateFormat('l'); // for the format like \"M/D/YYYY\"\n\n\t\t// strip the year off the edge, as well as other misc non-whitespace chars\n\t\tformat = format.replace(/^Y+[^\\w\\s]*|[^\\w\\s]*Y+$/g, '');\n\n\t\tif (fcOptions.isRTL) {\n\t\t\tformat += ' ddd'; // for RTL, add day-of-week to end\n\t\t}\n\t\telse {\n\t\t\tformat = 'ddd ' + format; // for LTR, add day-of-week to beginning\n\t\t}\n\t\treturn format;\n\t},\n\n\t// Produces format strings like \"h:mma\" -> \"6:00pm\"\n\tmediumTimeFormat: function(momOptions) { // can't be called `timeFormat` because collides with option\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"h(:mm)a\" -> \"6pm\" / \"6:30pm\"\n\tsmallTimeFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(':mm', '(:mm)')\n\t\t\t.replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"h(:mm)t\" -> \"6p\" / \"6:30p\"\n\textraSmallTimeFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(':mm', '(:mm)')\n\t\t\t.replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\n\t\t\t.replace(/\\s*a$/i, 't'); // convert to AM/PM/am/pm to lowercase one-letter. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"ha\" / \"H\" -> \"6pm\" / \"18\"\n\thourFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(':mm', '')\n\t\t\t.replace(/(\\Wmm)$/, '') // like above, but for foreign locales\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"h:mm\" -> \"6:30\" (with no AM/PM)\n\tnoMeridiemTimeFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(/\\s*a$/i, ''); // remove trailing AM/PM\n\t}\n\n};\n\n\n// options that should be computed off live calendar options (considers override options)\n// TODO: best place for this? related to locale?\n// TODO: flipping text based on isRTL is a bad idea because the CSS `direction` might want to handle it\nvar instanceComputableOptions = {\n\n\t// Produces format strings for results like \"Mo 16\"\n\tsmallDayDateFormat: function(options) {\n\t\treturn options.isRTL ?\n\t\t\t'D dd' :\n\t\t\t'dd D';\n\t},\n\n\t// Produces format strings for results like \"Wk 5\"\n\tweekFormat: function(options) {\n\t\treturn options.isRTL ?\n\t\t\t'w[ ' + options.weekNumberTitle + ']' :\n\t\t\t'[' + options.weekNumberTitle + ' ]w';\n\t},\n\n\t// Produces format strings for results like \"Wk5\"\n\tsmallWeekFormat: function(options) {\n\t\treturn options.isRTL ?\n\t\t\t'w[' + options.weekNumberTitle + ']' :\n\t\t\t'[' + options.weekNumberTitle + ']w';\n\t}\n\n};\n\nfunction populateInstanceComputableOptions(options) {\n\t$.each(instanceComputableOptions, function(name, func) {\n\t\tif (options[name] == null) {\n\t\t\toptions[name] = func(options);\n\t\t}\n\t});\n}\n\n\n// Returns moment's internal locale data. If doesn't exist, returns English.\nfunction getMomentLocaleData(localeCode) {\n\treturn moment.localeData(localeCode) || moment.localeData('en');\n}\n\n\n// Initialize English by forcing computation of moment-derived options.\n// Also, sets it as the default.\nFC.locale('en', Calendar.englishDefaults);\n\n;;\n\nFC.sourceNormalizers = [];\nFC.sourceFetchers = [];\n\nvar ajaxDefaults = {\n\tdataType: 'json',\n\tcache: false\n};\n\nvar eventGUID = 1;\n\n\nfunction EventManager() { // assumed to be a calendar\n\tvar t = this;\n\n\n\t// exports\n\tt.requestEvents = requestEvents;\n\tt.reportEventChange = reportEventChange;\n\tt.isFetchNeeded = isFetchNeeded;\n\tt.fetchEvents = fetchEvents;\n\tt.fetchEventSources = fetchEventSources;\n\tt.refetchEvents = refetchEvents;\n\tt.refetchEventSources = refetchEventSources;\n\tt.getEventSources = getEventSources;\n\tt.getEventSourceById = getEventSourceById;\n\tt.addEventSource = addEventSource;\n\tt.removeEventSource = removeEventSource;\n\tt.removeEventSources = removeEventSources;\n\tt.updateEvent = updateEvent;\n\tt.updateEvents = updateEvents;\n\tt.renderEvent = renderEvent;\n\tt.renderEvents = renderEvents;\n\tt.removeEvents = removeEvents;\n\tt.clientEvents = clientEvents;\n\tt.mutateEvent = mutateEvent;\n\tt.normalizeEventDates = normalizeEventDates;\n\tt.normalizeEventTimes = normalizeEventTimes;\n\n\n\t// locals\n\tvar stickySource = { events: [] };\n\tvar sources = [ stickySource ];\n\tvar rangeStart, rangeEnd;\n\tvar pendingSourceCnt = 0; // outstanding fetch requests, max one per source\n\tvar cache = []; // holds events that have already been expanded\n\tvar prunedCache; // like cache, but only events that intersect with rangeStart/rangeEnd\n\n\n\t$.each(\n\t\t(t.options.events ? [ t.options.events ] : []).concat(t.options.eventSources || []),\n\t\tfunction(i, sourceInput) {\n\t\t\tvar source = buildEventSource(sourceInput);\n\t\t\tif (source) {\n\t\t\t\tsources.push(source);\n\t\t\t}\n\t\t}\n\t);\n\n\n\n\tfunction requestEvents(start, end) {\n\t\tif (!t.options.lazyFetching || isFetchNeeded(start, end)) {\n\t\t\treturn fetchEvents(start, end);\n\t\t}\n\t\telse {\n\t\t\treturn Promise.resolve(prunedCache);\n\t\t}\n\t}\n\n\n\tfunction reportEventChange() {\n\t\tprunedCache = filterEventsWithinRange(cache);\n\t\tt.trigger('eventsReset', prunedCache);\n\t}\n\n\n\tfunction filterEventsWithinRange(events) {\n\t\tvar filteredEvents = [];\n\t\tvar i, event;\n\n\t\tfor (i = 0; i < events.length; i++) {\n\t\t\tevent = events[i];\n\n\t\t\tif (\n\t\t\t\tevent.start.clone().stripZone() < rangeEnd &&\n\t\t\t\tt.getEventEnd(event).stripZone() > rangeStart\n\t\t\t) {\n\t\t\t\tfilteredEvents.push(event);\n\t\t\t}\n\t\t}\n\n\t\treturn filteredEvents;\n\t}\n\n\n\tt.getEventCache = function() {\n\t\treturn cache;\n\t};\n\n\n\tt.getPrunedEventCache = function() {\n\t\treturn prunedCache;\n\t};\n\n\n\n\t/* Fetching\n\t-----------------------------------------------------------------------------*/\n\n\n\t// start and end are assumed to be unzoned\n\tfunction isFetchNeeded(start, end) {\n\t\treturn !rangeStart || // nothing has been fetched yet?\n\t\t\tstart < rangeStart || end > rangeEnd; // is part of the new range outside of the old range?\n\t}\n\n\n\tfunction fetchEvents(start, end) {\n\t\trangeStart = start;\n\t\trangeEnd = end;\n\t\treturn refetchEvents();\n\t}\n\n\n\t// poorly named. fetches all sources with current `rangeStart` and `rangeEnd`.\n\tfunction refetchEvents() {\n\t\treturn fetchEventSources(sources, 'reset');\n\t}\n\n\n\t// poorly named. fetches a subset of event sources.\n\tfunction refetchEventSources(matchInputs) {\n\t\treturn fetchEventSources(getEventSourcesByMatchArray(matchInputs));\n\t}\n\n\n\t// expects an array of event source objects (the originals, not copies)\n\t// `specialFetchType` is an optimization parameter that affects purging of the event cache.\n\tfunction fetchEventSources(specificSources, specialFetchType) {\n\t\tvar i, source;\n\n\t\tif (specialFetchType === 'reset') {\n\t\t\tcache = [];\n\t\t}\n\t\telse if (specialFetchType !== 'add') {\n\t\t\tcache = excludeEventsBySources(cache, specificSources);\n\t\t}\n\n\t\tfor (i = 0; i < specificSources.length; i++) {\n\t\t\tsource = specificSources[i];\n\n\t\t\t// already-pending sources have already been accounted for in pendingSourceCnt\n\t\t\tif (source._status !== 'pending') {\n\t\t\t\tpendingSourceCnt++;\n\t\t\t}\n\n\t\t\tsource._fetchId = (source._fetchId || 0) + 1;\n\t\t\tsource._status = 'pending';\n\t\t}\n\n\t\tfor (i = 0; i < specificSources.length; i++) {\n\t\t\tsource = specificSources[i];\n\t\t\ttryFetchEventSource(source, source._fetchId);\n\t\t}\n\n\t\tif (pendingSourceCnt) {\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\tt.one('eventsReceived', resolve); // will send prunedCache\n\t\t\t});\n\t\t}\n\t\telse { // executed all synchronously, or no sources at all\n\t\t\treturn Promise.resolve(prunedCache);\n\t\t}\n\t}\n\n\n\t// fetches an event source and processes its result ONLY if it is still the current fetch.\n\t// caller is responsible for incrementing pendingSourceCnt first.\n\tfunction tryFetchEventSource(source, fetchId) {\n\t\t_fetchEventSource(source, function(eventInputs) {\n\t\t\tvar isArraySource = $.isArray(source.events);\n\t\t\tvar i, eventInput;\n\t\t\tvar abstractEvent;\n\n\t\t\tif (\n\t\t\t\t// is this the source's most recent fetch?\n\t\t\t\t// if not, rely on an upcoming fetch of this source to decrement pendingSourceCnt\n\t\t\t\tfetchId === source._fetchId &&\n\t\t\t\t// event source no longer valid?\n\t\t\t\tsource._status !== 'rejected'\n\t\t\t) {\n\t\t\t\tsource._status = 'resolved';\n\n\t\t\t\tif (eventInputs) {\n\t\t\t\t\tfor (i = 0; i < eventInputs.length; i++) {\n\t\t\t\t\t\teventInput = eventInputs[i];\n\n\t\t\t\t\t\tif (isArraySource) { // array sources have already been convert to Event Objects\n\t\t\t\t\t\t\tabstractEvent = eventInput;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tabstractEvent = buildEventFromInput(eventInput, source);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (abstractEvent) { // not false (an invalid event)\n\t\t\t\t\t\t\tcache.push.apply( // append\n\t\t\t\t\t\t\t\tcache,\n\t\t\t\t\t\t\t\texpandEvent(abstractEvent) // add individual expanded events to the cache\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdecrementPendingSourceCnt();\n\t\t\t}\n\t\t});\n\t}\n\n\n\tfunction rejectEventSource(source) {\n\t\tvar wasPending = source._status === 'pending';\n\n\t\tsource._status = 'rejected';\n\n\t\tif (wasPending) {\n\t\t\tdecrementPendingSourceCnt();\n\t\t}\n\t}\n\n\n\tfunction decrementPendingSourceCnt() {\n\t\tpendingSourceCnt--;\n\t\tif (!pendingSourceCnt) {\n\t\t\treportEventChange(cache); // updates prunedCache\n\t\t\tt.trigger('eventsReceived', prunedCache);\n\t\t}\n\t}\n\n\n\tfunction _fetchEventSource(source, callback) {\n\t\tvar i;\n\t\tvar fetchers = FC.sourceFetchers;\n\t\tvar res;\n\n\t\tfor (i=0; i<fetchers.length; i++) {\n\t\t\tres = fetchers[i].call(\n\t\t\t\tt, // this, the Calendar object\n\t\t\t\tsource,\n\t\t\t\trangeStart.clone(),\n\t\t\t\trangeEnd.clone(),\n\t\t\t\tt.options.timezone,\n\t\t\t\tcallback\n\t\t\t);\n\n\t\t\tif (res === true) {\n\t\t\t\t// the fetcher is in charge. made its own async request\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (typeof res == 'object') {\n\t\t\t\t// the fetcher returned a new source. process it\n\t\t\t\t_fetchEventSource(res, callback);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar events = source.events;\n\t\tif (events) {\n\t\t\tif ($.isFunction(events)) {\n\t\t\t\tt.pushLoading();\n\t\t\t\tevents.call(\n\t\t\t\t\tt, // this, the Calendar object\n\t\t\t\t\trangeStart.clone(),\n\t\t\t\t\trangeEnd.clone(),\n\t\t\t\t\tt.options.timezone,\n\t\t\t\t\tfunction(events) {\n\t\t\t\t\t\tcallback(events);\n\t\t\t\t\t\tt.popLoading();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if ($.isArray(events)) {\n\t\t\t\tcallback(events);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}else{\n\t\t\tvar url = source.url;\n\t\t\tif (url) {\n\t\t\t\tvar success = source.success;\n\t\t\t\tvar error = source.error;\n\t\t\t\tvar complete = source.complete;\n\n\t\t\t\t// retrieve any outbound GET/POST $.ajax data from the options\n\t\t\t\tvar customData;\n\t\t\t\tif ($.isFunction(source.data)) {\n\t\t\t\t\t// supplied as a function that returns a key/value object\n\t\t\t\t\tcustomData = source.data();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// supplied as a straight key/value object\n\t\t\t\t\tcustomData = source.data;\n\t\t\t\t}\n\n\t\t\t\t// use a copy of the custom data so we can modify the parameters\n\t\t\t\t// and not affect the passed-in object.\n\t\t\t\tvar data = $.extend({}, customData || {});\n\n\t\t\t\tvar startParam = firstDefined(source.startParam, t.options.startParam);\n\t\t\t\tvar endParam = firstDefined(source.endParam, t.options.endParam);\n\t\t\t\tvar timezoneParam = firstDefined(source.timezoneParam, t.options.timezoneParam);\n\n\t\t\t\tif (startParam) {\n\t\t\t\t\tdata[startParam] = rangeStart.format();\n\t\t\t\t}\n\t\t\t\tif (endParam) {\n\t\t\t\t\tdata[endParam] = rangeEnd.format();\n\t\t\t\t}\n\t\t\t\tif (t.options.timezone && t.options.timezone != 'local') {\n\t\t\t\t\tdata[timezoneParam] = t.options.timezone;\n\t\t\t\t}\n\n\t\t\t\tt.pushLoading();\n\t\t\t\t$.ajax($.extend({}, ajaxDefaults, source, {\n\t\t\t\t\tdata: data,\n\t\t\t\t\tsuccess: function(events) {\n\t\t\t\t\t\tevents = events || [];\n\t\t\t\t\t\tvar res = applyAll(success, this, arguments);\n\t\t\t\t\t\tif ($.isArray(res)) {\n\t\t\t\t\t\t\tevents = res;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcallback(events);\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\tapplyAll(error, this, arguments);\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tapplyAll(complete, this, arguments);\n\t\t\t\t\t\tt.popLoading();\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}else{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\t/* Sources\n\t-----------------------------------------------------------------------------*/\n\n\n\tfunction addEventSource(sourceInput) {\n\t\tvar source = buildEventSource(sourceInput);\n\t\tif (source) {\n\t\t\tsources.push(source);\n\t\t\tfetchEventSources([ source ], 'add'); // will eventually call reportEventChange\n\t\t}\n\t}\n\n\n\tfunction buildEventSource(sourceInput) { // will return undefined if invalid source\n\t\tvar normalizers = FC.sourceNormalizers;\n\t\tvar source;\n\t\tvar i;\n\n\t\tif ($.isFunction(sourceInput) || $.isArray(sourceInput)) {\n\t\t\tsource = { events: sourceInput };\n\t\t}\n\t\telse if (typeof sourceInput === 'string') {\n\t\t\tsource = { url: sourceInput };\n\t\t}\n\t\telse if (typeof sourceInput === 'object') {\n\t\t\tsource = $.extend({}, sourceInput); // shallow copy\n\t\t}\n\n\t\tif (source) {\n\n\t\t\t// TODO: repeat code, same code for event classNames\n\t\t\tif (source.className) {\n\t\t\t\tif (typeof source.className === 'string') {\n\t\t\t\t\tsource.className = source.className.split(/\\s+/);\n\t\t\t\t}\n\t\t\t\t// otherwise, assumed to be an array\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsource.className = [];\n\t\t\t}\n\n\t\t\t// for array sources, we convert to standard Event Objects up front\n\t\t\tif ($.isArray(source.events)) {\n\t\t\t\tsource.origArray = source.events; // for removeEventSource\n\t\t\t\tsource.events = $.map(source.events, function(eventInput) {\n\t\t\t\t\treturn buildEventFromInput(eventInput, source);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (i=0; i<normalizers.length; i++) {\n\t\t\t\tnormalizers[i].call(t, source);\n\t\t\t}\n\n\t\t\treturn source;\n\t\t}\n\t}\n\n\n\tfunction removeEventSource(matchInput) {\n\t\tremoveSpecificEventSources(\n\t\t\tgetEventSourcesByMatch(matchInput)\n\t\t);\n\t}\n\n\n\t// if called with no arguments, removes all.\n\tfunction removeEventSources(matchInputs) {\n\t\tif (matchInputs == null) {\n\t\t\tremoveSpecificEventSources(sources, true); // isAll=true\n\t\t}\n\t\telse {\n\t\t\tremoveSpecificEventSources(\n\t\t\t\tgetEventSourcesByMatchArray(matchInputs)\n\t\t\t);\n\t\t}\n\t}\n\n\n\tfunction removeSpecificEventSources(targetSources, isAll) {\n\t\tvar i;\n\n\t\t// cancel pending requests\n\t\tfor (i = 0; i < targetSources.length; i++) {\n\t\t\trejectEventSource(targetSources[i]);\n\t\t}\n\n\t\tif (isAll) { // an optimization\n\t\t\tsources = [];\n\t\t\tcache = [];\n\t\t}\n\t\telse {\n\t\t\t// remove from persisted source list\n\t\t\tsources = $.grep(sources, function(source) {\n\t\t\t\tfor (i = 0; i < targetSources.length; i++) {\n\t\t\t\t\tif (source === targetSources[i]) {\n\t\t\t\t\t\treturn false; // exclude\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true; // include\n\t\t\t});\n\n\t\t\tcache = excludeEventsBySources(cache, targetSources);\n\t\t}\n\n\t\treportEventChange();\n\t}\n\n\n\tfunction getEventSources() {\n\t\treturn sources.slice(1); // returns a shallow copy of sources with stickySource removed\n\t}\n\n\n\tfunction getEventSourceById(id) {\n\t\treturn $.grep(sources, function(source) {\n\t\t\treturn source.id && source.id === id;\n\t\t})[0];\n\t}\n\n\n\t// like getEventSourcesByMatch, but accepts multple match criteria (like multiple IDs)\n\tfunction getEventSourcesByMatchArray(matchInputs) {\n\n\t\t// coerce into an array\n\t\tif (!matchInputs) {\n\t\t\tmatchInputs = [];\n\t\t}\n\t\telse if (!$.isArray(matchInputs)) {\n\t\t\tmatchInputs = [ matchInputs ];\n\t\t}\n\n\t\tvar matchingSources = [];\n\t\tvar i;\n\n\t\t// resolve raw inputs to real event source objects\n\t\tfor (i = 0; i < matchInputs.length; i++) {\n\t\t\tmatchingSources.push.apply( // append\n\t\t\t\tmatchingSources,\n\t\t\t\tgetEventSourcesByMatch(matchInputs[i])\n\t\t\t);\n\t\t}\n\n\t\treturn matchingSources;\n\t}\n\n\n\t// matchInput can either by a real event source object, an ID, or the function/URL for the source.\n\t// returns an array of matching source objects.\n\tfunction getEventSourcesByMatch(matchInput) {\n\t\tvar i, source;\n\n\t\t// given an proper event source object\n\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\tsource = sources[i];\n\t\t\tif (source === matchInput) {\n\t\t\t\treturn [ source ];\n\t\t\t}\n\t\t}\n\n\t\t// an ID match\n\t\tsource = getEventSourceById(matchInput);\n\t\tif (source) {\n\t\t\treturn [ source ];\n\t\t}\n\n\t\treturn $.grep(sources, function(source) {\n\t\t\treturn isSourcesEquivalent(matchInput, source);\n\t\t});\n\t}\n\n\n\tfunction isSourcesEquivalent(source1, source2) {\n\t\treturn source1 && source2 && getSourcePrimitive(source1) == getSourcePrimitive(source2);\n\t}\n\n\n\tfunction getSourcePrimitive(source) {\n\t\treturn (\n\t\t\t(typeof source === 'object') ? // a normalized event source?\n\t\t\t\t(source.origArray || source.googleCalendarId || source.url || source.events) : // get the primitive\n\t\t\t\tnull\n\t\t) ||\n\t\tsource; // the given argument *is* the primitive\n\t}\n\n\n\t// util\n\t// returns a filtered array without events that are part of any of the given sources\n\tfunction excludeEventsBySources(specificEvents, specificSources) {\n\t\treturn $.grep(specificEvents, function(event) {\n\t\t\tfor (var i = 0; i < specificSources.length; i++) {\n\t\t\t\tif (event.source === specificSources[i]) {\n\t\t\t\t\treturn false; // exclude\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true; // keep\n\t\t});\n\t}\n\n\n\n\t/* Manipulation\n\t-----------------------------------------------------------------------------*/\n\n\n\t// Only ever called from the externally-facing API\n\tfunction updateEvent(event) {\n\t\tupdateEvents([ event ]);\n\t}\n\n\n\t// Only ever called from the externally-facing API\n\tfunction updateEvents(events) {\n\t\tvar i, event;\n\n\t\tfor (i = 0; i < events.length; i++) {\n\t\t\tevent = events[i];\n\n\t\t\t// massage start/end values, even if date string values\n\t\t\tevent.start = t.moment(event.start);\n\t\t\tif (event.end) {\n\t\t\t\tevent.end = t.moment(event.end);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tevent.end = null;\n\t\t\t}\n\n\t\t\tmutateEvent(event, getMiscEventProps(event)); // will handle start/end/allDay normalization\n\t\t}\n\n\t\treportEventChange(); // reports event modifications (so we can redraw)\n\t}\n\n\n\t// Returns a hash of misc event properties that should be copied over to related events.\n\tfunction getMiscEventProps(event) {\n\t\tvar props = {};\n\n\t\t$.each(event, function(name, val) {\n\t\t\tif (isMiscEventPropName(name)) {\n\t\t\t\tif (val !== undefined && isAtomic(val)) { // a defined non-object\n\t\t\t\t\tprops[name] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn props;\n\t}\n\n\t// non-date-related, non-id-related, non-secret\n\tfunction isMiscEventPropName(name) {\n\t\treturn !/^_|^(id|allDay|start|end)$/.test(name);\n\t}\n\n\n\t// returns the expanded events that were created\n\tfunction renderEvent(eventInput, stick) {\n\t\treturn renderEvents([ eventInput ], stick);\n\t}\n\n\n\t// returns the expanded events that were created\n\tfunction renderEvents(eventInputs, stick) {\n\t\tvar renderedEvents = [];\n\t\tvar renderableEvents;\n\t\tvar abstractEvent;\n\t\tvar i, j, event;\n\n\t\tfor (i = 0; i < eventInputs.length; i++) {\n\t\t\tabstractEvent = buildEventFromInput(eventInputs[i]);\n\n\t\t\tif (abstractEvent) { // not false (a valid input)\n\t\t\t\trenderableEvents = expandEvent(abstractEvent);\n\n\t\t\t\tfor (j = 0; j < renderableEvents.length; j++) {\n\t\t\t\t\tevent = renderableEvents[j];\n\n\t\t\t\t\tif (!event.source) {\n\t\t\t\t\t\tif (stick) {\n\t\t\t\t\t\t\tstickySource.events.push(event);\n\t\t\t\t\t\t\tevent.source = stickySource;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcache.push(event);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trenderedEvents = renderedEvents.concat(renderableEvents);\n\t\t\t}\n\t\t}\n\n\t\tif (renderedEvents.length) { // any new events rendered?\n\t\t\treportEventChange();\n\t\t}\n\n\t\treturn renderedEvents;\n\t}\n\n\n\tfunction removeEvents(filter) {\n\t\tvar eventID;\n\t\tvar i;\n\n\t\tif (filter == null) { // null or undefined. remove all events\n\t\t\tfilter = function() { return true; }; // will always match\n\t\t}\n\t\telse if (!$.isFunction(filter)) { // an event ID\n\t\t\teventID = filter + '';\n\t\t\tfilter = function(event) {\n\t\t\t\treturn event._id == eventID;\n\t\t\t};\n\t\t}\n\n\t\t// Purge event(s) from our local cache\n\t\tcache = $.grep(cache, filter, true); // inverse=true\n\n\t\t// Remove events from array sources.\n\t\t// This works because they have been converted to official Event Objects up front.\n\t\t// (and as a result, event._id has been calculated).\n\t\tfor (i=0; i<sources.length; i++) {\n\t\t\tif ($.isArray(sources[i].events)) {\n\t\t\t\tsources[i].events = $.grep(sources[i].events, filter, true);\n\t\t\t}\n\t\t}\n\n\t\treportEventChange();\n\t}\n\n\n\tfunction clientEvents(filter) {\n\t\tif ($.isFunction(filter)) {\n\t\t\treturn $.grep(cache, filter);\n\t\t}\n\t\telse if (filter != null) { // not null, not undefined. an event ID\n\t\t\tfilter += '';\n\t\t\treturn $.grep(cache, function(e) {\n\t\t\t\treturn e._id == filter;\n\t\t\t});\n\t\t}\n\t\treturn cache; // else, return all\n\t}\n\n\n\t// Makes sure all array event sources have their internal event objects\n\t// converted over to the Calendar's current timezone.\n\tt.rezoneArrayEventSources = function() {\n\t\tvar i;\n\t\tvar events;\n\t\tvar j;\n\n\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\tevents = sources[i].events;\n\t\t\tif ($.isArray(events)) {\n\n\t\t\t\tfor (j = 0; j < events.length; j++) {\n\t\t\t\t\trezoneEventDates(events[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction rezoneEventDates(event) {\n\t\tevent.start = t.moment(event.start);\n\t\tif (event.end) {\n\t\t\tevent.end = t.moment(event.end);\n\t\t}\n\t\tbackupEventDates(event);\n\t}\n\n\n\t/* Event Normalization\n\t-----------------------------------------------------------------------------*/\n\n\n\t// Given a raw object with key/value properties, returns an \"abstract\" Event object.\n\t// An \"abstract\" event is an event that, if recurring, will not have been expanded yet.\n\t// Will return `false` when input is invalid.\n\t// `source` is optional\n\tfunction buildEventFromInput(input, source) {\n\t\tvar out = {};\n\t\tvar start, end;\n\t\tvar allDay;\n\n\t\tif (t.options.eventDataTransform) {\n\t\t\tinput = t.options.eventDataTransform(input);\n\t\t}\n\t\tif (source && source.eventDataTransform) {\n\t\t\tinput = source.eventDataTransform(input);\n\t\t}\n\n\t\t// Copy all properties over to the resulting object.\n\t\t// The special-case properties will be copied over afterwards.\n\t\t$.extend(out, input);\n\n\t\tif (source) {\n\t\t\tout.source = source;\n\t\t}\n\n\t\tout._id = input._id || (input.id === undefined ? '_fc' + eventGUID++ : input.id + '');\n\n\t\tif (input.className) {\n\t\t\tif (typeof input.className == 'string') {\n\t\t\t\tout.className = input.className.split(/\\s+/);\n\t\t\t}\n\t\t\telse { // assumed to be an array\n\t\t\t\tout.className = input.className;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tout.className = [];\n\t\t}\n\n\t\tstart = input.start || input.date; // \"date\" is an alias for \"start\"\n\t\tend = input.end;\n\n\t\t// parse as a time (Duration) if applicable\n\t\tif (isTimeString(start)) {\n\t\t\tstart = moment.duration(start);\n\t\t}\n\t\tif (isTimeString(end)) {\n\t\t\tend = moment.duration(end);\n\t\t}\n\n\t\tif (input.dow || moment.isDuration(start) || moment.isDuration(end)) {\n\n\t\t\t// the event is \"abstract\" (recurring) so don't calculate exact start/end dates just yet\n\t\t\tout.start = start ? moment.duration(start) : null; // will be a Duration or null\n\t\t\tout.end = end ? moment.duration(end) : null; // will be a Duration or null\n\t\t\tout._recurring = true; // our internal marker\n\t\t}\n\t\telse {\n\n\t\t\tif (start) {\n\t\t\t\tstart = t.moment(start);\n\t\t\t\tif (!start.isValid()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (end) {\n\t\t\t\tend = t.moment(end);\n\t\t\t\tif (!end.isValid()) {\n\t\t\t\t\tend = null; // let defaults take over\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tallDay = input.allDay;\n\t\t\tif (allDay === undefined) { // still undefined? fallback to default\n\t\t\t\tallDay = firstDefined(\n\t\t\t\t\tsource ? source.allDayDefault : undefined,\n\t\t\t\t\tt.options.allDayDefault\n\t\t\t\t);\n\t\t\t\t// still undefined? normalizeEventDates will calculate it\n\t\t\t}\n\n\t\t\tassignDatesToEvent(start, end, allDay, out);\n\t\t}\n\n\t\tt.normalizeEvent(out); // hook for external use. a prototype method\n\n\t\treturn out;\n\t}\n\tt.buildEventFromInput = buildEventFromInput;\n\n\n\t// Normalizes and assigns the given dates to the given partially-formed event object.\n\t// NOTE: mutates the given start/end moments. does not make a copy.\n\tfunction assignDatesToEvent(start, end, allDay, event) {\n\t\tevent.start = start;\n\t\tevent.end = end;\n\t\tevent.allDay = allDay;\n\t\tnormalizeEventDates(event);\n\t\tbackupEventDates(event);\n\t}\n\n\n\t// Ensures proper values for allDay/start/end. Accepts an Event object, or a plain object with event-ish properties.\n\t// NOTE: Will modify the given object.\n\tfunction normalizeEventDates(eventProps) {\n\n\t\tnormalizeEventTimes(eventProps);\n\n\t\tif (eventProps.end && !eventProps.end.isAfter(eventProps.start)) {\n\t\t\teventProps.end = null;\n\t\t}\n\n\t\tif (!eventProps.end) {\n\t\t\tif (t.options.forceEventDuration) {\n\t\t\t\teventProps.end = t.getDefaultEventEnd(eventProps.allDay, eventProps.start);\n\t\t\t}\n\t\t\telse {\n\t\t\t\teventProps.end = null;\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// Ensures the allDay property exists and the timeliness of the start/end dates are consistent\n\tfunction normalizeEventTimes(eventProps) {\n\t\tif (eventProps.allDay == null) {\n\t\t\teventProps.allDay = !(eventProps.start.hasTime() || (eventProps.end && eventProps.end.hasTime()));\n\t\t}\n\n\t\tif (eventProps.allDay) {\n\t\t\teventProps.start.stripTime();\n\t\t\tif (eventProps.end) {\n\t\t\t\t// TODO: consider nextDayThreshold here? If so, will require a lot of testing and adjustment\n\t\t\t\teventProps.end.stripTime();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (!eventProps.start.hasTime()) {\n\t\t\t\teventProps.start = t.applyTimezone(eventProps.start.time(0)); // will assign a 00:00 time\n\t\t\t}\n\t\t\tif (eventProps.end && !eventProps.end.hasTime()) {\n\t\t\t\teventProps.end = t.applyTimezone(eventProps.end.time(0)); // will assign a 00:00 time\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// If the given event is a recurring event, break it down into an array of individual instances.\n\t// If not a recurring event, return an array with the single original event.\n\t// If given a falsy input (probably because of a failed buildEventFromInput call), returns an empty array.\n\t// HACK: can override the recurring window by providing custom rangeStart/rangeEnd (for businessHours).\n\tfunction expandEvent(abstractEvent, _rangeStart, _rangeEnd) {\n\t\tvar events = [];\n\t\tvar dowHash;\n\t\tvar dow;\n\t\tvar i;\n\t\tvar date;\n\t\tvar startTime, endTime;\n\t\tvar start, end;\n\t\tvar event;\n\n\t\t_rangeStart = _rangeStart || rangeStart;\n\t\t_rangeEnd = _rangeEnd || rangeEnd;\n\n\t\tif (abstractEvent) {\n\t\t\tif (abstractEvent._recurring) {\n\n\t\t\t\t// make a boolean hash as to whether the event occurs on each day-of-week\n\t\t\t\tif ((dow = abstractEvent.dow)) {\n\t\t\t\t\tdowHash = {};\n\t\t\t\t\tfor (i = 0; i < dow.length; i++) {\n\t\t\t\t\t\tdowHash[dow[i]] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// iterate through every day in the current range\n\t\t\t\tdate = _rangeStart.clone().stripTime(); // holds the date of the current day\n\t\t\t\twhile (date.isBefore(_rangeEnd)) {\n\n\t\t\t\t\tif (!dowHash || dowHash[date.day()]) { // if everyday, or this particular day-of-week\n\n\t\t\t\t\t\tstartTime = abstractEvent.start; // the stored start and end properties are times (Durations)\n\t\t\t\t\t\tendTime = abstractEvent.end; // \"\n\t\t\t\t\t\tstart = date.clone();\n\t\t\t\t\t\tend = null;\n\n\t\t\t\t\t\tif (startTime) {\n\t\t\t\t\t\t\tstart = start.time(startTime);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (endTime) {\n\t\t\t\t\t\t\tend = date.clone().time(endTime);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevent = $.extend({}, abstractEvent); // make a copy of the original\n\t\t\t\t\t\tassignDatesToEvent(\n\t\t\t\t\t\t\tstart, end,\n\t\t\t\t\t\t\t!startTime && !endTime, // allDay?\n\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t);\n\t\t\t\t\t\tevents.push(event);\n\t\t\t\t\t}\n\n\t\t\t\t\tdate.add(1, 'days');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tevents.push(abstractEvent); // return the original event. will be a one-item array\n\t\t\t}\n\t\t}\n\n\t\treturn events;\n\t}\n\tt.expandEvent = expandEvent;\n\n\n\n\t/* Event Modification Math\n\t-----------------------------------------------------------------------------------------*/\n\n\n\t// Modifies an event and all related events by applying the given properties.\n\t// Special date-diffing logic is used for manipulation of dates.\n\t// If `props` does not contain start/end dates, the updated values are assumed to be the event's current start/end.\n\t// All date comparisons are done against the event's pristine _start and _end dates.\n\t// Returns an object with delta information and a function to undo all operations.\n\t// For making computations in a granularity greater than day/time, specify largeUnit.\n\t// NOTE: The given `newProps` might be mutated for normalization purposes.\n\tfunction mutateEvent(event, newProps, largeUnit) {\n\t\tvar miscProps = {};\n\t\tvar oldProps;\n\t\tvar clearEnd;\n\t\tvar startDelta;\n\t\tvar endDelta;\n\t\tvar durationDelta;\n\t\tvar undoFunc;\n\n\t\t// diffs the dates in the appropriate way, returning a duration\n\t\tfunction diffDates(date1, date0) { // date1 - date0\n\t\t\tif (largeUnit) {\n\t\t\t\treturn diffByUnit(date1, date0, largeUnit);\n\t\t\t}\n\t\t\telse if (newProps.allDay) {\n\t\t\t\treturn diffDay(date1, date0);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn diffDayTime(date1, date0);\n\t\t\t}\n\t\t}\n\n\t\tnewProps = newProps || {};\n\n\t\t// normalize new date-related properties\n\t\tif (!newProps.start) {\n\t\t\tnewProps.start = event.start.clone();\n\t\t}\n\t\tif (newProps.end === undefined) {\n\t\t\tnewProps.end = event.end ? event.end.clone() : null;\n\t\t}\n\t\tif (newProps.allDay == null) { // is null or undefined?\n\t\t\tnewProps.allDay = event.allDay;\n\t\t}\n\t\tnormalizeEventDates(newProps);\n\n\t\t// create normalized versions of the original props to compare against\n\t\t// need a real end value, for diffing\n\t\toldProps = {\n\t\t\tstart: event._start.clone(),\n\t\t\tend: event._end ? event._end.clone() : t.getDefaultEventEnd(event._allDay, event._start),\n\t\t\tallDay: newProps.allDay // normalize the dates in the same regard as the new properties\n\t\t};\n\t\tnormalizeEventDates(oldProps);\n\n\t\t// need to clear the end date if explicitly changed to null\n\t\tclearEnd = event._end !== null && newProps.end === null;\n\n\t\t// compute the delta for moving the start date\n\t\tstartDelta = diffDates(newProps.start, oldProps.start);\n\n\t\t// compute the delta for moving the end date\n\t\tif (newProps.end) {\n\t\t\tendDelta = diffDates(newProps.end, oldProps.end);\n\t\t\tdurationDelta = endDelta.subtract(startDelta);\n\t\t}\n\t\telse {\n\t\t\tdurationDelta = null;\n\t\t}\n\n\t\t// gather all non-date-related properties\n\t\t$.each(newProps, function(name, val) {\n\t\t\tif (isMiscEventPropName(name)) {\n\t\t\t\tif (val !== undefined) {\n\t\t\t\t\tmiscProps[name] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// apply the operations to the event and all related events\n\t\tundoFunc = mutateEvents(\n\t\t\tclientEvents(event._id), // get events with this ID\n\t\t\tclearEnd,\n\t\t\tnewProps.allDay,\n\t\t\tstartDelta,\n\t\t\tdurationDelta,\n\t\t\tmiscProps\n\t\t);\n\n\t\treturn {\n\t\t\tdateDelta: startDelta,\n\t\t\tdurationDelta: durationDelta,\n\t\t\tundo: undoFunc\n\t\t};\n\t}\n\n\n\t// Modifies an array of events in the following ways (operations are in order):\n\t// - clear the event's `end`\n\t// - convert the event to allDay\n\t// - add `dateDelta` to the start and end\n\t// - add `durationDelta` to the event's duration\n\t// - assign `miscProps` to the event\n\t//\n\t// Returns a function that can be called to undo all the operations.\n\t//\n\t// TODO: don't use so many closures. possible memory issues when lots of events with same ID.\n\t//\n\tfunction mutateEvents(events, clearEnd, allDay, dateDelta, durationDelta, miscProps) {\n\t\tvar isAmbigTimezone = t.getIsAmbigTimezone();\n\t\tvar undoFunctions = [];\n\n\t\t// normalize zero-length deltas to be null\n\t\tif (dateDelta && !dateDelta.valueOf()) { dateDelta = null; }\n\t\tif (durationDelta && !durationDelta.valueOf()) { durationDelta = null; }\n\n\t\t$.each(events, function(i, event) {\n\t\t\tvar oldProps;\n\t\t\tvar newProps;\n\n\t\t\t// build an object holding all the old values, both date-related and misc.\n\t\t\t// for the undo function.\n\t\t\toldProps = {\n\t\t\t\tstart: event.start.clone(),\n\t\t\t\tend: event.end ? event.end.clone() : null,\n\t\t\t\tallDay: event.allDay\n\t\t\t};\n\t\t\t$.each(miscProps, function(name) {\n\t\t\t\toldProps[name] = event[name];\n\t\t\t});\n\n\t\t\t// new date-related properties. work off the original date snapshot.\n\t\t\t// ok to use references because they will be thrown away when backupEventDates is called.\n\t\t\tnewProps = {\n\t\t\t\tstart: event._start,\n\t\t\t\tend: event._end,\n\t\t\t\tallDay: allDay // normalize the dates in the same regard as the new properties\n\t\t\t};\n\t\t\tnormalizeEventDates(newProps); // massages start/end/allDay\n\n\t\t\t// strip or ensure the end date\n\t\t\tif (clearEnd) {\n\t\t\t\tnewProps.end = null;\n\t\t\t}\n\t\t\telse if (durationDelta && !newProps.end) { // the duration translation requires an end date\n\t\t\t\tnewProps.end = t.getDefaultEventEnd(newProps.allDay, newProps.start);\n\t\t\t}\n\n\t\t\tif (dateDelta) {\n\t\t\t\tnewProps.start.add(dateDelta);\n\t\t\t\tif (newProps.end) {\n\t\t\t\t\tnewProps.end.add(dateDelta);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (durationDelta) {\n\t\t\t\tnewProps.end.add(durationDelta); // end already ensured above\n\t\t\t}\n\n\t\t\t// if the dates have changed, and we know it is impossible to recompute the\n\t\t\t// timezone offsets, strip the zone.\n\t\t\tif (\n\t\t\t\tisAmbigTimezone &&\n\t\t\t\t!newProps.allDay &&\n\t\t\t\t(dateDelta || durationDelta)\n\t\t\t) {\n\t\t\t\tnewProps.start.stripZone();\n\t\t\t\tif (newProps.end) {\n\t\t\t\t\tnewProps.end.stripZone();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.extend(event, miscProps, newProps); // copy over misc props, then date-related props\n\t\t\tbackupEventDates(event); // regenerate internal _start/_end/_allDay\n\n\t\t\tundoFunctions.push(function() {\n\t\t\t\t$.extend(event, oldProps);\n\t\t\t\tbackupEventDates(event); // regenerate internal _start/_end/_allDay\n\t\t\t});\n\t\t});\n\n\t\treturn function() {\n\t\t\tfor (var i = 0; i < undoFunctions.length; i++) {\n\t\t\t\tundoFunctions[i]();\n\t\t\t}\n\t\t};\n\t}\n\n}\n\n\n// hook for external libs to manipulate event properties upon creation.\n// should manipulate the event in-place.\nCalendar.prototype.normalizeEvent = function(event) {\n};\n\n\n// Does the given span (start, end, and other location information)\n// fully contain the other?\nCalendar.prototype.spanContainsSpan = function(outerSpan, innerSpan) {\n\tvar eventStart = outerSpan.start.clone().stripZone();\n\tvar eventEnd = this.getEventEnd(outerSpan).stripZone();\n\n\treturn innerSpan.start >= eventStart && innerSpan.end <= eventEnd;\n};\n\n\n// Returns a list of events that the given event should be compared against when being considered for a move to\n// the specified span. Attached to the Calendar's prototype because EventManager is a mixin for a Calendar.\nCalendar.prototype.getPeerEvents = function(span, event) {\n\tvar cache = this.getEventCache();\n\tvar peerEvents = [];\n\tvar i, otherEvent;\n\n\tfor (i = 0; i < cache.length; i++) {\n\t\totherEvent = cache[i];\n\t\tif (\n\t\t\t!event ||\n\t\t\tevent._id !== otherEvent._id // don't compare the event to itself or other related [repeating] events\n\t\t) {\n\t\t\tpeerEvents.push(otherEvent);\n\t\t}\n\t}\n\n\treturn peerEvents;\n};\n\n\n// updates the \"backup\" properties, which are preserved in order to compute diffs later on.\nfunction backupEventDates(event) {\n\tevent._allDay = event.allDay;\n\tevent._start = event.start.clone();\n\tevent._end = event.end ? event.end.clone() : null;\n}\n\n\n/* Overlapping / Constraining\n-----------------------------------------------------------------------------------------*/\n\n\n// Determines if the given event can be relocated to the given span (unzoned start/end with other misc data)\nCalendar.prototype.isEventSpanAllowed = function(span, event) {\n\tvar source = event.source || {};\n\n\tvar constraint = firstDefined(\n\t\tevent.constraint,\n\t\tsource.constraint,\n\t\tthis.options.eventConstraint\n\t);\n\n\tvar overlap = firstDefined(\n\t\tevent.overlap,\n\t\tsource.overlap,\n\t\tthis.options.eventOverlap\n\t);\n\n\treturn this.isSpanAllowed(span, constraint, overlap, event) &&\n\t\t(!this.options.eventAllow || this.options.eventAllow(span, event) !== false);\n};\n\n\n// Determines if an external event can be relocated to the given span (unzoned start/end with other misc data)\nCalendar.prototype.isExternalSpanAllowed = function(eventSpan, eventLocation, eventProps) {\n\tvar eventInput;\n\tvar event;\n\n\t// note: very similar logic is in View's reportExternalDrop\n\tif (eventProps) {\n\t\teventInput = $.extend({}, eventProps, eventLocation);\n\t\tevent = this.expandEvent(\n\t\t\tthis.buildEventFromInput(eventInput)\n\t\t)[0];\n\t}\n\n\tif (event) {\n\t\treturn this.isEventSpanAllowed(eventSpan, event);\n\t}\n\telse { // treat it as a selection\n\n\t\treturn this.isSelectionSpanAllowed(eventSpan);\n\t}\n};\n\n\n// Determines the given span (unzoned start/end with other misc data) can be selected.\nCalendar.prototype.isSelectionSpanAllowed = function(span) {\n\treturn this.isSpanAllowed(span, this.options.selectConstraint, this.options.selectOverlap) &&\n\t\t(!this.options.selectAllow || this.options.selectAllow(span) !== false);\n};\n\n\n// Returns true if the given span (caused by an event drop/resize or a selection) is allowed to exist\n// according to the constraint/overlap settings.\n// `event` is not required if checking a selection.\nCalendar.prototype.isSpanAllowed = function(span, constraint, overlap, event) {\n\tvar constraintEvents;\n\tvar anyContainment;\n\tvar peerEvents;\n\tvar i, peerEvent;\n\tvar peerOverlap;\n\n\t// the range must be fully contained by at least one of produced constraint events\n\tif (constraint != null) {\n\n\t\t// not treated as an event! intermediate data structure\n\t\t// TODO: use ranges in the future\n\t\tconstraintEvents = this.constraintToEvents(constraint);\n\t\tif (constraintEvents) { // not invalid\n\n\t\t\tanyContainment = false;\n\t\t\tfor (i = 0; i < constraintEvents.length; i++) {\n\t\t\t\tif (this.spanContainsSpan(constraintEvents[i], span)) {\n\t\t\t\t\tanyContainment = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!anyContainment) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\tpeerEvents = this.getPeerEvents(span, event);\n\n\tfor (i = 0; i < peerEvents.length; i++)  {\n\t\tpeerEvent = peerEvents[i];\n\n\t\t// there needs to be an actual intersection before disallowing anything\n\t\tif (this.eventIntersectsRange(peerEvent, span)) {\n\n\t\t\t// evaluate overlap for the given range and short-circuit if necessary\n\t\t\tif (overlap === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// if the event's overlap is a test function, pass the peer event in question as the first param\n\t\t\telse if (typeof overlap === 'function' && !overlap(peerEvent, event)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// if we are computing if the given range is allowable for an event, consider the other event's\n\t\t\t// EventObject-specific or Source-specific `overlap` property\n\t\t\tif (event) {\n\t\t\t\tpeerOverlap = firstDefined(\n\t\t\t\t\tpeerEvent.overlap,\n\t\t\t\t\t(peerEvent.source || {}).overlap\n\t\t\t\t\t// we already considered the global `eventOverlap`\n\t\t\t\t);\n\t\t\t\tif (peerOverlap === false) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// if the peer event's overlap is a test function, pass the subject event as the first param\n\t\t\t\tif (typeof peerOverlap === 'function' && !peerOverlap(event, peerEvent)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n};\n\n\n// Given an event input from the API, produces an array of event objects. Possible event inputs:\n// 'businessHours'\n// An event ID (number or string)\n// An object with specific start/end dates or a recurring event (like what businessHours accepts)\nCalendar.prototype.constraintToEvents = function(constraintInput) {\n\n\tif (constraintInput === 'businessHours') {\n\t\treturn this.getCurrentBusinessHourEvents();\n\t}\n\n\tif (typeof constraintInput === 'object') {\n\t\tif (constraintInput.start != null) { // needs to be event-like input\n\t\t\treturn this.expandEvent(this.buildEventFromInput(constraintInput));\n\t\t}\n\t\telse {\n\t\t\treturn null; // invalid\n\t\t}\n\t}\n\n\treturn this.clientEvents(constraintInput); // probably an ID\n};\n\n\n// Does the event's date range intersect with the given range?\n// start/end already assumed to have stripped zones :(\nCalendar.prototype.eventIntersectsRange = function(event, range) {\n\tvar eventStart = event.start.clone().stripZone();\n\tvar eventEnd = this.getEventEnd(event).stripZone();\n\n\treturn range.start < eventEnd && range.end > eventStart;\n};\n\n\n/* Business Hours\n-----------------------------------------------------------------------------------------*/\n\nvar BUSINESS_HOUR_EVENT_DEFAULTS = {\n\tid: '_fcBusinessHours', // will relate events from different calls to expandEvent\n\tstart: '09:00',\n\tend: '17:00',\n\tdow: [ 1, 2, 3, 4, 5 ], // monday - friday\n\trendering: 'inverse-background'\n\t// classNames are defined in businessHoursSegClasses\n};\n\n// Return events objects for business hours within the current view.\n// Abuse of our event system :(\nCalendar.prototype.getCurrentBusinessHourEvents = function(wholeDay) {\n\treturn this.computeBusinessHourEvents(wholeDay, this.options.businessHours);\n};\n\n// Given a raw input value from options, return events objects for business hours within the current view.\nCalendar.prototype.computeBusinessHourEvents = function(wholeDay, input) {\n\tif (input === true) {\n\t\treturn this.expandBusinessHourEvents(wholeDay, [ {} ]);\n\t}\n\telse if ($.isPlainObject(input)) {\n\t\treturn this.expandBusinessHourEvents(wholeDay, [ input ]);\n\t}\n\telse if ($.isArray(input)) {\n\t\treturn this.expandBusinessHourEvents(wholeDay, input, true);\n\t}\n\telse {\n\t\treturn [];\n\t}\n};\n\n// inputs expected to be an array of objects.\n// if ignoreNoDow is true, will ignore entries that don't specify a day-of-week (dow) key.\nCalendar.prototype.expandBusinessHourEvents = function(wholeDay, inputs, ignoreNoDow) {\n\tvar view = this.getView();\n\tvar events = [];\n\tvar i, input;\n\n\tfor (i = 0; i < inputs.length; i++) {\n\t\tinput = inputs[i];\n\n\t\tif (ignoreNoDow && !input.dow) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// give defaults. will make a copy\n\t\tinput = $.extend({}, BUSINESS_HOUR_EVENT_DEFAULTS, input);\n\n\t\t// if a whole-day series is requested, clear the start/end times\n\t\tif (wholeDay) {\n\t\t\tinput.start = null;\n\t\t\tinput.end = null;\n\t\t}\n\n\t\tevents.push.apply(events, // append\n\t\t\tthis.expandEvent(\n\t\t\t\tthis.buildEventFromInput(input),\n\t\t\t\tview.start,\n\t\t\t\tview.end\n\t\t\t)\n\t\t);\n\t}\n\n\treturn events;\n};\n\n;;\n\n/* An abstract class for the \"basic\" views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\n\nvar BasicView = FC.BasicView = View.extend({\n\n\tscroller: null,\n\n\tdayGridClass: DayGrid, // class the dayGrid will be instantiated from (overridable by subclasses)\n\tdayGrid: null, // the main subcomponent that does most of the heavy lifting\n\n\tdayNumbersVisible: false, // display day numbers on each day cell?\n\tcolWeekNumbersVisible: false, // display week numbers along the side?\n\tcellWeekNumbersVisible: false, // display week numbers in day cell?\n\n\tweekNumberWidth: null, // width of all the week-number cells running down the side\n\n\theadContainerEl: null, // div that hold's the dayGrid's rendered date header\n\theadRowEl: null, // the fake row element of the day-of-week header\n\n\n\tinitialize: function() {\n\t\tthis.dayGrid = this.instantiateDayGrid();\n\n\t\tthis.scroller = new Scroller({\n\t\t\toverflowX: 'hidden',\n\t\t\toverflowY: 'auto'\n\t\t});\n\t},\n\n\n\t// Generates the DayGrid object this view needs. Draws from this.dayGridClass\n\tinstantiateDayGrid: function() {\n\t\t// generate a subclass on the fly with BasicView-specific behavior\n\t\t// TODO: cache this subclass\n\t\tvar subclass = this.dayGridClass.extend(basicDayGridMethods);\n\n\t\treturn new subclass(this);\n\t},\n\n\n\t// Sets the display range and computes all necessary dates\n\tsetRange: function(range) {\n\t\tView.prototype.setRange.call(this, range); // call the super-method\n\n\t\tthis.dayGrid.breakOnWeeks = /year|month|week/.test(this.intervalUnit); // do before setRange\n\t\tthis.dayGrid.setRange(range);\n\t},\n\n\n\t// Compute the value to feed into setRange. Overrides superclass.\n\tcomputeRange: function(date) {\n\t\tvar range = View.prototype.computeRange.call(this, date); // get value from the super-method\n\n\t\t// year and month views should be aligned with weeks. this is already done for week\n\t\tif (/year|month/.test(range.intervalUnit)) {\n\t\t\trange.start.startOf('week');\n\t\t\trange.start = this.skipHiddenDays(range.start);\n\n\t\t\t// make end-of-week if not already\n\t\t\tif (range.end.weekday()) {\n\t\t\t\trange.end.add(1, 'week').startOf('week');\n\t\t\t\trange.end = this.skipHiddenDays(range.end, -1, true); // exclusively move backwards\n\t\t\t}\n\t\t}\n\n\t\treturn range;\n\t},\n\n\n\t// Renders the view into `this.el`, which should already be assigned\n\trenderDates: function() {\n\n\t\tthis.dayNumbersVisible = this.dayGrid.rowCnt > 1; // TODO: make grid responsible\n\t\tif (this.opt('weekNumbers')) {\n\t\t\tif (this.opt('weekNumbersWithinDays')) {\n\t\t\t\tthis.cellWeekNumbersVisible = true;\n\t\t\t\tthis.colWeekNumbersVisible = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.cellWeekNumbersVisible = false;\n\t\t\t\tthis.colWeekNumbersVisible = true;\n\t\t\t};\n\t\t}\n\t\tthis.dayGrid.numbersVisible = this.dayNumbersVisible ||\n\t\t\tthis.cellWeekNumbersVisible || this.colWeekNumbersVisible;\n\n\t\tthis.el.addClass('fc-basic-view').html(this.renderSkeletonHtml());\n\t\tthis.renderHead();\n\n\t\tthis.scroller.render();\n\t\tvar dayGridContainerEl = this.scroller.el.addClass('fc-day-grid-container');\n\t\tvar dayGridEl = $('<div class=\"fc-day-grid\" />').appendTo(dayGridContainerEl);\n\t\tthis.el.find('.fc-body > tr > td').append(dayGridContainerEl);\n\n\t\tthis.dayGrid.setElement(dayGridEl);\n\t\tthis.dayGrid.renderDates(this.hasRigidRows());\n\t},\n\n\n\t// render the day-of-week headers\n\trenderHead: function() {\n\t\tthis.headContainerEl =\n\t\t\tthis.el.find('.fc-head-container')\n\t\t\t\t.html(this.dayGrid.renderHeadHtml());\n\t\tthis.headRowEl = this.headContainerEl.find('.fc-row');\n\t},\n\n\n\t// Unrenders the content of the view. Since we haven't separated skeleton rendering from date rendering,\n\t// always completely kill the dayGrid's rendering.\n\tunrenderDates: function() {\n\t\tthis.dayGrid.unrenderDates();\n\t\tthis.dayGrid.removeElement();\n\t\tthis.scroller.destroy();\n\t},\n\n\n\trenderBusinessHours: function() {\n\t\tthis.dayGrid.renderBusinessHours();\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t\tthis.dayGrid.unrenderBusinessHours();\n\t},\n\n\n\t// Builds the HTML skeleton for the view.\n\t// The day-grid component will render inside of a container defined by this HTML.\n\trenderSkeletonHtml: function() {\n\t\treturn '' +\n\t\t\t'<table>' +\n\t\t\t\t'<thead class=\"fc-head\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"fc-head-container ' + this.widgetHeaderClass + '\"></td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</thead>' +\n\t\t\t\t'<tbody class=\"fc-body\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"' + this.widgetContentClass + '\"></td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</tbody>' +\n\t\t\t'</table>';\n\t},\n\n\n\t// Generates an HTML attribute string for setting the width of the week number column, if it is known\n\tweekNumberStyleAttr: function() {\n\t\tif (this.weekNumberWidth !== null) {\n\t\t\treturn 'style=\"width:' + this.weekNumberWidth + 'px\"';\n\t\t}\n\t\treturn '';\n\t},\n\n\n\t// Determines whether each row should have a constant height\n\thasRigidRows: function() {\n\t\tvar eventLimit = this.opt('eventLimit');\n\t\treturn eventLimit && typeof eventLimit !== 'number';\n\t},\n\n\n\t/* Dimensions\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Refreshes the horizontal dimensions of the view\n\tupdateWidth: function() {\n\t\tif (this.colWeekNumbersVisible) {\n\t\t\t// Make sure all week number cells running down the side have the same width.\n\t\t\t// Record the width for cells created later.\n\t\t\tthis.weekNumberWidth = matchCellWidths(\n\t\t\t\tthis.el.find('.fc-week-number')\n\t\t\t);\n\t\t}\n\t},\n\n\n\t// Adjusts the vertical dimensions of the view to the specified values\n\tsetHeight: function(totalHeight, isAuto) {\n\t\tvar eventLimit = this.opt('eventLimit');\n\t\tvar scrollerHeight;\n\t\tvar scrollbarWidths;\n\n\t\t// reset all heights to be natural\n\t\tthis.scroller.clear();\n\t\tuncompensateScroll(this.headRowEl);\n\n\t\tthis.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n\n\t\t// is the event limit a constant level number?\n\t\tif (eventLimit && typeof eventLimit === 'number') {\n\t\t\tthis.dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n\t\t}\n\n\t\t// distribute the height to the rows\n\t\t// (totalHeight is a \"recommended\" value if isAuto)\n\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\tthis.setGridHeight(scrollerHeight, isAuto);\n\n\t\t// is the event limit dynamically calculated?\n\t\tif (eventLimit && typeof eventLimit !== 'number') {\n\t\t\tthis.dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n\t\t}\n\n\t\tif (!isAuto) { // should we force dimensions of the scroll container?\n\n\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\tscrollbarWidths = this.scroller.getScrollbarWidths();\n\n\t\t\tif (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n\n\t\t\t\tcompensateScroll(this.headRowEl, scrollbarWidths);\n\n\t\t\t\t// doing the scrollbar compensation might have created text overflow which created more height. redo\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\t}\n\n\t\t\t// guarantees the same scrollbar widths\n\t\t\tthis.scroller.lockOverflow(scrollbarWidths);\n\t\t}\n\t},\n\n\n\t// given a desired total height of the view, returns what the height of the scroller should be\n\tcomputeScrollerHeight: function(totalHeight) {\n\t\treturn totalHeight -\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n\t},\n\n\n\t// Sets the height of just the DayGrid component in this view\n\tsetGridHeight: function(height, isAuto) {\n\t\tif (isAuto) {\n\t\t\tundistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n\t\t}\n\t\telse {\n\t\t\tdistributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n\t\t}\n\t},\n\n\n\t/* Scroll\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tcomputeInitialScroll: function() {\n\t\treturn { top: 0 };\n\t},\n\n\n\tqueryScroll: function() {\n\t\treturn { top: this.scroller.getScrollTop() };\n\t},\n\n\n\tsetScroll: function(scroll) {\n\t\tthis.scroller.setScrollTop(scroll.top);\n\t},\n\n\n\t/* Hit Areas\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// forward all hit-related method calls to dayGrid\n\n\n\tprepareHits: function() {\n\t\tthis.dayGrid.prepareHits();\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.dayGrid.releaseHits();\n\t},\n\n\n\tqueryHit: function(left, top) {\n\t\treturn this.dayGrid.queryHit(left, top);\n\t},\n\n\n\tgetHitSpan: function(hit) {\n\t\treturn this.dayGrid.getHitSpan(hit);\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\treturn this.dayGrid.getHitEl(hit);\n\t},\n\n\n\t/* Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders the given events onto the view and populates the segments array\n\trenderEvents: function(events) {\n\t\tthis.dayGrid.renderEvents(events);\n\n\t\tthis.updateHeight(); // must compensate for events that overflow the row\n\t},\n\n\n\t// Retrieves all segment objects that are rendered in the view\n\tgetEventSegs: function() {\n\t\treturn this.dayGrid.getEventSegs();\n\t},\n\n\n\t// Unrenders all event elements and clears internal segment data\n\tunrenderEvents: function() {\n\t\tthis.dayGrid.unrenderEvents();\n\n\t\t// we DON'T need to call updateHeight() because\n\t\t// a renderEvents() call always happens after this, which will eventually call updateHeight()\n\t},\n\n\n\t/* Dragging (for both events and external elements)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\n\trenderDrag: function(dropLocation, seg) {\n\t\treturn this.dayGrid.renderDrag(dropLocation, seg);\n\t},\n\n\n\tunrenderDrag: function() {\n\t\tthis.dayGrid.unrenderDrag();\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection\n\trenderSelection: function(span) {\n\t\tthis.dayGrid.renderSelection(span);\n\t},\n\n\n\t// Unrenders a visual indications of a selection\n\tunrenderSelection: function() {\n\t\tthis.dayGrid.unrenderSelection();\n\t}\n\n});\n\n\n// Methods that will customize the rendering behavior of the BasicView's dayGrid\nvar basicDayGridMethods = {\n\n\n\t// Generates the HTML that will go before the day-of week header cells\n\trenderHeadIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\tif (view.colWeekNumbersVisible) {\n\t\t\treturn '' +\n\t\t\t\t'<th class=\"fc-week-number ' + view.widgetHeaderClass + '\" ' + view.weekNumberStyleAttr() + '>' +\n\t\t\t\t\t'<span>' + // needed for matchCellWidths\n\t\t\t\t\t\thtmlEscape(view.opt('weekNumberTitle')) +\n\t\t\t\t\t'</span>' +\n\t\t\t\t'</th>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n\trenderNumberIntroHtml: function(row) {\n\t\tvar view = this.view;\n\t\tvar weekStart = this.getCellDate(row, 0);\n\n\t\tif (view.colWeekNumbersVisible) {\n\t\t\treturn '' +\n\t\t\t\t'<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '>' +\n\t\t\t\t\tview.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\n\t\t\t\t\t\t{ date: weekStart, type: 'week', forceOff: this.colCnt === 1 },\n\t\t\t\t\t\tweekStart.format('w') // inner HTML\n\t\t\t\t\t) +\n\t\t\t\t'</td>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generates the HTML that goes before the day bg cells for each day-row\n\trenderBgIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\tif (view.colWeekNumbersVisible) {\n\t\t\treturn '<td class=\"fc-week-number ' + view.widgetContentClass + '\" ' +\n\t\t\t\tview.weekNumberStyleAttr() + '></td>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generates the HTML that goes before every other type of row generated by DayGrid.\n\t// Affects helper-skeleton and highlight-skeleton rows.\n\trenderIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\tif (view.colWeekNumbersVisible) {\n\t\t\treturn '<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '></td>';\n\t\t}\n\n\t\treturn '';\n\t}\n\n};\n\n;;\n\n/* A month view with day cells running in rows (one-per-week) and columns\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar MonthView = FC.MonthView = BasicView.extend({\n\n\t// Produces information about what range to display\n\tcomputeRange: function(date) {\n\t\tvar range = BasicView.prototype.computeRange.call(this, date); // get value from super-method\n\t\tvar rowCnt;\n\n\t\t// ensure 6 weeks\n\t\tif (this.isFixedWeeks()) {\n\t\t\trowCnt = Math.ceil(range.end.diff(range.start, 'weeks', true)); // could be partial weeks due to hiddenDays\n\t\t\trange.end.add(6 - rowCnt, 'weeks');\n\t\t}\n\n\t\treturn range;\n\t},\n\n\n\t// Overrides the default BasicView behavior to have special multi-week auto-height logic\n\tsetGridHeight: function(height, isAuto) {\n\n\t\t// if auto, make the height of each row the height that it would be if there were 6 weeks\n\t\tif (isAuto) {\n\t\t\theight *= this.rowCnt / 6;\n\t\t}\n\n\t\tdistributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n\t},\n\n\n\tisFixedWeeks: function() {\n\t\treturn this.opt('fixedWeekCount');\n\t}\n\n});\n\n;;\n\nfcViews.basic = {\n\t'class': BasicView\n};\n\nfcViews.basicDay = {\n\ttype: 'basic',\n\tduration: { days: 1 }\n};\n\nfcViews.basicWeek = {\n\ttype: 'basic',\n\tduration: { weeks: 1 }\n};\n\nfcViews.month = {\n\t'class': MonthView,\n\tduration: { months: 1 }, // important for prev/next\n\tdefaults: {\n\t\tfixedWeekCount: true\n\t}\n};\n;;\n\n/* An abstract class for all agenda-related views. Displays one more columns with time slots running vertically.\n----------------------------------------------------------------------------------------------------------------------*/\n// Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\n// Responsible for managing width/height.\n\nvar AgendaView = FC.AgendaView = View.extend({\n\n\tscroller: null,\n\n\ttimeGridClass: TimeGrid, // class used to instantiate the timeGrid. subclasses can override\n\ttimeGrid: null, // the main time-grid subcomponent of this view\n\n\tdayGridClass: DayGrid, // class used to instantiate the dayGrid. subclasses can override\n\tdayGrid: null, // the \"all-day\" subcomponent. if all-day is turned off, this will be null\n\n\taxisWidth: null, // the width of the time axis running down the side\n\n\theadContainerEl: null, // div that hold's the timeGrid's rendered date header\n\tnoScrollRowEls: null, // set of fake row elements that must compensate when scroller has scrollbars\n\n\t// when the time-grid isn't tall enough to occupy the given height, we render an <hr> underneath\n\tbottomRuleEl: null,\n\n\n\tinitialize: function() {\n\t\tthis.timeGrid = this.instantiateTimeGrid();\n\n\t\tif (this.opt('allDaySlot')) { // should we display the \"all-day\" area?\n\t\t\tthis.dayGrid = this.instantiateDayGrid(); // the all-day subcomponent of this view\n\t\t}\n\n\t\tthis.scroller = new Scroller({\n\t\t\toverflowX: 'hidden',\n\t\t\toverflowY: 'auto'\n\t\t});\n\t},\n\n\n\t// Instantiates the TimeGrid object this view needs. Draws from this.timeGridClass\n\tinstantiateTimeGrid: function() {\n\t\tvar subclass = this.timeGridClass.extend(agendaTimeGridMethods);\n\n\t\treturn new subclass(this);\n\t},\n\n\n\t// Instantiates the DayGrid object this view might need. Draws from this.dayGridClass\n\tinstantiateDayGrid: function() {\n\t\tvar subclass = this.dayGridClass.extend(agendaDayGridMethods);\n\n\t\treturn new subclass(this);\n\t},\n\n\n\t/* Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Sets the display range and computes all necessary dates\n\tsetRange: function(range) {\n\t\tView.prototype.setRange.call(this, range); // call the super-method\n\n\t\tthis.timeGrid.setRange(range);\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.setRange(range);\n\t\t}\n\t},\n\n\n\t// Renders the view into `this.el`, which has already been assigned\n\trenderDates: function() {\n\n\t\tthis.el.addClass('fc-agenda-view').html(this.renderSkeletonHtml());\n\t\tthis.renderHead();\n\n\t\tthis.scroller.render();\n\t\tvar timeGridWrapEl = this.scroller.el.addClass('fc-time-grid-container');\n\t\tvar timeGridEl = $('<div class=\"fc-time-grid\" />').appendTo(timeGridWrapEl);\n\t\tthis.el.find('.fc-body > tr > td').append(timeGridWrapEl);\n\n\t\tthis.timeGrid.setElement(timeGridEl);\n\t\tthis.timeGrid.renderDates();\n\n\t\t// the <hr> that sometimes displays under the time-grid\n\t\tthis.bottomRuleEl = $('<hr class=\"fc-divider ' + this.widgetHeaderClass + '\"/>')\n\t\t\t.appendTo(this.timeGrid.el); // inject it into the time-grid\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.setElement(this.el.find('.fc-day-grid'));\n\t\t\tthis.dayGrid.renderDates();\n\n\t\t\t// have the day-grid extend it's coordinate area over the <hr> dividing the two grids\n\t\t\tthis.dayGrid.bottomCoordPadding = this.dayGrid.el.next('hr').outerHeight();\n\t\t}\n\n\t\tthis.noScrollRowEls = this.el.find('.fc-row:not(.fc-scroller *)'); // fake rows not within the scroller\n\t},\n\n\n\t// render the day-of-week headers\n\trenderHead: function() {\n\t\tthis.headContainerEl =\n\t\t\tthis.el.find('.fc-head-container')\n\t\t\t\t.html(this.timeGrid.renderHeadHtml());\n\t},\n\n\n\t// Unrenders the content of the view. Since we haven't separated skeleton rendering from date rendering,\n\t// always completely kill each grid's rendering.\n\tunrenderDates: function() {\n\t\tthis.timeGrid.unrenderDates();\n\t\tthis.timeGrid.removeElement();\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderDates();\n\t\t\tthis.dayGrid.removeElement();\n\t\t}\n\n\t\tthis.scroller.destroy();\n\t},\n\n\n\t// Builds the HTML skeleton for the view.\n\t// The day-grid and time-grid components will render inside containers defined by this HTML.\n\trenderSkeletonHtml: function() {\n\t\treturn '' +\n\t\t\t'<table>' +\n\t\t\t\t'<thead class=\"fc-head\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"fc-head-container ' + this.widgetHeaderClass + '\"></td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</thead>' +\n\t\t\t\t'<tbody class=\"fc-body\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"' + this.widgetContentClass + '\">' +\n\t\t\t\t\t\t\t(this.dayGrid ?\n\t\t\t\t\t\t\t\t'<div class=\"fc-day-grid\"/>' +\n\t\t\t\t\t\t\t\t'<hr class=\"fc-divider ' + this.widgetHeaderClass + '\"/>' :\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t) +\n\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</tbody>' +\n\t\t\t'</table>';\n\t},\n\n\n\t// Generates an HTML attribute string for setting the width of the axis, if it is known\n\taxisStyleAttr: function() {\n\t\tif (this.axisWidth !== null) {\n\t\t\t return 'style=\"width:' + this.axisWidth + 'px\"';\n\t\t}\n\t\treturn '';\n\t},\n\n\n\t/* Business Hours\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBusinessHours: function() {\n\t\tthis.timeGrid.renderBusinessHours();\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.renderBusinessHours();\n\t\t}\n\t},\n\n\n\tunrenderBusinessHours: function() {\n\t\tthis.timeGrid.unrenderBusinessHours();\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderBusinessHours();\n\t\t}\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tgetNowIndicatorUnit: function() {\n\t\treturn this.timeGrid.getNowIndicatorUnit();\n\t},\n\n\n\trenderNowIndicator: function(date) {\n\t\tthis.timeGrid.renderNowIndicator(date);\n\t},\n\n\n\tunrenderNowIndicator: function() {\n\t\tthis.timeGrid.unrenderNowIndicator();\n\t},\n\n\n\t/* Dimensions\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tupdateSize: function(isResize) {\n\t\tthis.timeGrid.updateSize(isResize);\n\n\t\tView.prototype.updateSize.call(this, isResize); // call the super-method\n\t},\n\n\n\t// Refreshes the horizontal dimensions of the view\n\tupdateWidth: function() {\n\t\t// make all axis cells line up, and record the width so newly created axis cells will have it\n\t\tthis.axisWidth = matchCellWidths(this.el.find('.fc-axis'));\n\t},\n\n\n\t// Adjusts the vertical dimensions of the view to the specified values\n\tsetHeight: function(totalHeight, isAuto) {\n\t\tvar eventLimit;\n\t\tvar scrollerHeight;\n\t\tvar scrollbarWidths;\n\n\t\t// reset all dimensions back to the original state\n\t\tthis.bottomRuleEl.hide(); // .show() will be called later if this <hr> is necessary\n\t\tthis.scroller.clear(); // sets height to 'auto' and clears overflow\n\t\tuncompensateScroll(this.noScrollRowEls);\n\n\t\t// limit number of events in the all-day area\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n\n\t\t\teventLimit = this.opt('eventLimit');\n\t\t\tif (eventLimit && typeof eventLimit !== 'number') {\n\t\t\t\teventLimit = AGENDA_ALL_DAY_EVENT_LIMIT; // make sure \"auto\" goes to a real number\n\t\t\t}\n\t\t\tif (eventLimit) {\n\t\t\t\tthis.dayGrid.limitRows(eventLimit);\n\t\t\t}\n\t\t}\n\n\t\tif (!isAuto) { // should we force dimensions of the scroll container?\n\n\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\tscrollbarWidths = this.scroller.getScrollbarWidths();\n\n\t\t\tif (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n\n\t\t\t\t// make the all-day and header rows lines up\n\t\t\t\tcompensateScroll(this.noScrollRowEls, scrollbarWidths);\n\n\t\t\t\t// the scrollbar compensation might have changed text flow, which might affect height, so recalculate\n\t\t\t\t// and reapply the desired height to the scroller.\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\t}\n\n\t\t\t// guarantees the same scrollbar widths\n\t\t\tthis.scroller.lockOverflow(scrollbarWidths);\n\n\t\t\t// if there's any space below the slats, show the horizontal rule.\n\t\t\t// this won't cause any new overflow, because lockOverflow already called.\n\t\t\tif (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\n\t\t\t\tthis.bottomRuleEl.show();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// given a desired total height of the view, returns what the height of the scroller should be\n\tcomputeScrollerHeight: function(totalHeight) {\n\t\treturn totalHeight -\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n\t},\n\n\n\t/* Scroll\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes the initial pre-configured scroll state prior to allowing the user to change it\n\tcomputeInitialScroll: function() {\n\t\tvar scrollTime = moment.duration(this.opt('scrollTime'));\n\t\tvar top = this.timeGrid.computeTimeTop(scrollTime);\n\n\t\t// zoom can give weird floating-point values. rather scroll a little bit further\n\t\ttop = Math.ceil(top);\n\n\t\tif (top) {\n\t\t\ttop++; // to overcome top border that slots beyond the first have. looks better\n\t\t}\n\n\t\treturn { top: top };\n\t},\n\n\n\tqueryScroll: function() {\n\t\treturn { top: this.scroller.getScrollTop() };\n\t},\n\n\n\tsetScroll: function(scroll) {\n\t\tthis.scroller.setScrollTop(scroll.top);\n\t},\n\n\n\t/* Hit Areas\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// forward all hit-related method calls to the grids (dayGrid might not be defined)\n\n\n\tprepareHits: function() {\n\t\tthis.timeGrid.prepareHits();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.prepareHits();\n\t\t}\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.timeGrid.releaseHits();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.releaseHits();\n\t\t}\n\t},\n\n\n\tqueryHit: function(left, top) {\n\t\tvar hit = this.timeGrid.queryHit(left, top);\n\n\t\tif (!hit && this.dayGrid) {\n\t\t\thit = this.dayGrid.queryHit(left, top);\n\t\t}\n\n\t\treturn hit;\n\t},\n\n\n\tgetHitSpan: function(hit) {\n\t\t// TODO: hit.component is set as a hack to identify where the hit came from\n\t\treturn hit.component.getHitSpan(hit);\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\t// TODO: hit.component is set as a hack to identify where the hit came from\n\t\treturn hit.component.getHitEl(hit);\n\t},\n\n\n\t/* Events\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders events onto the view and populates the View's segment array\n\trenderEvents: function(events) {\n\t\tvar dayEvents = [];\n\t\tvar timedEvents = [];\n\t\tvar daySegs = [];\n\t\tvar timedSegs;\n\t\tvar i;\n\n\t\t// separate the events into all-day and timed\n\t\tfor (i = 0; i < events.length; i++) {\n\t\t\tif (events[i].allDay) {\n\t\t\t\tdayEvents.push(events[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttimedEvents.push(events[i]);\n\t\t\t}\n\t\t}\n\n\t\t// render the events in the subcomponents\n\t\ttimedSegs = this.timeGrid.renderEvents(timedEvents);\n\t\tif (this.dayGrid) {\n\t\t\tdaySegs = this.dayGrid.renderEvents(dayEvents);\n\t\t}\n\n\t\t// the all-day area is flexible and might have a lot of events, so shift the height\n\t\tthis.updateHeight();\n\t},\n\n\n\t// Retrieves all segment objects that are rendered in the view\n\tgetEventSegs: function() {\n\t\treturn this.timeGrid.getEventSegs().concat(\n\t\t\tthis.dayGrid ? this.dayGrid.getEventSegs() : []\n\t\t);\n\t},\n\n\n\t// Unrenders all event elements and clears internal segment data\n\tunrenderEvents: function() {\n\n\t\t// unrender the events in the subcomponents\n\t\tthis.timeGrid.unrenderEvents();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderEvents();\n\t\t}\n\n\t\t// we DON'T need to call updateHeight() because\n\t\t// a renderEvents() call always happens after this, which will eventually call updateHeight()\n\t},\n\n\n\t/* Dragging (for events and external elements)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\n\trenderDrag: function(dropLocation, seg) {\n\t\tif (dropLocation.start.hasTime()) {\n\t\t\treturn this.timeGrid.renderDrag(dropLocation, seg);\n\t\t}\n\t\telse if (this.dayGrid) {\n\t\t\treturn this.dayGrid.renderDrag(dropLocation, seg);\n\t\t}\n\t},\n\n\n\tunrenderDrag: function() {\n\t\tthis.timeGrid.unrenderDrag();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderDrag();\n\t\t}\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection\n\trenderSelection: function(span) {\n\t\tif (span.start.hasTime() || span.end.hasTime()) {\n\t\t\tthis.timeGrid.renderSelection(span);\n\t\t}\n\t\telse if (this.dayGrid) {\n\t\t\tthis.dayGrid.renderSelection(span);\n\t\t}\n\t},\n\n\n\t// Unrenders a visual indications of a selection\n\tunrenderSelection: function() {\n\t\tthis.timeGrid.unrenderSelection();\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.unrenderSelection();\n\t\t}\n\t}\n\n});\n\n\n// Methods that will customize the rendering behavior of the AgendaView's timeGrid\n// TODO: move into TimeGrid\nvar agendaTimeGridMethods = {\n\n\n\t// Generates the HTML that will go before the day-of week header cells\n\trenderHeadIntroHtml: function() {\n\t\tvar view = this.view;\n\t\tvar weekText;\n\n\t\tif (view.opt('weekNumbers')) {\n\t\t\tweekText = this.start.format(view.opt('smallWeekFormat'));\n\n\t\t\treturn '' +\n\t\t\t\t'<th class=\"fc-axis fc-week-number ' + view.widgetHeaderClass + '\" ' + view.axisStyleAttr() + '>' +\n\t\t\t\t\tview.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\n\t\t\t\t\t\t{ date: this.start, type: 'week', forceOff: this.colCnt > 1 },\n\t\t\t\t\t\thtmlEscape(weekText) // inner HTML\n\t\t\t\t\t) +\n\t\t\t\t'</th>';\n\t\t}\n\t\telse {\n\t\t\treturn '<th class=\"fc-axis ' + view.widgetHeaderClass + '\" ' + view.axisStyleAttr() + '></th>';\n\t\t}\n\t},\n\n\n\t// Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\n\trenderBgIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '<td class=\"fc-axis ' + view.widgetContentClass + '\" ' + view.axisStyleAttr() + '></td>';\n\t},\n\n\n\t// Generates the HTML that goes before all other types of cells.\n\t// Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\n\trenderIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>';\n\t}\n\n};\n\n\n// Methods that will customize the rendering behavior of the AgendaView's dayGrid\nvar agendaDayGridMethods = {\n\n\n\t// Generates the HTML that goes before the all-day cells\n\trenderBgIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '' +\n\t\t\t'<td class=\"fc-axis ' + view.widgetContentClass + '\" ' + view.axisStyleAttr() + '>' +\n\t\t\t\t'<span>' + // needed for matchCellWidths\n\t\t\t\t\tview.getAllDayHtml() +\n\t\t\t\t'</span>' +\n\t\t\t'</td>';\n\t},\n\n\n\t// Generates the HTML that goes before all other types of cells.\n\t// Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\n\trenderIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>';\n\t}\n\n};\n\n;;\n\nvar AGENDA_ALL_DAY_EVENT_LIMIT = 5;\n\n// potential nice values for the slot-duration and interval-duration\n// from largest to smallest\nvar AGENDA_STOCK_SUB_DURATIONS = [\n\t{ hours: 1 },\n\t{ minutes: 30 },\n\t{ minutes: 15 },\n\t{ seconds: 30 },\n\t{ seconds: 15 }\n];\n\nfcViews.agenda = {\n\t'class': AgendaView,\n\tdefaults: {\n\t\tallDaySlot: true,\n\t\tslotDuration: '00:30:00',\n\t\tminTime: '00:00:00',\n\t\tmaxTime: '24:00:00',\n\t\tslotEventOverlap: true // a bad name. confused with overlap/constraint system\n\t}\n};\n\nfcViews.agendaDay = {\n\ttype: 'agenda',\n\tduration: { days: 1 }\n};\n\nfcViews.agendaWeek = {\n\ttype: 'agenda',\n\tduration: { weeks: 1 }\n};\n;;\n\n/*\nResponsible for the scroller, and forwarding event-related actions into the \"grid\"\n*/\nvar ListView = View.extend({\n\n\tgrid: null,\n\tscroller: null,\n\n\tinitialize: function() {\n\t\tthis.grid = new ListViewGrid(this);\n\t\tthis.scroller = new Scroller({\n\t\t\toverflowX: 'hidden',\n\t\t\toverflowY: 'auto'\n\t\t});\n\t},\n\n\tsetRange: function(range) {\n\t\tView.prototype.setRange.call(this, range); // super\n\n\t\tthis.grid.setRange(range); // needs to process range-related options\n\t},\n\n\trenderSkeleton: function() {\n\t\tthis.el.addClass(\n\t\t\t'fc-list-view ' +\n\t\t\tthis.widgetContentClass\n\t\t);\n\n\t\tthis.scroller.render();\n\t\tthis.scroller.el.appendTo(this.el);\n\n\t\tthis.grid.setElement(this.scroller.scrollEl);\n\t},\n\n\tunrenderSkeleton: function() {\n\t\tthis.scroller.destroy(); // will remove the Grid too\n\t},\n\n\tsetHeight: function(totalHeight, isAuto) {\n\t\tthis.scroller.setHeight(this.computeScrollerHeight(totalHeight));\n\t},\n\n\tcomputeScrollerHeight: function(totalHeight) {\n\t\treturn totalHeight -\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n\t},\n\n\trenderEvents: function(events) {\n\t\tthis.grid.renderEvents(events);\n\t},\n\n\tunrenderEvents: function() {\n\t\tthis.grid.unrenderEvents();\n\t},\n\n\tisEventResizable: function(event) {\n\t\treturn false;\n\t},\n\n\tisEventDraggable: function(event) {\n\t\treturn false;\n\t}\n\n});\n\n/*\nResponsible for event rendering and user-interaction.\nIts \"el\" is the inner-content of the above view's scroller.\n*/\nvar ListViewGrid = Grid.extend({\n\n\tsegSelector: '.fc-list-item', // which elements accept event actions\n\thasDayInteractions: false, // no day selection or day clicking\n\n\t// slices by day\n\tspanToSegs: function(span) {\n\t\tvar view = this.view;\n\t\tvar dayStart = view.start.clone().time(0); // timed, so segs get times!\n\t\tvar dayIndex = 0;\n\t\tvar seg;\n\t\tvar segs = [];\n\n\t\twhile (dayStart < view.end) {\n\n\t\t\tseg = intersectRanges(span, {\n\t\t\t\tstart: dayStart,\n\t\t\t\tend: dayStart.clone().add(1, 'day')\n\t\t\t});\n\n\t\t\tif (seg) {\n\t\t\t\tseg.dayIndex = dayIndex;\n\t\t\t\tsegs.push(seg);\n\t\t\t}\n\n\t\t\tdayStart.add(1, 'day');\n\t\t\tdayIndex++;\n\n\t\t\t// detect when span won't go fully into the next day,\n\t\t\t// and mutate the latest seg to the be the end.\n\t\t\tif (\n\t\t\t\tseg && !seg.isEnd && span.end.hasTime() &&\n\t\t\t\tspan.end < dayStart.clone().add(this.view.nextDayThreshold)\n\t\t\t) {\n\t\t\t\tseg.end = span.end.clone();\n\t\t\t\tseg.isEnd = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\t// like \"4:00am\"\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.view.opt('mediumTimeFormat');\n\t},\n\n\t// for events with a url, the whole <tr> should be clickable,\n\t// but it's impossible to wrap with an <a> tag. simulate this.\n\thandleSegClick: function(seg, ev) {\n\t\tvar url;\n\n\t\tGrid.prototype.handleSegClick.apply(this, arguments); // super. might prevent the default action\n\n\t\t// not clicking on or within an <a> with an href\n\t\tif (!$(ev.target).closest('a[href]').length) {\n\t\t\turl = seg.event.url;\n\t\t\tif (url && !ev.isDefaultPrevented()) { // jsEvent not cancelled in handler\n\t\t\t\twindow.location.href = url; // simulate link click\n\t\t\t}\n\t\t}\n\t},\n\n\t// returns list of foreground segs that were actually rendered\n\trenderFgSegs: function(segs) {\n\t\tsegs = this.renderFgSegEls(segs); // might filter away hidden events\n\n\t\tif (!segs.length) {\n\t\t\tthis.renderEmptyMessage();\n\t\t}\n\t\telse {\n\t\t\tthis.renderSegList(segs);\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\trenderEmptyMessage: function() {\n\t\tthis.el.html(\n\t\t\t'<div class=\"fc-list-empty-wrap2\">' + // TODO: try less wraps\n\t\t\t'<div class=\"fc-list-empty-wrap1\">' +\n\t\t\t'<div class=\"fc-list-empty\">' +\n\t\t\t\thtmlEscape(this.view.opt('noEventsMessage')) +\n\t\t\t'</div>' +\n\t\t\t'</div>' +\n\t\t\t'</div>'\n\t\t);\n\t},\n\n\t// render the event segments in the view\n\trenderSegList: function(allSegs) {\n\t\tvar segsByDay = this.groupSegsByDay(allSegs); // sparse array\n\t\tvar dayIndex;\n\t\tvar daySegs;\n\t\tvar i;\n\t\tvar tableEl = $('<table class=\"fc-list-table\"><tbody/></table>');\n\t\tvar tbodyEl = tableEl.find('tbody');\n\n\t\tfor (dayIndex = 0; dayIndex < segsByDay.length; dayIndex++) {\n\t\t\tdaySegs = segsByDay[dayIndex];\n\t\t\tif (daySegs) { // sparse array, so might be undefined\n\n\t\t\t\t// append a day header\n\t\t\t\ttbodyEl.append(this.dayHeaderHtml(\n\t\t\t\t\tthis.view.start.clone().add(dayIndex, 'days')\n\t\t\t\t));\n\n\t\t\t\tthis.sortEventSegs(daySegs);\n\n\t\t\t\tfor (i = 0; i < daySegs.length; i++) {\n\t\t\t\t\ttbodyEl.append(daySegs[i].el); // append event row\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.el.empty().append(tableEl);\n\t},\n\n\t// Returns a sparse array of arrays, segs grouped by their dayIndex\n\tgroupSegsByDay: function(segs) {\n\t\tvar segsByDay = []; // sparse array\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\t(segsByDay[seg.dayIndex] || (segsByDay[seg.dayIndex] = []))\n\t\t\t\t.push(seg);\n\t\t}\n\n\t\treturn segsByDay;\n\t},\n\n\t// generates the HTML for the day headers that live amongst the event rows\n\tdayHeaderHtml: function(dayDate) {\n\t\tvar view = this.view;\n\t\tvar mainFormat = view.opt('listDayFormat');\n\t\tvar altFormat = view.opt('listDayAltFormat');\n\n\t\treturn '<tr class=\"fc-list-heading\" data-date=\"' + dayDate.format('YYYY-MM-DD') + '\">' +\n\t\t\t'<td class=\"' + view.widgetHeaderClass + '\" colspan=\"3\">' +\n\t\t\t\t(mainFormat ?\n\t\t\t\t\tview.buildGotoAnchorHtml(\n\t\t\t\t\t\tdayDate,\n\t\t\t\t\t\t{ 'class': 'fc-list-heading-main' },\n\t\t\t\t\t\thtmlEscape(dayDate.format(mainFormat)) // inner HTML\n\t\t\t\t\t) :\n\t\t\t\t\t'') +\n\t\t\t\t(altFormat ?\n\t\t\t\t\tview.buildGotoAnchorHtml(\n\t\t\t\t\t\tdayDate,\n\t\t\t\t\t\t{ 'class': 'fc-list-heading-alt' },\n\t\t\t\t\t\thtmlEscape(dayDate.format(altFormat)) // inner HTML\n\t\t\t\t\t) :\n\t\t\t\t\t'') +\n\t\t\t'</td>' +\n\t\t'</tr>';\n\t},\n\n\t// generates the HTML for a single event row\n\tfgSegHtml: function(seg) {\n\t\tvar view = this.view;\n\t\tvar classes = [ 'fc-list-item' ].concat(this.getSegCustomClasses(seg));\n\t\tvar bgColor = this.getSegBackgroundColor(seg);\n\t\tvar event = seg.event;\n\t\tvar url = event.url;\n\t\tvar timeHtml;\n\n\t\tif (event.allDay) {\n\t\t\ttimeHtml = view.getAllDayHtml();\n\t\t}\n\t\telse if (view.isMultiDayEvent(event)) { // if the event appears to span more than one day\n\t\t\tif (seg.isStart || seg.isEnd) { // outer segment that probably lasts part of the day\n\t\t\t\ttimeHtml = htmlEscape(this.getEventTimeText(seg));\n\t\t\t}\n\t\t\telse { // inner segment that lasts the whole day\n\t\t\t\ttimeHtml = view.getAllDayHtml();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Display the normal time text for the *event's* times\n\t\t\ttimeHtml = htmlEscape(this.getEventTimeText(event));\n\t\t}\n\n\t\tif (url) {\n\t\t\tclasses.push('fc-has-url');\n\t\t}\n\n\t\treturn '<tr class=\"' + classes.join(' ') + '\">' +\n\t\t\t(this.displayEventTime ?\n\t\t\t\t'<td class=\"fc-list-item-time ' + view.widgetContentClass + '\">' +\n\t\t\t\t\t(timeHtml || '') +\n\t\t\t\t'</td>' :\n\t\t\t\t'') +\n\t\t\t'<td class=\"fc-list-item-marker ' + view.widgetContentClass + '\">' +\n\t\t\t\t'<span class=\"fc-event-dot\"' +\n\t\t\t\t(bgColor ?\n\t\t\t\t\t' style=\"background-color:' + bgColor + '\"' :\n\t\t\t\t\t'') +\n\t\t\t\t'></span>' +\n\t\t\t'</td>' +\n\t\t\t'<td class=\"fc-list-item-title ' + view.widgetContentClass + '\">' +\n\t\t\t\t'<a' + (url ? ' href=\"' + htmlEscape(url) + '\"' : '') + '>' +\n\t\t\t\t\thtmlEscape(seg.event.title || '') +\n\t\t\t\t'</a>' +\n\t\t\t'</td>' +\n\t\t'</tr>';\n\t}\n\n});\n\n;;\n\nfcViews.list = {\n\t'class': ListView,\n\tbuttonTextKey: 'list', // what to lookup in locale files\n\tdefaults: {\n\t\tbuttonText: 'list', // text to display for English\n\t\tlistDayFormat: 'LL', // like \"January 1, 2016\"\n\t\tnoEventsMessage: 'No events to display'\n\t}\n};\n\nfcViews.listDay = {\n\ttype: 'list',\n\tduration: { days: 1 },\n\tdefaults: {\n\t\tlistDayFormat: 'dddd' // day-of-week is all we need. full date is probably in header\n\t}\n};\n\nfcViews.listWeek = {\n\ttype: 'list',\n\tduration: { weeks: 1 },\n\tdefaults: {\n\t\tlistDayFormat: 'dddd', // day-of-week is more important\n\t\tlistDayAltFormat: 'LL'\n\t}\n};\n\nfcViews.listMonth = {\n\ttype: 'list',\n\tduration: { month: 1 },\n\tdefaults: {\n\t\tlistDayAltFormat: 'dddd' // day-of-week is nice-to-have\n\t}\n};\n\nfcViews.listYear = {\n\ttype: 'list',\n\tduration: { year: 1 },\n\tdefaults: {\n\t\tlistDayAltFormat: 'dddd' // day-of-week is nice-to-have\n\t}\n};\n\n;;\n\nreturn FC; // export for Node/CommonJS\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC92ZW5kb3JzL2Z1bGxjYWxlbmRhci9mdWxsY2FsZW5kYXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FDQUE7Ozs7OztBQU1BLENBQUMsVUFBUyxPQUFULEVBQWtCO0FBQ2xCLFNBQVEsTUFBUixFQUFnQixNQUFoQjtBQUNBLENBRkQsRUFFRyxVQUFTLENBQVQsRUFBWSxNQUFaLEVBQW9COztBQUV2QixFQUFDOztBQUVELEtBQUksS0FBSyxFQUFFLFlBQUYsR0FBaUI7QUFDekIsV0FBUyxPQURnQjtBQUV6QixzQkFBb0I7QUFGSyxFQUExQjtBQUlBLEtBQUksVUFBVSxHQUFHLEtBQUgsR0FBVyxFQUF6Qjs7QUFHQSxHQUFFLEVBQUYsQ0FBSyxZQUFMLEdBQW9CLFVBQVMsT0FBVCxFQUFrQjtBQUNyQyxNQUFJLE9BQU8sTUFBTSxTQUFOLENBQWdCLEtBQWhCLENBQXNCLElBQXRCLENBQTJCLFNBQTNCLEVBQXNDLENBQXRDLENBQVgsQ0FEcUMsQ0FDZ0I7QUFDckQsTUFBSSxNQUFNLElBQVYsQ0FGcUMsQ0FFckI7O0FBRWhCLE9BQUssSUFBTCxDQUFVLFVBQVMsQ0FBVCxFQUFZLFFBQVosRUFBc0I7QUFBRTtBQUNqQyxPQUFJLFVBQVUsRUFBRSxRQUFGLENBQWQ7QUFDQSxPQUFJLFdBQVcsUUFBUSxJQUFSLENBQWEsY0FBYixDQUFmLENBRitCLENBRWM7QUFDN0MsT0FBSSxTQUFKLENBSCtCLENBR2hCOztBQUVmO0FBQ0EsT0FBSSxPQUFPLE9BQVAsS0FBbUIsUUFBdkIsRUFBaUM7QUFDaEMsUUFBSSxZQUFZLEVBQUUsVUFBRixDQUFhLFNBQVMsT0FBVCxDQUFiLENBQWhCLEVBQWlEO0FBQ2hELGlCQUFZLFNBQVMsT0FBVCxFQUFrQixLQUFsQixDQUF3QixRQUF4QixFQUFrQyxJQUFsQyxDQUFaO0FBQ0EsU0FBSSxDQUFDLENBQUwsRUFBUTtB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QVUsRUFBRSxPQUFPLENBQVQsRUFGUTtBQUdsQixZQUFVO0FBQ1Qsa0JBQWUsTUFETixFQUNjO0FBQ3ZCLHFCQUFrQjtBQUZUO0FBSFEsRUFBbkI7O0FBU0EsU0FBUSxTQUFSLEdBQW9CO0FBQ25CLFFBQU0sTUFEYTtBQUVuQixZQUFVLEVBQUUsT0FBTyxDQUFULEVBRlM7QUFHbkIsWUFBVTtBQUNULHFCQUFrQixNQURULENBQ2dCO0FBRGhCO0FBSFMsRUFBcEI7O0FBUUEsU0FBUSxRQUFSLEdBQW1CO0FBQ2xCLFFBQU0sTUFEWTtBQUVsQixZQUFVLEVBQUUsTUFBTSxDQUFSLEVBRlE7QUFHbEIsWUFBVTtBQUNULHFCQUFrQixNQURULENBQ2dCO0FBRGhCO0FBSFEsRUFBbkI7O0FBUUEsRUFBQzs7QUFFRCxRQUFPLEVBQVAsQ0E1MmJ1QixDQTQyYlo7QUFDVixDQS8yYkQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyohXG4gKiBGdWxsQ2FsZW5kYXIgdjMuMS4wXG4gKiBEb2NzICYgTGljZW5zZTogaHR0cDovL2Z1bGxjYWxlbmRhci5pby9cbiAqIChjKSAyMDE2IEFkYW0gU2hhd1xuICovXG5cbihmdW5jdGlvbihmYWN0b3J5KSB7XG5cdGZhY3RvcnkoalF1ZXJ5LCBtb21lbnQpO1xufSkoZnVuY3Rpb24oJCwgbW9tZW50KSB7XG5cbjs7XG5cbnZhciBGQyA9ICQuZnVsbENhbGVuZGFyID0ge1xuXHR2ZXJzaW9uOiBcIjMuMS4wXCIsXG5cdGludGVybmFsQXBpVmVyc2lvbjogN1xufTtcbnZhciBmY1ZpZXdzID0gRkMudmlld3MgPSB7fTtcblxuXG4kLmZuLmZ1bGxDYWxlbmRhciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOyAvLyBmb3IgYSBwb3NzaWJsZSBtZXRob2QgY2FsbFxuXHR2YXIgcmVzID0gdGhpczsgLy8gd2hhdCB0aGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuICh0aGlzIGpRdWVyeSBvYmplY3QgYnkgZGVmYXVsdClcblxuXHR0aGlzLmVhY2goZnVuY3Rpb24oaSwgX2VsZW1lbnQpIHsgLy8gbG9vcCBlYWNoIERPTSBlbGVtZW50IGludm9sdmVkXG5cdFx0dmFyIGVsZW1lbnQgPSAkKF9lbGVtZW50KTtcblx0XHR2YXIgY2FsZW5kYXIgPSBlbGVtZW50LmRhdGEoJ2Z1bGxDYWxlbmRhcicpOyAvLyBnZXQgdGhlIGV4aXN0aW5nIGNhbGVuZGFyIG9iamVjdCAoaWYgYW55KVxuXHRcdHZhciBzaW5nbGVSZXM7IC8vIHRoZSByZXR1cm5lZCB2YWx1ZSBvZiB0aGlzIHNpbmdsZSBtZXRob2QgY2FsbFxuXG5cdFx0Ly8gYSBtZXRob2QgY2FsbFxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcblx0XHRcdGlmIChjYWxlbmRhciAmJiAkLmlzRnVuY3Rpb24oY2FsZW5kYXJbb3B0aW9uc10pKSB7XG5cdFx0XHRcdHNpbmdsZVJlcyA9IGNhbGVuZGFyW29wdGlvbnNdLmFwcGx5KGNhbGVuZGFyLCBhcmdzKTtcblx0XHRcdFx0aWYgKCFpKSB7XG5cdFx0XHRcdFx0cmVzID0gc2luZ2xlUmVzOyAvLyByZWNvcmQgdGhlIGZpcnN0IG1ldGhvZCBjYWxsIHJlc3VsdFxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChvcHRpb25zID09PSAnZGVzdHJveScpIHsgLy8gZm9yIHRoZSBkZXN0cm95IG1ldGhvZCwgbXVzdCByZW1vdmUgQ2FsZW5kYXIgb2JqZWN0IGRhdGFcblx0XHRcdFx0XHRlbGVtZW50LnJlbW92ZURhdGEoJ2Z1bGxDYWxlbmRhcicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIGEgbmV3IGNhbGVuZGFyIGluaXRpYWxpemF0aW9uXG5cdFx0ZWxzZSBpZiAoIWNhbGVuZGFyKSB7IC8vIGRvbid0IGluaXRpYWxpemUgdHdpY2Vcblx0XHRcdGNhbGVuZGFyID0gbmV3IENhbGVuZGFyKGVsZW1lbnQsIG9wdGlvbnMpO1xuXHRcdFx0ZWxlbWVudC5kYXRhKCdmdWxsQ2FsZW5kYXInLCBjYWxlbmRhcik7XG5cdFx0XHRjYWxlbmRhci5yZW5kZXIoKTtcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiByZXM7XG59O1xuXG5cbnZhciBjb21wbGV4T3B0aW9ucyA9IFsgLy8gbmFtZXMgb2Ygb3B0aW9ucyB0aGF0IGFyZSBvYmplY3RzIHdob3NlIHByb3BlcnRpZXMgc2hvdWxkIGJlIGNvbWJpbmVkXG5cdCdoZWFkZXInLFxuXHQnZm9vdGVyJyxcblx0J2J1dHRvblRleHQnLFxuXHQnYnV0dG9uSWNvbnMnLFxuXHQndGhlbWVCdXR0b25JY29ucydcbl07XG5cblxuLy8gTWVyZ2VzIGFuIGFycmF5IG9mIG9wdGlvbiBvYmplY3RzIGludG8gYSBzaW5nbGUgb2JqZWN0XG5mdW5jdGlvbiBtZXJnZU9wdGlvbnMob3B0aW9uT2Jqcykge1xuXHRyZXR1cm4gbWVyZ2VQcm9wcyhvcHRpb25PYmpzLCBjb21wbGV4T3B0aW9ucyk7XG59XG5cbjs7XG5cbi8vIGV4cG9ydHNcbkZDLmludGVyc2VjdFJhbmdlcyA9IGludGVyc2VjdFJhbmdlcztcbkZDLmFwcGx5QWxsID0gYXBwbHlBbGw7XG5GQy5kZWJvdW5jZSA9IGRlYm91bmNlO1xuRkMuaXNJbnQgPSBpc0ludDtcbkZDLmh0bWxFc2NhcGUgPSBodG1sRXNjYXBlO1xuRkMuY3NzVG9TdHIgPSBjc3NUb1N0cjtcbkZDLnByb3h5ID0gcHJveHk7XG5GQy5jYXBpdGFsaXNlRmlyc3RMZXR0ZXIgPSBjYXBpdGFsaXNlRmlyc3RMZXR0ZXI7XG5cblxuLyogRnVsbENhbGVuZGFyLXNwZWNpZmljIERPTSBVdGlsaXRpZXNcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cbi8vIEdpdmVuIHRoZSBzY3JvbGxiYXIgd2lkdGhzIG9mIHNvbWUgb3RoZXIgY29udGFpbmVyLCBjcmVhdGUgYm9yZGVycy9tYXJnaW5zIG9uIHJvd0VscyBpbiBvcmRlciB0byBtYXRjaCB0aGUgbGVmdFxuLy8gYW5kIHJpZ2h0IHNwYWNlIHRoYXQgd2FzIG9mZnNldCBieSB0aGUgc2Nyb2xsYmFycy4gQSAxLXBpeGVsIGJvcmRlciBmaXJzdCwgdGhlbiBtYXJnaW4gYmV5b25kIHRoYXQuXG5mdW5jdGlvbiBjb21wZW5zYXRlU2Nyb2xsKHJvd0Vscywgc2Nyb2xsYmFyV2lkdGhzKSB7XG5cdGlmIChzY3JvbGxiYXJXaWR0aHMubGVmdCkge1xuXHRcdHJvd0Vscy5jc3Moe1xuXHRcdFx0J2JvcmRlci1sZWZ0LXdpZHRoJzogMSxcblx0XHRcdCdtYXJnaW4tbGVmdCc6IHNjcm9sbGJhcldpZHRocy5sZWZ0IC0gMVxuXHRcdH0pO1xuXHR9XG5cdGlmIChzY3JvbGxiYXJXaWR0aHMucmlnaHQpIHtcblx0XHRyb3dFbHMuY3NzKHtcblx0XHRcdCdib3JkZXItcmlnaHQtd2lkdGgnOiAxLFxuXHRcdFx0J21hcmdpbi1yaWdodCc6IHNjcm9sbGJhcldpZHRocy5yaWdodCAtIDFcblx0XHR9KTtcblx0fVxufVxuXG5cbi8vIFVuZG9lcyBjb21wZW5zYXRlU2Nyb2xsIGFuZCByZXN0b3JlcyBhbGwgYm9yZGVycy9tYXJnaW5zXG5mdW5jdGlvbiB1bmNvbXBlbnNhdGVTY3JvbGwocm93RWxzKSB7XG5cdHJvd0Vscy5jc3Moe1xuXHRcdCdtYXJnaW4tbGVmdCc6ICcnLFxuXHRcdCdtYXJnaW4tcmlnaHQnOiAnJyxcblx0XHQnYm9yZGVyLWxlZnQtd2lkdGgnOiAnJyxcblx0XHQnYm9yZGVyLXJpZ2h0LXdpZHRoJzogJydcblx0fSk7XG59XG5cblxuLy8gTWFrZSB0aGUgbW91c2UgY3Vyc29yIGV4cHJlc3MgdGhhdCBhbiBldmVudCBpcyBub3QgYWxsb3dlZCBpbiB0aGUgY3VycmVudCBhcmVhXG5mdW5jdGlvbiBkaXNhYmxlQ3Vyc29yKCkge1xuXHQkKCdib2R5JykuYWRkQ2xhc3MoJ2ZjLW5vdC1hbGxvd2VkJyk7XG59XG5cblxuLy8gUmV0dXJucyB0aGUgbW91c2UgY3Vyc29yIHRvIGl0cyBvcmlnaW5hbCBsb29rXG5mdW5jdGlvbiBlbmFibGVDdXJzb3IoKSB7XG5cdCQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZmMtbm90LWFsbG93ZWQnKTtcbn1cblxuXG4vLyBHaXZlbiBhIHRvdGFsIGF2YWlsYWJsZSBoZWlnaHQgdG8gZmlsbCwgaGF2ZSBgZWxzYCAoZXNzZW50aWFsbHkgY2hpbGQgcm93cykgZXhwYW5kIHRvIGFjY29tb2RhdGUuXG4vLyBCeSBkZWZhdWx0LCBhbGwgZWxlbWVudHMgdGhhdCBhcmUgc2hvcnRlciB0aGFuIHRoZSByZWNvbW1lbmRlZCBoZWlnaHQgYXJlIGV4cGFuZGVkIHVuaWZvcm1seSwgbm90IGNvbnNpZGVyaW5nXG4vLyBhbnkgb3RoZXIgZWxzIHRoYXQgYXJlIGFscmVhZHkgdG9vIHRhbGwuIGlmIGBzaG91bGRSZWRpc3RyaWJ1dGVgIGlzIG9uLCBpdCBjb25zaWRlcnMgdGhlc2UgdGFsbCByb3dzIGFuZFxuLy8gcmVkdWNlcyB0aGUgYXZhaWxhYmxlIGhlaWdodC5cbmZ1bmN0aW9uIGRpc3RyaWJ1dGVIZWlnaHQoZWxzLCBhdmFpbGFibGVIZWlnaHQsIHNob3VsZFJlZGlzdHJpYnV0ZSkge1xuXG5cdC8vICpGTE9PUklORyBOT1RFKjogd2UgZmxvb3IgaW4gY2VydGFpbiBwbGFjZXMgYmVjYXVzZSB6b29tIGNhbiBnaXZlIGluYWNjdXJhdGUgZmxvYXRpbmctcG9pbnQgZGltZW5zaW9ucyxcblx0Ly8gYW5kIGl0IGlzIGJldHRlciB0byBiZSBzaG9ydGVyIHRoYW4gdGFsbGVyLCB0byBhdm9pZCBjcmVhdGluZyB1bm5lY2Vzc2FyeSBzY3JvbGxiYXJzLlxuXG5cdHZhciBtaW5PZmZzZXQxID0gTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyBlbHMubGVuZ3RoKTsgLy8gZm9yIG5vbi1sYXN0IGVsZW1lbnRcblx0dmFyIG1pbk9mZnNldDIgPSBNYXRoLmZsb29yKGF2YWlsYWJsZUhlaWdodCAtIG1pbk9mZnNldDEgKiAoZWxzLmxlbmd0aCAtIDEpKTsgLy8gZm9yIGxhc3QgZWxlbWVudCAqRkxPT1JJTkcgTk9URSpcblx0dmFyIGZsZXhFbHMgPSBbXTsgLy8gZWxlbWVudHMgdGhhdCBhcmUgYWxsb3dlZCB0byBleHBhbmQuIGFycmF5IG9mIERPTSBub2Rlc1xuXHR2YXIgZmxleE9mZnNldHMgPSBbXTsgLy8gYW1vdW50IG9mIHZlcnRpY2FsIHNwYWNlIGl0IHRha2VzIHVwXG5cdHZhciBmbGV4SGVpZ2h0cyA9IFtdOyAvLyBhY3R1YWwgY3NzIGhlaWdodFxuXHR2YXIgdXNlZEhlaWdodCA9IDA7XG5cblx0dW5kaXN0cmlidXRlSGVpZ2h0KGVscyk7IC8vIGdpdmUgYWxsIGVsZW1lbnRzIHRoZWlyIG5hdHVyYWwgaGVpZ2h0XG5cblx0Ly8gZmluZCBlbGVtZW50cyB0aGF0IGFyZSBiZWxvdyB0aGUgcmVjb21tZW5kZWQgaGVpZ2h0IChleHBhbmRhYmxlKS5cblx0Ly8gaW1wb3J0YW50IHRvIHF1ZXJ5IGZvciBoZWlnaHRzIGluIGEgc2luZ2xlIGZpcnN0IHBhc3MgKHRvIGF2b2lkIHJlZmxvdyBvc2NpbGxhdGlvbikuXG5cdGVscy5lYWNoKGZ1bmN0aW9uKGksIGVsKSB7XG5cdFx0dmFyIG1pbk9mZnNldCA9IGkgPT09IGVscy5sZW5ndGggLSAxID8gbWluT2Zmc2V0MiA6IG1pbk9mZnNldDE7XG5cdFx0dmFyIG5hdHVyYWxPZmZzZXQgPSAkKGVsKS5vdXRlckhlaWdodCh0cnVlKTtcblxuXHRcdGlmIChuYXR1cmFsT2Zmc2V0IDwgbWluT2Zmc2V0KSB7XG5cdFx0XHRmbGV4RWxzLnB1c2goZWwpO1xuXHRcdFx0ZmxleE9mZnNldHMucHVzaChuYXR1cmFsT2Zmc2V0KTtcblx0XHRcdGZsZXhIZWlnaHRzLnB1c2goJChlbCkuaGVpZ2h0KCkpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdC8vIHRoaXMgZWxlbWVudCBzdHJldGNoZXMgcGFzdCByZWNvbW1lbmRlZCBoZWlnaHQgKG5vbi1leHBhbmRhYmxlKS4gbWFyayB0aGUgc3BhY2UgYXMgb2NjdXBpZWQuXG5cdFx0XHR1c2VkSGVpZ2h0ICs9IG5hdHVyYWxPZmZzZXQ7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyByZWFkanVzdCB0aGUgcmVjb21tZW5kZWQgaGVpZ2h0IHRvIG9ubHkgY29uc2lkZXIgdGhlIGhlaWdodCBhdmFpbGFibGUgdG8gbm9uLW1heGVkLW91dCByb3dzLlxuXHRpZiAoc2hvdWxkUmVkaXN0cmlidXRlKSB7XG5cdFx0YXZhaWxhYmxlSGVpZ2h0IC09IHVzZWRIZWlnaHQ7XG5cdFx0bWluT2Zmc2V0MSA9IE1hdGguZmxvb3IoYXZhaWxhYmxlSGVpZ2h0IC8gZmxleEVscy5sZW5ndGgpO1xuXHRcdG1pbk9mZnNldDIgPSBNYXRoLmZsb29yKGF2YWlsYWJsZUhlaWdodCAtIG1pbk9mZnNldDEgKiAoZmxleEVscy5sZW5ndGggLSAxKSk7IC8vICpGTE9PUklORyBOT1RFKlxuXHR9XG5cblx0Ly8gYXNzaWduIGhlaWdodHMgdG8gYWxsIGV4cGFuZGFibGUgZWxlbWVudHNcblx0JChmbGV4RWxzKS5lYWNoKGZ1bmN0aW9uKGksIGVsKSB7XG5cdFx0dmFyIG1pbk9mZnNldCA9IGkgPT09IGZsZXhFbHMubGVuZ3RoIC0gMSA/IG1pbk9mZnNldDIgOiBtaW5PZmZzZXQxO1xuXHRcdHZhciBuYXR1cmFsT2Zmc2V0ID0gZmxleE9mZnNldHNbaV07XG5cdFx0dmFyIG5hdHVyYWxIZWlnaHQgPSBmbGV4SGVpZ2h0c1tpXTtcblx0XHR2YXIgbmV3SGVpZ2h0ID0gbWluT2Zmc2V0IC0gKG5hdHVyYWxPZmZzZXQgLSBuYXR1cmFsSGVpZ2h0KTsgLy8gc3VidHJhY3QgdGhlIG1hcmdpbi9wYWRkaW5nXG5cblx0XHRpZiAobmF0dXJhbE9mZnNldCA8IG1pbk9mZnNldCkgeyAvLyB3ZSBjaGVjayB0aGlzIGFnYWluIGJlY2F1c2UgcmVkaXN0cmlidXRpb24gbWlnaHQgaGF2ZSBjaGFuZ2VkIHRoaW5nc1xuXHRcdFx0JChlbCkuaGVpZ2h0KG5ld0hlaWdodCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuXG4vLyBVbmRvZXMgZGlzdHJ1YnV0ZUhlaWdodCwgcmVzdG9yaW5nIGFsbCBlbHMgdG8gdGhlaXIgbmF0dXJhbCBoZWlnaHRcbmZ1bmN0aW9uIHVuZGlzdHJpYnV0ZUhlaWdodChlbHMpIHtcblx0ZWxzLmhlaWdodCgnJyk7XG59XG5cblxuLy8gR2l2ZW4gYGVsc2AsIGEgalF1ZXJ5IHNldCBvZiA8dGQ+IGNlbGxzLCBmaW5kIHRoZSBjZWxsIHdpdGggdGhlIGxhcmdlc3QgbmF0dXJhbCB3aWR0aCBhbmQgc2V0IHRoZSB3aWR0aHMgb2YgYWxsIHRoZVxuLy8gY2VsbHMgdG8gYmUgdGhhdCB3aWR0aC5cbi8vIFBSRVJFUVVJU0lURTogaWYgeW91IHdhbnQgYSBjZWxsIHRvIHRha2UgdXAgd2lkdGgsIGl0IG5lZWRzIHRvIGhhdmUgYSBzaW5nbGUgaW5uZXIgZWxlbWVudCB3LyBkaXNwbGF5OmlubGluZVxuZnVuY3Rpb24gbWF0Y2hDZWxsV2lkdGhzKGVscykge1xuXHR2YXIgbWF4SW5uZXJXaWR0aCA9IDA7XG5cblx0ZWxzLmZpbmQoJz4gKicpLmVhY2goZnVuY3Rpb24oaSwgaW5uZXJFbCkge1xuXHRcdHZhciBpbm5lcldpZHRoID0gJChpbm5lckVsKS5vdXRlcldpZHRoKCk7XG5cdFx0aWYgKGlubmVyV2lkdGggPiBtYXhJbm5lcldpZHRoKSB7XG5cdFx0XHRtYXhJbm5lcldpZHRoID0gaW5uZXJXaWR0aDtcblx0XHR9XG5cdH0pO1xuXG5cdG1heElubmVyV2lkdGgrKzsgLy8gc29tZXRpbWVzIG5vdCBhY2N1cmF0ZSBvZiB3aWR0aCB0aGUgdGV4dCBuZWVkcyB0byBzdGF5IG9uIG9uZSBsaW5lLiBpbnN1cmFuY2VcblxuXHRlbHMud2lkdGgobWF4SW5uZXJXaWR0aCk7XG5cblx0cmV0dXJuIG1heElubmVyV2lkdGg7XG59XG5cblxuLy8gR2l2ZW4gb25lIGVsZW1lbnQgdGhhdCByZXNpZGVzIGluc2lkZSBhbm90aGVyLFxuLy8gU3VidHJhY3RzIHRoZSBoZWlnaHQgb2YgdGhlIGlubmVyIGVsZW1lbnQgZnJvbSB0aGUgb3V0ZXIgZWxlbWVudC5cbmZ1bmN0aW9uIHN1YnRyYWN0SW5uZXJFbEhlaWdodChvdXRlckVsLCBpbm5lckVsKSB7XG5cdHZhciBib3RoID0gb3V0ZXJFbC5hZGQoaW5uZXJFbCk7XG5cdHZhciBkaWZmO1xuXG5cdC8vIGVmZmluJyBJRTgvOS8xMC8xMSBzb21ldGltZXMgcmV0dXJucyAwIGZvciBkaW1lbnNpb25zLiB0aGlzIHdlaXJkIGhhY2sgd2FzIHRoZSBvbmx5IHRoaW5nIHRoYXQgd29ya2VkXG5cdGJvdGguY3NzKHtcblx0XHRwb3NpdGlvbjogJ3JlbGF0aXZlJywgLy8gY2F1c2UgYSByZWZsb3csIHdoaWNoIHdpbGwgZm9yY2UgZnJlc2ggZGltZW5zaW9uIHJlY2FsY3VsYXRpb25cblx0XHRsZWZ0OiAtMSAvLyBlbnN1cmUgcmVmbG93IGluIGNhc2UgdGhlIGVsIHdhcyBhbHJlYWR5IHJlbGF0aXZlLiBuZWdhdGl2ZSBpcyBsZXNzIGxpa2VseSB0byBjYXVzZSBuZXcgc2Nyb2xsXG5cdH0pO1xuXHRkaWZmID0gb3V0ZXJFbC5vdXRlckhlaWdodCgpIC0gaW5uZXJFbC5vdXRlckhlaWdodCgpOyAvLyBncmFiIHRoZSBkaW1lbnNpb25zXG5cdGJvdGguY3NzKHsgcG9zaXRpb246ICcnLCBsZWZ0OiAnJyB9KTsgLy8gdW5kbyBoYWNrXG5cblx0cmV0dXJuIGRpZmY7XG59XG5cblxuLyogRWxlbWVudCBHZW9tIFV0aWxpdGllc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbkZDLmdldE91dGVyUmVjdCA9IGdldE91dGVyUmVjdDtcbkZDLmdldENsaWVudFJlY3QgPSBnZXRDbGllbnRSZWN0O1xuRkMuZ2V0Q29udGVudFJlY3QgPSBnZXRDb250ZW50UmVjdDtcbkZDLmdldFNjcm9sbGJhcldpZHRocyA9IGdldFNjcm9sbGJhcldpZHRocztcblxuXG4vLyBib3Jyb3dlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LXVpL2Jsb2IvMS4xMS4wL3VpL2NvcmUuanMjTDUxXG5mdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnQoZWwpIHtcblx0dmFyIHBvc2l0aW9uID0gZWwuY3NzKCdwb3NpdGlvbicpLFxuXHRcdHNjcm9sbFBhcmVudCA9IGVsLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gJCh0aGlzKTtcblx0XHRcdHJldHVybiAoLyhhdXRvfHNjcm9sbCkvKS50ZXN0KFxuXHRcdFx0XHRwYXJlbnQuY3NzKCdvdmVyZmxvdycpICsgcGFyZW50LmNzcygnb3ZlcmZsb3cteScpICsgcGFyZW50LmNzcygnb3ZlcmZsb3cteCcpXG5cdFx0XHQpO1xuXHRcdH0pLmVxKDApO1xuXG5cdHJldHVybiBwb3NpdGlvbiA9PT0gJ2ZpeGVkJyB8fCAhc2Nyb2xsUGFyZW50Lmxlbmd0aCA/ICQoZWxbMF0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCkgOiBzY3JvbGxQYXJlbnQ7XG59XG5cblxuLy8gUXVlcmllcyB0aGUgb3V0ZXIgYm91bmRpbmcgYXJlYSBvZiBhIGpRdWVyeSBlbGVtZW50LlxuLy8gUmV0dXJucyBhIHJlY3RhbmdsZSB3aXRoIGFic29sdXRlIGNvb3JkaW5hdGVzOiBsZWZ0LCByaWdodCAoZXhjbHVzaXZlKSwgdG9wLCBib3R0b20gKGV4Y2x1c2l2ZSkuXG4vLyBPcmlnaW4gaXMgb3B0aW9uYWwuXG5mdW5jdGlvbiBnZXRPdXRlclJlY3QoZWwsIG9yaWdpbikge1xuXHR2YXIgb2Zmc2V0ID0gZWwub2Zmc2V0KCk7XG5cdHZhciBsZWZ0ID0gb2Zmc2V0LmxlZnQgLSAob3JpZ2luID8gb3JpZ2luLmxlZnQgOiAwKTtcblx0dmFyIHRvcCA9IG9mZnNldC50b3AgLSAob3JpZ2luID8gb3JpZ2luLnRvcCA6IDApO1xuXG5cdHJldHVybiB7XG5cdFx0bGVmdDogbGVmdCxcblx0XHRyaWdodDogbGVmdCArIGVsLm91dGVyV2lkdGgoKSxcblx0XHR0b3A6IHRvcCxcblx0XHRib3R0b206IHRvcCArIGVsLm91dGVySGVpZ2h0KClcblx0fTtcbn1cblxuXG4vLyBRdWVyaWVzIHRoZSBhcmVhIHdpdGhpbiB0aGUgbWFyZ2luL2JvcmRlci9zY3JvbGxiYXJzIG9mIGEgalF1ZXJ5IGVsZW1lbnQuIERvZXMgbm90IGdvIHdpdGhpbiB0aGUgcGFkZGluZy5cbi8vIFJldHVybnMgYSByZWN0YW5nbGUgd2l0aCBhYnNvbHV0ZSBjb29yZGluYXRlczogbGVmdCwgcmlnaHQgKGV4Y2x1c2l2ZSksIHRvcCwgYm90dG9tIChleGNsdXNpdmUpLlxuLy8gT3JpZ2luIGlzIG9wdGlvbmFsLlxuLy8gTk9URTogc2hvdWxkIHVzZSBjbGllbnRMZWZ0L2NsaWVudFRvcCwgYnV0IHZlcnkgdW5yZWxpYWJsZSBjcm9zcy1icm93c2VyLlxuZnVuY3Rpb24gZ2V0Q2xpZW50UmVjdChlbCwgb3JpZ2luKSB7XG5cdHZhciBvZmZzZXQgPSBlbC5vZmZzZXQoKTtcblx0dmFyIHNjcm9sbGJhcldpZHRocyA9IGdldFNjcm9sbGJhcldpZHRocyhlbCk7XG5cdHZhciBsZWZ0ID0gb2Zmc2V0LmxlZnQgKyBnZXRDc3NGbG9hdChlbCwgJ2JvcmRlci1sZWZ0LXdpZHRoJykgKyBzY3JvbGxiYXJXaWR0aHMubGVmdCAtIChvcmlnaW4gPyBvcmlnaW4ubGVmdCA6IDApO1xuXHR2YXIgdG9wID0gb2Zmc2V0LnRvcCArIGdldENzc0Zsb2F0KGVsLCAnYm9yZGVyLXRvcC13aWR0aCcpICsgc2Nyb2xsYmFyV2lkdGhzLnRvcCAtIChvcmlnaW4gPyBvcmlnaW4udG9wIDogMCk7XG5cblx0cmV0dXJuIHtcblx0XHRsZWZ0OiBsZWZ0LFxuXHRcdHJpZ2h0OiBsZWZ0ICsgZWxbMF0uY2xpZW50V2lkdGgsIC8vIGNsaWVudFdpZHRoIGluY2x1ZGVzIHBhZGRpbmcgYnV0IE5PVCBzY3JvbGxiYXJzXG5cdFx0dG9wOiB0b3AsXG5cdFx0Ym90dG9tOiB0b3AgKyBlbFswXS5jbGllbnRIZWlnaHQgLy8gY2xpZW50SGVpZ2h0IGluY2x1ZGVzIHBhZGRpbmcgYnV0IE5PVCBzY3JvbGxiYXJzXG5cdH07XG59XG5cblxuLy8gUXVlcmllcyB0aGUgYXJlYSB3aXRoaW4gdGhlIG1hcmdpbi9ib3JkZXIvcGFkZGluZyBvZiBhIGpRdWVyeSBlbGVtZW50LiBBc3N1bWVkIG5vdCB0byBoYXZlIHNjcm9sbGJhcnMuXG4vLyBSZXR1cm5zIGEgcmVjdGFuZ2xlIHdpdGggYWJzb2x1dGUgY29vcmRpbmF0ZXM6IGxlZnQsIHJpZ2h0IChleGNsdXNpdmUpLCB0b3AsIGJvdHRvbSAoZXhjbHVzaXZlKS5cbi8vIE9yaWdpbiBpcyBvcHRpb25hbC5cbmZ1bmN0aW9uIGdldENvbnRlbnRSZWN0KGVsLCBvcmlnaW4pIHtcblx0dmFyIG9mZnNldCA9IGVsLm9mZnNldCgpOyAvLyBqdXN0IG91dHNpZGUgb2YgYm9yZGVyLCBtYXJnaW4gbm90IGluY2x1ZGVkXG5cdHZhciBsZWZ0ID0gb2Zmc2V0LmxlZnQgKyBnZXRDc3NGbG9hdChlbCwgJ2JvcmRlci1sZWZ0LXdpZHRoJykgKyBnZXRDc3NGbG9hdChlbCwgJ3BhZGRpbmctbGVmdCcpIC1cblx0XHQob3JpZ2luID8gb3JpZ2luLmxlZnQgOiAwKTtcblx0dmFyIHRvcCA9IG9mZnNldC50b3AgKyBnZXRDc3NGbG9hdChlbCwgJ2JvcmRlci10b3Atd2lkdGgnKSArIGdldENzc0Zsb2F0KGVsLCAncGFkZGluZy10b3AnKSAtXG5cdFx0KG9yaWdpbiA/IG9yaWdpbi50b3AgOiAwKTtcblxuXHRyZXR1cm4ge1xuXHRcdGxlZnQ6IGxlZnQsXG5cdFx0cmlnaHQ6IGxlZnQgKyBlbC53aWR0aCgpLFxuXHRcdHRvcDogdG9wLFxuXHRcdGJvdHRvbTogdG9wICsgZWwuaGVpZ2h0KClcblx0fTtcbn1cblxuXG4vLyBSZXR1cm5zIHRoZSBjb21wdXRlZCBsZWZ0L3JpZ2h0L3RvcC9ib3R0b20gc2Nyb2xsYmFyIHdpZHRocyBmb3IgdGhlIGdpdmVuIGpRdWVyeSBlbGVtZW50LlxuLy8gTk9URTogc2hvdWxkIHVzZSBjbGllbnRMZWZ0L2NsaWVudFRvcCwgYnV0IHZlcnkgdW5yZWxpYWJsZSBjcm9zcy1icm93c2VyLlxuZnVuY3Rpb24gZ2V0U2Nyb2xsYmFyV2lkdGhzKGVsKSB7XG5cdHZhciBsZWZ0UmlnaHRXaWR0aCA9IGVsLmlubmVyV2lkdGgoKSAtIGVsWzBdLmNsaWVudFdpZHRoOyAvLyB0aGUgcGFkZGluZ3MgY2FuY2VsIG91dCwgbGVhdmluZyB0aGUgc2Nyb2xsYmFyc1xuXHR2YXIgd2lkdGhzID0ge1xuXHRcdGxlZnQ6IDAsXG5cdFx0cmlnaHQ6IDAsXG5cdFx0dG9wOiAwLFxuXHRcdGJvdHRvbTogZWwuaW5uZXJIZWlnaHQoKSAtIGVsWzBdLmNsaWVudEhlaWdodCAvLyB0aGUgcGFkZGluZ3MgY2FuY2VsIG91dCwgbGVhdmluZyB0aGUgYm90dG9tIHNjcm9sbGJhclxuXHR9O1xuXG5cdGlmIChnZXRJc0xlZnRSdGxTY3JvbGxiYXJzKCkgJiYgZWwuY3NzKCdkaXJlY3Rpb24nKSA9PSAncnRsJykgeyAvLyBpcyB0aGUgc2Nyb2xsYmFyIG9uIHRoZSBsZWZ0IHNpZGU/XG5cdFx0d2lkdGhzLmxlZnQgPSBsZWZ0UmlnaHRXaWR0aDtcblx0fVxuXHRlbHNlIHtcblx0XHR3aWR0aHMucmlnaHQgPSBsZWZ0UmlnaHRXaWR0aDtcblx0fVxuXG5cdHJldHVybiB3aWR0aHM7XG59XG5cblxuLy8gTG9naWMgZm9yIGRldGVybWluaW5nIGlmLCB3aGVuIHRoZSBlbGVtZW50IGlzIHJpZ2h0LXRvLWxlZnQsIHRoZSBzY3JvbGxiYXIgYXBwZWFycyBvbiB0aGUgbGVmdCBzaWRlXG5cbnZhciBfaXNMZWZ0UnRsU2Nyb2xsYmFycyA9IG51bGw7XG5cbmZ1bmN0aW9uIGdldElzTGVmdFJ0bFNjcm9sbGJhcnMoKSB7IC8vIHJlc3BvbnNpYmxlIGZvciBjYWNoaW5nIHRoZSBjb21wdXRhdGlvblxuXHRpZiAoX2lzTGVmdFJ0bFNjcm9sbGJhcnMgPT09IG51bGwpIHtcblx0XHRfaXNMZWZ0UnRsU2Nyb2xsYmFycyA9IGNvbXB1dGVJc0xlZnRSdGxTY3JvbGxiYXJzKCk7XG5cdH1cblx0cmV0dXJuIF9pc0xlZnRSdGxTY3JvbGxiYXJzO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlSXNMZWZ0UnRsU2Nyb2xsYmFycygpIHsgLy8gY3JlYXRlcyBhbiBvZmZzY3JlZW4gdGVzdCBlbGVtZW50LCB0aGVuIHJlbW92ZXMgaXRcblx0dmFyIGVsID0gJCgnPGRpdj48ZGl2Lz48L2Rpdj4nKVxuXHRcdC5jc3Moe1xuXHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0XHR0b3A6IC0xMDAwLFxuXHRcdFx0bGVmdDogMCxcblx0XHRcdGJvcmRlcjogMCxcblx0XHRcdHBhZGRpbmc6IDAsXG5cdFx0XHRvdmVyZmxvdzogJ3Njcm9sbCcsXG5cdFx0XHRkaXJlY3Rpb246ICdydGwnXG5cdFx0fSlcblx0XHQuYXBwZW5kVG8oJ2JvZHknKTtcblx0dmFyIGlubmVyRWwgPSBlbC5jaGlsZHJlbigpO1xuXHR2YXIgcmVzID0gaW5uZXJFbC5vZmZzZXQoKS5sZWZ0ID4gZWwub2Zmc2V0KCkubGVmdDsgLy8gaXMgdGhlIGlubmVyIGRpdiBzaGlmdGVkIHRvIGFjY29tbW9kYXRlIGEgbGVmdCBzY3JvbGxiYXI/XG5cdGVsLnJlbW92ZSgpO1xuXHRyZXR1cm4gcmVzO1xufVxuXG5cbi8vIFJldHJpZXZlcyBhIGpRdWVyeSBlbGVtZW50J3MgY29tcHV0ZWQgQ1NTIHZhbHVlIGFzIGEgZmxvYXRpbmctcG9pbnQgbnVtYmVyLlxuLy8gSWYgdGhlIHF1ZXJpZWQgdmFsdWUgaXMgbm9uLW51bWVyaWMgKGV4OiBJRSBjYW4gcmV0dXJuIFwibWVkaXVtXCIgZm9yIGJvcmRlciB3aWR0aCksIHdpbGwganVzdCByZXR1cm4gemVyby5cbmZ1bmN0aW9uIGdldENzc0Zsb2F0KGVsLCBwcm9wKSB7XG5cdHJldHVybiBwYXJzZUZsb2F0KGVsLmNzcyhwcm9wKSkgfHwgMDtcbn1cblxuXG4vKiBNb3VzZSAvIFRvdWNoIFV0aWxpdGllc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbkZDLnByZXZlbnREZWZhdWx0ID0gcHJldmVudERlZmF1bHQ7XG5cblxuLy8gUmV0dXJucyBhIGJvb2xlYW4gd2hldGhlciB0aGlzIHdhcyBhIGxlZnQgbW91c2UgY2xpY2sgYW5kIG5vIGN0cmwga2V5ICh3aGljaCBtZWFucyByaWdodCBjbGljayBvbiBNYWMpXG5mdW5jdGlvbiBpc1ByaW1hcnlNb3VzZUJ1dHRvbihldikge1xuXHRyZXR1cm4gZXYud2hpY2ggPT0gMSAmJiAhZXYuY3RybEtleTtcbn1cblxuXG5mdW5jdGlvbiBnZXRFdlgoZXYpIHtcblx0aWYgKGV2LnBhZ2VYICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gZXYucGFnZVg7XG5cdH1cblx0dmFyIHRvdWNoZXMgPSBldi5vcmlnaW5hbEV2ZW50LnRvdWNoZXM7XG5cdGlmICh0b3VjaGVzKSB7XG5cdFx0cmV0dXJuIHRvdWNoZXNbMF0ucGFnZVg7XG5cdH1cbn1cblxuXG5mdW5jdGlvbiBnZXRFdlkoZXYpIHtcblx0aWYgKGV2LnBhZ2VZICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gZXYucGFnZVk7XG5cdH1cblx0dmFyIHRvdWNoZXMgPSBldi5vcmlnaW5hbEV2ZW50LnRvdWNoZXM7XG5cdGlmICh0b3VjaGVzKSB7XG5cdFx0cmV0dXJuIHRvdWNoZXNbMF0ucGFnZVk7XG5cdH1cbn1cblxuXG5mdW5jdGlvbiBnZXRFdklzVG91Y2goZXYpIHtcblx0cmV0dXJuIC9edG91Y2gvLnRlc3QoZXYudHlwZSk7XG59XG5cblxuZnVuY3Rpb24gcHJldmVudFNlbGVjdGlvbihlbCkge1xuXHRlbC5hZGRDbGFzcygnZmMtdW5zZWxlY3RhYmxlJylcblx0XHQub24oJ3NlbGVjdHN0YXJ0JywgcHJldmVudERlZmF1bHQpO1xufVxuXG5cbi8vIFN0b3BzIGEgbW91c2UvdG91Y2ggZXZlbnQgZnJvbSBkb2luZyBpdCdzIG5hdGl2ZSBicm93c2VyIGFjdGlvblxuZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXYpIHtcblx0ZXYucHJldmVudERlZmF1bHQoKTtcbn1cblxuXG4vLyBhdHRhY2ggYSBoYW5kbGVyIHRvIGdldCBjYWxsZWQgd2hlbiBBTlkgc2Nyb2xsIGFjdGlvbiBoYXBwZW5zIG9uIHRoZSBwYWdlLlxuLy8gdGhpcyB3YXMgaW1wb3NzaWJsZSB0byBkbyB3aXRoIG5vcm1hbCBvbi9vZmYgYmVjYXVzZSAnc2Nyb2xsJyBkb2Vzbid0IGJ1YmJsZS5cbi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMyOTU0NTY1Lzk2MzQyXG4vLyByZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLlxuZnVuY3Rpb24gYmluZEFueVNjcm9sbChoYW5kbGVyKSB7XG5cdGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVyLCB0cnVlKTsgLy8gdXNlQ2FwdHVyZT10cnVlXG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuXG5cbi8vIHVuZG9lcyBiaW5kQW55U2Nyb2xsLiBtdXN0IHBhc3MgaW4gdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuLy8gcmV0dXJucyBgdHJ1ZWAgb24gc3VjY2Vzcy5cbmZ1bmN0aW9uIHVuYmluZEFueVNjcm9sbChoYW5kbGVyKSB7XG5cdGlmICh3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuXHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVyLCB0cnVlKTsgLy8gdXNlQ2FwdHVyZT10cnVlXG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuXG5cbi8qIEdlbmVyYWwgR2VvbWV0cnkgVXRpbHNcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5GQy5pbnRlcnNlY3RSZWN0cyA9IGludGVyc2VjdFJlY3RzO1xuXG4vLyBSZXR1cm5zIGEgbmV3IHJlY3RhbmdsZSB0aGF0IGlzIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhlIHR3byByZWN0YW5nbGVzLiBJZiB0aGV5IGRvbid0IGludGVyc2VjdCwgcmV0dXJucyBmYWxzZVxuZnVuY3Rpb24gaW50ZXJzZWN0UmVjdHMocmVjdDEsIHJlY3QyKSB7XG5cdHZhciByZXMgPSB7XG5cdFx0bGVmdDogTWF0aC5tYXgocmVjdDEubGVmdCwgcmVjdDIubGVmdCksXG5cdFx0cmlnaHQ6IE1hdGgubWluKHJlY3QxLnJpZ2h0LCByZWN0Mi5yaWdodCksXG5cdFx0dG9wOiBNYXRoLm1heChyZWN0MS50b3AsIHJlY3QyLnRvcCksXG5cdFx0Ym90dG9tOiBNYXRoLm1pbihyZWN0MS5ib3R0b20sIHJlY3QyLmJvdHRvbSlcblx0fTtcblxuXHRpZiAocmVzLmxlZnQgPCByZXMucmlnaHQgJiYgcmVzLnRvcCA8IHJlcy5ib3R0b20pIHtcblx0XHRyZXR1cm4gcmVzO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cblxuXG4vLyBSZXR1cm5zIGEgbmV3IHBvaW50IHRoYXQgd2lsbCBoYXZlIGJlZW4gbW92ZWQgdG8gcmVzaWRlIHdpdGhpbiB0aGUgZ2l2ZW4gcmVjdGFuZ2xlXG5mdW5jdGlvbiBjb25zdHJhaW5Qb2ludChwb2ludCwgcmVjdCkge1xuXHRyZXR1cm4ge1xuXHRcdGxlZnQ6IE1hdGgubWluKE1hdGgubWF4KHBvaW50LmxlZnQsIHJlY3QubGVmdCksIHJlY3QucmlnaHQpLFxuXHRcdHRvcDogTWF0aC5taW4oTWF0aC5tYXgocG9pbnQudG9wLCByZWN0LnRvcCksIHJlY3QuYm90dG9tKVxuXHR9O1xufVxuXG5cbi8vIFJldHVybnMgYSBwb2ludCB0aGF0IGlzIHRoZSBjZW50ZXIgb2YgdGhlIGdpdmVuIHJlY3RhbmdsZVxuZnVuY3Rpb24gZ2V0UmVjdENlbnRlcihyZWN0KSB7XG5cdHJldHVybiB7XG5cdFx0bGVmdDogKHJlY3QubGVmdCArIHJlY3QucmlnaHQpIC8gMixcblx0XHR0b3A6IChyZWN0LnRvcCArIHJlY3QuYm90dG9tKSAvIDJcblx0fTtcbn1cblxuXG4vLyBTdWJ0cmFjdHMgcG9pbnQyJ3MgY29vcmRpbmF0ZXMgZnJvbSBwb2ludDEncyBjb29yZGluYXRlcywgcmV0dXJuaW5nIGEgZGVsdGFcbmZ1bmN0aW9uIGRpZmZQb2ludHMocG9pbnQxLCBwb2ludDIpIHtcblx0cmV0dXJuIHtcblx0XHRsZWZ0OiBwb2ludDEubGVmdCAtIHBvaW50Mi5sZWZ0LFxuXHRcdHRvcDogcG9pbnQxLnRvcCAtIHBvaW50Mi50b3Bcblx0fTtcbn1cblxuXG4vKiBPYmplY3QgT3JkZXJpbmcgYnkgRmllbGRcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5GQy5wYXJzZUZpZWxkU3BlY3MgPSBwYXJzZUZpZWxkU3BlY3M7XG5GQy5jb21wYXJlQnlGaWVsZFNwZWNzID0gY29tcGFyZUJ5RmllbGRTcGVjcztcbkZDLmNvbXBhcmVCeUZpZWxkU3BlYyA9IGNvbXBhcmVCeUZpZWxkU3BlYztcbkZDLmZsZXhpYmxlQ29tcGFyZSA9IGZsZXhpYmxlQ29tcGFyZTtcblxuXG5mdW5jdGlvbiBwYXJzZUZpZWxkU3BlY3MoaW5wdXQpIHtcblx0dmFyIHNwZWNzID0gW107XG5cdHZhciB0b2tlbnMgPSBbXTtcblx0dmFyIGksIHRva2VuO1xuXG5cdGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG5cdFx0dG9rZW5zID0gaW5wdXQuc3BsaXQoL1xccyosXFxzKi8pO1xuXHR9XG5cdGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHRva2VucyA9IFsgaW5wdXQgXTtcblx0fVxuXHRlbHNlIGlmICgkLmlzQXJyYXkoaW5wdXQpKSB7XG5cdFx0dG9rZW5zID0gaW5wdXQ7XG5cdH1cblxuXHRmb3IgKGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG5cdFx0dG9rZW4gPSB0b2tlbnNbaV07XG5cblx0XHRpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuXHRcdFx0c3BlY3MucHVzaChcblx0XHRcdFx0dG9rZW4uY2hhckF0KDApID09ICctJyA/XG5cdFx0XHRcdFx0eyBmaWVsZDogdG9rZW4uc3Vic3RyaW5nKDEpLCBvcmRlcjogLTEgfSA6XG5cdFx0XHRcdFx0eyBmaWVsZDogdG9rZW4sIG9yZGVyOiAxIH1cblx0XHRcdCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0c3BlY3MucHVzaCh7IGZ1bmM6IHRva2VuIH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBzcGVjcztcbn1cblxuXG5mdW5jdGlvbiBjb21wYXJlQnlGaWVsZFNwZWNzKG9iajEsIG9iajIsIGZpZWxkU3BlY3MpIHtcblx0dmFyIGk7XG5cdHZhciBjbXA7XG5cblx0Zm9yIChpID0gMDsgaSA8IGZpZWxkU3BlY3MubGVuZ3RoOyBpKyspIHtcblx0XHRjbXAgPSBjb21wYXJlQnlGaWVsZFNwZWMob2JqMSwgb2JqMiwgZmllbGRTcGVjc1tpXSk7XG5cdFx0aWYgKGNtcCkge1xuXHRcdFx0cmV0dXJuIGNtcDtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gMDtcbn1cblxuXG5mdW5jdGlvbiBjb21wYXJlQnlGaWVsZFNwZWMob2JqMSwgb2JqMiwgZmllbGRTcGVjKSB7XG5cdGlmIChmaWVsZFNwZWMuZnVuYykge1xuXHRcdHJldHVybiBmaWVsZFNwZWMuZnVuYyhvYmoxLCBvYmoyKTtcblx0fVxuXHRyZXR1cm4gZmxleGlibGVDb21wYXJlKG9iajFbZmllbGRTcGVjLmZpZWxkXSwgb2JqMltmaWVsZFNwZWMuZmllbGRdKSAqXG5cdFx0KGZpZWxkU3BlYy5vcmRlciB8fCAxKTtcbn1cblxuXG5mdW5jdGlvbiBmbGV4aWJsZUNvbXBhcmUoYSwgYikge1xuXHRpZiAoIWEgJiYgIWIpIHtcblx0XHRyZXR1cm4gMDtcblx0fVxuXHRpZiAoYiA9PSBudWxsKSB7XG5cdFx0cmV0dXJuIC0xO1xuXHR9XG5cdGlmIChhID09IG51bGwpIHtcblx0XHRyZXR1cm4gMTtcblx0fVxuXHRpZiAoJC50eXBlKGEpID09PSAnc3RyaW5nJyB8fCAkLnR5cGUoYikgPT09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIFN0cmluZyhhKS5sb2NhbGVDb21wYXJlKFN0cmluZyhiKSk7XG5cdH1cblx0cmV0dXJuIGEgLSBiO1xufVxuXG5cbi8qIEZ1bGxDYWxlbmRhci1zcGVjaWZpYyBNaXNjIFV0aWxpdGllc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuLy8gQ29tcHV0ZXMgdGhlIGludGVyc2VjdGlvbiBvZiB0aGUgdHdvIHJhbmdlcy4gV2lsbCByZXR1cm4gZnJlc2ggZGF0ZSBjbG9uZXMgaW4gYSByYW5nZS5cbi8vIFJldHVybnMgdW5kZWZpbmVkIGlmIG5vIGludGVyc2VjdGlvbi5cbi8vIEV4cGVjdHMgYWxsIGRhdGVzIHRvIGJlIG5vcm1hbGl6ZWQgdG8gdGhlIHNhbWUgdGltZXpvbmUgYmVmb3JlaGFuZC5cbi8vIFRPRE86IG1vdmUgdG8gZGF0ZSBzZWN0aW9uP1xuZnVuY3Rpb24gaW50ZXJzZWN0UmFuZ2VzKHN1YmplY3RSYW5nZSwgY29uc3RyYWludFJhbmdlKSB7XG5cdHZhciBzdWJqZWN0U3RhcnQgPSBzdWJqZWN0UmFuZ2Uuc3RhcnQ7XG5cdHZhciBzdWJqZWN0RW5kID0gc3ViamVjdFJhbmdlLmVuZDtcblx0dmFyIGNvbnN0cmFpbnRTdGFydCA9IGNvbnN0cmFpbnRSYW5nZS5zdGFydDtcblx0dmFyIGNvbnN0cmFpbnRFbmQgPSBjb25zdHJhaW50UmFuZ2UuZW5kO1xuXHR2YXIgc2VnU3RhcnQsIHNlZ0VuZDtcblx0dmFyIGlzU3RhcnQsIGlzRW5kO1xuXG5cdGlmIChzdWJqZWN0RW5kID4gY29uc3RyYWludFN0YXJ0ICYmIHN1YmplY3RTdGFydCA8IGNvbnN0cmFpbnRFbmQpIHsgLy8gaW4gYm91bmRzIGF0IGFsbD9cblxuXHRcdGlmIChzdWJqZWN0U3RhcnQgPj0gY29uc3RyYWludFN0YXJ0KSB7XG5cdFx0XHRzZWdTdGFydCA9IHN1YmplY3RTdGFydC5jbG9uZSgpO1xuXHRcdFx0aXNTdGFydCA9IHRydWU7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0c2VnU3RhcnQgPSBjb25zdHJhaW50U3RhcnQuY2xvbmUoKTtcblx0XHRcdGlzU3RhcnQgPSAgZmFsc2U7XG5cdFx0fVxuXG5cdFx0aWYgKHN1YmplY3RFbmQgPD0gY29uc3RyYWludEVuZCkge1xuXHRcdFx0c2VnRW5kID0gc3ViamVjdEVuZC5jbG9uZSgpO1xuXHRcdFx0aXNFbmQgPSB0cnVlO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHNlZ0VuZCA9IGNvbnN0cmFpbnRFbmQuY2xvbmUoKTtcblx0XHRcdGlzRW5kID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHN0YXJ0OiBzZWdTdGFydCxcblx0XHRcdGVuZDogc2VnRW5kLFxuXHRcdFx0aXNTdGFydDogaXNTdGFydCxcblx0XHRcdGlzRW5kOiBpc0VuZFxuXHRcdH07XG5cdH1cbn1cblxuXG4vKiBEYXRlIFV0aWxpdGllc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbkZDLmNvbXB1dGVJbnRlcnZhbFVuaXQgPSBjb21wdXRlSW50ZXJ2YWxVbml0O1xuRkMuZGl2aWRlUmFuZ2VCeUR1cmF0aW9uID0gZGl2aWRlUmFuZ2VCeUR1cmF0aW9uO1xuRkMuZGl2aWRlRHVyYXRpb25CeUR1cmF0aW9uID0gZGl2aWRlRHVyYXRpb25CeUR1cmF0aW9uO1xuRkMubXVsdGlwbHlEdXJhdGlvbiA9IG11bHRpcGx5RHVyYXRpb247XG5GQy5kdXJhdGlvbkhhc1RpbWUgPSBkdXJhdGlvbkhhc1RpbWU7XG5cbnZhciBkYXlJRHMgPSBbICdzdW4nLCAnbW9uJywgJ3R1ZScsICd3ZWQnLCAndGh1JywgJ2ZyaScsICdzYXQnIF07XG52YXIgaW50ZXJ2YWxVbml0cyA9IFsgJ3llYXInLCAnbW9udGgnLCAnd2VlaycsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgJ21pbGxpc2Vjb25kJyBdO1xuXG5cbi8vIERpZmZzIHRoZSB0d28gbW9tZW50cyBpbnRvIGEgRHVyYXRpb24gd2hlcmUgZnVsbC1kYXlzIGFyZSByZWNvcmRlZCBmaXJzdCwgdGhlbiB0aGUgcmVtYWluaW5nIHRpbWUuXG4vLyBNb21lbnRzIHdpbGwgaGF2ZSB0aGVpciB0aW1lem9uZXMgbm9ybWFsaXplZC5cbmZ1bmN0aW9uIGRpZmZEYXlUaW1lKGEsIGIpIHtcblx0cmV0dXJuIG1vbWVudC5kdXJhdGlvbih7XG5cdFx0ZGF5czogYS5jbG9uZSgpLnN0cmlwVGltZSgpLmRpZmYoYi5jbG9uZSgpLnN0cmlwVGltZSgpLCAnZGF5cycpLFxuXHRcdG1zOiBhLnRpbWUoKSAtIGIudGltZSgpIC8vIHRpbWUtb2YtZGF5IGZyb20gZGF5IHN0YXJ0LiBkaXNyZWdhcmRzIHRpbWV6b25lXG5cdH0pO1xufVxuXG5cbi8vIERpZmZzIHRoZSB0d28gbW9tZW50cyB2aWEgdGhlaXIgc3RhcnQtb2YtZGF5IChyZWdhcmRsZXNzIG9mIHRpbWV6b25lKS4gUHJvZHVjZXMgd2hvbGUtZGF5IGR1cmF0aW9ucy5cbmZ1bmN0aW9uIGRpZmZEYXkoYSwgYikge1xuXHRyZXR1cm4gbW9tZW50LmR1cmF0aW9uKHtcblx0XHRkYXlzOiBhLmNsb25lKCkuc3RyaXBUaW1lKCkuZGlmZihiLmNsb25lKCkuc3RyaXBUaW1lKCksICdkYXlzJylcblx0fSk7XG59XG5cblxuLy8gRGlmZnMgdHdvIG1vbWVudHMsIHByb2R1Y2luZyBhIGR1cmF0aW9uLCBtYWRlIG9mIGEgd2hvbGUtdW5pdC1pbmNyZW1lbnQgb2YgdGhlIGdpdmVuIHVuaXQuIFVzZXMgcm91bmRpbmcuXG5mdW5jdGlvbiBkaWZmQnlVbml0KGEsIGIsIHVuaXQpIHtcblx0cmV0dXJuIG1vbWVudC5kdXJhdGlvbihcblx0XHRNYXRoLnJvdW5kKGEuZGlmZihiLCB1bml0LCB0cnVlKSksIC8vIHJldHVybkZsb2F0PXRydWVcblx0XHR1bml0XG5cdCk7XG59XG5cblxuLy8gQ29tcHV0ZXMgdGhlIHVuaXQgbmFtZSBvZiB0aGUgbGFyZ2VzdCB3aG9sZS11bml0IHBlcmlvZCBvZiB0aW1lLlxuLy8gRm9yIGV4YW1wbGUsIDQ4IGhvdXJzIHdpbGwgYmUgXCJkYXlzXCIgd2hlcmVhcyA0OSBob3VycyB3aWxsIGJlIFwiaG91cnNcIi5cbi8vIEFjY2VwdHMgc3RhcnQvZW5kLCBhIHJhbmdlIG9iamVjdCwgb3IgYW4gb3JpZ2luYWwgZHVyYXRpb24gb2JqZWN0LlxuZnVuY3Rpb24gY29tcHV0ZUludGVydmFsVW5pdChzdGFydCwgZW5kKSB7XG5cdHZhciBpLCB1bml0O1xuXHR2YXIgdmFsO1xuXG5cdGZvciAoaSA9IDA7IGkgPCBpbnRlcnZhbFVuaXRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dW5pdCA9IGludGVydmFsVW5pdHNbaV07XG5cdFx0dmFsID0gY29tcHV0ZVJhbmdlQXModW5pdCwgc3RhcnQsIGVuZCk7XG5cblx0XHRpZiAodmFsID49IDEgJiYgaXNJbnQodmFsKSkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHVuaXQ7IC8vIHdpbGwgYmUgXCJtaWxsaXNlY29uZHNcIiBpZiBub3RoaW5nIGVsc2UgbWF0Y2hlc1xufVxuXG5cbi8vIENvbXB1dGVzIHRoZSBudW1iZXIgb2YgdW5pdHMgKGxpa2UgXCJob3Vyc1wiKSBpbiB0aGUgZ2l2ZW4gcmFuZ2UuXG4vLyBSYW5nZSBjYW4gYmUgYSB7c3RhcnQsZW5kfSBvYmplY3QsIHNlcGFyYXRlIHN0YXJ0L2VuZCBhcmdzLCBvciBhIER1cmF0aW9uLlxuLy8gUmVzdWx0cyBhcmUgYmFzZWQgb24gTW9tZW50J3MgLmFzKCkgYW5kIC5kaWZmKCkgbWV0aG9kcywgc28gcmVzdWx0cyBjYW4gZGVwZW5kIG9uIGludGVybmFsIGhhbmRsaW5nXG4vLyBvZiBtb250aC1kaWZmaW5nIGxvZ2ljICh3aGljaCB0ZW5kcyB0byB2YXJ5IGZyb20gdmVyc2lvbiB0byB2ZXJzaW9uKS5cbmZ1bmN0aW9uIGNvbXB1dGVSYW5nZUFzKHVuaXQsIHN0YXJ0LCBlbmQpIHtcblxuXHRpZiAoZW5kICE9IG51bGwpIHsgLy8gZ2l2ZW4gc3RhcnQsIGVuZFxuXHRcdHJldHVybiBlbmQuZGlmZihzdGFydCwgdW5pdCwgdHJ1ZSk7XG5cdH1cblx0ZWxzZSBpZiAobW9tZW50LmlzRHVyYXRpb24oc3RhcnQpKSB7IC8vIGdpdmVuIGR1cmF0aW9uXG5cdFx0cmV0dXJuIHN0YXJ0LmFzKHVuaXQpO1xuXHR9XG5cdGVsc2UgeyAvLyBnaXZlbiB7IHN0YXJ0LCBlbmQgfSByYW5nZSBvYmplY3Rcblx0XHRyZXR1cm4gc3RhcnQuZW5kLmRpZmYoc3RhcnQuc3RhcnQsIHVuaXQsIHRydWUpO1xuXHR9XG59XG5cblxuLy8gSW50ZWxsaWdlbnRseSBkaXZpZGVzIGEgcmFuZ2UgKHNwZWNpZmllZCBieSBhIHN0YXJ0L2VuZCBwYXJhbXMpIGJ5IGEgZHVyYXRpb25cbmZ1bmN0aW9uIGRpdmlkZVJhbmdlQnlEdXJhdGlvbihzdGFydCwgZW5kLCBkdXIpIHtcblx0dmFyIG1vbnRocztcblxuXHRpZiAoZHVyYXRpb25IYXNUaW1lKGR1cikpIHtcblx0XHRyZXR1cm4gKGVuZCAtIHN0YXJ0KSAvIGR1cjtcblx0fVxuXHRtb250aHMgPSBkdXIuYXNNb250aHMoKTtcblx0aWYgKE1hdGguYWJzKG1vbnRocykgPj0gMSAmJiBpc0ludChtb250aHMpKSB7XG5cdFx0cmV0dXJuIGVuZC5kaWZmKHN0YXJ0LCAnbW9udGhzJywgdHJ1ZSkgLyBtb250aHM7XG5cdH1cblx0cmV0dXJuIGVuZC5kaWZmKHN0YXJ0LCAnZGF5cycsIHRydWUpIC8gZHVyLmFzRGF5cygpO1xufVxuXG5cbi8vIEludGVsbGlnZW50bHkgZGl2aWRlcyBvbmUgZHVyYXRpb24gYnkgYW5vdGhlclxuZnVuY3Rpb24gZGl2aWRlRHVyYXRpb25CeUR1cmF0aW9uKGR1cjEsIGR1cjIpIHtcblx0dmFyIG1vbnRoczEsIG1vbnRoczI7XG5cblx0aWYgKGR1cmF0aW9uSGFzVGltZShkdXIxKSB8fCBkdXJhdGlvbkhhc1RpbWUoZHVyMikpIHtcblx0XHRyZXR1cm4gZHVyMSAvIGR1cjI7XG5cdH1cblx0bW9udGhzMSA9IGR1cjEuYXNNb250aHMoKTtcblx0bW9udGhzMiA9IGR1cjIuYXNNb250aHMoKTtcblx0aWYgKFxuXHRcdE1hdGguYWJzKG1vbnRoczEpID49IDEgJiYgaXNJbnQobW9udGhzMSkgJiZcblx0XHRNYXRoLmFicyhtb250aHMyKSA+PSAxICYmIGlzSW50KG1vbnRoczIpXG5cdCkge1xuXHRcdHJldHVybiBtb250aHMxIC8gbW9udGhzMjtcblx0fVxuXHRyZXR1cm4gZHVyMS5hc0RheXMoKSAvIGR1cjIuYXNEYXlzKCk7XG59XG5cblxuLy8gSW50ZWxsaWdlbnRseSBtdWx0aXBsaWVzIGEgZHVyYXRpb24gYnkgYSBudW1iZXJcbmZ1bmN0aW9uIG11bHRpcGx5RHVyYXRpb24oZHVyLCBuKSB7XG5cdHZhciBtb250aHM7XG5cblx0aWYgKGR1cmF0aW9uSGFzVGltZShkdXIpKSB7XG5cdFx0cmV0dXJuIG1vbWVudC5kdXJhdGlvbihkdXIgKiBuKTtcblx0fVxuXHRtb250aHMgPSBkdXIuYXNNb250aHMoKTtcblx0aWYgKE1hdGguYWJzKG1vbnRocykgPj0gMSAmJiBpc0ludChtb250aHMpKSB7XG5cdFx0cmV0dXJuIG1vbWVudC5kdXJhdGlvbih7IG1vbnRoczogbW9udGhzICogbiB9KTtcblx0fVxuXHRyZXR1cm4gbW9tZW50LmR1cmF0aW9uKHsgZGF5czogZHVyLmFzRGF5cygpICogbiB9KTtcbn1cblxuXG4vLyBSZXR1cm5zIGEgYm9vbGVhbiBhYm91dCB3aGV0aGVyIHRoZSBnaXZlbiBkdXJhdGlvbiBoYXMgYW55IHRpbWUgcGFydHMgKGhvdXJzL21pbnV0ZXMvc2Vjb25kcy9tcylcbmZ1bmN0aW9uIGR1cmF0aW9uSGFzVGltZShkdXIpIHtcblx0cmV0dXJuIEJvb2xlYW4oZHVyLmhvdXJzKCkgfHwgZHVyLm1pbnV0ZXMoKSB8fCBkdXIuc2Vjb25kcygpIHx8IGR1ci5taWxsaXNlY29uZHMoKSk7XG59XG5cblxuZnVuY3Rpb24gaXNOYXRpdmVEYXRlKGlucHV0KSB7XG5cdHJldHVybiAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgRGF0ZV0nIHx8IGlucHV0IGluc3RhbmNlb2YgRGF0ZTtcbn1cblxuXG4vLyBSZXR1cm5zIGEgYm9vbGVhbiBhYm91dCB3aGV0aGVyIHRoZSBnaXZlbiBpbnB1dCBpcyBhIHRpbWUgc3RyaW5nLCBsaWtlIFwiMDY6NDA6MDBcIiBvciBcIjA2OjAwXCJcbmZ1bmN0aW9uIGlzVGltZVN0cmluZyhzdHIpIHtcblx0cmV0dXJuIC9eXFxkK1xcOlxcZCsoPzpcXDpcXGQrXFwuPyg/OlxcZHszfSk/KT8kLy50ZXN0KHN0cik7XG59XG5cblxuLyogTG9nZ2luZyBhbmQgRGVidWdcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5GQy5sb2cgPSBmdW5jdGlvbigpIHtcblx0dmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcblxuXHRpZiAoY29uc29sZSAmJiBjb25zb2xlLmxvZykge1xuXHRcdHJldHVybiBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHR9XG59O1xuXG5GQy53YXJuID0gZnVuY3Rpb24oKSB7XG5cdHZhciBjb25zb2xlID0gd2luZG93LmNvbnNvbGU7XG5cblx0aWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XG5cdFx0cmV0dXJuIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHJldHVybiBGQy5sb2cuYXBwbHkoRkMsIGFyZ3VtZW50cyk7XG5cdH1cbn07XG5cblxuLyogR2VuZXJhbCBVdGlsaXRpZXNcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG52YXIgaGFzT3duUHJvcE1ldGhvZCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cbi8vIE1lcmdlcyBhbiBhcnJheSBvZiBvYmplY3RzIGludG8gYSBzaW5nbGUgb2JqZWN0LlxuLy8gVGhlIHNlY29uZCBhcmd1bWVudCBhbGxvd3MgZm9yIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIHdobydzIG9iamVjdCB2YWx1ZXMgd2lsbCBiZSBtZXJnZWQgdG9nZXRoZXIuXG5mdW5jdGlvbiBtZXJnZVByb3BzKHByb3BPYmpzLCBjb21wbGV4UHJvcHMpIHtcblx0dmFyIGRlc3QgPSB7fTtcblx0dmFyIGksIG5hbWU7XG5cdHZhciBjb21wbGV4T2Jqcztcblx0dmFyIGosIHZhbDtcblx0dmFyIHByb3BzO1xuXG5cdGlmIChjb21wbGV4UHJvcHMpIHtcblx0XHRmb3IgKGkgPSAwOyBpIDwgY29tcGxleFByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRuYW1lID0gY29tcGxleFByb3BzW2ldO1xuXHRcdFx0Y29tcGxleE9ianMgPSBbXTtcblxuXHRcdFx0Ly8gY29sbGVjdCB0aGUgdHJhaWxpbmcgb2JqZWN0IHZhbHVlcywgc3RvcHBpbmcgd2hlbiBhIG5vbi1vYmplY3QgaXMgZGlzY292ZXJlZFxuXHRcdFx0Zm9yIChqID0gcHJvcE9ianMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0XHRcdFx0dmFsID0gcHJvcE9ianNbal1bbmFtZV07XG5cblx0XHRcdFx0aWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdFx0Y29tcGxleE9ianMudW5zaGlmdCh2YWwpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0ZGVzdFtuYW1lXSA9IHZhbDsgLy8gaWYgdGhlcmUgd2VyZSBubyBvYmplY3RzLCB0aGlzIHZhbHVlIHdpbGwgYmUgdXNlZFxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIGlmIHRoZSB0cmFpbGluZyB2YWx1ZXMgd2VyZSBvYmplY3RzLCB1c2UgdGhlIG1lcmdlZCB2YWx1ZVxuXHRcdFx0aWYgKGNvbXBsZXhPYmpzLmxlbmd0aCkge1xuXHRcdFx0XHRkZXN0W25hbWVdID0gbWVyZ2VQcm9wcyhjb21wbGV4T2Jqcyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gY29weSB2YWx1ZXMgaW50byB0aGUgZGVzdGluYXRpb24sIGdvaW5nIGZyb20gbGFzdCB0byBmaXJzdFxuXHRmb3IgKGkgPSBwcm9wT2Jqcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdHByb3BzID0gcHJvcE9ianNbaV07XG5cblx0XHRmb3IgKG5hbWUgaW4gcHJvcHMpIHtcblx0XHRcdGlmICghKG5hbWUgaW4gZGVzdCkpIHsgLy8gaWYgYWxyZWFkeSBhc3NpZ25lZCBieSBwcmV2aW91cyBwcm9wcyBvciBjb21wbGV4IHByb3BzLCBkb24ndCByZWFzc2lnblxuXHRcdFx0XHRkZXN0W25hbWVdID0gcHJvcHNbbmFtZV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGRlc3Q7XG59XG5cblxuLy8gQ3JlYXRlIGFuIG9iamVjdCB0aGF0IGhhcyB0aGUgZ2l2ZW4gcHJvdG90eXBlLiBKdXN0IGxpa2UgT2JqZWN0LmNyZWF0ZVxuZnVuY3Rpb24gY3JlYXRlT2JqZWN0KHByb3RvKSB7XG5cdHZhciBmID0gZnVuY3Rpb24oKSB7fTtcblx0Zi5wcm90b3R5cGUgPSBwcm90bztcblx0cmV0dXJuIG5ldyBmKCk7XG59XG5GQy5jcmVhdGVPYmplY3QgPSBjcmVhdGVPYmplY3Q7XG5cblxuZnVuY3Rpb24gY29weU93blByb3BzKHNyYywgZGVzdCkge1xuXHRmb3IgKHZhciBuYW1lIGluIHNyYykge1xuXHRcdGlmIChoYXNPd25Qcm9wKHNyYywgbmFtZSkpIHtcblx0XHRcdGRlc3RbbmFtZV0gPSBzcmNbbmFtZV07XG5cdFx0fVxuXHR9XG59XG5cblxuZnVuY3Rpb24gaGFzT3duUHJvcChvYmosIG5hbWUpIHtcblx0cmV0dXJuIGhhc093blByb3BNZXRob2QuY2FsbChvYmosIG5hbWUpO1xufVxuXG5cbi8vIElzIHRoZSBnaXZlbiB2YWx1ZSBhIG5vbi1vYmplY3Qgbm9uLWZ1bmN0aW9uIHZhbHVlP1xuZnVuY3Rpb24gaXNBdG9taWModmFsKSB7XG5cdHJldHVybiAvdW5kZWZpbmVkfG51bGx8Ym9vbGVhbnxudW1iZXJ8c3RyaW5nLy50ZXN0KCQudHlwZSh2YWwpKTtcbn1cblxuXG5mdW5jdGlvbiBhcHBseUFsbChmdW5jdGlvbnMsIHRoaXNPYmosIGFyZ3MpIHtcblx0aWYgKCQuaXNGdW5jdGlvbihmdW5jdGlvbnMpKSB7XG5cdFx0ZnVuY3Rpb25zID0gWyBmdW5jdGlvbnMgXTtcblx0fVxuXHRpZiAoZnVuY3Rpb25zKSB7XG5cdFx0dmFyIGk7XG5cdFx0dmFyIHJldDtcblx0XHRmb3IgKGk9MDsgaTxmdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHJldCA9IGZ1bmN0aW9uc1tpXS5hcHBseSh0aGlzT2JqLCBhcmdzKSB8fCByZXQ7XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH1cbn1cblxuXG5mdW5jdGlvbiBmaXJzdERlZmluZWQoKSB7XG5cdGZvciAodmFyIGk9MDsgaTxhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoYXJndW1lbnRzW2ldICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiBhcmd1bWVudHNbaV07XG5cdFx0fVxuXHR9XG59XG5cblxuZnVuY3Rpb24gaHRtbEVzY2FwZShzKSB7XG5cdHJldHVybiAocyArICcnKS5yZXBsYWNlKC8mL2csICcmYW1wOycpXG5cdFx0LnJlcGxhY2UoLzwvZywgJyZsdDsnKVxuXHRcdC5yZXBsYWNlKC8+L2csICcmZ3Q7Jylcblx0XHQucmVwbGFjZSgvJy9nLCAnJiMwMzk7Jylcblx0XHQucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG5cdFx0LnJlcGxhY2UoL1xcbi9nLCAnPGJyIC8+Jyk7XG59XG5cblxuZnVuY3Rpb24gc3RyaXBIdG1sRW50aXRpZXModGV4dCkge1xuXHRyZXR1cm4gdGV4dC5yZXBsYWNlKC8mLio/Oy9nLCAnJyk7XG59XG5cblxuLy8gR2l2ZW4gYSBoYXNoIG9mIENTUyBwcm9wZXJ0aWVzLCByZXR1cm5zIGEgc3RyaW5nIG9mIENTUy5cbi8vIFVzZXMgcHJvcGVydHkgbmFtZXMgYXMtaXMgKG5vIGNhbWVsLWNhc2UgY29udmVyc2lvbikuIFdpbGwgbm90IG1ha2Ugc3RhdGVtZW50cyBmb3IgbnVsbC91bmRlZmluZWQgdmFsdWVzLlxuZnVuY3Rpb24gY3NzVG9TdHIoY3NzUHJvcHMpIHtcblx0dmFyIHN0YXRlbWVudHMgPSBbXTtcblxuXHQkLmVhY2goY3NzUHJvcHMsIGZ1bmN0aW9uKG5hbWUsIHZhbCkge1xuXHRcdGlmICh2YWwgIT0gbnVsbCkge1xuXHRcdFx0c3RhdGVtZW50cy5wdXNoKG5hbWUgKyAnOicgKyB2YWwpO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIHN0YXRlbWVudHMuam9pbignOycpO1xufVxuXG5cbi8vIEdpdmVuIGFuIG9iamVjdCBoYXNoIG9mIEhUTUwgYXR0cmlidXRlIG5hbWVzIHRvIHZhbHVlcyxcbi8vIGdlbmVyYXRlcyBhIHN0cmluZyB0aGF0IGNhbiBiZSBpbmplY3RlZCBiZXR3ZWVuIDwgPiBpbiBIVE1MXG5mdW5jdGlvbiBhdHRyc1RvU3RyKGF0dHJzKSB7XG5cdHZhciBwYXJ0cyA9IFtdO1xuXG5cdCQuZWFjaChhdHRycywgZnVuY3Rpb24obmFtZSwgdmFsKSB7XG5cdFx0aWYgKHZhbCAhPSBudWxsKSB7XG5cdFx0XHRwYXJ0cy5wdXNoKG5hbWUgKyAnPVwiJyArIGh0bWxFc2NhcGUodmFsKSArICdcIicpO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIHBhcnRzLmpvaW4oJyAnKTtcbn1cblxuXG5mdW5jdGlvbiBjYXBpdGFsaXNlRmlyc3RMZXR0ZXIoc3RyKSB7XG5cdHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cblxuZnVuY3Rpb24gY29tcGFyZU51bWJlcnMoYSwgYikgeyAvLyBmb3IgLnNvcnQoKVxuXHRyZXR1cm4gYSAtIGI7XG59XG5cblxuZnVuY3Rpb24gaXNJbnQobikge1xuXHRyZXR1cm4gbiAlIDEgPT09IDA7XG59XG5cblxuLy8gUmV0dXJucyBhIG1ldGhvZCBib3VuZCB0byB0aGUgZ2l2ZW4gb2JqZWN0IGNvbnRleHQuXG4vLyBKdXN0IGxpa2Ugb25lIG9mIHRoZSBqUXVlcnkucHJveHkgc2lnbmF0dXJlcywgYnV0IHdpdGhvdXQgdGhlIHVuZGVzaXJlZCBiZWhhdmlvciBvZiB0cmVhdGluZyB0aGUgc2FtZSBtZXRob2Qgd2l0aFxuLy8gZGlmZmVyZW50IGNvbnRleHRzIGFzIGlkZW50aWNhbCB3aGVuIGJpbmRpbmcvdW5iaW5kaW5nIGV2ZW50cy5cbmZ1bmN0aW9uIHByb3h5KG9iaiwgbWV0aG9kTmFtZSkge1xuXHR2YXIgbWV0aG9kID0gb2JqW21ldGhvZE5hbWVdO1xuXG5cdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gbWV0aG9kLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcblx0fTtcbn1cblxuXG4vLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4vLyBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yXG4vLyBOIG1pbGxpc2Vjb25kcy4gSWYgYGltbWVkaWF0ZWAgaXMgcGFzc2VkLCB0cmlnZ2VyIHRoZSBmdW5jdGlvbiBvbiB0aGVcbi8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvYmxvYi8xLjYuMC91bmRlcnNjb3JlLmpzI0w3MTRcbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuXHR2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cblx0dmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGxhc3QgPSArbmV3IERhdGUoKSAtIHRpbWVzdGFtcDtcblx0XHRpZiAobGFzdCA8IHdhaXQpIHtcblx0XHRcdHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dGltZW91dCA9IG51bGw7XG5cdFx0XHRpZiAoIWltbWVkaWF0ZSkge1xuXHRcdFx0XHRyZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcdFx0XHRjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRjb250ZXh0ID0gdGhpcztcblx0XHRhcmdzID0gYXJndW1lbnRzO1xuXHRcdHRpbWVzdGFtcCA9ICtuZXcgRGF0ZSgpO1xuXHRcdHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuXHRcdGlmICghdGltZW91dCkge1xuXHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHRcdH1cblx0XHRpZiAoY2FsbE5vdykge1xuXHRcdFx0cmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0XHRcdGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcbn1cblxuOztcblxuLypcbkdFTkVSQUwgTk9URSBvbiBtb21lbnRzIHRocm91Z2hvdXQgdGhlICplbnRpcmUgcmVzdCogb2YgdGhlIGNvZGViYXNlOlxuQWxsIG1vbWVudHMgYXJlIGFzc3VtZWQgdG8gYmUgYW1iaWd1b3VzbHktem9uZWQgdW5sZXNzIG90aGVyd2lzZSBub3RlZCxcbndpdGggdGhlIE5PVEFCTEUgRVhDRU9QVElPTiBvZiBzdGFydC9lbmQgZGF0ZXMgdGhhdCBsaXZlIG9uICpFdmVudCBPYmplY3RzKi5cbkFtYmlndW91c2x5LVRJTUVEIG1vbWVudHMgYXJlIGFzc3VtZWQgdG8gYmUgYW1iaWd1b3VzbHktem9uZWQgYnkgbmF0dXJlLlxuKi9cblxudmFyIGFtYmlnRGF0ZU9mTW9udGhSZWdleCA9IC9eXFxzKlxcZHs0fS1cXGRcXGQkLztcbnZhciBhbWJpZ1RpbWVPclpvbmVSZWdleCA9XG5cdC9eXFxzKlxcZHs0fS0oPzooXFxkXFxkLVxcZFxcZCl8KFdcXGRcXGQkKXwoV1xcZFxcZC1cXGQpfChcXGRcXGRcXGQpKSgoVHwgKShcXGRcXGQoOlxcZFxcZCg6XFxkXFxkKFxcLlxcZCspPyk/KT8pPyk/JC87XG52YXIgbmV3TW9tZW50UHJvdG8gPSBtb21lbnQuZm47IC8vIHdoZXJlIHdlIHdpbGwgYXR0YWNoIG91ciBuZXcgbWV0aG9kc1xudmFyIG9sZE1vbWVudFByb3RvID0gJC5leHRlbmQoe30sIG5ld01vbWVudFByb3RvKTsgLy8gY29weSBvZiBvcmlnaW5hbCBtb21lbnQgbWV0aG9kc1xuXG4vLyB0ZWxsIG1vbWVudGpzIHRvIHRyYW5zZmVyIHRoZXNlIHByb3BlcnRpZXMgdXBvbiBjbG9uZVxudmFyIG1vbWVudFByb3BlcnRpZXMgPSBtb21lbnQubW9tZW50UHJvcGVydGllcztcbm1vbWVudFByb3BlcnRpZXMucHVzaCgnX2Z1bGxDYWxlbmRhcicpO1xubW9tZW50UHJvcGVydGllcy5wdXNoKCdfYW1iaWdUaW1lJyk7XG5tb21lbnRQcm9wZXJ0aWVzLnB1c2goJ19hbWJpZ1pvbmUnKTtcblxuXG4vLyBDcmVhdGluZ1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBDcmVhdGVzIGEgbmV3IG1vbWVudCwgc2ltaWxhciB0byB0aGUgdmFuaWxsYSBtb21lbnQoLi4uKSBjb25zdHJ1Y3RvciwgYnV0IHdpdGhcbi8vIGV4dHJhIGZlYXR1cmVzIChhbWJpZ3VvdXMgdGltZSwgZW5oYW5jZWQgZm9ybWF0dGluZykuIFdoZW4gZ2l2ZW4gYW4gZXhpc3RpbmcgbW9tZW50LFxuLy8gaXQgd2lsbCBmdW5jdGlvbiBhcyBhIGNsb25lIChhbmQgcmV0YWluIHRoZSB6b25lIG9mIHRoZSBtb21lbnQpLiBBbnl0aGluZyBlbHNlIHdpbGxcbi8vIHJlc3VsdCBpbiBhIG1vbWVudCBpbiB0aGUgbG9jYWwgem9uZS5cbkZDLm1vbWVudCA9IGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gbWFrZU1vbWVudChhcmd1bWVudHMpO1xufTtcblxuLy8gU2FtZXMgYXMgRkMubW9tZW50LCBidXQgZm9yY2VzIHRoZSByZXN1bHRpbmcgbW9tZW50IHRvIGJlIGluIHRoZSBVVEMgdGltZXpvbmUuXG5GQy5tb21lbnQudXRjID0gZnVuY3Rpb24oKSB7XG5cdHZhciBtb20gPSBtYWtlTW9tZW50KGFyZ3VtZW50cywgdHJ1ZSk7XG5cblx0Ly8gRm9yY2UgaXQgaW50byBVVEMgYmVjYXVzZSBtYWtlTW9tZW50IGRvZXNuJ3QgZ3VhcmFudGVlIGl0XG5cdC8vIChpZiBnaXZlbiBhIHByZS1leGlzdGluZyBtb21lbnQgZm9yIGV4YW1wbGUpXG5cdGlmIChtb20uaGFzVGltZSgpKSB7IC8vIGRvbid0IGdpdmUgYW1iaWd1b3VzbHktdGltZWQgbW9tZW50cyBhIFVUQyB6b25lXG5cdFx0bW9tLnV0YygpO1xuXHR9XG5cblx0cmV0dXJuIG1vbTtcbn07XG5cbi8vIFNhbWUgYXMgRkMubW9tZW50LCBidXQgd2hlbiBnaXZlbiBhbiBJU084NjAxIHN0cmluZywgdGhlIHRpbWV6b25lIG9mZnNldCBpcyBwcmVzZXJ2ZWQuXG4vLyBJU084NjAxIHN0cmluZ3Mgd2l0aCBubyB0aW1lem9uZSBvZmZzZXQgd2lsbCBiZWNvbWUgYW1iaWd1b3VzbHkgem9uZWQuXG5GQy5tb21lbnQucGFyc2Vab25lID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiBtYWtlTW9tZW50KGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSk7XG59O1xuXG4vLyBCdWlsZHMgYW4gZW5oYW5jZWQgbW9tZW50IGZyb20gYXJncy4gV2hlbiBnaXZlbiBhbiBleGlzdGluZyBtb21lbnQsIGl0IGNsb25lcy4gV2hlbiBnaXZlbiBhXG4vLyBuYXRpdmUgRGF0ZSwgb3IgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzICh0aGUgY3VycmVudCB0aW1lKSwgdGhlIHJlc3VsdGluZyBtb21lbnQgd2lsbCBiZSBsb2NhbC5cbi8vIEFueXRoaW5nIGVsc2UgbmVlZHMgdG8gYmUgXCJwYXJzZWRcIiAoYSBzdHJpbmcgb3IgYW4gYXJyYXkpLCBhbmQgd2lsbCBiZSBhZmZlY3RlZCBieTpcbi8vICAgIHBhcnNlQXNVVEMgLSBpZiB0aGVyZSBpcyBubyB6b25lIGluZm9ybWF0aW9uLCBzaG91bGQgd2UgcGFyc2UgdGhlIGlucHV0IGluIFVUQz9cbi8vICAgIHBhcnNlWm9uZSAtIGlmIHRoZXJlIGlzIHpvbmUgaW5mb3JtYXRpb24sIHNob3VsZCB3ZSBmb3JjZSB0aGUgem9uZSBvZiB0aGUgbW9tZW50P1xuZnVuY3Rpb24gbWFrZU1vbWVudChhcmdzLCBwYXJzZUFzVVRDLCBwYXJzZVpvbmUpIHtcblx0dmFyIGlucHV0ID0gYXJnc1swXTtcblx0dmFyIGlzU2luZ2xlU3RyaW5nID0gYXJncy5sZW5ndGggPT0gMSAmJiB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnO1xuXHR2YXIgaXNBbWJpZ1RpbWU7XG5cdHZhciBpc0FtYmlnWm9uZTtcblx0dmFyIGFtYmlnTWF0Y2g7XG5cdHZhciBtb207XG5cblx0aWYgKG1vbWVudC5pc01vbWVudChpbnB1dCkgfHwgaXNOYXRpdmVEYXRlKGlucHV0KSB8fCBpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0bW9tID0gbW9tZW50LmFwcGx5KG51bGwsIGFyZ3MpO1xuXHR9XG5cdGVsc2UgeyAvLyBcInBhcnNpbmdcIiBpcyByZXF1aXJlZFxuXHRcdGlzQW1iaWdUaW1lID0gZmFsc2U7XG5cdFx0aXNBbWJpZ1pvbmUgPSBmYWxzZTtcblxuXHRcdGlmIChpc1NpbmdsZVN0cmluZykge1xuXHRcdFx0aWYgKGFtYmlnRGF0ZU9mTW9udGhSZWdleC50ZXN0KGlucHV0KSkge1xuXHRcdFx0XHQvLyBhY2NlcHQgc3RyaW5ncyBsaWtlICcyMDE0LTA1JywgYnV0IGNvbnZlcnQgdG8gdGhlIGZpcnN0IG9mIHRoZSBtb250aFxuXHRcdFx0XHRpbnB1dCArPSAnLTAxJztcblx0XHRcdFx0YXJncyA9IFsgaW5wdXQgXTsgLy8gZm9yIHdoZW4gd2UgcGFzcyBpdCBvbiB0byBtb21lbnQncyBjb25zdHJ1Y3RvclxuXHRcdFx0XHRpc0FtYmlnVGltZSA9IHRydWU7XG5cdFx0XHRcdGlzQW1iaWdab25lID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKChhbWJpZ01hdGNoID0gYW1iaWdUaW1lT3Jab25lUmVnZXguZXhlYyhpbnB1dCkpKSB7XG5cdFx0XHRcdGlzQW1iaWdUaW1lID0gIWFtYmlnTWF0Y2hbNV07IC8vIG5vIHRpbWUgcGFydD9cblx0XHRcdFx0aXNBbWJpZ1pvbmUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmICgkLmlzQXJyYXkoaW5wdXQpKSB7XG5cdFx0XHQvLyBhcnJheXMgaGF2ZSBubyB0aW1lem9uZSBpbmZvcm1hdGlvbiwgc28gYXNzdW1lIGFtYmlndW91cyB6b25lXG5cdFx0XHRpc0FtYmlnWm9uZSA9IHRydWU7XG5cdFx0fVxuXHRcdC8vIG90aGVyd2lzZSwgcHJvYmFibHkgYSBzdHJpbmcgd2l0aCBhIGZvcm1hdFxuXG5cdFx0aWYgKHBhcnNlQXNVVEMgfHwgaXNBbWJpZ1RpbWUpIHtcblx0XHRcdG1vbSA9IG1vbWVudC51dGMuYXBwbHkobW9tZW50LCBhcmdzKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRtb20gPSBtb21lbnQuYXBwbHkobnVsbCwgYXJncyk7XG5cdFx0fVxuXG5cdFx0aWYgKGlzQW1iaWdUaW1lKSB7XG5cdFx0XHRtb20uX2FtYmlnVGltZSA9IHRydWU7XG5cdFx0XHRtb20uX2FtYmlnWm9uZSA9IHRydWU7IC8vIGFtYmlndW91cyB0aW1lIGFsd2F5cyBtZWFucyBhbWJpZ3VvdXMgem9uZVxuXHRcdH1cblx0XHRlbHNlIGlmIChwYXJzZVpvbmUpIHsgLy8gbGV0J3MgcmVjb3JkIHRoZSBpbnB1dHRlZCB6b25lIHNvbWVob3dcblx0XHRcdGlmIChpc0FtYmlnWm9uZSkge1xuXHRcdFx0XHRtb20uX2FtYmlnWm9uZSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChpc1NpbmdsZVN0cmluZykge1xuXHRcdFx0XHRtb20udXRjT2Zmc2V0KGlucHV0KTsgLy8gaWYgbm90IGEgdmFsaWQgem9uZSwgd2lsbCBhc3NpZ24gVVRDXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0bW9tLl9mdWxsQ2FsZW5kYXIgPSB0cnVlOyAvLyBmbGFnIGZvciBleHRlbmRlZCBmdW5jdGlvbmFsaXR5XG5cblx0cmV0dXJuIG1vbTtcbn1cblxuXG4vLyBXZWVrIE51bWJlclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbi8vIFJldHVybnMgdGhlIHdlZWsgbnVtYmVyLCBjb25zaWRlcmluZyB0aGUgbG9jYWxlJ3MgY3VzdG9tIHdlZWsgbnVtYmVyIGNhbGN1YXRpb25cbi8vIGB3ZWVrc2AgaXMgYW4gYWxpYXMgZm9yIGB3ZWVrYFxubmV3TW9tZW50UHJvdG8ud2VlayA9IG5ld01vbWVudFByb3RvLndlZWtzID0gZnVuY3Rpb24oaW5wdXQpIHtcblx0dmFyIHdlZWtDYWxjID0gdGhpcy5fbG9jYWxlLl9mdWxsQ2FsZW5kYXJfd2Vla0NhbGM7XG5cblx0aWYgKGlucHV0ID09IG51bGwgJiYgdHlwZW9mIHdlZWtDYWxjID09PSAnZnVuY3Rpb24nKSB7IC8vIGN1c3RvbSBmdW5jdGlvbiBvbmx5IHdvcmtzIGZvciBnZXR0ZXJcblx0XHRyZXR1cm4gd2Vla0NhbGModGhpcyk7XG5cdH1cblx0ZWxzZSBpZiAod2Vla0NhbGMgPT09ICdJU08nKSB7XG5cdFx0cmV0dXJuIG9sZE1vbWVudFByb3RvLmlzb1dlZWsuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gSVNPIGdldHRlci9zZXR0ZXJcblx0fVxuXG5cdHJldHVybiBvbGRNb21lbnRQcm90by53ZWVrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIGxvY2FsIGdldHRlci9zZXR0ZXJcbn07XG5cblxuLy8gVGltZS1vZi1kYXlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gR0VUVEVSXG4vLyBSZXR1cm5zIGEgRHVyYXRpb24gd2l0aCB0aGUgaG91cnMvbWludXRlcy9zZWNvbmRzL21zIHZhbHVlcyBvZiB0aGUgbW9tZW50LlxuLy8gSWYgdGhlIG1vbWVudCBoYXMgYW4gYW1iaWd1b3VzIHRpbWUsIGEgZHVyYXRpb24gb2YgMDA6MDAgd2lsbCBiZSByZXR1cm5lZC5cbi8vXG4vLyBTRVRURVJcbi8vIFlvdSBjYW4gc3VwcGx5IGEgRHVyYXRpb24sIGEgTW9tZW50LCBvciBhIER1cmF0aW9uLWxpa2UgYXJndW1lbnQuXG4vLyBXaGVuIHNldHRpbmcgdGhlIHRpbWUsIGFuZCB0aGUgbW9tZW50IGhhcyBhbiBhbWJpZ3VvdXMgdGltZSwgaXQgdGhlbiBiZWNvbWVzIHVuYW1iaWd1b3VzLlxubmV3TW9tZW50UHJvdG8udGltZSA9IGZ1bmN0aW9uKHRpbWUpIHtcblxuXHQvLyBGYWxsYmFjayB0byB0aGUgb3JpZ2luYWwgbWV0aG9kIChpZiB0aGVyZSBpcyBvbmUpIGlmIHRoaXMgbW9tZW50IHdhc24ndCBjcmVhdGVkIHZpYSBGdWxsQ2FsZW5kYXIuXG5cdC8vIGB0aW1lYCBpcyBhIGdlbmVyaWMgZW5vdWdoIG1ldGhvZCBuYW1lIHdoZXJlIHRoaXMgcHJlY2F1dGlvbiBpcyBuZWNlc3NhcnkgdG8gYXZvaWQgY29sbGlzaW9ucyB3LyBvdGhlciBwbHVnaW5zLlxuXHRpZiAoIXRoaXMuX2Z1bGxDYWxlbmRhcikge1xuXHRcdHJldHVybiBvbGRNb21lbnRQcm90by50aW1lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAodGltZSA9PSBudWxsKSB7IC8vIGdldHRlclxuXHRcdHJldHVybiBtb21lbnQuZHVyYXRpb24oe1xuXHRcdFx0aG91cnM6IHRoaXMuaG91cnMoKSxcblx0XHRcdG1pbnV0ZXM6IHRoaXMubWludXRlcygpLFxuXHRcdFx0c2Vjb25kczogdGhpcy5zZWNvbmRzKCksXG5cdFx0XHRtaWxsaXNlY29uZHM6IHRoaXMubWlsbGlzZWNvbmRzKClcblx0XHR9KTtcblx0fVxuXHRlbHNlIHsgLy8gc2V0dGVyXG5cblx0XHR0aGlzLl9hbWJpZ1RpbWUgPSBmYWxzZTsgLy8gbWFyayB0aGF0IHRoZSBtb21lbnQgbm93IGhhcyBhIHRpbWVcblxuXHRcdGlmICghbW9tZW50LmlzRHVyYXRpb24odGltZSkgJiYgIW1vbWVudC5pc01vbWVudCh0aW1lKSkge1xuXHRcdFx0dGltZSA9IG1vbWVudC5kdXJhdGlvbih0aW1lKTtcblx0XHR9XG5cblx0XHQvLyBUaGUgZGF5IHZhbHVlIHNob3VsZCBjYXVzZSBvdmVyZmxvdyAoc28gMjQgaG91cnMgYmVjb21lcyAwMDowMDowMCBvZiBuZXh0IGRheSkuXG5cdFx0Ly8gT25seSBmb3IgRHVyYXRpb24gdGltZXMsIG5vdCBNb21lbnQgdGltZXMuXG5cdFx0dmFyIGRheUhvdXJzID0gMDtcblx0XHRpZiAobW9tZW50LmlzRHVyYXRpb24odGltZSkpIHtcblx0XHRcdGRheUhvdXJzID0gTWF0aC5mbG9vcih0aW1lLmFzRGF5cygpKSAqIDI0O1xuXHRcdH1cblxuXHRcdC8vIFdlIG5lZWQgdG8gc2V0IHRoZSBpbmRpdmlkdWFsIGZpZWxkcy5cblx0XHQvLyBDYW4ndCB1c2Ugc3RhcnRPZignZGF5JykgdGhlbiBhZGQgZHVyYXRpb24uIEluIGNhc2Ugb2YgRFNUIGF0IHN0YXJ0IG9mIGRheS5cblx0XHRyZXR1cm4gdGhpcy5ob3VycyhkYXlIb3VycyArIHRpbWUuaG91cnMoKSlcblx0XHRcdC5taW51dGVzKHRpbWUubWludXRlcygpKVxuXHRcdFx0LnNlY29uZHModGltZS5zZWNvbmRzKCkpXG5cdFx0XHQubWlsbGlzZWNvbmRzKHRpbWUubWlsbGlzZWNvbmRzKCkpO1xuXHR9XG59O1xuXG4vLyBDb252ZXJ0cyB0aGUgbW9tZW50IHRvIFVUQywgc3RyaXBwaW5nIG91dCBpdHMgdGltZS1vZi1kYXkgYW5kIHRpbWV6b25lIG9mZnNldCxcbi8vIGJ1dCBwcmVzZXJ2aW5nIGl0cyBZTUQuIEEgbW9tZW50IHdpdGggYSBzdHJpcHBlZCB0aW1lIHdpbGwgZGlzcGxheSBubyB0aW1lXG4vLyBub3IgdGltZXpvbmUgb2Zmc2V0IHdoZW4gLmZvcm1hdCgpIGlzIGNhbGxlZC5cbm5ld01vbWVudFByb3RvLnN0cmlwVGltZSA9IGZ1bmN0aW9uKCkge1xuXG5cdGlmICghdGhpcy5fYW1iaWdUaW1lKSB7XG5cblx0XHR0aGlzLnV0Yyh0cnVlKTsgLy8ga2VlcExvY2FsVGltZT10cnVlIChmb3Iga2VlcGluZyAqZGF0ZSogdmFsdWUpXG5cblx0XHQvLyBzZXQgdGltZSB0byB6ZXJvXG5cdFx0dGhpcy5zZXQoe1xuXHRcdFx0aG91cnM6IDAsXG5cdFx0XHRtaW51dGVzOiAwLFxuXHRcdFx0c2Vjb25kczogMCxcblx0XHRcdG1zOiAwXG5cdFx0fSk7XG5cblx0XHQvLyBNYXJrIHRoZSB0aW1lIGFzIGFtYmlndW91cy4gVGhpcyBuZWVkcyB0byBoYXBwZW4gYWZ0ZXIgdGhlIC51dGMoKSBjYWxsLCB3aGljaCBtaWdodCBjYWxsIC51dGNPZmZzZXQoKSxcblx0XHQvLyB3aGljaCBjbGVhcnMgYWxsIGFtYmlnIGZsYWdzLlxuXHRcdHRoaXMuX2FtYmlnVGltZSA9IHRydWU7XG5cdFx0dGhpcy5fYW1iaWdab25lID0gdHJ1ZTsgLy8gaWYgYW1iaWd1b3VzIHRpbWUsIGFsc28gYW1iaWd1b3VzIHRpbWV6b25lIG9mZnNldFxuXHR9XG5cblx0cmV0dXJuIHRoaXM7IC8vIGZvciBjaGFpbmluZ1xufTtcblxuLy8gUmV0dXJucyBpZiB0aGUgbW9tZW50IGhhcyBhIG5vbi1hbWJpZ3VvdXMgdGltZSAoYm9vbGVhbilcbm5ld01vbWVudFByb3RvLmhhc1RpbWUgPSBmdW5jdGlvbigpIHtcblx0cmV0dXJuICF0aGlzLl9hbWJpZ1RpbWU7XG59O1xuXG5cbi8vIFRpbWV6b25lXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIENvbnZlcnRzIHRoZSBtb21lbnQgdG8gVVRDLCBzdHJpcHBpbmcgb3V0IGl0cyB0aW1lem9uZSBvZmZzZXQsIGJ1dCBwcmVzZXJ2aW5nIGl0c1xuLy8gWU1EIGFuZCB0aW1lLW9mLWRheS4gQSBtb21lbnQgd2l0aCBhIHN0cmlwcGVkIHRpbWV6b25lIG9mZnNldCB3aWxsIGRpc3BsYXkgbm9cbi8vIHRpbWV6b25lIG9mZnNldCB3aGVuIC5mb3JtYXQoKSBpcyBjYWxsZWQuXG5uZXdNb21lbnRQcm90by5zdHJpcFpvbmUgPSBmdW5jdGlvbigpIHtcblx0dmFyIHdhc0FtYmlnVGltZTtcblxuXHRpZiAoIXRoaXMuX2FtYmlnWm9uZSkge1xuXG5cdFx0d2FzQW1iaWdUaW1lID0gdGhpcy5fYW1iaWdUaW1lO1xuXG5cdFx0dGhpcy51dGModHJ1ZSk7IC8vIGtlZXBMb2NhbFRpbWU9dHJ1ZSAoZm9yIGtlZXBpbmcgZGF0ZSBhbmQgdGltZSB2YWx1ZXMpXG5cblx0XHQvLyB0aGUgYWJvdmUgY2FsbCB0byAudXRjKCkvLnV0Y09mZnNldCgpIHVuZm9ydHVuYXRlbHkgbWlnaHQgY2xlYXIgdGhlIGFtYmlnIGZsYWdzLCBzbyByZXN0b3JlXG5cdFx0dGhpcy5fYW1iaWdUaW1lID0gd2FzQW1iaWdUaW1lIHx8IGZhbHNlO1xuXG5cdFx0Ly8gTWFyayB0aGUgem9uZSBhcyBhbWJpZ3VvdXMuIFRoaXMgbmVlZHMgdG8gaGFwcGVuIGFmdGVyIHRoZSAudXRjKCkgY2FsbCwgd2hpY2ggbWlnaHQgY2FsbCAudXRjT2Zmc2V0KCksXG5cdFx0Ly8gd2hpY2ggY2xlYXJzIHRoZSBhbWJpZyBmbGFncy5cblx0XHR0aGlzLl9hbWJpZ1pvbmUgPSB0cnVlO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7IC8vIGZvciBjaGFpbmluZ1xufTtcblxuLy8gUmV0dXJucyBvZiB0aGUgbW9tZW50IGhhcyBhIG5vbi1hbWJpZ3VvdXMgdGltZXpvbmUgb2Zmc2V0IChib29sZWFuKVxubmV3TW9tZW50UHJvdG8uaGFzWm9uZSA9IGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gIXRoaXMuX2FtYmlnWm9uZTtcbn07XG5cblxuLy8gaW1wbGljaXRseSBtYXJrcyBhIHpvbmVcbm5ld01vbWVudFByb3RvLmxvY2FsID0gZnVuY3Rpb24oa2VlcExvY2FsVGltZSkge1xuXG5cdC8vIGZvciB3aGVuIGNvbnZlcnRpbmcgZnJvbSBhbWJpZ3VvdXNseS16b25lZCB0byBsb2NhbCxcblx0Ly8ga2VlcCB0aGUgdGltZSB2YWx1ZXMgd2hlbiBjb252ZXJ0aW5nIGZyb20gVVRDIC0+IGxvY2FsXG5cdG9sZE1vbWVudFByb3RvLmxvY2FsLmNhbGwodGhpcywgdGhpcy5fYW1iaWdab25lIHx8IGtlZXBMb2NhbFRpbWUpO1xuXG5cdC8vIGVuc3VyZSBub24tYW1iaWd1b3VzXG5cdC8vIHRoaXMgcHJvYmFibHkgYWxyZWFkeSBoYXBwZW5lZCB2aWEgbG9jYWwoKSAtPiB1dGNPZmZzZXQoKSwgYnV0IGRvbid0IHJlbHkgb24gTW9tZW50J3MgaW50ZXJuYWxzXG5cdHRoaXMuX2FtYmlnVGltZSA9IGZhbHNlO1xuXHR0aGlzLl9hbWJpZ1pvbmUgPSBmYWxzZTtcblxuXHRyZXR1cm4gdGhpczsgLy8gZm9yIGNoYWluaW5nXG59O1xuXG5cbi8vIGltcGxpY2l0bHkgbWFya3MgYSB6b25lXG5uZXdNb21lbnRQcm90by51dGMgPSBmdW5jdGlvbihrZWVwTG9jYWxUaW1lKSB7XG5cblx0b2xkTW9tZW50UHJvdG8udXRjLmNhbGwodGhpcywga2VlcExvY2FsVGltZSk7XG5cblx0Ly8gZW5zdXJlIG5vbi1hbWJpZ3VvdXNcblx0Ly8gdGhpcyBwcm9iYWJseSBhbHJlYWR5IGhhcHBlbmVkIHZpYSB1dGMoKSAtPiB1dGNPZmZzZXQoKSwgYnV0IGRvbid0IHJlbHkgb24gTW9tZW50J3MgaW50ZXJuYWxzXG5cdHRoaXMuX2FtYmlnVGltZSA9IGZhbHNlO1xuXHR0aGlzLl9hbWJpZ1pvbmUgPSBmYWxzZTtcblxuXHRyZXR1cm4gdGhpcztcbn07XG5cblxuLy8gaW1wbGljaXRseSBtYXJrcyBhIHpvbmUgKHdpbGwgcHJvYmFibHkgZ2V0IGNhbGxlZCB1cG9uIC51dGMoKSBhbmQgLmxvY2FsKCkpXG5uZXdNb21lbnRQcm90by51dGNPZmZzZXQgPSBmdW5jdGlvbih0em8pIHtcblxuXHRpZiAodHpvICE9IG51bGwpIHsgLy8gc2V0dGVyXG5cdFx0Ly8gdGhlc2UgYXNzaWdubWVudHMgbmVlZHMgdG8gaGFwcGVuIGJlZm9yZSB0aGUgb3JpZ2luYWwgem9uZSBtZXRob2QgaXMgY2FsbGVkLlxuXHRcdC8vIEkgZm9yZ2V0IHdoeSwgc29tZXRoaW5nIHRvIGRvIHdpdGggYSBicm93c2VyIGNyYXNoLlxuXHRcdHRoaXMuX2FtYmlnVGltZSA9IGZhbHNlO1xuXHRcdHRoaXMuX2FtYmlnWm9uZSA9IGZhbHNlO1xuXHR9XG5cblx0cmV0dXJuIG9sZE1vbWVudFByb3RvLnV0Y09mZnNldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuXG4vLyBGb3JtYXR0aW5nXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbm5ld01vbWVudFByb3RvLmZvcm1hdCA9IGZ1bmN0aW9uKCkge1xuXHRpZiAodGhpcy5fZnVsbENhbGVuZGFyICYmIGFyZ3VtZW50c1swXSkgeyAvLyBhbiBlbmhhbmNlZCBtb21lbnQ/IGFuZCBhIGZvcm1hdCBzdHJpbmcgcHJvdmlkZWQ/XG5cdFx0cmV0dXJuIGZvcm1hdERhdGUodGhpcywgYXJndW1lbnRzWzBdKTsgLy8gb3VyIGV4dGVuZGVkIGZvcm1hdHRpbmdcblx0fVxuXHRpZiAodGhpcy5fYW1iaWdUaW1lKSB7XG5cdFx0cmV0dXJuIG9sZE1vbWVudEZvcm1hdCh0aGlzLCAnWVlZWS1NTS1ERCcpO1xuXHR9XG5cdGlmICh0aGlzLl9hbWJpZ1pvbmUpIHtcblx0XHRyZXR1cm4gb2xkTW9tZW50Rm9ybWF0KHRoaXMsICdZWVlZLU1NLUREW1RdSEg6bW06c3MnKTtcblx0fVxuXHRyZXR1cm4gb2xkTW9tZW50UHJvdG8uZm9ybWF0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5uZXdNb21lbnRQcm90by50b0lTT1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHRpZiAodGhpcy5fYW1iaWdUaW1lKSB7XG5cdFx0cmV0dXJuIG9sZE1vbWVudEZvcm1hdCh0aGlzLCAnWVlZWS1NTS1ERCcpO1xuXHR9XG5cdGlmICh0aGlzLl9hbWJpZ1pvbmUpIHtcblx0XHRyZXR1cm4gb2xkTW9tZW50Rm9ybWF0KHRoaXMsICdZWVlZLU1NLUREW1RdSEg6bW06c3MnKTtcblx0fVxuXHRyZXR1cm4gb2xkTW9tZW50UHJvdG8udG9JU09TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cbjs7XG5cbi8vIFNpbmdsZSBEYXRlIEZvcm1hdHRpbmdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4vLyBjYWxsIHRoaXMgaWYgeW91IHdhbnQgTW9tZW50J3Mgb3JpZ2luYWwgZm9ybWF0IG1ldGhvZCB0byBiZSB1c2VkXG5mdW5jdGlvbiBvbGRNb21lbnRGb3JtYXQobW9tLCBmb3JtYXRTdHIpIHtcblx0cmV0dXJuIG9sZE1vbWVudFByb3RvLmZvcm1hdC5jYWxsKG1vbSwgZm9ybWF0U3RyKTsgLy8gb2xkTW9tZW50UHJvdG8gZGVmaW5lZCBpbiBtb21lbnQtZXh0LmpzXG59XG5cblxuLy8gRm9ybWF0cyBgZGF0ZWAgd2l0aCBhIE1vbWVudCBmb3JtYXR0aW5nIHN0cmluZywgYnV0IGFsbG93IG91ciBub24temVybyBhcmVhcyBhbmRcbi8vIGFkZGl0aW9uYWwgdG9rZW4uXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUsIGZvcm1hdFN0cikge1xuXHRyZXR1cm4gZm9ybWF0RGF0ZVdpdGhDaHVua3MoZGF0ZSwgZ2V0Rm9ybWF0U3RyaW5nQ2h1bmtzKGZvcm1hdFN0cikpO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdERhdGVXaXRoQ2h1bmtzKGRhdGUsIGNodW5rcykge1xuXHR2YXIgcyA9ICcnO1xuXHR2YXIgaTtcblxuXHRmb3IgKGk9MDsgaTxjaHVua3MubGVuZ3RoOyBpKyspIHtcblx0XHRzICs9IGZvcm1hdERhdGVXaXRoQ2h1bmsoZGF0ZSwgY2h1bmtzW2ldKTtcblx0fVxuXG5cdHJldHVybiBzO1xufVxuXG5cbi8vIGFkZGl0aW9uIGZvcm1hdHRpbmcgdG9rZW5zIHdlIHdhbnQgcmVjb2duaXplZFxudmFyIHRva2VuT3ZlcnJpZGVzID0ge1xuXHR0OiBmdW5jdGlvbihkYXRlKSB7IC8vIFwiYVwiIG9yIFwicFwiXG5cdFx0cmV0dXJuIG9sZE1vbWVudEZvcm1hdChkYXRlLCAnYScpLmNoYXJBdCgwKTtcblx0fSxcblx0VDogZnVuY3Rpb24oZGF0ZSkgeyAvLyBcIkFcIiBvciBcIlBcIlxuXHRcdHJldHVybiBvbGRNb21lbnRGb3JtYXQoZGF0ZSwgJ0EnKS5jaGFyQXQoMCk7XG5cdH1cbn07XG5cblxuZnVuY3Rpb24gZm9ybWF0RGF0ZVdpdGhDaHVuayhkYXRlLCBjaHVuaykge1xuXHR2YXIgdG9rZW47XG5cdHZhciBtYXliZVN0cjtcblxuXHRpZiAodHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgeyAvLyBhIGxpdGVyYWwgc3RyaW5nXG5cdFx0cmV0dXJuIGNodW5rO1xuXHR9XG5cdGVsc2UgaWYgKCh0b2tlbiA9IGNodW5rLnRva2VuKSkgeyAvLyBhIHRva2VuLCBsaWtlIFwiWVlZWVwiXG5cdFx0aWYgKHRva2VuT3ZlcnJpZGVzW3Rva2VuXSkge1xuXHRcdFx0cmV0dXJuIHRva2VuT3ZlcnJpZGVzW3Rva2VuXShkYXRlKTsgLy8gdXNlIG91ciBjdXN0b20gdG9rZW5cblx0XHR9XG5cdFx0cmV0dXJuIG9sZE1vbWVudEZvcm1hdChkYXRlLCB0b2tlbik7XG5cdH1cblx0ZWxzZSBpZiAoY2h1bmsubWF5YmUpIHsgLy8gYSBncm91cGluZyBvZiBvdGhlciBjaHVua3MgdGhhdCBtdXN0IGJlIG5vbi16ZXJvXG5cdFx0bWF5YmVTdHIgPSBmb3JtYXREYXRlV2l0aENodW5rcyhkYXRlLCBjaHVuay5tYXliZSk7XG5cdFx0aWYgKG1heWJlU3RyLm1hdGNoKC9bMS05XS8pKSB7XG5cdFx0XHRyZXR1cm4gbWF5YmVTdHI7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuICcnO1xufVxuXG5cbi8vIERhdGUgUmFuZ2UgRm9ybWF0dGluZ1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVE9ETzogbWFrZSBpdCB3b3JrIHdpdGggdGltZXpvbmUgb2Zmc2V0XG5cbi8vIFVzaW5nIGEgZm9ybWF0dGluZyBzdHJpbmcgbWVhbnQgZm9yIGEgc2luZ2xlIGRhdGUsIGdlbmVyYXRlIGEgcmFuZ2Ugc3RyaW5nLCBsaWtlXG4vLyBcIlNlcCAyIC0gOSAyMDEzXCIsIHRoYXQgaW50ZWxsaWdlbnRseSBpbnNlcnRzIGEgc2VwYXJhdG9yIHdoZXJlIHRoZSBkYXRlcyBkaWZmZXIuXG4vLyBJZiB0aGUgZGF0ZXMgYXJlIHRoZSBzYW1lIGFzIGZhciBhcyB0aGUgZm9ybWF0IHN0cmluZyBpcyBjb25jZXJuZWQsIGp1c3QgcmV0dXJuIGEgc2luZ2xlXG4vLyByZW5kZXJpbmcgb2Ygb25lIGRhdGUsIHdpdGhvdXQgYW55IHNlcGFyYXRvci5cbmZ1bmN0aW9uIGZvcm1hdFJhbmdlKGRhdGUxLCBkYXRlMiwgZm9ybWF0U3RyLCBzZXBhcmF0b3IsIGlzUlRMKSB7XG5cdHZhciBsb2NhbGVEYXRhO1xuXG5cdGRhdGUxID0gRkMubW9tZW50LnBhcnNlWm9uZShkYXRlMSk7XG5cdGRhdGUyID0gRkMubW9tZW50LnBhcnNlWm9uZShkYXRlMik7XG5cblx0bG9jYWxlRGF0YSA9IGRhdGUxLmxvY2FsZURhdGEoKTtcblxuXHQvLyBFeHBhbmQgbG9jYWxpemVkIGZvcm1hdCBzdHJpbmdzLCBsaWtlIFwiTExcIiAtPiBcIk1NTU0gRCBZWVlZXCJcblx0Zm9ybWF0U3RyID0gbG9jYWxlRGF0YS5sb25nRGF0ZUZvcm1hdChmb3JtYXRTdHIpIHx8IGZvcm1hdFN0cjtcblx0Ly8gQlRXLCB0aGlzIGlzIG5vdCBpbXBvcnRhbnQgZm9yIGBmb3JtYXREYXRlYCBiZWNhdXNlIGl0IGlzIGltcG9zc2libGUgdG8gcHV0IGN1c3RvbSB0b2tlbnNcblx0Ly8gb3Igbm9uLXplcm8gYXJlYXMgaW4gTW9tZW50J3MgbG9jYWxpemVkIGZvcm1hdCBzdHJpbmdzLlxuXG5cdHNlcGFyYXRvciA9IHNlcGFyYXRvciB8fCAnIC0gJztcblxuXHRyZXR1cm4gZm9ybWF0UmFuZ2VXaXRoQ2h1bmtzKFxuXHRcdGRhdGUxLFxuXHRcdGRhdGUyLFxuXHRcdGdldEZvcm1hdFN0cmluZ0NodW5rcyhmb3JtYXRTdHIpLFxuXHRcdHNlcGFyYXRvcixcblx0XHRpc1JUTFxuXHQpO1xufVxuRkMuZm9ybWF0UmFuZ2UgPSBmb3JtYXRSYW5nZTsgLy8gZXhwb3NlXG5cblxuZnVuY3Rpb24gZm9ybWF0UmFuZ2VXaXRoQ2h1bmtzKGRhdGUxLCBkYXRlMiwgY2h1bmtzLCBzZXBhcmF0b3IsIGlzUlRMKSB7XG5cdHZhciB1bnpvbmVkRGF0ZTEgPSBkYXRlMS5jbG9uZSgpLnN0cmlwWm9uZSgpOyAvLyBmb3IgZm9ybWF0U2ltaWxhckNodW5rXG5cdHZhciB1bnpvbmVkRGF0ZTIgPSBkYXRlMi5jbG9uZSgpLnN0cmlwWm9uZSgpOyAvLyBcIlxuXHR2YXIgY2h1bmtTdHI7IC8vIHRoZSByZW5kZXJpbmcgb2YgdGhlIGNodW5rXG5cdHZhciBsZWZ0STtcblx0dmFyIGxlZnRTdHIgPSAnJztcblx0dmFyIHJpZ2h0STtcblx0dmFyIHJpZ2h0U3RyID0gJyc7XG5cdHZhciBtaWRkbGVJO1xuXHR2YXIgbWlkZGxlU3RyMSA9ICcnO1xuXHR2YXIgbWlkZGxlU3RyMiA9ICcnO1xuXHR2YXIgbWlkZGxlU3RyID0gJyc7XG5cblx0Ly8gU3RhcnQgYXQgdGhlIGxlZnRtb3N0IHNpZGUgb2YgdGhlIGZvcm1hdHRpbmcgc3RyaW5nIGFuZCBjb250aW51ZSB1bnRpbCB5b3UgaGl0IGEgdG9rZW5cblx0Ly8gdGhhdCBpcyBub3QgdGhlIHNhbWUgYmV0d2VlbiBkYXRlcy5cblx0Zm9yIChsZWZ0ST0wOyBsZWZ0STxjaHVua3MubGVuZ3RoOyBsZWZ0SSsrKSB7XG5cdFx0Y2h1bmtTdHIgPSBmb3JtYXRTaW1pbGFyQ2h1bmsoZGF0ZTEsIGRhdGUyLCB1bnpvbmVkRGF0ZTEsIHVuem9uZWREYXRlMiwgY2h1bmtzW2xlZnRJXSk7XG5cdFx0aWYgKGNodW5rU3RyID09PSBmYWxzZSkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdGxlZnRTdHIgKz0gY2h1bmtTdHI7XG5cdH1cblxuXHQvLyBTaW1pbGFybHksIHN0YXJ0IGF0IHRoZSByaWdodG1vc3Qgc2lkZSBvZiB0aGUgZm9ybWF0dGluZyBzdHJpbmcgYW5kIG1vdmUgbGVmdFxuXHRmb3IgKHJpZ2h0ST1jaHVua3MubGVuZ3RoLTE7IHJpZ2h0ST5sZWZ0STsgcmlnaHRJLS0pIHtcblx0XHRjaHVua1N0ciA9IGZvcm1hdFNpbWlsYXJDaHVuayhkYXRlMSwgZGF0ZTIsIHVuem9uZWREYXRlMSwgdW56b25lZERhdGUyLCAgY2h1bmtzW3JpZ2h0SV0pO1xuXHRcdGlmIChjaHVua1N0ciA9PT0gZmFsc2UpIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRyaWdodFN0ciA9IGNodW5rU3RyICsgcmlnaHRTdHI7XG5cdH1cblxuXHQvLyBUaGUgYXJlYSBpbiB0aGUgbWlkZGxlIGlzIGRpZmZlcmVudCBmb3IgYm90aCBvZiB0aGUgZGF0ZXMuXG5cdC8vIENvbGxlY3QgdGhlbSBkaXN0aW5jdGx5IHNvIHdlIGNhbiBqYW0gdGhlbSB0b2dldGhlciBsYXRlci5cblx0Zm9yIChtaWRkbGVJPWxlZnRJOyBtaWRkbGVJPD1yaWdodEk7IG1pZGRsZUkrKykge1xuXHRcdG1pZGRsZVN0cjEgKz0gZm9ybWF0RGF0ZVdpdGhDaHVuayhkYXRlMSwgY2h1bmtzW21pZGRsZUldKTtcblx0XHRtaWRkbGVTdHIyICs9IGZvcm1hdERhdGVXaXRoQ2h1bmsoZGF0ZTIsIGNodW5rc1ttaWRkbGVJXSk7XG5cdH1cblxuXHRpZiAobWlkZGxlU3RyMSB8fCBtaWRkbGVTdHIyKSB7XG5cdFx0aWYgKGlzUlRMKSB7XG5cdFx0XHRtaWRkbGVTdHIgPSBtaWRkbGVTdHIyICsgc2VwYXJhdG9yICsgbWlkZGxlU3RyMTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRtaWRkbGVTdHIgPSBtaWRkbGVTdHIxICsgc2VwYXJhdG9yICsgbWlkZGxlU3RyMjtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbGVmdFN0ciArIG1pZGRsZVN0ciArIHJpZ2h0U3RyO1xufVxuXG5cbnZhciBzaW1pbGFyVW5pdE1hcCA9IHtcblx0WTogJ3llYXInLFxuXHRNOiAnbW9udGgnLFxuXHREOiAnZGF5JywgLy8gZGF5IG9mIG1vbnRoXG5cdGQ6ICdkYXknLCAvLyBkYXkgb2Ygd2Vla1xuXHQvLyBwcmV2ZW50cyBhIHNlcGFyYXRvciBiZXR3ZWVuIGFueXRoaW5nIHRpbWUtcmVsYXRlZC4uLlxuXHRBOiAnc2Vjb25kJywgLy8gQU0vUE1cblx0YTogJ3NlY29uZCcsIC8vIGFtL3BtXG5cdFQ6ICdzZWNvbmQnLCAvLyBBL1Bcblx0dDogJ3NlY29uZCcsIC8vIGEvcFxuXHRIOiAnc2Vjb25kJywgLy8gaG91ciAoMjQpXG5cdGg6ICdzZWNvbmQnLCAvLyBob3VyICgxMilcblx0bTogJ3NlY29uZCcsIC8vIG1pbnV0ZVxuXHRzOiAnc2Vjb25kJyAvLyBzZWNvbmRcbn07XG4vLyBUT0RPOiB3ZWVrIG1heWJlP1xuXG5cbi8vIEdpdmVuIGEgZm9ybWF0dGluZyBjaHVuaywgYW5kIGdpdmVuIHRoYXQgYm90aCBkYXRlcyBhcmUgc2ltaWxhciBpbiB0aGUgcmVnYXJkIHRoZVxuLy8gZm9ybWF0dGluZyBjaHVuayBpcyBjb25jZXJuZWQsIGZvcm1hdCBkYXRlMSBhZ2FpbnN0IGBjaHVua2AuIE90aGVyd2lzZSwgcmV0dXJuIGBmYWxzZWAuXG5mdW5jdGlvbiBmb3JtYXRTaW1pbGFyQ2h1bmsoZGF0ZTEsIGRhdGUyLCB1bnpvbmVkRGF0ZTEsIHVuem9uZWREYXRlMiwgY2h1bmspIHtcblx0dmFyIHRva2VuO1xuXHR2YXIgdW5pdDtcblxuXHRpZiAodHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgeyAvLyBhIGxpdGVyYWwgc3RyaW5nXG5cdFx0cmV0dXJuIGNodW5rO1xuXHR9XG5cdGVsc2UgaWYgKCh0b2tlbiA9IGNodW5rLnRva2VuKSkge1xuXHRcdHVuaXQgPSBzaW1pbGFyVW5pdE1hcFt0b2tlbi5jaGFyQXQoMCldO1xuXG5cdFx0Ly8gYXJlIHRoZSBkYXRlcyB0aGUgc2FtZSBmb3IgdGhpcyB1bml0IG9mIG1lYXN1cmVtZW50P1xuXHRcdC8vIHVzZSB0aGUgdW56b25lZCBkYXRlcyBmb3IgdGhpcyBjYWxjdWxhdGlvbiBiZWNhdXNlIHVucmVsaWFibGUgd2hlbiBuZWFyIERTVCAoYnVnICMyMzk2KVxuXHRcdGlmICh1bml0ICYmIHVuem9uZWREYXRlMS5pc1NhbWUodW56b25lZERhdGUyLCB1bml0KSkge1xuXHRcdFx0cmV0dXJuIG9sZE1vbWVudEZvcm1hdChkYXRlMSwgdG9rZW4pOyAvLyB3b3VsZCBiZSB0aGUgc2FtZSBpZiB3ZSB1c2VkIGBkYXRlMmBcblx0XHRcdC8vIEJUVywgZG9uJ3Qgc3VwcG9ydCBjdXN0b20gdG9rZW5zXG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZhbHNlOyAvLyB0aGUgY2h1bmsgaXMgTk9UIHRoZSBzYW1lIGZvciB0aGUgdHdvIGRhdGVzXG5cdC8vIEJUVywgZG9uJ3Qgc3VwcG9ydCBzcGxpdHRpbmcgb24gbm9uLXplcm8gYXJlYXNcbn1cblxuXG4vLyBDaHVua2luZyBVdGlsc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbnZhciBmb3JtYXRTdHJpbmdDaHVua0NhY2hlID0ge307XG5cblxuZnVuY3Rpb24gZ2V0Rm9ybWF0U3RyaW5nQ2h1bmtzKGZvcm1hdFN0cikge1xuXHRpZiAoZm9ybWF0U3RyIGluIGZvcm1hdFN0cmluZ0NodW5rQ2FjaGUpIHtcblx0XHRyZXR1cm4gZm9ybWF0U3RyaW5nQ2h1bmtDYWNoZVtmb3JtYXRTdHJdO1xuXHR9XG5cdHJldHVybiAoZm9ybWF0U3RyaW5nQ2h1bmtDYWNoZVtmb3JtYXRTdHJdID0gY2h1bmtGb3JtYXRTdHJpbmcoZm9ybWF0U3RyKSk7XG59XG5cblxuLy8gQnJlYWsgdGhlIGZvcm1hdHRpbmcgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgY2h1bmtzXG5mdW5jdGlvbiBjaHVua0Zvcm1hdFN0cmluZyhmb3JtYXRTdHIpIHtcblx0dmFyIGNodW5rcyA9IFtdO1xuXHR2YXIgY2h1bmtlciA9IC9cXFsoW15cXF1dKilcXF18XFwoKFteXFwpXSopXFwpfChMVFN8TFR8KFxcdylcXDQqbz8pfChbXlxcd1xcW1xcKF0rKS9nOyAvLyBUT0RPOiBtb3JlIGRlc2NyaW1pbmF0aW9uXG5cdHZhciBtYXRjaDtcblxuXHR3aGlsZSAoKG1hdGNoID0gY2h1bmtlci5leGVjKGZvcm1hdFN0cikpKSB7XG5cdFx0aWYgKG1hdGNoWzFdKSB7IC8vIGEgbGl0ZXJhbCBzdHJpbmcgaW5zaWRlIFsgLi4uIF1cblx0XHRcdGNodW5rcy5wdXNoKG1hdGNoWzFdKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAobWF0Y2hbMl0pIHsgLy8gbm9uLXplcm8gZm9ybWF0dGluZyBpbnNpZGUgKCAuLi4gKVxuXHRcdFx0Y2h1bmtzLnB1c2goeyBtYXliZTogY2h1bmtGb3JtYXRTdHJpbmcobWF0Y2hbMl0pIH0pO1xuXHRcdH1cblx0XHRlbHNlIGlmIChtYXRjaFszXSkgeyAvLyBhIGZvcm1hdHRpbmcgdG9rZW5cblx0XHRcdGNodW5rcy5wdXNoKHsgdG9rZW46IG1hdGNoWzNdIH0pO1xuXHRcdH1cblx0XHRlbHNlIGlmIChtYXRjaFs1XSkgeyAvLyBhbiB1bmVuY2xvc2VkIGxpdGVyYWwgc3RyaW5nXG5cdFx0XHRjaHVua3MucHVzaChtYXRjaFs1XSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNodW5rcztcbn1cblxuXG4vLyBNaXNjIFV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuLy8gZ3JhbnVsYXJpdHkgb25seSBnb2VzIHVwIHVudGlsIGRheVxuLy8gVE9ETzogdW5pZnkgd2l0aCBzaW1pbGFyVW5pdE1hcFxudmFyIHRva2VuR3JhbnVsYXJpdGllcyA9IHtcblx0WTogeyB2YWx1ZTogMSwgdW5pdDogJ3llYXInIH0sXG5cdE06IHsgdmFsdWU6IDIsIHVuaXQ6ICdtb250aCcgfSxcblx0VzogeyB2YWx1ZTogMywgdW5pdDogJ3dlZWsnIH0sXG5cdHc6IHsgdmFsdWU6IDMsIHVuaXQ6ICd3ZWVrJyB9LFxuXHREOiB7IHZhbHVlOiA0LCB1bml0OiAnZGF5JyB9LCAvLyBkYXkgb2YgbW9udGhcblx0ZDogeyB2YWx1ZTogNCwgdW5pdDogJ2RheScgfSAvLyBkYXkgb2Ygd2Vla1xufTtcblxuLy8gcmV0dXJucyBhIHVuaXQgc3RyaW5nLCBlaXRoZXIgJ3llYXInLCAnbW9udGgnLCAnZGF5Jywgb3IgbnVsbFxuLy8gZm9yIHRoZSBtb3N0IGdyYW51bGFyIGZvcm1hdHRpbmcgdG9rZW4gaW4gdGhlIHN0cmluZy5cbkZDLnF1ZXJ5TW9zdEdyYW51bGFyRm9ybWF0VW5pdCA9IGZ1bmN0aW9uKGZvcm1hdFN0cikge1xuXHR2YXIgY2h1bmtzID0gZ2V0Rm9ybWF0U3RyaW5nQ2h1bmtzKGZvcm1hdFN0cik7XG5cdHZhciBpLCBjaHVuaztcblx0dmFyIGNhbmRpZGF0ZTtcblx0dmFyIGJlc3Q7XG5cblx0Zm9yIChpID0gMDsgaSA8IGNodW5rcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rID0gY2h1bmtzW2ldO1xuXHRcdGlmIChjaHVuay50b2tlbikge1xuXHRcdFx0Y2FuZGlkYXRlID0gdG9rZW5HcmFudWxhcml0aWVzW2NodW5rLnRva2VuLmNoYXJBdCgwKV07XG5cdFx0XHRpZiAoY2FuZGlkYXRlKSB7XG5cdFx0XHRcdGlmICghYmVzdCB8fCBjYW5kaWRhdGUudmFsdWUgPiBiZXN0LnZhbHVlKSB7XG5cdFx0XHRcdFx0YmVzdCA9IGNhbmRpZGF0ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmIChiZXN0KSB7XG5cdFx0cmV0dXJuIGJlc3QudW5pdDtcblx0fVxuXG5cdHJldHVybiBudWxsO1xufTtcblxuOztcblxuRkMuQ2xhc3MgPSBDbGFzczsgLy8gZXhwb3J0XG5cbi8vIENsYXNzIHRoYXQgYWxsIG90aGVyIGNsYXNzZXMgd2lsbCBpbmhlcml0IGZyb21cbmZ1bmN0aW9uIENsYXNzKCkgeyB9XG5cblxuLy8gQ2FsbGVkIG9uIGEgY2xhc3MgdG8gY3JlYXRlIGEgc3ViY2xhc3MuXG4vLyBMYXN0IGFyZ3VtZW50IGNvbnRhaW5zIGluc3RhbmNlIG1ldGhvZHMuIEFueSBhcmd1bWVudCBiZWZvcmUgdGhlIGxhc3QgYXJlIGNvbnNpZGVyZWQgbWl4aW5zLlxuQ2xhc3MuZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG5cdHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXHR2YXIgaTtcblx0dmFyIG1lbWJlcnM7XG5cblx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0bWVtYmVycyA9IGFyZ3VtZW50c1tpXTtcblx0XHRpZiAoaSA8IGxlbiAtIDEpIHsgLy8gbm90IHRoZSBsYXN0IGFyZ3VtZW50P1xuXHRcdFx0bWl4SW50b0NsYXNzKHRoaXMsIG1lbWJlcnMpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBleHRlbmRDbGFzcyh0aGlzLCBtZW1iZXJzIHx8IHt9KTsgLy8gbWVtYmVycyB3aWxsIGJlIHVuZGVmaW5lZCBpZiBubyBhcmd1bWVudHNcbn07XG5cblxuLy8gQWRkcyBuZXcgbWVtYmVyIHZhcmlhYmxlcy9tZXRob2RzIHRvIHRoZSBjbGFzcydzIHByb3RvdHlwZS5cbi8vIENhbiBiZSBjYWxsZWQgd2l0aCBhbm90aGVyIGNsYXNzLCBvciBhIHBsYWluIG9iamVjdCBoYXNoIGNvbnRhaW5pbmcgbmV3IG1lbWJlcnMuXG5DbGFzcy5taXhpbiA9IGZ1bmN0aW9uKG1lbWJlcnMpIHtcblx0bWl4SW50b0NsYXNzKHRoaXMsIG1lbWJlcnMpO1xufTtcblxuXG5mdW5jdGlvbiBleHRlbmRDbGFzcyhzdXBlckNsYXNzLCBtZW1iZXJzKSB7XG5cdHZhciBzdWJDbGFzcztcblxuXHQvLyBlbnN1cmUgYSBjb25zdHJ1Y3RvciBmb3IgdGhlIHN1YmNsYXNzLCBmb3J3YXJkaW5nIGFsbCBhcmd1bWVudHMgdG8gdGhlIHN1cGVyLWNvbnN0cnVjdG9yIGlmIGl0IGRvZXNuJ3QgZXhpc3Rcblx0aWYgKGhhc093blByb3AobWVtYmVycywgJ2NvbnN0cnVjdG9yJykpIHtcblx0XHRzdWJDbGFzcyA9IG1lbWJlcnMuY29uc3RydWN0b3I7XG5cdH1cblx0aWYgKHR5cGVvZiBzdWJDbGFzcyAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdHN1YkNsYXNzID0gbWVtYmVycy5jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0c3VwZXJDbGFzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdH07XG5cdH1cblxuXHQvLyBidWlsZCB0aGUgYmFzZSBwcm90b3R5cGUgZm9yIHRoZSBzdWJjbGFzcywgd2hpY2ggaXMgYW4gbmV3IG9iamVjdCBjaGFpbmVkIHRvIHRoZSBzdXBlcmNsYXNzJ3MgcHJvdG90eXBlXG5cdHN1YkNsYXNzLnByb3RvdHlwZSA9IGNyZWF0ZU9iamVjdChzdXBlckNsYXNzLnByb3RvdHlwZSk7XG5cblx0Ly8gY29weSBlYWNoIG1lbWJlciB2YXJpYWJsZS9tZXRob2Qgb250byB0aGUgdGhlIHN1YmNsYXNzJ3MgcHJvdG90eXBlXG5cdGNvcHlPd25Qcm9wcyhtZW1iZXJzLCBzdWJDbGFzcy5wcm90b3R5cGUpO1xuXG5cdC8vIGNvcHkgb3ZlciBhbGwgY2xhc3MgdmFyaWFibGVzL21ldGhvZHMgdG8gdGhlIHN1YmNsYXNzLCBzdWNoIGFzIGBleHRlbmRgIGFuZCBgbWl4aW5gXG5cdGNvcHlPd25Qcm9wcyhzdXBlckNsYXNzLCBzdWJDbGFzcyk7XG5cblx0cmV0dXJuIHN1YkNsYXNzO1xufVxuXG5cbmZ1bmN0aW9uIG1peEludG9DbGFzcyh0aGVDbGFzcywgbWVtYmVycykge1xuXHRjb3B5T3duUHJvcHMobWVtYmVycywgdGhlQ2xhc3MucHJvdG90eXBlKTtcbn1cbjs7XG5cbi8qXG5XcmFwIGpRdWVyeSdzIERlZmVycmVkIFByb21pc2Ugb2JqZWN0IHRvIGJlIHNsaWdodGx5IG1vcmUgUHJvbWlzZS9BKyBjb21wbGlhbnQuXG5XaXRoIHRoZSBhZGRlZCBub24tc3RhbmRhcmQgZmVhdHVyZSBvZiBzeW5jaHJvbm91c2x5IGV4ZWN1dGluZyBoYW5kbGVycyBvbiByZXNvbHZlZCBwcm9taXNlcyxcbndoaWNoIGRvZXNuJ3QgYWx3YXlzIGhhcHBlbiBvdGhlcndpc2UgKGVzcCB3aXRoIG5lc3RlZCAudGhlbiBoYW5kbGVycyE/KSxcbnNvLCB0aGlzIG1ha2VzIHRoaW5ncyBhIGxvdCBlYXNpZXIsIGVzcCBiZWNhdXNlIGpRdWVyeSAzIGNoYW5nZWQgdGhlIHN5bmNocm9uaWNpdHkgZm9yIERlZmVycmVkIG9iamVjdHMuXG5cblRPRE86IHdyaXRlIHRlc3RzIGFuZCBtb3JlIGNvbW1lbnRzXG4qL1xuXG5mdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKSB7XG5cdHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcblx0dmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlKCk7XG5cblx0aWYgKHR5cGVvZiBleGVjdXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGV4ZWN1dG9yKFxuXHRcdFx0ZnVuY3Rpb24odmFsdWUpIHsgLy8gcmVzb2x2ZVxuXHRcdFx0XHRpZiAoUHJvbWlzZS5pbW1lZGlhdGUpIHtcblx0XHRcdFx0XHRwcm9taXNlLl92YWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUodmFsdWUpO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uKCkgeyAvLyByZWplY3Rcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCk7XG5cdFx0XHR9XG5cdFx0KTtcblx0fVxuXG5cdGlmIChQcm9taXNlLmltbWVkaWF0ZSkge1xuXHRcdHZhciBvcmlnVGhlbiA9IHByb21pc2UudGhlbjtcblxuXHRcdHByb21pc2UudGhlbiA9IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG5cdFx0XHR2YXIgc3RhdGUgPSBwcm9taXNlLnN0YXRlKCk7XG5cblx0XHRcdGlmIChzdGF0ZSA9PT0gJ3Jlc29sdmVkJykge1xuXHRcdFx0XHRpZiAodHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShvbkZ1bGZpbGxlZChwcm9taXNlLl92YWx1ZSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChzdGF0ZSA9PT0gJ3JlamVjdGVkJykge1xuXHRcdFx0XHRpZiAodHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRvblJlamVjdGVkKCk7XG5cdFx0XHRcdFx0cmV0dXJuIHByb21pc2U7IC8vIGFscmVhZHkgcmVqZWN0ZWRcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb3JpZ1RoZW4uY2FsbChwcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCk7XG5cdFx0fTtcblx0fVxuXG5cdHJldHVybiBwcm9taXNlOyAvLyBpbnN0YW5jZW9mIFByb21pc2Ugd2lsbCBicmVhayA6KCBUT0RPOiBtYWtlIFByb21pc2UgYSByZWFsIGNsYXNzXG59XG5cbkZDLlByb21pc2UgPSBQcm9taXNlO1xuXG5Qcm9taXNlLmltbWVkaWF0ZSA9IHRydWU7XG5cblxuUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpIHtcblx0aWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5yZXNvbHZlID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIHZhbHVlLnByb21pc2UoKTtcblx0fVxuXHRpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblx0ZWxzZSB7XG5cdFx0dmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpLnJlc29sdmUodmFsdWUpO1xuXHRcdHZhciBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSgpO1xuXG5cdFx0aWYgKFByb21pc2UuaW1tZWRpYXRlKSB7XG5cdFx0XHR2YXIgb3JpZ1RoZW4gPSBwcm9taXNlLnRoZW47XG5cblx0XHRcdHByb21pc2UuX3ZhbHVlID0gdmFsdWU7XG5cblx0XHRcdHByb21pc2UudGhlbiA9IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygb25GdWxmaWxsZWQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9uRnVsZmlsbGVkKHZhbHVlKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG9yaWdUaGVuLmNhbGwocHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fVxufTtcblxuXG5Qcm9taXNlLnJlamVjdCA9IGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gJC5EZWZlcnJlZCgpLnJlamVjdCgpLnByb21pc2UoKTtcbn07XG5cblxuUHJvbWlzZS5hbGwgPSBmdW5jdGlvbihpbnB1dHMpIHtcblx0dmFyIGhhc0FsbFZhbHVlcyA9IGZhbHNlO1xuXHR2YXIgdmFsdWVzO1xuXHR2YXIgaSwgaW5wdXQ7XG5cblx0aWYgKFByb21pc2UuaW1tZWRpYXRlKSB7XG5cdFx0aGFzQWxsVmFsdWVzID0gdHJ1ZTtcblx0XHR2YWx1ZXMgPSBbXTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlucHV0ID0gaW5wdXRzW2ldO1xuXG5cdFx0XHRpZiAoaW5wdXQgJiYgdHlwZW9mIGlucHV0LnN0YXRlID09PSAnZnVuY3Rpb24nICYmIGlucHV0LnN0YXRlKCkgPT09ICdyZXNvbHZlZCcgJiYgKCdfdmFsdWUnIGluIGlucHV0KSkge1xuXHRcdFx0XHR2YWx1ZXMucHVzaChpbnB1dC5fdmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoaW5wdXQgJiYgdHlwZW9mIGlucHV0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0aGFzQWxsVmFsdWVzID0gZmFsc2U7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHZhbHVlcy5wdXNoKGlucHV0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoaGFzQWxsVmFsdWVzKSB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZXMpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHJldHVybiAkLndoZW4uYXBwbHkoJC53aGVuLCBpbnB1dHMpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gJC53aGVuKCQubWFrZUFycmF5KGFyZ3VtZW50cykpO1xuXHRcdH0pO1xuXHR9XG59O1xuXG47O1xuXG4vLyBUT0RPOiB3cml0ZSB0ZXN0cyBhbmQgY2xlYW4gdXAgY29kZVxuXG5mdW5jdGlvbiBUYXNrUXVldWUoZGVib3VuY2VXYWl0KSB7XG5cdHZhciBxID0gW107IC8vIGFycmF5IG9mIHJ1bkZ1bmNzXG5cblx0ZnVuY3Rpb24gYWRkVGFzayh0YXNrRnVuYykge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG5cblx0XHRcdC8vIHNob3VsZCBydW4gdGhpcyBmdW5jdGlvbiB3aGVuIGl0J3MgdGFza0Z1bmMncyB0dXJuIHRvIHJ1bi5cblx0XHRcdC8vIHJlc3BvbnNpYmxlIGZvciBwb3BwaW5nIGl0c2VsZiBvZmYgdGhlIHF1ZXVlLlxuXHRcdFx0dmFyIHJ1bkZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0UHJvbWlzZS5yZXNvbHZlKHRhc2tGdW5jKCkpIC8vIHJlc3VsdCBtaWdodCBiZSBhc3luYywgY29lcmNlIHRvIHByb21pc2Vcblx0XHRcdFx0XHQudGhlbihyZXNvbHZlKSAvLyByZXNvbHZlIFRhc2tRdWV1ZTo6cHVzaCdzIHByb21pc2UsIGZvciB0aGUgY2FsbGVyLiB3aWxsIHJlY2VpdmUgcmVzdWx0IG9mIHRhc2tGdW5jLlxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cS5zaGlmdCgpOyAvLyBwb3AgaXRzZWxmIG9mZlxuXG5cdFx0XHRcdFx0XHQvLyBydW4gdGhlIG5leHQgdGFzaywgaWYgYW55XG5cdFx0XHRcdFx0XHRpZiAocS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0cVswXSgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gYWx3YXlzIHB1dCB0aGUgdGFzayBhdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZSwgQkVGT1JFIHJ1bm5pbmcgdGhlIHRhc2tcblx0XHRcdHEucHVzaChydW5GdW5jKTtcblxuXHRcdFx0Ly8gaWYgaXQncyB0aGUgb25seSB0YXNrIGluIHRoZSBxdWV1ZSwgcnVuIGltbWVkaWF0ZWx5XG5cdFx0XHRpZiAocS5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0cnVuRnVuYygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0dGhpcy5hZGQgPSAvLyBwb3RlbnRpYWxseSBkZWJvdW5jZSwgZm9yIHRoZSBwdWJsaWMgbWV0aG9kXG5cdFx0dHlwZW9mIGRlYm91bmNlV2FpdCA9PT0gJ251bWJlcicgP1xuXHRcdFx0ZGVib3VuY2UoYWRkVGFzaywgZGVib3VuY2VXYWl0KSA6XG5cdFx0XHRhZGRUYXNrOyAvLyBpZiBub3QgYSBudW1iZXIgKG51bGwvdW5kZWZpbmVkL2ZhbHNlKSwgbm8gZGVib3VuY2UgYXQgYWxsXG5cblx0dGhpcy5hZGRRdWlja2x5ID0gYWRkVGFzazsgLy8gZ3VhcmFudGVlZCBubyBkZWJvdW5jZVxufVxuXG5GQy5UYXNrUXVldWUgPSBUYXNrUXVldWU7XG5cbi8qXG5xID0gbmV3IFRhc2tRdWV1ZSgpO1xuXG5mdW5jdGlvbiB3b3JrKGkpIHtcblx0cmV0dXJuIHEucHVzaChmdW5jdGlvbigpIHtcblx0XHR0cmlnZ2VyKCk7XG5cdFx0Y29uc29sZS5sb2coJ3dvcmsnICsgaSk7XG5cdH0pO1xufVxuXG52YXIgY250ID0gMDtcblxuZnVuY3Rpb24gdHJpZ2dlcigpIHtcblx0aWYgKGNudCA8IDUpIHtcblx0XHRjbnQrKztcblx0XHR3b3JrKGNudCk7XG5cdH1cbn1cblxud29yayg5KTtcbiovXG5cbjs7XG5cbnZhciBFbWl0dGVyTWl4aW4gPSBGQy5FbWl0dGVyTWl4aW4gPSB7XG5cblx0Ly8galF1ZXJ5LWlmaWNhdGlvbiB2aWEgJCh0aGlzKSBhbGxvd3MgYSBub24tRE9NIG9iamVjdCB0byBoYXZlXG5cdC8vIHRoZSBzYW1lIGV2ZW50IGhhbmRsaW5nIGNhcGFiaWxpdGllcyAoaW5jbHVkaW5nIG5hbWVzcGFjZXMpLlxuXG5cblx0b246IGZ1bmN0aW9uKHR5cGVzLCBoYW5kbGVyKSB7XG5cdFx0JCh0aGlzKS5vbih0eXBlcywgdGhpcy5fcHJlcGFyZUludGVyY2VwdChoYW5kbGVyKSk7XG5cdFx0cmV0dXJuIHRoaXM7IC8vIGZvciBjaGFpbmluZ1xuXHR9LFxuXG5cblx0b25lOiBmdW5jdGlvbih0eXBlcywgaGFuZGxlcikge1xuXHRcdCQodGhpcykub25lKHR5cGVzLCB0aGlzLl9wcmVwYXJlSW50ZXJjZXB0KGhhbmRsZXIpKTtcblx0XHRyZXR1cm4gdGhpczsgLy8gZm9yIGNoYWluaW5nXG5cdH0sXG5cblxuXHRfcHJlcGFyZUludGVyY2VwdDogZnVuY3Rpb24oaGFuZGxlcikge1xuXHRcdC8vIGhhbmRsZXJzIGFyZSBhbHdheXMgY2FsbGVkIHdpdGggYW4gXCJldmVudFwiIG9iamVjdCBhcyB0aGVpciBmaXJzdCBwYXJhbS5cblx0XHQvLyBzbmVhayB0aGUgYHRoaXNgIGNvbnRleHQgYW5kIGFyZ3VtZW50cyBpbnRvIHRoZSBleHRyYSBwYXJhbWV0ZXIgb2JqZWN0XG5cdFx0Ly8gYW5kIGZvcndhcmQgdGhlbSBvbiB0byB0aGUgb3JpZ2luYWwgaGFuZGxlci5cblx0XHR2YXIgaW50ZXJjZXB0ID0gZnVuY3Rpb24oZXYsIGV4dHJhKSB7XG5cdFx0XHRyZXR1cm4gaGFuZGxlci5hcHBseShcblx0XHRcdFx0ZXh0cmEuY29udGV4dCB8fCB0aGlzLFxuXHRcdFx0XHRleHRyYS5hcmdzIHx8IFtdXG5cdFx0XHQpO1xuXHRcdH07XG5cblx0XHQvLyBtaW1pY2sgalF1ZXJ5J3MgaW50ZXJuYWwgXCJwcm94eVwiIHN5c3RlbSAocmlza3ksIEkga25vdylcblx0XHQvLyBjYXVzaW5nIGFsbCBmdW5jdGlvbnMgd2l0aCB0aGUgc2FtZSAuZ3VpZCB0byBhcHBlYXIgdG8gYmUgdGhlIHNhbWUuXG5cdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvYmxvYi8yLjIuNC9zcmMvY29yZS5qcyNMNDQ4XG5cdFx0Ly8gdGhpcyBpcyBuZWVkZWQgZm9yIGNhbGxpbmcgLm9mZiB3aXRoIHRoZSBvcmlnaW5hbCBub24taW50ZXJjZXB0IGhhbmRsZXIuXG5cdFx0aWYgKCFoYW5kbGVyLmd1aWQpIHtcblx0XHRcdGhhbmRsZXIuZ3VpZCA9ICQuZ3VpZCsrO1xuXHRcdH1cblx0XHRpbnRlcmNlcHQuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblxuXHRcdHJldHVybiBpbnRlcmNlcHQ7XG5cdH0sXG5cblxuXHRvZmY6IGZ1bmN0aW9uKHR5cGVzLCBoYW5kbGVyKSB7XG5cdFx0JCh0aGlzKS5vZmYodHlwZXMsIGhhbmRsZXIpO1xuXG5cdFx0cmV0dXJuIHRoaXM7IC8vIGZvciBjaGFpbmluZ1xuXHR9LFxuXG5cblx0dHJpZ2dlcjogZnVuY3Rpb24odHlwZXMpIHtcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7IC8vIGFyZ3VtZW50cyBhZnRlciB0aGUgZmlyc3RcblxuXHRcdC8vIHBhc3MgaW4gXCJleHRyYVwiIGluZm8gdG8gdGhlIGludGVyY2VwdFxuXHRcdCQodGhpcykudHJpZ2dlckhhbmRsZXIodHlwZXMsIHsgYXJnczogYXJncyB9KTtcblxuXHRcdHJldHVybiB0aGlzOyAvLyBmb3IgY2hhaW5pbmdcblx0fSxcblxuXG5cdHRyaWdnZXJXaXRoOiBmdW5jdGlvbih0eXBlcywgY29udGV4dCwgYXJncykge1xuXG5cdFx0Ly8gYHRyaWdnZXJIYW5kbGVyYCBpcyBsZXNzIHJlbGlhbnQgb24gdGhlIERPTSBjb21wYXJlZCB0byBgdHJpZ2dlcmAuXG5cdFx0Ly8gcGFzcyBpbiBcImV4dHJhXCIgaW5mbyB0byB0aGUgaW50ZXJjZXB0LlxuXHRcdCQodGhpcykudHJpZ2dlckhhbmRsZXIodHlwZXMsIHsgY29udGV4dDogY29udGV4dCwgYXJnczogYXJncyB9KTtcblxuXHRcdHJldHVybiB0aGlzOyAvLyBmb3IgY2hhaW5pbmdcblx0fVxuXG59O1xuXG47O1xuXG4vKlxuVXRpbGl0eSBtZXRob2RzIGZvciBlYXNpbHkgbGlzdGVuaW5nIHRvIGV2ZW50cyBvbiBhbm90aGVyIG9iamVjdCxcbmFuZCBtb3JlIGltcG9ydGFudGx5LCBlYXNpbHkgdW5saXN0ZW5pbmcgZnJvbSB0aGVtLlxuKi9cbnZhciBMaXN0ZW5lck1peGluID0gRkMuTGlzdGVuZXJNaXhpbiA9IChmdW5jdGlvbigpIHtcblx0dmFyIGd1aWQgPSAwO1xuXHR2YXIgTGlzdGVuZXJNaXhpbiA9IHtcblxuXHRcdGxpc3RlbmVySWQ6IG51bGwsXG5cblx0XHQvKlxuXHRcdEdpdmVuIGFuIGBvdGhlcmAgb2JqZWN0IHRoYXQgaGFzIG9uL29mZiBtZXRob2RzLCBiaW5kIHRoZSBnaXZlbiBgY2FsbGJhY2tgIHRvIGFuIGV2ZW50IGJ5IHRoZSBnaXZlbiBuYW1lLlxuXHRcdFRoZSBgY2FsbGJhY2tgIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIGB0aGlzYCBjb250ZXh0IG9mIHRoZSBvYmplY3QgdGhhdCAubGlzdGVuVG8gaXMgYmVpbmcgY2FsbGVkIG9uLlxuXHRcdENhbiBiZSBjYWxsZWQ6XG5cdFx0XHQubGlzdGVuVG8ob3RoZXIsIGV2ZW50TmFtZSwgY2FsbGJhY2spXG5cdFx0T1Jcblx0XHRcdC5saXN0ZW5UbyhvdGhlciwge1xuXHRcdFx0XHRldmVudE5hbWUxOiBjYWxsYmFjazEsXG5cdFx0XHRcdGV2ZW50TmFtZTI6IGNhbGxiYWNrMlxuXHRcdFx0fSlcblx0XHQqL1xuXHRcdGxpc3RlblRvOiBmdW5jdGlvbihvdGhlciwgYXJnLCBjYWxsYmFjaykge1xuXHRcdFx0aWYgKHR5cGVvZiBhcmcgPT09ICdvYmplY3QnKSB7IC8vIGdpdmVuIGRpY3Rpb25hcnkgb2YgY2FsbGJhY2tzXG5cdFx0XHRcdGZvciAodmFyIGV2ZW50TmFtZSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoYXJnLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHtcblx0XHRcdFx0XHRcdHRoaXMubGlzdGVuVG8ob3RoZXIsIGV2ZW50TmFtZSwgYXJnW2V2ZW50TmFtZV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0b3RoZXIub24oXG5cdFx0XHRcdFx0YXJnICsgJy4nICsgdGhpcy5nZXRMaXN0ZW5lck5hbWVzcGFjZSgpLCAvLyB1c2UgZXZlbnQgbmFtZXNwYWNpbmcgdG8gaWRlbnRpZnkgdGhpcyBvYmplY3Rcblx0XHRcdFx0XHQkLnByb3h5KGNhbGxiYWNrLCB0aGlzKSAvLyBhbHdheXMgdXNlIGB0aGlzYCBjb250ZXh0XG5cdFx0XHRcdFx0XHQvLyB0aGUgdXN1YWxseS11bmRlc2lyZWQgalF1ZXJ5IGd1aWQgYmVoYXZpb3IgZG9lc24ndCBtYXR0ZXIsXG5cdFx0XHRcdFx0XHQvLyBiZWNhdXNlIHdlIGFsd2F5cyB1bmJpbmQgdmlhIG5hbWVzcGFjZVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKlxuXHRcdENhdXNlcyB0aGUgY3VycmVudCBvYmplY3QgdG8gc3RvcCBsaXN0ZW5pbmcgdG8gZXZlbnRzIG9uIHRoZSBgb3RoZXJgIG9iamVjdC5cblx0XHRgZXZlbnROYW1lYCBpcyBvcHRpb25hbC4gSWYgb21pdHRlZCwgd2lsbCBzdG9wIGxpc3RlbmluZyB0byBBTEwgZXZlbnRzIG9uIGBvdGhlcmAuXG5cdFx0Ki9cblx0XHRzdG9wTGlzdGVuaW5nVG86IGZ1bmN0aW9uKG90aGVyLCBldmVudE5hbWUpIHtcblx0XHRcdG90aGVyLm9mZigoZXZlbnROYW1lIHx8ICcnKSArICcuJyArIHRoaXMuZ2V0TGlzdGVuZXJOYW1lc3BhY2UoKSk7XG5cdFx0fSxcblxuXHRcdC8qXG5cdFx0UmV0dXJucyBhIHN0cmluZywgdW5pcXVlIHRvIHRoaXMgb2JqZWN0LCB0byBiZSB1c2VkIGZvciBldmVudCBuYW1lc3BhY2luZ1xuXHRcdCovXG5cdFx0Z2V0TGlzdGVuZXJOYW1lc3BhY2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKHRoaXMubGlzdGVuZXJJZCA9PSBudWxsKSB7XG5cdFx0XHRcdHRoaXMubGlzdGVuZXJJZCA9IGd1aWQrKztcblx0XHRcdH1cblx0XHRcdHJldHVybiAnX2xpc3RlbmVyJyArIHRoaXMubGlzdGVuZXJJZDtcblx0XHR9XG5cblx0fTtcblx0cmV0dXJuIExpc3RlbmVyTWl4aW47XG59KSgpO1xuOztcblxuLy8gc2ltcGxlIGNsYXNzIGZvciB0b2dnbGUgYSBgaXNJZ25vcmluZ01vdXNlYCBmbGFnIG9uIGRlbGF5XG4vLyBpbml0TW91c2VJZ25vcmluZyBtdXN0IGZpcnN0IGJlIGNhbGxlZCwgd2l0aCBhIG1pbGxpc2Vjb25kIGRlbGF5IHNldHRpbmcuXG52YXIgTW91c2VJZ25vcmVyTWl4aW4gPSB7XG5cblx0aXNJZ25vcmluZ01vdXNlOiBmYWxzZSwgLy8gYm9vbFxuXHRkZWxheVVuaWdub3JlTW91c2U6IG51bGwsIC8vIG1ldGhvZFxuXG5cblx0aW5pdE1vdXNlSWdub3Jpbmc6IGZ1bmN0aW9uKGRlbGF5KSB7XG5cdFx0dGhpcy5kZWxheVVuaWdub3JlTW91c2UgPSBkZWJvdW5jZShwcm94eSh0aGlzLCAndW5pZ25vcmVNb3VzZScpLCBkZWxheSB8fCAxMDAwKTtcblx0fSxcblxuXG5cdC8vIHRlbXBvcmFyaWx5IGlnbm9yZSBtb3VzZSBhY3Rpb25zIG9uIHNlZ21lbnRzXG5cdHRlbXBJZ25vcmVNb3VzZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5pc0lnbm9yaW5nTW91c2UgPSB0cnVlO1xuXHRcdHRoaXMuZGVsYXlVbmlnbm9yZU1vdXNlKCk7XG5cdH0sXG5cblxuXHQvLyBkZWxheVVuaWdub3JlTW91c2UgZXZlbnR1YWxseSBjYWxscyB0aGlzXG5cdHVuaWdub3JlTW91c2U6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuaXNJZ25vcmluZ01vdXNlID0gZmFsc2U7XG5cdH1cblxufTtcblxuOztcblxuLyogQSByZWN0YW5ndWxhciBwYW5lbCB0aGF0IGlzIGFic29sdXRlbHkgcG9zaXRpb25lZCBvdmVyIG90aGVyIGNvbnRlbnRcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuT3B0aW9uczpcblx0LSBjbGFzc05hbWUgKHN0cmluZylcblx0LSBjb250ZW50IChIVE1MIHN0cmluZyBvciBqUXVlcnkgZWxlbWVudCBzZXQpXG5cdC0gcGFyZW50RWxcblx0LSB0b3Bcblx0LSBsZWZ0XG5cdC0gcmlnaHQgKHRoZSB4IGNvb3JkIG9mIHdoZXJlIHRoZSByaWdodCBlZGdlIHNob3VsZCBiZS4gbm90IGEgXCJDU1NcIiByaWdodClcblx0LSBhdXRvSGlkZSAoYm9vbGVhbilcblx0LSBzaG93IChjYWxsYmFjaylcblx0LSBoaWRlIChjYWxsYmFjaylcbiovXG5cbnZhciBQb3BvdmVyID0gQ2xhc3MuZXh0ZW5kKExpc3RlbmVyTWl4aW4sIHtcblxuXHRpc0hpZGRlbjogdHJ1ZSxcblx0b3B0aW9uczogbnVsbCxcblx0ZWw6IG51bGwsIC8vIHRoZSBjb250YWluZXIgZWxlbWVudCBmb3IgdGhlIHBvcG92ZXIuIGdlbmVyYXRlZCBieSB0aGlzIG9iamVjdFxuXHRtYXJnaW46IDEwLCAvLyB0aGUgc3BhY2UgcmVxdWlyZWQgYmV0d2VlbiB0aGUgcG9wb3ZlciBhbmQgdGhlIGVkZ2VzIG9mIHRoZSBzY3JvbGwgY29udGFpbmVyXG5cblxuXHRjb25zdHJ1Y3RvcjogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdH0sXG5cblxuXHQvLyBTaG93cyB0aGUgcG9wb3ZlciBvbiB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uLiBSZW5kZXJzIGl0IGlmIG5vdCBhbHJlYWR5XG5cdHNob3c6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmlzSGlkZGVuKSB7XG5cdFx0XHRpZiAoIXRoaXMuZWwpIHtcblx0XHRcdFx0dGhpcy5yZW5kZXIoKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuZWwuc2hvdygpO1xuXHRcdFx0dGhpcy5wb3NpdGlvbigpO1xuXHRcdFx0dGhpcy5pc0hpZGRlbiA9IGZhbHNlO1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdzaG93Jyk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gSGlkZXMgdGhlIHBvcG92ZXIsIHRocm91Z2ggQ1NTLCBidXQgZG9lcyBub3QgcmVtb3ZlIGl0IGZyb20gdGhlIERPTVxuXHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoIXRoaXMuaXNIaWRkZW4pIHtcblx0XHRcdHRoaXMuZWwuaGlkZSgpO1xuXHRcdFx0dGhpcy5pc0hpZGRlbiA9IHRydWU7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2hpZGUnKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDcmVhdGVzIGB0aGlzLmVsYCBhbmQgcmVuZGVycyBjb250ZW50IGluc2lkZSBvZiBpdFxuXHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHR0aGlzLmVsID0gJCgnPGRpdiBjbGFzcz1cImZjLXBvcG92ZXJcIi8+Jylcblx0XHRcdC5hZGRDbGFzcyhvcHRpb25zLmNsYXNzTmFtZSB8fCAnJylcblx0XHRcdC5jc3Moe1xuXHRcdFx0XHQvLyBwb3NpdGlvbiBpbml0aWFsbHkgdG8gdGhlIHRvcCBsZWZ0IHRvIGF2b2lkIGNyZWF0aW5nIHNjcm9sbGJhcnNcblx0XHRcdFx0dG9wOiAwLFxuXHRcdFx0XHRsZWZ0OiAwXG5cdFx0XHR9KVxuXHRcdFx0LmFwcGVuZChvcHRpb25zLmNvbnRlbnQpXG5cdFx0XHQuYXBwZW5kVG8ob3B0aW9ucy5wYXJlbnRFbCk7XG5cblx0XHQvLyB3aGVuIGEgY2xpY2sgaGFwcGVucyBvbiBhbnl0aGluZyBpbnNpZGUgd2l0aCBhICdmYy1jbG9zZScgY2xhc3NOYW1lLCBoaWRlIHRoZSBwb3BvdmVyXG5cdFx0dGhpcy5lbC5vbignY2xpY2snLCAnLmZjLWNsb3NlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRfdGhpcy5oaWRlKCk7XG5cdFx0fSk7XG5cblx0XHRpZiAob3B0aW9ucy5hdXRvSGlkZSkge1xuXHRcdFx0dGhpcy5saXN0ZW5UbygkKGRvY3VtZW50KSwgJ21vdXNlZG93bicsIHRoaXMuZG9jdW1lbnRNb3VzZWRvd24pO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFRyaWdnZXJlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyAqYW55d2hlcmUqIGluIHRoZSBkb2N1bWVudCwgZm9yIHRoZSBhdXRvSGlkZSBmZWF0dXJlXG5cdGRvY3VtZW50TW91c2Vkb3duOiBmdW5jdGlvbihldikge1xuXHRcdC8vIG9ubHkgaGlkZSB0aGUgcG9wb3ZlciBpZiB0aGUgY2xpY2sgaGFwcGVuZWQgb3V0c2lkZSB0aGUgcG9wb3ZlclxuXHRcdGlmICh0aGlzLmVsICYmICEkKGV2LnRhcmdldCkuY2xvc2VzdCh0aGlzLmVsKS5sZW5ndGgpIHtcblx0XHRcdHRoaXMuaGlkZSgpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIEhpZGVzIGFuZCB1bnJlZ2lzdGVycyBhbnkgaGFuZGxlcnNcblx0cmVtb3ZlRWxlbWVudDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5oaWRlKCk7XG5cblx0XHRpZiAodGhpcy5lbCkge1xuXHRcdFx0dGhpcy5lbC5yZW1vdmUoKTtcblx0XHRcdHRoaXMuZWwgPSBudWxsO1xuXHRcdH1cblxuXHRcdHRoaXMuc3RvcExpc3RlbmluZ1RvKCQoZG9jdW1lbnQpLCAnbW91c2Vkb3duJyk7XG5cdH0sXG5cblxuXHQvLyBQb3NpdGlvbnMgdGhlIHBvcG92ZXIgb3B0aW1hbGx5LCB1c2luZyB0aGUgdG9wL2xlZnQvcmlnaHQgb3B0aW9uc1xuXHRwb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cdFx0dmFyIG9yaWdpbiA9IHRoaXMuZWwub2Zmc2V0UGFyZW50KCkub2Zmc2V0KCk7XG5cdFx0dmFyIHdpZHRoID0gdGhpcy5lbC5vdXRlcldpZHRoKCk7XG5cdFx0dmFyIGhlaWdodCA9IHRoaXMuZWwub3V0ZXJIZWlnaHQoKTtcblx0XHR2YXIgd2luZG93RWwgPSAkKHdpbmRvdyk7XG5cdFx0dmFyIHZpZXdwb3J0RWwgPSBnZXRTY3JvbGxQYXJlbnQodGhpcy5lbCk7XG5cdFx0dmFyIHZpZXdwb3J0VG9wO1xuXHRcdHZhciB2aWV3cG9ydExlZnQ7XG5cdFx0dmFyIHZpZXdwb3J0T2Zmc2V0O1xuXHRcdHZhciB0b3A7IC8vIHRoZSBcInBvc2l0aW9uXCIgKG5vdCBcIm9mZnNldFwiKSB2YWx1ZXMgZm9yIHRoZSBwb3BvdmVyXG5cdFx0dmFyIGxlZnQ7IC8vXG5cblx0XHQvLyBjb21wdXRlIHRvcCBhbmQgbGVmdFxuXHRcdHRvcCA9IG9wdGlvbnMudG9wIHx8IDA7XG5cdFx0aWYgKG9wdGlvbnMubGVmdCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRsZWZ0ID0gb3B0aW9ucy5sZWZ0O1xuXHRcdH1cblx0XHRlbHNlIGlmIChvcHRpb25zLnJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGxlZnQgPSBvcHRpb25zLnJpZ2h0IC0gd2lkdGg7IC8vIGRlcml2ZSB0aGUgbGVmdCB2YWx1ZSBmcm9tIHRoZSByaWdodCB2YWx1ZVxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGxlZnQgPSAwO1xuXHRcdH1cblxuXHRcdGlmICh2aWV3cG9ydEVsLmlzKHdpbmRvdykgfHwgdmlld3BvcnRFbC5pcyhkb2N1bWVudCkpIHsgLy8gbm9ybWFsaXplIGdldFNjcm9sbFBhcmVudCdzIHJlc3VsdFxuXHRcdFx0dmlld3BvcnRFbCA9IHdpbmRvd0VsO1xuXHRcdFx0dmlld3BvcnRUb3AgPSAwOyAvLyB0aGUgd2luZG93IGlzIGFsd2F5cyBhdCB0aGUgdG9wIGxlZnRcblx0XHRcdHZpZXdwb3J0TGVmdCA9IDA7IC8vIChhbmQgLm9mZnNldCgpIHdvbid0IHdvcmsgaWYgY2FsbGVkIGhlcmUpXG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dmlld3BvcnRPZmZzZXQgPSB2aWV3cG9ydEVsLm9mZnNldCgpO1xuXHRcdFx0dmlld3BvcnRUb3AgPSB2aWV3cG9ydE9mZnNldC50b3A7XG5cdFx0XHR2aWV3cG9ydExlZnQgPSB2aWV3cG9ydE9mZnNldC5sZWZ0O1xuXHRcdH1cblxuXHRcdC8vIGlmIHRoZSB3aW5kb3cgaXMgc2Nyb2xsZWQsIGl0IGNhdXNlcyB0aGUgdmlzaWJsZSBhcmVhIHRvIGJlIGZ1cnRoZXIgZG93blxuXHRcdHZpZXdwb3J0VG9wICs9IHdpbmRvd0VsLnNjcm9sbFRvcCgpO1xuXHRcdHZpZXdwb3J0TGVmdCArPSB3aW5kb3dFbC5zY3JvbGxMZWZ0KCk7XG5cblx0XHQvLyBjb25zdHJhaW4gdG8gdGhlIHZpZXcgcG9ydC4gaWYgY29uc3RyYWluZWQgYnkgdHdvIGVkZ2VzLCBnaXZlIHByZWNlZGVuY2UgdG8gdG9wL2xlZnRcblx0XHRpZiAob3B0aW9ucy52aWV3cG9ydENvbnN0cmFpbiAhPT0gZmFsc2UpIHtcblx0XHRcdHRvcCA9IE1hdGgubWluKHRvcCwgdmlld3BvcnRUb3AgKyB2aWV3cG9ydEVsLm91dGVySGVpZ2h0KCkgLSBoZWlnaHQgLSB0aGlzLm1hcmdpbik7XG5cdFx0XHR0b3AgPSBNYXRoLm1heCh0b3AsIHZpZXdwb3J0VG9wICsgdGhpcy5tYXJnaW4pO1xuXHRcdFx0bGVmdCA9IE1hdGgubWluKGxlZnQsIHZpZXdwb3J0TGVmdCArIHZpZXdwb3J0RWwub3V0ZXJXaWR0aCgpIC0gd2lkdGggLSB0aGlzLm1hcmdpbik7XG5cdFx0XHRsZWZ0ID0gTWF0aC5tYXgobGVmdCwgdmlld3BvcnRMZWZ0ICsgdGhpcy5tYXJnaW4pO1xuXHRcdH1cblxuXHRcdHRoaXMuZWwuY3NzKHtcblx0XHRcdHRvcDogdG9wIC0gb3JpZ2luLnRvcCxcblx0XHRcdGxlZnQ6IGxlZnQgLSBvcmlnaW4ubGVmdFxuXHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gVHJpZ2dlcnMgYSBjYWxsYmFjay4gQ2FsbHMgYSBmdW5jdGlvbiBpbiB0aGUgb3B0aW9uIGhhc2ggb2YgdGhlIHNhbWUgbmFtZS5cblx0Ly8gQXJndW1lbnRzIGJleW9uZCB0aGUgZmlyc3QgYG5hbWVgIGFyZSBmb3J3YXJkZWQgb24uXG5cdC8vIFRPRE86IGJldHRlciBjb2RlIHJldXNlIGZvciB0aGlzLiBSZXBlYXQgY29kZVxuXHR0cmlnZ2VyOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0aWYgKHRoaXMub3B0aW9uc1tuYW1lXSkge1xuXHRcdFx0dGhpcy5vcHRpb25zW25hbWVdLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuXHRcdH1cblx0fVxuXG59KTtcblxuOztcblxuLypcbkEgY2FjaGUgZm9yIHRoZSBsZWZ0L3JpZ2h0L3RvcC9ib3R0b20vd2lkdGgvaGVpZ2h0IHZhbHVlcyBmb3Igb25lIG9yIG1vcmUgZWxlbWVudHMuXG5Xb3JrcyB3aXRoIGJvdGggb2Zmc2V0IChmcm9tIHRvcGxlZnQgZG9jdW1lbnQpIGFuZCBwb3NpdGlvbiAoZnJvbSBvZmZzZXRQYXJlbnQpLlxuXG5vcHRpb25zOlxuLSBlbHNcbi0gaXNIb3Jpem9udGFsXG4tIGlzVmVydGljYWxcbiovXG52YXIgQ29vcmRDYWNoZSA9IEZDLkNvb3JkQ2FjaGUgPSBDbGFzcy5leHRlbmQoe1xuXG5cdGVsczogbnVsbCwgLy8galF1ZXJ5IHNldCAoYXNzdW1lZCB0byBiZSBzaWJsaW5ncylcblx0Zm9yY2VkT2Zmc2V0UGFyZW50RWw6IG51bGwsIC8vIG9wdGlvbnMgY2FuIG92ZXJyaWRlIHRoZSBuYXR1cmFsIG9mZnNldFBhcmVudFxuXHRvcmlnaW46IG51bGwsIC8vIHtsZWZ0LHRvcH0gcG9zaXRpb24gb2Ygb2Zmc2V0UGFyZW50IG9mIGVsc1xuXHRib3VuZGluZ1JlY3Q6IG51bGwsIC8vIGNvbnN0cmFpbiBjb3JkaW5hdGVzIHRvIHRoaXMgcmVjdGFuZ2xlLiB7bGVmdCxyaWdodCx0b3AsYm90dG9tfSBvciBudWxsXG5cdGlzSG9yaXpvbnRhbDogZmFsc2UsIC8vIHdoZXRoZXIgdG8gcXVlcnkgZm9yIGxlZnQvcmlnaHQvd2lkdGhcblx0aXNWZXJ0aWNhbDogZmFsc2UsIC8vIHdoZXRoZXIgdG8gcXVlcnkgZm9yIHRvcC9ib3R0b20vaGVpZ2h0XG5cblx0Ly8gYXJyYXlzIG9mIGNvb3JkaW5hdGVzIChvZmZzZXRzIGZyb20gdG9wbGVmdCBvZiBkb2N1bWVudClcblx0bGVmdHM6IG51bGwsXG5cdHJpZ2h0czogbnVsbCxcblx0dG9wczogbnVsbCxcblx0Ym90dG9tczogbnVsbCxcblxuXG5cdGNvbnN0cnVjdG9yOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0dGhpcy5lbHMgPSAkKG9wdGlvbnMuZWxzKTtcblx0XHR0aGlzLmlzSG9yaXpvbnRhbCA9IG9wdGlvbnMuaXNIb3Jpem9udGFsO1xuXHRcdHRoaXMuaXNWZXJ0aWNhbCA9IG9wdGlvbnMuaXNWZXJ0aWNhbDtcblx0XHR0aGlzLmZvcmNlZE9mZnNldFBhcmVudEVsID0gb3B0aW9ucy5vZmZzZXRQYXJlbnQgPyAkKG9wdGlvbnMub2Zmc2V0UGFyZW50KSA6IG51bGw7XG5cdH0sXG5cblxuXHQvLyBRdWVyaWVzIHRoZSBlbHMgZm9yIGNvb3JkaW5hdGVzIGFuZCBzdG9yZXMgdGhlbS5cblx0Ly8gQ2FsbCB0aGlzIG1ldGhvZCBiZWZvcmUgdXNpbmcgYW5kIG9mIHRoZSBnZXQqIG1ldGhvZHMgYmVsb3cuXG5cdGJ1aWxkOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgb2Zmc2V0UGFyZW50RWwgPSB0aGlzLmZvcmNlZE9mZnNldFBhcmVudEVsO1xuXHRcdGlmICghb2Zmc2V0UGFyZW50RWwgJiYgdGhpcy5lbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0b2Zmc2V0UGFyZW50RWwgPSB0aGlzLmVscy5lcSgwKS5vZmZzZXRQYXJlbnQoKTtcblx0XHR9XG5cblx0XHR0aGlzLm9yaWdpbiA9IG9mZnNldFBhcmVudEVsID9cblx0XHRcdG9mZnNldFBhcmVudEVsLm9mZnNldCgpIDpcblx0XHRcdG51bGw7XG5cblx0XHR0aGlzLmJvdW5kaW5nUmVjdCA9IHRoaXMucXVlcnlCb3VuZGluZ1JlY3QoKTtcblxuXHRcdGlmICh0aGlzLmlzSG9yaXpvbnRhbCkge1xuXHRcdFx0dGhpcy5idWlsZEVsSG9yaXpvbnRhbHMoKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xuXHRcdFx0dGhpcy5idWlsZEVsVmVydGljYWxzKCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gRGVzdHJveXMgYWxsIGludGVybmFsIGRhdGEgYWJvdXQgY29vcmRpbmF0ZXMsIGZyZWVpbmcgbWVtb3J5XG5cdGNsZWFyOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLm9yaWdpbiA9IG51bGw7XG5cdFx0dGhpcy5ib3VuZGluZ1JlY3QgPSBudWxsO1xuXHRcdHRoaXMubGVmdHMgPSBudWxsO1xuXHRcdHRoaXMucmlnaHRzID0gbnVsbDtcblx0XHR0aGlzLnRvcHMgPSBudWxsO1xuXHRcdHRoaXMuYm90dG9tcyA9IG51bGw7XG5cdH0sXG5cblxuXHQvLyBXaGVuIGNhbGxlZCwgaWYgY29vcmQgY2FjaGVzIGFyZW4ndCBidWlsdCwgYnVpbGRzIHRoZW1cblx0ZW5zdXJlQnVpbHQ6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghdGhpcy5vcmlnaW4pIHtcblx0XHRcdHRoaXMuYnVpbGQoKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBQb3B1bGF0ZXMgdGhlIGxlZnQvcmlnaHQgaW50ZXJuYWwgY29vcmRpbmF0ZSBhcnJheXNcblx0YnVpbGRFbEhvcml6b250YWxzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgbGVmdHMgPSBbXTtcblx0XHR2YXIgcmlnaHRzID0gW107XG5cblx0XHR0aGlzLmVscy5lYWNoKGZ1bmN0aW9uKGksIG5vZGUpIHtcblx0XHRcdHZhciBlbCA9ICQobm9kZSk7XG5cdFx0XHR2YXIgbGVmdCA9IGVsLm9mZnNldCgpLmxlZnQ7XG5cdFx0XHR2YXIgd2lkdGggPSBlbC5vdXRlcldpZHRoKCk7XG5cblx0XHRcdGxlZnRzLnB1c2gobGVmdCk7XG5cdFx0XHRyaWdodHMucHVzaChsZWZ0ICsgd2lkdGgpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5sZWZ0cyA9IGxlZnRzO1xuXHRcdHRoaXMucmlnaHRzID0gcmlnaHRzO1xuXHR9LFxuXG5cblx0Ly8gUG9wdWxhdGVzIHRoZSB0b3AvYm90dG9tIGludGVybmFsIGNvb3JkaW5hdGUgYXJyYXlzXG5cdGJ1aWxkRWxWZXJ0aWNhbHM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0b3BzID0gW107XG5cdFx0dmFyIGJvdHRvbXMgPSBbXTtcblxuXHRcdHRoaXMuZWxzLmVhY2goZnVuY3Rpb24oaSwgbm9kZSkge1xuXHRcdFx0dmFyIGVsID0gJChub2RlKTtcblx0XHRcdHZhciB0b3AgPSBlbC5vZmZzZXQoKS50b3A7XG5cdFx0XHR2YXIgaGVpZ2h0ID0gZWwub3V0ZXJIZWlnaHQoKTtcblxuXHRcdFx0dG9wcy5wdXNoKHRvcCk7XG5cdFx0XHRib3R0b21zLnB1c2godG9wICsgaGVpZ2h0KTtcblx0XHR9KTtcblxuXHRcdHRoaXMudG9wcyA9IHRvcHM7XG5cdFx0dGhpcy5ib3R0b21zID0gYm90dG9tcztcblx0fSxcblxuXG5cdC8vIEdpdmVuIGEgbGVmdCBvZmZzZXQgKGZyb20gZG9jdW1lbnQgbGVmdCksIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbCB0aGF0IGl0IGhvcml6b250YWxseSBpbnRlcnNlY3RzLlxuXHQvLyBJZiBubyBpbnRlcnNlY3Rpb24gaXMgbWFkZSwgcmV0dXJucyB1bmRlZmluZWQuXG5cdGdldEhvcml6b250YWxJbmRleDogZnVuY3Rpb24obGVmdE9mZnNldCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblxuXHRcdHZhciBsZWZ0cyA9IHRoaXMubGVmdHM7XG5cdFx0dmFyIHJpZ2h0cyA9IHRoaXMucmlnaHRzO1xuXHRcdHZhciBsZW4gPSBsZWZ0cy5sZW5ndGg7XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmIChsZWZ0T2Zmc2V0ID49IGxlZnRzW2ldICYmIGxlZnRPZmZzZXQgPCByaWdodHNbaV0pIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYSB0b3Agb2Zmc2V0IChmcm9tIGRvY3VtZW50IHRvcCksIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbCB0aGF0IGl0IHZlcnRpY2FsbHkgaW50ZXJzZWN0cy5cblx0Ly8gSWYgbm8gaW50ZXJzZWN0aW9uIGlzIG1hZGUsIHJldHVybnMgdW5kZWZpbmVkLlxuXHRnZXRWZXJ0aWNhbEluZGV4OiBmdW5jdGlvbih0b3BPZmZzZXQpIHtcblx0XHR0aGlzLmVuc3VyZUJ1aWx0KCk7XG5cblx0XHR2YXIgdG9wcyA9IHRoaXMudG9wcztcblx0XHR2YXIgYm90dG9tcyA9IHRoaXMuYm90dG9tcztcblx0XHR2YXIgbGVuID0gdG9wcy5sZW5ndGg7XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmICh0b3BPZmZzZXQgPj0gdG9wc1tpXSAmJiB0b3BPZmZzZXQgPCBib3R0b21zW2ldKSB7XG5cdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIGxlZnQgb2Zmc2V0IChmcm9tIGRvY3VtZW50IGxlZnQpIG9mIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleFxuXHRnZXRMZWZ0T2Zmc2V0OiBmdW5jdGlvbihsZWZ0SW5kZXgpIHtcblx0XHR0aGlzLmVuc3VyZUJ1aWx0KCk7XG5cdFx0cmV0dXJuIHRoaXMubGVmdHNbbGVmdEluZGV4XTtcblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIGxlZnQgcG9zaXRpb24gKGZyb20gb2Zmc2V0UGFyZW50IGxlZnQpIG9mIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleFxuXHRnZXRMZWZ0UG9zaXRpb246IGZ1bmN0aW9uKGxlZnRJbmRleCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblx0XHRyZXR1cm4gdGhpcy5sZWZ0c1tsZWZ0SW5kZXhdIC0gdGhpcy5vcmlnaW4ubGVmdDtcblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIHJpZ2h0IG9mZnNldCAoZnJvbSBkb2N1bWVudCBsZWZ0KSBvZiB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXguXG5cdC8vIFRoaXMgdmFsdWUgaXMgTk9UIHJlbGF0aXZlIHRvIHRoZSBkb2N1bWVudCdzIHJpZ2h0IGVkZ2UsIGxpa2UgdGhlIENTUyBjb25jZXB0IG9mIFwicmlnaHRcIiB3b3VsZCBiZS5cblx0Z2V0UmlnaHRPZmZzZXQ6IGZ1bmN0aW9uKGxlZnRJbmRleCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblx0XHRyZXR1cm4gdGhpcy5yaWdodHNbbGVmdEluZGV4XTtcblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIHJpZ2h0IHBvc2l0aW9uIChmcm9tIG9mZnNldFBhcmVudCBsZWZ0KSBvZiB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXguXG5cdC8vIFRoaXMgdmFsdWUgaXMgTk9UIHJlbGF0aXZlIHRvIHRoZSBvZmZzZXRQYXJlbnQncyByaWdodCBlZGdlLCBsaWtlIHRoZSBDU1MgY29uY2VwdCBvZiBcInJpZ2h0XCIgd291bGQgYmUuXG5cdGdldFJpZ2h0UG9zaXRpb246IGZ1bmN0aW9uKGxlZnRJbmRleCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblx0XHRyZXR1cm4gdGhpcy5yaWdodHNbbGVmdEluZGV4XSAtIHRoaXMub3JpZ2luLmxlZnQ7XG5cdH0sXG5cblxuXHQvLyBHZXRzIHRoZSB3aWR0aCBvZiB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXhcblx0Z2V0V2lkdGg6IGZ1bmN0aW9uKGxlZnRJbmRleCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblx0XHRyZXR1cm4gdGhpcy5yaWdodHNbbGVmdEluZGV4XSAtIHRoaXMubGVmdHNbbGVmdEluZGV4XTtcblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIHRvcCBvZmZzZXQgKGZyb20gZG9jdW1lbnQgdG9wKSBvZiB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXhcblx0Z2V0VG9wT2Zmc2V0OiBmdW5jdGlvbih0b3BJbmRleCkge1xuXHRcdHRoaXMuZW5zdXJlQnVpbHQoKTtcblx0XHRyZXR1cm4gdGhpcy50b3BzW3RvcEluZGV4XTtcblx0fSxcblxuXG5cdC8vIEdldHMgdGhlIHRvcCBwb3NpdGlvbiAoZnJvbSBvZmZzZXRQYXJlbnQgdG9wKSBvZiB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb25cblx0Z2V0VG9wUG9zaXRpb246IGZ1bmN0aW9uKHRvcEluZGV4KSB7XG5cdFx0dGhpcy5lbnN1cmVCdWlsdCgpO1xuXHRcdHJldHVybiB0aGlzLnRvcHNbdG9wSW5kZXhdIC0gdGhpcy5vcmlnaW4udG9wO1xuXHR9LFxuXG5cdC8vIEdldHMgdGhlIGJvdHRvbSBvZmZzZXQgKGZyb20gdGhlIGRvY3VtZW50IHRvcCkgb2YgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4LlxuXHQvLyBUaGlzIHZhbHVlIGlzIE5PVCByZWxhdGl2ZSB0byB0aGUgb2Zmc2V0UGFyZW50J3MgYm90dG9tIGVkZ2UsIGxpa2UgdGhlIENTUyBjb25jZXB0IG9mIFwiYm90dG9tXCIgd291bGQgYmUuXG5cdGdldEJvdHRvbU9mZnNldDogZnVuY3Rpb24odG9wSW5kZXgpIHtcblx0XHR0aGlzLmVuc3VyZUJ1aWx0KCk7XG5cdFx0cmV0dXJuIHRoaXMuYm90dG9tc1t0b3BJbmRleF07XG5cdH0sXG5cblxuXHQvLyBHZXRzIHRoZSBib3R0b20gcG9zaXRpb24gKGZyb20gdGhlIG9mZnNldFBhcmVudCB0b3ApIG9mIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleC5cblx0Ly8gVGhpcyB2YWx1ZSBpcyBOT1QgcmVsYXRpdmUgdG8gdGhlIG9mZnNldFBhcmVudCdzIGJvdHRvbSBlZGdlLCBsaWtlIHRoZSBDU1MgY29uY2VwdCBvZiBcImJvdHRvbVwiIHdvdWxkIGJlLlxuXHRnZXRCb3R0b21Qb3NpdGlvbjogZnVuY3Rpb24odG9wSW5kZXgpIHtcblx0XHR0aGlzLmVuc3VyZUJ1aWx0KCk7XG5cdFx0cmV0dXJuIHRoaXMuYm90dG9tc1t0b3BJbmRleF0gLSB0aGlzLm9yaWdpbi50b3A7XG5cdH0sXG5cblxuXHQvLyBHZXRzIHRoZSBoZWlnaHQgb2YgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4XG5cdGdldEhlaWdodDogZnVuY3Rpb24odG9wSW5kZXgpIHtcblx0XHR0aGlzLmVuc3VyZUJ1aWx0KCk7XG5cdFx0cmV0dXJuIHRoaXMuYm90dG9tc1t0b3BJbmRleF0gLSB0aGlzLnRvcHNbdG9wSW5kZXhdO1xuXHR9LFxuXG5cblx0Ly8gQm91bmRpbmcgUmVjdFxuXHQvLyBUT0RPOiBkZWNvdXBsZSB0aGlzIGZyb20gQ29vcmRDYWNoZVxuXG5cdC8vIENvbXB1dGUgYW5kIHJldHVybiB3aGF0IHRoZSBlbGVtZW50cycgYm91bmRpbmcgcmVjdGFuZ2xlIGlzLCBmcm9tIHRoZSB1c2VyJ3MgcGVyc3BlY3RpdmUuXG5cdC8vIFJpZ2h0IG5vdywgb25seSByZXR1cm5zIGEgcmVjdGFuZ2xlIGlmIGNvbnN0cmFpbmVkIGJ5IGFuIG92ZXJmbG93OnNjcm9sbCBlbGVtZW50LlxuXHQvLyBSZXR1cm5zIG51bGwgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzXG5cdHF1ZXJ5Qm91bmRpbmdSZWN0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgc2Nyb2xsUGFyZW50RWw7XG5cblx0XHRpZiAodGhpcy5lbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0c2Nyb2xsUGFyZW50RWwgPSBnZXRTY3JvbGxQYXJlbnQodGhpcy5lbHMuZXEoMCkpO1xuXG5cdFx0XHRpZiAoIXNjcm9sbFBhcmVudEVsLmlzKGRvY3VtZW50KSkge1xuXHRcdFx0XHRyZXR1cm4gZ2V0Q2xpZW50UmVjdChzY3JvbGxQYXJlbnRFbCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cblx0aXNQb2ludEluQm91bmRzOiBmdW5jdGlvbihsZWZ0T2Zmc2V0LCB0b3BPZmZzZXQpIHtcblx0XHRyZXR1cm4gdGhpcy5pc0xlZnRJbkJvdW5kcyhsZWZ0T2Zmc2V0KSAmJiB0aGlzLmlzVG9wSW5Cb3VuZHModG9wT2Zmc2V0KTtcblx0fSxcblxuXHRpc0xlZnRJbkJvdW5kczogZnVuY3Rpb24obGVmdE9mZnNldCkge1xuXHRcdHJldHVybiAhdGhpcy5ib3VuZGluZ1JlY3QgfHwgKGxlZnRPZmZzZXQgPj0gdGhpcy5ib3VuZGluZ1JlY3QubGVmdCAmJiBsZWZ0T2Zmc2V0IDwgdGhpcy5ib3VuZGluZ1JlY3QucmlnaHQpO1xuXHR9LFxuXG5cdGlzVG9wSW5Cb3VuZHM6IGZ1bmN0aW9uKHRvcE9mZnNldCkge1xuXHRcdHJldHVybiAhdGhpcy5ib3VuZGluZ1JlY3QgfHwgKHRvcE9mZnNldCA+PSB0aGlzLmJvdW5kaW5nUmVjdC50b3AgJiYgdG9wT2Zmc2V0IDwgdGhpcy5ib3VuZGluZ1JlY3QuYm90dG9tKTtcblx0fVxuXG59KTtcblxuOztcblxuLyogVHJhY2tzIGEgZHJhZydzIG1vdXNlIG1vdmVtZW50LCBmaXJpbmcgdmFyaW91cyBoYW5kbGVyc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vLyBUT0RPOiB1c2UgRW1pdHRlclxuXG52YXIgRHJhZ0xpc3RlbmVyID0gRkMuRHJhZ0xpc3RlbmVyID0gQ2xhc3MuZXh0ZW5kKExpc3RlbmVyTWl4aW4sIE1vdXNlSWdub3Jlck1peGluLCB7XG5cblx0b3B0aW9uczogbnVsbCxcblx0c3ViamVjdEVsOiBudWxsLFxuXG5cdC8vIGNvb3JkaW5hdGVzIG9mIHRoZSBpbml0aWFsIG1vdXNlZG93blxuXHRvcmlnaW5YOiBudWxsLFxuXHRvcmlnaW5ZOiBudWxsLFxuXG5cdC8vIHRoZSB3cmFwcGluZyBlbGVtZW50IHRoYXQgc2Nyb2xscywgb3IgTUlHSFQgc2Nyb2xsIGlmIHRoZXJlJ3Mgb3ZlcmZsb3cuXG5cdC8vIFRPRE86IGRvIHRoaXMgZm9yIHdyYXBwZXJzIHRoYXQgaGF2ZSBvdmVyZmxvdzpoaWRkZW4gYXMgd2VsbC5cblx0c2Nyb2xsRWw6IG51bGwsXG5cblx0aXNJbnRlcmFjdGluZzogZmFsc2UsXG5cdGlzRGlzdGFuY2VTdXJwYXNzZWQ6IGZhbHNlLFxuXHRpc0RlbGF5RW5kZWQ6IGZhbHNlLFxuXHRpc0RyYWdnaW5nOiBmYWxzZSxcblx0aXNUb3VjaDogZmFsc2UsXG5cblx0ZGVsYXk6IG51bGwsXG5cdGRlbGF5VGltZW91dElkOiBudWxsLFxuXHRtaW5EaXN0YW5jZTogbnVsbCxcblxuXHRoYW5kbGVUb3VjaFNjcm9sbFByb3h5OiBudWxsLCAvLyBjYWxscyBoYW5kbGVUb3VjaFNjcm9sbCwgYWx3YXlzIGJvdW5kIHRvIGB0aGlzYFxuXG5cblx0Y29uc3RydWN0b3I6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdHRoaXMuaGFuZGxlVG91Y2hTY3JvbGxQcm94eSA9IHByb3h5KHRoaXMsICdoYW5kbGVUb3VjaFNjcm9sbCcpO1xuXHRcdHRoaXMuaW5pdE1vdXNlSWdub3JpbmcoNTAwKTtcblx0fSxcblxuXG5cdC8vIEludGVyYWN0aW9uIChoaWdoLWxldmVsKVxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0c3RhcnRJbnRlcmFjdGlvbjogZnVuY3Rpb24oZXYsIGV4dHJhT3B0aW9ucykge1xuXHRcdHZhciBpc1RvdWNoID0gZ2V0RXZJc1RvdWNoKGV2KTtcblxuXHRcdGlmIChldi50eXBlID09PSAnbW91c2Vkb3duJykge1xuXHRcdFx0aWYgKHRoaXMuaXNJZ25vcmluZ01vdXNlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKCFpc1ByaW1hcnlNb3VzZUJ1dHRvbihldikpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGV2LnByZXZlbnREZWZhdWx0KCk7IC8vIHByZXZlbnRzIG5hdGl2ZSBzZWxlY3Rpb24gaW4gbW9zdCBicm93c2Vyc1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghdGhpcy5pc0ludGVyYWN0aW5nKSB7XG5cblx0XHRcdC8vIHByb2Nlc3Mgb3B0aW9uc1xuXHRcdFx0ZXh0cmFPcHRpb25zID0gZXh0cmFPcHRpb25zIHx8IHt9O1xuXHRcdFx0dGhpcy5kZWxheSA9IGZpcnN0RGVmaW5lZChleHRyYU9wdGlvbnMuZGVsYXksIHRoaXMub3B0aW9ucy5kZWxheSwgMCk7XG5cdFx0XHR0aGlzLm1pbkRpc3RhbmNlID0gZmlyc3REZWZpbmVkKGV4dHJhT3B0aW9ucy5kaXN0YW5jZSwgdGhpcy5vcHRpb25zLmRpc3RhbmNlLCAwKTtcblx0XHRcdHRoaXMuc3ViamVjdEVsID0gdGhpcy5vcHRpb25zLnN1YmplY3RFbDtcblxuXHRcdFx0dGhpcy5pc0ludGVyYWN0aW5nID0gdHJ1ZTtcblx0XHRcdHRoaXMuaXNUb3VjaCA9IGlzVG91Y2g7XG5cdFx0XHR0aGlzLmlzRGVsYXlFbmRlZCA9IGZhbHNlO1xuXHRcdFx0dGhpcy5pc0Rpc3RhbmNlU3VycGFzc2VkID0gZmFsc2U7XG5cblx0XHRcdHRoaXMub3JpZ2luWCA9IGdldEV2WChldik7XG5cdFx0XHR0aGlzLm9yaWdpblkgPSBnZXRFdlkoZXYpO1xuXHRcdFx0dGhpcy5zY3JvbGxFbCA9IGdldFNjcm9sbFBhcmVudCgkKGV2LnRhcmdldCkpO1xuXG5cdFx0XHR0aGlzLmJpbmRIYW5kbGVycygpO1xuXHRcdFx0dGhpcy5pbml0QXV0b1Njcm9sbCgpO1xuXHRcdFx0dGhpcy5oYW5kbGVJbnRlcmFjdGlvblN0YXJ0KGV2KTtcblx0XHRcdHRoaXMuc3RhcnREZWxheShldik7XG5cblx0XHRcdGlmICghdGhpcy5taW5EaXN0YW5jZSkge1xuXHRcdFx0XHR0aGlzLmhhbmRsZURpc3RhbmNlU3VycGFzc2VkKGV2KTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHRoYW5kbGVJbnRlcmFjdGlvblN0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMudHJpZ2dlcignaW50ZXJhY3Rpb25TdGFydCcsIGV2KTtcblx0fSxcblxuXG5cdGVuZEludGVyYWN0aW9uOiBmdW5jdGlvbihldiwgaXNDYW5jZWxsZWQpIHtcblx0XHRpZiAodGhpcy5pc0ludGVyYWN0aW5nKSB7XG5cdFx0XHR0aGlzLmVuZERyYWcoZXYpO1xuXG5cdFx0XHRpZiAodGhpcy5kZWxheVRpbWVvdXRJZCkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy5kZWxheVRpbWVvdXRJZCk7XG5cdFx0XHRcdHRoaXMuZGVsYXlUaW1lb3V0SWQgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmRlc3Ryb3lBdXRvU2Nyb2xsKCk7XG5cdFx0XHR0aGlzLnVuYmluZEhhbmRsZXJzKCk7XG5cblx0XHRcdHRoaXMuaXNJbnRlcmFjdGluZyA9IGZhbHNlO1xuXHRcdFx0dGhpcy5oYW5kbGVJbnRlcmFjdGlvbkVuZChldiwgaXNDYW5jZWxsZWQpO1xuXG5cdFx0XHQvLyBhIHRvdWNoc3RhcnQrdG91Y2hlbmQgb24gdGhlIHNhbWUgZWxlbWVudCB3aWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIGFkZGl0aW9uIHNpbXVsYXRlZCBldmVudHM6XG5cdFx0XHQvLyBtb3VzZW92ZXIgKyBtb3VzZW91dCArIGNsaWNrXG5cdFx0XHQvLyBsZXQncyBpZ25vcmUgdGhlc2UgYm9ndXMgZXZlbnRzXG5cdFx0XHRpZiAodGhpcy5pc1RvdWNoKSB7XG5cdFx0XHRcdHRoaXMudGVtcElnbm9yZU1vdXNlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0aGFuZGxlSW50ZXJhY3Rpb25FbmQ6IGZ1bmN0aW9uKGV2LCBpc0NhbmNlbGxlZCkge1xuXHRcdHRoaXMudHJpZ2dlcignaW50ZXJhY3Rpb25FbmQnLCBldiwgaXNDYW5jZWxsZWQgfHwgZmFsc2UpO1xuXHR9LFxuXG5cblx0Ly8gQmluZGluZyBUbyBET01cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdGJpbmRIYW5kbGVyczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdG91Y2hTdGFydElnbm9yZXMgPSAxO1xuXG5cdFx0aWYgKHRoaXMuaXNUb3VjaCkge1xuXHRcdFx0dGhpcy5saXN0ZW5UbygkKGRvY3VtZW50KSwge1xuXHRcdFx0XHR0b3VjaG1vdmU6IHRoaXMuaGFuZGxlVG91Y2hNb3ZlLFxuXHRcdFx0XHR0b3VjaGVuZDogdGhpcy5lbmRJbnRlcmFjdGlvbixcblx0XHRcdFx0dG91Y2hjYW5jZWw6IHRoaXMuZW5kSW50ZXJhY3Rpb24sXG5cblx0XHRcdFx0Ly8gU29tZXRpbWVzIHRvdWNoZW5kIGRvZXNuJ3QgZmlyZVxuXHRcdFx0XHQvLyAoY2FuJ3QgZmlndXJlIG91dCB3aHkuIHRvdWNoY2FuY2VsIGRvZXNuJ3QgZmlyZSBlaXRoZXIuIGhhcyB0byBkbyB3aXRoIHNjcm9sbGluZz8pXG5cdFx0XHRcdC8vIElmIGFub3RoZXIgdG91Y2hzdGFydCBoYXBwZW5zLCB3ZSBrbm93IGl0J3MgYm9ndXMsIHNvIGNhbmNlbCB0aGUgZHJhZy5cblx0XHRcdFx0Ly8gdG91Y2hlbmQgd2lsbCBjb250aW51ZSB0byBiZSBicm9rZW4gdW50aWwgdXNlciBkb2VzIGEgc2hvcnR0YXAvc2Nyb2xsLCBidXQgdGhpcyBpcyBiZXN0IHdlIGNhbiBkby5cblx0XHRcdFx0dG91Y2hzdGFydDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0XHRpZiAodG91Y2hTdGFydElnbm9yZXMpIHsgLy8gYmluZEhhbmRsZXJzIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiBhIHRvdWNoc3RhcnQsXG5cdFx0XHRcdFx0XHR0b3VjaFN0YXJ0SWdub3Jlcy0tOyAvLyBhbmQgd2UgZG9uJ3Qgd2FudCB0aGlzIHRvIGZpcmUgaW1tZWRpYXRlbHksIHNvIGlnbm9yZS5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRfdGhpcy5lbmRJbnRlcmFjdGlvbihldiwgdHJ1ZSk7IC8vIGlzQ2FuY2VsbGVkPXRydWVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBsaXN0ZW4gdG8gQUxMIHNjcm9sbCBhY3Rpb25zIG9uIHRoZSBwYWdlXG5cdFx0XHRpZiAoXG5cdFx0XHRcdCFiaW5kQW55U2Nyb2xsKHRoaXMuaGFuZGxlVG91Y2hTY3JvbGxQcm94eSkgJiYgLy8gaG9wZWZ1bGx5IHRoaXMgd29ya3MgYW5kIHNob3J0LWNpcmN1aXRzIHRoZSByZXN0XG5cdFx0XHRcdHRoaXMuc2Nyb2xsRWwgLy8gb3RoZXJ3aXNlLCBhdHRhY2ggYSBzaW5nbGUgaGFuZGxlciB0byB0aGlzXG5cdFx0XHQpIHtcblx0XHRcdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLnNjcm9sbEVsLCAnc2Nyb2xsJywgdGhpcy5oYW5kbGVUb3VjaFNjcm9sbCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dGhpcy5saXN0ZW5UbygkKGRvY3VtZW50KSwge1xuXHRcdFx0XHRtb3VzZW1vdmU6IHRoaXMuaGFuZGxlTW91c2VNb3ZlLFxuXHRcdFx0XHRtb3VzZXVwOiB0aGlzLmVuZEludGVyYWN0aW9uXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHR0aGlzLmxpc3RlblRvKCQoZG9jdW1lbnQpLCB7XG5cdFx0XHRzZWxlY3RzdGFydDogcHJldmVudERlZmF1bHQsIC8vIGRvbid0IGFsbG93IHNlbGVjdGlvbiB3aGlsZSBkcmFnZ2luZ1xuXHRcdFx0Y29udGV4dG1lbnU6IHByZXZlbnREZWZhdWx0IC8vIGxvbmcgdGFwcyB3b3VsZCBvcGVuIG1lbnUgb24gQ2hyb21lIGRldiB0b29sc1xuXHRcdH0pO1xuXHR9LFxuXG5cblx0dW5iaW5kSGFuZGxlcnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuc3RvcExpc3RlbmluZ1RvKCQoZG9jdW1lbnQpKTtcblxuXHRcdC8vIHVuYmluZCBzY3JvbGwgbGlzdGVuaW5nXG5cdFx0dW5iaW5kQW55U2Nyb2xsKHRoaXMuaGFuZGxlVG91Y2hTY3JvbGxQcm94eSk7XG5cdFx0aWYgKHRoaXMuc2Nyb2xsRWwpIHtcblx0XHRcdHRoaXMuc3RvcExpc3RlbmluZ1RvKHRoaXMuc2Nyb2xsRWwsICdzY3JvbGwnKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBEcmFnIChoaWdoLWxldmVsKVxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0Ly8gZXh0cmFPcHRpb25zIGlnbm9yZWQgaWYgZHJhZyBhbHJlYWR5IHN0YXJ0ZWRcblx0c3RhcnREcmFnOiBmdW5jdGlvbihldiwgZXh0cmFPcHRpb25zKSB7XG5cdFx0dGhpcy5zdGFydEludGVyYWN0aW9uKGV2LCBleHRyYU9wdGlvbnMpOyAvLyBlbnN1cmUgaW50ZXJhY3Rpb24gYmVnYW5cblxuXHRcdGlmICghdGhpcy5pc0RyYWdnaW5nKSB7XG5cdFx0XHR0aGlzLmlzRHJhZ2dpbmcgPSB0cnVlO1xuXHRcdFx0dGhpcy5oYW5kbGVEcmFnU3RhcnQoZXYpO1xuXHRcdH1cblx0fSxcblxuXG5cdGhhbmRsZURyYWdTdGFydDogZnVuY3Rpb24oZXYpIHtcblx0XHR0aGlzLnRyaWdnZXIoJ2RyYWdTdGFydCcsIGV2KTtcblx0fSxcblxuXG5cdGhhbmRsZU1vdmU6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dmFyIGR4ID0gZ2V0RXZYKGV2KSAtIHRoaXMub3JpZ2luWDtcblx0XHR2YXIgZHkgPSBnZXRFdlkoZXYpIC0gdGhpcy5vcmlnaW5ZO1xuXHRcdHZhciBtaW5EaXN0YW5jZSA9IHRoaXMubWluRGlzdGFuY2U7XG5cdFx0dmFyIGRpc3RhbmNlU3E7IC8vIGN1cnJlbnQgZGlzdGFuY2UgZnJvbSB0aGUgb3JpZ2luLCBzcXVhcmVkXG5cblx0XHRpZiAoIXRoaXMuaXNEaXN0YW5jZVN1cnBhc3NlZCkge1xuXHRcdFx0ZGlzdGFuY2VTcSA9IGR4ICogZHggKyBkeSAqIGR5O1xuXHRcdFx0aWYgKGRpc3RhbmNlU3EgPj0gbWluRGlzdGFuY2UgKiBtaW5EaXN0YW5jZSkgeyAvLyB1c2UgcHl0aGFnb3JlYW4gdGhlb3JlbVxuXHRcdFx0XHR0aGlzLmhhbmRsZURpc3RhbmNlU3VycGFzc2VkKGV2KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGhpcy5pc0RyYWdnaW5nKSB7XG5cdFx0XHR0aGlzLmhhbmRsZURyYWcoZHgsIGR5LCBldik7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gQ2FsbGVkIHdoaWxlIHRoZSBtb3VzZSBpcyBiZWluZyBtb3ZlZCBhbmQgd2hlbiB3ZSBrbm93IGEgbGVnaXRpbWF0ZSBkcmFnIGlzIHRha2luZyBwbGFjZVxuXHRoYW5kbGVEcmFnOiBmdW5jdGlvbihkeCwgZHksIGV2KSB7XG5cdFx0dGhpcy50cmlnZ2VyKCdkcmFnJywgZHgsIGR5LCBldik7XG5cdFx0dGhpcy51cGRhdGVBdXRvU2Nyb2xsKGV2KTsgLy8gd2lsbCBwb3NzaWJseSBjYXVzZSBzY3JvbGxpbmdcblx0fSxcblxuXG5cdGVuZERyYWc6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0aWYgKHRoaXMuaXNEcmFnZ2luZykge1xuXHRcdFx0dGhpcy5pc0RyYWdnaW5nID0gZmFsc2U7XG5cdFx0XHR0aGlzLmhhbmRsZURyYWdFbmQoZXYpO1xuXHRcdH1cblx0fSxcblxuXG5cdGhhbmRsZURyYWdFbmQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dGhpcy50cmlnZ2VyKCdkcmFnRW5kJywgZXYpO1xuXHR9LFxuXG5cblx0Ly8gRGVsYXlcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdHN0YXJ0RGVsYXk6IGZ1bmN0aW9uKGluaXRpYWxFdikge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRpZiAodGhpcy5kZWxheSkge1xuXHRcdFx0dGhpcy5kZWxheVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdF90aGlzLmhhbmRsZURlbGF5RW5kKGluaXRpYWxFdik7XG5cdFx0XHR9LCB0aGlzLmRlbGF5KTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aGlzLmhhbmRsZURlbGF5RW5kKGluaXRpYWxFdik7XG5cdFx0fVxuXHR9LFxuXG5cblx0aGFuZGxlRGVsYXlFbmQ6IGZ1bmN0aW9uKGluaXRpYWxFdikge1xuXHRcdHRoaXMuaXNEZWxheUVuZGVkID0gdHJ1ZTtcblxuXHRcdGlmICh0aGlzLmlzRGlzdGFuY2VTdXJwYXNzZWQpIHtcblx0XHRcdHRoaXMuc3RhcnREcmFnKGluaXRpYWxFdik7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gRGlzdGFuY2Vcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdGhhbmRsZURpc3RhbmNlU3VycGFzc2VkOiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMuaXNEaXN0YW5jZVN1cnBhc3NlZCA9IHRydWU7XG5cblx0XHRpZiAodGhpcy5pc0RlbGF5RW5kZWQpIHtcblx0XHRcdHRoaXMuc3RhcnREcmFnKGV2KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBNb3VzZSAvIFRvdWNoXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHRoYW5kbGVUb3VjaE1vdmU6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0Ly8gcHJldmVudCBpbmVydGlhIGFuZCB0b3VjaG1vdmUtc2Nyb2xsaW5nIHdoaWxlIGRyYWdnaW5nXG5cdFx0aWYgKHRoaXMuaXNEcmFnZ2luZykge1xuXHRcdFx0ZXYucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cblx0XHR0aGlzLmhhbmRsZU1vdmUoZXYpO1xuXHR9LFxuXG5cblx0aGFuZGxlTW91c2VNb3ZlOiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMuaGFuZGxlTW92ZShldik7XG5cdH0sXG5cblxuXHQvLyBTY3JvbGxpbmcgKHVucmVsYXRlZCB0byBhdXRvLXNjcm9sbClcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdGhhbmRsZVRvdWNoU2Nyb2xsOiBmdW5jdGlvbihldikge1xuXHRcdC8vIGlmIHRoZSBkcmFnIGlzIGJlaW5nIGluaXRpYXRlZCBieSB0b3VjaCwgYnV0IGEgc2Nyb2xsIGhhcHBlbnMgYmVmb3JlXG5cdFx0Ly8gdGhlIGRyYWctaW5pdGlhdGluZyBkZWxheSBpcyBvdmVyLCBjYW5jZWwgdGhlIGRyYWdcblx0XHRpZiAoIXRoaXMuaXNEcmFnZ2luZykge1xuXHRcdFx0dGhpcy5lbmRJbnRlcmFjdGlvbihldiwgdHJ1ZSk7IC8vIGlzQ2FuY2VsbGVkPXRydWVcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBVdGlsc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0Ly8gVHJpZ2dlcnMgYSBjYWxsYmFjay4gQ2FsbHMgYSBmdW5jdGlvbiBpbiB0aGUgb3B0aW9uIGhhc2ggb2YgdGhlIHNhbWUgbmFtZS5cblx0Ly8gQXJndW1lbnRzIGJleW9uZCB0aGUgZmlyc3QgYG5hbWVgIGFyZSBmb3J3YXJkZWQgb24uXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRpZiAodGhpcy5vcHRpb25zW25hbWVdKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnNbbmFtZV0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG5cdFx0fVxuXHRcdC8vIG1ha2VzIF9tZXRob2RzIGNhbGxhYmxlIGJ5IGV2ZW50IG5hbWUuIFRPRE86IGtpbGwgdGhpc1xuXHRcdGlmICh0aGlzWydfJyArIG5hbWVdKSB7XG5cdFx0XHR0aGlzWydfJyArIG5hbWVdLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuXHRcdH1cblx0fVxuXG5cbn0pO1xuXG47O1xuLypcbnRoaXMuc2Nyb2xsRWwgaXMgc2V0IGluIERyYWdMaXN0ZW5lclxuKi9cbkRyYWdMaXN0ZW5lci5taXhpbih7XG5cblx0aXNBdXRvU2Nyb2xsOiBmYWxzZSxcblxuXHRzY3JvbGxCb3VuZHM6IG51bGwsIC8vIHsgdG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0IH1cblx0c2Nyb2xsVG9wVmVsOiBudWxsLCAvLyBwaXhlbHMgcGVyIHNlY29uZFxuXHRzY3JvbGxMZWZ0VmVsOiBudWxsLCAvLyBwaXhlbHMgcGVyIHNlY29uZFxuXHRzY3JvbGxJbnRlcnZhbElkOiBudWxsLCAvLyBJRCBvZiBzZXRUaW1lb3V0IGZvciBzY3JvbGxpbmcgYW5pbWF0aW9uIGxvb3BcblxuXHQvLyBkZWZhdWx0c1xuXHRzY3JvbGxTZW5zaXRpdml0eTogMzAsIC8vIHBpeGVscyBmcm9tIGVkZ2UgZm9yIHNjcm9sbGluZyB0byBzdGFydFxuXHRzY3JvbGxTcGVlZDogMjAwLCAvLyBwaXhlbHMgcGVyIHNlY29uZCwgYXQgbWF4aW11bSBzcGVlZFxuXHRzY3JvbGxJbnRlcnZhbE1zOiA1MCwgLy8gbWlsbGlzZWNvbmQgd2FpdCBiZXR3ZWVuIHNjcm9sbCBpbmNyZW1lbnRcblxuXG5cdGluaXRBdXRvU2Nyb2xsOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgc2Nyb2xsRWwgPSB0aGlzLnNjcm9sbEVsO1xuXG5cdFx0dGhpcy5pc0F1dG9TY3JvbGwgPVxuXHRcdFx0dGhpcy5vcHRpb25zLnNjcm9sbCAmJlxuXHRcdFx0c2Nyb2xsRWwgJiZcblx0XHRcdCFzY3JvbGxFbC5pcyh3aW5kb3cpICYmXG5cdFx0XHQhc2Nyb2xsRWwuaXMoZG9jdW1lbnQpO1xuXG5cdFx0aWYgKHRoaXMuaXNBdXRvU2Nyb2xsKSB7XG5cdFx0XHQvLyBkZWJvdW5jZSBtYWtlcyBzdXJlIHJhcGlkIGNhbGxzIGRvbid0IGhhcHBlblxuXHRcdFx0dGhpcy5saXN0ZW5UbyhzY3JvbGxFbCwgJ3Njcm9sbCcsIGRlYm91bmNlKHRoaXMuaGFuZGxlRGVib3VuY2VkU2Nyb2xsLCAxMDApKTtcblx0XHR9XG5cdH0sXG5cblxuXHRkZXN0cm95QXV0b1Njcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbmRBdXRvU2Nyb2xsKCk7IC8vIGtpbGwgYW55IGFuaW1hdGlvbiBsb29wXG5cblx0XHQvLyByZW1vdmUgdGhlIHNjcm9sbCBoYW5kbGVyIGlmIHRoZXJlIGlzIGEgc2Nyb2xsRWxcblx0XHRpZiAodGhpcy5pc0F1dG9TY3JvbGwpIHtcblx0XHRcdHRoaXMuc3RvcExpc3RlbmluZ1RvKHRoaXMuc2Nyb2xsRWwsICdzY3JvbGwnKTsgLy8gd2lsbCBwcm9iYWJseSBnZXQgcmVtb3ZlZCBieSB1bmJpbmRIYW5kbGVycyB0b28gOihcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyBhbmQgc3RvcmVzIHRoZSBib3VuZGluZyByZWN0YW5nbGUgb2Ygc2Nyb2xsRWxcblx0Y29tcHV0ZVNjcm9sbEJvdW5kczogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaXNBdXRvU2Nyb2xsKSB7XG5cdFx0XHR0aGlzLnNjcm9sbEJvdW5kcyA9IGdldE91dGVyUmVjdCh0aGlzLnNjcm9sbEVsKTtcblx0XHRcdC8vIFRPRE86IHVzZSBnZXRDbGllbnRSZWN0IGluIGZ1dHVyZS4gYnV0IHByZXZlbnRzIGF1dG8gc2Nyb2xsaW5nIHdoZW4gb24gdG9wIG9mIHNjcm9sbGJhcnNcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiB0aGUgZHJhZ2dpbmcgaXMgaW4gcHJvZ3Jlc3MgYW5kIHNjcm9sbGluZyBzaG91bGQgYmUgdXBkYXRlZFxuXHR1cGRhdGVBdXRvU2Nyb2xsOiBmdW5jdGlvbihldikge1xuXHRcdHZhciBzZW5zaXRpdml0eSA9IHRoaXMuc2Nyb2xsU2Vuc2l0aXZpdHk7XG5cdFx0dmFyIGJvdW5kcyA9IHRoaXMuc2Nyb2xsQm91bmRzO1xuXHRcdHZhciB0b3BDbG9zZW5lc3MsIGJvdHRvbUNsb3NlbmVzcztcblx0XHR2YXIgbGVmdENsb3NlbmVzcywgcmlnaHRDbG9zZW5lc3M7XG5cdFx0dmFyIHRvcFZlbCA9IDA7XG5cdFx0dmFyIGxlZnRWZWwgPSAwO1xuXG5cdFx0aWYgKGJvdW5kcykgeyAvLyBvbmx5IHNjcm9sbCBpZiBzY3JvbGxFbCBleGlzdHNcblxuXHRcdFx0Ly8gY29tcHV0ZSBjbG9zZW5lc3MgdG8gZWRnZXMuIHZhbGlkIHJhbmdlIGlzIGZyb20gMC4wIC0gMS4wXG5cdFx0XHR0b3BDbG9zZW5lc3MgPSAoc2Vuc2l0aXZpdHkgLSAoZ2V0RXZZKGV2KSAtIGJvdW5kcy50b3ApKSAvIHNlbnNpdGl2aXR5O1xuXHRcdFx0Ym90dG9tQ2xvc2VuZXNzID0gKHNlbnNpdGl2aXR5IC0gKGJvdW5kcy5ib3R0b20gLSBnZXRFdlkoZXYpKSkgLyBzZW5zaXRpdml0eTtcblx0XHRcdGxlZnRDbG9zZW5lc3MgPSAoc2Vuc2l0aXZpdHkgLSAoZ2V0RXZYKGV2KSAtIGJvdW5kcy5sZWZ0KSkgLyBzZW5zaXRpdml0eTtcblx0XHRcdHJpZ2h0Q2xvc2VuZXNzID0gKHNlbnNpdGl2aXR5IC0gKGJvdW5kcy5yaWdodCAtIGdldEV2WChldikpKSAvIHNlbnNpdGl2aXR5O1xuXG5cdFx0XHQvLyB0cmFuc2xhdGUgdmVydGljYWwgY2xvc2VuZXNzIGludG8gdmVsb2NpdHkuXG5cdFx0XHQvLyBtb3VzZSBtdXN0IGJlIGNvbXBsZXRlbHkgaW4gYm91bmRzIGZvciB2ZWxvY2l0eSB0byBoYXBwZW4uXG5cdFx0XHRpZiAodG9wQ2xvc2VuZXNzID49IDAgJiYgdG9wQ2xvc2VuZXNzIDw9IDEpIHtcblx0XHRcdFx0dG9wVmVsID0gdG9wQ2xvc2VuZXNzICogdGhpcy5zY3JvbGxTcGVlZCAqIC0xOyAvLyBuZWdhdGl2ZS4gZm9yIHNjcm9sbGluZyB1cFxuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoYm90dG9tQ2xvc2VuZXNzID49IDAgJiYgYm90dG9tQ2xvc2VuZXNzIDw9IDEpIHtcblx0XHRcdFx0dG9wVmVsID0gYm90dG9tQ2xvc2VuZXNzICogdGhpcy5zY3JvbGxTcGVlZDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gdHJhbnNsYXRlIGhvcml6b250YWwgY2xvc2VuZXNzIGludG8gdmVsb2NpdHlcblx0XHRcdGlmIChsZWZ0Q2xvc2VuZXNzID49IDAgJiYgbGVmdENsb3NlbmVzcyA8PSAxKSB7XG5cdFx0XHRcdGxlZnRWZWwgPSBsZWZ0Q2xvc2VuZXNzICogdGhpcy5zY3JvbGxTcGVlZCAqIC0xOyAvLyBuZWdhdGl2ZS4gZm9yIHNjcm9sbGluZyBsZWZ0XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChyaWdodENsb3NlbmVzcyA+PSAwICYmIHJpZ2h0Q2xvc2VuZXNzIDw9IDEpIHtcblx0XHRcdFx0bGVmdFZlbCA9IHJpZ2h0Q2xvc2VuZXNzICogdGhpcy5zY3JvbGxTcGVlZDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLnNldFNjcm9sbFZlbCh0b3BWZWwsIGxlZnRWZWwpO1xuXHR9LFxuXG5cblx0Ly8gU2V0cyB0aGUgc3BlZWQtb2Ytc2Nyb2xsaW5nIGZvciB0aGUgc2Nyb2xsRWxcblx0c2V0U2Nyb2xsVmVsOiBmdW5jdGlvbih0b3BWZWwsIGxlZnRWZWwpIHtcblxuXHRcdHRoaXMuc2Nyb2xsVG9wVmVsID0gdG9wVmVsO1xuXHRcdHRoaXMuc2Nyb2xsTGVmdFZlbCA9IGxlZnRWZWw7XG5cblx0XHR0aGlzLmNvbnN0cmFpblNjcm9sbFZlbCgpOyAvLyBtYXNzYWdlcyBpbnRvIHJlYWxpc3RpYyB2YWx1ZXNcblxuXHRcdC8vIGlmIHRoZXJlIGlzIG5vbi16ZXJvIHZlbG9jaXR5LCBhbmQgYW4gYW5pbWF0aW9uIGxvb3AgaGFzbid0IGFscmVhZHkgc3RhcnRlZCwgdGhlbiBTVEFSVFxuXHRcdGlmICgodGhpcy5zY3JvbGxUb3BWZWwgfHwgdGhpcy5zY3JvbGxMZWZ0VmVsKSAmJiAhdGhpcy5zY3JvbGxJbnRlcnZhbElkKSB7XG5cdFx0XHR0aGlzLnNjcm9sbEludGVydmFsSWQgPSBzZXRJbnRlcnZhbChcblx0XHRcdFx0cHJveHkodGhpcywgJ3Njcm9sbEludGVydmFsRnVuYycpLCAvLyBzY29wZSB0byBgdGhpc2Bcblx0XHRcdFx0dGhpcy5zY3JvbGxJbnRlcnZhbE1zXG5cdFx0XHQpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIEZvcmNlcyBzY3JvbGxUb3BWZWwgYW5kIHNjcm9sbExlZnRWZWwgdG8gYmUgemVybyBpZiBzY3JvbGxpbmcgaGFzIGFscmVhZHkgZ29uZSBhbGwgdGhlIHdheVxuXHRjb25zdHJhaW5TY3JvbGxWZWw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbCA9IHRoaXMuc2Nyb2xsRWw7XG5cblx0XHRpZiAodGhpcy5zY3JvbGxUb3BWZWwgPCAwKSB7IC8vIHNjcm9sbGluZyB1cD9cblx0XHRcdGlmIChlbC5zY3JvbGxUb3AoKSA8PSAwKSB7IC8vIGFscmVhZHkgc2Nyb2xsZWQgYWxsIHRoZSB3YXkgdXA/XG5cdFx0XHRcdHRoaXMuc2Nyb2xsVG9wVmVsID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSBpZiAodGhpcy5zY3JvbGxUb3BWZWwgPiAwKSB7IC8vIHNjcm9sbGluZyBkb3duP1xuXHRcdFx0aWYgKGVsLnNjcm9sbFRvcCgpICsgZWxbMF0uY2xpZW50SGVpZ2h0ID49IGVsWzBdLnNjcm9sbEhlaWdodCkgeyAvLyBhbHJlYWR5IHNjcm9sbGVkIGFsbCB0aGUgd2F5IGRvd24/XG5cdFx0XHRcdHRoaXMuc2Nyb2xsVG9wVmVsID0gMDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGhpcy5zY3JvbGxMZWZ0VmVsIDwgMCkgeyAvLyBzY3JvbGxpbmcgbGVmdD9cblx0XHRcdGlmIChlbC5zY3JvbGxMZWZ0KCkgPD0gMCkgeyAvLyBhbHJlYWR5IHNjcm9sbGVkIGFsbCB0aGUgbGVmdD9cblx0XHRcdFx0dGhpcy5zY3JvbGxMZWZ0VmVsID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSBpZiAodGhpcy5zY3JvbGxMZWZ0VmVsID4gMCkgeyAvLyBzY3JvbGxpbmcgcmlnaHQ/XG5cdFx0XHRpZiAoZWwuc2Nyb2xsTGVmdCgpICsgZWxbMF0uY2xpZW50V2lkdGggPj0gZWxbMF0uc2Nyb2xsV2lkdGgpIHsgLy8gYWxyZWFkeSBzY3JvbGxlZCBhbGwgdGhlIHdheSByaWdodD9cblx0XHRcdFx0dGhpcy5zY3JvbGxMZWZ0VmVsID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBUaGlzIGZ1bmN0aW9uIGdldHMgY2FsbGVkIGR1cmluZyBldmVyeSBpdGVyYXRpb24gb2YgdGhlIHNjcm9sbGluZyBhbmltYXRpb24gbG9vcFxuXHRzY3JvbGxJbnRlcnZhbEZ1bmM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbCA9IHRoaXMuc2Nyb2xsRWw7XG5cdFx0dmFyIGZyYWMgPSB0aGlzLnNjcm9sbEludGVydmFsTXMgLyAxMDAwOyAvLyBjb25zaWRlcmluZyBhbmltYXRpb24gZnJlcXVlbmN5LCB3aGF0IHRoZSB2ZWwgc2hvdWxkIGJlIG11bHQnZCBieVxuXG5cdFx0Ly8gY2hhbmdlIHRoZSB2YWx1ZSBvZiBzY3JvbGxFbCdzIHNjcm9sbFxuXHRcdGlmICh0aGlzLnNjcm9sbFRvcFZlbCkge1xuXHRcdFx0ZWwuc2Nyb2xsVG9wKGVsLnNjcm9sbFRvcCgpICsgdGhpcy5zY3JvbGxUb3BWZWwgKiBmcmFjKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuc2Nyb2xsTGVmdFZlbCkge1xuXHRcdFx0ZWwuc2Nyb2xsTGVmdChlbC5zY3JvbGxMZWZ0KCkgKyB0aGlzLnNjcm9sbExlZnRWZWwgKiBmcmFjKTtcblx0XHR9XG5cblx0XHR0aGlzLmNvbnN0cmFpblNjcm9sbFZlbCgpOyAvLyBzaW5jZSB0aGUgc2Nyb2xsIHZhbHVlcyBjaGFuZ2VkLCByZWNvbXB1dGUgdGhlIHZlbG9jaXRpZXNcblxuXHRcdC8vIGlmIHNjcm9sbGVkIGFsbCB0aGUgd2F5LCB3aGljaCBjYXVzZXMgdGhlIHZlbHMgdG8gYmUgemVybywgc3RvcCB0aGUgYW5pbWF0aW9uIGxvb3Bcblx0XHRpZiAoIXRoaXMuc2Nyb2xsVG9wVmVsICYmICF0aGlzLnNjcm9sbExlZnRWZWwpIHtcblx0XHRcdHRoaXMuZW5kQXV0b1Njcm9sbCgpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIEtpbGxzIGFueSBleGlzdGluZyBzY3JvbGxpbmcgYW5pbWF0aW9uIGxvb3Bcblx0ZW5kQXV0b1Njcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuc2Nyb2xsSW50ZXJ2YWxJZCkge1xuXHRcdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLnNjcm9sbEludGVydmFsSWQpO1xuXHRcdFx0dGhpcy5zY3JvbGxJbnRlcnZhbElkID0gbnVsbDtcblxuXHRcdFx0dGhpcy5oYW5kbGVTY3JvbGxFbmQoKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBHZXQgY2FsbGVkIHdoZW4gdGhlIHNjcm9sbEVsIGlzIHNjcm9sbGVkIChOT1RFOiB0aGlzIGlzIGRlbGF5ZWQgdmlhIGRlYm91bmNlKVxuXHRoYW5kbGVEZWJvdW5jZWRTY3JvbGw6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHJlY29tcHV0ZSBhbGwgY29vcmRpbmF0ZXMsIGJ1dCAqb25seSogaWYgdGhpcyBpcyAqbm90KiBwYXJ0IG9mIG91ciBzY3JvbGxpbmcgYW5pbWF0aW9uXG5cdFx0aWYgKCF0aGlzLnNjcm9sbEludGVydmFsSWQpIHtcblx0XHRcdHRoaXMuaGFuZGxlU2Nyb2xsRW5kKCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gQ2FsbGVkIHdoZW4gc2Nyb2xsaW5nIGhhcyBzdG9wcGVkLCB3aGV0aGVyIHRocm91Z2ggYXV0byBzY3JvbGwsIG9yIHRoZSB1c2VyIHNjcm9sbGluZ1xuXHRoYW5kbGVTY3JvbGxFbmQ6IGZ1bmN0aW9uKCkge1xuXHR9XG5cbn0pO1xuOztcblxuLyogVHJhY2tzIG1vdXNlIG1vdmVtZW50cyBvdmVyIGEgY29tcG9uZW50IGFuZCByYWlzZXMgZXZlbnRzIGFib3V0IHdoaWNoIGhpdCB0aGUgbW91c2UgaXMgb3Zlci5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxub3B0aW9uczpcbi0gc3ViamVjdEVsXG4tIHN1YmplY3RDZW50ZXJcbiovXG5cbnZhciBIaXREcmFnTGlzdGVuZXIgPSBEcmFnTGlzdGVuZXIuZXh0ZW5kKHtcblxuXHRjb21wb25lbnQ6IG51bGwsIC8vIGNvbnZlcnRzIGNvb3JkaW5hdGVzIHRvIGhpdHNcblx0XHQvLyBtZXRob2RzOiBwcmVwYXJlSGl0cywgcmVsZWFzZUhpdHMsIHF1ZXJ5SGl0XG5cblx0b3JpZ0hpdDogbnVsbCwgLy8gdGhlIGhpdCB0aGUgbW91c2Ugd2FzIG92ZXIgd2hlbiBsaXN0ZW5pbmcgc3RhcnRlZFxuXHRoaXQ6IG51bGwsIC8vIHRoZSBoaXQgdGhlIG1vdXNlIGlzIG92ZXJcblx0Y29vcmRBZGp1c3Q6IG51bGwsIC8vIGRlbHRhIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgbW91c2UgY29vcmRpbmF0ZXMgd2hlbiBjb21wdXRpbmcgY29sbGlzaW9uc1xuXG5cblx0Y29uc3RydWN0b3I6IGZ1bmN0aW9uKGNvbXBvbmVudCwgb3B0aW9ucykge1xuXHRcdERyYWdMaXN0ZW5lci5jYWxsKHRoaXMsIG9wdGlvbnMpOyAvLyBjYWxsIHRoZSBzdXBlci1jb25zdHJ1Y3RvclxuXG5cdFx0dGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBkcmFnIGxpc3RlbmluZyBzdGFydHMgKGJ1dCBhIHJlYWwgZHJhZyBoYXMgbm90IG5lY2Vzc2FyaWx5IGJlZ2FuKS5cblx0Ly8gZXYgbWlnaHQgYmUgdW5kZWZpbmVkIGlmIGRyYWdnaW5nIHdhcyBzdGFydGVkIG1hbnVhbGx5LlxuXHRoYW5kbGVJbnRlcmFjdGlvblN0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdHZhciBzdWJqZWN0RWwgPSB0aGlzLnN1YmplY3RFbDtcblx0XHR2YXIgc3ViamVjdFJlY3Q7XG5cdFx0dmFyIG9yaWdQb2ludDtcblx0XHR2YXIgcG9pbnQ7XG5cblx0XHR0aGlzLmNvbXB1dGVDb29yZHMoKTtcblxuXHRcdGlmIChldikge1xuXHRcdFx0b3JpZ1BvaW50ID0geyBsZWZ0OiBnZXRFdlgoZXYpLCB0b3A6IGdldEV2WShldikgfTtcblx0XHRcdHBvaW50ID0gb3JpZ1BvaW50O1xuXG5cdFx0XHQvLyBjb25zdHJhaW4gdGhlIHBvaW50IHRvIGJvdW5kcyBvZiB0aGUgZWxlbWVudCBiZWluZyBkcmFnZ2VkXG5cdFx0XHRpZiAoc3ViamVjdEVsKSB7XG5cdFx0XHRcdHN1YmplY3RSZWN0ID0gZ2V0T3V0ZXJSZWN0KHN1YmplY3RFbCk7IC8vIHVzZWQgZm9yIGNlbnRlcmluZyBhcyB3ZWxsXG5cdFx0XHRcdHBvaW50ID0gY29uc3RyYWluUG9pbnQocG9pbnQsIHN1YmplY3RSZWN0KTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5vcmlnSGl0ID0gdGhpcy5xdWVyeUhpdChwb2ludC5sZWZ0LCBwb2ludC50b3ApO1xuXG5cdFx0XHQvLyB0cmVhdCB0aGUgY2VudGVyIG9mIHRoZSBzdWJqZWN0IGFzIHRoZSBjb2xsaXNpb24gcG9pbnQ/XG5cdFx0XHRpZiAoc3ViamVjdEVsICYmIHRoaXMub3B0aW9ucy5zdWJqZWN0Q2VudGVyKSB7XG5cblx0XHRcdFx0Ly8gb25seSBjb25zaWRlciB0aGUgYXJlYSB0aGUgc3ViamVjdCBvdmVybGFwcyB0aGUgaGl0LiBiZXN0IGZvciBsYXJnZSBzdWJqZWN0cy5cblx0XHRcdFx0Ly8gVE9ETzogc2tpcCB0aGlzIGlmIGhpdCBkaWRuJ3Qgc3VwcGx5IGxlZnQvcmlnaHQvdG9wL2JvdHRvbVxuXHRcdFx0XHRpZiAodGhpcy5vcmlnSGl0KSB7XG5cdFx0XHRcdFx0c3ViamVjdFJlY3QgPSBpbnRlcnNlY3RSZWN0cyh0aGlzLm9yaWdIaXQsIHN1YmplY3RSZWN0KSB8fFxuXHRcdFx0XHRcdFx0c3ViamVjdFJlY3Q7IC8vIGluIGNhc2UgdGhlcmUgaXMgbm8gaW50ZXJzZWN0aW9uXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRwb2ludCA9IGdldFJlY3RDZW50ZXIoc3ViamVjdFJlY3QpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmNvb3JkQWRqdXN0ID0gZGlmZlBvaW50cyhwb2ludCwgb3JpZ1BvaW50KTsgLy8gcG9pbnQgLSBvcmlnUG9pbnRcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aGlzLm9yaWdIaXQgPSBudWxsO1xuXHRcdFx0dGhpcy5jb29yZEFkanVzdCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gY2FsbCB0aGUgc3VwZXItbWV0aG9kLiBkbyBpdCBhZnRlciBvcmlnSGl0IGhhcyBiZWVuIGNvbXB1dGVkXG5cdFx0RHJhZ0xpc3RlbmVyLnByb3RvdHlwZS5oYW5kbGVJbnRlcmFjdGlvblN0YXJ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH0sXG5cblxuXHQvLyBSZWNvbXB1dGVzIHRoZSBkcmFnLWNyaXRpY2FsIHBvc2l0aW9ucyBvZiBlbGVtZW50c1xuXHRjb21wdXRlQ29vcmRzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmNvbXBvbmVudC5wcmVwYXJlSGl0cygpO1xuXHRcdHRoaXMuY29tcHV0ZVNjcm9sbEJvdW5kcygpOyAvLyB3aHkgaXMgdGhpcyBoZXJlPz8/Pz8/XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiB0aGUgYWN0dWFsIGRyYWcgaGFzIHN0YXJ0ZWRcblx0aGFuZGxlRHJhZ1N0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdHZhciBoaXQ7XG5cblx0XHREcmFnTGlzdGVuZXIucHJvdG90eXBlLmhhbmRsZURyYWdTdGFydC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBjYWxsIHRoZSBzdXBlci1tZXRob2RcblxuXHRcdC8vIG1pZ2h0IGJlIGRpZmZlcmVudCBmcm9tIHRoaXMub3JpZ0hpdCBpZiB0aGUgbWluLWRpc3RhbmNlIGlzIGxhcmdlXG5cdFx0aGl0ID0gdGhpcy5xdWVyeUhpdChnZXRFdlgoZXYpLCBnZXRFdlkoZXYpKTtcblxuXHRcdC8vIHJlcG9ydCB0aGUgaW5pdGlhbCBoaXQgdGhlIG1vdXNlIGlzIG92ZXJcblx0XHQvLyBlc3BlY2lhbGx5IGltcG9ydGFudCBpZiBubyBtaW4tZGlzdGFuY2UgYW5kIGRyYWcgc3RhcnRzIGltbWVkaWF0ZWx5XG5cdFx0aWYgKGhpdCkge1xuXHRcdFx0dGhpcy5oYW5kbGVIaXRPdmVyKGhpdCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gQ2FsbGVkIHdoZW4gdGhlIGRyYWcgbW92ZXNcblx0aGFuZGxlRHJhZzogZnVuY3Rpb24oZHgsIGR5LCBldikge1xuXHRcdHZhciBoaXQ7XG5cblx0XHREcmFnTGlzdGVuZXIucHJvdG90eXBlLmhhbmRsZURyYWcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gY2FsbCB0aGUgc3VwZXItbWV0aG9kXG5cblx0XHRoaXQgPSB0aGlzLnF1ZXJ5SGl0KGdldEV2WChldiksIGdldEV2WShldikpO1xuXG5cdFx0aWYgKCFpc0hpdHNFcXVhbChoaXQsIHRoaXMuaGl0KSkgeyAvLyBhIGRpZmZlcmVudCBoaXQgdGhhbiBiZWZvcmU/XG5cdFx0XHRpZiAodGhpcy5oaXQpIHtcblx0XHRcdFx0dGhpcy5oYW5kbGVIaXRPdXQoKTtcblx0XHRcdH1cblx0XHRcdGlmIChoaXQpIHtcblx0XHRcdFx0dGhpcy5oYW5kbGVIaXRPdmVyKGhpdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gQ2FsbGVkIHdoZW4gZHJhZ2dpbmcgaGFzIGJlZW4gc3RvcHBlZFxuXHRoYW5kbGVEcmFnRW5kOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmhhbmRsZUhpdERvbmUoKTtcblx0XHREcmFnTGlzdGVuZXIucHJvdG90eXBlLmhhbmRsZURyYWdFbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gY2FsbCB0aGUgc3VwZXItbWV0aG9kXG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBhIHRoZSBtb3VzZSBoYXMganVzdCBtb3ZlZCBvdmVyIGEgbmV3IGhpdFxuXHRoYW5kbGVIaXRPdmVyOiBmdW5jdGlvbihoaXQpIHtcblx0XHR2YXIgaXNPcmlnID0gaXNIaXRzRXF1YWwoaGl0LCB0aGlzLm9yaWdIaXQpO1xuXG5cdFx0dGhpcy5oaXQgPSBoaXQ7XG5cblx0XHR0aGlzLnRyaWdnZXIoJ2hpdE92ZXInLCB0aGlzLmhpdCwgaXNPcmlnLCB0aGlzLm9yaWdIaXQpO1xuXHR9LFxuXG5cblx0Ly8gQ2FsbGVkIHdoZW4gdGhlIG1vdXNlIGhhcyBqdXN0IG1vdmVkIG91dCBvZiBhIGhpdFxuXHRoYW5kbGVIaXRPdXQ6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmhpdCkge1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdoaXRPdXQnLCB0aGlzLmhpdCk7XG5cdFx0XHR0aGlzLmhhbmRsZUhpdERvbmUoKTtcblx0XHRcdHRoaXMuaGl0ID0gbnVsbDtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgYWZ0ZXIgYSBoaXRPdXQuIEFsc28gY2FsbGVkIGJlZm9yZSBhIGRyYWdTdG9wXG5cdGhhbmRsZUhpdERvbmU6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmhpdCkge1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdoaXREb25lJywgdGhpcy5oaXQpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIENhbGxlZCB3aGVuIHRoZSBpbnRlcmFjdGlvbiBlbmRzLCB3aGV0aGVyIHRoZXJlIHdhcyBhIHJlYWwgZHJhZyBvciBub3Rcblx0aGFuZGxlSW50ZXJhY3Rpb25FbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdERyYWdMaXN0ZW5lci5wcm90b3R5cGUuaGFuZGxlSW50ZXJhY3Rpb25FbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gY2FsbCB0aGUgc3VwZXItbWV0aG9kXG5cblx0XHR0aGlzLm9yaWdIaXQgPSBudWxsO1xuXHRcdHRoaXMuaGl0ID0gbnVsbDtcblxuXHRcdHRoaXMuY29tcG9uZW50LnJlbGVhc2VIaXRzKCk7XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBzY3JvbGxpbmcgaGFzIHN0b3BwZWQsIHdoZXRoZXIgdGhyb3VnaCBhdXRvIHNjcm9sbCwgb3IgdGhlIHVzZXIgc2Nyb2xsaW5nXG5cdGhhbmRsZVNjcm9sbEVuZDogZnVuY3Rpb24oKSB7XG5cdFx0RHJhZ0xpc3RlbmVyLnByb3RvdHlwZS5oYW5kbGVTY3JvbGxFbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gY2FsbCB0aGUgc3VwZXItbWV0aG9kXG5cblx0XHR0aGlzLmNvbXB1dGVDb29yZHMoKTsgLy8gaGl0cycgYWJzb2x1dGUgcG9zaXRpb25zIHdpbGwgYmUgaW4gbmV3IHBsYWNlcy4gcmVjb21wdXRlXG5cdH0sXG5cblxuXHQvLyBHZXRzIHRoZSBoaXQgdW5kZXJuZWF0aCB0aGUgY29vcmRpbmF0ZXMgZm9yIHRoZSBnaXZlbiBtb3VzZSBldmVudFxuXHRxdWVyeUhpdDogZnVuY3Rpb24obGVmdCwgdG9wKSB7XG5cblx0XHRpZiAodGhpcy5jb29yZEFkanVzdCkge1xuXHRcdFx0bGVmdCArPSB0aGlzLmNvb3JkQWRqdXN0LmxlZnQ7XG5cdFx0XHR0b3AgKz0gdGhpcy5jb29yZEFkanVzdC50b3A7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuY29tcG9uZW50LnF1ZXJ5SGl0KGxlZnQsIHRvcCk7XG5cdH1cblxufSk7XG5cblxuLy8gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGhpdHMgYXJlIGlkZW50aWNhbGx5IGVxdWFsLiBgZmFsc2VgIG90aGVyd2lzZS4gTXVzdCBiZSBmcm9tIHRoZSBzYW1lIGNvbXBvbmVudC5cbi8vIFR3byBudWxsIHZhbHVlcyB3aWxsIGJlIGNvbnNpZGVyZWQgZXF1YWwsIGFzIHR3byBcIm91dCBvZiB0aGUgY29tcG9uZW50XCIgc3RhdGVzIGFyZSB0aGUgc2FtZS5cbmZ1bmN0aW9uIGlzSGl0c0VxdWFsKGhpdDAsIGhpdDEpIHtcblxuXHRpZiAoIWhpdDAgJiYgIWhpdDEpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGlmIChoaXQwICYmIGhpdDEpIHtcblx0XHRyZXR1cm4gaGl0MC5jb21wb25lbnQgPT09IGhpdDEuY29tcG9uZW50ICYmXG5cdFx0XHRpc0hpdFByb3BzV2l0aGluKGhpdDAsIGhpdDEpICYmXG5cdFx0XHRpc0hpdFByb3BzV2l0aGluKGhpdDEsIGhpdDApOyAvLyBlbnN1cmVzIGFsbCBwcm9wcyBhcmUgaWRlbnRpY2FsXG5cdH1cblxuXHRyZXR1cm4gZmFsc2U7XG59XG5cblxuLy8gUmV0dXJucyB0cnVlIGlmIGFsbCBvZiBzdWJIaXQncyBub24tc3RhbmRhcmQgcHJvcGVydGllcyBhcmUgd2l0aGluIHN1cGVySGl0XG5mdW5jdGlvbiBpc0hpdFByb3BzV2l0aGluKHN1YkhpdCwgc3VwZXJIaXQpIHtcblx0Zm9yICh2YXIgcHJvcE5hbWUgaW4gc3ViSGl0KSB7XG5cdFx0aWYgKCEvXihjb21wb25lbnR8bGVmdHxyaWdodHx0b3B8Ym90dG9tKSQvLnRlc3QocHJvcE5hbWUpKSB7XG5cdFx0XHRpZiAoc3ViSGl0W3Byb3BOYW1lXSAhPT0gc3VwZXJIaXRbcHJvcE5hbWVdKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIHRydWU7XG59XG5cbjs7XG5cbi8qIENyZWF0ZXMgYSBjbG9uZSBvZiBhbiBlbGVtZW50IGFuZCBsZXRzIGl0IHRyYWNrIHRoZSBtb3VzZSBhcyBpdCBtb3Zlc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbnZhciBNb3VzZUZvbGxvd2VyID0gQ2xhc3MuZXh0ZW5kKExpc3RlbmVyTWl4aW4sIHtcblxuXHRvcHRpb25zOiBudWxsLFxuXG5cdHNvdXJjZUVsOiBudWxsLCAvLyB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUgY2xvbmVkIGFuZCBtYWRlIHRvIGxvb2sgbGlrZSBpdCBpcyBkcmFnZ2luZ1xuXHRlbDogbnVsbCwgLy8gdGhlIGNsb25lIG9mIGBzb3VyY2VFbGAgdGhhdCB3aWxsIHRyYWNrIHRoZSBtb3VzZVxuXHRwYXJlbnRFbDogbnVsbCwgLy8gdGhlIGVsZW1lbnQgdGhhdCBgZWxgICh0aGUgY2xvbmUpIHdpbGwgYmUgYXR0YWNoZWQgdG9cblxuXHQvLyB0aGUgaW5pdGlhbCBwb3NpdGlvbiBvZiBlbCwgcmVsYXRpdmUgdG8gdGhlIG9mZnNldCBwYXJlbnQuIG1hZGUgdG8gbWF0Y2ggdGhlIGluaXRpYWwgb2Zmc2V0IG9mIHNvdXJjZUVsXG5cdHRvcDA6IG51bGwsXG5cdGxlZnQwOiBudWxsLFxuXG5cdC8vIHRoZSBhYnNvbHV0ZSBjb29yZGluYXRlcyBvZiB0aGUgaW5pdGlhdGluZyB0b3VjaC9tb3VzZSBhY3Rpb25cblx0eTA6IG51bGwsXG5cdHgwOiBudWxsLFxuXG5cdC8vIHRoZSBudW1iZXIgb2YgcGl4ZWxzIHRoZSBtb3VzZSBoYXMgbW92ZWQgZnJvbSBpdHMgaW5pdGlhbCBwb3NpdGlvblxuXHR0b3BEZWx0YTogbnVsbCxcblx0bGVmdERlbHRhOiBudWxsLFxuXG5cdGlzRm9sbG93aW5nOiBmYWxzZSxcblx0aXNIaWRkZW46IGZhbHNlLFxuXHRpc0FuaW1hdGluZzogZmFsc2UsIC8vIGRvaW5nIHRoZSByZXZlcnQgYW5pbWF0aW9uP1xuXG5cdGNvbnN0cnVjdG9yOiBmdW5jdGlvbihzb3VyY2VFbCwgb3B0aW9ucykge1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdHRoaXMuc291cmNlRWwgPSBzb3VyY2VFbDtcblx0XHR0aGlzLnBhcmVudEVsID0gb3B0aW9ucy5wYXJlbnRFbCA/ICQob3B0aW9ucy5wYXJlbnRFbCkgOiBzb3VyY2VFbC5wYXJlbnQoKTsgLy8gZGVmYXVsdCB0byBzb3VyY2VFbCdzIHBhcmVudFxuXHR9LFxuXG5cblx0Ly8gQ2F1c2VzIHRoZSBlbGVtZW50IHRvIHN0YXJ0IGZvbGxvd2luZyB0aGUgbW91c2Vcblx0c3RhcnQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0aWYgKCF0aGlzLmlzRm9sbG93aW5nKSB7XG5cdFx0XHR0aGlzLmlzRm9sbG93aW5nID0gdHJ1ZTtcblxuXHRcdFx0dGhpcy55MCA9IGdldEV2WShldik7XG5cdFx0XHR0aGlzLngwID0gZ2V0RXZYKGV2KTtcblx0XHRcdHRoaXMudG9wRGVsdGEgPSAwO1xuXHRcdFx0dGhpcy5sZWZ0RGVsdGEgPSAwO1xuXG5cdFx0XHRpZiAoIXRoaXMuaXNIaWRkZW4pIHtcblx0XHRcdFx0dGhpcy51cGRhdGVQb3NpdGlvbigpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZ2V0RXZJc1RvdWNoKGV2KSkge1xuXHRcdFx0XHR0aGlzLmxpc3RlblRvKCQoZG9jdW1lbnQpLCAndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVNb3ZlKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR0aGlzLmxpc3RlblRvKCQoZG9jdW1lbnQpLCAnbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3ZlKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDYXVzZXMgdGhlIGVsZW1lbnQgdG8gc3RvcCBmb2xsb3dpbmcgdGhlIG1vdXNlLiBJZiBzaG91bGRSZXZlcnQgaXMgdHJ1ZSwgd2lsbCBhbmltYXRlIGJhY2sgdG8gb3JpZ2luYWwgcG9zaXRpb24uXG5cdC8vIGBjYWxsYmFja2AgZ2V0cyBpbnZva2VkIHdoZW4gdGhlIGFuaW1hdGlvbiBpcyBjb21wbGV0ZS4gSWYgbm8gYW5pbWF0aW9uLCBpdCBpcyBpbnZva2VkIGltbWVkaWF0ZWx5LlxuXHRzdG9wOiBmdW5jdGlvbihzaG91bGRSZXZlcnQsIGNhbGxiYWNrKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgcmV2ZXJ0RHVyYXRpb24gPSB0aGlzLm9wdGlvbnMucmV2ZXJ0RHVyYXRpb247XG5cblx0XHRmdW5jdGlvbiBjb21wbGV0ZSgpIHsgLy8gbWlnaHQgYmUgY2FsbGVkIGJ5IC5hbmltYXRlKCksIHdoaWNoIG1pZ2h0IGNoYW5nZSBgdGhpc2AgY29udGV4dFxuXHRcdFx0X3RoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcblx0XHRcdF90aGlzLnJlbW92ZUVsZW1lbnQoKTtcblxuXHRcdFx0X3RoaXMudG9wMCA9IF90aGlzLmxlZnQwID0gbnVsbDsgLy8gcmVzZXQgc3RhdGUgZm9yIGZ1dHVyZSB1cGRhdGVQb3NpdGlvbiBjYWxsc1xuXG5cdFx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGhpcy5pc0ZvbGxvd2luZyAmJiAhdGhpcy5pc0FuaW1hdGluZykgeyAvLyBkaXNhbGxvdyBtb3JlIHRoYW4gb25lIHN0b3AgYW5pbWF0aW9uIGF0IGEgdGltZVxuXHRcdFx0dGhpcy5pc0ZvbGxvd2luZyA9IGZhbHNlO1xuXG5cdFx0XHR0aGlzLnN0b3BMaXN0ZW5pbmdUbygkKGRvY3VtZW50KSk7XG5cblx0XHRcdGlmIChzaG91bGRSZXZlcnQgJiYgcmV2ZXJ0RHVyYXRpb24gJiYgIXRoaXMuaXNIaWRkZW4pIHsgLy8gZG8gYSByZXZlcnQgYW5pbWF0aW9uP1xuXHRcdFx0XHR0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5lbC5hbmltYXRlKHtcblx0XHRcdFx0XHR0b3A6IHRoaXMudG9wMCxcblx0XHRcdFx0XHRsZWZ0OiB0aGlzLmxlZnQwXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRkdXJhdGlvbjogcmV2ZXJ0RHVyYXRpb24sXG5cdFx0XHRcdFx0Y29tcGxldGU6IGNvbXBsZXRlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGNvbXBsZXRlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gR2V0cyB0aGUgdHJhY2tpbmcgZWxlbWVudC4gQ3JlYXRlIGl0IGlmIG5lY2Vzc2FyeVxuXHRnZXRFbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsID0gdGhpcy5lbDtcblxuXHRcdGlmICghZWwpIHtcblx0XHRcdGVsID0gdGhpcy5lbCA9IHRoaXMuc291cmNlRWwuY2xvbmUoKVxuXHRcdFx0XHQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmFkZGl0aW9uYWxDbGFzcyB8fCAnJylcblx0XHRcdFx0LmNzcyh7XG5cdFx0XHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0XHRcdFx0dmlzaWJpbGl0eTogJycsIC8vIGluIGNhc2Ugb3JpZ2luYWwgZWxlbWVudCB3YXMgaGlkZGVuIChjb21tb25seSB0aHJvdWdoIGhpZGVFdmVudHMoKSlcblx0XHRcdFx0XHRkaXNwbGF5OiB0aGlzLmlzSGlkZGVuID8gJ25vbmUnIDogJycsIC8vIGZvciB3aGVuIGluaXRpYWxseSBoaWRkZW5cblx0XHRcdFx0XHRtYXJnaW46IDAsXG5cdFx0XHRcdFx0cmlnaHQ6ICdhdXRvJywgLy8gZXJhc2UgYW5kIHNldCB3aWR0aCBpbnN0ZWFkXG5cdFx0XHRcdFx0Ym90dG9tOiAnYXV0bycsIC8vIGVyYXNlIGFuZCBzZXQgaGVpZ2h0IGluc3RlYWRcblx0XHRcdFx0XHR3aWR0aDogdGhpcy5zb3VyY2VFbC53aWR0aCgpLCAvLyBleHBsaWNpdCBoZWlnaHQgaW4gY2FzZSB0aGVyZSB3YXMgYSAncmlnaHQnIHZhbHVlXG5cdFx0XHRcdFx0aGVpZ2h0OiB0aGlzLnNvdXJjZUVsLmhlaWdodCgpLCAvLyBleHBsaWNpdCB3aWR0aCBpbiBjYXNlIHRoZXJlIHdhcyBhICdib3R0b20nIHZhbHVlXG5cdFx0XHRcdFx0b3BhY2l0eTogdGhpcy5vcHRpb25zLm9wYWNpdHkgfHwgJycsXG5cdFx0XHRcdFx0ekluZGV4OiB0aGlzLm9wdGlvbnMuekluZGV4XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQvLyB3ZSBkb24ndCB3YW50IGxvbmcgdGFwcyBvciBhbnkgbW91c2UgaW50ZXJhY3Rpb24gY2F1c2luZyBzZWxlY3Rpb24vbWVudXMuXG5cdFx0XHQvLyB3b3VsZCB1c2UgcHJldmVudFNlbGVjdGlvbigpLCBidXQgdGhhdCBwcmV2ZW50cyBzZWxlY3RzdGFydCwgY2F1c2luZyBwcm9ibGVtcy5cblx0XHRcdGVsLmFkZENsYXNzKCdmYy11bnNlbGVjdGFibGUnKTtcblxuXHRcdFx0ZWwuYXBwZW5kVG8odGhpcy5wYXJlbnRFbCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsO1xuXHR9LFxuXG5cblx0Ly8gUmVtb3ZlcyB0aGUgdHJhY2tpbmcgZWxlbWVudCBpZiBpdCBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWRcblx0cmVtb3ZlRWxlbWVudDogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuZWwpIHtcblx0XHRcdHRoaXMuZWwucmVtb3ZlKCk7XG5cdFx0XHR0aGlzLmVsID0gbnVsbDtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBVcGRhdGUgdGhlIENTUyBwb3NpdGlvbiBvZiB0aGUgdHJhY2tpbmcgZWxlbWVudFxuXHR1cGRhdGVQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNvdXJjZU9mZnNldDtcblx0XHR2YXIgb3JpZ2luO1xuXG5cdFx0dGhpcy5nZXRFbCgpOyAvLyBlbnN1cmUgdGhpcy5lbFxuXG5cdFx0Ly8gbWFrZSBzdXJlIG9yaWdpbiBpbmZvIHdhcyBjb21wdXRlZFxuXHRcdGlmICh0aGlzLnRvcDAgPT09IG51bGwpIHtcblx0XHRcdHNvdXJjZU9mZnNldCA9IHRoaXMuc291cmNlRWwub2Zmc2V0KCk7XG5cdFx0XHRvcmlnaW4gPSB0aGlzLmVsLm9mZnNldFBhcmVudCgpLm9mZnNldCgpO1xuXHRcdFx0dGhpcy50b3AwID0gc291cmNlT2Zmc2V0LnRvcCAtIG9yaWdpbi50b3A7XG5cdFx0XHR0aGlzLmxlZnQwID0gc291cmNlT2Zmc2V0LmxlZnQgLSBvcmlnaW4ubGVmdDtcblx0XHR9XG5cblx0XHR0aGlzLmVsLmNzcyh7XG5cdFx0XHR0b3A6IHRoaXMudG9wMCArIHRoaXMudG9wRGVsdGEsXG5cdFx0XHRsZWZ0OiB0aGlzLmxlZnQwICsgdGhpcy5sZWZ0RGVsdGFcblx0XHR9KTtcblx0fSxcblxuXG5cdC8vIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgbW92ZXMgdGhlIG1vdXNlXG5cdGhhbmRsZU1vdmU6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dGhpcy50b3BEZWx0YSA9IGdldEV2WShldikgLSB0aGlzLnkwO1xuXHRcdHRoaXMubGVmdERlbHRhID0gZ2V0RXZYKGV2KSAtIHRoaXMueDA7XG5cblx0XHRpZiAoIXRoaXMuaXNIaWRkZW4pIHtcblx0XHRcdHRoaXMudXBkYXRlUG9zaXRpb24oKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBUZW1wb3JhcmlseSBtYWtlcyB0aGUgdHJhY2tpbmcgZWxlbWVudCBpbnZpc2libGUuIENhbiBiZSBjYWxsZWQgYmVmb3JlIGZvbGxvd2luZyBzdGFydHNcblx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCF0aGlzLmlzSGlkZGVuKSB7XG5cdFx0XHR0aGlzLmlzSGlkZGVuID0gdHJ1ZTtcblx0XHRcdGlmICh0aGlzLmVsKSB7XG5cdFx0XHRcdHRoaXMuZWwuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIFNob3cgdGhlIHRyYWNraW5nIGVsZW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gdGVtcG9yYXJpbHkgaGlkZGVuXG5cdHNob3c6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmlzSGlkZGVuKSB7XG5cdFx0XHR0aGlzLmlzSGlkZGVuID0gZmFsc2U7XG5cdFx0XHR0aGlzLnVwZGF0ZVBvc2l0aW9uKCk7XG5cdFx0XHR0aGlzLmdldEVsKCkuc2hvdygpO1xuXHRcdH1cblx0fVxuXG59KTtcblxuOztcblxuLyogQW4gYWJzdHJhY3QgY2xhc3MgY29tcHJpc2VkIG9mIGEgXCJncmlkXCIgb2YgYXJlYXMgdGhhdCBlYWNoIHJlcHJlc2VudCBhIHNwZWNpZmljIGRhdGV0aW1lXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxudmFyIEdyaWQgPSBGQy5HcmlkID0gQ2xhc3MuZXh0ZW5kKExpc3RlbmVyTWl4aW4sIE1vdXNlSWdub3Jlck1peGluLCB7XG5cblx0Ly8gc2VsZi1jb25maWcsIG92ZXJyaWRhYmxlIGJ5IHN1YmNsYXNzZXNcblx0aGFzRGF5SW50ZXJhY3Rpb25zOiB0cnVlLCAvLyBjYW4gdXNlciBjbGljay9zZWxlY3QgcmFuZ2VzIG9mIHRpbWU/XG5cblx0dmlldzogbnVsbCwgLy8gYSBWaWV3IG9iamVjdFxuXHRpc1JUTDogbnVsbCwgLy8gc2hvcnRjdXQgdG8gdGhlIHZpZXcncyBpc1JUTCBvcHRpb25cblxuXHRzdGFydDogbnVsbCxcblx0ZW5kOiBudWxsLFxuXG5cdGVsOiBudWxsLCAvLyB0aGUgY29udGFpbmluZyBlbGVtZW50XG5cdGVsc0J5RmlsbDogbnVsbCwgLy8gYSBoYXNoIG9mIGpRdWVyeSBlbGVtZW50IHNldHMgdXNlZCBmb3IgcmVuZGVyaW5nIGVhY2ggZmlsbC4gS2V5ZWQgYnkgZmlsbCBuYW1lLlxuXG5cdC8vIGRlcml2ZWQgZnJvbSBvcHRpb25zXG5cdGV2ZW50VGltZUZvcm1hdDogbnVsbCxcblx0ZGlzcGxheUV2ZW50VGltZTogbnVsbCxcblx0ZGlzcGxheUV2ZW50RW5kOiBudWxsLFxuXG5cdG1pblJlc2l6ZUR1cmF0aW9uOiBudWxsLCAvLyBUT0RPOiBoYWNrLiBzZXQgYnkgc3ViY2xhc3Nlcy4gbWludW11bSBldmVudCByZXNpemUgZHVyYXRpb25cblxuXHQvLyBpZiBkZWZpbmVkLCBob2xkcyB0aGUgdW5pdCBpZGVudGlmaWVkIChleDogXCJ5ZWFyXCIgb3IgXCJtb250aFwiKSB0aGF0IGRldGVybWluZXMgdGhlIGxldmVsIG9mIGdyYW51bGFyaXR5XG5cdC8vIG9mIHRoZSBkYXRlIGFyZWFzLiBpZiBub3QgZGVmaW5lZCwgYXNzdW1lcyB0byBiZSBkYXkgYW5kIHRpbWUgZ3JhbnVsYXJpdHkuXG5cdC8vIFRPRE86IHBvcnQgaXNUaW1lU2NhbGUgaW50byBzYW1lIHN5c3RlbT9cblx0bGFyZ2VVbml0OiBudWxsLFxuXG5cdGRheURyYWdMaXN0ZW5lcjogbnVsbCxcblx0c2VnRHJhZ0xpc3RlbmVyOiBudWxsLFxuXHRzZWdSZXNpemVMaXN0ZW5lcjogbnVsbCxcblx0ZXh0ZXJuYWxEcmFnTGlzdGVuZXI6IG51bGwsXG5cblxuXHRjb25zdHJ1Y3RvcjogZnVuY3Rpb24odmlldykge1xuXHRcdHRoaXMudmlldyA9IHZpZXc7XG5cdFx0dGhpcy5pc1JUTCA9IHZpZXcub3B0KCdpc1JUTCcpO1xuXHRcdHRoaXMuZWxzQnlGaWxsID0ge307XG5cblx0XHR0aGlzLmRheURyYWdMaXN0ZW5lciA9IHRoaXMuYnVpbGREYXlEcmFnTGlzdGVuZXIoKTtcblx0XHR0aGlzLmluaXRNb3VzZUlnbm9yaW5nKCk7XG5cdH0sXG5cblxuXHQvKiBPcHRpb25zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIGZvcm1hdCBzdHJpbmcgdXNlZCBmb3IgZXZlbnQgdGltZSB0ZXh0LCBpZiBub3QgZXhwbGljaXRseSBkZWZpbmVkIGJ5ICd0aW1lRm9ybWF0J1xuXHRjb21wdXRlRXZlbnRUaW1lRm9ybWF0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy52aWV3Lm9wdCgnc21hbGxUaW1lRm9ybWF0Jyk7XG5cdH0sXG5cblxuXHQvLyBEZXRlcm1pbmVzIHdoZXRoZXIgZXZlbnRzIHNob3VsZCBoYXZlIHRoZWlyIGVuZCB0aW1lcyBkaXNwbGF5ZWQsIGlmIG5vdCBleHBsaWNpdGx5IGRlZmluZWQgYnkgJ2Rpc3BsYXlFdmVudFRpbWUnLlxuXHQvLyBPbmx5IGFwcGxpZXMgdG8gbm9uLWFsbC1kYXkgZXZlbnRzLlxuXHRjb21wdXRlRGlzcGxheUV2ZW50VGltZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblxuXHQvLyBEZXRlcm1pbmVzIHdoZXRoZXIgZXZlbnRzIHNob3VsZCBoYXZlIHRoZWlyIGVuZCB0aW1lcyBkaXNwbGF5ZWQsIGlmIG5vdCBleHBsaWNpdGx5IGRlZmluZWQgYnkgJ2Rpc3BsYXlFdmVudEVuZCdcblx0Y29tcHV0ZURpc3BsYXlFdmVudEVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblxuXHQvKiBEYXRlc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gVGVsbHMgdGhlIGdyaWQgYWJvdXQgd2hhdCBwZXJpb2Qgb2YgdGltZSB0byBkaXNwbGF5LlxuXHQvLyBBbnkgZGF0ZS1yZWxhdGVkIGludGVybmFsIGRhdGEgc2hvdWxkIGJlIGdlbmVyYXRlZC5cblx0c2V0UmFuZ2U6IGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0dGhpcy5zdGFydCA9IHJhbmdlLnN0YXJ0LmNsb25lKCk7XG5cdFx0dGhpcy5lbmQgPSByYW5nZS5lbmQuY2xvbmUoKTtcblxuXHRcdHRoaXMucmFuZ2VVcGRhdGVkKCk7XG5cdFx0dGhpcy5wcm9jZXNzUmFuZ2VPcHRpb25zKCk7XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBpbnRlcm5hbCB2YXJpYWJsZXMgdGhhdCByZWx5IG9uIHRoZSByYW5nZSBzaG91bGQgYmUgdXBkYXRlZFxuXHRyYW5nZVVwZGF0ZWQ6IGZ1bmN0aW9uKCkge1xuXHR9LFxuXG5cblx0Ly8gVXBkYXRlcyB2YWx1ZXMgdGhhdCByZWx5IG9uIG9wdGlvbnMgYW5kIGFsc28gcmVsYXRlIHRvIHJhbmdlXG5cdHByb2Nlc3NSYW5nZU9wdGlvbnM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBkaXNwbGF5RXZlbnRUaW1lO1xuXHRcdHZhciBkaXNwbGF5RXZlbnRFbmQ7XG5cblx0XHR0aGlzLmV2ZW50VGltZUZvcm1hdCA9XG5cdFx0XHR2aWV3Lm9wdCgnZXZlbnRUaW1lRm9ybWF0JykgfHxcblx0XHRcdHZpZXcub3B0KCd0aW1lRm9ybWF0JykgfHwgLy8gZGVwcmVjYXRlZFxuXHRcdFx0dGhpcy5jb21wdXRlRXZlbnRUaW1lRm9ybWF0KCk7XG5cblx0XHRkaXNwbGF5RXZlbnRUaW1lID0gdmlldy5vcHQoJ2Rpc3BsYXlFdmVudFRpbWUnKTtcblx0XHRpZiAoZGlzcGxheUV2ZW50VGltZSA9PSBudWxsKSB7XG5cdFx0XHRkaXNwbGF5RXZlbnRUaW1lID0gdGhpcy5jb21wdXRlRGlzcGxheUV2ZW50VGltZSgpOyAvLyBtaWdodCBiZSBiYXNlZCBvZmYgb2YgcmFuZ2Vcblx0XHR9XG5cblx0XHRkaXNwbGF5RXZlbnRFbmQgPSB2aWV3Lm9wdCgnZGlzcGxheUV2ZW50RW5kJyk7XG5cdFx0aWYgKGRpc3BsYXlFdmVudEVuZCA9PSBudWxsKSB7XG5cdFx0XHRkaXNwbGF5RXZlbnRFbmQgPSB0aGlzLmNvbXB1dGVEaXNwbGF5RXZlbnRFbmQoKTsgLy8gbWlnaHQgYmUgYmFzZWQgb2ZmIG9mIHJhbmdlXG5cdFx0fVxuXG5cdFx0dGhpcy5kaXNwbGF5RXZlbnRUaW1lID0gZGlzcGxheUV2ZW50VGltZTtcblx0XHR0aGlzLmRpc3BsYXlFdmVudEVuZCA9IGRpc3BsYXlFdmVudEVuZDtcblx0fSxcblxuXG5cdC8vIENvbnZlcnRzIGEgc3BhbiAoaGFzIHVuem9uZWQgc3RhcnQvZW5kIGFuZCBhbnkgb3RoZXIgZ3JpZC1zcGVjaWZpYyBsb2NhdGlvbiBpbmZvcm1hdGlvbilcblx0Ly8gaW50byBhbiBhcnJheSBvZiBzZWdtZW50cyAocGllY2VzIG9mIGV2ZW50cyB3aG9zZSBmb3JtYXQgaXMgZGVjaWRlZCBieSB0aGUgZ3JpZCkuXG5cdHNwYW5Ub1NlZ3M6IGZ1bmN0aW9uKHNwYW4pIHtcblx0XHQvLyBzdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBEaWZmcyB0aGUgdHdvIGRhdGVzLCByZXR1cm5pbmcgYSBkdXJhdGlvbiwgYmFzZWQgb24gZ3JhbnVsYXJpdHkgb2YgdGhlIGdyaWRcblx0Ly8gVE9ETzogcG9ydCBpc1RpbWVTY2FsZSBpbnRvIHRoaXMgc3lzdGVtP1xuXHRkaWZmRGF0ZXM6IGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRpZiAodGhpcy5sYXJnZVVuaXQpIHtcblx0XHRcdHJldHVybiBkaWZmQnlVbml0KGEsIGIsIHRoaXMubGFyZ2VVbml0KTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gZGlmZkRheVRpbWUoYSwgYik7XG5cdFx0fVxuXHR9LFxuXG5cblx0LyogSGl0IEFyZWFcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIENhbGxlZCBiZWZvcmUgb25lIG9yIG1vcmUgcXVlcnlIaXQgY2FsbHMgbWlnaHQgaGFwcGVuLiBTaG91bGQgcHJlcGFyZSBhbnkgY2FjaGVkIGNvb3JkaW5hdGVzIGZvciBxdWVyeUhpdFxuXHRwcmVwYXJlSGl0czogZnVuY3Rpb24oKSB7XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBxdWVyeUhpdCBjYWxscyBoYXZlIHN1YnNpZGVkLiBHb29kIHBsYWNlIHRvIGNsZWFyIGFueSBjb29yZGluYXRlIGNhY2hlcy5cblx0cmVsZWFzZUhpdHM6IGZ1bmN0aW9uKCkge1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gY29vcmRpbmF0ZXMgZnJvbSB0aGUgdG9wbGVmdCBvZiB0aGUgZG9jdW1lbnQsIHJldHVybiBkYXRhIGFib3V0IHRoZSBkYXRlLXJlbGF0ZWQgYXJlYSB1bmRlcm5lYXRoLlxuXHQvLyBDYW4gcmV0dXJuIGFuIG9iamVjdCB3aXRoIGFyYml0cmFyeSBwcm9wZXJ0aWVzIChhbHRob3VnaCB0b3AvcmlnaHQvbGVmdC9ib3R0b20gYXJlIGVuY291cmFnZWQpLlxuXHQvLyBNdXN0IGhhdmUgYSBgZ3JpZGAgcHJvcGVydHksIGEgcmVmZXJlbmNlIHRvIHRoaXMgY3VycmVudCBncmlkLiBUT0RPOiBhdm9pZCB0aGlzXG5cdC8vIFRoZSByZXR1cm5lZCBvYmplY3Qgd2lsbCBiZSBwcm9jZXNzZWQgYnkgZ2V0SGl0U3BhbiBhbmQgZ2V0SGl0RWwuXG5cdHF1ZXJ5SGl0OiBmdW5jdGlvbihsZWZ0T2Zmc2V0LCB0b3BPZmZzZXQpIHtcblx0fSxcblxuXG5cdC8vIEdpdmVuIHBvc2l0aW9uLWxldmVsIGluZm9ybWF0aW9uIGFib3V0IGEgZGF0ZS1yZWxhdGVkIGFyZWEgd2l0aGluIHRoZSBncmlkLFxuXHQvLyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdCB3aXRoIGF0IGxlYXN0IGEgc3RhcnQvZW5kIGRhdGUuIENhbiBwcm92aWRlIG90aGVyIGluZm9ybWF0aW9uIGFzIHdlbGwuXG5cdGdldEhpdFNwYW46IGZ1bmN0aW9uKGhpdCkge1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gcG9zaXRpb24tbGV2ZWwgaW5mb3JtYXRpb24gYWJvdXQgYSBkYXRlLXJlbGF0ZWQgYXJlYSB3aXRoaW4gdGhlIGdyaWQsXG5cdC8vIHNob3VsZCByZXR1cm4gYSBqUXVlcnkgZWxlbWVudCB0aGF0IGJlc3QgcmVwcmVzZW50cyBpdC4gcGFzc2VkIHRvIGRheUNsaWNrIGNhbGxiYWNrLlxuXHRnZXRIaXRFbDogZnVuY3Rpb24oaGl0KSB7XG5cdH0sXG5cblxuXHQvKiBSZW5kZXJpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFNldHMgdGhlIGNvbnRhaW5lciBlbGVtZW50IHRoYXQgdGhlIGdyaWQgc2hvdWxkIHJlbmRlciBpbnNpZGUgb2YuXG5cdC8vIERvZXMgb3RoZXIgRE9NLXJlbGF0ZWQgaW5pdGlhbGl6YXRpb25zLlxuXHRzZXRFbGVtZW50OiBmdW5jdGlvbihlbCkge1xuXHRcdHRoaXMuZWwgPSBlbDtcblxuXHRcdGlmICh0aGlzLmhhc0RheUludGVyYWN0aW9ucykge1xuXHRcdFx0cHJldmVudFNlbGVjdGlvbihlbCk7XG5cblx0XHRcdHRoaXMuYmluZERheUhhbmRsZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmRheVRvdWNoU3RhcnQpO1xuXHRcdFx0dGhpcy5iaW5kRGF5SGFuZGxlcignbW91c2Vkb3duJywgdGhpcy5kYXlNb3VzZWRvd24pO1xuXHRcdH1cblxuXHRcdC8vIGF0dGFjaCBldmVudC1lbGVtZW50LXJlbGF0ZWQgaGFuZGxlcnMuIGluIEdyaWQuZXZlbnRzXG5cdFx0Ly8gc2FtZSBnYXJiYWdlIGNvbGxlY3Rpb24gbm90ZSBhcyBhYm92ZS5cblx0XHR0aGlzLmJpbmRTZWdIYW5kbGVycygpO1xuXG5cdFx0dGhpcy5iaW5kR2xvYmFsSGFuZGxlcnMoKTtcblx0fSxcblxuXG5cdGJpbmREYXlIYW5kbGVyOiBmdW5jdGlvbihuYW1lLCBoYW5kbGVyKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdC8vIGF0dGFjaCBhIGhhbmRsZXIgdG8gdGhlIGdyaWQncyByb290IGVsZW1lbnQuXG5cdFx0Ly8galF1ZXJ5IHdpbGwgdGFrZSBjYXJlIG9mIHVucmVnaXN0ZXJpbmcgdGhlbSB3aGVuIHJlbW92ZUVsZW1lbnQgZ2V0cyBjYWxsZWQuXG5cdFx0dGhpcy5lbC5vbihuYW1lLCBmdW5jdGlvbihldikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHQhJChldi50YXJnZXQpLmlzKFxuXHRcdFx0XHRcdF90aGlzLnNlZ1NlbGVjdG9yICsgJywnICsgLy8gZGlyZWN0bHkgb24gYW4gZXZlbnQgZWxlbWVudFxuXHRcdFx0XHRcdF90aGlzLnNlZ1NlbGVjdG9yICsgJyAqLCcgKyAvLyB3aXRoaW4gYW4gZXZlbnQgZWxlbWVudFxuXHRcdFx0XHRcdCcuZmMtbW9yZSwnICsgLy8gYSBcIm1vcmUuLlwiIGxpbmtcblx0XHRcdFx0XHQnYVtkYXRhLWdvdG9dJyAvLyBhIGNsaWNrYWJsZSBuYXYgbGlua1xuXHRcdFx0XHQpXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuIGhhbmRsZXIuY2FsbChfdGhpcywgZXYpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gUmVtb3ZlcyB0aGUgZ3JpZCdzIGNvbnRhaW5lciBlbGVtZW50IGZyb20gdGhlIERPTS4gVW5kb2VzIGFueSBvdGhlciBET00tcmVsYXRlZCBhdHRhY2htZW50cy5cblx0Ly8gRE9FUyBOT1QgcmVtb3ZlIGFueSBjb250ZW50IGJlZm9yZWhhbmQgKGRvZXNuJ3QgY2xlYXIgZXZlbnRzIG9yIGNhbGwgdW5yZW5kZXJEYXRlcyksIHVubGlrZSBWaWV3XG5cdHJlbW92ZUVsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5iaW5kR2xvYmFsSGFuZGxlcnMoKTtcblx0XHR0aGlzLmNsZWFyRHJhZ0xpc3RlbmVycygpO1xuXG5cdFx0dGhpcy5lbC5yZW1vdmUoKTtcblxuXHRcdC8vIE5PVEU6IHdlIGRvbid0IG51bGwtb3V0IHRoaXMuZWwgZm9yIHRoZSBzYW1lIHJlYXNvbnMgd2UgZG9uJ3QgZG8gaXQgd2l0aGluIFZpZXc6OnJlbW92ZUVsZW1lbnRcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgdGhlIGJhc2ljIHN0cnVjdHVyZSBvZiBncmlkIHZpZXcgYmVmb3JlIGFueSBjb250ZW50IGlzIHJlbmRlcmVkXG5cdHJlbmRlclNrZWxldG9uOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgdGhlIGdyaWQncyBkYXRlLXJlbGF0ZWQgY29udGVudCAobGlrZSBhcmVhcyB0aGF0IHJlcHJlc2VudCBkYXlzL3RpbWVzKS5cblx0Ly8gQXNzdW1lcyBzZXRSYW5nZSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCBhbmQgdGhlIHNrZWxldG9uIGhhcyBhbHJlYWR5IGJlZW4gcmVuZGVyZWQuXG5cdHJlbmRlckRhdGVzOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyB0aGUgZ3JpZCdzIGRhdGUtcmVsYXRlZCBjb250ZW50XG5cdHVucmVuZGVyRGF0ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0LyogSGFuZGxlcnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEJpbmRzIERPTSBoYW5kbGVycyB0byBlbGVtZW50cyB0aGF0IHJlc2lkZSBvdXRzaWRlIHRoZSBncmlkLCBzdWNoIGFzIHRoZSBkb2N1bWVudFxuXHRiaW5kR2xvYmFsSGFuZGxlcnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMubGlzdGVuVG8oJChkb2N1bWVudCksIHtcblx0XHRcdGRyYWdzdGFydDogdGhpcy5leHRlcm5hbERyYWdTdGFydCwgLy8ganF1aVxuXHRcdFx0c29ydHN0YXJ0OiB0aGlzLmV4dGVybmFsRHJhZ1N0YXJ0IC8vIGpxdWlcblx0XHR9KTtcblx0fSxcblxuXG5cdC8vIFVuYmluZHMgRE9NIGhhbmRsZXJzIGZyb20gZWxlbWVudHMgdGhhdCByZXNpZGUgb3V0c2lkZSB0aGUgZ3JpZFxuXHR1bmJpbmRHbG9iYWxIYW5kbGVyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zdG9wTGlzdGVuaW5nVG8oJChkb2N1bWVudCkpO1xuXHR9LFxuXG5cblx0Ly8gUHJvY2VzcyBhIG1vdXNlZG93biBvbiBhbiBlbGVtZW50IHRoYXQgcmVwcmVzZW50cyBhIGRheS4gRm9yIGRheSBjbGlja2luZyBhbmQgc2VsZWN0aW5nLlxuXHRkYXlNb3VzZWRvd246IGZ1bmN0aW9uKGV2KSB7XG5cdFx0aWYgKCF0aGlzLmlzSWdub3JpbmdNb3VzZSkge1xuXHRcdFx0dGhpcy5kYXlEcmFnTGlzdGVuZXIuc3RhcnRJbnRlcmFjdGlvbihldiwge1xuXHRcdFx0XHQvL2Rpc3RhbmNlOiA1LCAvLyBuZWVkcyBtb3JlIHdvcmsgaWYgd2Ugd2FudCBkYXlDbGljayB0byBmaXJlIGNvcnJlY3RseVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cblx0ZGF5VG91Y2hTdGFydDogZnVuY3Rpb24oZXYpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgc2VsZWN0TG9uZ1ByZXNzRGVsYXkgPSB2aWV3Lm9wdCgnc2VsZWN0TG9uZ1ByZXNzRGVsYXknKTtcblxuXHRcdC8vIEhBQ0sgdG8gcHJldmVudCBhIHVzZXIncyBjbGlja2F3YXkgZm9yIHVuc2VsZWN0aW5nIGEgcmFuZ2Ugb3IgYW4gZXZlbnRcblx0XHQvLyBmcm9tIGNhdXNpbmcgYSBkYXlDbGljay5cblx0XHRpZiAodmlldy5pc1NlbGVjdGVkIHx8IHZpZXcuc2VsZWN0ZWRFdmVudCkge1xuXHRcdFx0dGhpcy50ZW1wSWdub3JlTW91c2UoKTtcblx0XHR9XG5cblx0XHRpZiAoc2VsZWN0TG9uZ1ByZXNzRGVsYXkgPT0gbnVsbCkge1xuXHRcdFx0c2VsZWN0TG9uZ1ByZXNzRGVsYXkgPSB2aWV3Lm9wdCgnbG9uZ1ByZXNzRGVsYXknKTsgLy8gZmFsbGJhY2tcblx0XHR9XG5cblx0XHR0aGlzLmRheURyYWdMaXN0ZW5lci5zdGFydEludGVyYWN0aW9uKGV2LCB7XG5cdFx0XHRkZWxheTogc2VsZWN0TG9uZ1ByZXNzRGVsYXlcblx0XHR9KTtcblx0fSxcblxuXG5cdC8vIENyZWF0ZXMgYSBsaXN0ZW5lciB0aGF0IHRyYWNrcyB0aGUgdXNlcidzIGRyYWcgYWNyb3NzIGRheSBlbGVtZW50cy5cblx0Ly8gRm9yIGRheSBjbGlja2luZyBhbmQgc2VsZWN0aW5nLlxuXHRidWlsZERheURyYWdMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgaXNTZWxlY3RhYmxlID0gdmlldy5vcHQoJ3NlbGVjdGFibGUnKTtcblx0XHR2YXIgZGF5Q2xpY2tIaXQ7IC8vIG51bGwgaWYgaW52YWxpZCBkYXlDbGlja1xuXHRcdHZhciBzZWxlY3Rpb25TcGFuOyAvLyBudWxsIGlmIGludmFsaWQgc2VsZWN0aW9uXG5cblx0XHQvLyB0aGlzIGxpc3RlbmVyIHRyYWNrcyBhIG1vdXNlZG93biBvbiBhIGRheSBlbGVtZW50LCBhbmQgYSBzdWJzZXF1ZW50IGRyYWcuXG5cdFx0Ly8gaWYgdGhlIGRyYWcgZW5kcyBvbiB0aGUgc2FtZSBkYXksIGl0IGlzIGEgJ2RheUNsaWNrJy5cblx0XHQvLyBpZiAnc2VsZWN0YWJsZScgaXMgZW5hYmxlZCwgdGhpcyBsaXN0ZW5lciBhbHNvIGRldGVjdHMgc2VsZWN0aW9ucy5cblx0XHR2YXIgZHJhZ0xpc3RlbmVyID0gbmV3IEhpdERyYWdMaXN0ZW5lcih0aGlzLCB7XG5cdFx0XHRzY3JvbGw6IHZpZXcub3B0KCdkcmFnU2Nyb2xsJyksXG5cdFx0XHRpbnRlcmFjdGlvblN0YXJ0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF5Q2xpY2tIaXQgPSBkcmFnTGlzdGVuZXIub3JpZ0hpdDsgLy8gZm9yIGRheUNsaWNrLCB3aGVyZSBubyBkcmFnZ2luZyBoYXBwZW5zXG5cdFx0XHRcdHNlbGVjdGlvblNwYW4gPSBudWxsO1xuXHRcdFx0fSxcblx0XHRcdGRyYWdTdGFydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZpZXcudW5zZWxlY3QoKTsgLy8gc2luY2Ugd2UgY291bGQgYmUgcmVuZGVyaW5nIGEgbmV3IHNlbGVjdGlvbiwgd2Ugd2FudCB0byBjbGVhciBhbnkgb2xkIG9uZVxuXHRcdFx0fSxcblx0XHRcdGhpdE92ZXI6IGZ1bmN0aW9uKGhpdCwgaXNPcmlnLCBvcmlnSGl0KSB7XG5cdFx0XHRcdGlmIChvcmlnSGl0KSB7IC8vIGNsaWNrIG5lZWRzIHRvIGhhdmUgc3RhcnRlZCBvbiBhIGhpdFxuXG5cdFx0XHRcdFx0Ly8gaWYgdXNlciBkcmFnZ2VkIHRvIGFub3RoZXIgY2VsbCBhdCBhbnkgcG9pbnQsIGl0IGNhbiBubyBsb25nZXIgYmUgYSBkYXlDbGlja1xuXHRcdFx0XHRcdGlmICghaXNPcmlnKSB7XG5cdFx0XHRcdFx0XHRkYXlDbGlja0hpdCA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGlzU2VsZWN0YWJsZSkge1xuXHRcdFx0XHRcdFx0c2VsZWN0aW9uU3BhbiA9IF90aGlzLmNvbXB1dGVTZWxlY3Rpb24oXG5cdFx0XHRcdFx0XHRcdF90aGlzLmdldEhpdFNwYW4ob3JpZ0hpdCksXG5cdFx0XHRcdFx0XHRcdF90aGlzLmdldEhpdFNwYW4oaGl0KVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGlmIChzZWxlY3Rpb25TcGFuKSB7XG5cdFx0XHRcdFx0XHRcdF90aGlzLnJlbmRlclNlbGVjdGlvbihzZWxlY3Rpb25TcGFuKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKHNlbGVjdGlvblNwYW4gPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRcdGRpc2FibGVDdXJzb3IoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRoaXRPdXQ6IGZ1bmN0aW9uKCkgeyAvLyBjYWxsZWQgYmVmb3JlIG1vdXNlIG1vdmVzIHRvIGEgZGlmZmVyZW50IGhpdCBPUiBtb3ZlZCBvdXQgb2YgYWxsIGhpdHNcblx0XHRcdFx0ZGF5Q2xpY2tIaXQgPSBudWxsO1xuXHRcdFx0XHRzZWxlY3Rpb25TcGFuID0gbnVsbDtcblx0XHRcdFx0X3RoaXMudW5yZW5kZXJTZWxlY3Rpb24oKTtcblx0XHRcdH0sXG5cdFx0XHRoaXREb25lOiBmdW5jdGlvbigpIHsgLy8gY2FsbGVkIGFmdGVyIGEgaGl0T3V0IE9SIGJlZm9yZSBhIGRyYWdFbmRcblx0XHRcdFx0ZW5hYmxlQ3Vyc29yKCk7XG5cdFx0XHR9LFxuXHRcdFx0aW50ZXJhY3Rpb25FbmQ6IGZ1bmN0aW9uKGV2LCBpc0NhbmNlbGxlZCkge1xuXHRcdFx0XHRpZiAoIWlzQ2FuY2VsbGVkKSB7XG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0ZGF5Q2xpY2tIaXQgJiZcblx0XHRcdFx0XHRcdCFfdGhpcy5pc0lnbm9yaW5nTW91c2UgLy8gc2VlIGhhY2sgaW4gZGF5VG91Y2hTdGFydFxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0dmlldy50cmlnZ2VyRGF5Q2xpY2soXG5cdFx0XHRcdFx0XHRcdF90aGlzLmdldEhpdFNwYW4oZGF5Q2xpY2tIaXQpLFxuXHRcdFx0XHRcdFx0XHRfdGhpcy5nZXRIaXRFbChkYXlDbGlja0hpdCksXG5cdFx0XHRcdFx0XHRcdGV2XG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoc2VsZWN0aW9uU3Bhbikge1xuXHRcdFx0XHRcdFx0Ly8gdGhlIHNlbGVjdGlvbiB3aWxsIGFscmVhZHkgaGF2ZSBiZWVuIHJlbmRlcmVkLiBqdXN0IHJlcG9ydCBpdFxuXHRcdFx0XHRcdFx0dmlldy5yZXBvcnRTZWxlY3Rpb24oc2VsZWN0aW9uU3BhbiwgZXYpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGRyYWdMaXN0ZW5lcjtcblx0fSxcblxuXG5cdC8vIEtpbGxzIGFsbCBpbi1wcm9ncmVzcyBkcmFnZ2luZy5cblx0Ly8gVXNlZnVsIGZvciB3aGVuIHB1YmxpYyBBUEkgbWV0aG9kcyB0aGF0IHJlc3VsdCBpbiByZS1yZW5kZXJpbmcgYXJlIGludm9rZWQgZHVyaW5nIGEgZHJhZy5cblx0Ly8gQWxzbyB1c2VmdWwgZm9yIHdoZW4gdG91Y2ggZGV2aWNlcyBtaXNiZWhhdmUgYW5kIGRvbid0IGZpcmUgdGhlaXIgdG91Y2hlbmQuXG5cdGNsZWFyRHJhZ0xpc3RlbmVyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5kYXlEcmFnTGlzdGVuZXIuZW5kSW50ZXJhY3Rpb24oKTtcblxuXHRcdGlmICh0aGlzLnNlZ0RyYWdMaXN0ZW5lcikge1xuXHRcdFx0dGhpcy5zZWdEcmFnTGlzdGVuZXIuZW5kSW50ZXJhY3Rpb24oKTsgLy8gd2lsbCBjbGVhciB0aGlzLnNlZ0RyYWdMaXN0ZW5lclxuXHRcdH1cblx0XHRpZiAodGhpcy5zZWdSZXNpemVMaXN0ZW5lcikge1xuXHRcdFx0dGhpcy5zZWdSZXNpemVMaXN0ZW5lci5lbmRJbnRlcmFjdGlvbigpOyAvLyB3aWxsIGNsZWFyIHRoaXMuc2VnUmVzaXplTGlzdGVuZXJcblx0XHR9XG5cdFx0aWYgKHRoaXMuZXh0ZXJuYWxEcmFnTGlzdGVuZXIpIHtcblx0XHRcdHRoaXMuZXh0ZXJuYWxEcmFnTGlzdGVuZXIuZW5kSW50ZXJhY3Rpb24oKTsgLy8gd2lsbCBjbGVhciB0aGlzLmV4dGVybmFsRHJhZ0xpc3RlbmVyXG5cdFx0fVxuXHR9LFxuXG5cblx0LyogRXZlbnQgSGVscGVyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdC8vIFRPRE86IHNob3VsZCBwcm9iYWJseSBtb3ZlIHRoaXMgdG8gR3JpZC5ldmVudHMsIGxpa2Ugd2UgZGlkIGV2ZW50IGRyYWdnaW5nIC8gcmVzaXppbmdcblxuXG5cdC8vIFJlbmRlcnMgYSBtb2NrIGV2ZW50IGF0IHRoZSBnaXZlbiBldmVudCBsb2NhdGlvbiwgd2hpY2ggY29udGFpbnMgem9uZWQgc3RhcnQvZW5kIHByb3BlcnRpZXMuXG5cdC8vIFJldHVybnMgYWxsIG1vY2sgZXZlbnQgZWxlbWVudHMuXG5cdHJlbmRlckV2ZW50TG9jYXRpb25IZWxwZXI6IGZ1bmN0aW9uKGV2ZW50TG9jYXRpb24sIHNvdXJjZVNlZykge1xuXHRcdHZhciBmYWtlRXZlbnQgPSB0aGlzLmZhYnJpY2F0ZUhlbHBlckV2ZW50KGV2ZW50TG9jYXRpb24sIHNvdXJjZVNlZyk7XG5cblx0XHRyZXR1cm4gdGhpcy5yZW5kZXJIZWxwZXIoZmFrZUV2ZW50LCBzb3VyY2VTZWcpOyAvLyBkbyB0aGUgYWN0dWFsIHJlbmRlcmluZ1xuXHR9LFxuXG5cblx0Ly8gQnVpbGRzIGEgZmFrZSBldmVudCBnaXZlbiB6b25lZCBldmVudCBkYXRlIHByb3BlcnRpZXMgYW5kIGEgc2VnbWVudCBpcyBzaG91bGQgYmUgaW5zcGlyZWQgZnJvbS5cblx0Ly8gVGhlIHJhbmdlJ3MgZW5kIGNhbiBiZSBudWxsLCBpbiB3aGljaCBjYXNlIHRoZSBtb2NrIGV2ZW50IHRoYXQgaXMgcmVuZGVyZWQgd2lsbCBoYXZlIGEgbnVsbCBlbmQgdGltZS5cblx0Ly8gYHNvdXJjZVNlZ2AgaXMgdGhlIGludGVybmFsIHNlZ21lbnQgb2JqZWN0IGludm9sdmVkIGluIHRoZSBkcmFnLiBJZiBudWxsLCBzb21ldGhpbmcgZXh0ZXJuYWwgaXMgZHJhZ2dpbmcuXG5cdGZhYnJpY2F0ZUhlbHBlckV2ZW50OiBmdW5jdGlvbihldmVudExvY2F0aW9uLCBzb3VyY2VTZWcpIHtcblx0XHR2YXIgZmFrZUV2ZW50ID0gc291cmNlU2VnID8gY3JlYXRlT2JqZWN0KHNvdXJjZVNlZy5ldmVudCkgOiB7fTsgLy8gbWFzayB0aGUgb3JpZ2luYWwgZXZlbnQgb2JqZWN0IGlmIHBvc3NpYmxlXG5cblx0XHRmYWtlRXZlbnQuc3RhcnQgPSBldmVudExvY2F0aW9uLnN0YXJ0LmNsb25lKCk7XG5cdFx0ZmFrZUV2ZW50LmVuZCA9IGV2ZW50TG9jYXRpb24uZW5kID8gZXZlbnRMb2NhdGlvbi5lbmQuY2xvbmUoKSA6IG51bGw7XG5cdFx0ZmFrZUV2ZW50LmFsbERheSA9IG51bGw7IC8vIGZvcmNlIGl0IHRvIGJlIGZyZXNobHkgY29tcHV0ZWQgYnkgbm9ybWFsaXplRXZlbnREYXRlc1xuXHRcdHRoaXMudmlldy5jYWxlbmRhci5ub3JtYWxpemVFdmVudERhdGVzKGZha2VFdmVudCk7XG5cblx0XHQvLyB0aGlzIGV4dHJhIGNsYXNzTmFtZSB3aWxsIGJlIHVzZWZ1bCBmb3IgZGlmZmVyZW50aWF0aW5nIHJlYWwgZXZlbnRzIGZyb20gbW9jayBldmVudHMgaW4gQ1NTXG5cdFx0ZmFrZUV2ZW50LmNsYXNzTmFtZSA9IChmYWtlRXZlbnQuY2xhc3NOYW1lIHx8IFtdKS5jb25jYXQoJ2ZjLWhlbHBlcicpO1xuXG5cdFx0Ly8gaWYgc29tZXRoaW5nIGV4dGVybmFsIGlzIGJlaW5nIGRyYWdnZWQgaW4sIGRvbid0IHJlbmRlciBhIHJlc2l6ZXJcblx0XHRpZiAoIXNvdXJjZVNlZykge1xuXHRcdFx0ZmFrZUV2ZW50LmVkaXRhYmxlID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZha2VFdmVudDtcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgYSBtb2NrIGV2ZW50LiBHaXZlbiB6b25lZCBldmVudCBkYXRlIHByb3BlcnRpZXMuXG5cdC8vIE11c3QgcmV0dXJuIGFsbCBtb2NrIGV2ZW50IGVsZW1lbnRzLlxuXHRyZW5kZXJIZWxwZXI6IGZ1bmN0aW9uKGV2ZW50TG9jYXRpb24sIHNvdXJjZVNlZykge1xuXHRcdC8vIHN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhIG1vY2sgZXZlbnRcblx0dW5yZW5kZXJIZWxwZXI6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8qIFNlbGVjdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGEgc2VsZWN0aW9uLiBXaWxsIGhpZ2hsaWdodCBieSBkZWZhdWx0IGJ1dCBjYW4gYmUgb3ZlcnJpZGRlbiBieSBzdWJjbGFzc2VzLlxuXHQvLyBHaXZlbiBhIHNwYW4gKHVuem9uZWQgc3RhcnQvZW5kIGFuZCBvdGhlciBtaXNjIGRhdGEpXG5cdHJlbmRlclNlbGVjdGlvbjogZnVuY3Rpb24oc3Bhbikge1xuXHRcdHRoaXMucmVuZGVySGlnaGxpZ2h0KHNwYW4pO1xuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFueSB2aXN1YWwgaW5kaWNhdGlvbnMgb2YgYSBzZWxlY3Rpb24uIFdpbGwgdW5yZW5kZXIgYSBoaWdobGlnaHQgYnkgZGVmYXVsdC5cblx0dW5yZW5kZXJTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJIaWdobGlnaHQoKTtcblx0fSxcblxuXG5cdC8vIEdpdmVuIHRoZSBmaXJzdCBhbmQgbGFzdCBkYXRlLXNwYW5zIG9mIGEgc2VsZWN0aW9uLCByZXR1cm5zIGFub3RoZXIgZGF0ZS1zcGFuIG9iamVjdC5cblx0Ly8gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgYW5kIHByb3ZpZGUgYWRkaXRpb25hbCBkYXRhIGluIHRoZSBzcGFuIG9iamVjdC4gV2lsbCBiZSBwYXNzZWQgdG8gcmVuZGVyU2VsZWN0aW9uKCkuXG5cdC8vIFdpbGwgcmV0dXJuIGZhbHNlIGlmIHRoZSBzZWxlY3Rpb24gaXMgaW52YWxpZCBhbmQgdGhpcyBzaG91bGQgYmUgaW5kaWNhdGVkIHRvIHRoZSB1c2VyLlxuXHQvLyBXaWxsIHJldHVybiBudWxsL3VuZGVmaW5lZCBpZiBhIHNlbGVjdGlvbiBpbnZhbGlkIGJ1dCBubyBlcnJvciBzaG91bGQgYmUgcmVwb3J0ZWQuXG5cdGNvbXB1dGVTZWxlY3Rpb246IGZ1bmN0aW9uKHNwYW4wLCBzcGFuMSkge1xuXHRcdHZhciBzcGFuID0gdGhpcy5jb21wdXRlU2VsZWN0aW9uU3BhbihzcGFuMCwgc3BhbjEpO1xuXG5cdFx0aWYgKHNwYW4gJiYgIXRoaXMudmlldy5jYWxlbmRhci5pc1NlbGVjdGlvblNwYW5BbGxvd2VkKHNwYW4pKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNwYW47XG5cdH0sXG5cblxuXHQvLyBHaXZlbiB0d28gc3BhbnMsIG11c3QgcmV0dXJuIHRoZSBjb21iaW5hdGlvbiBvZiB0aGUgdHdvLlxuXHQvLyBUT0RPOiBkbyB0aGlzIHNlcGFyYXRpb24gb2YgY29uY2VybnMgKGNvbWJpbmluZyBWUyB2YWxpZGF0aW9uKSBmb3IgZXZlbnQgZG5kL3Jlc2l6ZSB0b28uXG5cdGNvbXB1dGVTZWxlY3Rpb25TcGFuOiBmdW5jdGlvbihzcGFuMCwgc3BhbjEpIHtcblx0XHR2YXIgZGF0ZXMgPSBbIHNwYW4wLnN0YXJ0LCBzcGFuMC5lbmQsIHNwYW4xLnN0YXJ0LCBzcGFuMS5lbmQgXTtcblxuXHRcdGRhdGVzLnNvcnQoY29tcGFyZU51bWJlcnMpOyAvLyBzb3J0cyBjaHJvbm9sb2dpY2FsbHkuIHdvcmtzIHdpdGggTW9tZW50c1xuXG5cdFx0cmV0dXJuIHsgc3RhcnQ6IGRhdGVzWzBdLmNsb25lKCksIGVuZDogZGF0ZXNbM10uY2xvbmUoKSB9O1xuXHR9LFxuXG5cblx0LyogSGlnaGxpZ2h0XG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGFuIGVtcGhhc2lzIG9uIHRoZSBnaXZlbiBkYXRlIHJhbmdlLiBHaXZlbiBhIHNwYW4gKHVuem9uZWQgc3RhcnQvZW5kIGFuZCBvdGhlciBtaXNjIGRhdGEpXG5cdHJlbmRlckhpZ2hsaWdodDogZnVuY3Rpb24oc3Bhbikge1xuXHRcdHRoaXMucmVuZGVyRmlsbCgnaGlnaGxpZ2h0JywgdGhpcy5zcGFuVG9TZWdzKHNwYW4pKTtcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyB0aGUgZW1waGFzaXMgb24gYSBkYXRlIHJhbmdlXG5cdHVucmVuZGVySGlnaGxpZ2h0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVucmVuZGVyRmlsbCgnaGlnaGxpZ2h0Jyk7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgYW4gYXJyYXkgb2YgY2xhc3NOYW1lcyBmb3IgcmVuZGVyaW5nIHRoZSBoaWdobGlnaHQuIFVzZWQgYnkgdGhlIGZpbGwgc3lzdGVtLlxuXHRoaWdobGlnaHRTZWdDbGFzc2VzOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gWyAnZmMtaGlnaGxpZ2h0JyBdO1xuXHR9LFxuXG5cblx0LyogQnVzaW5lc3MgSG91cnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHJlbmRlckJ1c2luZXNzSG91cnM6IGZ1bmN0aW9uKCkge1xuXHR9LFxuXG5cblx0dW5yZW5kZXJCdXNpbmVzc0hvdXJzOiBmdW5jdGlvbigpIHtcblx0fSxcblxuXG5cdC8qIE5vdyBJbmRpY2F0b3Jcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdGdldE5vd0luZGljYXRvclVuaXQ6IGZ1bmN0aW9uKCkge1xuXHR9LFxuXG5cblx0cmVuZGVyTm93SW5kaWNhdG9yOiBmdW5jdGlvbihkYXRlKSB7XG5cdH0sXG5cblxuXHR1bnJlbmRlck5vd0luZGljYXRvcjogZnVuY3Rpb24oKSB7XG5cdH0sXG5cblxuXHQvKiBGaWxsIFN5c3RlbSAoaGlnaGxpZ2h0LCBiYWNrZ3JvdW5kIGV2ZW50cywgYnVzaW5lc3MgaG91cnMpXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFRPRE86IHJlbW92ZSB0aGlzIHN5c3RlbS4gbGlrZSB3ZSBkaWQgaW4gVGltZUdyaWRcblx0Ki9cblxuXG5cdC8vIFJlbmRlcnMgYSBzZXQgb2YgcmVjdGFuZ2xlcyBvdmVyIHRoZSBnaXZlbiBzZWdtZW50cyBvZiB0aW1lLlxuXHQvLyBNVVNUIFJFVFVSTiBhIHN1YnNldCBvZiBzZWdzLCB0aGUgc2VncyB0aGF0IHdlcmUgYWN0dWFsbHkgcmVuZGVyZWQuXG5cdC8vIFJlc3BvbnNpYmxlIGZvciBwb3B1bGF0aW5nIHRoaXMuZWxzQnlGaWxsLiBUT0RPOiBiZXR0ZXIgQVBJIGZvciBleHByZXNzaW5nIHRoaXMgcmVxdWlyZW1lbnRcblx0cmVuZGVyRmlsbDogZnVuY3Rpb24odHlwZSwgc2Vncykge1xuXHRcdC8vIHN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhIHNwZWNpZmljIHR5cGUgb2YgZmlsbCB0aGF0IGlzIGN1cnJlbnRseSByZW5kZXJlZCBvbiB0aGUgZ3JpZFxuXHR1bnJlbmRlckZpbGw6IGZ1bmN0aW9uKHR5cGUpIHtcblx0XHR2YXIgZWwgPSB0aGlzLmVsc0J5RmlsbFt0eXBlXTtcblxuXHRcdGlmIChlbCkge1xuXHRcdFx0ZWwucmVtb3ZlKCk7XG5cdFx0XHRkZWxldGUgdGhpcy5lbHNCeUZpbGxbdHlwZV07XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyBhbmQgYXNzaWducyBhbiBgZWxgIHByb3BlcnR5IGZvciBlYWNoIGZpbGwgc2VnbWVudC4gR2VuZXJpYyBlbm91Z2ggdG8gd29yayB3aXRoIGRpZmZlcmVudCB0eXBlcy5cblx0Ly8gT25seSByZXR1cm5zIHNlZ21lbnRzIHRoYXQgc3VjY2Vzc2Z1bGx5IHJlbmRlcmVkLlxuXHQvLyBUbyBiZSBoYXJuZXNzZWQgYnkgcmVuZGVyRmlsbCAoaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3NlcykuXG5cdC8vIEFuYWxhZ291cyB0byByZW5kZXJGZ1NlZ0Vscy5cblx0cmVuZGVyRmlsbFNlZ0VsczogZnVuY3Rpb24odHlwZSwgc2Vncykge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0dmFyIHNlZ0VsTWV0aG9kID0gdGhpc1t0eXBlICsgJ1NlZ0VsJ107XG5cdFx0dmFyIGh0bWwgPSAnJztcblx0XHR2YXIgcmVuZGVyZWRTZWdzID0gW107XG5cdFx0dmFyIGk7XG5cblx0XHRpZiAoc2Vncy5sZW5ndGgpIHtcblxuXHRcdFx0Ly8gYnVpbGQgYSBsYXJnZSBjb25jYXRlbmF0aW9uIG9mIHNlZ21lbnQgSFRNTFxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aHRtbCArPSB0aGlzLmZpbGxTZWdIdG1sKHR5cGUsIHNlZ3NbaV0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBHcmFiIGluZGl2aWR1YWwgZWxlbWVudHMgZnJvbSB0aGUgY29tYmluZWQgSFRNTCBzdHJpbmcuIFVzZSBlYWNoIGFzIHRoZSBkZWZhdWx0IHJlbmRlcmluZy5cblx0XHRcdC8vIFRoZW4sIGNvbXB1dGUgdGhlICdlbCcgZm9yIGVhY2ggc2VnbWVudC5cblx0XHRcdCQoaHRtbCkuZWFjaChmdW5jdGlvbihpLCBub2RlKSB7XG5cdFx0XHRcdHZhciBzZWcgPSBzZWdzW2ldO1xuXHRcdFx0XHR2YXIgZWwgPSAkKG5vZGUpO1xuXG5cdFx0XHRcdC8vIGFsbG93IGN1c3RvbSBmaWx0ZXIgbWV0aG9kcyBwZXItdHlwZVxuXHRcdFx0XHRpZiAoc2VnRWxNZXRob2QpIHtcblx0XHRcdFx0XHRlbCA9IHNlZ0VsTWV0aG9kLmNhbGwoX3RoaXMsIHNlZywgZWwpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGVsKSB7IC8vIGN1c3RvbSBmaWx0ZXJzIGRpZCBub3QgY2FuY2VsIHRoZSByZW5kZXJcblx0XHRcdFx0XHRlbCA9ICQoZWwpOyAvLyBhbGxvdyBjdXN0b20gZmlsdGVyIHRvIHJldHVybiByYXcgRE9NIG5vZGVcblxuXHRcdFx0XHRcdC8vIGNvcnJlY3QgZWxlbWVudCB0eXBlPyAod291bGQgYmUgYmFkIGlmIGEgbm9uLVREIHdlcmUgaW5zZXJ0ZWQgaW50byBhIHRhYmxlIGZvciBleGFtcGxlKVxuXHRcdFx0XHRcdGlmIChlbC5pcyhfdGhpcy5maWxsU2VnVGFnKSkge1xuXHRcdFx0XHRcdFx0c2VnLmVsID0gZWw7XG5cdFx0XHRcdFx0XHRyZW5kZXJlZFNlZ3MucHVzaChzZWcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlbmRlcmVkU2Vncztcblx0fSxcblxuXG5cdGZpbGxTZWdUYWc6ICdkaXYnLCAvLyBzdWJjbGFzc2VzIGNhbiBvdmVycmlkZVxuXG5cblx0Ly8gQnVpbGRzIHRoZSBIVE1MIG5lZWRlZCBmb3Igb25lIGZpbGwgc2VnbWVudC4gR2VuZXJpYyBlbm91Z2ggdG8gd29yayB3aXRoIGRpZmZlcmVudCB0eXBlcy5cblx0ZmlsbFNlZ0h0bWw6IGZ1bmN0aW9uKHR5cGUsIHNlZykge1xuXG5cdFx0Ly8gY3VzdG9tIGhvb2tzIHBlci10eXBlXG5cdFx0dmFyIGNsYXNzZXNNZXRob2QgPSB0aGlzW3R5cGUgKyAnU2VnQ2xhc3NlcyddO1xuXHRcdHZhciBjc3NNZXRob2QgPSB0aGlzW3R5cGUgKyAnU2VnQ3NzJ107XG5cblx0XHR2YXIgY2xhc3NlcyA9IGNsYXNzZXNNZXRob2QgPyBjbGFzc2VzTWV0aG9kLmNhbGwodGhpcywgc2VnKSA6IFtdO1xuXHRcdHZhciBjc3MgPSBjc3NUb1N0cihjc3NNZXRob2QgPyBjc3NNZXRob2QuY2FsbCh0aGlzLCBzZWcpIDoge30pO1xuXG5cdFx0cmV0dXJuICc8JyArIHRoaXMuZmlsbFNlZ1RhZyArXG5cdFx0XHQoY2xhc3Nlcy5sZW5ndGggPyAnIGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiJyA6ICcnKSArXG5cdFx0XHQoY3NzID8gJyBzdHlsZT1cIicgKyBjc3MgKyAnXCInIDogJycpICtcblx0XHRcdCcgLz4nO1xuXHR9LFxuXG5cblxuXHQvKiBHZW5lcmljIHJlbmRlcmluZyB1dGlsaXRpZXMgZm9yIHN1YmNsYXNzZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIENvbXB1dGVzIEhUTUwgY2xhc3NOYW1lcyBmb3IgYSBzaW5nbGUtZGF5IGVsZW1lbnRcblx0Z2V0RGF5Q2xhc3NlczogZnVuY3Rpb24oZGF0ZSwgbm9UaGVtZUhpZ2hsaWdodCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciB0b2RheSA9IHZpZXcuY2FsZW5kYXIuZ2V0Tm93KCk7XG5cdFx0dmFyIGNsYXNzZXMgPSBbICdmYy0nICsgZGF5SURzW2RhdGUuZGF5KCldIF07XG5cblx0XHRpZiAoXG5cdFx0XHR2aWV3LmludGVydmFsRHVyYXRpb24uYXMoJ21vbnRocycpID09IDEgJiZcblx0XHRcdGRhdGUubW9udGgoKSAhPSB2aWV3LmludGVydmFsU3RhcnQubW9udGgoKVxuXHRcdCkge1xuXHRcdFx0Y2xhc3Nlcy5wdXNoKCdmYy1vdGhlci1tb250aCcpO1xuXHRcdH1cblxuXHRcdGlmIChkYXRlLmlzU2FtZSh0b2RheSwgJ2RheScpKSB7XG5cdFx0XHRjbGFzc2VzLnB1c2goJ2ZjLXRvZGF5Jyk7XG5cblx0XHRcdGlmIChub1RoZW1lSGlnaGxpZ2h0ICE9PSB0cnVlKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaCh2aWV3LmhpZ2hsaWdodFN0YXRlQ2xhc3MpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmIChkYXRlIDwgdG9kYXkpIHtcblx0XHRcdGNsYXNzZXMucHVzaCgnZmMtcGFzdCcpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNsYXNzZXMucHVzaCgnZmMtZnV0dXJlJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXM7XG5cdH1cblxufSk7XG5cbjs7XG5cbi8qIEV2ZW50LXJlbmRlcmluZyBhbmQgZXZlbnQtaW50ZXJhY3Rpb24gbWV0aG9kcyBmb3IgdGhlIGFic3RyYWN0IEdyaWQgY2xhc3Ncbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5HcmlkLm1peGluKHtcblxuXHQvLyBzZWxmLWNvbmZpZywgb3ZlcnJpZGFibGUgYnkgc3ViY2xhc3Nlc1xuXHRzZWdTZWxlY3RvcjogJy5mYy1ldmVudC1jb250YWluZXIgPiAqJywgLy8gd2hhdCBjb25zdGl0dXRlcyBhbiBldmVudCBlbGVtZW50P1xuXG5cdG1vdXNlZE92ZXJTZWc6IG51bGwsIC8vIHRoZSBzZWdtZW50IG9iamVjdCB0aGUgdXNlcidzIG1vdXNlIGlzIG92ZXIuIG51bGwgaWYgb3ZlciBub3RoaW5nXG5cdGlzRHJhZ2dpbmdTZWc6IGZhbHNlLCAvLyBpcyBhIHNlZ21lbnQgYmVpbmcgZHJhZ2dlZD8gYm9vbGVhblxuXHRpc1Jlc2l6aW5nU2VnOiBmYWxzZSwgLy8gaXMgYSBzZWdtZW50IGJlaW5nIHJlc2l6ZWQ/IGJvb2xlYW5cblx0aXNEcmFnZ2luZ0V4dGVybmFsOiBmYWxzZSwgLy8ganF1aS1kcmFnZ2luZyBhbiBleHRlcm5hbCBlbGVtZW50PyBib29sZWFuXG5cdHNlZ3M6IG51bGwsIC8vIHRoZSAqZXZlbnQqIHNlZ21lbnRzIGN1cnJlbnRseSByZW5kZXJlZCBpbiB0aGUgZ3JpZC4gVE9ETzogcmVuYW1lIHRvIGBldmVudFNlZ3NgXG5cblxuXHQvLyBSZW5kZXJzIHRoZSBnaXZlbiBldmVudHMgb250byB0aGUgZ3JpZFxuXHRyZW5kZXJFdmVudHM6IGZ1bmN0aW9uKGV2ZW50cykge1xuXHRcdHZhciBiZ0V2ZW50cyA9IFtdO1xuXHRcdHZhciBmZ0V2ZW50cyA9IFtdO1xuXHRcdHZhciBpO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0KGlzQmdFdmVudChldmVudHNbaV0pID8gYmdFdmVudHMgOiBmZ0V2ZW50cykucHVzaChldmVudHNbaV0pO1xuXHRcdH1cblxuXHRcdHRoaXMuc2VncyA9IFtdLmNvbmNhdCggLy8gcmVjb3JkIGFsbCBzZWdzXG5cdFx0XHR0aGlzLnJlbmRlckJnRXZlbnRzKGJnRXZlbnRzKSxcblx0XHRcdHRoaXMucmVuZGVyRmdFdmVudHMoZmdFdmVudHMpXG5cdFx0KTtcblx0fSxcblxuXG5cdHJlbmRlckJnRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcblx0XHR2YXIgc2VncyA9IHRoaXMuZXZlbnRzVG9TZWdzKGV2ZW50cyk7XG5cblx0XHQvLyByZW5kZXJCZ1NlZ3MgbWlnaHQgcmV0dXJuIGEgc3Vic2V0IG9mIHNlZ3MsIHNlZ3MgdGhhdCB3ZXJlIGFjdHVhbGx5IHJlbmRlcmVkXG5cdFx0cmV0dXJuIHRoaXMucmVuZGVyQmdTZWdzKHNlZ3MpIHx8IHNlZ3M7XG5cdH0sXG5cblxuXHRyZW5kZXJGZ0V2ZW50czogZnVuY3Rpb24oZXZlbnRzKSB7XG5cdFx0dmFyIHNlZ3MgPSB0aGlzLmV2ZW50c1RvU2VncyhldmVudHMpO1xuXG5cdFx0Ly8gcmVuZGVyRmdTZWdzIG1pZ2h0IHJldHVybiBhIHN1YnNldCBvZiBzZWdzLCBzZWdzIHRoYXQgd2VyZSBhY3R1YWxseSByZW5kZXJlZFxuXHRcdHJldHVybiB0aGlzLnJlbmRlckZnU2VncyhzZWdzKSB8fCBzZWdzO1xuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFsbCBldmVudHMgY3VycmVudGx5IHJlbmRlcmVkIG9uIHRoZSBncmlkXG5cdHVucmVuZGVyRXZlbnRzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmhhbmRsZVNlZ01vdXNlb3V0KCk7IC8vIHRyaWdnZXIgYW4gZXZlbnRNb3VzZW91dCBpZiB1c2VyJ3MgbW91c2UgaXMgb3ZlciBhbiBldmVudFxuXHRcdHRoaXMuY2xlYXJEcmFnTGlzdGVuZXJzKCk7XG5cblx0XHR0aGlzLnVucmVuZGVyRmdTZWdzKCk7XG5cdFx0dGhpcy51bnJlbmRlckJnU2VncygpO1xuXG5cdFx0dGhpcy5zZWdzID0gbnVsbDtcblx0fSxcblxuXG5cdC8vIFJldHJpZXZlcyBhbGwgcmVuZGVyZWQgc2VnbWVudCBvYmplY3RzIGN1cnJlbnRseSByZW5kZXJlZCBvbiB0aGUgZ3JpZFxuXHRnZXRFdmVudFNlZ3M6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnNlZ3MgfHwgW107XG5cdH0sXG5cblxuXHQvKiBGb3JlZ3JvdW5kIFNlZ21lbnQgUmVuZGVyaW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGZvcmVncm91bmQgZXZlbnQgc2VnbWVudHMgb250byB0aGUgZ3JpZC4gTWF5IHJldHVybiBhIHN1YnNldCBvZiBzZWdzIHRoYXQgd2VyZSByZW5kZXJlZC5cblx0cmVuZGVyRmdTZWdzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFsbCBjdXJyZW50bHkgcmVuZGVyZWQgZm9yZWdyb3VuZCBzZWdtZW50c1xuXHR1bnJlbmRlckZnU2VnczogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyBhbmQgYXNzaWducyBhbiBgZWxgIHByb3BlcnR5IGZvciBlYWNoIGZvcmVncm91bmQgZXZlbnQgc2VnbWVudC5cblx0Ly8gT25seSByZXR1cm5zIHNlZ21lbnRzIHRoYXQgc3VjY2Vzc2Z1bGx5IHJlbmRlcmVkLlxuXHQvLyBBIHV0aWxpdHkgdGhhdCBzdWJjbGFzc2VzIG1heSB1c2UuXG5cdHJlbmRlckZnU2VnRWxzOiBmdW5jdGlvbihzZWdzLCBkaXNhYmxlUmVzaXppbmcpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgaHRtbCA9ICcnO1xuXHRcdHZhciByZW5kZXJlZFNlZ3MgPSBbXTtcblx0XHR2YXIgaTtcblxuXHRcdGlmIChzZWdzLmxlbmd0aCkgeyAvLyBkb24ndCBidWlsZCBhbiBlbXB0eSBodG1sIHN0cmluZ1xuXG5cdFx0XHQvLyBidWlsZCBhIGxhcmdlIGNvbmNhdGVuYXRpb24gb2YgZXZlbnQgc2VnbWVudCBIVE1MXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRodG1sICs9IHRoaXMuZmdTZWdIdG1sKHNlZ3NbaV0sIGRpc2FibGVSZXNpemluZyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEdyYWIgaW5kaXZpZHVhbCBlbGVtZW50cyBmcm9tIHRoZSBjb21iaW5lZCBIVE1MIHN0cmluZy4gVXNlIGVhY2ggYXMgdGhlIGRlZmF1bHQgcmVuZGVyaW5nLlxuXHRcdFx0Ly8gVGhlbiwgY29tcHV0ZSB0aGUgJ2VsJyBmb3IgZWFjaCBzZWdtZW50LiBBbiBlbCBtaWdodCBiZSBudWxsIGlmIHRoZSBldmVudFJlbmRlciBjYWxsYmFjayByZXR1cm5lZCBmYWxzZS5cblx0XHRcdCQoaHRtbCkuZWFjaChmdW5jdGlvbihpLCBub2RlKSB7XG5cdFx0XHRcdHZhciBzZWcgPSBzZWdzW2ldO1xuXHRcdFx0XHR2YXIgZWwgPSB2aWV3LnJlc29sdmVFdmVudEVsKHNlZy5ldmVudCwgJChub2RlKSk7XG5cblx0XHRcdFx0aWYgKGVsKSB7XG5cdFx0XHRcdFx0ZWwuZGF0YSgnZmMtc2VnJywgc2VnKTsgLy8gdXNlZCBieSBoYW5kbGVyc1xuXHRcdFx0XHRcdHNlZy5lbCA9IGVsO1xuXHRcdFx0XHRcdHJlbmRlcmVkU2Vncy5wdXNoKHNlZyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiByZW5kZXJlZFNlZ3M7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgZm9yIHRoZSBkZWZhdWx0IHJlbmRlcmluZyBvZiBhIGZvcmVncm91bmQgZXZlbnQgc2VnbWVudC4gVXNlZCBieSByZW5kZXJGZ1NlZ0VscygpXG5cdGZnU2VnSHRtbDogZnVuY3Rpb24oc2VnLCBkaXNhYmxlUmVzaXppbmcpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8qIEJhY2tncm91bmQgU2VnbWVudCBSZW5kZXJpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgdGhlIGdpdmVuIGJhY2tncm91bmQgZXZlbnQgc2VnbWVudHMgb250byB0aGUgZ3JpZC5cblx0Ly8gUmV0dXJucyBhIHN1YnNldCBvZiB0aGUgc2VncyB0aGF0IHdlcmUgYWN0dWFsbHkgcmVuZGVyZWQuXG5cdHJlbmRlckJnU2VnczogZnVuY3Rpb24oc2Vncykge1xuXHRcdHJldHVybiB0aGlzLnJlbmRlckZpbGwoJ2JnRXZlbnQnLCBzZWdzKTtcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhbGwgdGhlIGN1cnJlbnRseSByZW5kZXJlZCBiYWNrZ3JvdW5kIGV2ZW50IHNlZ21lbnRzXG5cdHVucmVuZGVyQmdTZWdzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVucmVuZGVyRmlsbCgnYmdFdmVudCcpO1xuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyBhIGJhY2tncm91bmQgZXZlbnQgZWxlbWVudCwgZ2l2ZW4gdGhlIGRlZmF1bHQgcmVuZGVyaW5nLiBDYWxsZWQgYnkgdGhlIGZpbGwgc3lzdGVtLlxuXHRiZ0V2ZW50U2VnRWw6IGZ1bmN0aW9uKHNlZywgZWwpIHtcblx0XHRyZXR1cm4gdGhpcy52aWV3LnJlc29sdmVFdmVudEVsKHNlZy5ldmVudCwgZWwpOyAvLyB3aWxsIGZpbHRlciB0aHJvdWdoIGV2ZW50UmVuZGVyXG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgYW4gYXJyYXkgb2YgY2xhc3NOYW1lcyB0byBiZSB1c2VkIGZvciB0aGUgZGVmYXVsdCByZW5kZXJpbmcgb2YgYSBiYWNrZ3JvdW5kIGV2ZW50LlxuXHQvLyBDYWxsZWQgYnkgZmlsbFNlZ0h0bWwuXG5cdGJnRXZlbnRTZWdDbGFzc2VzOiBmdW5jdGlvbihzZWcpIHtcblx0XHR2YXIgZXZlbnQgPSBzZWcuZXZlbnQ7XG5cdFx0dmFyIHNvdXJjZSA9IGV2ZW50LnNvdXJjZSB8fCB7fTtcblxuXHRcdHJldHVybiBbICdmYy1iZ2V2ZW50JyBdLmNvbmNhdChcblx0XHRcdGV2ZW50LmNsYXNzTmFtZSxcblx0XHRcdHNvdXJjZS5jbGFzc05hbWUgfHwgW11cblx0XHQpO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIGEgc2VtaWNvbG9uLXNlcGFyYXRlZCBDU1Mgc3RyaW5nIHRvIGJlIHVzZWQgZm9yIHRoZSBkZWZhdWx0IHJlbmRlcmluZyBvZiBhIGJhY2tncm91bmQgZXZlbnQuXG5cdC8vIENhbGxlZCBieSBmaWxsU2VnSHRtbC5cblx0YmdFdmVudFNlZ0NzczogZnVuY3Rpb24oc2VnKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdCdiYWNrZ3JvdW5kLWNvbG9yJzogdGhpcy5nZXRTZWdTa2luQ3NzKHNlZylbJ2JhY2tncm91bmQtY29sb3InXVxuXHRcdH07XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgYW4gYXJyYXkgb2YgY2xhc3NOYW1lcyB0byBiZSB1c2VkIGZvciB0aGUgcmVuZGVyaW5nIGJ1c2luZXNzIGhvdXJzIG92ZXJsYXkuIENhbGxlZCBieSB0aGUgZmlsbCBzeXN0ZW0uXG5cdC8vIENhbGxlZCBieSBmaWxsU2VnSHRtbC5cblx0YnVzaW5lc3NIb3Vyc1NlZ0NsYXNzZXM6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHJldHVybiBbICdmYy1ub25idXNpbmVzcycsICdmYy1iZ2V2ZW50JyBdO1xuXHR9LFxuXG5cblx0LyogQnVzaW5lc3MgSG91cnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIENvbXB1dGUgYnVzaW5lc3MgaG91ciBzZWdzIGZvciB0aGUgZ3JpZCdzIGN1cnJlbnQgZGF0ZSByYW5nZS5cblx0Ly8gQ2FsbGVyIG11c3QgYXNrIGlmIHdob2xlLWRheSBidXNpbmVzcyBob3VycyBhcmUgbmVlZGVkLlxuXHQvLyBJZiBubyBgYnVzaW5lc3NIb3Vyc2AgY29uZmlndXJhdGlvbiB2YWx1ZSBpcyBzcGVjaWZpZWQsIGFzc3VtZXMgdGhlIGNhbGVuZGFyIGRlZmF1bHQuXG5cdGJ1aWxkQnVzaW5lc3NIb3VyU2VnczogZnVuY3Rpb24od2hvbGVEYXksIGJ1c2luZXNzSG91cnMpIHtcblx0XHRyZXR1cm4gdGhpcy5ldmVudHNUb1NlZ3MoXG5cdFx0XHR0aGlzLmJ1aWxkQnVzaW5lc3NIb3VyRXZlbnRzKHdob2xlRGF5LCBidXNpbmVzc0hvdXJzKVxuXHRcdCk7XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlIGJ1c2luZXNzIGhvdXIgKmV2ZW50cyogZm9yIHRoZSBncmlkJ3MgY3VycmVudCBkYXRlIHJhbmdlLlxuXHQvLyBDYWxsZXIgbXVzdCBhc2sgaWYgd2hvbGUtZGF5IGJ1c2luZXNzIGhvdXJzIGFyZSBuZWVkZWQuXG5cdC8vIElmIG5vIGBidXNpbmVzc0hvdXJzYCBjb25maWd1cmF0aW9uIHZhbHVlIGlzIHNwZWNpZmllZCwgYXNzdW1lcyB0aGUgY2FsZW5kYXIgZGVmYXVsdC5cblx0YnVpbGRCdXNpbmVzc0hvdXJFdmVudHM6IGZ1bmN0aW9uKHdob2xlRGF5LCBidXNpbmVzc0hvdXJzKSB7XG5cdFx0dmFyIGNhbGVuZGFyID0gdGhpcy52aWV3LmNhbGVuZGFyO1xuXHRcdHZhciBldmVudHM7XG5cblx0XHRpZiAoYnVzaW5lc3NIb3VycyA9PSBudWxsKSB7XG5cdFx0XHQvLyBmYWxsYmFja1xuXHRcdFx0Ly8gYWNjZXNzIGZyb20gY2FsZW5kYXdyLiBkb24ndCBhY2Nlc3MgZnJvbSB2aWV3LiBkb2Vzbid0IHVwZGF0ZSB3aXRoIGR5bmFtaWMgb3B0aW9ucy5cblx0XHRcdGJ1c2luZXNzSG91cnMgPSBjYWxlbmRhci5vcHRpb25zLmJ1c2luZXNzSG91cnM7XG5cdFx0fVxuXG5cdFx0ZXZlbnRzID0gY2FsZW5kYXIuY29tcHV0ZUJ1c2luZXNzSG91ckV2ZW50cyh3aG9sZURheSwgYnVzaW5lc3NIb3Vycyk7XG5cblx0XHQvLyBIQUNLLiBFdmVudHVhbGx5IHJlZmFjdG9yIGJ1c2luZXNzIGhvdXJzIFwiZXZlbnRzXCIgc3lzdGVtLlxuXHRcdC8vIElmIG5vIGV2ZW50cyBhcmUgZ2l2ZW4sIGJ1dCBidXNpbmVzc0hvdXJzIGlzIGFjdGl2YXRlZCwgdGhpcyBtZWFucyB0aGUgZW50aXJlIHZpc2libGUgcmFuZ2Ugc2hvdWxkIGJlXG5cdFx0Ly8gbWFya2VkIGFzICpub3QqIGJ1c2luZXNzLWhvdXJzLCB2aWEgaW52ZXJzZS1iYWNrZ3JvdW5kIHJlbmRlcmluZy5cblx0XHRpZiAoIWV2ZW50cy5sZW5ndGggJiYgYnVzaW5lc3NIb3Vycykge1xuXHRcdFx0ZXZlbnRzID0gW1xuXHRcdFx0XHQkLmV4dGVuZCh7fSwgQlVTSU5FU1NfSE9VUl9FVkVOVF9ERUZBVUxUUywge1xuXHRcdFx0XHRcdHN0YXJ0OiB0aGlzLnZpZXcuZW5kLCAvLyBndWFyYW50ZWVkIG91dC1vZi1yYW5nZVxuXHRcdFx0XHRcdGVuZDogdGhpcy52aWV3LmVuZCwgICAvLyBcIlxuXHRcdFx0XHRcdGRvdzogbnVsbFxuXHRcdFx0XHR9KVxuXHRcdFx0XTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnRzO1xuXHR9LFxuXG5cblx0LyogSGFuZGxlcnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEF0dGFjaGVzIGV2ZW50LWVsZW1lbnQtcmVsYXRlZCBoYW5kbGVycyBmb3IgKmFsbCogcmVuZGVyZWQgZXZlbnQgc2VnbWVudHMgb2YgdGhlIHZpZXcuXG5cdGJpbmRTZWdIYW5kbGVyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5iaW5kU2VnSGFuZGxlcnNUb0VsKHRoaXMuZWwpO1xuXHR9LFxuXG5cblx0Ly8gQXR0YWNoZXMgZXZlbnQtZWxlbWVudC1yZWxhdGVkIGhhbmRsZXJzIHRvIGFuIGFyYml0cmFyeSBjb250YWluZXIgZWxlbWVudC4gbGV2ZXJhZ2VzIGJ1YmJsaW5nLlxuXHRiaW5kU2VnSGFuZGxlcnNUb0VsOiBmdW5jdGlvbihlbCkge1xuXHRcdHRoaXMuYmluZFNlZ0hhbmRsZXJUb0VsKGVsLCAndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlU2VnVG91Y2hTdGFydCk7XG5cdFx0dGhpcy5iaW5kU2VnSGFuZGxlclRvRWwoZWwsICd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlU2VnVG91Y2hFbmQpO1xuXHRcdHRoaXMuYmluZFNlZ0hhbmRsZXJUb0VsKGVsLCAnbW91c2VlbnRlcicsIHRoaXMuaGFuZGxlU2VnTW91c2VvdmVyKTtcblx0XHR0aGlzLmJpbmRTZWdIYW5kbGVyVG9FbChlbCwgJ21vdXNlbGVhdmUnLCB0aGlzLmhhbmRsZVNlZ01vdXNlb3V0KTtcblx0XHR0aGlzLmJpbmRTZWdIYW5kbGVyVG9FbChlbCwgJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlU2VnTW91c2Vkb3duKTtcblx0XHR0aGlzLmJpbmRTZWdIYW5kbGVyVG9FbChlbCwgJ2NsaWNrJywgdGhpcy5oYW5kbGVTZWdDbGljayk7XG5cdH0sXG5cblxuXHQvLyBFeGVjdXRlcyBhIGhhbmRsZXIgZm9yIGFueSBhIHVzZXItaW50ZXJhY3Rpb24gb24gYSBzZWdtZW50LlxuXHQvLyBIYW5kbGVyIGdldHMgY2FsbGVkIHdpdGggKHNlZywgZXYpLCBhbmQgd2l0aCB0aGUgYHRoaXNgIGNvbnRleHQgb2YgdGhlIEdyaWRcblx0YmluZFNlZ0hhbmRsZXJUb0VsOiBmdW5jdGlvbihlbCwgbmFtZSwgaGFuZGxlcikge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRlbC5vbihuYW1lLCB0aGlzLnNlZ1NlbGVjdG9yLCBmdW5jdGlvbihldikge1xuXHRcdFx0dmFyIHNlZyA9ICQodGhpcykuZGF0YSgnZmMtc2VnJyk7IC8vIGdyYWIgc2VnbWVudCBkYXRhLiBwdXQgdGhlcmUgYnkgVmlldzo6cmVuZGVyRXZlbnRzXG5cblx0XHRcdC8vIG9ubHkgY2FsbCB0aGUgaGFuZGxlcnMgaWYgdGhlcmUgaXMgbm90IGEgZHJhZy9yZXNpemUgaW4gcHJvZ3Jlc3Ncblx0XHRcdGlmIChzZWcgJiYgIV90aGlzLmlzRHJhZ2dpbmdTZWcgJiYgIV90aGlzLmlzUmVzaXppbmdTZWcpIHtcblx0XHRcdFx0cmV0dXJuIGhhbmRsZXIuY2FsbChfdGhpcywgc2VnLCBldik7IC8vIGNvbnRleHQgd2lsbCBiZSB0aGUgR3JpZFxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cblx0aGFuZGxlU2VnQ2xpY2s6IGZ1bmN0aW9uKHNlZywgZXYpIHtcblx0XHR2YXIgcmVzID0gdGhpcy52aWV3LnB1YmxpY2x5VHJpZ2dlcignZXZlbnRDbGljaycsIHNlZy5lbFswXSwgc2VnLmV2ZW50LCBldik7IC8vIGNhbiByZXR1cm4gYGZhbHNlYCB0byBjYW5jZWxcblx0XHRpZiAocmVzID09PSBmYWxzZSkge1xuXHRcdFx0ZXYucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBVcGRhdGVzIGludGVybmFsIHN0YXRlIGFuZCB0cmlnZ2VycyBoYW5kbGVycyBmb3Igd2hlbiBhbiBldmVudCBlbGVtZW50IGlzIG1vdXNlZCBvdmVyXG5cdGhhbmRsZVNlZ01vdXNlb3ZlcjogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdGlmIChcblx0XHRcdCF0aGlzLmlzSWdub3JpbmdNb3VzZSAmJlxuXHRcdFx0IXRoaXMubW91c2VkT3ZlclNlZ1xuXHRcdCkge1xuXHRcdFx0dGhpcy5tb3VzZWRPdmVyU2VnID0gc2VnO1xuXHRcdFx0aWYgKHRoaXMudmlldy5pc0V2ZW50UmVzaXphYmxlKHNlZy5ldmVudCkpIHtcblx0XHRcdFx0c2VnLmVsLmFkZENsYXNzKCdmYy1hbGxvdy1tb3VzZS1yZXNpemUnKTtcblx0XHRcdH1cblx0XHRcdHRoaXMudmlldy5wdWJsaWNseVRyaWdnZXIoJ2V2ZW50TW91c2VvdmVyJywgc2VnLmVsWzBdLCBzZWcuZXZlbnQsIGV2KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBVcGRhdGVzIGludGVybmFsIHN0YXRlIGFuZCB0cmlnZ2VycyBoYW5kbGVycyBmb3Igd2hlbiBhbiBldmVudCBlbGVtZW50IGlzIG1vdXNlZCBvdXQuXG5cdC8vIENhbiBiZSBnaXZlbiBubyBhcmd1bWVudHMsIGluIHdoaWNoIGNhc2UgaXQgd2lsbCBtb3VzZW91dCB0aGUgc2VnbWVudCB0aGF0IHdhcyBwcmV2aW91c2x5IG1vdXNlZCBvdmVyLlxuXHRoYW5kbGVTZWdNb3VzZW91dDogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdGV2ID0gZXYgfHwge307IC8vIGlmIGdpdmVuIG5vIGFyZ3MsIG1ha2UgYSBtb2NrIG1vdXNlIGV2ZW50XG5cblx0XHRpZiAodGhpcy5tb3VzZWRPdmVyU2VnKSB7XG5cdFx0XHRzZWcgPSBzZWcgfHwgdGhpcy5tb3VzZWRPdmVyU2VnOyAvLyBpZiBnaXZlbiBubyBhcmdzLCB1c2UgdGhlIGN1cnJlbnRseSBtb3VzZWQtb3ZlciBzZWdtZW50XG5cdFx0XHR0aGlzLm1vdXNlZE92ZXJTZWcgPSBudWxsO1xuXHRcdFx0aWYgKHRoaXMudmlldy5pc0V2ZW50UmVzaXphYmxlKHNlZy5ldmVudCkpIHtcblx0XHRcdFx0c2VnLmVsLnJlbW92ZUNsYXNzKCdmYy1hbGxvdy1tb3VzZS1yZXNpemUnKTtcblx0XHRcdH1cblx0XHRcdHRoaXMudmlldy5wdWJsaWNseVRyaWdnZXIoJ2V2ZW50TW91c2VvdXQnLCBzZWcuZWxbMF0sIHNlZy5ldmVudCwgZXYpO1xuXHRcdH1cblx0fSxcblxuXG5cdGhhbmRsZVNlZ01vdXNlZG93bjogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdHZhciBpc1Jlc2l6aW5nID0gdGhpcy5zdGFydFNlZ1Jlc2l6ZShzZWcsIGV2LCB7IGRpc3RhbmNlOiA1IH0pO1xuXG5cdFx0aWYgKCFpc1Jlc2l6aW5nICYmIHRoaXMudmlldy5pc0V2ZW50RHJhZ2dhYmxlKHNlZy5ldmVudCkpIHtcblx0XHRcdHRoaXMuYnVpbGRTZWdEcmFnTGlzdGVuZXIoc2VnKVxuXHRcdFx0XHQuc3RhcnRJbnRlcmFjdGlvbihldiwge1xuXHRcdFx0XHRcdGRpc3RhbmNlOiA1XG5cdFx0XHRcdH0pO1xuXHRcdH1cblx0fSxcblxuXG5cdGhhbmRsZVNlZ1RvdWNoU3RhcnQ6IGZ1bmN0aW9uKHNlZywgZXYpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgZXZlbnQgPSBzZWcuZXZlbnQ7XG5cdFx0dmFyIGlzU2VsZWN0ZWQgPSB2aWV3LmlzRXZlbnRTZWxlY3RlZChldmVudCk7XG5cdFx0dmFyIGlzRHJhZ2dhYmxlID0gdmlldy5pc0V2ZW50RHJhZ2dhYmxlKGV2ZW50KTtcblx0XHR2YXIgaXNSZXNpemFibGUgPSB2aWV3LmlzRXZlbnRSZXNpemFibGUoZXZlbnQpO1xuXHRcdHZhciBpc1Jlc2l6aW5nID0gZmFsc2U7XG5cdFx0dmFyIGRyYWdMaXN0ZW5lcjtcblx0XHR2YXIgZXZlbnRMb25nUHJlc3NEZWxheTtcblxuXHRcdGlmIChpc1NlbGVjdGVkICYmIGlzUmVzaXphYmxlKSB7XG5cdFx0XHQvLyBvbmx5IGFsbG93IHJlc2l6aW5nIG9mIHRoZSBldmVudCBpcyBzZWxlY3RlZFxuXHRcdFx0aXNSZXNpemluZyA9IHRoaXMuc3RhcnRTZWdSZXNpemUoc2VnLCBldik7XG5cdFx0fVxuXG5cdFx0aWYgKCFpc1Jlc2l6aW5nICYmIChpc0RyYWdnYWJsZSB8fCBpc1Jlc2l6YWJsZSkpIHsgLy8gYWxsb3dlZCB0byBiZSBzZWxlY3RlZD9cblxuXHRcdFx0ZXZlbnRMb25nUHJlc3NEZWxheSA9IHZpZXcub3B0KCdldmVudExvbmdQcmVzc0RlbGF5Jyk7XG5cdFx0XHRpZiAoZXZlbnRMb25nUHJlc3NEZWxheSA9PSBudWxsKSB7XG5cdFx0XHRcdGV2ZW50TG9uZ1ByZXNzRGVsYXkgPSB2aWV3Lm9wdCgnbG9uZ1ByZXNzRGVsYXknKTsgLy8gZmFsbGJhY2tcblx0XHRcdH1cblxuXHRcdFx0ZHJhZ0xpc3RlbmVyID0gaXNEcmFnZ2FibGUgP1xuXHRcdFx0XHR0aGlzLmJ1aWxkU2VnRHJhZ0xpc3RlbmVyKHNlZykgOlxuXHRcdFx0XHR0aGlzLmJ1aWxkU2VnU2VsZWN0TGlzdGVuZXIoc2VnKTsgLy8gc2VnIGlzbid0IGRyYWdnYWJsZSwgYnV0IHN0aWxsIG5lZWRzIHRvIGJlIHNlbGVjdGVkXG5cblx0XHRcdGRyYWdMaXN0ZW5lci5zdGFydEludGVyYWN0aW9uKGV2LCB7IC8vIHdvbid0IHN0YXJ0IGlmIGFscmVhZHkgc3RhcnRlZFxuXHRcdFx0XHRkZWxheTogaXNTZWxlY3RlZCA/IDAgOiBldmVudExvbmdQcmVzc0RlbGF5IC8vIGRvIGRlbGF5IGlmIG5vdCBhbHJlYWR5IHNlbGVjdGVkXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBhIGxvbmcgdGFwIHNpbXVsYXRlcyBhIG1vdXNlb3Zlci4gaWdub3JlIHRoaXMgYm9ndXMgbW91c2VvdmVyLlxuXHRcdHRoaXMudGVtcElnbm9yZU1vdXNlKCk7XG5cdH0sXG5cblxuXHRoYW5kbGVTZWdUb3VjaEVuZDogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdC8vIHRvdWNoc3RhcnQrdG91Y2hlbmQgPSBjbGljaywgd2hpY2ggc2ltdWxhdGVzIGEgbW91c2VvdmVyLlxuXHRcdC8vIGlnbm9yZSB0aGlzIGJvZ3VzIG1vdXNlb3Zlci5cblx0XHR0aGlzLnRlbXBJZ25vcmVNb3VzZSgpO1xuXHR9LFxuXG5cblx0Ly8gcmV0dXJucyBib29sZWFuIHdoZXRoZXIgcmVzaXppbmcgYWN0dWFsbHkgc3RhcnRlZCBvciBub3QuXG5cdC8vIGFzc3VtZXMgdGhlIHNlZyBhbGxvd3MgcmVzaXppbmcuXG5cdC8vIGBkcmFnT3B0aW9uc2AgYXJlIG9wdGlvbmFsLlxuXHRzdGFydFNlZ1Jlc2l6ZTogZnVuY3Rpb24oc2VnLCBldiwgZHJhZ09wdGlvbnMpIHtcblx0XHRpZiAoJChldi50YXJnZXQpLmlzKCcuZmMtcmVzaXplcicpKSB7XG5cdFx0XHR0aGlzLmJ1aWxkU2VnUmVzaXplTGlzdGVuZXIoc2VnLCAkKGV2LnRhcmdldCkuaXMoJy5mYy1zdGFydC1yZXNpemVyJykpXG5cdFx0XHRcdC5zdGFydEludGVyYWN0aW9uKGV2LCBkcmFnT3B0aW9ucyk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXG5cblxuXHQvKiBFdmVudCBEcmFnZ2luZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQnVpbGRzIGEgbGlzdGVuZXIgdGhhdCB3aWxsIHRyYWNrIHVzZXItZHJhZ2dpbmcgb24gYW4gZXZlbnQgc2VnbWVudC5cblx0Ly8gR2VuZXJpYyBlbm91Z2ggdG8gd29yayB3aXRoIGFueSB0eXBlIG9mIEdyaWQuXG5cdC8vIEhhcyBzaWRlIGVmZmVjdCBvZiBzZXR0aW5nL3Vuc2V0dGluZyBgc2VnRHJhZ0xpc3RlbmVyYFxuXHRidWlsZFNlZ0RyYWdMaXN0ZW5lcjogZnVuY3Rpb24oc2VnKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgY2FsZW5kYXIgPSB2aWV3LmNhbGVuZGFyO1xuXHRcdHZhciBlbCA9IHNlZy5lbDtcblx0XHR2YXIgZXZlbnQgPSBzZWcuZXZlbnQ7XG5cdFx0dmFyIGlzRHJhZ2dpbmc7XG5cdFx0dmFyIG1vdXNlRm9sbG93ZXI7IC8vIEEgY2xvbmUgb2YgdGhlIG9yaWdpbmFsIGVsZW1lbnQgdGhhdCB3aWxsIG1vdmUgd2l0aCB0aGUgbW91c2Vcblx0XHR2YXIgZHJvcExvY2F0aW9uOyAvLyB6b25lZCBldmVudCBkYXRlIHByb3BlcnRpZXNcblxuXHRcdGlmICh0aGlzLnNlZ0RyYWdMaXN0ZW5lcikge1xuXHRcdFx0cmV0dXJuIHRoaXMuc2VnRHJhZ0xpc3RlbmVyO1xuXHRcdH1cblxuXHRcdC8vIFRyYWNrcyBtb3VzZSBtb3ZlbWVudCBvdmVyIHRoZSAqdmlldydzKiBjb29yZGluYXRlIG1hcC4gQWxsb3dzIGRyYWdnaW5nIGFuZCBkcm9wcGluZyBiZXR3ZWVuIHN1YmNvbXBvbmVudHNcblx0XHQvLyBvZiB0aGUgdmlldy5cblx0XHR2YXIgZHJhZ0xpc3RlbmVyID0gdGhpcy5zZWdEcmFnTGlzdGVuZXIgPSBuZXcgSGl0RHJhZ0xpc3RlbmVyKHZpZXcsIHtcblx0XHRcdHNjcm9sbDogdmlldy5vcHQoJ2RyYWdTY3JvbGwnKSxcblx0XHRcdHN1YmplY3RFbDogZWwsXG5cdFx0XHRzdWJqZWN0Q2VudGVyOiB0cnVlLFxuXHRcdFx0aW50ZXJhY3Rpb25TdGFydDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0c2VnLmNvbXBvbmVudCA9IF90aGlzOyAvLyBmb3IgcmVuZGVyRHJhZ1xuXHRcdFx0XHRpc0RyYWdnaW5nID0gZmFsc2U7XG5cdFx0XHRcdG1vdXNlRm9sbG93ZXIgPSBuZXcgTW91c2VGb2xsb3dlcihzZWcuZWwsIHtcblx0XHRcdFx0XHRhZGRpdGlvbmFsQ2xhc3M6ICdmYy1kcmFnZ2luZycsXG5cdFx0XHRcdFx0cGFyZW50RWw6IHZpZXcuZWwsXG5cdFx0XHRcdFx0b3BhY2l0eTogZHJhZ0xpc3RlbmVyLmlzVG91Y2ggPyBudWxsIDogdmlldy5vcHQoJ2RyYWdPcGFjaXR5JyksXG5cdFx0XHRcdFx0cmV2ZXJ0RHVyYXRpb246IHZpZXcub3B0KCdkcmFnUmV2ZXJ0RHVyYXRpb24nKSxcblx0XHRcdFx0XHR6SW5kZXg6IDIgLy8gb25lIGFib3ZlIHRoZSAuZmMtdmlld1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0bW91c2VGb2xsb3dlci5oaWRlKCk7IC8vIGRvbid0IHNob3cgdW50aWwgd2Uga25vdyB0aGlzIGlzIGEgcmVhbCBkcmFnXG5cdFx0XHRcdG1vdXNlRm9sbG93ZXIuc3RhcnQoZXYpO1xuXHRcdFx0fSxcblx0XHRcdGRyYWdTdGFydDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0aWYgKGRyYWdMaXN0ZW5lci5pc1RvdWNoICYmICF2aWV3LmlzRXZlbnRTZWxlY3RlZChldmVudCkpIHtcblx0XHRcdFx0XHQvLyBpZiBub3QgcHJldmlvdXNseSBzZWxlY3RlZCwgd2lsbCBmaXJlIGFmdGVyIGEgZGVsYXkuIHRoZW4sIHNlbGVjdCB0aGUgZXZlbnRcblx0XHRcdFx0XHR2aWV3LnNlbGVjdEV2ZW50KGV2ZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpc0RyYWdnaW5nID0gdHJ1ZTtcblx0XHRcdFx0X3RoaXMuaGFuZGxlU2VnTW91c2VvdXQoc2VnLCBldik7IC8vIGVuc3VyZSBhIG1vdXNlb3V0IG9uIHRoZSBtYW5pcHVsYXRlZCBldmVudCBoYXMgYmVlbiByZXBvcnRlZFxuXHRcdFx0XHRfdGhpcy5zZWdEcmFnU3RhcnQoc2VnLCBldik7XG5cdFx0XHRcdHZpZXcuaGlkZUV2ZW50KGV2ZW50KTsgLy8gaGlkZSBhbGwgZXZlbnQgc2VnbWVudHMuIG91ciBtb3VzZUZvbGxvd2VyIHdpbGwgdGFrZSBvdmVyXG5cdFx0XHR9LFxuXHRcdFx0aGl0T3ZlcjogZnVuY3Rpb24oaGl0LCBpc09yaWcsIG9yaWdIaXQpIHtcblx0XHRcdFx0dmFyIGRyYWdIZWxwZXJFbHM7XG5cblx0XHRcdFx0Ly8gc3RhcnRpbmcgaGl0IGNvdWxkIGJlIGZvcmNlZCAoRGF5R3JpZC5saW1pdClcblx0XHRcdFx0aWYgKHNlZy5oaXQpIHtcblx0XHRcdFx0XHRvcmlnSGl0ID0gc2VnLmhpdDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHNpbmNlIHdlIGFyZSBxdWVyeWluZyB0aGUgcGFyZW50IHZpZXcsIG1pZ2h0IG5vdCBiZWxvbmcgdG8gdGhpcyBncmlkXG5cdFx0XHRcdGRyb3BMb2NhdGlvbiA9IF90aGlzLmNvbXB1dGVFdmVudERyb3AoXG5cdFx0XHRcdFx0b3JpZ0hpdC5jb21wb25lbnQuZ2V0SGl0U3BhbihvcmlnSGl0KSxcblx0XHRcdFx0XHRoaXQuY29tcG9uZW50LmdldEhpdFNwYW4oaGl0KSxcblx0XHRcdFx0XHRldmVudFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGlmIChkcm9wTG9jYXRpb24gJiYgIWNhbGVuZGFyLmlzRXZlbnRTcGFuQWxsb3dlZChfdGhpcy5ldmVudFRvU3Bhbihkcm9wTG9jYXRpb24pLCBldmVudCkpIHtcblx0XHRcdFx0XHRkaXNhYmxlQ3Vyc29yKCk7XG5cdFx0XHRcdFx0ZHJvcExvY2F0aW9uID0gbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIGEgdmFsaWQgZHJvcCBsb2NhdGlvbiwgaGF2ZSB0aGUgc3ViY2xhc3MgcmVuZGVyIGEgdmlzdWFsIGluZGljYXRpb25cblx0XHRcdFx0aWYgKGRyb3BMb2NhdGlvbiAmJiAoZHJhZ0hlbHBlckVscyA9IHZpZXcucmVuZGVyRHJhZyhkcm9wTG9jYXRpb24sIHNlZykpKSB7XG5cblx0XHRcdFx0XHRkcmFnSGVscGVyRWxzLmFkZENsYXNzKCdmYy1kcmFnZ2luZycpO1xuXHRcdFx0XHRcdGlmICghZHJhZ0xpc3RlbmVyLmlzVG91Y2gpIHtcblx0XHRcdFx0XHRcdF90aGlzLmFwcGx5RHJhZ09wYWNpdHkoZHJhZ0hlbHBlckVscyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0bW91c2VGb2xsb3dlci5oaWRlKCk7IC8vIGlmIHRoZSBzdWJjbGFzcyBpcyBhbHJlYWR5IHVzaW5nIGEgbW9jayBldmVudCBcImhlbHBlclwiLCBoaWRlIG91ciBvd25cblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRtb3VzZUZvbGxvd2VyLnNob3coKTsgLy8gb3RoZXJ3aXNlLCBoYXZlIHRoZSBoZWxwZXIgZm9sbG93IHRoZSBtb3VzZSAobm8gc25hcHBpbmcpXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaXNPcmlnKSB7XG5cdFx0XHRcdFx0ZHJvcExvY2F0aW9uID0gbnVsbDsgLy8gbmVlZHMgdG8gaGF2ZSBtb3ZlZCBoaXRzIHRvIGJlIGEgdmFsaWQgZHJvcFxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0aGl0T3V0OiBmdW5jdGlvbigpIHsgLy8gY2FsbGVkIGJlZm9yZSBtb3VzZSBtb3ZlcyB0byBhIGRpZmZlcmVudCBoaXQgT1IgbW92ZWQgb3V0IG9mIGFsbCBoaXRzXG5cdFx0XHRcdHZpZXcudW5yZW5kZXJEcmFnKCk7IC8vIHVucmVuZGVyIHdoYXRldmVyIHdhcyBkb25lIGluIHJlbmRlckRyYWdcblx0XHRcdFx0bW91c2VGb2xsb3dlci5zaG93KCk7IC8vIHNob3cgaW4gY2FzZSB3ZSBhcmUgbW92aW5nIG91dCBvZiBhbGwgaGl0c1xuXHRcdFx0XHRkcm9wTG9jYXRpb24gPSBudWxsO1xuXHRcdFx0fSxcblx0XHRcdGhpdERvbmU6IGZ1bmN0aW9uKCkgeyAvLyBDYWxsZWQgYWZ0ZXIgYSBoaXRPdXQgT1IgYmVmb3JlIGEgZHJhZ0VuZFxuXHRcdFx0XHRlbmFibGVDdXJzb3IoKTtcblx0XHRcdH0sXG5cdFx0XHRpbnRlcmFjdGlvbkVuZDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0ZGVsZXRlIHNlZy5jb21wb25lbnQ7IC8vIHByZXZlbnQgc2lkZSBlZmZlY3RzXG5cblx0XHRcdFx0Ly8gZG8gcmV2ZXJ0IGFuaW1hdGlvbiBpZiBoYXNuJ3QgY2hhbmdlZC4gY2FsbHMgYSBjYWxsYmFjayB3aGVuIGZpbmlzaGVkICh3aGV0aGVyIGFuaW1hdGlvbiBvciBub3QpXG5cdFx0XHRcdG1vdXNlRm9sbG93ZXIuc3RvcCghZHJvcExvY2F0aW9uLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoaXNEcmFnZ2luZykge1xuXHRcdFx0XHRcdFx0dmlldy51bnJlbmRlckRyYWcoKTtcblx0XHRcdFx0XHRcdF90aGlzLnNlZ0RyYWdTdG9wKHNlZywgZXYpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChkcm9wTG9jYXRpb24pIHtcblx0XHRcdFx0XHRcdC8vIG5vIG5lZWQgdG8gcmUtc2hvdyBvcmlnaW5hbCwgd2lsbCByZXJlbmRlciBhbGwgYW55d2F5cy4gZXNwIGltcG9ydGFudCBpZiBldmVudFJlbmRlcldhaXRcblx0XHRcdFx0XHRcdHZpZXcucmVwb3J0RXZlbnREcm9wKGV2ZW50LCBkcm9wTG9jYXRpb24sIF90aGlzLmxhcmdlVW5pdCwgZWwsIGV2KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHR2aWV3LnNob3dFdmVudChldmVudCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0X3RoaXMuc2VnRHJhZ0xpc3RlbmVyID0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBkcmFnTGlzdGVuZXI7XG5cdH0sXG5cblxuXHQvLyBzZWcgaXNuJ3QgZHJhZ2dhYmxlLCBidXQgbGV0J3MgdXNlIGEgZ2VuZXJpYyBEcmFnTGlzdGVuZXJcblx0Ly8gc2ltcGx5IGZvciB0aGUgZGVsYXksIHNvIGl0IGNhbiBiZSBzZWxlY3RlZC5cblx0Ly8gSGFzIHNpZGUgZWZmZWN0IG9mIHNldHRpbmcvdW5zZXR0aW5nIGBzZWdEcmFnTGlzdGVuZXJgXG5cdGJ1aWxkU2VnU2VsZWN0TGlzdGVuZXI6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGV2ZW50ID0gc2VnLmV2ZW50O1xuXG5cdFx0aWYgKHRoaXMuc2VnRHJhZ0xpc3RlbmVyKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zZWdEcmFnTGlzdGVuZXI7XG5cdFx0fVxuXG5cdFx0dmFyIGRyYWdMaXN0ZW5lciA9IHRoaXMuc2VnRHJhZ0xpc3RlbmVyID0gbmV3IERyYWdMaXN0ZW5lcih7XG5cdFx0XHRkcmFnU3RhcnQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRcdGlmIChkcmFnTGlzdGVuZXIuaXNUb3VjaCAmJiAhdmlldy5pc0V2ZW50U2VsZWN0ZWQoZXZlbnQpKSB7XG5cdFx0XHRcdFx0Ly8gaWYgbm90IHByZXZpb3VzbHkgc2VsZWN0ZWQsIHdpbGwgZmlyZSBhZnRlciBhIGRlbGF5LiB0aGVuLCBzZWxlY3QgdGhlIGV2ZW50XG5cdFx0XHRcdFx0dmlldy5zZWxlY3RFdmVudChldmVudCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRpbnRlcmFjdGlvbkVuZDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0X3RoaXMuc2VnRHJhZ0xpc3RlbmVyID0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBkcmFnTGlzdGVuZXI7XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgYmVmb3JlIGV2ZW50IHNlZ21lbnQgZHJhZ2dpbmcgc3RhcnRzXG5cdHNlZ0RyYWdTdGFydDogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdHRoaXMuaXNEcmFnZ2luZ1NlZyA9IHRydWU7XG5cdFx0dGhpcy52aWV3LnB1YmxpY2x5VHJpZ2dlcignZXZlbnREcmFnU3RhcnQnLCBzZWcuZWxbMF0sIHNlZy5ldmVudCwgZXYsIHt9KTsgLy8gbGFzdCBhcmd1bWVudCBpcyBqcXVpIGR1bW15XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgYWZ0ZXIgZXZlbnQgc2VnbWVudCBkcmFnZ2luZyBzdG9wc1xuXHRzZWdEcmFnU3RvcDogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdHRoaXMuaXNEcmFnZ2luZ1NlZyA9IGZhbHNlO1xuXHRcdHRoaXMudmlldy5wdWJsaWNseVRyaWdnZXIoJ2V2ZW50RHJhZ1N0b3AnLCBzZWcuZWxbMF0sIHNlZy5ldmVudCwgZXYsIHt9KTsgLy8gbGFzdCBhcmd1bWVudCBpcyBqcXVpIGR1bW15XG5cdH0sXG5cblxuXHQvLyBHaXZlbiB0aGUgc3BhbnMgYW4gZXZlbnQgZHJhZyBiZWdhbiwgYW5kIHRoZSBzcGFuIGV2ZW50IHdhcyBkcm9wcGVkLCBjYWxjdWxhdGVzIHRoZSBuZXcgem9uZWQgc3RhcnQvZW5kL2FsbERheVxuXHQvLyB2YWx1ZXMgZm9yIHRoZSBldmVudC4gU3ViY2xhc3NlcyBtYXkgb3ZlcnJpZGUgYW5kIHNldCBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYmUgdXNlZCBieSByZW5kZXJEcmFnLlxuXHQvLyBBIGZhbHN5IHJldHVybmVkIHZhbHVlIGluZGljYXRlcyBhbiBpbnZhbGlkIGRyb3AuXG5cdC8vIERPRVMgTk9UIGNvbnNpZGVyIG92ZXJsYXAvY29uc3RyYWludC5cblx0Y29tcHV0ZUV2ZW50RHJvcDogZnVuY3Rpb24oc3RhcnRTcGFuLCBlbmRTcGFuLCBldmVudCkge1xuXHRcdHZhciBjYWxlbmRhciA9IHRoaXMudmlldy5jYWxlbmRhcjtcblx0XHR2YXIgZHJhZ1N0YXJ0ID0gc3RhcnRTcGFuLnN0YXJ0O1xuXHRcdHZhciBkcmFnRW5kID0gZW5kU3Bhbi5zdGFydDtcblx0XHR2YXIgZGVsdGE7XG5cdFx0dmFyIGRyb3BMb2NhdGlvbjsgLy8gem9uZWQgZXZlbnQgZGF0ZSBwcm9wZXJ0aWVzXG5cblx0XHRpZiAoZHJhZ1N0YXJ0Lmhhc1RpbWUoKSA9PT0gZHJhZ0VuZC5oYXNUaW1lKCkpIHtcblx0XHRcdGRlbHRhID0gdGhpcy5kaWZmRGF0ZXMoZHJhZ0VuZCwgZHJhZ1N0YXJ0KTtcblxuXHRcdFx0Ly8gaWYgYW4gYWxsLWRheSBldmVudCB3YXMgaW4gYSB0aW1lZCBhcmVhIGFuZCBpdCB3YXMgZHJhZ2dlZCB0byBhIGRpZmZlcmVudCB0aW1lLFxuXHRcdFx0Ly8gZ3VhcmFudGVlIGFuIGVuZCBhbmQgYWRqdXN0IHN0YXJ0L2VuZCB0byBoYXZlIHRpbWVzXG5cdFx0XHRpZiAoZXZlbnQuYWxsRGF5ICYmIGR1cmF0aW9uSGFzVGltZShkZWx0YSkpIHtcblx0XHRcdFx0ZHJvcExvY2F0aW9uID0ge1xuXHRcdFx0XHRcdHN0YXJ0OiBldmVudC5zdGFydC5jbG9uZSgpLFxuXHRcdFx0XHRcdGVuZDogY2FsZW5kYXIuZ2V0RXZlbnRFbmQoZXZlbnQpLCAvLyB3aWxsIGJlIGFuIGFtYmlnIGRheVxuXHRcdFx0XHRcdGFsbERheTogZmFsc2UgLy8gZm9yIG5vcm1hbGl6ZUV2ZW50VGltZXNcblx0XHRcdFx0fTtcblx0XHRcdFx0Y2FsZW5kYXIubm9ybWFsaXplRXZlbnRUaW1lcyhkcm9wTG9jYXRpb24pO1xuXHRcdFx0fVxuXHRcdFx0Ly8gb3RoZXdpc2UsIHdvcmsgb2ZmIGV4aXN0aW5nIHZhbHVlc1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGRyb3BMb2NhdGlvbiA9IHBsdWNrRXZlbnREYXRlUHJvcHMoZXZlbnQpO1xuXHRcdFx0fVxuXG5cdFx0XHRkcm9wTG9jYXRpb24uc3RhcnQuYWRkKGRlbHRhKTtcblx0XHRcdGlmIChkcm9wTG9jYXRpb24uZW5kKSB7XG5cdFx0XHRcdGRyb3BMb2NhdGlvbi5lbmQuYWRkKGRlbHRhKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHQvLyBpZiBzd2l0Y2hpbmcgZnJvbSBkYXkgPC0+IHRpbWVkLCBzdGFydCBzaG91bGQgYmUgcmVzZXQgdG8gdGhlIGRyb3BwZWQgZGF0ZSwgYW5kIHRoZSBlbmQgY2xlYXJlZFxuXHRcdFx0ZHJvcExvY2F0aW9uID0ge1xuXHRcdFx0XHRzdGFydDogZHJhZ0VuZC5jbG9uZSgpLFxuXHRcdFx0XHRlbmQ6IG51bGwsIC8vIGVuZCBzaG91bGQgYmUgY2xlYXJlZFxuXHRcdFx0XHRhbGxEYXk6ICFkcmFnRW5kLmhhc1RpbWUoKVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZHJvcExvY2F0aW9uO1xuXHR9LFxuXG5cblx0Ly8gVXRpbGl0eSBmb3IgYXBwbHkgZHJhZ09wYWNpdHkgdG8gYSBqUXVlcnkgc2V0XG5cdGFwcGx5RHJhZ09wYWNpdHk6IGZ1bmN0aW9uKGVscykge1xuXHRcdHZhciBvcGFjaXR5ID0gdGhpcy52aWV3Lm9wdCgnZHJhZ09wYWNpdHknKTtcblxuXHRcdGlmIChvcGFjaXR5ICE9IG51bGwpIHtcblx0XHRcdGVscy5jc3MoJ29wYWNpdHknLCBvcGFjaXR5KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBFeHRlcm5hbCBFbGVtZW50IERyYWdnaW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBhIGpRdWVyeSBVSSBkcmFnIGlzIGluaXRpYXRlZCBhbnl3aGVyZSBpbiB0aGUgRE9NXG5cdGV4dGVybmFsRHJhZ1N0YXJ0OiBmdW5jdGlvbihldiwgdWkpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgZWw7XG5cdFx0dmFyIGFjY2VwdDtcblxuXHRcdGlmICh2aWV3Lm9wdCgnZHJvcHBhYmxlJykpIHsgLy8gb25seSBsaXN0ZW4gaWYgdGhpcyBzZXR0aW5nIGlzIG9uXG5cdFx0XHRlbCA9ICQoKHVpID8gdWkuaXRlbSA6IG51bGwpIHx8IGV2LnRhcmdldCk7XG5cblx0XHRcdC8vIFRlc3QgdGhhdCB0aGUgZHJhZ2dlZCBlbGVtZW50IHBhc3NlcyB0aGUgZHJvcEFjY2VwdCBzZWxlY3RvciBvciBmaWx0ZXIgZnVuY3Rpb24uXG5cdFx0XHQvLyBGWUksIHRoZSBkZWZhdWx0IGlzIFwiKlwiIChtYXRjaGVzIGFsbClcblx0XHRcdGFjY2VwdCA9IHZpZXcub3B0KCdkcm9wQWNjZXB0Jyk7XG5cdFx0XHRpZiAoJC5pc0Z1bmN0aW9uKGFjY2VwdCkgPyBhY2NlcHQuY2FsbChlbFswXSwgZWwpIDogZWwuaXMoYWNjZXB0KSkge1xuXHRcdFx0XHRpZiAoIXRoaXMuaXNEcmFnZ2luZ0V4dGVybmFsKSB7IC8vIHByZXZlbnQgZG91YmxlLWxpc3RlbmluZyBpZiBmaXJlZCB0d2ljZVxuXHRcdFx0XHRcdHRoaXMubGlzdGVuVG9FeHRlcm5hbERyYWcoZWwsIGV2LCB1aSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBDYWxsZWQgd2hlbiBhIGpRdWVyeSBVSSBkcmFnIHN0YXJ0cyBhbmQgaXQgbmVlZHMgdG8gYmUgbW9uaXRvcmVkIGZvciBkcm9wcGluZ1xuXHRsaXN0ZW5Ub0V4dGVybmFsRHJhZzogZnVuY3Rpb24oZWwsIGV2LCB1aSkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0dmFyIGNhbGVuZGFyID0gdGhpcy52aWV3LmNhbGVuZGFyO1xuXHRcdHZhciBtZXRhID0gZ2V0RHJhZ2dlZEVsTWV0YShlbCk7IC8vIGV4dHJhIGRhdGEgYWJvdXQgZXZlbnQgZHJvcCwgaW5jbHVkaW5nIHBvc3NpYmxlIGV2ZW50IHRvIGNyZWF0ZVxuXHRcdHZhciBkcm9wTG9jYXRpb247IC8vIGEgbnVsbCB2YWx1ZSBzaWduYWxzIGFuIHVuc3VjY2Vzc2Z1bCBkcmFnXG5cblx0XHQvLyBsaXN0ZW5lciB0aGF0IHRyYWNrcyBtb3VzZSBtb3ZlbWVudCBvdmVyIGRhdGUtYXNzb2NpYXRlZCBwaXhlbCByZWdpb25zXG5cdFx0dmFyIGRyYWdMaXN0ZW5lciA9IF90aGlzLmV4dGVybmFsRHJhZ0xpc3RlbmVyID0gbmV3IEhpdERyYWdMaXN0ZW5lcih0aGlzLCB7XG5cdFx0XHRpbnRlcmFjdGlvblN0YXJ0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0X3RoaXMuaXNEcmFnZ2luZ0V4dGVybmFsID0gdHJ1ZTtcblx0XHRcdH0sXG5cdFx0XHRoaXRPdmVyOiBmdW5jdGlvbihoaXQpIHtcblx0XHRcdFx0ZHJvcExvY2F0aW9uID0gX3RoaXMuY29tcHV0ZUV4dGVybmFsRHJvcChcblx0XHRcdFx0XHRoaXQuY29tcG9uZW50LmdldEhpdFNwYW4oaGl0KSwgLy8gc2luY2Ugd2UgYXJlIHF1ZXJ5aW5nIHRoZSBwYXJlbnQgdmlldywgbWlnaHQgbm90IGJlbG9uZyB0byB0aGlzIGdyaWRcblx0XHRcdFx0XHRtZXRhXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCAvLyBpbnZhbGlkIGhpdD9cblx0XHRcdFx0XHRkcm9wTG9jYXRpb24gJiZcblx0XHRcdFx0XHQhY2FsZW5kYXIuaXNFeHRlcm5hbFNwYW5BbGxvd2VkKF90aGlzLmV2ZW50VG9TcGFuKGRyb3BMb2NhdGlvbiksIGRyb3BMb2NhdGlvbiwgbWV0YS5ldmVudFByb3BzKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRkaXNhYmxlQ3Vyc29yKCk7XG5cdFx0XHRcdFx0ZHJvcExvY2F0aW9uID0gbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChkcm9wTG9jYXRpb24pIHtcblx0XHRcdFx0XHRfdGhpcy5yZW5kZXJEcmFnKGRyb3BMb2NhdGlvbik7IC8vIGNhbGxlZCB3aXRob3V0IGEgc2VnIHBhcmFtZXRlclxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0aGl0T3V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZHJvcExvY2F0aW9uID0gbnVsbDsgLy8gc2lnbmFsIHVuc3VjY2Vzc2Z1bFxuXHRcdFx0fSxcblx0XHRcdGhpdERvbmU6IGZ1bmN0aW9uKCkgeyAvLyBDYWxsZWQgYWZ0ZXIgYSBoaXRPdXQgT1IgYmVmb3JlIGEgZHJhZ0VuZFxuXHRcdFx0XHRlbmFibGVDdXJzb3IoKTtcblx0XHRcdFx0X3RoaXMudW5yZW5kZXJEcmFnKCk7XG5cdFx0XHR9LFxuXHRcdFx0aW50ZXJhY3Rpb25FbmQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRcdGlmIChkcm9wTG9jYXRpb24pIHsgLy8gZWxlbWVudCB3YXMgZHJvcHBlZCBvbiBhIHZhbGlkIGhpdFxuXHRcdFx0XHRcdF90aGlzLnZpZXcucmVwb3J0RXh0ZXJuYWxEcm9wKG1ldGEsIGRyb3BMb2NhdGlvbiwgZWwsIGV2LCB1aSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0X3RoaXMuaXNEcmFnZ2luZ0V4dGVybmFsID0gZmFsc2U7XG5cdFx0XHRcdF90aGlzLmV4dGVybmFsRHJhZ0xpc3RlbmVyID0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGRyYWdMaXN0ZW5lci5zdGFydERyYWcoZXYpOyAvLyBzdGFydCBsaXN0ZW5pbmcgaW1tZWRpYXRlbHlcblx0fSxcblxuXG5cdC8vIEdpdmVuIGEgaGl0IHRvIGJlIGRyb3BwZWQgdXBvbiwgYW5kIG1pc2MgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIGpxdWkgZHJhZyAoZ3VhcmFudGVlZCB0byBiZSBhIHBsYWluIG9iamVjdCksXG5cdC8vIHJldHVybnMgdGhlIHpvbmVkIHN0YXJ0L2VuZCBkYXRlcyBmb3IgdGhlIGV2ZW50IHRoYXQgd291bGQgcmVzdWx0IGZyb20gdGhlIGh5cG90aGV0aWNhbCBkcm9wLiBlbmQgbWlnaHQgYmUgbnVsbC5cblx0Ly8gUmV0dXJuaW5nIGEgbnVsbCB2YWx1ZSBzaWduYWxzIGFuIGludmFsaWQgZHJvcCBoaXQuXG5cdC8vIERPRVMgTk9UIGNvbnNpZGVyIG92ZXJsYXAvY29uc3RyYWludC5cblx0Y29tcHV0ZUV4dGVybmFsRHJvcDogZnVuY3Rpb24oc3BhbiwgbWV0YSkge1xuXHRcdHZhciBjYWxlbmRhciA9IHRoaXMudmlldy5jYWxlbmRhcjtcblx0XHR2YXIgZHJvcExvY2F0aW9uID0ge1xuXHRcdFx0c3RhcnQ6IGNhbGVuZGFyLmFwcGx5VGltZXpvbmUoc3Bhbi5zdGFydCksIC8vIHNpbXVsYXRlIGEgem9uZWQgZXZlbnQgc3RhcnQgZGF0ZVxuXHRcdFx0ZW5kOiBudWxsXG5cdFx0fTtcblxuXHRcdC8vIGlmIGRyb3BwZWQgb24gYW4gYWxsLWRheSBzcGFuLCBhbmQgZWxlbWVudCdzIG1ldGFkYXRhIHNwZWNpZmllZCBhIHRpbWUsIHNldCBpdFxuXHRcdGlmIChtZXRhLnN0YXJ0VGltZSAmJiAhZHJvcExvY2F0aW9uLnN0YXJ0Lmhhc1RpbWUoKSkge1xuXHRcdFx0ZHJvcExvY2F0aW9uLnN0YXJ0LnRpbWUobWV0YS5zdGFydFRpbWUpO1xuXHRcdH1cblxuXHRcdGlmIChtZXRhLmR1cmF0aW9uKSB7XG5cdFx0XHRkcm9wTG9jYXRpb24uZW5kID0gZHJvcExvY2F0aW9uLnN0YXJ0LmNsb25lKCkuYWRkKG1ldGEuZHVyYXRpb24pO1xuXHRcdH1cblxuXHRcdHJldHVybiBkcm9wTG9jYXRpb247XG5cdH0sXG5cblxuXG5cdC8qIERyYWcgUmVuZGVyaW5nIChmb3IgYm90aCBldmVudHMgYW5kIGFuIGV4dGVybmFsIGVsZW1lbnRzKVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IG9yIGV4dGVybmFsIGVsZW1lbnQgYmVpbmcgZHJhZ2dlZC5cblx0Ly8gYGRyb3BMb2NhdGlvbmAgY29udGFpbnMgaHlwb3RoZXRpY2FsIHN0YXJ0L2VuZC9hbGxEYXkgdmFsdWVzIHRoZSBldmVudCB3b3VsZCBoYXZlIGlmIGRyb3BwZWQuIGVuZCBjYW4gYmUgbnVsbC5cblx0Ly8gYHNlZ2AgaXMgdGhlIGludGVybmFsIHNlZ21lbnQgb2JqZWN0IHRoYXQgaXMgYmVpbmcgZHJhZ2dlZC4gSWYgZHJhZ2dpbmcgYW4gZXh0ZXJuYWwgZWxlbWVudCwgYHNlZ2AgaXMgbnVsbC5cblx0Ly8gQSB0cnV0aHkgcmV0dXJuZWQgdmFsdWUgaW5kaWNhdGVzIHRoaXMgbWV0aG9kIGhhcyByZW5kZXJlZCBhIGhlbHBlciBlbGVtZW50LlxuXHQvLyBNdXN0IHJldHVybiBlbGVtZW50cyB1c2VkIGZvciBhbnkgbW9jayBldmVudHMuXG5cdHJlbmRlckRyYWc6IGZ1bmN0aW9uKGRyb3BMb2NhdGlvbiwgc2VnKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2YgYW4gZXZlbnQgb3IgZXh0ZXJuYWwgZWxlbWVudCBiZWluZyBkcmFnZ2VkXG5cdHVucmVuZGVyRHJhZzogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0LyogUmVzaXppbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIENyZWF0ZXMgYSBsaXN0ZW5lciB0aGF0IHRyYWNrcyB0aGUgdXNlciBhcyB0aGV5IHJlc2l6ZSBhbiBldmVudCBzZWdtZW50LlxuXHQvLyBHZW5lcmljIGVub3VnaCB0byB3b3JrIHdpdGggYW55IHR5cGUgb2YgR3JpZC5cblx0YnVpbGRTZWdSZXNpemVMaXN0ZW5lcjogZnVuY3Rpb24oc2VnLCBpc1N0YXJ0KSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgY2FsZW5kYXIgPSB2aWV3LmNhbGVuZGFyO1xuXHRcdHZhciBlbCA9IHNlZy5lbDtcblx0XHR2YXIgZXZlbnQgPSBzZWcuZXZlbnQ7XG5cdFx0dmFyIGV2ZW50RW5kID0gY2FsZW5kYXIuZ2V0RXZlbnRFbmQoZXZlbnQpO1xuXHRcdHZhciBpc0RyYWdnaW5nO1xuXHRcdHZhciByZXNpemVMb2NhdGlvbjsgLy8gem9uZWQgZXZlbnQgZGF0ZSBwcm9wZXJ0aWVzLiBmYWxzeSBpZiBpbnZhbGlkIHJlc2l6ZVxuXG5cdFx0Ly8gVHJhY2tzIG1vdXNlIG1vdmVtZW50IG92ZXIgdGhlICpncmlkJ3MqIGNvb3JkaW5hdGUgbWFwXG5cdFx0dmFyIGRyYWdMaXN0ZW5lciA9IHRoaXMuc2VnUmVzaXplTGlzdGVuZXIgPSBuZXcgSGl0RHJhZ0xpc3RlbmVyKHRoaXMsIHtcblx0XHRcdHNjcm9sbDogdmlldy5vcHQoJ2RyYWdTY3JvbGwnKSxcblx0XHRcdHN1YmplY3RFbDogZWwsXG5cdFx0XHRpbnRlcmFjdGlvblN0YXJ0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aXNEcmFnZ2luZyA9IGZhbHNlO1xuXHRcdFx0fSxcblx0XHRcdGRyYWdTdGFydDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0aXNEcmFnZ2luZyA9IHRydWU7XG5cdFx0XHRcdF90aGlzLmhhbmRsZVNlZ01vdXNlb3V0KHNlZywgZXYpOyAvLyBlbnN1cmUgYSBtb3VzZW91dCBvbiB0aGUgbWFuaXB1bGF0ZWQgZXZlbnQgaGFzIGJlZW4gcmVwb3J0ZWRcblx0XHRcdFx0X3RoaXMuc2VnUmVzaXplU3RhcnQoc2VnLCBldik7XG5cdFx0XHR9LFxuXHRcdFx0aGl0T3ZlcjogZnVuY3Rpb24oaGl0LCBpc09yaWcsIG9yaWdIaXQpIHtcblx0XHRcdFx0dmFyIG9yaWdIaXRTcGFuID0gX3RoaXMuZ2V0SGl0U3BhbihvcmlnSGl0KTtcblx0XHRcdFx0dmFyIGhpdFNwYW4gPSBfdGhpcy5nZXRIaXRTcGFuKGhpdCk7XG5cblx0XHRcdFx0cmVzaXplTG9jYXRpb24gPSBpc1N0YXJ0ID9cblx0XHRcdFx0XHRfdGhpcy5jb21wdXRlRXZlbnRTdGFydFJlc2l6ZShvcmlnSGl0U3BhbiwgaGl0U3BhbiwgZXZlbnQpIDpcblx0XHRcdFx0XHRfdGhpcy5jb21wdXRlRXZlbnRFbmRSZXNpemUob3JpZ0hpdFNwYW4sIGhpdFNwYW4sIGV2ZW50KTtcblxuXHRcdFx0XHRpZiAocmVzaXplTG9jYXRpb24pIHtcblx0XHRcdFx0XHRpZiAoIWNhbGVuZGFyLmlzRXZlbnRTcGFuQWxsb3dlZChfdGhpcy5ldmVudFRvU3BhbihyZXNpemVMb2NhdGlvbiksIGV2ZW50KSkge1xuXHRcdFx0XHRcdFx0ZGlzYWJsZUN1cnNvcigpO1xuXHRcdFx0XHRcdFx0cmVzaXplTG9jYXRpb24gPSBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBubyBjaGFuZ2U/IChGWUksIGV2ZW50IGRhdGVzIG1pZ2h0IGhhdmUgem9uZXMpXG5cdFx0XHRcdFx0ZWxzZSBpZiAoXG5cdFx0XHRcdFx0XHRyZXNpemVMb2NhdGlvbi5zdGFydC5pc1NhbWUoZXZlbnQuc3RhcnQuY2xvbmUoKS5zdHJpcFpvbmUoKSkgJiZcblx0XHRcdFx0XHRcdHJlc2l6ZUxvY2F0aW9uLmVuZC5pc1NhbWUoZXZlbnRFbmQuY2xvbmUoKS5zdHJpcFpvbmUoKSlcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdHJlc2l6ZUxvY2F0aW9uID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAocmVzaXplTG9jYXRpb24pIHtcblx0XHRcdFx0XHR2aWV3LmhpZGVFdmVudChldmVudCk7XG5cdFx0XHRcdFx0X3RoaXMucmVuZGVyRXZlbnRSZXNpemUocmVzaXplTG9jYXRpb24sIHNlZyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRoaXRPdXQ6IGZ1bmN0aW9uKCkgeyAvLyBjYWxsZWQgYmVmb3JlIG1vdXNlIG1vdmVzIHRvIGEgZGlmZmVyZW50IGhpdCBPUiBtb3ZlZCBvdXQgb2YgYWxsIGhpdHNcblx0XHRcdFx0cmVzaXplTG9jYXRpb24gPSBudWxsO1xuXHRcdFx0XHR2aWV3LnNob3dFdmVudChldmVudCk7IC8vIGZvciB3aGVuIG91dC1vZi1ib3VuZHMuIHNob3cgb3JpZ2luYWxcblx0XHRcdH0sXG5cdFx0XHRoaXREb25lOiBmdW5jdGlvbigpIHsgLy8gcmVzZXRzIHRoZSByZW5kZXJpbmcgdG8gc2hvdyB0aGUgb3JpZ2luYWwgZXZlbnRcblx0XHRcdFx0X3RoaXMudW5yZW5kZXJFdmVudFJlc2l6ZSgpO1xuXHRcdFx0XHRlbmFibGVDdXJzb3IoKTtcblx0XHRcdH0sXG5cdFx0XHRpbnRlcmFjdGlvbkVuZDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0aWYgKGlzRHJhZ2dpbmcpIHtcblx0XHRcdFx0XHRfdGhpcy5zZWdSZXNpemVTdG9wKHNlZywgZXYpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHJlc2l6ZUxvY2F0aW9uKSB7IC8vIHZhbGlkIGRhdGUgdG8gcmVzaXplIHRvP1xuXHRcdFx0XHRcdC8vIG5vIG5lZWQgdG8gcmUtc2hvdyBvcmlnaW5hbCwgd2lsbCByZXJlbmRlciBhbGwgYW55d2F5cy4gZXNwIGltcG9ydGFudCBpZiBldmVudFJlbmRlcldhaXRcblx0XHRcdFx0XHR2aWV3LnJlcG9ydEV2ZW50UmVzaXplKGV2ZW50LCByZXNpemVMb2NhdGlvbiwgX3RoaXMubGFyZ2VVbml0LCBlbCwgZXYpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdHZpZXcuc2hvd0V2ZW50KGV2ZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRfdGhpcy5zZWdSZXNpemVMaXN0ZW5lciA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gZHJhZ0xpc3RlbmVyO1xuXHR9LFxuXG5cblx0Ly8gQ2FsbGVkIGJlZm9yZSBldmVudCBzZWdtZW50IHJlc2l6aW5nIHN0YXJ0c1xuXHRzZWdSZXNpemVTdGFydDogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdHRoaXMuaXNSZXNpemluZ1NlZyA9IHRydWU7XG5cdFx0dGhpcy52aWV3LnB1YmxpY2x5VHJpZ2dlcignZXZlbnRSZXNpemVTdGFydCcsIHNlZy5lbFswXSwgc2VnLmV2ZW50LCBldiwge30pOyAvLyBsYXN0IGFyZ3VtZW50IGlzIGpxdWkgZHVtbXlcblx0fSxcblxuXG5cdC8vIENhbGxlZCBhZnRlciBldmVudCBzZWdtZW50IHJlc2l6aW5nIHN0b3BzXG5cdHNlZ1Jlc2l6ZVN0b3A6IGZ1bmN0aW9uKHNlZywgZXYpIHtcblx0XHR0aGlzLmlzUmVzaXppbmdTZWcgPSBmYWxzZTtcblx0XHR0aGlzLnZpZXcucHVibGljbHlUcmlnZ2VyKCdldmVudFJlc2l6ZVN0b3AnLCBzZWcuZWxbMF0sIHNlZy5ldmVudCwgZXYsIHt9KTsgLy8gbGFzdCBhcmd1bWVudCBpcyBqcXVpIGR1bW15XG5cdH0sXG5cblxuXHQvLyBSZXR1cm5zIG5ldyBkYXRlLWluZm9ybWF0aW9uIGZvciBhbiBldmVudCBzZWdtZW50IGJlaW5nIHJlc2l6ZWQgZnJvbSBpdHMgc3RhcnRcblx0Y29tcHV0ZUV2ZW50U3RhcnRSZXNpemU6IGZ1bmN0aW9uKHN0YXJ0U3BhbiwgZW5kU3BhbiwgZXZlbnQpIHtcblx0XHRyZXR1cm4gdGhpcy5jb21wdXRlRXZlbnRSZXNpemUoJ3N0YXJ0Jywgc3RhcnRTcGFuLCBlbmRTcGFuLCBldmVudCk7XG5cdH0sXG5cblxuXHQvLyBSZXR1cm5zIG5ldyBkYXRlLWluZm9ybWF0aW9uIGZvciBhbiBldmVudCBzZWdtZW50IGJlaW5nIHJlc2l6ZWQgZnJvbSBpdHMgZW5kXG5cdGNvbXB1dGVFdmVudEVuZFJlc2l6ZTogZnVuY3Rpb24oc3RhcnRTcGFuLCBlbmRTcGFuLCBldmVudCkge1xuXHRcdHJldHVybiB0aGlzLmNvbXB1dGVFdmVudFJlc2l6ZSgnZW5kJywgc3RhcnRTcGFuLCBlbmRTcGFuLCBldmVudCk7XG5cdH0sXG5cblxuXHQvLyBSZXR1cm5zIG5ldyB6b25lZCBkYXRlIGluZm9ybWF0aW9uIGZvciBhbiBldmVudCBzZWdtZW50IGJlaW5nIHJlc2l6ZWQgZnJvbSBpdHMgc3RhcnQgT1IgZW5kXG5cdC8vIGB0eXBlYCBpcyBlaXRoZXIgJ3N0YXJ0JyBvciAnZW5kJy5cblx0Ly8gRE9FUyBOT1QgY29uc2lkZXIgb3ZlcmxhcC9jb25zdHJhaW50LlxuXHRjb21wdXRlRXZlbnRSZXNpemU6IGZ1bmN0aW9uKHR5cGUsIHN0YXJ0U3BhbiwgZW5kU3BhbiwgZXZlbnQpIHtcblx0XHR2YXIgY2FsZW5kYXIgPSB0aGlzLnZpZXcuY2FsZW5kYXI7XG5cdFx0dmFyIGRlbHRhID0gdGhpcy5kaWZmRGF0ZXMoZW5kU3Bhblt0eXBlXSwgc3RhcnRTcGFuW3R5cGVdKTtcblx0XHR2YXIgcmVzaXplTG9jYXRpb247IC8vIHpvbmVkIGV2ZW50IGRhdGUgcHJvcGVydGllc1xuXHRcdHZhciBkZWZhdWx0RHVyYXRpb247XG5cblx0XHQvLyBidWlsZCBvcmlnaW5hbCB2YWx1ZXMgdG8gd29yayBmcm9tLCBndWFyYW50ZWVpbmcgYSBzdGFydCBhbmQgZW5kXG5cdFx0cmVzaXplTG9jYXRpb24gPSB7XG5cdFx0XHRzdGFydDogZXZlbnQuc3RhcnQuY2xvbmUoKSxcblx0XHRcdGVuZDogY2FsZW5kYXIuZ2V0RXZlbnRFbmQoZXZlbnQpLFxuXHRcdFx0YWxsRGF5OiBldmVudC5hbGxEYXlcblx0XHR9O1xuXG5cdFx0Ly8gaWYgYW4gYWxsLWRheSBldmVudCB3YXMgaW4gYSB0aW1lZCBhcmVhIGFuZCB3YXMgcmVzaXplZCB0byBhIHRpbWUsIGFkanVzdCBzdGFydC9lbmQgdG8gaGF2ZSB0aW1lc1xuXHRcdGlmIChyZXNpemVMb2NhdGlvbi5hbGxEYXkgJiYgZHVyYXRpb25IYXNUaW1lKGRlbHRhKSkge1xuXHRcdFx0cmVzaXplTG9jYXRpb24uYWxsRGF5ID0gZmFsc2U7XG5cdFx0XHRjYWxlbmRhci5ub3JtYWxpemVFdmVudFRpbWVzKHJlc2l6ZUxvY2F0aW9uKTtcblx0XHR9XG5cblx0XHRyZXNpemVMb2NhdGlvblt0eXBlXS5hZGQoZGVsdGEpOyAvLyBhcHBseSBkZWx0YSB0byBzdGFydCBvciBlbmRcblxuXHRcdC8vIGlmIHRoZSBldmVudCB3YXMgY29tcHJlc3NlZCB0b28gc21hbGwsIGZpbmQgYSBuZXcgcmVhc29uYWJsZSBkdXJhdGlvbiBmb3IgaXRcblx0XHRpZiAoIXJlc2l6ZUxvY2F0aW9uLnN0YXJ0LmlzQmVmb3JlKHJlc2l6ZUxvY2F0aW9uLmVuZCkpIHtcblxuXHRcdFx0ZGVmYXVsdER1cmF0aW9uID1cblx0XHRcdFx0dGhpcy5taW5SZXNpemVEdXJhdGlvbiB8fCAvLyBUT0RPOiBoYWNrXG5cdFx0XHRcdChldmVudC5hbGxEYXkgP1xuXHRcdFx0XHRcdGNhbGVuZGFyLmRlZmF1bHRBbGxEYXlFdmVudER1cmF0aW9uIDpcblx0XHRcdFx0XHRjYWxlbmRhci5kZWZhdWx0VGltZWRFdmVudER1cmF0aW9uKTtcblxuXHRcdFx0aWYgKHR5cGUgPT0gJ3N0YXJ0JykgeyAvLyByZXNpemluZyB0aGUgc3RhcnQ/XG5cdFx0XHRcdHJlc2l6ZUxvY2F0aW9uLnN0YXJ0ID0gcmVzaXplTG9jYXRpb24uZW5kLmNsb25lKCkuc3VidHJhY3QoZGVmYXVsdER1cmF0aW9uKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgeyAvLyByZXNpemluZyB0aGUgZW5kP1xuXHRcdFx0XHRyZXNpemVMb2NhdGlvbi5lbmQgPSByZXNpemVMb2NhdGlvbi5zdGFydC5jbG9uZSgpLmFkZChkZWZhdWx0RHVyYXRpb24pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXNpemVMb2NhdGlvbjtcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhbiBldmVudCBiZWluZyByZXNpemVkLlxuXHQvLyBgcmFuZ2VgIGhhcyB0aGUgdXBkYXRlZCBkYXRlcyBvZiB0aGUgZXZlbnQuIGBzZWdgIGlzIHRoZSBvcmlnaW5hbCBzZWdtZW50IG9iamVjdCBpbnZvbHZlZCBpbiB0aGUgZHJhZy5cblx0Ly8gTXVzdCByZXR1cm4gZWxlbWVudHMgdXNlZCBmb3IgYW55IG1vY2sgZXZlbnRzLlxuXHRyZW5kZXJFdmVudFJlc2l6ZTogZnVuY3Rpb24ocmFuZ2UsIHNlZykge1xuXHRcdC8vIHN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IGJlaW5nIHJlc2l6ZWQuXG5cdHVucmVuZGVyRXZlbnRSZXNpemU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8qIFJlbmRlcmluZyBVdGlsc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQ29tcHV0ZSB0aGUgdGV4dCB0aGF0IHNob3VsZCBiZSBkaXNwbGF5ZWQgb24gYW4gZXZlbnQncyBlbGVtZW50LlxuXHQvLyBgcmFuZ2VgIGNhbiBiZSB0aGUgRXZlbnQgb2JqZWN0IGl0c2VsZiwgb3Igc29tZXRoaW5nIHJhbmdlLWxpa2UsIHdpdGggYXQgbGVhc3QgYSBgc3RhcnRgLlxuXHQvLyBJZiBldmVudCB0aW1lcyBhcmUgZGlzYWJsZWQsIG9yIHRoZSBldmVudCBoYXMgbm8gdGltZSwgd2lsbCByZXR1cm4gYSBibGFuayBzdHJpbmcuXG5cdC8vIElmIG5vdCBzcGVjaWZpZWQsIGZvcm1hdFN0ciB3aWxsIGRlZmF1bHQgdG8gdGhlIGV2ZW50VGltZUZvcm1hdCBzZXR0aW5nLFxuXHQvLyBhbmQgZGlzcGxheUVuZCB3aWxsIGRlZmF1bHQgdG8gdGhlIGRpc3BsYXlFdmVudEVuZCBzZXR0aW5nLlxuXHRnZXRFdmVudFRpbWVUZXh0OiBmdW5jdGlvbihyYW5nZSwgZm9ybWF0U3RyLCBkaXNwbGF5RW5kKSB7XG5cblx0XHRpZiAoZm9ybWF0U3RyID09IG51bGwpIHtcblx0XHRcdGZvcm1hdFN0ciA9IHRoaXMuZXZlbnRUaW1lRm9ybWF0O1xuXHRcdH1cblxuXHRcdGlmIChkaXNwbGF5RW5kID09IG51bGwpIHtcblx0XHRcdGRpc3BsYXlFbmQgPSB0aGlzLmRpc3BsYXlFdmVudEVuZDtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5kaXNwbGF5RXZlbnRUaW1lICYmIHJhbmdlLnN0YXJ0Lmhhc1RpbWUoKSkge1xuXHRcdFx0aWYgKGRpc3BsYXlFbmQgJiYgcmFuZ2UuZW5kKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnZpZXcuZm9ybWF0UmFuZ2UocmFuZ2UsIGZvcm1hdFN0cik7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHJhbmdlLnN0YXJ0LmZvcm1hdChmb3JtYXRTdHIpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiAnJztcblx0fSxcblxuXG5cdC8vIEdlbmVyaWMgdXRpbGl0eSBmb3IgZ2VuZXJhdGluZyB0aGUgSFRNTCBjbGFzc05hbWVzIGZvciBhbiBldmVudCBzZWdtZW50J3MgZWxlbWVudFxuXHRnZXRTZWdDbGFzc2VzOiBmdW5jdGlvbihzZWcsIGlzRHJhZ2dhYmxlLCBpc1Jlc2l6YWJsZSkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBjbGFzc2VzID0gW1xuXHRcdFx0J2ZjLWV2ZW50Jyxcblx0XHRcdHNlZy5pc1N0YXJ0ID8gJ2ZjLXN0YXJ0JyA6ICdmYy1ub3Qtc3RhcnQnLFxuXHRcdFx0c2VnLmlzRW5kID8gJ2ZjLWVuZCcgOiAnZmMtbm90LWVuZCdcblx0XHRdLmNvbmNhdCh0aGlzLmdldFNlZ0N1c3RvbUNsYXNzZXMoc2VnKSk7XG5cblx0XHRpZiAoaXNEcmFnZ2FibGUpIHtcblx0XHRcdGNsYXNzZXMucHVzaCgnZmMtZHJhZ2dhYmxlJyk7XG5cdFx0fVxuXHRcdGlmIChpc1Jlc2l6YWJsZSkge1xuXHRcdFx0Y2xhc3Nlcy5wdXNoKCdmYy1yZXNpemFibGUnKTtcblx0XHR9XG5cblx0XHQvLyBldmVudCBpcyBjdXJyZW50bHkgc2VsZWN0ZWQ/IGF0dGFjaCBhIGNsYXNzTmFtZS5cblx0XHRpZiAodmlldy5pc0V2ZW50U2VsZWN0ZWQoc2VnLmV2ZW50KSkge1xuXHRcdFx0Y2xhc3Nlcy5wdXNoKCdmYy1zZWxlY3RlZCcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzO1xuXHR9LFxuXG5cblx0Ly8gTGlzdCBvZiBjbGFzc2VzIHRoYXQgd2VyZSBkZWZpbmVkIGJ5IHRoZSBjYWxsZXIgb2YgdGhlIEFQSSBpbiBzb21lIHdheVxuXHRnZXRTZWdDdXN0b21DbGFzc2VzOiBmdW5jdGlvbihzZWcpIHtcblx0XHR2YXIgZXZlbnQgPSBzZWcuZXZlbnQ7XG5cblx0XHRyZXR1cm4gW10uY29uY2F0KFxuXHRcdFx0ZXZlbnQuY2xhc3NOYW1lLCAvLyBndWFyYW50ZWVkIHRvIGJlIGFuIGFycmF5XG5cdFx0XHRldmVudC5zb3VyY2UgPyBldmVudC5zb3VyY2UuY2xhc3NOYW1lIDogW11cblx0XHQpO1xuXHR9LFxuXG5cblx0Ly8gVXRpbGl0eSBmb3IgZ2VuZXJhdGluZyBldmVudCBza2luLXJlbGF0ZWQgQ1NTIHByb3BlcnRpZXNcblx0Z2V0U2VnU2tpbkNzczogZnVuY3Rpb24oc2VnKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdCdiYWNrZ3JvdW5kLWNvbG9yJzogdGhpcy5nZXRTZWdCYWNrZ3JvdW5kQ29sb3Ioc2VnKSxcblx0XHRcdCdib3JkZXItY29sb3InOiB0aGlzLmdldFNlZ0JvcmRlckNvbG9yKHNlZyksXG5cdFx0XHRjb2xvcjogdGhpcy5nZXRTZWdUZXh0Q29sb3Ioc2VnKVxuXHRcdH07XG5cdH0sXG5cblxuXHQvLyBRdWVyaWVzIGZvciBjYWxsZXItc3BlY2lmaWVkIGNvbG9yLCB0aGVuIGZhbGxzIGJhY2sgdG8gZGVmYXVsdFxuXHRnZXRTZWdCYWNrZ3JvdW5kQ29sb3I6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHJldHVybiBzZWcuZXZlbnQuYmFja2dyb3VuZENvbG9yIHx8XG5cdFx0XHRzZWcuZXZlbnQuY29sb3IgfHxcblx0XHRcdHRoaXMuZ2V0U2VnRGVmYXVsdEJhY2tncm91bmRDb2xvcihzZWcpO1xuXHR9LFxuXG5cblx0Z2V0U2VnRGVmYXVsdEJhY2tncm91bmRDb2xvcjogZnVuY3Rpb24oc2VnKSB7XG5cdFx0dmFyIHNvdXJjZSA9IHNlZy5ldmVudC5zb3VyY2UgfHwge307XG5cblx0XHRyZXR1cm4gc291cmNlLmJhY2tncm91bmRDb2xvciB8fFxuXHRcdFx0c291cmNlLmNvbG9yIHx8XG5cdFx0XHR0aGlzLnZpZXcub3B0KCdldmVudEJhY2tncm91bmRDb2xvcicpIHx8XG5cdFx0XHR0aGlzLnZpZXcub3B0KCdldmVudENvbG9yJyk7XG5cdH0sXG5cblxuXHQvLyBRdWVyaWVzIGZvciBjYWxsZXItc3BlY2lmaWVkIGNvbG9yLCB0aGVuIGZhbGxzIGJhY2sgdG8gZGVmYXVsdFxuXHRnZXRTZWdCb3JkZXJDb2xvcjogZnVuY3Rpb24oc2VnKSB7XG5cdFx0cmV0dXJuIHNlZy5ldmVudC5ib3JkZXJDb2xvciB8fFxuXHRcdFx0c2VnLmV2ZW50LmNvbG9yIHx8XG5cdFx0XHR0aGlzLmdldFNlZ0RlZmF1bHRCb3JkZXJDb2xvcihzZWcpO1xuXHR9LFxuXG5cblx0Z2V0U2VnRGVmYXVsdEJvcmRlckNvbG9yOiBmdW5jdGlvbihzZWcpIHtcblx0XHR2YXIgc291cmNlID0gc2VnLmV2ZW50LnNvdXJjZSB8fCB7fTtcblxuXHRcdHJldHVybiBzb3VyY2UuYm9yZGVyQ29sb3IgfHxcblx0XHRcdHNvdXJjZS5jb2xvciB8fFxuXHRcdFx0dGhpcy52aWV3Lm9wdCgnZXZlbnRCb3JkZXJDb2xvcicpIHx8XG5cdFx0XHR0aGlzLnZpZXcub3B0KCdldmVudENvbG9yJyk7XG5cdH0sXG5cblxuXHQvLyBRdWVyaWVzIGZvciBjYWxsZXItc3BlY2lmaWVkIGNvbG9yLCB0aGVuIGZhbGxzIGJhY2sgdG8gZGVmYXVsdFxuXHRnZXRTZWdUZXh0Q29sb3I6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHJldHVybiBzZWcuZXZlbnQudGV4dENvbG9yIHx8XG5cdFx0XHR0aGlzLmdldFNlZ0RlZmF1bHRUZXh0Q29sb3Ioc2VnKTtcblx0fSxcblxuXG5cdGdldFNlZ0RlZmF1bHRUZXh0Q29sb3I6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHZhciBzb3VyY2UgPSBzZWcuZXZlbnQuc291cmNlIHx8IHt9O1xuXG5cdFx0cmV0dXJuIHNvdXJjZS50ZXh0Q29sb3IgfHxcblx0XHRcdHRoaXMudmlldy5vcHQoJ2V2ZW50VGV4dENvbG9yJyk7XG5cdH0sXG5cblxuXHQvKiBDb252ZXJ0aW5nIGV2ZW50cyAtPiBldmVudFJhbmdlIC0+IGV2ZW50U3BhbiAtPiBldmVudFNlZ3Ncblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEdlbmVyYXRlcyBhbiBhcnJheSBvZiBzZWdtZW50cyBmb3IgdGhlIGdpdmVuIHNpbmdsZSBldmVudFxuXHQvLyBDYW4gYWNjZXB0IGFuIGV2ZW50IFwibG9jYXRpb25cIiBhcyB3ZWxsICh3aGljaCBvbmx5IGhhcyBzdGFydC9lbmQgYW5kIG5vIGFsbERheSlcblx0ZXZlbnRUb1NlZ3M6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0cmV0dXJuIHRoaXMuZXZlbnRzVG9TZWdzKFsgZXZlbnQgXSk7XG5cdH0sXG5cblxuXHRldmVudFRvU3BhbjogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRyZXR1cm4gdGhpcy5ldmVudFRvU3BhbnMoZXZlbnQpWzBdO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHNwYW5zIChhbHdheXMgdW56b25lZCkgZm9yIHRoZSBnaXZlbiBldmVudC5cblx0Ly8gRG9lcyBub3QgZG8gYW55IGludmVydGluZyBmb3IgaW52ZXJzZS1iYWNrZ3JvdW5kIGV2ZW50cy5cblx0Ly8gQ2FuIGFjY2VwdCBhbiBldmVudCBcImxvY2F0aW9uXCIgYXMgd2VsbCAod2hpY2ggb25seSBoYXMgc3RhcnQvZW5kIGFuZCBubyBhbGxEYXkpXG5cdGV2ZW50VG9TcGFuczogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgcmFuZ2UgPSB0aGlzLmV2ZW50VG9SYW5nZShldmVudCk7XG5cdFx0cmV0dXJuIHRoaXMuZXZlbnRSYW5nZVRvU3BhbnMocmFuZ2UsIGV2ZW50KTtcblx0fSxcblxuXG5cblx0Ly8gQ29udmVydHMgYW4gYXJyYXkgb2YgZXZlbnQgb2JqZWN0cyBpbnRvIGFuIGFycmF5IG9mIGV2ZW50IHNlZ21lbnQgb2JqZWN0cy5cblx0Ly8gQSBjdXN0b20gYHNlZ1NsaWNlRnVuY2AgbWF5IGJlIGdpdmVuIGZvciBhcmJpdHJhcmlseSBzbGljaW5nIHVwIGV2ZW50cy5cblx0Ly8gRG9lc24ndCBndWFyYW50ZWUgYW4gb3JkZXIgZm9yIHRoZSByZXN1bHRpbmcgYXJyYXkuXG5cdGV2ZW50c1RvU2VnczogZnVuY3Rpb24oYWxsRXZlbnRzLCBzZWdTbGljZUZ1bmMpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciBldmVudHNCeUlkID0gZ3JvdXBFdmVudHNCeUlkKGFsbEV2ZW50cyk7XG5cdFx0dmFyIHNlZ3MgPSBbXTtcblxuXHRcdCQuZWFjaChldmVudHNCeUlkLCBmdW5jdGlvbihpZCwgZXZlbnRzKSB7XG5cdFx0XHR2YXIgcmFuZ2VzID0gW107XG5cdFx0XHR2YXIgaTtcblxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRyYW5nZXMucHVzaChfdGhpcy5ldmVudFRvUmFuZ2UoZXZlbnRzW2ldKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGludmVyc2UtYmFja2dyb3VuZCBldmVudHMgKHV0aWxpemUgb25seSB0aGUgZmlyc3QgZXZlbnQgaW4gY2FsY3VsYXRpb25zKVxuXHRcdFx0aWYgKGlzSW52ZXJzZUJnRXZlbnQoZXZlbnRzWzBdKSkge1xuXHRcdFx0XHRyYW5nZXMgPSBfdGhpcy5pbnZlcnRSYW5nZXMocmFuZ2VzKTtcblxuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0c2Vncy5wdXNoLmFwcGx5KHNlZ3MsIC8vIGFwcGVuZCB0b1xuXHRcdFx0XHRcdFx0X3RoaXMuZXZlbnRSYW5nZVRvU2VncyhyYW5nZXNbaV0sIGV2ZW50c1swXSwgc2VnU2xpY2VGdW5jKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIG5vcm1hbCBldmVudCByYW5nZXNcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0c2Vncy5wdXNoLmFwcGx5KHNlZ3MsIC8vIGFwcGVuZCB0b1xuXHRcdFx0XHRcdFx0X3RoaXMuZXZlbnRSYW5nZVRvU2VncyhyYW5nZXNbaV0sIGV2ZW50c1tpXSwgc2VnU2xpY2VGdW5jKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBzZWdzO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSB1bnpvbmVkIHN0YXJ0L2VuZCBkYXRlcyBhbiBldmVudCBhcHBlYXJzIHRvIG9jY3VweVxuXHQvLyBDYW4gYWNjZXB0IGFuIGV2ZW50IFwibG9jYXRpb25cIiBhcyB3ZWxsICh3aGljaCBvbmx5IGhhcyBzdGFydC9lbmQgYW5kIG5vIGFsbERheSlcblx0ZXZlbnRUb1JhbmdlOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciBjYWxlbmRhciA9IHRoaXMudmlldy5jYWxlbmRhcjtcblx0XHR2YXIgc3RhcnQgPSBldmVudC5zdGFydC5jbG9uZSgpLnN0cmlwWm9uZSgpO1xuXHRcdHZhciBlbmQgPSAoXG5cdFx0XHRcdGV2ZW50LmVuZCA/XG5cdFx0XHRcdFx0ZXZlbnQuZW5kLmNsb25lKCkgOlxuXHRcdFx0XHRcdC8vIGRlcml2ZSB0aGUgZW5kIGZyb20gdGhlIHN0YXJ0IGFuZCBhbGxEYXkuIGNvbXB1dGUgYWxsRGF5IGlmIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdGNhbGVuZGFyLmdldERlZmF1bHRFdmVudEVuZChcblx0XHRcdFx0XHRcdGV2ZW50LmFsbERheSAhPSBudWxsID9cblx0XHRcdFx0XHRcdFx0ZXZlbnQuYWxsRGF5IDpcblx0XHRcdFx0XHRcdFx0IWV2ZW50LnN0YXJ0Lmhhc1RpbWUoKSxcblx0XHRcdFx0XHRcdGV2ZW50LnN0YXJ0XG5cdFx0XHRcdFx0KVxuXHRcdFx0KS5zdHJpcFpvbmUoKTtcblxuXHRcdC8vIGhhY2s6IGR5bmFtaWMgbG9jYWxlIGNoYW5nZSBmb3JnZXRzIHRvIHVwYXRlIHN0b3JlZCBldmVudCBsb2NhbGVkXG5cdFx0Y2FsZW5kYXIubG9jYWxpemVNb21lbnQoc3RhcnQpO1xuXHRcdGNhbGVuZGFyLmxvY2FsaXplTW9tZW50KGVuZCk7XG5cblx0XHRyZXR1cm4geyBzdGFydDogc3RhcnQsIGVuZDogZW5kIH07XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhbiBldmVudCdzIHJhbmdlICh1bnpvbmVkIHN0YXJ0L2VuZCksIGFuZCB0aGUgZXZlbnQgaXRzZWxmLFxuXHQvLyBzbGljZSBpbnRvIHNlZ21lbnRzICh1c2luZyB0aGUgc2VnU2xpY2VGdW5jIGZ1bmN0aW9uIGlmIHNwZWNpZmllZClcblx0ZXZlbnRSYW5nZVRvU2VnczogZnVuY3Rpb24ocmFuZ2UsIGV2ZW50LCBzZWdTbGljZUZ1bmMpIHtcblx0XHR2YXIgc3BhbnMgPSB0aGlzLmV2ZW50UmFuZ2VUb1NwYW5zKHJhbmdlLCBldmVudCk7XG5cdFx0dmFyIHNlZ3MgPSBbXTtcblx0XHR2YXIgaTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2Vncy5wdXNoLmFwcGx5KHNlZ3MsIC8vIGFwcGVuZCB0b1xuXHRcdFx0XHR0aGlzLmV2ZW50U3BhblRvU2VncyhzcGFuc1tpXSwgZXZlbnQsIHNlZ1NsaWNlRnVuYykpO1xuXHRcdH1cblxuXHRcdHJldHVybiBzZWdzO1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYW4gZXZlbnQncyB1bnpvbmVkIGRhdGUgcmFuZ2UsIHJldHVybiBhbiBhcnJheSBvZiBcInNwYW5cIiBvYmplY3RzLlxuXHQvLyBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZS5cblx0ZXZlbnRSYW5nZVRvU3BhbnM6IGZ1bmN0aW9uKHJhbmdlLCBldmVudCkge1xuXHRcdHJldHVybiBbICQuZXh0ZW5kKHt9LCByYW5nZSkgXTsgLy8gY29weSBpbnRvIGEgc2luZ2xlLWl0ZW0gYXJyYXlcblx0fSxcblxuXG5cdC8vIEdpdmVuIGFuIGV2ZW50J3Mgc3BhbiAodW56b25lZCBzdGFydC9lbmQgYW5kIG90aGVyIG1pc2MgZGF0YSksIGFuZCB0aGUgZXZlbnQgaXRzZWxmLFxuXHQvLyBzbGljZXMgaW50byBzZWdtZW50cyBhbmQgYXR0YWNoZXMgZXZlbnQtZGVyaXZlZCBwcm9wZXJ0aWVzIHRvIHRoZW0uXG5cdGV2ZW50U3BhblRvU2VnczogZnVuY3Rpb24oc3BhbiwgZXZlbnQsIHNlZ1NsaWNlRnVuYykge1xuXHRcdHZhciBzZWdzID0gc2VnU2xpY2VGdW5jID8gc2VnU2xpY2VGdW5jKHNwYW4pIDogdGhpcy5zcGFuVG9TZWdzKHNwYW4pO1xuXHRcdHZhciBpLCBzZWc7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2VnID0gc2Vnc1tpXTtcblx0XHRcdHNlZy5ldmVudCA9IGV2ZW50O1xuXHRcdFx0c2VnLmV2ZW50U3RhcnRNUyA9ICtzcGFuLnN0YXJ0OyAvLyBUT0RPOiBub3QgdGhlIGJlc3QgbmFtZSBhZnRlciBtYWtpbmcgc3BhbnMgdW56b25lZFxuXHRcdFx0c2VnLmV2ZW50RHVyYXRpb25NUyA9IHNwYW4uZW5kIC0gc3Bhbi5zdGFydDtcblx0XHR9XG5cblx0XHRyZXR1cm4gc2Vncztcblx0fSxcblxuXG5cdC8vIFByb2R1Y2VzIGEgbmV3IGFycmF5IG9mIHJhbmdlIG9iamVjdHMgdGhhdCB3aWxsIGNvdmVyIGFsbCB0aGUgdGltZSBOT1QgY292ZXJlZCBieSB0aGUgZ2l2ZW4gcmFuZ2VzLlxuXHQvLyBTSURFIEVGRkVDVDogd2lsbCBtdXRhdGUgdGhlIGdpdmVuIGFycmF5IGFuZCB3aWxsIHVzZSBpdHMgZGF0ZSByZWZlcmVuY2VzLlxuXHRpbnZlcnRSYW5nZXM6IGZ1bmN0aW9uKHJhbmdlcykge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciB2aWV3U3RhcnQgPSB2aWV3LnN0YXJ0LmNsb25lKCk7IC8vIG5lZWQgYSBjb3B5XG5cdFx0dmFyIHZpZXdFbmQgPSB2aWV3LmVuZC5jbG9uZSgpOyAvLyBuZWVkIGEgY29weVxuXHRcdHZhciBpbnZlcnNlUmFuZ2VzID0gW107XG5cdFx0dmFyIHN0YXJ0ID0gdmlld1N0YXJ0OyAvLyB0aGUgZW5kIG9mIHRoZSBwcmV2aW91cyByYW5nZS4gdGhlIHN0YXJ0IG9mIHRoZSBuZXcgcmFuZ2Vcblx0XHR2YXIgaSwgcmFuZ2U7XG5cblx0XHQvLyByYW5nZXMgbmVlZCB0byBiZSBpbiBvcmRlci4gcmVxdWlyZWQgZm9yIG91ciBkYXRlLXdhbGtpbmcgYWxnb3JpdGhtXG5cdFx0cmFuZ2VzLnNvcnQoY29tcGFyZVJhbmdlcyk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRyYW5nZSA9IHJhbmdlc1tpXTtcblxuXHRcdFx0Ly8gYWRkIHRoZSBzcGFuIG9mIHRpbWUgYmVmb3JlIHRoZSBldmVudCAoaWYgdGhlcmUgaXMgYW55KVxuXHRcdFx0aWYgKHJhbmdlLnN0YXJ0ID4gc3RhcnQpIHsgLy8gY29tcGFyZSBtaWxsaXNlY29uZCB0aW1lIChza2lwIGFueSBhbWJpZyBsb2dpYylcblx0XHRcdFx0aW52ZXJzZVJhbmdlcy5wdXNoKHtcblx0XHRcdFx0XHRzdGFydDogc3RhcnQsXG5cdFx0XHRcdFx0ZW5kOiByYW5nZS5zdGFydFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0c3RhcnQgPSByYW5nZS5lbmQ7XG5cdFx0fVxuXG5cdFx0Ly8gYWRkIHRoZSBzcGFuIG9mIHRpbWUgYWZ0ZXIgdGhlIGxhc3QgZXZlbnQgKGlmIHRoZXJlIGlzIGFueSlcblx0XHRpZiAoc3RhcnQgPCB2aWV3RW5kKSB7IC8vIGNvbXBhcmUgbWlsbGlzZWNvbmQgdGltZSAoc2tpcCBhbnkgYW1iaWcgbG9naWMpXG5cdFx0XHRpbnZlcnNlUmFuZ2VzLnB1c2goe1xuXHRcdFx0XHRzdGFydDogc3RhcnQsXG5cdFx0XHRcdGVuZDogdmlld0VuZFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGludmVyc2VSYW5nZXM7XG5cdH0sXG5cblxuXHRzb3J0RXZlbnRTZWdzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0c2Vncy5zb3J0KHByb3h5KHRoaXMsICdjb21wYXJlRXZlbnRTZWdzJykpO1xuXHR9LFxuXG5cblx0Ly8gQSBjbXAgZnVuY3Rpb24gZm9yIGRldGVybWluaW5nIHdoaWNoIHNlZ21lbnRzIHNob3VsZCB0YWtlIHZpc3VhbCBwcmlvcml0eVxuXHRjb21wYXJlRXZlbnRTZWdzOiBmdW5jdGlvbihzZWcxLCBzZWcyKSB7XG5cdFx0cmV0dXJuIHNlZzEuZXZlbnRTdGFydE1TIC0gc2VnMi5ldmVudFN0YXJ0TVMgfHwgLy8gZWFybGllciBldmVudHMgZ28gZmlyc3Rcblx0XHRcdHNlZzIuZXZlbnREdXJhdGlvbk1TIC0gc2VnMS5ldmVudER1cmF0aW9uTVMgfHwgLy8gdGllPyBsb25nZXIgZXZlbnRzIGdvIGZpcnN0XG5cdFx0XHRzZWcyLmV2ZW50LmFsbERheSAtIHNlZzEuZXZlbnQuYWxsRGF5IHx8IC8vIHRpZT8gcHV0IGFsbC1kYXkgZXZlbnRzIGZpcnN0IChib29sZWFucyBjYXN0IHRvIDAvMSlcblx0XHRcdGNvbXBhcmVCeUZpZWxkU3BlY3Moc2VnMS5ldmVudCwgc2VnMi5ldmVudCwgdGhpcy52aWV3LmV2ZW50T3JkZXJTcGVjcyk7XG5cdH1cblxufSk7XG5cblxuLyogVXRpbGl0aWVzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5mdW5jdGlvbiBwbHVja0V2ZW50RGF0ZVByb3BzKGV2ZW50KSB7XG5cdHJldHVybiB7XG5cdFx0c3RhcnQ6IGV2ZW50LnN0YXJ0LmNsb25lKCksXG5cdFx0ZW5kOiBldmVudC5lbmQgPyBldmVudC5lbmQuY2xvbmUoKSA6IG51bGwsXG5cdFx0YWxsRGF5OiBldmVudC5hbGxEYXkgLy8ga2VlcCBpdCB0aGUgc2FtZVxuXHR9O1xufVxuRkMucGx1Y2tFdmVudERhdGVQcm9wcyA9IHBsdWNrRXZlbnREYXRlUHJvcHM7XG5cblxuZnVuY3Rpb24gaXNCZ0V2ZW50KGV2ZW50KSB7IC8vIHJldHVybnMgdHJ1ZSBpZiBiYWNrZ3JvdW5kIE9SIGludmVyc2UtYmFja2dyb3VuZFxuXHR2YXIgcmVuZGVyaW5nID0gZ2V0RXZlbnRSZW5kZXJpbmcoZXZlbnQpO1xuXHRyZXR1cm4gcmVuZGVyaW5nID09PSAnYmFja2dyb3VuZCcgfHwgcmVuZGVyaW5nID09PSAnaW52ZXJzZS1iYWNrZ3JvdW5kJztcbn1cbkZDLmlzQmdFdmVudCA9IGlzQmdFdmVudDsgLy8gZXhwb3J0XG5cblxuZnVuY3Rpb24gaXNJbnZlcnNlQmdFdmVudChldmVudCkge1xuXHRyZXR1cm4gZ2V0RXZlbnRSZW5kZXJpbmcoZXZlbnQpID09PSAnaW52ZXJzZS1iYWNrZ3JvdW5kJztcbn1cblxuXG5mdW5jdGlvbiBnZXRFdmVudFJlbmRlcmluZyhldmVudCkge1xuXHRyZXR1cm4gZmlyc3REZWZpbmVkKChldmVudC5zb3VyY2UgfHwge30pLnJlbmRlcmluZywgZXZlbnQucmVuZGVyaW5nKTtcbn1cblxuXG5mdW5jdGlvbiBncm91cEV2ZW50c0J5SWQoZXZlbnRzKSB7XG5cdHZhciBldmVudHNCeUlkID0ge307XG5cdHZhciBpLCBldmVudDtcblxuXHRmb3IgKGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0ZXZlbnQgPSBldmVudHNbaV07XG5cdFx0KGV2ZW50c0J5SWRbZXZlbnQuX2lkXSB8fCAoZXZlbnRzQnlJZFtldmVudC5faWRdID0gW10pKS5wdXNoKGV2ZW50KTtcblx0fVxuXG5cdHJldHVybiBldmVudHNCeUlkO1xufVxuXG5cbi8vIEEgY21wIGZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB3aGljaCBub24taW52ZXJ0ZWQgXCJyYW5nZXNcIiAoc2VlIGFib3ZlKSBoYXBwZW4gZWFybGllclxuZnVuY3Rpb24gY29tcGFyZVJhbmdlcyhyYW5nZTEsIHJhbmdlMikge1xuXHRyZXR1cm4gcmFuZ2UxLnN0YXJ0IC0gcmFuZ2UyLnN0YXJ0OyAvLyBlYXJsaWVyIHJhbmdlcyBnbyBmaXJzdFxufVxuXG5cbi8qIEV4dGVybmFsLURyYWdnaW5nLUVsZW1lbnQgRGF0YVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8vIFJlcXVpcmUgYWxsIEhUTUw1IGRhdGEtKiBhdHRyaWJ1dGVzIHVzZWQgYnkgRnVsbENhbGVuZGFyIHRvIGhhdmUgdGhpcyBwcmVmaXguXG4vLyBBIHZhbHVlIG9mICcnIHdpbGwgcXVlcnkgYXR0cmlidXRlcyBsaWtlIGRhdGEtZXZlbnQuIEEgdmFsdWUgb2YgJ2ZjJyB3aWxsIHF1ZXJ5IGF0dHJpYnV0ZXMgbGlrZSBkYXRhLWZjLWV2ZW50LlxuRkMuZGF0YUF0dHJQcmVmaXggPSAnJztcblxuLy8gR2l2ZW4gYSBqUXVlcnkgZWxlbWVudCB0aGF0IG1pZ2h0IHJlcHJlc2VudCBhIGRyYWdnZWQgRnVsbENhbGVuZGFyIGV2ZW50LCByZXR1cm5zIGFuIGludGVybWVkaWF0ZSBkYXRhIHN0cnVjdHVyZVxuLy8gdG8gYmUgdXNlZCBmb3IgRXZlbnQgT2JqZWN0IGNyZWF0aW9uLlxuLy8gQSBkZWZpbmVkIGAuZXZlbnRQcm9wc2AsIGV2ZW4gd2hlbiBlbXB0eSwgaW5kaWNhdGVzIHRoYXQgYW4gZXZlbnQgc2hvdWxkIGJlIGNyZWF0ZWQuXG5mdW5jdGlvbiBnZXREcmFnZ2VkRWxNZXRhKGVsKSB7XG5cdHZhciBwcmVmaXggPSBGQy5kYXRhQXR0clByZWZpeDtcblx0dmFyIGV2ZW50UHJvcHM7IC8vIHByb3BlcnRpZXMgZm9yIGNyZWF0aW5nIHRoZSBldmVudCwgbm90IHJlbGF0ZWQgdG8gZGF0ZS90aW1lXG5cdHZhciBzdGFydFRpbWU7IC8vIGEgRHVyYXRpb25cblx0dmFyIGR1cmF0aW9uO1xuXHR2YXIgc3RpY2s7XG5cblx0aWYgKHByZWZpeCkgeyBwcmVmaXggKz0gJy0nOyB9XG5cdGV2ZW50UHJvcHMgPSBlbC5kYXRhKHByZWZpeCArICdldmVudCcpIHx8IG51bGw7XG5cblx0aWYgKGV2ZW50UHJvcHMpIHtcblx0XHRpZiAodHlwZW9mIGV2ZW50UHJvcHMgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRldmVudFByb3BzID0gJC5leHRlbmQoe30sIGV2ZW50UHJvcHMpOyAvLyBtYWtlIGEgY29weVxuXHRcdH1cblx0XHRlbHNlIHsgLy8gc29tZXRoaW5nIGxpa2UgMSBvciB0cnVlLiBzdGlsbCBzaWduYWwgZXZlbnQgY3JlYXRpb25cblx0XHRcdGV2ZW50UHJvcHMgPSB7fTtcblx0XHR9XG5cblx0XHQvLyBwbHVjayBzcGVjaWFsLWNhc2VkIGRhdGUvdGltZSBwcm9wZXJ0aWVzXG5cdFx0c3RhcnRUaW1lID0gZXZlbnRQcm9wcy5zdGFydDtcblx0XHRpZiAoc3RhcnRUaW1lID09IG51bGwpIHsgc3RhcnRUaW1lID0gZXZlbnRQcm9wcy50aW1lOyB9IC8vIGFjY2VwdCAndGltZScgYXMgd2VsbFxuXHRcdGR1cmF0aW9uID0gZXZlbnRQcm9wcy5kdXJhdGlvbjtcblx0XHRzdGljayA9IGV2ZW50UHJvcHMuc3RpY2s7XG5cdFx0ZGVsZXRlIGV2ZW50UHJvcHMuc3RhcnQ7XG5cdFx0ZGVsZXRlIGV2ZW50UHJvcHMudGltZTtcblx0XHRkZWxldGUgZXZlbnRQcm9wcy5kdXJhdGlvbjtcblx0XHRkZWxldGUgZXZlbnRQcm9wcy5zdGljaztcblx0fVxuXG5cdC8vIGZhbGxiYWNrIHRvIHN0YW5kYWxvbmUgYXR0cmlidXRlIHZhbHVlcyBmb3IgZWFjaCBvZiB0aGUgZGF0ZS90aW1lIHByb3BlcnRpZXNcblx0aWYgKHN0YXJ0VGltZSA9PSBudWxsKSB7IHN0YXJ0VGltZSA9IGVsLmRhdGEocHJlZml4ICsgJ3N0YXJ0Jyk7IH1cblx0aWYgKHN0YXJ0VGltZSA9PSBudWxsKSB7IHN0YXJ0VGltZSA9IGVsLmRhdGEocHJlZml4ICsgJ3RpbWUnKTsgfSAvLyBhY2NlcHQgJ3RpbWUnIGFzIHdlbGxcblx0aWYgKGR1cmF0aW9uID09IG51bGwpIHsgZHVyYXRpb24gPSBlbC5kYXRhKHByZWZpeCArICdkdXJhdGlvbicpOyB9XG5cdGlmIChzdGljayA9PSBudWxsKSB7IHN0aWNrID0gZWwuZGF0YShwcmVmaXggKyAnc3RpY2snKTsgfVxuXG5cdC8vIG1hc3NhZ2UgaW50byBjb3JyZWN0IGRhdGEgdHlwZXNcblx0c3RhcnRUaW1lID0gc3RhcnRUaW1lICE9IG51bGwgPyBtb21lbnQuZHVyYXRpb24oc3RhcnRUaW1lKSA6IG51bGw7XG5cdGR1cmF0aW9uID0gZHVyYXRpb24gIT0gbnVsbCA/IG1vbWVudC5kdXJhdGlvbihkdXJhdGlvbikgOiBudWxsO1xuXHRzdGljayA9IEJvb2xlYW4oc3RpY2spO1xuXG5cdHJldHVybiB7IGV2ZW50UHJvcHM6IGV2ZW50UHJvcHMsIHN0YXJ0VGltZTogc3RhcnRUaW1lLCBkdXJhdGlvbjogZHVyYXRpb24sIHN0aWNrOiBzdGljayB9O1xufVxuXG5cbjs7XG5cbi8qXG5BIHNldCBvZiByZW5kZXJpbmcgYW5kIGRhdGUtcmVsYXRlZCBtZXRob2RzIGZvciBhIHZpc3VhbCBjb21wb25lbnQgY29tcHJpc2VkIG9mIG9uZSBvciBtb3JlIHJvd3Mgb2YgZGF5IGNvbHVtbnMuXG5QcmVyZXF1aXNpdGU6IHRoZSBvYmplY3QgYmVpbmcgbWl4ZWQgaW50byBuZWVkcyB0byBiZSBhICpHcmlkKlxuKi9cbnZhciBEYXlUYWJsZU1peGluID0gRkMuRGF5VGFibGVNaXhpbiA9IHtcblxuXHRicmVha09uV2Vla3M6IGZhbHNlLCAvLyBzaG91bGQgY3JlYXRlIGEgbmV3IHJvdyBmb3IgZWFjaCB3ZWVrP1xuXHRkYXlEYXRlczogbnVsbCwgLy8gd2hvbGUtZGF5IGRhdGVzIGZvciBlYWNoIGNvbHVtbi4gbGVmdCB0byByaWdodFxuXHRkYXlJbmRpY2VzOiBudWxsLCAvLyBmb3IgZWFjaCBkYXkgZnJvbSBzdGFydCwgdGhlIG9mZnNldFxuXHRkYXlzUGVyUm93OiBudWxsLFxuXHRyb3dDbnQ6IG51bGwsXG5cdGNvbENudDogbnVsbCxcblx0Y29sSGVhZEZvcm1hdDogbnVsbCxcblxuXG5cdC8vIFBvcHVsYXRlcyBpbnRlcm5hbCB2YXJpYWJsZXMgdXNlZCBmb3IgZGF0ZSBjYWxjdWxhdGlvbiBhbmQgcmVuZGVyaW5nXG5cdHVwZGF0ZURheVRhYmxlOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgZGF0ZSA9IHRoaXMuc3RhcnQuY2xvbmUoKTtcblx0XHR2YXIgZGF5SW5kZXggPSAtMTtcblx0XHR2YXIgZGF5SW5kaWNlcyA9IFtdO1xuXHRcdHZhciBkYXlEYXRlcyA9IFtdO1xuXHRcdHZhciBkYXlzUGVyUm93O1xuXHRcdHZhciBmaXJzdERheTtcblx0XHR2YXIgcm93Q250O1xuXG5cdFx0d2hpbGUgKGRhdGUuaXNCZWZvcmUodGhpcy5lbmQpKSB7IC8vIGxvb3AgZWFjaCBkYXkgZnJvbSBzdGFydCB0byBlbmRcblx0XHRcdGlmICh2aWV3LmlzSGlkZGVuRGF5KGRhdGUpKSB7XG5cdFx0XHRcdGRheUluZGljZXMucHVzaChkYXlJbmRleCArIDAuNSk7IC8vIG1hcmsgdGhhdCBpdCdzIGJldHdlZW4gaW5kaWNlc1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGRheUluZGV4Kys7XG5cdFx0XHRcdGRheUluZGljZXMucHVzaChkYXlJbmRleCk7XG5cdFx0XHRcdGRheURhdGVzLnB1c2goZGF0ZS5jbG9uZSgpKTtcblx0XHRcdH1cblx0XHRcdGRhdGUuYWRkKDEsICdkYXlzJyk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuYnJlYWtPbldlZWtzKSB7XG5cdFx0XHQvLyBjb3VudCBjb2x1bW5zIHVudGlsIHRoZSBkYXktb2Ytd2VlayByZXBlYXRzXG5cdFx0XHRmaXJzdERheSA9IGRheURhdGVzWzBdLmRheSgpO1xuXHRcdFx0Zm9yIChkYXlzUGVyUm93ID0gMTsgZGF5c1BlclJvdyA8IGRheURhdGVzLmxlbmd0aDsgZGF5c1BlclJvdysrKSB7XG5cdFx0XHRcdGlmIChkYXlEYXRlc1tkYXlzUGVyUm93XS5kYXkoKSA9PSBmaXJzdERheSkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyb3dDbnQgPSBNYXRoLmNlaWwoZGF5RGF0ZXMubGVuZ3RoIC8gZGF5c1BlclJvdyk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cm93Q250ID0gMTtcblx0XHRcdGRheXNQZXJSb3cgPSBkYXlEYXRlcy5sZW5ndGg7XG5cdFx0fVxuXG5cdFx0dGhpcy5kYXlEYXRlcyA9IGRheURhdGVzO1xuXHRcdHRoaXMuZGF5SW5kaWNlcyA9IGRheUluZGljZXM7XG5cdFx0dGhpcy5kYXlzUGVyUm93ID0gZGF5c1BlclJvdztcblx0XHR0aGlzLnJvd0NudCA9IHJvd0NudDtcblxuXHRcdHRoaXMudXBkYXRlRGF5VGFibGVDb2xzKCk7XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyBhbmQgYXNzaWduZWQgdGhlIGNvbENudCBwcm9wZXJ0eSBhbmQgdXBkYXRlcyBhbnkgb3B0aW9ucyB0aGF0IG1heSBiZSBjb21wdXRlZCBmcm9tIGl0XG5cdHVwZGF0ZURheVRhYmxlQ29sczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5jb2xDbnQgPSB0aGlzLmNvbXB1dGVDb2xDbnQoKTtcblx0XHR0aGlzLmNvbEhlYWRGb3JtYXQgPSB0aGlzLnZpZXcub3B0KCdjb2x1bW5Gb3JtYXQnKSB8fCB0aGlzLmNvbXB1dGVDb2xIZWFkRm9ybWF0KCk7XG5cdH0sXG5cblxuXHQvLyBEZXRlcm1pbmVzIGhvdyBtYW55IGNvbHVtbnMgdGhlcmUgc2hvdWxkIGJlIGluIHRoZSB0YWJsZVxuXHRjb21wdXRlQ29sQ250OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kYXlzUGVyUm93O1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgdGhlIGFtYmlndW91c2x5LXRpbWVkIG1vbWVudCBmb3IgdGhlIGdpdmVuIGNlbGxcblx0Z2V0Q2VsbERhdGU6IGZ1bmN0aW9uKHJvdywgY29sKSB7XG5cdFx0cmV0dXJuIHRoaXMuZGF5RGF0ZXNbXG5cdFx0XHRcdHRoaXMuZ2V0Q2VsbERheUluZGV4KHJvdywgY29sKVxuXHRcdFx0XS5jbG9uZSgpO1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgdGhlIGFtYmlndW91c2x5LXRpbWVkIGRhdGUgcmFuZ2UgZm9yIHRoZSBnaXZlbiBjZWxsXG5cdGdldENlbGxSYW5nZTogZnVuY3Rpb24ocm93LCBjb2wpIHtcblx0XHR2YXIgc3RhcnQgPSB0aGlzLmdldENlbGxEYXRlKHJvdywgY29sKTtcblx0XHR2YXIgZW5kID0gc3RhcnQuY2xvbmUoKS5hZGQoMSwgJ2RheXMnKTtcblxuXHRcdHJldHVybiB7IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQgfTtcblx0fSxcblxuXG5cdC8vIFJldHVybnMgdGhlIG51bWJlciBvZiBkYXkgY2VsbHMsIGNocm9ub2xvZ2ljYWxseSwgZnJvbSB0aGUgZmlyc3Qgb2YgdGhlIGdyaWQgKDAtYmFzZWQpXG5cdGdldENlbGxEYXlJbmRleDogZnVuY3Rpb24ocm93LCBjb2wpIHtcblx0XHRyZXR1cm4gcm93ICogdGhpcy5kYXlzUGVyUm93ICsgdGhpcy5nZXRDb2xEYXlJbmRleChjb2wpO1xuXHR9LFxuXG5cblx0Ly8gUmV0dXJucyB0aGUgbnVtbmVyIG9mIGRheSBjZWxscywgY2hyb25vbG9naWNhbGx5LCBmcm9tIHRoZSBmaXJzdCBjZWxsIGluICphbnkgZ2l2ZW4gcm93KlxuXHRnZXRDb2xEYXlJbmRleDogZnVuY3Rpb24oY29sKSB7XG5cdFx0aWYgKHRoaXMuaXNSVEwpIHtcblx0XHRcdHJldHVybiB0aGlzLmNvbENudCAtIDEgLSBjb2w7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuIGNvbDtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhIGRhdGUsIHJldHVybnMgaXRzIGNocm9ub2xvY2lhbCBjZWxsLWluZGV4IGZyb20gdGhlIGZpcnN0IGNlbGwgb2YgdGhlIGdyaWQuXG5cdC8vIElmIHRoZSBkYXRlIGxpZXMgYmV0d2VlbiBjZWxscyAoYmVjYXVzZSBvZiBoaWRkZW5EYXlzKSwgcmV0dXJucyBhIGZsb2F0aW5nLXBvaW50IHZhbHVlIGJldHdlZW4gb2Zmc2V0cy5cblx0Ly8gSWYgYmVmb3JlIHRoZSBmaXJzdCBvZmZzZXQsIHJldHVybnMgYSBuZWdhdGl2ZSBudW1iZXIuXG5cdC8vIElmIGFmdGVyIHRoZSBsYXN0IG9mZnNldCwgcmV0dXJucyBhbiBvZmZzZXQgcGFzdCB0aGUgbGFzdCBjZWxsIG9mZnNldC5cblx0Ly8gT25seSB3b3JrcyBmb3IgKnN0YXJ0KiBkYXRlcyBvZiBjZWxscy4gV2lsbCBub3Qgd29yayBmb3IgZXhjbHVzaXZlIGVuZCBkYXRlcyBmb3IgY2VsbHMuXG5cdGdldERhdGVEYXlJbmRleDogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdHZhciBkYXlJbmRpY2VzID0gdGhpcy5kYXlJbmRpY2VzO1xuXHRcdHZhciBkYXlPZmZzZXQgPSBkYXRlLmRpZmYodGhpcy5zdGFydCwgJ2RheXMnKTtcblxuXHRcdGlmIChkYXlPZmZzZXQgPCAwKSB7XG5cdFx0XHRyZXR1cm4gZGF5SW5kaWNlc1swXSAtIDE7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGRheU9mZnNldCA+PSBkYXlJbmRpY2VzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIGRheUluZGljZXNbZGF5SW5kaWNlcy5sZW5ndGggLSAxXSArIDE7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuIGRheUluZGljZXNbZGF5T2Zmc2V0XTtcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBPcHRpb25zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBDb21wdXRlcyBhIGRlZmF1bHQgY29sdW1uIGhlYWRlciBmb3JtYXR0aW5nIHN0cmluZyBpZiBgY29sRm9ybWF0YCBpcyBub3QgZXhwbGljaXRseSBkZWZpbmVkXG5cdGNvbXB1dGVDb2xIZWFkRm9ybWF0OiBmdW5jdGlvbigpIHtcblx0XHQvLyBpZiBtb3JlIHRoYW4gb25lIHdlZWsgcm93LCBvciBpZiB0aGVyZSBhcmUgYSBsb3Qgb2YgY29sdW1ucyB3aXRoIG5vdCBtdWNoIHNwYWNlLFxuXHRcdC8vIHB1dCBqdXN0IHRoZSBkYXkgbnVtYmVycyB3aWxsIGJlIGluIGVhY2ggY2VsbFxuXHRcdGlmICh0aGlzLnJvd0NudCA+IDEgfHwgdGhpcy5jb2xDbnQgPiAxMCkge1xuXHRcdFx0cmV0dXJuICdkZGQnOyAvLyBcIlNhdFwiXG5cdFx0fVxuXHRcdC8vIG11bHRpcGxlIGRheXMsIHNvIGZ1bGwgc2luZ2xlIGRhdGUgc3RyaW5nIFdPTidUIGJlIGluIHRpdGxlIHRleHRcblx0XHRlbHNlIGlmICh0aGlzLmNvbENudCA+IDEpIHtcblx0XHRcdHJldHVybiB0aGlzLnZpZXcub3B0KCdkYXlPZk1vbnRoRm9ybWF0Jyk7IC8vIFwiU2F0IDEyLzEwXCJcblx0XHR9XG5cdFx0Ly8gc2luZ2xlIGRheSwgc28gZnVsbCBzaW5nbGUgZGF0ZSBzdHJpbmcgd2lsbCBwcm9iYWJseSBiZSBpbiB0aXRsZSB0ZXh0XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gJ2RkZGQnOyAvLyBcIlNhdHVyZGF5XCJcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBTbGljaW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBTbGljZXMgdXAgYSBkYXRlIHJhbmdlIGludG8gYSBzZWdtZW50IGZvciBldmVyeSB3ZWVrLXJvdyBpdCBpbnRlcnNlY3RzIHdpdGhcblx0c2xpY2VSYW5nZUJ5Um93OiBmdW5jdGlvbihyYW5nZSkge1xuXHRcdHZhciBkYXlzUGVyUm93ID0gdGhpcy5kYXlzUGVyUm93O1xuXHRcdHZhciBub3JtYWxSYW5nZSA9IHRoaXMudmlldy5jb21wdXRlRGF5UmFuZ2UocmFuZ2UpOyAvLyBtYWtlIHdob2xlLWRheSByYW5nZSwgY29uc2lkZXJpbmcgbmV4dERheVRocmVzaG9sZFxuXHRcdHZhciByYW5nZUZpcnN0ID0gdGhpcy5nZXREYXRlRGF5SW5kZXgobm9ybWFsUmFuZ2Uuc3RhcnQpOyAvLyBpbmNsdXNpdmUgZmlyc3QgaW5kZXhcblx0XHR2YXIgcmFuZ2VMYXN0ID0gdGhpcy5nZXREYXRlRGF5SW5kZXgobm9ybWFsUmFuZ2UuZW5kLmNsb25lKCkuc3VidHJhY3QoMSwgJ2RheXMnKSk7IC8vIGluY2x1c2l2ZSBsYXN0IGluZGV4XG5cdFx0dmFyIHNlZ3MgPSBbXTtcblx0XHR2YXIgcm93O1xuXHRcdHZhciByb3dGaXJzdCwgcm93TGFzdDsgLy8gaW5jbHVzaXZlIGRheS1pbmRleCByYW5nZSBmb3IgY3VycmVudCByb3dcblx0XHR2YXIgc2VnRmlyc3QsIHNlZ0xhc3Q7IC8vIGluY2x1c2l2ZSBkYXktaW5kZXggcmFuZ2UgZm9yIHNlZ21lbnRcblxuXHRcdGZvciAocm93ID0gMDsgcm93IDwgdGhpcy5yb3dDbnQ7IHJvdysrKSB7XG5cdFx0XHRyb3dGaXJzdCA9IHJvdyAqIGRheXNQZXJSb3c7XG5cdFx0XHRyb3dMYXN0ID0gcm93Rmlyc3QgKyBkYXlzUGVyUm93IC0gMTtcblxuXHRcdFx0Ly8gaW50ZXJzZWN0IHNlZ21lbnQncyBvZmZzZXQgcmFuZ2Ugd2l0aCB0aGUgcm93J3Ncblx0XHRcdHNlZ0ZpcnN0ID0gTWF0aC5tYXgocmFuZ2VGaXJzdCwgcm93Rmlyc3QpO1xuXHRcdFx0c2VnTGFzdCA9IE1hdGgubWluKHJhbmdlTGFzdCwgcm93TGFzdCk7XG5cblx0XHRcdC8vIGRlYWwgd2l0aCBpbi1iZXR3ZWVuIGluZGljZXNcblx0XHRcdHNlZ0ZpcnN0ID0gTWF0aC5jZWlsKHNlZ0ZpcnN0KTsgLy8gaW4tYmV0d2VlbiBzdGFydHMgcm91bmQgdG8gbmV4dCBjZWxsXG5cdFx0XHRzZWdMYXN0ID0gTWF0aC5mbG9vcihzZWdMYXN0KTsgLy8gaW4tYmV0d2VlbiBlbmRzIHJvdW5kIHRvIHByZXYgY2VsbFxuXG5cdFx0XHRpZiAoc2VnRmlyc3QgPD0gc2VnTGFzdCkgeyAvLyB3YXMgdGhlcmUgYW55IGludGVyc2VjdGlvbiB3aXRoIHRoZSBjdXJyZW50IHJvdz9cblx0XHRcdFx0c2Vncy5wdXNoKHtcblx0XHRcdFx0XHRyb3c6IHJvdyxcblxuXHRcdFx0XHRcdC8vIG5vcm1hbGl6ZSB0byBzdGFydCBvZiByb3dcblx0XHRcdFx0XHRmaXJzdFJvd0RheUluZGV4OiBzZWdGaXJzdCAtIHJvd0ZpcnN0LFxuXHRcdFx0XHRcdGxhc3RSb3dEYXlJbmRleDogc2VnTGFzdCAtIHJvd0ZpcnN0LFxuXG5cdFx0XHRcdFx0Ly8gbXVzdCBiZSBtYXRjaGluZyBpbnRlZ2VycyB0byBiZSB0aGUgc2VnbWVudCdzIHN0YXJ0L2VuZFxuXHRcdFx0XHRcdGlzU3RhcnQ6IHNlZ0ZpcnN0ID09PSByYW5nZUZpcnN0LFxuXHRcdFx0XHRcdGlzRW5kOiBzZWdMYXN0ID09PSByYW5nZUxhc3Rcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblxuXHQvLyBTbGljZXMgdXAgYSBkYXRlIHJhbmdlIGludG8gYSBzZWdtZW50IGZvciBldmVyeSBkYXktY2VsbCBpdCBpbnRlcnNlY3RzIHdpdGguXG5cdC8vIFRPRE86IG1ha2UgbW9yZSBEUlkgd2l0aCBzbGljZVJhbmdlQnlSb3cgc29tZWhvdy5cblx0c2xpY2VSYW5nZUJ5RGF5OiBmdW5jdGlvbihyYW5nZSkge1xuXHRcdHZhciBkYXlzUGVyUm93ID0gdGhpcy5kYXlzUGVyUm93O1xuXHRcdHZhciBub3JtYWxSYW5nZSA9IHRoaXMudmlldy5jb21wdXRlRGF5UmFuZ2UocmFuZ2UpOyAvLyBtYWtlIHdob2xlLWRheSByYW5nZSwgY29uc2lkZXJpbmcgbmV4dERheVRocmVzaG9sZFxuXHRcdHZhciByYW5nZUZpcnN0ID0gdGhpcy5nZXREYXRlRGF5SW5kZXgobm9ybWFsUmFuZ2Uuc3RhcnQpOyAvLyBpbmNsdXNpdmUgZmlyc3QgaW5kZXhcblx0XHR2YXIgcmFuZ2VMYXN0ID0gdGhpcy5nZXREYXRlRGF5SW5kZXgobm9ybWFsUmFuZ2UuZW5kLmNsb25lKCkuc3VidHJhY3QoMSwgJ2RheXMnKSk7IC8vIGluY2x1c2l2ZSBsYXN0IGluZGV4XG5cdFx0dmFyIHNlZ3MgPSBbXTtcblx0XHR2YXIgcm93O1xuXHRcdHZhciByb3dGaXJzdCwgcm93TGFzdDsgLy8gaW5jbHVzaXZlIGRheS1pbmRleCByYW5nZSBmb3IgY3VycmVudCByb3dcblx0XHR2YXIgaTtcblx0XHR2YXIgc2VnRmlyc3QsIHNlZ0xhc3Q7IC8vIGluY2x1c2l2ZSBkYXktaW5kZXggcmFuZ2UgZm9yIHNlZ21lbnRcblxuXHRcdGZvciAocm93ID0gMDsgcm93IDwgdGhpcy5yb3dDbnQ7IHJvdysrKSB7XG5cdFx0XHRyb3dGaXJzdCA9IHJvdyAqIGRheXNQZXJSb3c7XG5cdFx0XHRyb3dMYXN0ID0gcm93Rmlyc3QgKyBkYXlzUGVyUm93IC0gMTtcblxuXHRcdFx0Zm9yIChpID0gcm93Rmlyc3Q7IGkgPD0gcm93TGFzdDsgaSsrKSB7XG5cblx0XHRcdFx0Ly8gaW50ZXJzZWN0IHNlZ21lbnQncyBvZmZzZXQgcmFuZ2Ugd2l0aCB0aGUgcm93J3Ncblx0XHRcdFx0c2VnRmlyc3QgPSBNYXRoLm1heChyYW5nZUZpcnN0LCBpKTtcblx0XHRcdFx0c2VnTGFzdCA9IE1hdGgubWluKHJhbmdlTGFzdCwgaSk7XG5cblx0XHRcdFx0Ly8gZGVhbCB3aXRoIGluLWJldHdlZW4gaW5kaWNlc1xuXHRcdFx0XHRzZWdGaXJzdCA9IE1hdGguY2VpbChzZWdGaXJzdCk7IC8vIGluLWJldHdlZW4gc3RhcnRzIHJvdW5kIHRvIG5leHQgY2VsbFxuXHRcdFx0XHRzZWdMYXN0ID0gTWF0aC5mbG9vcihzZWdMYXN0KTsgLy8gaW4tYmV0d2VlbiBlbmRzIHJvdW5kIHRvIHByZXYgY2VsbFxuXG5cdFx0XHRcdGlmIChzZWdGaXJzdCA8PSBzZWdMYXN0KSB7IC8vIHdhcyB0aGVyZSBhbnkgaW50ZXJzZWN0aW9uIHdpdGggdGhlIGN1cnJlbnQgcm93P1xuXHRcdFx0XHRcdHNlZ3MucHVzaCh7XG5cdFx0XHRcdFx0XHRyb3c6IHJvdyxcblxuXHRcdFx0XHRcdFx0Ly8gbm9ybWFsaXplIHRvIHN0YXJ0IG9mIHJvd1xuXHRcdFx0XHRcdFx0Zmlyc3RSb3dEYXlJbmRleDogc2VnRmlyc3QgLSByb3dGaXJzdCxcblx0XHRcdFx0XHRcdGxhc3RSb3dEYXlJbmRleDogc2VnTGFzdCAtIHJvd0ZpcnN0LFxuXG5cdFx0XHRcdFx0XHQvLyBtdXN0IGJlIG1hdGNoaW5nIGludGVnZXJzIHRvIGJlIHRoZSBzZWdtZW50J3Mgc3RhcnQvZW5kXG5cdFx0XHRcdFx0XHRpc1N0YXJ0OiBzZWdGaXJzdCA9PT0gcmFuZ2VGaXJzdCxcblx0XHRcdFx0XHRcdGlzRW5kOiBzZWdMYXN0ID09PSByYW5nZUxhc3Rcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzZWdzO1xuXHR9LFxuXG5cblx0LyogSGVhZGVyIFJlbmRlcmluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmVuZGVySGVhZEh0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXG5cdFx0cmV0dXJuICcnICtcblx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtcm93ICcgKyB2aWV3LndpZGdldEhlYWRlckNsYXNzICsgJ1wiPicgK1xuXHRcdFx0XHQnPHRhYmxlPicgK1xuXHRcdFx0XHRcdCc8dGhlYWQ+JyArXG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlckhlYWRUckh0bWwoKSArXG5cdFx0XHRcdFx0JzwvdGhlYWQ+JyArXG5cdFx0XHRcdCc8L3RhYmxlPicgK1xuXHRcdFx0JzwvZGl2Pic7XG5cdH0sXG5cblxuXHRyZW5kZXJIZWFkSW50cm9IdG1sOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5yZW5kZXJJbnRyb0h0bWwoKTsgLy8gZmFsbCBiYWNrIHRvIGdlbmVyaWNcblx0fSxcblxuXG5cdHJlbmRlckhlYWRUckh0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAnJyArXG5cdFx0XHQnPHRyPicgK1xuXHRcdFx0XHQodGhpcy5pc1JUTCA/ICcnIDogdGhpcy5yZW5kZXJIZWFkSW50cm9IdG1sKCkpICtcblx0XHRcdFx0dGhpcy5yZW5kZXJIZWFkRGF0ZUNlbGxzSHRtbCgpICtcblx0XHRcdFx0KHRoaXMuaXNSVEwgPyB0aGlzLnJlbmRlckhlYWRJbnRyb0h0bWwoKSA6ICcnKSArXG5cdFx0XHQnPC90cj4nO1xuXHR9LFxuXG5cblx0cmVuZGVySGVhZERhdGVDZWxsc0h0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBodG1scyA9IFtdO1xuXHRcdHZhciBjb2wsIGRhdGU7XG5cblx0XHRmb3IgKGNvbCA9IDA7IGNvbCA8IHRoaXMuY29sQ250OyBjb2wrKykge1xuXHRcdFx0ZGF0ZSA9IHRoaXMuZ2V0Q2VsbERhdGUoMCwgY29sKTtcblx0XHRcdGh0bWxzLnB1c2godGhpcy5yZW5kZXJIZWFkRGF0ZUNlbGxIdG1sKGRhdGUpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaHRtbHMuam9pbignJyk7XG5cdH0sXG5cblxuXHQvLyBUT0RPOiB3aGVuIGludGVybmFsQXBpVmVyc2lvbiwgYWNjZXB0IGFuIG9iamVjdCBmb3IgSFRNTCBhdHRyaWJ1dGVzXG5cdC8vIChjb2xzcGFuIHNob3VsZCBiZSBubyBkaWZmZXJlbnQpXG5cdHJlbmRlckhlYWREYXRlQ2VsbEh0bWw6IGZ1bmN0aW9uKGRhdGUsIGNvbHNwYW4sIG90aGVyQXR0cnMpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgY2xhc3NOYW1lcyA9IFtcblx0XHRcdCdmYy1kYXktaGVhZGVyJyxcblx0XHRcdHZpZXcud2lkZ2V0SGVhZGVyQ2xhc3Ncblx0XHRdO1xuXG5cdFx0Ly8gaWYgb25seSBvbmUgcm93IG9mIGRheXMsIHRoZSBjbGFzc05hbWVzIG9uIHRoZSBoZWFkZXIgY2FuIHJlcHJlc2VudCB0aGUgc3BlY2lmaWMgZGF5cyBiZW5lYXRoXG5cdFx0aWYgKHRoaXMucm93Q250ID09PSAxKSB7XG5cdFx0XHRjbGFzc05hbWVzID0gY2xhc3NOYW1lcy5jb25jYXQoXG5cdFx0XHRcdC8vIGluY2x1ZGVzIHRoZSBkYXktb2Ytd2VlayBjbGFzc1xuXHRcdFx0XHQvLyBub1RoZW1lSGlnaGxpZ2h0PXRydWUgKGRvbid0IGhpZ2hsaWdodCB0aGUgaGVhZGVyKVxuXHRcdFx0XHR0aGlzLmdldERheUNsYXNzZXMoZGF0ZSwgdHJ1ZSlcblx0XHRcdCk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Y2xhc3NOYW1lcy5wdXNoKCdmYy0nICsgZGF5SURzW2RhdGUuZGF5KCldKTsgLy8gb25seSBhZGQgdGhlIGRheS1vZi13ZWVrIGNsYXNzXG5cdFx0fVxuXG5cdFx0cmV0dXJuICcnICtcbiAgICAgICAgICAgICc8dGggY2xhc3M9XCInICsgY2xhc3NOYW1lcy5qb2luKCcgJykgKyAnXCInICtcblx0XHRcdFx0KHRoaXMucm93Q250ID09PSAxID9cblx0XHRcdFx0XHQnIGRhdGEtZGF0ZT1cIicgKyBkYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpICsgJ1wiJyA6XG5cdFx0XHRcdFx0JycpICtcblx0XHRcdFx0KGNvbHNwYW4gPiAxID9cblx0XHRcdFx0XHQnIGNvbHNwYW49XCInICsgY29sc3BhbiArICdcIicgOlxuXHRcdFx0XHRcdCcnKSArXG5cdFx0XHRcdChvdGhlckF0dHJzID9cblx0XHRcdFx0XHQnICcgKyBvdGhlckF0dHJzIDpcblx0XHRcdFx0XHQnJykgK1xuXHRcdFx0XHQnPicgK1xuXHRcdFx0XHQvLyBkb24ndCBtYWtlIGEgbGluayBpZiB0aGUgaGVhZGluZyBjb3VsZCByZXByZXNlbnQgbXVsdGlwbGUgZGF5cywgb3IgaWYgdGhlcmUncyBvbmx5IG9uZSBkYXkgKGZvcmNlT2ZmKVxuXHRcdFx0XHR2aWV3LmJ1aWxkR290b0FuY2hvckh0bWwoXG5cdFx0XHRcdFx0eyBkYXRlOiBkYXRlLCBmb3JjZU9mZjogdGhpcy5yb3dDbnQgPiAxIHx8IHRoaXMuY29sQ250ID09PSAxIH0sXG5cdFx0XHRcdFx0aHRtbEVzY2FwZShkYXRlLmZvcm1hdCh0aGlzLmNvbEhlYWRGb3JtYXQpKSAvLyBpbm5lciBIVE1MXG5cdFx0XHRcdCkgK1xuXHRcdFx0JzwvdGg+Jztcblx0fSxcblxuXG5cdC8qIEJhY2tncm91bmQgUmVuZGVyaW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyZW5kZXJCZ1RySHRtbDogZnVuY3Rpb24ocm93KSB7XG5cdFx0cmV0dXJuICcnICtcblx0XHRcdCc8dHI+JyArXG5cdFx0XHRcdCh0aGlzLmlzUlRMID8gJycgOiB0aGlzLnJlbmRlckJnSW50cm9IdG1sKHJvdykpICtcblx0XHRcdFx0dGhpcy5yZW5kZXJCZ0NlbGxzSHRtbChyb3cpICtcblx0XHRcdFx0KHRoaXMuaXNSVEwgPyB0aGlzLnJlbmRlckJnSW50cm9IdG1sKHJvdykgOiAnJykgK1xuXHRcdFx0JzwvdHI+Jztcblx0fSxcblxuXG5cdHJlbmRlckJnSW50cm9IdG1sOiBmdW5jdGlvbihyb3cpIHtcblx0XHRyZXR1cm4gdGhpcy5yZW5kZXJJbnRyb0h0bWwoKTsgLy8gZmFsbCBiYWNrIHRvIGdlbmVyaWNcblx0fSxcblxuXG5cdHJlbmRlckJnQ2VsbHNIdG1sOiBmdW5jdGlvbihyb3cpIHtcblx0XHR2YXIgaHRtbHMgPSBbXTtcblx0XHR2YXIgY29sLCBkYXRlO1xuXG5cdFx0Zm9yIChjb2wgPSAwOyBjb2wgPCB0aGlzLmNvbENudDsgY29sKyspIHtcblx0XHRcdGRhdGUgPSB0aGlzLmdldENlbGxEYXRlKHJvdywgY29sKTtcblx0XHRcdGh0bWxzLnB1c2godGhpcy5yZW5kZXJCZ0NlbGxIdG1sKGRhdGUpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaHRtbHMuam9pbignJyk7XG5cdH0sXG5cblxuXHRyZW5kZXJCZ0NlbGxIdG1sOiBmdW5jdGlvbihkYXRlLCBvdGhlckF0dHJzKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGNsYXNzZXMgPSB0aGlzLmdldERheUNsYXNzZXMoZGF0ZSk7XG5cblx0XHRjbGFzc2VzLnVuc2hpZnQoJ2ZjLWRheScsIHZpZXcud2lkZ2V0Q29udGVudENsYXNzKTtcblxuXHRcdHJldHVybiAnPHRkIGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiJyArXG5cdFx0XHQnIGRhdGEtZGF0ZT1cIicgKyBkYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpICsgJ1wiJyArIC8vIGlmIGRhdGUgaGFzIGEgdGltZSwgd29uJ3QgZm9ybWF0IGl0XG5cdFx0XHQob3RoZXJBdHRycyA/XG5cdFx0XHRcdCcgJyArIG90aGVyQXR0cnMgOlxuXHRcdFx0XHQnJykgK1xuXHRcdFx0Jz48L3RkPic7XG5cdH0sXG5cblxuXHQvKiBHZW5lcmljXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIGRlZmF1bHQgSFRNTCBpbnRybyBmb3IgYW55IHJvdy4gVXNlciBjbGFzc2VzIHNob3VsZCBvdmVycmlkZVxuXHRyZW5kZXJJbnRyb0h0bWw6IGZ1bmN0aW9uKCkge1xuXHR9LFxuXG5cblx0Ly8gVE9ETzogYSBnZW5lcmljIG1ldGhvZCBmb3IgZGVhbGluZyB3aXRoIDx0cj4sIFJUTCwgaW50cm9cblx0Ly8gd2hlbiBpbmNyZW1lbnQgaW50ZXJuYWxBcGlWZXJzaW9uXG5cdC8vIHdyYXBUciAoc2NoZWR1bGVyKVxuXG5cblx0LyogVXRpbHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEFwcGxpZXMgdGhlIGdlbmVyaWMgXCJpbnRyb1wiIGFuZCBcIm91dHJvXCIgSFRNTCB0byB0aGUgZ2l2ZW4gY2VsbHMuXG5cdC8vIEludHJvIG1lYW5zIHRoZSBsZWZ0bW9zdCBjZWxsIHdoZW4gdGhlIGNhbGVuZGFyIGlzIExUUiBhbmQgdGhlIHJpZ2h0bW9zdCBjZWxsIHdoZW4gUlRMLiBWaWNlLXZlcnNhIGZvciBvdXRyby5cblx0Ym9va2VuZENlbGxzOiBmdW5jdGlvbih0ckVsKSB7XG5cdFx0dmFyIGludHJvSHRtbCA9IHRoaXMucmVuZGVySW50cm9IdG1sKCk7XG5cblx0XHRpZiAoaW50cm9IdG1sKSB7XG5cdFx0XHRpZiAodGhpcy5pc1JUTCkge1xuXHRcdFx0XHR0ckVsLmFwcGVuZChpbnRyb0h0bWwpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHRyRWwucHJlcGVuZChpbnRyb0h0bWwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG59O1xuXG47O1xuXG4vKiBBIGNvbXBvbmVudCB0aGF0IHJlbmRlcnMgYSBncmlkIG9mIHdob2xlLWRheXMgdGhhdCBydW5zIGhvcml6b250YWxseS4gVGhlcmUgY2FuIGJlIG11bHRpcGxlIHJvd3MsIG9uZSBwZXIgd2Vlay5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG52YXIgRGF5R3JpZCA9IEZDLkRheUdyaWQgPSBHcmlkLmV4dGVuZChEYXlUYWJsZU1peGluLCB7XG5cblx0bnVtYmVyc1Zpc2libGU6IGZhbHNlLCAvLyBzaG91bGQgcmVuZGVyIGEgcm93IGZvciBkYXkvd2VlayBudW1iZXJzPyBzZXQgYnkgb3V0c2lkZSB2aWV3LiBUT0RPOiBtYWtlIGludGVybmFsXG5cdGJvdHRvbUNvb3JkUGFkZGluZzogMCwgLy8gaGFjayBmb3IgZXh0ZW5kaW5nIHRoZSBoaXQgYXJlYSBmb3IgdGhlIGxhc3Qgcm93IG9mIHRoZSBjb29yZGluYXRlIGdyaWRcblxuXHRyb3dFbHM6IG51bGwsIC8vIHNldCBvZiBmYWtlIHJvdyBlbGVtZW50c1xuXHRjZWxsRWxzOiBudWxsLCAvLyBzZXQgb2Ygd2hvbGUtZGF5IGVsZW1lbnRzIGNvbXByaXNpbmcgdGhlIHJvdydzIGJhY2tncm91bmRcblx0aGVscGVyRWxzOiBudWxsLCAvLyBzZXQgb2YgY2VsbCBza2VsZXRvbiBlbGVtZW50cyBmb3IgcmVuZGVyaW5nIHRoZSBtb2NrIGV2ZW50IFwiaGVscGVyXCJcblxuXHRyb3dDb29yZENhY2hlOiBudWxsLFxuXHRjb2xDb29yZENhY2hlOiBudWxsLFxuXG5cblx0Ly8gUmVuZGVycyB0aGUgcm93cyBhbmQgY29sdW1ucyBpbnRvIHRoZSBjb21wb25lbnQncyBgdGhpcy5lbGAsIHdoaWNoIHNob3VsZCBhbHJlYWR5IGJlIGFzc2lnbmVkLlxuXHQvLyBpc1JpZ2lkIGRldGVybWlucyB3aGV0aGVyIHRoZSBpbmRpdmlkdWFsIHJvd3Mgc2hvdWxkIGlnbm9yZSB0aGUgY29udGVudHMgYW5kIGJlIGEgY29uc3RhbnQgaGVpZ2h0LlxuXHQvLyBSZWxpZXMgb24gdGhlIHZpZXcncyBjb2xDbnQgYW5kIHJvd0NudC4gSW4gdGhlIGZ1dHVyZSwgdGhpcyBjb21wb25lbnQgc2hvdWxkIHByb2JhYmx5IGJlIHNlbGYtc3VmZmljaWVudC5cblx0cmVuZGVyRGF0ZXM6IGZ1bmN0aW9uKGlzUmlnaWQpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgcm93Q250ID0gdGhpcy5yb3dDbnQ7XG5cdFx0dmFyIGNvbENudCA9IHRoaXMuY29sQ250O1xuXHRcdHZhciBodG1sID0gJyc7XG5cdFx0dmFyIHJvdztcblx0XHR2YXIgY29sO1xuXG5cdFx0Zm9yIChyb3cgPSAwOyByb3cgPCByb3dDbnQ7IHJvdysrKSB7XG5cdFx0XHRodG1sICs9IHRoaXMucmVuZGVyRGF5Um93SHRtbChyb3csIGlzUmlnaWQpO1xuXHRcdH1cblx0XHR0aGlzLmVsLmh0bWwoaHRtbCk7XG5cblx0XHR0aGlzLnJvd0VscyA9IHRoaXMuZWwuZmluZCgnLmZjLXJvdycpO1xuXHRcdHRoaXMuY2VsbEVscyA9IHRoaXMuZWwuZmluZCgnLmZjLWRheScpO1xuXG5cdFx0dGhpcy5yb3dDb29yZENhY2hlID0gbmV3IENvb3JkQ2FjaGUoe1xuXHRcdFx0ZWxzOiB0aGlzLnJvd0Vscyxcblx0XHRcdGlzVmVydGljYWw6IHRydWVcblx0XHR9KTtcblx0XHR0aGlzLmNvbENvb3JkQ2FjaGUgPSBuZXcgQ29vcmRDYWNoZSh7XG5cdFx0XHRlbHM6IHRoaXMuY2VsbEVscy5zbGljZSgwLCB0aGlzLmNvbENudCksIC8vIG9ubHkgdGhlIGZpcnN0IHJvd1xuXHRcdFx0aXNIb3Jpem9udGFsOiB0cnVlXG5cdFx0fSk7XG5cblx0XHQvLyB0cmlnZ2VyIGRheVJlbmRlciB3aXRoIGVhY2ggY2VsbCdzIGVsZW1lbnRcblx0XHRmb3IgKHJvdyA9IDA7IHJvdyA8IHJvd0NudDsgcm93KyspIHtcblx0XHRcdGZvciAoY29sID0gMDsgY29sIDwgY29sQ250OyBjb2wrKykge1xuXHRcdFx0XHR2aWV3LnB1YmxpY2x5VHJpZ2dlcihcblx0XHRcdFx0XHQnZGF5UmVuZGVyJyxcblx0XHRcdFx0XHRudWxsLFxuXHRcdFx0XHRcdHRoaXMuZ2V0Q2VsbERhdGUocm93LCBjb2wpLFxuXHRcdFx0XHRcdHRoaXMuZ2V0Q2VsbEVsKHJvdywgY29sKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdHVucmVuZGVyRGF0ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMucmVtb3ZlU2VnUG9wb3ZlcigpO1xuXHR9LFxuXG5cblx0cmVuZGVyQnVzaW5lc3NIb3VyczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNlZ3MgPSB0aGlzLmJ1aWxkQnVzaW5lc3NIb3VyU2Vncyh0cnVlKTsgLy8gd2hvbGVEYXk9dHJ1ZVxuXHRcdHRoaXMucmVuZGVyRmlsbCgnYnVzaW5lc3NIb3VycycsIHNlZ3MsICdiZ2V2ZW50Jyk7XG5cdH0sXG5cblxuXHR1bnJlbmRlckJ1c2luZXNzSG91cnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJGaWxsKCdidXNpbmVzc0hvdXJzJyk7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgZm9yIGEgc2luZ2xlIHJvdywgd2hpY2ggaXMgYSBkaXYgdGhhdCB3cmFwcyBhIHRhYmxlLlxuXHQvLyBgcm93YCBpcyB0aGUgcm93IG51bWJlci5cblx0cmVuZGVyRGF5Um93SHRtbDogZnVuY3Rpb24ocm93LCBpc1JpZ2lkKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGNsYXNzZXMgPSBbICdmYy1yb3cnLCAnZmMtd2VlaycsIHZpZXcud2lkZ2V0Q29udGVudENsYXNzIF07XG5cblx0XHRpZiAoaXNSaWdpZCkge1xuXHRcdFx0Y2xhc3Nlcy5wdXNoKCdmYy1yaWdpZCcpO1xuXHRcdH1cblxuXHRcdHJldHVybiAnJyArXG5cdFx0XHQnPGRpdiBjbGFzcz1cIicgKyBjbGFzc2VzLmpvaW4oJyAnKSArICdcIj4nICtcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1iZ1wiPicgK1xuXHRcdFx0XHRcdCc8dGFibGU+JyArXG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlckJnVHJIdG1sKHJvdykgK1xuXHRcdFx0XHRcdCc8L3RhYmxlPicgK1xuXHRcdFx0XHQnPC9kaXY+JyArXG5cdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtY29udGVudC1za2VsZXRvblwiPicgK1xuXHRcdFx0XHRcdCc8dGFibGU+JyArXG5cdFx0XHRcdFx0XHQodGhpcy5udW1iZXJzVmlzaWJsZSA/XG5cdFx0XHRcdFx0XHRcdCc8dGhlYWQ+JyArXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJOdW1iZXJUckh0bWwocm93KSArXG5cdFx0XHRcdFx0XHRcdCc8L3RoZWFkPicgOlxuXHRcdFx0XHRcdFx0XHQnJ1xuXHRcdFx0XHRcdFx0XHQpICtcblx0XHRcdFx0XHQnPC90YWJsZT4nICtcblx0XHRcdFx0JzwvZGl2PicgK1xuXHRcdFx0JzwvZGl2Pic7XG5cdH0sXG5cblxuXHQvKiBHcmlkIE51bWJlciBSZW5kZXJpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHJlbmRlck51bWJlclRySHRtbDogZnVuY3Rpb24ocm93KSB7XG5cdFx0cmV0dXJuICcnICtcblx0XHRcdCc8dHI+JyArXG5cdFx0XHRcdCh0aGlzLmlzUlRMID8gJycgOiB0aGlzLnJlbmRlck51bWJlckludHJvSHRtbChyb3cpKSArXG5cdFx0XHRcdHRoaXMucmVuZGVyTnVtYmVyQ2VsbHNIdG1sKHJvdykgK1xuXHRcdFx0XHQodGhpcy5pc1JUTCA/IHRoaXMucmVuZGVyTnVtYmVySW50cm9IdG1sKHJvdykgOiAnJykgK1xuXHRcdFx0JzwvdHI+Jztcblx0fSxcblxuXG5cdHJlbmRlck51bWJlckludHJvSHRtbDogZnVuY3Rpb24ocm93KSB7XG5cdFx0cmV0dXJuIHRoaXMucmVuZGVySW50cm9IdG1sKCk7XG5cdH0sXG5cblxuXHRyZW5kZXJOdW1iZXJDZWxsc0h0bWw6IGZ1bmN0aW9uKHJvdykge1xuXHRcdHZhciBodG1scyA9IFtdO1xuXHRcdHZhciBjb2wsIGRhdGU7XG5cblx0XHRmb3IgKGNvbCA9IDA7IGNvbCA8IHRoaXMuY29sQ250OyBjb2wrKykge1xuXHRcdFx0ZGF0ZSA9IHRoaXMuZ2V0Q2VsbERhdGUocm93LCBjb2wpO1xuXHRcdFx0aHRtbHMucHVzaCh0aGlzLnJlbmRlck51bWJlckNlbGxIdG1sKGRhdGUpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaHRtbHMuam9pbignJyk7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgZm9yIHRoZSA8dGQ+cyBvZiB0aGUgXCJudW1iZXJcIiByb3cgaW4gdGhlIERheUdyaWQncyBjb250ZW50IHNrZWxldG9uLlxuXHQvLyBUaGUgbnVtYmVyIHJvdyB3aWxsIG9ubHkgZXhpc3QgaWYgZWl0aGVyIGRheSBudW1iZXJzIG9yIHdlZWsgbnVtYmVycyBhcmUgdHVybmVkIG9uLlxuXHRyZW5kZXJOdW1iZXJDZWxsSHRtbDogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdHZhciBodG1sID0gJyc7XG5cdFx0dmFyIGNsYXNzZXM7XG5cdFx0dmFyIHdlZWtDYWxjRmlyc3REb1c7XG5cblx0XHRpZiAoIXRoaXMudmlldy5kYXlOdW1iZXJzVmlzaWJsZSAmJiAhdGhpcy52aWV3LmNlbGxXZWVrTnVtYmVyc1Zpc2libGUpIHtcblx0XHRcdC8vIG5vIG51bWJlcnMgaW4gZGF5IGNlbGwgKHdlZWsgbnVtYmVyIG11c3QgYmUgYWxvbmcgdGhlIHNpZGUpXG5cdFx0XHRyZXR1cm4gJzx0ZC8+JzsgLy8gIHdpbGwgY3JlYXRlIGFuIGVtcHR5IHNwYWNlIGFib3ZlIGV2ZW50cyA6KFxuXHRcdH1cblxuXHRcdGNsYXNzZXMgPSB0aGlzLmdldERheUNsYXNzZXMoZGF0ZSk7XG5cdFx0Y2xhc3Nlcy51bnNoaWZ0KCdmYy1kYXktdG9wJyk7XG5cblx0XHRpZiAodGhpcy52aWV3LmNlbGxXZWVrTnVtYmVyc1Zpc2libGUpIHtcblx0XHRcdC8vIFRvIGRldGVybWluZSB0aGUgZGF5IG9mIHdlZWsgbnVtYmVyIGNoYW5nZSB1bmRlciBJU08sIHdlIGNhbm5vdFxuXHRcdFx0Ly8gcmVseSBvbiBtb21lbnQuanMgbWV0aG9kcyBzdWNoIGFzIGZpcnN0RGF5T2ZXZWVrKCkgb3Igd2Vla2RheSgpLFxuXHRcdFx0Ly8gYmVjYXVzZSB0aGV5IHJlbHkgb24gdGhlIGxvY2FsZSdzIGRvdyAocG9zc2libHkgb3ZlcnJpZGRlbiBieVxuXHRcdFx0Ly8gb3VyIGZpcnN0RGF5IG9wdGlvbiksIHdoaWNoIG1heSBub3QgYmUgTW9uZGF5LiBXZSBjYW5ub3QgY2hhbmdlXG5cdFx0XHQvLyBkb3csIGJlY2F1c2UgdGhhdCB3b3VsZCBhZmZlY3QgdGhlIGNhbGVuZGFyIHN0YXJ0IGRheSBhcyB3ZWxsLlxuXHRcdFx0aWYgKGRhdGUuX2xvY2FsZS5fZnVsbENhbGVuZGFyX3dlZWtDYWxjID09PSAnSVNPJykge1xuXHRcdFx0XHR3ZWVrQ2FsY0ZpcnN0RG9XID0gMTsgIC8vIE1vbmRheSBieSBJU08gODYwMSBkZWZpbml0aW9uXG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0d2Vla0NhbGNGaXJzdERvVyA9IGRhdGUuX2xvY2FsZS5maXJzdERheU9mV2VlaygpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGh0bWwgKz0gJzx0ZCBjbGFzcz1cIicgKyBjbGFzc2VzLmpvaW4oJyAnKSArICdcIiBkYXRhLWRhdGU9XCInICsgZGF0ZS5mb3JtYXQoKSArICdcIj4nO1xuXG5cdFx0aWYgKHRoaXMudmlldy5jZWxsV2Vla051bWJlcnNWaXNpYmxlICYmIChkYXRlLmRheSgpID09IHdlZWtDYWxjRmlyc3REb1cpKSB7XG5cdFx0XHRodG1sICs9IHRoaXMudmlldy5idWlsZEdvdG9BbmNob3JIdG1sKFxuXHRcdFx0XHR7IGRhdGU6IGRhdGUsIHR5cGU6ICd3ZWVrJyB9LFxuXHRcdFx0XHR7ICdjbGFzcyc6ICdmYy13ZWVrLW51bWJlcicgfSxcblx0XHRcdFx0ZGF0ZS5mb3JtYXQoJ3cnKSAvLyBpbm5lciBIVE1MXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnZpZXcuZGF5TnVtYmVyc1Zpc2libGUpIHtcblx0XHRcdGh0bWwgKz0gdGhpcy52aWV3LmJ1aWxkR290b0FuY2hvckh0bWwoXG5cdFx0XHRcdGRhdGUsXG5cdFx0XHRcdHsgJ2NsYXNzJzogJ2ZjLWRheS1udW1iZXInIH0sXG5cdFx0XHRcdGRhdGUuZGF0ZSgpIC8vIGlubmVyIEhUTUxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aHRtbCArPSAnPC90ZD4nO1xuXG5cdFx0cmV0dXJuIGh0bWw7XG5cdH0sXG5cblxuXHQvKiBPcHRpb25zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBDb21wdXRlcyBhIGRlZmF1bHQgZXZlbnQgdGltZSBmb3JtYXR0aW5nIHN0cmluZyBpZiBgdGltZUZvcm1hdGAgaXMgbm90IGV4cGxpY2l0bHkgZGVmaW5lZFxuXHRjb21wdXRlRXZlbnRUaW1lRm9ybWF0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy52aWV3Lm9wdCgnZXh0cmFTbWFsbFRpbWVGb3JtYXQnKTsgLy8gbGlrZSBcIjZwXCIgb3IgXCI2OjMwcFwiXG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyBhIGRlZmF1bHQgYGRpc3BsYXlFdmVudEVuZGAgdmFsdWUgaWYgb25lIGlzIG5vdCBleHBsaWNsdHkgZGVmaW5lZFxuXHRjb21wdXRlRGlzcGxheUV2ZW50RW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5jb2xDbnQgPT0gMTsgLy8gd2UnbGwgbGlrZWx5IGhhdmUgc3BhY2UgaWYgdGhlcmUncyBvbmx5IG9uZSBkYXlcblx0fSxcblxuXG5cdC8qIERhdGVzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyYW5nZVVwZGF0ZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudXBkYXRlRGF5VGFibGUoKTtcblx0fSxcblxuXG5cdC8vIFNsaWNlcyB1cCB0aGUgZ2l2ZW4gc3BhbiAodW56b25lZCBzdGFydC9lbmQgd2l0aCBvdGhlciBtaXNjIGRhdGEpIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcblx0c3BhblRvU2VnczogZnVuY3Rpb24oc3Bhbikge1xuXHRcdHZhciBzZWdzID0gdGhpcy5zbGljZVJhbmdlQnlSb3coc3Bhbik7XG5cdFx0dmFyIGksIHNlZztcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzZWcgPSBzZWdzW2ldO1xuXHRcdFx0aWYgKHRoaXMuaXNSVEwpIHtcblx0XHRcdFx0c2VnLmxlZnRDb2wgPSB0aGlzLmRheXNQZXJSb3cgLSAxIC0gc2VnLmxhc3RSb3dEYXlJbmRleDtcblx0XHRcdFx0c2VnLnJpZ2h0Q29sID0gdGhpcy5kYXlzUGVyUm93IC0gMSAtIHNlZy5maXJzdFJvd0RheUluZGV4O1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHNlZy5sZWZ0Q29sID0gc2VnLmZpcnN0Um93RGF5SW5kZXg7XG5cdFx0XHRcdHNlZy5yaWdodENvbCA9IHNlZy5sYXN0Um93RGF5SW5kZXg7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblxuXHQvKiBIaXQgU3lzdGVtXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRwcmVwYXJlSGl0czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5jb2xDb29yZENhY2hlLmJ1aWxkKCk7XG5cdFx0dGhpcy5yb3dDb29yZENhY2hlLmJ1aWxkKCk7XG5cdFx0dGhpcy5yb3dDb29yZENhY2hlLmJvdHRvbXNbdGhpcy5yb3dDbnQgLSAxXSArPSB0aGlzLmJvdHRvbUNvb3JkUGFkZGluZzsgLy8gaGFja1xuXHR9LFxuXG5cblx0cmVsZWFzZUhpdHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuY29sQ29vcmRDYWNoZS5jbGVhcigpO1xuXHRcdHRoaXMucm93Q29vcmRDYWNoZS5jbGVhcigpO1xuXHR9LFxuXG5cblx0cXVlcnlIaXQ6IGZ1bmN0aW9uKGxlZnRPZmZzZXQsIHRvcE9mZnNldCkge1xuXHRcdGlmICh0aGlzLmNvbENvb3JkQ2FjaGUuaXNMZWZ0SW5Cb3VuZHMobGVmdE9mZnNldCkgJiYgdGhpcy5yb3dDb29yZENhY2hlLmlzVG9wSW5Cb3VuZHModG9wT2Zmc2V0KSkge1xuXHRcdFx0dmFyIGNvbCA9IHRoaXMuY29sQ29vcmRDYWNoZS5nZXRIb3Jpem9udGFsSW5kZXgobGVmdE9mZnNldCk7XG5cdFx0XHR2YXIgcm93ID0gdGhpcy5yb3dDb29yZENhY2hlLmdldFZlcnRpY2FsSW5kZXgodG9wT2Zmc2V0KTtcblxuXHRcdFx0aWYgKHJvdyAhPSBudWxsICYmIGNvbCAhPSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmdldENlbGxIaXQocm93LCBjb2wpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdGdldEhpdFNwYW46IGZ1bmN0aW9uKGhpdCkge1xuXHRcdHJldHVybiB0aGlzLmdldENlbGxSYW5nZShoaXQucm93LCBoaXQuY29sKTtcblx0fSxcblxuXG5cdGdldEhpdEVsOiBmdW5jdGlvbihoaXQpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRDZWxsRWwoaGl0LnJvdywgaGl0LmNvbCk7XG5cdH0sXG5cblxuXHQvKiBDZWxsIFN5c3RlbVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHQvLyBGWUk6IHRoZSBmaXJzdCBjb2x1bW4gaXMgdGhlIGxlZnRtb3N0IGNvbHVtbiwgcmVnYXJkbGVzcyBvZiBkYXRlXG5cblxuXHRnZXRDZWxsSGl0OiBmdW5jdGlvbihyb3csIGNvbCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRyb3c6IHJvdyxcblx0XHRcdGNvbDogY29sLFxuXHRcdFx0Y29tcG9uZW50OiB0aGlzLCAvLyBuZWVkZWQgdW5mb3J0dW5hdGVseSA6KFxuXHRcdFx0bGVmdDogdGhpcy5jb2xDb29yZENhY2hlLmdldExlZnRPZmZzZXQoY29sKSxcblx0XHRcdHJpZ2h0OiB0aGlzLmNvbENvb3JkQ2FjaGUuZ2V0UmlnaHRPZmZzZXQoY29sKSxcblx0XHRcdHRvcDogdGhpcy5yb3dDb29yZENhY2hlLmdldFRvcE9mZnNldChyb3cpLFxuXHRcdFx0Ym90dG9tOiB0aGlzLnJvd0Nvb3JkQ2FjaGUuZ2V0Qm90dG9tT2Zmc2V0KHJvdylcblx0XHR9O1xuXHR9LFxuXG5cblx0Z2V0Q2VsbEVsOiBmdW5jdGlvbihyb3csIGNvbCkge1xuXHRcdHJldHVybiB0aGlzLmNlbGxFbHMuZXEocm93ICogdGhpcy5jb2xDbnQgKyBjb2wpO1xuXHR9LFxuXG5cblx0LyogRXZlbnQgRHJhZyBWaXN1YWxpemF0aW9uXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdC8vIFRPRE86IG1vdmUgdG8gRGF5R3JpZC5ldmVudCwgc2ltaWxhciB0byB3aGF0IHdlIGRpZCB3aXRoIEdyaWQncyBkcmFnIG1ldGhvZHNcblxuXG5cdC8vIFJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhbiBldmVudCBvciBleHRlcm5hbCBlbGVtZW50IGJlaW5nIGRyYWdnZWQuXG5cdC8vIGBldmVudExvY2F0aW9uYCBoYXMgem9uZWQgc3RhcnQgYW5kIGVuZCAob3B0aW9uYWwpXG5cdHJlbmRlckRyYWc6IGZ1bmN0aW9uKGV2ZW50TG9jYXRpb24sIHNlZykge1xuXG5cdFx0Ly8gYWx3YXlzIHJlbmRlciBhIGhpZ2hsaWdodCB1bmRlcm5lYXRoXG5cdFx0dGhpcy5yZW5kZXJIaWdobGlnaHQodGhpcy5ldmVudFRvU3BhbihldmVudExvY2F0aW9uKSk7XG5cblx0XHQvLyBpZiBhIHNlZ21lbnQgZnJvbSB0aGUgc2FtZSBjYWxlbmRhciBidXQgYW5vdGhlciBjb21wb25lbnQgaXMgYmVpbmcgZHJhZ2dlZCwgcmVuZGVyIGEgaGVscGVyIGV2ZW50XG5cdFx0aWYgKHNlZyAmJiBzZWcuY29tcG9uZW50ICE9PSB0aGlzKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5yZW5kZXJFdmVudExvY2F0aW9uSGVscGVyKGV2ZW50TG9jYXRpb24sIHNlZyk7IC8vIHJldHVybnMgbW9jayBldmVudCBlbGVtZW50c1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhbnkgdmlzdWFsIGluZGljYXRpb24gb2YgYSBob3ZlcmluZyBldmVudFxuXHR1bnJlbmRlckRyYWc6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJIaWdobGlnaHQoKTtcblx0XHR0aGlzLnVucmVuZGVySGVscGVyKCk7XG5cdH0sXG5cblxuXHQvKiBFdmVudCBSZXNpemUgVmlzdWFsaXphdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IGJlaW5nIHJlc2l6ZWRcblx0cmVuZGVyRXZlbnRSZXNpemU6IGZ1bmN0aW9uKGV2ZW50TG9jYXRpb24sIHNlZykge1xuXHRcdHRoaXMucmVuZGVySGlnaGxpZ2h0KHRoaXMuZXZlbnRUb1NwYW4oZXZlbnRMb2NhdGlvbikpO1xuXHRcdHJldHVybiB0aGlzLnJlbmRlckV2ZW50TG9jYXRpb25IZWxwZXIoZXZlbnRMb2NhdGlvbiwgc2VnKTsgLy8gcmV0dXJucyBtb2NrIGV2ZW50IGVsZW1lbnRzXG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhbiBldmVudCBiZWluZyByZXNpemVkXG5cdHVucmVuZGVyRXZlbnRSZXNpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJIaWdobGlnaHQoKTtcblx0XHR0aGlzLnVucmVuZGVySGVscGVyKCk7XG5cdH0sXG5cblxuXHQvKiBFdmVudCBIZWxwZXJcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgYSBtb2NrIFwiaGVscGVyXCIgZXZlbnQuIGBzb3VyY2VTZWdgIGlzIHRoZSBhc3NvY2lhdGVkIGludGVybmFsIHNlZ21lbnQgb2JqZWN0LiBJdCBjYW4gYmUgbnVsbC5cblx0cmVuZGVySGVscGVyOiBmdW5jdGlvbihldmVudCwgc291cmNlU2VnKSB7XG5cdFx0dmFyIGhlbHBlck5vZGVzID0gW107XG5cdFx0dmFyIHNlZ3MgPSB0aGlzLmV2ZW50VG9TZWdzKGV2ZW50KTtcblx0XHR2YXIgcm93U3RydWN0cztcblxuXHRcdHNlZ3MgPSB0aGlzLnJlbmRlckZnU2VnRWxzKHNlZ3MpOyAvLyBhc3NpZ25zIGVhY2ggc2VnJ3MgZWwgYW5kIHJldHVybnMgYSBzdWJzZXQgb2Ygc2VncyB0aGF0IHdlcmUgcmVuZGVyZWRcblx0XHRyb3dTdHJ1Y3RzID0gdGhpcy5yZW5kZXJTZWdSb3dzKHNlZ3MpO1xuXG5cdFx0Ly8gaW5qZWN0IGVhY2ggbmV3IGV2ZW50IHNrZWxldG9uIGludG8gZWFjaCBhc3NvY2lhdGVkIHJvd1xuXHRcdHRoaXMucm93RWxzLmVhY2goZnVuY3Rpb24ocm93LCByb3dOb2RlKSB7XG5cdFx0XHR2YXIgcm93RWwgPSAkKHJvd05vZGUpOyAvLyB0aGUgLmZjLXJvd1xuXHRcdFx0dmFyIHNrZWxldG9uRWwgPSAkKCc8ZGl2IGNsYXNzPVwiZmMtaGVscGVyLXNrZWxldG9uXCI+PHRhYmxlLz48L2Rpdj4nKTsgLy8gd2lsbCBiZSBhYnNvbHV0ZWx5IHBvc2l0aW9uZWRcblx0XHRcdHZhciBza2VsZXRvblRvcDtcblxuXHRcdFx0Ly8gSWYgdGhlcmUgaXMgYW4gb3JpZ2luYWwgc2VnbWVudCwgbWF0Y2ggdGhlIHRvcCBwb3NpdGlvbi4gT3RoZXJ3aXNlLCBwdXQgaXQgYXQgdGhlIHJvdydzIHRvcCBsZXZlbFxuXHRcdFx0aWYgKHNvdXJjZVNlZyAmJiBzb3VyY2VTZWcucm93ID09PSByb3cpIHtcblx0XHRcdFx0c2tlbGV0b25Ub3AgPSBzb3VyY2VTZWcuZWwucG9zaXRpb24oKS50b3A7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0c2tlbGV0b25Ub3AgPSByb3dFbC5maW5kKCcuZmMtY29udGVudC1za2VsZXRvbiB0Ym9keScpLnBvc2l0aW9uKCkudG9wO1xuXHRcdFx0fVxuXG5cdFx0XHRza2VsZXRvbkVsLmNzcygndG9wJywgc2tlbGV0b25Ub3ApXG5cdFx0XHRcdC5maW5kKCd0YWJsZScpXG5cdFx0XHRcdFx0LmFwcGVuZChyb3dTdHJ1Y3RzW3Jvd10udGJvZHlFbCk7XG5cblx0XHRcdHJvd0VsLmFwcGVuZChza2VsZXRvbkVsKTtcblx0XHRcdGhlbHBlck5vZGVzLnB1c2goc2tlbGV0b25FbFswXSk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gKCAvLyBtdXN0IHJldHVybiB0aGUgZWxlbWVudHMgcmVuZGVyZWRcblx0XHRcdHRoaXMuaGVscGVyRWxzID0gJChoZWxwZXJOb2RlcykgLy8gYXJyYXkgLT4galF1ZXJ5IHNldFxuXHRcdCk7XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYW55IHZpc3VhbCBpbmRpY2F0aW9uIG9mIGEgbW9jayBoZWxwZXIgZXZlbnRcblx0dW5yZW5kZXJIZWxwZXI6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmhlbHBlckVscykge1xuXHRcdFx0dGhpcy5oZWxwZXJFbHMucmVtb3ZlKCk7XG5cdFx0XHR0aGlzLmhlbHBlckVscyA9IG51bGw7XG5cdFx0fVxuXHR9LFxuXG5cblx0LyogRmlsbCBTeXN0ZW0gKGhpZ2hsaWdodCwgYmFja2dyb3VuZCBldmVudHMsIGJ1c2luZXNzIGhvdXJzKVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0ZmlsbFNlZ1RhZzogJ3RkJywgLy8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGFnIG5hbWVcblxuXG5cdC8vIFJlbmRlcnMgYSBzZXQgb2YgcmVjdGFuZ2xlcyBvdmVyIHRoZSBnaXZlbiBzZWdtZW50cyBvZiBkYXlzLlxuXHQvLyBPbmx5IHJldHVybnMgc2VnbWVudHMgdGhhdCBzdWNjZXNzZnVsbHkgcmVuZGVyZWQuXG5cdHJlbmRlckZpbGw6IGZ1bmN0aW9uKHR5cGUsIHNlZ3MsIGNsYXNzTmFtZSkge1xuXHRcdHZhciBub2RlcyA9IFtdO1xuXHRcdHZhciBpLCBzZWc7XG5cdFx0dmFyIHNrZWxldG9uRWw7XG5cblx0XHRzZWdzID0gdGhpcy5yZW5kZXJGaWxsU2VnRWxzKHR5cGUsIHNlZ3MpOyAvLyBhc3NpZ25lcyBgLmVsYCB0byBlYWNoIHNlZy4gcmV0dXJucyBzdWNjZXNzZnVsbHkgcmVuZGVyZWQgc2Vnc1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNlZyA9IHNlZ3NbaV07XG5cdFx0XHRza2VsZXRvbkVsID0gdGhpcy5yZW5kZXJGaWxsUm93KHR5cGUsIHNlZywgY2xhc3NOYW1lKTtcblx0XHRcdHRoaXMucm93RWxzLmVxKHNlZy5yb3cpLmFwcGVuZChza2VsZXRvbkVsKTtcblx0XHRcdG5vZGVzLnB1c2goc2tlbGV0b25FbFswXSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5lbHNCeUZpbGxbdHlwZV0gPSAkKG5vZGVzKTtcblxuXHRcdHJldHVybiBzZWdzO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBIVE1MIG5lZWRlZCBmb3Igb25lIHJvdyBvZiBhIGZpbGwuIFJlcXVpcmVzIHRoZSBzZWcncyBlbCB0byBiZSByZW5kZXJlZC5cblx0cmVuZGVyRmlsbFJvdzogZnVuY3Rpb24odHlwZSwgc2VnLCBjbGFzc05hbWUpIHtcblx0XHR2YXIgY29sQ250ID0gdGhpcy5jb2xDbnQ7XG5cdFx0dmFyIHN0YXJ0Q29sID0gc2VnLmxlZnRDb2w7XG5cdFx0dmFyIGVuZENvbCA9IHNlZy5yaWdodENvbCArIDE7XG5cdFx0dmFyIHNrZWxldG9uRWw7XG5cdFx0dmFyIHRyRWw7XG5cblx0XHRjbGFzc05hbWUgPSBjbGFzc05hbWUgfHwgdHlwZS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0c2tlbGV0b25FbCA9ICQoXG5cdFx0XHQnPGRpdiBjbGFzcz1cImZjLScgKyBjbGFzc05hbWUgKyAnLXNrZWxldG9uXCI+JyArXG5cdFx0XHRcdCc8dGFibGU+PHRyLz48L3RhYmxlPicgK1xuXHRcdFx0JzwvZGl2Pidcblx0XHQpO1xuXHRcdHRyRWwgPSBza2VsZXRvbkVsLmZpbmQoJ3RyJyk7XG5cblx0XHRpZiAoc3RhcnRDb2wgPiAwKSB7XG5cdFx0XHR0ckVsLmFwcGVuZCgnPHRkIGNvbHNwYW49XCInICsgc3RhcnRDb2wgKyAnXCIvPicpO1xuXHRcdH1cblxuXHRcdHRyRWwuYXBwZW5kKFxuXHRcdFx0c2VnLmVsLmF0dHIoJ2NvbHNwYW4nLCBlbmRDb2wgLSBzdGFydENvbClcblx0XHQpO1xuXG5cdFx0aWYgKGVuZENvbCA8IGNvbENudCkge1xuXHRcdFx0dHJFbC5hcHBlbmQoJzx0ZCBjb2xzcGFuPVwiJyArIChjb2xDbnQgLSBlbmRDb2wpICsgJ1wiLz4nKTtcblx0XHR9XG5cblx0XHR0aGlzLmJvb2tlbmRDZWxscyh0ckVsKTtcblxuXHRcdHJldHVybiBza2VsZXRvbkVsO1xuXHR9XG5cbn0pO1xuXG47O1xuXG4vKiBFdmVudC1yZW5kZXJpbmcgbWV0aG9kcyBmb3IgdGhlIERheUdyaWQgY2xhc3Ncbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5EYXlHcmlkLm1peGluKHtcblxuXHRyb3dTdHJ1Y3RzOiBudWxsLCAvLyBhbiBhcnJheSBvZiBvYmplY3RzLCBlYWNoIGhvbGRpbmcgaW5mb3JtYXRpb24gYWJvdXQgYSByb3cncyBmb3JlZ3JvdW5kIGV2ZW50LXJlbmRlcmluZ1xuXG5cblx0Ly8gVW5yZW5kZXJzIGFsbCBldmVudHMgY3VycmVudGx5IHJlbmRlcmVkIG9uIHRoZSBncmlkXG5cdHVucmVuZGVyRXZlbnRzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnJlbW92ZVNlZ1BvcG92ZXIoKTsgLy8gcmVtb3ZlcyB0aGUgXCJtb3JlLi5cIiBldmVudHMgcG9wb3ZlclxuXHRcdEdyaWQucHJvdG90eXBlLnVucmVuZGVyRXZlbnRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIGNhbGxzIHRoZSBzdXBlci1tZXRob2Rcblx0fSxcblxuXG5cdC8vIFJldHJpZXZlcyBhbGwgcmVuZGVyZWQgc2VnbWVudCBvYmplY3RzIGN1cnJlbnRseSByZW5kZXJlZCBvbiB0aGUgZ3JpZFxuXHRnZXRFdmVudFNlZ3M6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBHcmlkLnByb3RvdHlwZS5nZXRFdmVudFNlZ3MuY2FsbCh0aGlzKSAvLyBnZXQgdGhlIHNlZ21lbnRzIGZyb20gdGhlIHN1cGVyLW1ldGhvZFxuXHRcdFx0LmNvbmNhdCh0aGlzLnBvcG92ZXJTZWdzIHx8IFtdKTsgLy8gYXBwZW5kIHRoZSBzZWdtZW50cyBmcm9tIHRoZSBcIm1vcmUuLi5cIiBwb3BvdmVyXG5cdH0sXG5cblxuXHQvLyBSZW5kZXJzIHRoZSBnaXZlbiBiYWNrZ3JvdW5kIGV2ZW50IHNlZ21lbnRzIG9udG8gdGhlIGdyaWRcblx0cmVuZGVyQmdTZWdzOiBmdW5jdGlvbihzZWdzKSB7XG5cblx0XHQvLyBkb24ndCByZW5kZXIgdGltZWQgYmFja2dyb3VuZCBldmVudHNcblx0XHR2YXIgYWxsRGF5U2VncyA9ICQuZ3JlcChzZWdzLCBmdW5jdGlvbihzZWcpIHtcblx0XHRcdHJldHVybiBzZWcuZXZlbnQuYWxsRGF5O1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIEdyaWQucHJvdG90eXBlLnJlbmRlckJnU2Vncy5jYWxsKHRoaXMsIGFsbERheVNlZ3MpOyAvLyBjYWxsIHRoZSBzdXBlci1tZXRob2Rcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgdGhlIGdpdmVuIGZvcmVncm91bmQgZXZlbnQgc2VnbWVudHMgb250byB0aGUgZ3JpZFxuXHRyZW5kZXJGZ1NlZ3M6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHR2YXIgcm93U3RydWN0cztcblxuXHRcdC8vIHJlbmRlciBhbiBgLmVsYCBvbiBlYWNoIHNlZ1xuXHRcdC8vIHJldHVybnMgYSBzdWJzZXQgb2YgdGhlIHNlZ3MuIHNlZ3MgdGhhdCB3ZXJlIGFjdHVhbGx5IHJlbmRlcmVkXG5cdFx0c2VncyA9IHRoaXMucmVuZGVyRmdTZWdFbHMoc2Vncyk7XG5cblx0XHRyb3dTdHJ1Y3RzID0gdGhpcy5yb3dTdHJ1Y3RzID0gdGhpcy5yZW5kZXJTZWdSb3dzKHNlZ3MpO1xuXG5cdFx0Ly8gYXBwZW5kIHRvIGVhY2ggcm93J3MgY29udGVudCBza2VsZXRvblxuXHRcdHRoaXMucm93RWxzLmVhY2goZnVuY3Rpb24oaSwgcm93Tm9kZSkge1xuXHRcdFx0JChyb3dOb2RlKS5maW5kKCcuZmMtY29udGVudC1za2VsZXRvbiA+IHRhYmxlJykuYXBwZW5kKFxuXHRcdFx0XHRyb3dTdHJ1Y3RzW2ldLnRib2R5RWxcblx0XHRcdCk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gc2VnczsgLy8gcmV0dXJuIG9ubHkgdGhlIHNlZ3MgdGhhdCB3ZXJlIGFjdHVhbGx5IHJlbmRlcmVkXG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYWxsIGN1cnJlbnRseSByZW5kZXJlZCBmb3JlZ3JvdW5kIGV2ZW50IHNlZ21lbnRzXG5cdHVucmVuZGVyRmdTZWdzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgcm93U3RydWN0cyA9IHRoaXMucm93U3RydWN0cyB8fCBbXTtcblx0XHR2YXIgcm93U3RydWN0O1xuXG5cdFx0d2hpbGUgKChyb3dTdHJ1Y3QgPSByb3dTdHJ1Y3RzLnBvcCgpKSkge1xuXHRcdFx0cm93U3RydWN0LnRib2R5RWwucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5yb3dTdHJ1Y3RzID0gbnVsbDtcblx0fSxcblxuXG5cdC8vIFVzZXMgdGhlIGdpdmVuIGV2ZW50cyBhcnJheSB0byBnZW5lcmF0ZSA8dGJvZHk+IGVsZW1lbnRzIHRoYXQgc2hvdWxkIGJlIGFwcGVuZGVkIHRvIGVhY2ggcm93J3MgY29udGVudCBza2VsZXRvbi5cblx0Ly8gUmV0dXJucyBhbiBhcnJheSBvZiByb3dTdHJ1Y3Qgb2JqZWN0cyAoc2VlIHRoZSBib3R0b20gb2YgYHJlbmRlclNlZ1Jvd2ApLlxuXHQvLyBQUkVDT05ESVRJT046IGVhY2ggc2VnbWVudCBzaG91ZCBhbHJlYWR5IGhhdmUgYSByZW5kZXJlZCBhbmQgYXNzaWduZWQgYC5lbGBcblx0cmVuZGVyU2VnUm93czogZnVuY3Rpb24oc2Vncykge1xuXHRcdHZhciByb3dTdHJ1Y3RzID0gW107XG5cdFx0dmFyIHNlZ1Jvd3M7XG5cdFx0dmFyIHJvdztcblxuXHRcdHNlZ1Jvd3MgPSB0aGlzLmdyb3VwU2VnUm93cyhzZWdzKTsgLy8gZ3JvdXAgaW50byBuZXN0ZWQgYXJyYXlzXG5cblx0XHQvLyBpdGVyYXRlIGVhY2ggcm93IG9mIHNlZ21lbnQgZ3JvdXBpbmdzXG5cdFx0Zm9yIChyb3cgPSAwOyByb3cgPCBzZWdSb3dzLmxlbmd0aDsgcm93KyspIHtcblx0XHRcdHJvd1N0cnVjdHMucHVzaChcblx0XHRcdFx0dGhpcy5yZW5kZXJTZWdSb3cocm93LCBzZWdSb3dzW3Jvd10pXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldHVybiByb3dTdHJ1Y3RzO1xuXHR9LFxuXG5cblx0Ly8gQnVpbGRzIHRoZSBIVE1MIHRvIGJlIHVzZWQgZm9yIHRoZSBkZWZhdWx0IGVsZW1lbnQgZm9yIGFuIGluZGl2aWR1YWwgc2VnbWVudFxuXHRmZ1NlZ0h0bWw6IGZ1bmN0aW9uKHNlZywgZGlzYWJsZVJlc2l6aW5nKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGV2ZW50ID0gc2VnLmV2ZW50O1xuXHRcdHZhciBpc0RyYWdnYWJsZSA9IHZpZXcuaXNFdmVudERyYWdnYWJsZShldmVudCk7XG5cdFx0dmFyIGlzUmVzaXphYmxlRnJvbVN0YXJ0ID0gIWRpc2FibGVSZXNpemluZyAmJiBldmVudC5hbGxEYXkgJiZcblx0XHRcdHNlZy5pc1N0YXJ0ICYmIHZpZXcuaXNFdmVudFJlc2l6YWJsZUZyb21TdGFydChldmVudCk7XG5cdFx0dmFyIGlzUmVzaXphYmxlRnJvbUVuZCA9ICFkaXNhYmxlUmVzaXppbmcgJiYgZXZlbnQuYWxsRGF5ICYmXG5cdFx0XHRzZWcuaXNFbmQgJiYgdmlldy5pc0V2ZW50UmVzaXphYmxlRnJvbUVuZChldmVudCk7XG5cdFx0dmFyIGNsYXNzZXMgPSB0aGlzLmdldFNlZ0NsYXNzZXMoc2VnLCBpc0RyYWdnYWJsZSwgaXNSZXNpemFibGVGcm9tU3RhcnQgfHwgaXNSZXNpemFibGVGcm9tRW5kKTtcblx0XHR2YXIgc2tpbkNzcyA9IGNzc1RvU3RyKHRoaXMuZ2V0U2VnU2tpbkNzcyhzZWcpKTtcblx0XHR2YXIgdGltZUh0bWwgPSAnJztcblx0XHR2YXIgdGltZVRleHQ7XG5cdFx0dmFyIHRpdGxlSHRtbDtcblxuXHRcdGNsYXNzZXMudW5zaGlmdCgnZmMtZGF5LWdyaWQtZXZlbnQnLCAnZmMtaC1ldmVudCcpO1xuXG5cdFx0Ly8gT25seSBkaXNwbGF5IGEgdGltZWQgZXZlbnRzIHRpbWUgaWYgaXQgaXMgdGhlIHN0YXJ0aW5nIHNlZ21lbnRcblx0XHRpZiAoc2VnLmlzU3RhcnQpIHtcblx0XHRcdHRpbWVUZXh0ID0gdGhpcy5nZXRFdmVudFRpbWVUZXh0KGV2ZW50KTtcblx0XHRcdGlmICh0aW1lVGV4dCkge1xuXHRcdFx0XHR0aW1lSHRtbCA9ICc8c3BhbiBjbGFzcz1cImZjLXRpbWVcIj4nICsgaHRtbEVzY2FwZSh0aW1lVGV4dCkgKyAnPC9zcGFuPic7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGl0bGVIdG1sID1cblx0XHRcdCc8c3BhbiBjbGFzcz1cImZjLXRpdGxlXCI+JyArXG5cdFx0XHRcdChodG1sRXNjYXBlKGV2ZW50LnRpdGxlIHx8ICcnKSB8fCAnJm5ic3A7JykgKyAvLyB3ZSBhbHdheXMgd2FudCBvbmUgbGluZSBvZiBoZWlnaHRcblx0XHRcdCc8L3NwYW4+JztcblxuXHRcdHJldHVybiAnPGEgY2xhc3M9XCInICsgY2xhc3Nlcy5qb2luKCcgJykgKyAnXCInICtcblx0XHRcdFx0KGV2ZW50LnVybCA/XG5cdFx0XHRcdFx0JyBocmVmPVwiJyArIGh0bWxFc2NhcGUoZXZlbnQudXJsKSArICdcIicgOlxuXHRcdFx0XHRcdCcnXG5cdFx0XHRcdFx0KSArXG5cdFx0XHRcdChza2luQ3NzID9cblx0XHRcdFx0XHQnIHN0eWxlPVwiJyArIHNraW5Dc3MgKyAnXCInIDpcblx0XHRcdFx0XHQnJ1xuXHRcdFx0XHRcdCkgK1xuXHRcdFx0Jz4nICtcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1jb250ZW50XCI+JyArXG5cdFx0XHRcdFx0KHRoaXMuaXNSVEwgP1xuXHRcdFx0XHRcdFx0dGl0bGVIdG1sICsgJyAnICsgdGltZUh0bWwgOiAvLyBwdXQgYSBuYXR1cmFsIHNwYWNlIGluIGJldHdlZW5cblx0XHRcdFx0XHRcdHRpbWVIdG1sICsgJyAnICsgdGl0bGVIdG1sICAgLy9cblx0XHRcdFx0XHRcdCkgK1xuXHRcdFx0XHQnPC9kaXY+JyArXG5cdFx0XHRcdChpc1Jlc2l6YWJsZUZyb21TdGFydCA/XG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1yZXNpemVyIGZjLXN0YXJ0LXJlc2l6ZXJcIiAvPicgOlxuXHRcdFx0XHRcdCcnXG5cdFx0XHRcdFx0KSArXG5cdFx0XHRcdChpc1Jlc2l6YWJsZUZyb21FbmQgP1xuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtcmVzaXplciBmYy1lbmQtcmVzaXplclwiIC8+JyA6XG5cdFx0XHRcdFx0Jydcblx0XHRcdFx0XHQpICtcblx0XHRcdCc8L2E+Jztcblx0fSxcblxuXG5cdC8vIEdpdmVuIGEgcm93ICMgYW5kIGFuIGFycmF5IG9mIHNlZ21lbnRzIGFsbCBpbiB0aGUgc2FtZSByb3csIHJlbmRlciBhIDx0Ym9keT4gZWxlbWVudCwgYSBza2VsZXRvbiB0aGF0IGNvbnRhaW5zXG5cdC8vIHRoZSBzZWdtZW50cy4gUmV0dXJucyBvYmplY3Qgd2l0aCBhIGJ1bmNoIG9mIGludGVybmFsIGRhdGEgYWJvdXQgaG93IHRoZSByZW5kZXIgd2FzIGNhbGN1bGF0ZWQuXG5cdC8vIE5PVEU6IG1vZGlmaWVzIHJvd1NlZ3Ncblx0cmVuZGVyU2VnUm93OiBmdW5jdGlvbihyb3csIHJvd1NlZ3MpIHtcblx0XHR2YXIgY29sQ250ID0gdGhpcy5jb2xDbnQ7XG5cdFx0dmFyIHNlZ0xldmVscyA9IHRoaXMuYnVpbGRTZWdMZXZlbHMocm93U2Vncyk7IC8vIGdyb3VwIGludG8gc3ViLWFycmF5cyBvZiBsZXZlbHNcblx0XHR2YXIgbGV2ZWxDbnQgPSBNYXRoLm1heCgxLCBzZWdMZXZlbHMubGVuZ3RoKTsgLy8gZW5zdXJlIGF0IGxlYXN0IG9uZSBsZXZlbFxuXHRcdHZhciB0Ym9keSA9ICQoJzx0Ym9keS8+Jyk7XG5cdFx0dmFyIHNlZ01hdHJpeCA9IFtdOyAvLyBsb29rdXAgZm9yIHdoaWNoIHNlZ21lbnRzIGFyZSByZW5kZXJlZCBpbnRvIHdoaWNoIGxldmVsK2NvbCBjZWxsc1xuXHRcdHZhciBjZWxsTWF0cml4ID0gW107IC8vIGxvb2t1cCBmb3IgYWxsIDx0ZD4gZWxlbWVudHMgb2YgdGhlIGxldmVsK2NvbCBtYXRyaXhcblx0XHR2YXIgbG9uZUNlbGxNYXRyaXggPSBbXTsgLy8gbG9va3VwIGZvciA8dGQ+IGVsZW1lbnRzIHRoYXQgb25seSB0YWtlIHVwIGEgc2luZ2xlIGNvbHVtblxuXHRcdHZhciBpLCBsZXZlbFNlZ3M7XG5cdFx0dmFyIGNvbDtcblx0XHR2YXIgdHI7XG5cdFx0dmFyIGosIHNlZztcblx0XHR2YXIgdGQ7XG5cblx0XHQvLyBwb3B1bGF0ZXMgZW1wdHkgY2VsbHMgZnJvbSB0aGUgY3VycmVudCBjb2x1bW4gKGBjb2xgKSB0byBgZW5kQ29sYFxuXHRcdGZ1bmN0aW9uIGVtcHR5Q2VsbHNVbnRpbChlbmRDb2wpIHtcblx0XHRcdHdoaWxlIChjb2wgPCBlbmRDb2wpIHtcblx0XHRcdFx0Ly8gdHJ5IHRvIGdyYWIgYSBjZWxsIGZyb20gdGhlIGxldmVsIGFib3ZlIGFuZCBleHRlbmQgaXRzIHJvd3NwYW4uIG90aGVyd2lzZSwgY3JlYXRlIGEgZnJlc2ggY2VsbFxuXHRcdFx0XHR0ZCA9IChsb25lQ2VsbE1hdHJpeFtpIC0gMV0gfHwgW10pW2NvbF07XG5cdFx0XHRcdGlmICh0ZCkge1xuXHRcdFx0XHRcdHRkLmF0dHIoXG5cdFx0XHRcdFx0XHQncm93c3BhbicsXG5cdFx0XHRcdFx0XHRwYXJzZUludCh0ZC5hdHRyKCdyb3dzcGFuJykgfHwgMSwgMTApICsgMVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dGQgPSAkKCc8dGQvPicpO1xuXHRcdFx0XHRcdHRyLmFwcGVuZCh0ZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2VsbE1hdHJpeFtpXVtjb2xdID0gdGQ7XG5cdFx0XHRcdGxvbmVDZWxsTWF0cml4W2ldW2NvbF0gPSB0ZDtcblx0XHRcdFx0Y29sKys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGxldmVsQ250OyBpKyspIHsgLy8gaXRlcmF0ZSB0aHJvdWdoIGFsbCBsZXZlbHNcblx0XHRcdGxldmVsU2VncyA9IHNlZ0xldmVsc1tpXTtcblx0XHRcdGNvbCA9IDA7XG5cdFx0XHR0ciA9ICQoJzx0ci8+Jyk7XG5cblx0XHRcdHNlZ01hdHJpeC5wdXNoKFtdKTtcblx0XHRcdGNlbGxNYXRyaXgucHVzaChbXSk7XG5cdFx0XHRsb25lQ2VsbE1hdHJpeC5wdXNoKFtdKTtcblxuXHRcdFx0Ly8gbGV2ZWxDbnQgbWlnaHQgYmUgMSBldmVuIHRob3VnaCB0aGVyZSBhcmUgbm8gYWN0dWFsIGxldmVscy4gcHJvdGVjdCBhZ2FpbnN0IHRoaXMuXG5cdFx0XHQvLyB0aGlzIHNpbmdsZSBlbXB0eSByb3cgaXMgdXNlZnVsIGZvciBzdHlsaW5nLlxuXHRcdFx0aWYgKGxldmVsU2Vncykge1xuXHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgbGV2ZWxTZWdzLmxlbmd0aDsgaisrKSB7IC8vIGl0ZXJhdGUgdGhyb3VnaCBzZWdtZW50cyBpbiBsZXZlbFxuXHRcdFx0XHRcdHNlZyA9IGxldmVsU2Vnc1tqXTtcblxuXHRcdFx0XHRcdGVtcHR5Q2VsbHNVbnRpbChzZWcubGVmdENvbCk7XG5cblx0XHRcdFx0XHQvLyBjcmVhdGUgYSBjb250YWluZXIgdGhhdCBvY2N1cGllcyBvciBtb3JlIGNvbHVtbnMuIGFwcGVuZCB0aGUgZXZlbnQgZWxlbWVudC5cblx0XHRcdFx0XHR0ZCA9ICQoJzx0ZCBjbGFzcz1cImZjLWV2ZW50LWNvbnRhaW5lclwiLz4nKS5hcHBlbmQoc2VnLmVsKTtcblx0XHRcdFx0XHRpZiAoc2VnLmxlZnRDb2wgIT0gc2VnLnJpZ2h0Q29sKSB7XG5cdFx0XHRcdFx0XHR0ZC5hdHRyKCdjb2xzcGFuJywgc2VnLnJpZ2h0Q29sIC0gc2VnLmxlZnRDb2wgKyAxKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7IC8vIGEgc2luZ2xlLWNvbHVtbiBzZWdtZW50XG5cdFx0XHRcdFx0XHRsb25lQ2VsbE1hdHJpeFtpXVtjb2xdID0gdGQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0d2hpbGUgKGNvbCA8PSBzZWcucmlnaHRDb2wpIHtcblx0XHRcdFx0XHRcdGNlbGxNYXRyaXhbaV1bY29sXSA9IHRkO1xuXHRcdFx0XHRcdFx0c2VnTWF0cml4W2ldW2NvbF0gPSBzZWc7XG5cdFx0XHRcdFx0XHRjb2wrKztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0ci5hcHBlbmQodGQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGVtcHR5Q2VsbHNVbnRpbChjb2xDbnQpOyAvLyBmaW5pc2ggb2ZmIHRoZSByb3dcblx0XHRcdHRoaXMuYm9va2VuZENlbGxzKHRyKTtcblx0XHRcdHRib2R5LmFwcGVuZCh0cik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHsgLy8gYSBcInJvd1N0cnVjdFwiXG5cdFx0XHRyb3c6IHJvdywgLy8gdGhlIHJvdyBudW1iZXJcblx0XHRcdHRib2R5RWw6IHRib2R5LFxuXHRcdFx0Y2VsbE1hdHJpeDogY2VsbE1hdHJpeCxcblx0XHRcdHNlZ01hdHJpeDogc2VnTWF0cml4LFxuXHRcdFx0c2VnTGV2ZWxzOiBzZWdMZXZlbHMsXG5cdFx0XHRzZWdzOiByb3dTZWdzXG5cdFx0fTtcblx0fSxcblxuXG5cdC8vIFN0YWNrcyBhIGZsYXQgYXJyYXkgb2Ygc2VnbWVudHMsIHdoaWNoIGFyZSBhbGwgYXNzdW1lZCB0byBiZSBpbiB0aGUgc2FtZSByb3csIGludG8gc3ViYXJyYXlzIG9mIHZlcnRpY2FsIGxldmVscy5cblx0Ly8gTk9URTogbW9kaWZpZXMgc2Vnc1xuXHRidWlsZFNlZ0xldmVsczogZnVuY3Rpb24oc2Vncykge1xuXHRcdHZhciBsZXZlbHMgPSBbXTtcblx0XHR2YXIgaSwgc2VnO1xuXHRcdHZhciBqO1xuXG5cdFx0Ly8gR2l2ZSBwcmVmZXJlbmNlIHRvIGVsZW1lbnRzIHdpdGggY2VydGFpbiBjcml0ZXJpYSwgc28gdGhleSBoYXZlXG5cdFx0Ly8gYSBjaGFuY2UgdG8gYmUgY2xvc2VyIHRvIHRoZSB0b3AuXG5cdFx0dGhpcy5zb3J0RXZlbnRTZWdzKHNlZ3MpO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNlZyA9IHNlZ3NbaV07XG5cblx0XHRcdC8vIGxvb3AgdGhyb3VnaCBsZXZlbHMsIHN0YXJ0aW5nIHdpdGggdGhlIHRvcG1vc3QsIHVudGlsIHRoZSBzZWdtZW50IGRvZXNuJ3QgY29sbGlkZSB3aXRoIG90aGVyIHNlZ21lbnRzXG5cdFx0XHRmb3IgKGogPSAwOyBqIDwgbGV2ZWxzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGlmICghaXNEYXlTZWdDb2xsaXNpb24oc2VnLCBsZXZlbHNbal0pKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIGBqYCBub3cgaG9sZHMgdGhlIGRlc2lyZWQgc3Vicm93IGluZGV4XG5cdFx0XHRzZWcubGV2ZWwgPSBqO1xuXG5cdFx0XHQvLyBjcmVhdGUgbmV3IGxldmVsIGFycmF5IGlmIG5lZWRlZCBhbmQgYXBwZW5kIHNlZ21lbnRcblx0XHRcdChsZXZlbHNbal0gfHwgKGxldmVsc1tqXSA9IFtdKSkucHVzaChzZWcpO1xuXHRcdH1cblxuXHRcdC8vIG9yZGVyIHNlZ21lbnRzIGxlZnQtdG8tcmlnaHQuIHZlcnkgaW1wb3J0YW50IGlmIGNhbGVuZGFyIGlzIFJUTFxuXHRcdGZvciAoaiA9IDA7IGogPCBsZXZlbHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGxldmVsc1tqXS5zb3J0KGNvbXBhcmVEYXlTZWdDb2xzKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbGV2ZWxzO1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYSBmbGF0IGFycmF5IG9mIHNlZ21lbnRzLCByZXR1cm4gYW4gYXJyYXkgb2Ygc3ViLWFycmF5cywgZ3JvdXBlZCBieSBlYWNoIHNlZ21lbnQncyByb3dcblx0Z3JvdXBTZWdSb3dzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0dmFyIHNlZ1Jvd3MgPSBbXTtcblx0XHR2YXIgaTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLnJvd0NudDsgaSsrKSB7XG5cdFx0XHRzZWdSb3dzLnB1c2goW10pO1xuXHRcdH1cblxuXHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzZWdSb3dzW3NlZ3NbaV0ucm93XS5wdXNoKHNlZ3NbaV0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBzZWdSb3dzO1xuXHR9XG5cbn0pO1xuXG5cbi8vIENvbXB1dGVzIHdoZXRoZXIgdHdvIHNlZ21lbnRzJyBjb2x1bW5zIGNvbGxpZGUuIFRoZXkgYXJlIGFzc3VtZWQgdG8gYmUgaW4gdGhlIHNhbWUgcm93LlxuZnVuY3Rpb24gaXNEYXlTZWdDb2xsaXNpb24oc2VnLCBvdGhlclNlZ3MpIHtcblx0dmFyIGksIG90aGVyU2VnO1xuXG5cdGZvciAoaSA9IDA7IGkgPCBvdGhlclNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRvdGhlclNlZyA9IG90aGVyU2Vnc1tpXTtcblxuXHRcdGlmIChcblx0XHRcdG90aGVyU2VnLmxlZnRDb2wgPD0gc2VnLnJpZ2h0Q29sICYmXG5cdFx0XHRvdGhlclNlZy5yaWdodENvbCA+PSBzZWcubGVmdENvbFxuXHRcdCkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZhbHNlO1xufVxuXG5cbi8vIEEgY21wIGZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB0aGUgbGVmdG1vc3QgZXZlbnRcbmZ1bmN0aW9uIGNvbXBhcmVEYXlTZWdDb2xzKGEsIGIpIHtcblx0cmV0dXJuIGEubGVmdENvbCAtIGIubGVmdENvbDtcbn1cblxuOztcblxuLyogTWV0aG9kcyByZWxhdGUgdG8gbGltaXRpbmcgdGhlIG51bWJlciBldmVudHMgZm9yIGEgZ2l2ZW4gZGF5IG9uIGEgRGF5R3JpZFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vLyBOT1RFOiBhbGwgdGhlIHNlZ3MgYmVpbmcgcGFzc2VkIGFyb3VuZCBpbiBoZXJlIGFyZSBmb3JlZ3JvdW5kIHNlZ3NcblxuRGF5R3JpZC5taXhpbih7XG5cblx0c2VnUG9wb3ZlcjogbnVsbCwgLy8gdGhlIFBvcG92ZXIgdGhhdCBob2xkcyBldmVudHMgdGhhdCBjYW4ndCBmaXQgaW4gYSBjZWxsLiBudWxsIHdoZW4gbm90IHZpc2libGVcblx0cG9wb3ZlclNlZ3M6IG51bGwsIC8vIGFuIGFycmF5IG9mIHNlZ21lbnQgb2JqZWN0cyB0aGF0IHRoZSBzZWdQb3BvdmVyIGhvbGRzLiBudWxsIHdoZW4gbm90IHZpc2libGVcblxuXG5cdHJlbW92ZVNlZ1BvcG92ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLnNlZ1BvcG92ZXIpIHtcblx0XHRcdHRoaXMuc2VnUG9wb3Zlci5oaWRlKCk7IC8vIGluIGhhbmRsZXIsIHdpbGwgY2FsbCBzZWdQb3BvdmVyJ3MgcmVtb3ZlRWxlbWVudFxuXHRcdH1cblx0fSxcblxuXG5cdC8vIExpbWl0cyB0aGUgbnVtYmVyIG9mIFwibGV2ZWxzXCIgKHZlcnRpY2FsbHkgc3RhY2tpbmcgbGF5ZXJzIG9mIGV2ZW50cykgZm9yIGVhY2ggcm93IG9mIHRoZSBncmlkLlxuXHQvLyBgbGV2ZWxMaW1pdGAgY2FuIGJlIGZhbHNlIChkb24ndCBsaW1pdCksIGEgbnVtYmVyLCBvciB0cnVlIChzaG91bGQgYmUgY29tcHV0ZWQpLlxuXHRsaW1pdFJvd3M6IGZ1bmN0aW9uKGxldmVsTGltaXQpIHtcblx0XHR2YXIgcm93U3RydWN0cyA9IHRoaXMucm93U3RydWN0cyB8fCBbXTtcblx0XHR2YXIgcm93OyAvLyByb3cgI1xuXHRcdHZhciByb3dMZXZlbExpbWl0O1xuXG5cdFx0Zm9yIChyb3cgPSAwOyByb3cgPCByb3dTdHJ1Y3RzLmxlbmd0aDsgcm93KyspIHtcblx0XHRcdHRoaXMudW5saW1pdFJvdyhyb3cpO1xuXG5cdFx0XHRpZiAoIWxldmVsTGltaXQpIHtcblx0XHRcdFx0cm93TGV2ZWxMaW1pdCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIGxldmVsTGltaXQgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdHJvd0xldmVsTGltaXQgPSBsZXZlbExpbWl0O1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHJvd0xldmVsTGltaXQgPSB0aGlzLmNvbXB1dGVSb3dMZXZlbExpbWl0KHJvdyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChyb3dMZXZlbExpbWl0ICE9PSBmYWxzZSkge1xuXHRcdFx0XHR0aGlzLmxpbWl0Um93KHJvdywgcm93TGV2ZWxMaW1pdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgdGhlIG51bWJlciBvZiBsZXZlbHMgYSByb3cgd2lsbCBhY2NvbW9kYXRlIHdpdGhvdXQgZ29pbmcgb3V0c2lkZSBpdHMgYm91bmRzLlxuXHQvLyBBc3N1bWVzIHRoZSByb3cgaXMgXCJyaWdpZFwiIChtYWludGFpbnMgYSBjb25zdGFudCBoZWlnaHQgcmVnYXJkbGVzcyBvZiB3aGF0IGlzIGluc2lkZSkuXG5cdC8vIGByb3dgIGlzIHRoZSByb3cgbnVtYmVyLlxuXHRjb21wdXRlUm93TGV2ZWxMaW1pdDogZnVuY3Rpb24ocm93KSB7XG5cdFx0dmFyIHJvd0VsID0gdGhpcy5yb3dFbHMuZXEocm93KTsgLy8gdGhlIGNvbnRhaW5pbmcgXCJmYWtlXCIgcm93IGRpdlxuXHRcdHZhciByb3dIZWlnaHQgPSByb3dFbC5oZWlnaHQoKTsgLy8gVE9ETzogY2FjaGUgc29tZWhvdz9cblx0XHR2YXIgdHJFbHMgPSB0aGlzLnJvd1N0cnVjdHNbcm93XS50Ym9keUVsLmNoaWxkcmVuKCk7XG5cdFx0dmFyIGksIHRyRWw7XG5cdFx0dmFyIHRySGVpZ2h0O1xuXG5cdFx0ZnVuY3Rpb24gaXRlcklubmVySGVpZ2h0cyhpLCBjaGlsZE5vZGUpIHtcblx0XHRcdHRySGVpZ2h0ID0gTWF0aC5tYXgodHJIZWlnaHQsICQoY2hpbGROb2RlKS5vdXRlckhlaWdodCgpKTtcblx0XHR9XG5cblx0XHQvLyBSZXZlYWwgb25lIGxldmVsIDx0cj4gYXQgYSB0aW1lIGFuZCBzdG9wIHdoZW4gd2UgZmluZCBvbmUgb3V0IG9mIGJvdW5kc1xuXHRcdGZvciAoaSA9IDA7IGkgPCB0ckVscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dHJFbCA9IHRyRWxzLmVxKGkpLnJlbW92ZUNsYXNzKCdmYy1saW1pdGVkJyk7IC8vIHJlc2V0IHRvIG9yaWdpbmFsIHN0YXRlIChyZXZlYWwpXG5cblx0XHRcdC8vIHdpdGggcm93c3BhbnM+MSBhbmQgSUU4LCB0ckVsLm91dGVySGVpZ2h0KCkgd291bGQgcmV0dXJuIHRoZSBoZWlnaHQgb2YgdGhlIGxhcmdlc3QgY2VsbCxcblx0XHRcdC8vIHNvIGluc3RlYWQsIGZpbmQgdGhlIHRhbGxlc3QgaW5uZXIgY29udGVudCBlbGVtZW50LlxuXHRcdFx0dHJIZWlnaHQgPSAwO1xuXHRcdFx0dHJFbC5maW5kKCc+IHRkID4gOmZpcnN0LWNoaWxkJykuZWFjaChpdGVySW5uZXJIZWlnaHRzKTtcblxuXHRcdFx0aWYgKHRyRWwucG9zaXRpb24oKS50b3AgKyB0ckhlaWdodCA+IHJvd0hlaWdodCkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7IC8vIHNob3VsZCBub3QgbGltaXQgYXQgYWxsXG5cdH0sXG5cblxuXHQvLyBMaW1pdHMgdGhlIGdpdmVuIGdyaWQgcm93IHRvIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsZXZlbHMgYW5kIGluamVjdHMgXCJtb3JlXCIgbGlua3MgaWYgbmVjZXNzYXJ5LlxuXHQvLyBgcm93YCBpcyB0aGUgcm93IG51bWJlci5cblx0Ly8gYGxldmVsTGltaXRgIGlzIGEgbnVtYmVyIGZvciB0aGUgbWF4aW11bSAoaW5jbHVzaXZlKSBudW1iZXIgb2YgbGV2ZWxzIGFsbG93ZWQuXG5cdGxpbWl0Um93OiBmdW5jdGlvbihyb3csIGxldmVsTGltaXQpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciByb3dTdHJ1Y3QgPSB0aGlzLnJvd1N0cnVjdHNbcm93XTtcblx0XHR2YXIgbW9yZU5vZGVzID0gW107IC8vIGFycmF5IG9mIFwibW9yZVwiIDxhPiBsaW5rcyBhbmQgPHRkPiBET00gbm9kZXNcblx0XHR2YXIgY29sID0gMDsgLy8gY29sICMsIGxlZnQtdG8tcmlnaHQgKG5vdCBjaHJvbm9sb2dpY2FsbHkpXG5cdFx0dmFyIGxldmVsU2VnczsgLy8gYXJyYXkgb2Ygc2VnbWVudCBvYmplY3RzIGluIHRoZSBsYXN0IGFsbG93YWJsZSBsZXZlbCwgb3JkZXJlZCBsZWZ0LXRvLXJpZ2h0XG5cdFx0dmFyIGNlbGxNYXRyaXg7IC8vIGEgbWF0cml4IChieSBsZXZlbCwgdGhlbiBjb2x1bW4pIG9mIGFsbCA8dGQ+IGpRdWVyeSBlbGVtZW50cyBpbiB0aGUgcm93XG5cdFx0dmFyIGxpbWl0ZWROb2RlczsgLy8gYXJyYXkgb2YgdGVtcG9yYXJpbHkgaGlkZGVuIGxldmVsIDx0cj4gYW5kIHNlZ21lbnQgPHRkPiBET00gbm9kZXNcblx0XHR2YXIgaSwgc2VnO1xuXHRcdHZhciBzZWdzQmVsb3c7IC8vIGFycmF5IG9mIHNlZ21lbnQgb2JqZWN0cyBiZWxvdyBgc2VnYCBpbiB0aGUgY3VycmVudCBgY29sYFxuXHRcdHZhciB0b3RhbFNlZ3NCZWxvdzsgLy8gdG90YWwgbnVtYmVyIG9mIHNlZ21lbnRzIGJlbG93IGBzZWdgIGluIGFueSBvZiB0aGUgY29sdW1ucyBgc2VnYCBvY2N1cGllc1xuXHRcdHZhciBjb2xTZWdzQmVsb3c7IC8vIGFycmF5IG9mIHNlZ21lbnQgYXJyYXlzLCBiZWxvdyBzZWcsIG9uZSBmb3IgZWFjaCBjb2x1bW4gKG9mZnNldCBmcm9tIHNlZ3MncyBmaXJzdCBjb2x1bW4pXG5cdFx0dmFyIHRkLCByb3dzcGFuO1xuXHRcdHZhciBzZWdNb3JlTm9kZXM7IC8vIGFycmF5IG9mIFwibW9yZVwiIDx0ZD4gY2VsbHMgdGhhdCB3aWxsIHN0YW5kLWluIGZvciB0aGUgY3VycmVudCBzZWcncyBjZWxsXG5cdFx0dmFyIGo7XG5cdFx0dmFyIG1vcmVUZCwgbW9yZVdyYXAsIG1vcmVMaW5rO1xuXG5cdFx0Ly8gSXRlcmF0ZXMgdGhyb3VnaCBlbXB0eSBsZXZlbCBjZWxscyBhbmQgcGxhY2VzIFwibW9yZVwiIGxpbmtzIGluc2lkZSBpZiBuZWVkIGJlXG5cdFx0ZnVuY3Rpb24gZW1wdHlDZWxsc1VudGlsKGVuZENvbCkgeyAvLyBnb2VzIGZyb20gY3VycmVudCBgY29sYCB0byBgZW5kQ29sYFxuXHRcdFx0d2hpbGUgKGNvbCA8IGVuZENvbCkge1xuXHRcdFx0XHRzZWdzQmVsb3cgPSBfdGhpcy5nZXRDZWxsU2Vncyhyb3csIGNvbCwgbGV2ZWxMaW1pdCk7XG5cdFx0XHRcdGlmIChzZWdzQmVsb3cubGVuZ3RoKSB7XG5cdFx0XHRcdFx0dGQgPSBjZWxsTWF0cml4W2xldmVsTGltaXQgLSAxXVtjb2xdO1xuXHRcdFx0XHRcdG1vcmVMaW5rID0gX3RoaXMucmVuZGVyTW9yZUxpbmsocm93LCBjb2wsIHNlZ3NCZWxvdyk7XG5cdFx0XHRcdFx0bW9yZVdyYXAgPSAkKCc8ZGl2Lz4nKS5hcHBlbmQobW9yZUxpbmspO1xuXHRcdFx0XHRcdHRkLmFwcGVuZChtb3JlV3JhcCk7XG5cdFx0XHRcdFx0bW9yZU5vZGVzLnB1c2gobW9yZVdyYXBbMF0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbCsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChsZXZlbExpbWl0ICYmIGxldmVsTGltaXQgPCByb3dTdHJ1Y3Quc2VnTGV2ZWxzLmxlbmd0aCkgeyAvLyBpcyBpdCBhY3R1YWxseSBvdmVyIHRoZSBsaW1pdD9cblx0XHRcdGxldmVsU2VncyA9IHJvd1N0cnVjdC5zZWdMZXZlbHNbbGV2ZWxMaW1pdCAtIDFdO1xuXHRcdFx0Y2VsbE1hdHJpeCA9IHJvd1N0cnVjdC5jZWxsTWF0cml4O1xuXG5cdFx0XHRsaW1pdGVkTm9kZXMgPSByb3dTdHJ1Y3QudGJvZHlFbC5jaGlsZHJlbigpLnNsaWNlKGxldmVsTGltaXQpIC8vIGdldCBsZXZlbCA8dHI+IGVsZW1lbnRzIHBhc3QgdGhlIGxpbWl0XG5cdFx0XHRcdC5hZGRDbGFzcygnZmMtbGltaXRlZCcpLmdldCgpOyAvLyBoaWRlIGVsZW1lbnRzIGFuZCBnZXQgYSBzaW1wbGUgRE9NLW5vZGVzIGFycmF5XG5cblx0XHRcdC8vIGl0ZXJhdGUgdGhvdWdoIHNlZ21lbnRzIGluIHRoZSBsYXN0IGFsbG93YWJsZSBsZXZlbFxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGxldmVsU2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRzZWcgPSBsZXZlbFNlZ3NbaV07XG5cdFx0XHRcdGVtcHR5Q2VsbHNVbnRpbChzZWcubGVmdENvbCk7IC8vIHByb2Nlc3MgZW1wdHkgY2VsbHMgYmVmb3JlIHRoZSBzZWdtZW50XG5cblx0XHRcdFx0Ly8gZGV0ZXJtaW5lICphbGwqIHNlZ21lbnRzIGJlbG93IGBzZWdgIHRoYXQgb2NjdXB5IHRoZSBzYW1lIGNvbHVtbnNcblx0XHRcdFx0Y29sU2Vnc0JlbG93ID0gW107XG5cdFx0XHRcdHRvdGFsU2Vnc0JlbG93ID0gMDtcblx0XHRcdFx0d2hpbGUgKGNvbCA8PSBzZWcucmlnaHRDb2wpIHtcblx0XHRcdFx0XHRzZWdzQmVsb3cgPSB0aGlzLmdldENlbGxTZWdzKHJvdywgY29sLCBsZXZlbExpbWl0KTtcblx0XHRcdFx0XHRjb2xTZWdzQmVsb3cucHVzaChzZWdzQmVsb3cpO1xuXHRcdFx0XHRcdHRvdGFsU2Vnc0JlbG93ICs9IHNlZ3NCZWxvdy5sZW5ndGg7XG5cdFx0XHRcdFx0Y29sKys7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodG90YWxTZWdzQmVsb3cpIHsgLy8gZG8gd2UgbmVlZCB0byByZXBsYWNlIHRoaXMgc2VnbWVudCB3aXRoIG9uZSBvciBtYW55IFwibW9yZVwiIGxpbmtzP1xuXHRcdFx0XHRcdHRkID0gY2VsbE1hdHJpeFtsZXZlbExpbWl0IC0gMV1bc2VnLmxlZnRDb2xdOyAvLyB0aGUgc2VnbWVudCdzIHBhcmVudCBjZWxsXG5cdFx0XHRcdFx0cm93c3BhbiA9IHRkLmF0dHIoJ3Jvd3NwYW4nKSB8fCAxO1xuXHRcdFx0XHRcdHNlZ01vcmVOb2RlcyA9IFtdO1xuXG5cdFx0XHRcdFx0Ly8gbWFrZSBhIHJlcGxhY2VtZW50IDx0ZD4gZm9yIGVhY2ggY29sdW1uIHRoZSBzZWdtZW50IG9jY3VwaWVzLiB3aWxsIGJlIG9uZSBmb3IgZWFjaCBjb2xzcGFuXG5cdFx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IGNvbFNlZ3NCZWxvdy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdFx0bW9yZVRkID0gJCgnPHRkIGNsYXNzPVwiZmMtbW9yZS1jZWxsXCIvPicpLmF0dHIoJ3Jvd3NwYW4nLCByb3dzcGFuKTtcblx0XHRcdFx0XHRcdHNlZ3NCZWxvdyA9IGNvbFNlZ3NCZWxvd1tqXTtcblx0XHRcdFx0XHRcdG1vcmVMaW5rID0gdGhpcy5yZW5kZXJNb3JlTGluayhcblx0XHRcdFx0XHRcdFx0cm93LFxuXHRcdFx0XHRcdFx0XHRzZWcubGVmdENvbCArIGosXG5cdFx0XHRcdFx0XHRcdFsgc2VnIF0uY29uY2F0KHNlZ3NCZWxvdykgLy8gY291bnQgc2VnIGFzIGhpZGRlbiB0b29cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRtb3JlV3JhcCA9ICQoJzxkaXYvPicpLmFwcGVuZChtb3JlTGluayk7XG5cdFx0XHRcdFx0XHRtb3JlVGQuYXBwZW5kKG1vcmVXcmFwKTtcblx0XHRcdFx0XHRcdHNlZ01vcmVOb2Rlcy5wdXNoKG1vcmVUZFswXSk7XG5cdFx0XHRcdFx0XHRtb3JlTm9kZXMucHVzaChtb3JlVGRbMF0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRkLmFkZENsYXNzKCdmYy1saW1pdGVkJykuYWZ0ZXIoJChzZWdNb3JlTm9kZXMpKTsgLy8gaGlkZSBvcmlnaW5hbCA8dGQ+IGFuZCBpbmplY3QgcmVwbGFjZW1lbnRzXG5cdFx0XHRcdFx0bGltaXRlZE5vZGVzLnB1c2godGRbMF0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGVtcHR5Q2VsbHNVbnRpbCh0aGlzLmNvbENudCk7IC8vIGZpbmlzaCBvZmYgdGhlIGxldmVsXG5cdFx0XHRyb3dTdHJ1Y3QubW9yZUVscyA9ICQobW9yZU5vZGVzKTsgLy8gZm9yIGVhc3kgdW5kb2luZyBsYXRlclxuXHRcdFx0cm93U3RydWN0LmxpbWl0ZWRFbHMgPSAkKGxpbWl0ZWROb2Rlcyk7IC8vIGZvciBlYXN5IHVuZG9pbmcgbGF0ZXJcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBSZXZlYWxzIGFsbCBsZXZlbHMgYW5kIHJlbW92ZXMgYWxsIFwibW9yZVwiLXJlbGF0ZWQgZWxlbWVudHMgZm9yIGEgZ3JpZCdzIHJvdy5cblx0Ly8gYHJvd2AgaXMgYSByb3cgbnVtYmVyLlxuXHR1bmxpbWl0Um93OiBmdW5jdGlvbihyb3cpIHtcblx0XHR2YXIgcm93U3RydWN0ID0gdGhpcy5yb3dTdHJ1Y3RzW3Jvd107XG5cblx0XHRpZiAocm93U3RydWN0Lm1vcmVFbHMpIHtcblx0XHRcdHJvd1N0cnVjdC5tb3JlRWxzLnJlbW92ZSgpO1xuXHRcdFx0cm93U3RydWN0Lm1vcmVFbHMgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChyb3dTdHJ1Y3QubGltaXRlZEVscykge1xuXHRcdFx0cm93U3RydWN0LmxpbWl0ZWRFbHMucmVtb3ZlQ2xhc3MoJ2ZjLWxpbWl0ZWQnKTtcblx0XHRcdHJvd1N0cnVjdC5saW1pdGVkRWxzID0gbnVsbDtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBSZW5kZXJzIGFuIDxhPiBlbGVtZW50IHRoYXQgcmVwcmVzZW50cyBoaWRkZW4gZXZlbnQgZWxlbWVudCBmb3IgYSBjZWxsLlxuXHQvLyBSZXNwb25zaWJsZSBmb3IgYXR0YWNoaW5nIGNsaWNrIGhhbmRsZXIgYXMgd2VsbC5cblx0cmVuZGVyTW9yZUxpbms6IGZ1bmN0aW9uKHJvdywgY29sLCBoaWRkZW5TZWdzKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblxuXHRcdHJldHVybiAkKCc8YSBjbGFzcz1cImZjLW1vcmVcIi8+Jylcblx0XHRcdC50ZXh0KFxuXHRcdFx0XHR0aGlzLmdldE1vcmVMaW5rVGV4dChoaWRkZW5TZWdzLmxlbmd0aClcblx0XHRcdClcblx0XHRcdC5vbignY2xpY2snLCBmdW5jdGlvbihldikge1xuXHRcdFx0XHR2YXIgY2xpY2tPcHRpb24gPSB2aWV3Lm9wdCgnZXZlbnRMaW1pdENsaWNrJyk7XG5cdFx0XHRcdHZhciBkYXRlID0gX3RoaXMuZ2V0Q2VsbERhdGUocm93LCBjb2wpO1xuXHRcdFx0XHR2YXIgbW9yZUVsID0gJCh0aGlzKTtcblx0XHRcdFx0dmFyIGRheUVsID0gX3RoaXMuZ2V0Q2VsbEVsKHJvdywgY29sKTtcblx0XHRcdFx0dmFyIGFsbFNlZ3MgPSBfdGhpcy5nZXRDZWxsU2Vncyhyb3csIGNvbCk7XG5cblx0XHRcdFx0Ly8gcmVzY29wZSB0aGUgc2VnbWVudHMgdG8gYmUgd2l0aGluIHRoZSBjZWxsJ3MgZGF0ZVxuXHRcdFx0XHR2YXIgcmVzbGljZWRBbGxTZWdzID0gX3RoaXMucmVzbGljZURheVNlZ3MoYWxsU2VncywgZGF0ZSk7XG5cdFx0XHRcdHZhciByZXNsaWNlZEhpZGRlblNlZ3MgPSBfdGhpcy5yZXNsaWNlRGF5U2VncyhoaWRkZW5TZWdzLCBkYXRlKTtcblxuXHRcdFx0XHRpZiAodHlwZW9mIGNsaWNrT3B0aW9uID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Ly8gdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSBhbiBhdG9taWMgb3B0aW9uXG5cdFx0XHRcdFx0Y2xpY2tPcHRpb24gPSB2aWV3LnB1YmxpY2x5VHJpZ2dlcignZXZlbnRMaW1pdENsaWNrJywgbnVsbCwge1xuXHRcdFx0XHRcdFx0ZGF0ZTogZGF0ZSxcblx0XHRcdFx0XHRcdGRheUVsOiBkYXlFbCxcblx0XHRcdFx0XHRcdG1vcmVFbDogbW9yZUVsLFxuXHRcdFx0XHRcdFx0c2VnczogcmVzbGljZWRBbGxTZWdzLFxuXHRcdFx0XHRcdFx0aGlkZGVuU2VnczogcmVzbGljZWRIaWRkZW5TZWdzXG5cdFx0XHRcdFx0fSwgZXYpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGNsaWNrT3B0aW9uID09PSAncG9wb3ZlcicpIHtcblx0XHRcdFx0XHRfdGhpcy5zaG93U2VnUG9wb3Zlcihyb3csIGNvbCwgbW9yZUVsLCByZXNsaWNlZEFsbFNlZ3MpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBjbGlja09wdGlvbiA9PT0gJ3N0cmluZycpIHsgLy8gYSB2aWV3IG5hbWVcblx0XHRcdFx0XHR2aWV3LmNhbGVuZGFyLnpvb21UbyhkYXRlLCBjbGlja09wdGlvbik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gUmV2ZWFscyB0aGUgcG9wb3ZlciB0aGF0IGRpc3BsYXlzIGFsbCBldmVudHMgd2l0aGluIGEgY2VsbFxuXHRzaG93U2VnUG9wb3ZlcjogZnVuY3Rpb24ocm93LCBjb2wsIG1vcmVMaW5rLCBzZWdzKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgbW9yZVdyYXAgPSBtb3JlTGluay5wYXJlbnQoKTsgLy8gdGhlIDxkaXY+IHdyYXBwZXIgYXJvdW5kIHRoZSA8YT5cblx0XHR2YXIgdG9wRWw7IC8vIHRoZSBlbGVtZW50IHdlIHdhbnQgdG8gbWF0Y2ggdGhlIHRvcCBjb29yZGluYXRlIG9mXG5cdFx0dmFyIG9wdGlvbnM7XG5cblx0XHRpZiAodGhpcy5yb3dDbnQgPT0gMSkge1xuXHRcdFx0dG9wRWwgPSB2aWV3LmVsOyAvLyB3aWxsIGNhdXNlIHRoZSBwb3BvdmVyIHRvIGNvdmVyIGFueSBzb3J0IG9mIGhlYWRlclxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRvcEVsID0gdGhpcy5yb3dFbHMuZXEocm93KTsgLy8gd2lsbCBhbGlnbiB3aXRoIHRvcCBvZiByb3dcblx0XHR9XG5cblx0XHRvcHRpb25zID0ge1xuXHRcdFx0Y2xhc3NOYW1lOiAnZmMtbW9yZS1wb3BvdmVyJyxcblx0XHRcdGNvbnRlbnQ6IHRoaXMucmVuZGVyU2VnUG9wb3ZlckNvbnRlbnQocm93LCBjb2wsIHNlZ3MpLFxuXHRcdFx0cGFyZW50RWw6IHRoaXMudmlldy5lbCwgLy8gYXR0YWNoIHRvIHJvb3Qgb2Ygdmlldy4gZ3VhcmFudGVlcyBvdXRzaWRlIG9mIHNjcm9sbGJhcnMuXG5cdFx0XHR0b3A6IHRvcEVsLm9mZnNldCgpLnRvcCxcblx0XHRcdGF1dG9IaWRlOiB0cnVlLCAvLyB3aGVuIHRoZSB1c2VyIGNsaWNrcyBlbHNld2hlcmUsIGhpZGUgdGhlIHBvcG92ZXJcblx0XHRcdHZpZXdwb3J0Q29uc3RyYWluOiB2aWV3Lm9wdCgncG9wb3ZlclZpZXdwb3J0Q29uc3RyYWluJyksXG5cdFx0XHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8ga2lsbCBldmVyeXRoaW5nIHdoZW4gdGhlIHBvcG92ZXIgaXMgaGlkZGVuXG5cdFx0XHRcdC8vIG5vdGlmeSBldmVudHMgdG8gYmUgcmVtb3ZlZFxuXHRcdFx0XHRpZiAoX3RoaXMucG9wb3ZlclNlZ3MpIHtcblx0XHRcdFx0XHR2YXIgc2VnO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMucG9wb3ZlclNlZ3MubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0XHRcdHNlZyA9IF90aGlzLnBvcG92ZXJTZWdzW2ldO1xuXHRcdFx0XHRcdFx0dmlldy5wdWJsaWNseVRyaWdnZXIoJ2V2ZW50RGVzdHJveScsIHNlZy5ldmVudCwgc2VnLmV2ZW50LCBzZWcuZWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRfdGhpcy5zZWdQb3BvdmVyLnJlbW92ZUVsZW1lbnQoKTtcblx0XHRcdFx0X3RoaXMuc2VnUG9wb3ZlciA9IG51bGw7XG5cdFx0XHRcdF90aGlzLnBvcG92ZXJTZWdzID0gbnVsbDtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gRGV0ZXJtaW5lIGhvcml6b250YWwgY29vcmRpbmF0ZS5cblx0XHQvLyBXZSB1c2UgdGhlIG1vcmVXcmFwIGluc3RlYWQgb2YgdGhlIDx0ZD4gdG8gYXZvaWQgYm9yZGVyIGNvbmZ1c2lvbi5cblx0XHRpZiAodGhpcy5pc1JUTCkge1xuXHRcdFx0b3B0aW9ucy5yaWdodCA9IG1vcmVXcmFwLm9mZnNldCgpLmxlZnQgKyBtb3JlV3JhcC5vdXRlcldpZHRoKCkgKyAxOyAvLyArMSB0byBiZSBvdmVyIGNlbGwgYm9yZGVyXG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0b3B0aW9ucy5sZWZ0ID0gbW9yZVdyYXAub2Zmc2V0KCkubGVmdCAtIDE7IC8vIC0xIHRvIGJlIG92ZXIgY2VsbCBib3JkZXJcblx0XHR9XG5cblx0XHR0aGlzLnNlZ1BvcG92ZXIgPSBuZXcgUG9wb3ZlcihvcHRpb25zKTtcblx0XHR0aGlzLnNlZ1BvcG92ZXIuc2hvdygpO1xuXG5cdFx0Ly8gdGhlIHBvcG92ZXIgZG9lc24ndCBsaXZlIHdpdGhpbiB0aGUgZ3JpZCdzIGNvbnRhaW5lciBlbGVtZW50LCBhbmQgdGh1cyB3b24ndCBnZXQgdGhlIGV2ZW50XG5cdFx0Ly8gZGVsZWdhdGVkLWhhbmRsZXJzIGZvciBmcmVlLiBhdHRhY2ggZXZlbnQtcmVsYXRlZCBoYW5kbGVycyB0byB0aGUgcG9wb3Zlci5cblx0XHR0aGlzLmJpbmRTZWdIYW5kbGVyc1RvRWwodGhpcy5zZWdQb3BvdmVyLmVsKTtcblx0fSxcblxuXG5cdC8vIEJ1aWxkcyB0aGUgaW5uZXIgRE9NIGNvbnRlbnRzIG9mIHRoZSBzZWdtZW50IHBvcG92ZXJcblx0cmVuZGVyU2VnUG9wb3ZlckNvbnRlbnQ6IGZ1bmN0aW9uKHJvdywgY29sLCBzZWdzKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGlzVGhlbWUgPSB2aWV3Lm9wdCgndGhlbWUnKTtcblx0XHR2YXIgdGl0bGUgPSB0aGlzLmdldENlbGxEYXRlKHJvdywgY29sKS5mb3JtYXQodmlldy5vcHQoJ2RheVBvcG92ZXJGb3JtYXQnKSk7XG5cdFx0dmFyIGNvbnRlbnQgPSAkKFxuXHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1oZWFkZXIgJyArIHZpZXcud2lkZ2V0SGVhZGVyQ2xhc3MgKyAnXCI+JyArXG5cdFx0XHRcdCc8c3BhbiBjbGFzcz1cImZjLWNsb3NlICcgK1xuXHRcdFx0XHRcdChpc1RoZW1lID8gJ3VpLWljb24gdWktaWNvbi1jbG9zZXRoaWNrJyA6ICdmYy1pY29uIGZjLWljb24teCcpICtcblx0XHRcdFx0J1wiPjwvc3Bhbj4nICtcblx0XHRcdFx0JzxzcGFuIGNsYXNzPVwiZmMtdGl0bGVcIj4nICtcblx0XHRcdFx0XHRodG1sRXNjYXBlKHRpdGxlKSArXG5cdFx0XHRcdCc8L3NwYW4+JyArXG5cdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtY2xlYXJcIi8+JyArXG5cdFx0XHQnPC9kaXY+JyArXG5cdFx0XHQnPGRpdiBjbGFzcz1cImZjLWJvZHkgJyArIHZpZXcud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiPicgK1xuXHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWV2ZW50LWNvbnRhaW5lclwiPjwvZGl2PicgK1xuXHRcdFx0JzwvZGl2Pidcblx0XHQpO1xuXHRcdHZhciBzZWdDb250YWluZXIgPSBjb250ZW50LmZpbmQoJy5mYy1ldmVudC1jb250YWluZXInKTtcblx0XHR2YXIgaTtcblxuXHRcdC8vIHJlbmRlciBlYWNoIHNlZydzIGBlbGAgYW5kIG9ubHkgcmV0dXJuIHRoZSB2aXNpYmxlIHNlZ3Ncblx0XHRzZWdzID0gdGhpcy5yZW5kZXJGZ1NlZ0VscyhzZWdzLCB0cnVlKTsgLy8gZGlzYWJsZVJlc2l6aW5nPXRydWVcblx0XHR0aGlzLnBvcG92ZXJTZWdzID0gc2VncztcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cblx0XHRcdC8vIGJlY2F1c2Ugc2VnbWVudHMgaW4gdGhlIHBvcG92ZXIgYXJlIG5vdCBwYXJ0IG9mIGEgZ3JpZCBjb29yZGluYXRlIHN5c3RlbSwgcHJvdmlkZSBhIGhpbnQgdG8gYW55XG5cdFx0XHQvLyBncmlkcyB0aGF0IHdhbnQgdG8gZG8gZHJhZy1uLWRyb3AgYWJvdXQgd2hpY2ggY2VsbCBpdCBjYW1lIGZyb21cblx0XHRcdHRoaXMucHJlcGFyZUhpdHMoKTtcblx0XHRcdHNlZ3NbaV0uaGl0ID0gdGhpcy5nZXRDZWxsSGl0KHJvdywgY29sKTtcblx0XHRcdHRoaXMucmVsZWFzZUhpdHMoKTtcblxuXHRcdFx0c2VnQ29udGFpbmVyLmFwcGVuZChzZWdzW2ldLmVsKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29udGVudDtcblx0fSxcblxuXG5cdC8vIEdpdmVuIHRoZSBldmVudHMgd2l0aGluIGFuIGFycmF5IG9mIHNlZ21lbnQgb2JqZWN0cywgcmVzbGljZSB0aGVtIHRvIGJlIGluIGEgc2luZ2xlIGRheVxuXHRyZXNsaWNlRGF5U2VnczogZnVuY3Rpb24oc2VncywgZGF5RGF0ZSkge1xuXG5cdFx0Ly8gYnVpbGQgYW4gYXJyYXkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50c1xuXHRcdHZhciBldmVudHMgPSAkLm1hcChzZWdzLCBmdW5jdGlvbihzZWcpIHtcblx0XHRcdHJldHVybiBzZWcuZXZlbnQ7XG5cdFx0fSk7XG5cblx0XHR2YXIgZGF5U3RhcnQgPSBkYXlEYXRlLmNsb25lKCk7XG5cdFx0dmFyIGRheUVuZCA9IGRheVN0YXJ0LmNsb25lKCkuYWRkKDEsICdkYXlzJyk7XG5cdFx0dmFyIGRheVJhbmdlID0geyBzdGFydDogZGF5U3RhcnQsIGVuZDogZGF5RW5kIH07XG5cblx0XHQvLyBzbGljZSB0aGUgZXZlbnRzIHdpdGggYSBjdXN0b20gc2xpY2luZyBmdW5jdGlvblxuXHRcdHNlZ3MgPSB0aGlzLmV2ZW50c1RvU2Vncyhcblx0XHRcdGV2ZW50cyxcblx0XHRcdGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0XHRcdHZhciBzZWcgPSBpbnRlcnNlY3RSYW5nZXMocmFuZ2UsIGRheVJhbmdlKTsgLy8gdW5kZWZpbmQgaWYgbm8gaW50ZXJzZWN0aW9uXG5cdFx0XHRcdHJldHVybiBzZWcgPyBbIHNlZyBdIDogW107IC8vIG11c3QgcmV0dXJuIGFuIGFycmF5IG9mIHNlZ21lbnRzXG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdC8vIGZvcmNlIGFuIG9yZGVyIGJlY2F1c2UgZXZlbnRzVG9TZWdzIGRvZXNuJ3QgZ3VhcmFudGVlIG9uZVxuXHRcdHRoaXMuc29ydEV2ZW50U2VncyhzZWdzKTtcblxuXHRcdHJldHVybiBzZWdzO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSB0ZXh0IHRoYXQgc2hvdWxkIGJlIGluc2lkZSBhIFwibW9yZVwiIGxpbmssIGdpdmVuIHRoZSBudW1iZXIgb2YgZXZlbnRzIGl0IHJlcHJlc2VudHNcblx0Z2V0TW9yZUxpbmtUZXh0OiBmdW5jdGlvbihudW0pIHtcblx0XHR2YXIgb3B0ID0gdGhpcy52aWV3Lm9wdCgnZXZlbnRMaW1pdFRleHQnKTtcblxuXHRcdGlmICh0eXBlb2Ygb3B0ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRyZXR1cm4gb3B0KG51bSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuICcrJyArIG51bSArICcgJyArIG9wdDtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBSZXR1cm5zIHNlZ21lbnRzIHdpdGhpbiBhIGdpdmVuIGNlbGwuXG5cdC8vIElmIGBzdGFydExldmVsYCBpcyBzcGVjaWZpZWQsIHJldHVybnMgb25seSBldmVudHMgaW5jbHVkaW5nIGFuZCBiZWxvdyB0aGF0IGxldmVsLiBPdGhlcndpc2UgcmV0dXJucyBhbGwgc2Vncy5cblx0Z2V0Q2VsbFNlZ3M6IGZ1bmN0aW9uKHJvdywgY29sLCBzdGFydExldmVsKSB7XG5cdFx0dmFyIHNlZ01hdHJpeCA9IHRoaXMucm93U3RydWN0c1tyb3ddLnNlZ01hdHJpeDtcblx0XHR2YXIgbGV2ZWwgPSBzdGFydExldmVsIHx8IDA7XG5cdFx0dmFyIHNlZ3MgPSBbXTtcblx0XHR2YXIgc2VnO1xuXG5cdFx0d2hpbGUgKGxldmVsIDwgc2VnTWF0cml4Lmxlbmd0aCkge1xuXHRcdFx0c2VnID0gc2VnTWF0cml4W2xldmVsXVtjb2xdO1xuXHRcdFx0aWYgKHNlZykge1xuXHRcdFx0XHRzZWdzLnB1c2goc2VnKTtcblx0XHRcdH1cblx0XHRcdGxldmVsKys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH1cblxufSk7XG5cbjs7XG5cbi8qIEEgY29tcG9uZW50IHRoYXQgcmVuZGVycyBvbmUgb3IgbW9yZSBjb2x1bW5zIG9mIHZlcnRpY2FsIHRpbWUgc2xvdHNcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLy8gV2UgbWl4aW4gRGF5VGFibGUsIGV2ZW4gdGhvdWdoIHRoZXJlIGlzIG9ubHkgYSBzaW5nbGUgcm93IG9mIGRheXNcblxudmFyIFRpbWVHcmlkID0gRkMuVGltZUdyaWQgPSBHcmlkLmV4dGVuZChEYXlUYWJsZU1peGluLCB7XG5cblx0c2xvdER1cmF0aW9uOiBudWxsLCAvLyBkdXJhdGlvbiBvZiBhIFwic2xvdFwiLCBhIGRpc3RpbmN0IHRpbWUgc2VnbWVudCBvbiBnaXZlbiBkYXksIHZpc3VhbGl6ZWQgYnkgbGluZXNcblx0c25hcER1cmF0aW9uOiBudWxsLCAvLyBncmFudWxhcml0eSBvZiB0aW1lIGZvciBkcmFnZ2luZyBhbmQgc2VsZWN0aW5nXG5cdHNuYXBzUGVyU2xvdDogbnVsbCxcblx0bWluVGltZTogbnVsbCwgLy8gRHVyYXRpb24gb2JqZWN0IHRoYXQgZGVub3RlcyB0aGUgZmlyc3QgdmlzaWJsZSB0aW1lIG9mIGFueSBnaXZlbiBkYXlcblx0bWF4VGltZTogbnVsbCwgLy8gRHVyYXRpb24gb2JqZWN0IHRoYXQgZGVub3RlcyB0aGUgZXhjbHVzaXZlIHZpc2libGUgZW5kIHRpbWUgb2YgYW55IGdpdmVuIGRheVxuXHRsYWJlbEZvcm1hdDogbnVsbCwgLy8gZm9ybWF0dGluZyBzdHJpbmcgZm9yIHRpbWVzIHJ1bm5pbmcgYWxvbmcgdmVydGljYWwgYXhpc1xuXHRsYWJlbEludGVydmFsOiBudWxsLCAvLyBkdXJhdGlvbiBvZiBob3cgb2Z0ZW4gYSBsYWJlbCBzaG91bGQgYmUgZGlzcGxheWVkIGZvciBhIHNsb3RcblxuXHRjb2xFbHM6IG51bGwsIC8vIGNlbGxzIGVsZW1lbnRzIGluIHRoZSBkYXktcm93IGJhY2tncm91bmRcblx0c2xhdENvbnRhaW5lckVsOiBudWxsLCAvLyBkaXYgdGhhdCB3cmFwcyBhbGwgdGhlIHNsYXQgcm93c1xuXHRzbGF0RWxzOiBudWxsLCAvLyBlbGVtZW50cyBydW5uaW5nIGhvcml6b250YWxseSBhY3Jvc3MgYWxsIGNvbHVtbnNcblx0bm93SW5kaWNhdG9yRWxzOiBudWxsLFxuXG5cdGNvbENvb3JkQ2FjaGU6IG51bGwsXG5cdHNsYXRDb29yZENhY2hlOiBudWxsLFxuXG5cblx0Y29uc3RydWN0b3I6IGZ1bmN0aW9uKCkge1xuXHRcdEdyaWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gY2FsbCB0aGUgc3VwZXItY29uc3RydWN0b3JcblxuXHRcdHRoaXMucHJvY2Vzc09wdGlvbnMoKTtcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgdGhlIHRpbWUgZ3JpZCBpbnRvIGB0aGlzLmVsYCwgd2hpY2ggc2hvdWxkIGFscmVhZHkgYmUgYXNzaWduZWQuXG5cdC8vIFJlbGllcyBvbiB0aGUgdmlldydzIGNvbENudC4gSW4gdGhlIGZ1dHVyZSwgdGhpcyBjb21wb25lbnQgc2hvdWxkIHByb2JhYmx5IGJlIHNlbGYtc3VmZmljaWVudC5cblx0cmVuZGVyRGF0ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZWwuaHRtbCh0aGlzLnJlbmRlckh0bWwoKSk7XG5cdFx0dGhpcy5jb2xFbHMgPSB0aGlzLmVsLmZpbmQoJy5mYy1kYXknKTtcblx0XHR0aGlzLnNsYXRDb250YWluZXJFbCA9IHRoaXMuZWwuZmluZCgnLmZjLXNsYXRzJyk7XG5cdFx0dGhpcy5zbGF0RWxzID0gdGhpcy5zbGF0Q29udGFpbmVyRWwuZmluZCgndHInKTtcblxuXHRcdHRoaXMuY29sQ29vcmRDYWNoZSA9IG5ldyBDb29yZENhY2hlKHtcblx0XHRcdGVsczogdGhpcy5jb2xFbHMsXG5cdFx0XHRpc0hvcml6b250YWw6IHRydWVcblx0XHR9KTtcblx0XHR0aGlzLnNsYXRDb29yZENhY2hlID0gbmV3IENvb3JkQ2FjaGUoe1xuXHRcdFx0ZWxzOiB0aGlzLnNsYXRFbHMsXG5cdFx0XHRpc1ZlcnRpY2FsOiB0cnVlXG5cdFx0fSk7XG5cblx0XHR0aGlzLnJlbmRlckNvbnRlbnRTa2VsZXRvbigpO1xuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyB0aGUgYmFzaWMgSFRNTCBza2VsZXRvbiBmb3IgdGhlIGdyaWRcblx0cmVuZGVySHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICcnICtcblx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtYmdcIj4nICtcblx0XHRcdFx0Jzx0YWJsZT4nICtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckJnVHJIdG1sKDApICsgLy8gcm93PTBcblx0XHRcdFx0JzwvdGFibGU+JyArXG5cdFx0XHQnPC9kaXY+JyArXG5cdFx0XHQnPGRpdiBjbGFzcz1cImZjLXNsYXRzXCI+JyArXG5cdFx0XHRcdCc8dGFibGU+JyArXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJTbGF0Um93SHRtbCgpICtcblx0XHRcdFx0JzwvdGFibGU+JyArXG5cdFx0XHQnPC9kaXY+Jztcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgSFRNTCBmb3IgdGhlIGhvcml6b250YWwgXCJzbGF0c1wiIHRoYXQgcnVuIHdpZHRoLXdpc2UuIEhhcyBhIHRpbWUgYXhpcyBvbiBhIHNpZGUuIERlcGVuZHMgb24gUlRMLlxuXHRyZW5kZXJTbGF0Um93SHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGlzUlRMID0gdGhpcy5pc1JUTDtcblx0XHR2YXIgaHRtbCA9ICcnO1xuXHRcdHZhciBzbG90VGltZSA9IG1vbWVudC5kdXJhdGlvbigrdGhpcy5taW5UaW1lKTsgLy8gd2lzaCB0aGVyZSB3YXMgLmNsb25lKCkgZm9yIGR1cmF0aW9uc1xuXHRcdHZhciBzbG90RGF0ZTsgLy8gd2lsbCBiZSBvbiB0aGUgdmlldydzIGZpcnN0IGRheSwgYnV0IHdlIG9ubHkgY2FyZSBhYm91dCBpdHMgdGltZVxuXHRcdHZhciBpc0xhYmVsZWQ7XG5cdFx0dmFyIGF4aXNIdG1sO1xuXG5cdFx0Ly8gQ2FsY3VsYXRlIHRoZSB0aW1lIGZvciBlYWNoIHNsb3Rcblx0XHR3aGlsZSAoc2xvdFRpbWUgPCB0aGlzLm1heFRpbWUpIHtcblx0XHRcdHNsb3REYXRlID0gdGhpcy5zdGFydC5jbG9uZSgpLnRpbWUoc2xvdFRpbWUpO1xuXHRcdFx0aXNMYWJlbGVkID0gaXNJbnQoZGl2aWRlRHVyYXRpb25CeUR1cmF0aW9uKHNsb3RUaW1lLCB0aGlzLmxhYmVsSW50ZXJ2YWwpKTtcblxuXHRcdFx0YXhpc0h0bWwgPVxuXHRcdFx0XHQnPHRkIGNsYXNzPVwiZmMtYXhpcyBmYy10aW1lICcgKyB2aWV3LndpZGdldENvbnRlbnRDbGFzcyArICdcIiAnICsgdmlldy5heGlzU3R5bGVBdHRyKCkgKyAnPicgK1xuXHRcdFx0XHRcdChpc0xhYmVsZWQgP1xuXHRcdFx0XHRcdFx0JzxzcGFuPicgKyAvLyBmb3IgbWF0Y2hDZWxsV2lkdGhzXG5cdFx0XHRcdFx0XHRcdGh0bWxFc2NhcGUoc2xvdERhdGUuZm9ybWF0KHRoaXMubGFiZWxGb3JtYXQpKSArXG5cdFx0XHRcdFx0XHQnPC9zcGFuPicgOlxuXHRcdFx0XHRcdFx0Jydcblx0XHRcdFx0XHRcdCkgK1xuXHRcdFx0XHQnPC90ZD4nO1xuXG5cdFx0XHRodG1sICs9XG5cdFx0XHRcdCc8dHIgZGF0YS10aW1lPVwiJyArIHNsb3REYXRlLmZvcm1hdCgnSEg6bW06c3MnKSArICdcIicgK1xuXHRcdFx0XHRcdChpc0xhYmVsZWQgPyAnJyA6ICcgY2xhc3M9XCJmYy1taW5vclwiJykgK1xuXHRcdFx0XHRcdCc+JyArXG5cdFx0XHRcdFx0KCFpc1JUTCA/IGF4aXNIdG1sIDogJycpICtcblx0XHRcdFx0XHQnPHRkIGNsYXNzPVwiJyArIHZpZXcud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiLz4nICtcblx0XHRcdFx0XHQoaXNSVEwgPyBheGlzSHRtbCA6ICcnKSArXG5cdFx0XHRcdFwiPC90cj5cIjtcblxuXHRcdFx0c2xvdFRpbWUuYWRkKHRoaXMuc2xvdER1cmF0aW9uKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaHRtbDtcblx0fSxcblxuXG5cdC8qIE9wdGlvbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFBhcnNlcyB2YXJpb3VzIG9wdGlvbnMgaW50byBwcm9wZXJ0aWVzIG9mIHRoaXMgb2JqZWN0XG5cdHByb2Nlc3NPcHRpb25zOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgc2xvdER1cmF0aW9uID0gdmlldy5vcHQoJ3Nsb3REdXJhdGlvbicpO1xuXHRcdHZhciBzbmFwRHVyYXRpb24gPSB2aWV3Lm9wdCgnc25hcER1cmF0aW9uJyk7XG5cdFx0dmFyIGlucHV0O1xuXG5cdFx0c2xvdER1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKHNsb3REdXJhdGlvbik7XG5cdFx0c25hcER1cmF0aW9uID0gc25hcER1cmF0aW9uID8gbW9tZW50LmR1cmF0aW9uKHNuYXBEdXJhdGlvbikgOiBzbG90RHVyYXRpb247XG5cblx0XHR0aGlzLnNsb3REdXJhdGlvbiA9IHNsb3REdXJhdGlvbjtcblx0XHR0aGlzLnNuYXBEdXJhdGlvbiA9IHNuYXBEdXJhdGlvbjtcblx0XHR0aGlzLnNuYXBzUGVyU2xvdCA9IHNsb3REdXJhdGlvbiAvIHNuYXBEdXJhdGlvbjsgLy8gVE9ETzogZW5zdXJlIGFuIGludGVnZXIgbXVsdGlwbGU/XG5cblx0XHR0aGlzLm1pblJlc2l6ZUR1cmF0aW9uID0gc25hcER1cmF0aW9uOyAvLyBoYWNrXG5cblx0XHR0aGlzLm1pblRpbWUgPSBtb21lbnQuZHVyYXRpb24odmlldy5vcHQoJ21pblRpbWUnKSk7XG5cdFx0dGhpcy5tYXhUaW1lID0gbW9tZW50LmR1cmF0aW9uKHZpZXcub3B0KCdtYXhUaW1lJykpO1xuXG5cdFx0Ly8gbWlnaHQgYmUgYW4gYXJyYXkgdmFsdWUgKGZvciBUaW1lbGluZVZpZXcpLlxuXHRcdC8vIGlmIHNvLCBnZXR0aW5nIHRoZSBtb3N0IGdyYW51bGFyIGVudHJ5ICh0aGUgbGFzdCBvbmUgcHJvYmFibHkpLlxuXHRcdGlucHV0ID0gdmlldy5vcHQoJ3Nsb3RMYWJlbEZvcm1hdCcpO1xuXHRcdGlmICgkLmlzQXJyYXkoaW5wdXQpKSB7XG5cdFx0XHRpbnB1dCA9IGlucHV0W2lucHV0Lmxlbmd0aCAtIDFdO1xuXHRcdH1cblxuXHRcdHRoaXMubGFiZWxGb3JtYXQgPVxuXHRcdFx0aW5wdXQgfHxcblx0XHRcdHZpZXcub3B0KCdzbWFsbFRpbWVGb3JtYXQnKTsgLy8gdGhlIGNvbXB1dGVkIGRlZmF1bHRcblxuXHRcdGlucHV0ID0gdmlldy5vcHQoJ3Nsb3RMYWJlbEludGVydmFsJyk7XG5cdFx0dGhpcy5sYWJlbEludGVydmFsID0gaW5wdXQgP1xuXHRcdFx0bW9tZW50LmR1cmF0aW9uKGlucHV0KSA6XG5cdFx0XHR0aGlzLmNvbXB1dGVMYWJlbEludGVydmFsKHNsb3REdXJhdGlvbik7XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyBhbiBhdXRvbWF0aWMgdmFsdWUgZm9yIHNsb3RMYWJlbEludGVydmFsXG5cdGNvbXB1dGVMYWJlbEludGVydmFsOiBmdW5jdGlvbihzbG90RHVyYXRpb24pIHtcblx0XHR2YXIgaTtcblx0XHR2YXIgbGFiZWxJbnRlcnZhbDtcblx0XHR2YXIgc2xvdHNQZXJMYWJlbDtcblxuXHRcdC8vIGZpbmQgdGhlIHNtYWxsZXN0IHN0b2NrIGxhYmVsIGludGVydmFsIHRoYXQgcmVzdWx0cyBpbiBtb3JlIHRoYW4gb25lIHNsb3RzLXBlci1sYWJlbFxuXHRcdGZvciAoaSA9IEFHRU5EQV9TVE9DS19TVUJfRFVSQVRJT05TLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRsYWJlbEludGVydmFsID0gbW9tZW50LmR1cmF0aW9uKEFHRU5EQV9TVE9DS19TVUJfRFVSQVRJT05TW2ldKTtcblx0XHRcdHNsb3RzUGVyTGFiZWwgPSBkaXZpZGVEdXJhdGlvbkJ5RHVyYXRpb24obGFiZWxJbnRlcnZhbCwgc2xvdER1cmF0aW9uKTtcblx0XHRcdGlmIChpc0ludChzbG90c1BlckxhYmVsKSAmJiBzbG90c1BlckxhYmVsID4gMSkge1xuXHRcdFx0XHRyZXR1cm4gbGFiZWxJbnRlcnZhbDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbW9tZW50LmR1cmF0aW9uKHNsb3REdXJhdGlvbik7IC8vIGZhbGwgYmFjay4gY2xvbmVcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIGEgZGVmYXVsdCBldmVudCB0aW1lIGZvcm1hdHRpbmcgc3RyaW5nIGlmIGB0aW1lRm9ybWF0YCBpcyBub3QgZXhwbGljaXRseSBkZWZpbmVkXG5cdGNvbXB1dGVFdmVudFRpbWVGb3JtYXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnZpZXcub3B0KCdub01lcmlkaWVtVGltZUZvcm1hdCcpOyAvLyBsaWtlIFwiNjozMFwiIChubyBBTS9QTSlcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIGEgZGVmYXVsdCBgZGlzcGxheUV2ZW50RW5kYCB2YWx1ZSBpZiBvbmUgaXMgbm90IGV4cGxpY2x0eSBkZWZpbmVkXG5cdGNvbXB1dGVEaXNwbGF5RXZlbnRFbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cblx0LyogSGl0IFN5c3RlbVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cHJlcGFyZUhpdHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuY29sQ29vcmRDYWNoZS5idWlsZCgpO1xuXHRcdHRoaXMuc2xhdENvb3JkQ2FjaGUuYnVpbGQoKTtcblx0fSxcblxuXG5cdHJlbGVhc2VIaXRzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmNvbENvb3JkQ2FjaGUuY2xlYXIoKTtcblx0XHQvLyBOT1RFOiBkb24ndCBjbGVhciBzbGF0Q29vcmRDYWNoZSBiZWNhdXNlIHdlIHJlbHkgb24gaXQgZm9yIGNvbXB1dGVUaW1lVG9wXG5cdH0sXG5cblxuXHRxdWVyeUhpdDogZnVuY3Rpb24obGVmdE9mZnNldCwgdG9wT2Zmc2V0KSB7XG5cdFx0dmFyIHNuYXBzUGVyU2xvdCA9IHRoaXMuc25hcHNQZXJTbG90O1xuXHRcdHZhciBjb2xDb29yZENhY2hlID0gdGhpcy5jb2xDb29yZENhY2hlO1xuXHRcdHZhciBzbGF0Q29vcmRDYWNoZSA9IHRoaXMuc2xhdENvb3JkQ2FjaGU7XG5cblx0XHRpZiAoY29sQ29vcmRDYWNoZS5pc0xlZnRJbkJvdW5kcyhsZWZ0T2Zmc2V0KSAmJiBzbGF0Q29vcmRDYWNoZS5pc1RvcEluQm91bmRzKHRvcE9mZnNldCkpIHtcblx0XHRcdHZhciBjb2xJbmRleCA9IGNvbENvb3JkQ2FjaGUuZ2V0SG9yaXpvbnRhbEluZGV4KGxlZnRPZmZzZXQpO1xuXHRcdFx0dmFyIHNsYXRJbmRleCA9IHNsYXRDb29yZENhY2hlLmdldFZlcnRpY2FsSW5kZXgodG9wT2Zmc2V0KTtcblxuXHRcdFx0aWYgKGNvbEluZGV4ICE9IG51bGwgJiYgc2xhdEluZGV4ICE9IG51bGwpIHtcblx0XHRcdFx0dmFyIHNsYXRUb3AgPSBzbGF0Q29vcmRDYWNoZS5nZXRUb3BPZmZzZXQoc2xhdEluZGV4KTtcblx0XHRcdFx0dmFyIHNsYXRIZWlnaHQgPSBzbGF0Q29vcmRDYWNoZS5nZXRIZWlnaHQoc2xhdEluZGV4KTtcblx0XHRcdFx0dmFyIHBhcnRpYWwgPSAodG9wT2Zmc2V0IC0gc2xhdFRvcCkgLyBzbGF0SGVpZ2h0OyAvLyBmbG9hdGluZyBwb2ludCBudW1iZXIgYmV0d2VlbiAwIGFuZCAxXG5cdFx0XHRcdHZhciBsb2NhbFNuYXBJbmRleCA9IE1hdGguZmxvb3IocGFydGlhbCAqIHNuYXBzUGVyU2xvdCk7IC8vIHRoZSBzbmFwICMgcmVsYXRpdmUgdG8gc3RhcnQgb2Ygc2xhdFxuXHRcdFx0XHR2YXIgc25hcEluZGV4ID0gc2xhdEluZGV4ICogc25hcHNQZXJTbG90ICsgbG9jYWxTbmFwSW5kZXg7XG5cdFx0XHRcdHZhciBzbmFwVG9wID0gc2xhdFRvcCArIChsb2NhbFNuYXBJbmRleCAvIHNuYXBzUGVyU2xvdCkgKiBzbGF0SGVpZ2h0O1xuXHRcdFx0XHR2YXIgc25hcEJvdHRvbSA9IHNsYXRUb3AgKyAoKGxvY2FsU25hcEluZGV4ICsgMSkgLyBzbmFwc1BlclNsb3QpICogc2xhdEhlaWdodDtcblxuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGNvbDogY29sSW5kZXgsXG5cdFx0XHRcdFx0c25hcDogc25hcEluZGV4LFxuXHRcdFx0XHRcdGNvbXBvbmVudDogdGhpcywgLy8gbmVlZGVkIHVuZm9ydHVuYXRlbHkgOihcblx0XHRcdFx0XHRsZWZ0OiBjb2xDb29yZENhY2hlLmdldExlZnRPZmZzZXQoY29sSW5kZXgpLFxuXHRcdFx0XHRcdHJpZ2h0OiBjb2xDb29yZENhY2hlLmdldFJpZ2h0T2Zmc2V0KGNvbEluZGV4KSxcblx0XHRcdFx0XHR0b3A6IHNuYXBUb3AsXG5cdFx0XHRcdFx0Ym90dG9tOiBzbmFwQm90dG9tXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Z2V0SGl0U3BhbjogZnVuY3Rpb24oaGl0KSB7XG5cdFx0dmFyIHN0YXJ0ID0gdGhpcy5nZXRDZWxsRGF0ZSgwLCBoaXQuY29sKTsgLy8gcm93PTBcblx0XHR2YXIgdGltZSA9IHRoaXMuY29tcHV0ZVNuYXBUaW1lKGhpdC5zbmFwKTsgLy8gcGFzcyBpbiB0aGUgc25hcC1pbmRleFxuXHRcdHZhciBlbmQ7XG5cblx0XHRzdGFydC50aW1lKHRpbWUpO1xuXHRcdGVuZCA9IHN0YXJ0LmNsb25lKCkuYWRkKHRoaXMuc25hcER1cmF0aW9uKTtcblxuXHRcdHJldHVybiB7IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQgfTtcblx0fSxcblxuXG5cdGdldEhpdEVsOiBmdW5jdGlvbihoaXQpIHtcblx0XHRyZXR1cm4gdGhpcy5jb2xFbHMuZXEoaGl0LmNvbCk7XG5cdH0sXG5cblxuXHQvKiBEYXRlc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmFuZ2VVcGRhdGVkOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVwZGF0ZURheVRhYmxlKCk7XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhIHJvdyBudW1iZXIgb2YgdGhlIGdyaWQsIHJlcHJlc2VudGluZyBhIFwic25hcFwiLCByZXR1cm5zIGEgdGltZSAoRHVyYXRpb24pIGZyb20gaXRzIHN0YXJ0LW9mLWRheVxuXHRjb21wdXRlU25hcFRpbWU6IGZ1bmN0aW9uKHNuYXBJbmRleCkge1xuXHRcdHJldHVybiBtb21lbnQuZHVyYXRpb24odGhpcy5taW5UaW1lICsgdGhpcy5zbmFwRHVyYXRpb24gKiBzbmFwSW5kZXgpO1xuXHR9LFxuXG5cblx0Ly8gU2xpY2VzIHVwIHRoZSBnaXZlbiBzcGFuICh1bnpvbmVkIHN0YXJ0L2VuZCB3aXRoIG90aGVyIG1pc2MgZGF0YSkgaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuXHRzcGFuVG9TZWdzOiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0dmFyIHNlZ3MgPSB0aGlzLnNsaWNlUmFuZ2VCeVRpbWVzKHNwYW4pO1xuXHRcdHZhciBpO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmICh0aGlzLmlzUlRMKSB7XG5cdFx0XHRcdHNlZ3NbaV0uY29sID0gdGhpcy5kYXlzUGVyUm93IC0gMSAtIHNlZ3NbaV0uZGF5SW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0c2Vnc1tpXS5jb2wgPSBzZWdzW2ldLmRheUluZGV4O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzZWdzO1xuXHR9LFxuXG5cblx0c2xpY2VSYW5nZUJ5VGltZXM6IGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0dmFyIHNlZ3MgPSBbXTtcblx0XHR2YXIgc2VnO1xuXHRcdHZhciBkYXlJbmRleDtcblx0XHR2YXIgZGF5RGF0ZTtcblx0XHR2YXIgZGF5UmFuZ2U7XG5cblx0XHRmb3IgKGRheUluZGV4ID0gMDsgZGF5SW5kZXggPCB0aGlzLmRheXNQZXJSb3c7IGRheUluZGV4KyspIHtcblx0XHRcdGRheURhdGUgPSB0aGlzLmRheURhdGVzW2RheUluZGV4XS5jbG9uZSgpOyAvLyBUT0RPOiBiZXR0ZXIgQVBJIGZvciB0aGlzP1xuXHRcdFx0ZGF5UmFuZ2UgPSB7XG5cdFx0XHRcdHN0YXJ0OiBkYXlEYXRlLmNsb25lKCkudGltZSh0aGlzLm1pblRpbWUpLFxuXHRcdFx0XHRlbmQ6IGRheURhdGUuY2xvbmUoKS50aW1lKHRoaXMubWF4VGltZSlcblx0XHRcdH07XG5cdFx0XHRzZWcgPSBpbnRlcnNlY3RSYW5nZXMocmFuZ2UsIGRheVJhbmdlKTsgLy8gYm90aCB3aWxsIGJlIGFtYmlnIHRpbWV6b25lXG5cdFx0XHRpZiAoc2VnKSB7XG5cdFx0XHRcdHNlZy5kYXlJbmRleCA9IGRheUluZGV4O1xuXHRcdFx0XHRzZWdzLnB1c2goc2VnKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gc2Vncztcblx0fSxcblxuXG5cdC8qIENvb3JkaW5hdGVzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHR1cGRhdGVTaXplOiBmdW5jdGlvbihpc1Jlc2l6ZSkgeyAvLyBOT1QgYSBzdGFuZGFyZCBHcmlkIG1ldGhvZFxuXHRcdHRoaXMuc2xhdENvb3JkQ2FjaGUuYnVpbGQoKTtcblxuXHRcdGlmIChpc1Jlc2l6ZSkge1xuXHRcdFx0dGhpcy51cGRhdGVTZWdWZXJ0aWNhbHMoXG5cdFx0XHRcdFtdLmNvbmNhdCh0aGlzLmZnU2VncyB8fCBbXSwgdGhpcy5iZ1NlZ3MgfHwgW10sIHRoaXMuYnVzaW5lc3NTZWdzIHx8IFtdKVxuXHRcdFx0KTtcblx0XHR9XG5cdH0sXG5cblxuXHRnZXRUb3RhbFNsYXRIZWlnaHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnNsYXRDb250YWluZXJFbC5vdXRlckhlaWdodCgpO1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgdGhlIHRvcCBjb29yZGluYXRlLCByZWxhdGl2ZSB0byB0aGUgYm91bmRzIG9mIHRoZSBncmlkLCBvZiB0aGUgZ2l2ZW4gZGF0ZS5cblx0Ly8gQSBgc3RhcnRPZkRheURhdGVgIG11c3QgYmUgZ2l2ZW4gZm9yIGF2b2lkaW5nIGFtYmlndWl0eSBvdmVyIGhvdyB0byB0cmVhdCBtaWRuaWdodC5cblx0Y29tcHV0ZURhdGVUb3A6IGZ1bmN0aW9uKGRhdGUsIHN0YXJ0T2ZEYXlEYXRlKSB7XG5cdFx0cmV0dXJuIHRoaXMuY29tcHV0ZVRpbWVUb3AoXG5cdFx0XHRtb21lbnQuZHVyYXRpb24oXG5cdFx0XHRcdGRhdGUgLSBzdGFydE9mRGF5RGF0ZS5jbG9uZSgpLnN0cmlwVGltZSgpXG5cdFx0XHQpXG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIHRoZSB0b3AgY29vcmRpbmF0ZSwgcmVsYXRpdmUgdG8gdGhlIGJvdW5kcyBvZiB0aGUgZ3JpZCwgb2YgdGhlIGdpdmVuIHRpbWUgKGEgRHVyYXRpb24pLlxuXHRjb21wdXRlVGltZVRvcDogZnVuY3Rpb24odGltZSkge1xuXHRcdHZhciBsZW4gPSB0aGlzLnNsYXRFbHMubGVuZ3RoO1xuXHRcdHZhciBzbGF0Q292ZXJhZ2UgPSAodGltZSAtIHRoaXMubWluVGltZSkgLyB0aGlzLnNsb3REdXJhdGlvbjsgLy8gZmxvYXRpbmctcG9pbnQgdmFsdWUgb2YgIyBvZiBzbG90cyBjb3ZlcmVkXG5cdFx0dmFyIHNsYXRJbmRleDtcblx0XHR2YXIgc2xhdFJlbWFpbmRlcjtcblxuXHRcdC8vIGNvbXB1dGUgYSBmbG9hdGluZy1wb2ludCBudW1iZXIgZm9yIGhvdyBtYW55IHNsYXRzIHNob3VsZCBiZSBwcm9ncmVzc2VkIHRocm91Z2guXG5cdFx0Ly8gZnJvbSAwIHRvIG51bWJlciBvZiBzbGF0cyAoaW5jbHVzaXZlKVxuXHRcdC8vIGNvbnN0cmFpbmVkIGJlY2F1c2UgbWluVGltZS9tYXhUaW1lIG1pZ2h0IGJlIGN1c3RvbWl6ZWQuXG5cdFx0c2xhdENvdmVyYWdlID0gTWF0aC5tYXgoMCwgc2xhdENvdmVyYWdlKTtcblx0XHRzbGF0Q292ZXJhZ2UgPSBNYXRoLm1pbihsZW4sIHNsYXRDb3ZlcmFnZSk7XG5cblx0XHQvLyBhbiBpbnRlZ2VyIGluZGV4IG9mIHRoZSBmdXJ0aGVzdCB3aG9sZSBzbGF0XG5cdFx0Ly8gZnJvbSAwIHRvIG51bWJlciBzbGF0cyAoKmV4Y2x1c2l2ZSosIHNvIGxlbi0xKVxuXHRcdHNsYXRJbmRleCA9IE1hdGguZmxvb3Ioc2xhdENvdmVyYWdlKTtcblx0XHRzbGF0SW5kZXggPSBNYXRoLm1pbihzbGF0SW5kZXgsIGxlbiAtIDEpO1xuXG5cdFx0Ly8gaG93IG11Y2ggZnVydGhlciB0aHJvdWdoIHRoZSBzbGF0SW5kZXggc2xhdCAoZnJvbSAwLjAtMS4wKSBtdXN0IGJlIGNvdmVyZWQgaW4gYWRkaXRpb24uXG5cdFx0Ly8gY291bGQgYmUgMS4wIGlmIHNsYXRDb3ZlcmFnZSBpcyBjb3ZlcmluZyAqYWxsKiB0aGUgc2xvdHNcblx0XHRzbGF0UmVtYWluZGVyID0gc2xhdENvdmVyYWdlIC0gc2xhdEluZGV4O1xuXG5cdFx0cmV0dXJuIHRoaXMuc2xhdENvb3JkQ2FjaGUuZ2V0VG9wUG9zaXRpb24oc2xhdEluZGV4KSArXG5cdFx0XHR0aGlzLnNsYXRDb29yZENhY2hlLmdldEhlaWdodChzbGF0SW5kZXgpICogc2xhdFJlbWFpbmRlcjtcblx0fSxcblxuXG5cblx0LyogRXZlbnQgRHJhZyBWaXN1YWxpemF0aW9uXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2YgYW4gZXZlbnQgYmVpbmcgZHJhZ2dlZCBvdmVyIHRoZSBzcGVjaWZpZWQgZGF0ZShzKS5cblx0Ly8gQSByZXR1cm5lZCB2YWx1ZSBvZiBgdHJ1ZWAgc2lnbmFscyB0aGF0IGEgbW9jayBcImhlbHBlclwiIGV2ZW50IGhhcyBiZWVuIHJlbmRlcmVkLlxuXHRyZW5kZXJEcmFnOiBmdW5jdGlvbihldmVudExvY2F0aW9uLCBzZWcpIHtcblxuXHRcdGlmIChzZWcpIHsgLy8gaWYgdGhlcmUgaXMgZXZlbnQgaW5mb3JtYXRpb24gZm9yIHRoaXMgZHJhZywgcmVuZGVyIGEgaGVscGVyIGV2ZW50XG5cblx0XHRcdC8vIHJldHVybnMgbW9jayBldmVudCBlbGVtZW50c1xuXHRcdFx0Ly8gc2lnbmFsIHRoYXQgYSBoZWxwZXIgaGFzIGJlZW4gcmVuZGVyZWRcblx0XHRcdHJldHVybiB0aGlzLnJlbmRlckV2ZW50TG9jYXRpb25IZWxwZXIoZXZlbnRMb2NhdGlvbiwgc2VnKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHQvLyBvdGhlcndpc2UsIGp1c3QgcmVuZGVyIGEgaGlnaGxpZ2h0XG5cdFx0XHR0aGlzLnJlbmRlckhpZ2hsaWdodCh0aGlzLmV2ZW50VG9TcGFuKGV2ZW50TG9jYXRpb24pKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYW55IHZpc3VhbCBpbmRpY2F0aW9uIG9mIGFuIGV2ZW50IGJlaW5nIGRyYWdnZWRcblx0dW5yZW5kZXJEcmFnOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVucmVuZGVySGVscGVyKCk7XG5cdFx0dGhpcy51bnJlbmRlckhpZ2hsaWdodCgpO1xuXHR9LFxuXG5cblx0LyogRXZlbnQgUmVzaXplIFZpc3VhbGl6YXRpb25cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhbiBldmVudCBiZWluZyByZXNpemVkXG5cdHJlbmRlckV2ZW50UmVzaXplOiBmdW5jdGlvbihldmVudExvY2F0aW9uLCBzZWcpIHtcblx0XHRyZXR1cm4gdGhpcy5yZW5kZXJFdmVudExvY2F0aW9uSGVscGVyKGV2ZW50TG9jYXRpb24sIHNlZyk7IC8vIHJldHVybnMgbW9jayBldmVudCBlbGVtZW50c1xuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIGFueSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhbiBldmVudCBiZWluZyByZXNpemVkXG5cdHVucmVuZGVyRXZlbnRSZXNpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJIZWxwZXIoKTtcblx0fSxcblxuXG5cdC8qIEV2ZW50IEhlbHBlclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBhIG1vY2sgXCJoZWxwZXJcIiBldmVudC4gYHNvdXJjZVNlZ2AgaXMgdGhlIG9yaWdpbmFsIHNlZ21lbnQgb2JqZWN0IGFuZCBtaWdodCBiZSBudWxsIChhbiBleHRlcm5hbCBkcmFnKVxuXHRyZW5kZXJIZWxwZXI6IGZ1bmN0aW9uKGV2ZW50LCBzb3VyY2VTZWcpIHtcblx0XHRyZXR1cm4gdGhpcy5yZW5kZXJIZWxwZXJTZWdzKHRoaXMuZXZlbnRUb1NlZ3MoZXZlbnQpLCBzb3VyY2VTZWcpOyAvLyByZXR1cm5zIG1vY2sgZXZlbnQgZWxlbWVudHNcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhbnkgbW9jayBoZWxwZXIgZXZlbnRcblx0dW5yZW5kZXJIZWxwZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJIZWxwZXJTZWdzKCk7XG5cdH0sXG5cblxuXHQvKiBCdXNpbmVzcyBIb3Vyc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmVuZGVyQnVzaW5lc3NIb3VyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5yZW5kZXJCdXNpbmVzc1NlZ3MoXG5cdFx0XHR0aGlzLmJ1aWxkQnVzaW5lc3NIb3VyU2VncygpXG5cdFx0KTtcblx0fSxcblxuXG5cdHVucmVuZGVyQnVzaW5lc3NIb3VyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlckJ1c2luZXNzU2VncygpO1xuXHR9LFxuXG5cblx0LyogTm93IEluZGljYXRvclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Z2V0Tm93SW5kaWNhdG9yVW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICdtaW51dGUnOyAvLyB3aWxsIHJlZnJlc2ggb24gdGhlIG1pbnV0ZVxuXHR9LFxuXG5cblx0cmVuZGVyTm93SW5kaWNhdG9yOiBmdW5jdGlvbihkYXRlKSB7XG5cdFx0Ly8gc2VnIHN5c3RlbSBtaWdodCBiZSBvdmVya2lsbCwgYnV0IGl0IGhhbmRsZXMgc2NlbmFyaW8gd2hlcmUgbGluZSBuZWVkcyB0byBiZSByZW5kZXJlZFxuXHRcdC8vICBtb3JlIHRoYW4gb25jZSBiZWNhdXNlIG9mIGNvbHVtbnMgd2l0aCB0aGUgc2FtZSBkYXRlIChyZXNvdXJjZXMgY29sdW1ucyBmb3IgZXhhbXBsZSlcblx0XHR2YXIgc2VncyA9IHRoaXMuc3BhblRvU2Vncyh7IHN0YXJ0OiBkYXRlLCBlbmQ6IGRhdGUgfSk7XG5cdFx0dmFyIHRvcCA9IHRoaXMuY29tcHV0ZURhdGVUb3AoZGF0ZSwgZGF0ZSk7XG5cdFx0dmFyIG5vZGVzID0gW107XG5cdFx0dmFyIGk7XG5cblx0XHQvLyByZW5kZXIgbGluZXMgd2l0aGluIHRoZSBjb2x1bW5zXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdG5vZGVzLnB1c2goJCgnPGRpdiBjbGFzcz1cImZjLW5vdy1pbmRpY2F0b3IgZmMtbm93LWluZGljYXRvci1saW5lXCI+PC9kaXY+Jylcblx0XHRcdFx0LmNzcygndG9wJywgdG9wKVxuXHRcdFx0XHQuYXBwZW5kVG8odGhpcy5jb2xDb250YWluZXJFbHMuZXEoc2Vnc1tpXS5jb2wpKVswXSk7XG5cdFx0fVxuXG5cdFx0Ly8gcmVuZGVyIGFuIGFycm93IG92ZXIgdGhlIGF4aXNcblx0XHRpZiAoc2Vncy5sZW5ndGggPiAwKSB7IC8vIGlzIHRoZSBjdXJyZW50IHRpbWUgaW4gdmlldz9cblx0XHRcdG5vZGVzLnB1c2goJCgnPGRpdiBjbGFzcz1cImZjLW5vdy1pbmRpY2F0b3IgZmMtbm93LWluZGljYXRvci1hcnJvd1wiPjwvZGl2PicpXG5cdFx0XHRcdC5jc3MoJ3RvcCcsIHRvcClcblx0XHRcdFx0LmFwcGVuZFRvKHRoaXMuZWwuZmluZCgnLmZjLWNvbnRlbnQtc2tlbGV0b24nKSlbMF0pO1xuXHRcdH1cblxuXHRcdHRoaXMubm93SW5kaWNhdG9yRWxzID0gJChub2Rlcyk7XG5cdH0sXG5cblxuXHR1bnJlbmRlck5vd0luZGljYXRvcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMubm93SW5kaWNhdG9yRWxzKSB7XG5cdFx0XHR0aGlzLm5vd0luZGljYXRvckVscy5yZW1vdmUoKTtcblx0XHRcdHRoaXMubm93SW5kaWNhdG9yRWxzID0gbnVsbDtcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBTZWxlY3Rpb25cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhIHNlbGVjdGlvbi4gT3ZlcnJpZGVzIHRoZSBkZWZhdWx0LCB3aGljaCB3YXMgdG8gc2ltcGx5IHJlbmRlciBhIGhpZ2hsaWdodC5cblx0cmVuZGVyU2VsZWN0aW9uOiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0aWYgKHRoaXMudmlldy5vcHQoJ3NlbGVjdEhlbHBlcicpKSB7IC8vIHRoaXMgc2V0dGluZyBzaWduYWxzIHRoYXQgYSBtb2NrIGhlbHBlciBldmVudCBzaG91bGQgYmUgcmVuZGVyZWRcblxuXHRcdFx0Ly8gbm9ybWFsbHkgYWNjZXBzIGFuIGV2ZW50TG9jYXRpb24sIHNwYW4gaGFzIGEgc3RhcnQvZW5kLCB3aGljaCBpcyBnb29kIGVub3VnaFxuXHRcdFx0dGhpcy5yZW5kZXJFdmVudExvY2F0aW9uSGVscGVyKHNwYW4pO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRoaXMucmVuZGVySGlnaGxpZ2h0KHNwYW4pO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhbnkgdmlzdWFsIGluZGljYXRpb24gb2YgYSBzZWxlY3Rpb25cblx0dW5yZW5kZXJTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJIZWxwZXIoKTtcblx0XHR0aGlzLnVucmVuZGVySGlnaGxpZ2h0KCk7XG5cdH0sXG5cblxuXHQvKiBIaWdobGlnaHRcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHJlbmRlckhpZ2hsaWdodDogZnVuY3Rpb24oc3Bhbikge1xuXHRcdHRoaXMucmVuZGVySGlnaGxpZ2h0U2Vncyh0aGlzLnNwYW5Ub1NlZ3Moc3BhbikpO1xuXHR9LFxuXG5cblx0dW5yZW5kZXJIaWdobGlnaHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJIaWdobGlnaHRTZWdzKCk7XG5cdH1cblxufSk7XG5cbjs7XG5cbi8qIE1ldGhvZHMgZm9yIHJlbmRlcmluZyBTRUdNRU5UUywgcGllY2VzIG9mIGNvbnRlbnQgdGhhdCBsaXZlIG9uIHRoZSB2aWV3XG4gKCB0aGlzIGZpbGUgaXMgbm8gbG9uZ2VyIGp1c3QgZm9yIGV2ZW50cyApXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuVGltZUdyaWQubWl4aW4oe1xuXG5cdGNvbENvbnRhaW5lckVsczogbnVsbCwgLy8gY29udGFpbmVycyBmb3IgZWFjaCBjb2x1bW5cblxuXHQvLyBpbm5lci1jb250YWluZXJzIGZvciBlYWNoIGNvbHVtbiB3aGVyZSBkaWZmZXJlbnQgdHlwZXMgb2Ygc2VncyBsaXZlXG5cdGZnQ29udGFpbmVyRWxzOiBudWxsLFxuXHRiZ0NvbnRhaW5lckVsczogbnVsbCxcblx0aGVscGVyQ29udGFpbmVyRWxzOiBudWxsLFxuXHRoaWdobGlnaHRDb250YWluZXJFbHM6IG51bGwsXG5cdGJ1c2luZXNzQ29udGFpbmVyRWxzOiBudWxsLFxuXG5cdC8vIGFycmF5cyBvZiBkaWZmZXJlbnQgdHlwZXMgb2YgZGlzcGxheWVkIHNlZ21lbnRzXG5cdGZnU2VnczogbnVsbCxcblx0YmdTZWdzOiBudWxsLFxuXHRoZWxwZXJTZWdzOiBudWxsLFxuXHRoaWdobGlnaHRTZWdzOiBudWxsLFxuXHRidXNpbmVzc1NlZ3M6IG51bGwsXG5cblxuXHQvLyBSZW5kZXJzIHRoZSBET00gdGhhdCB0aGUgdmlldydzIGNvbnRlbnQgd2lsbCBsaXZlIGluXG5cdHJlbmRlckNvbnRlbnRTa2VsZXRvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNlbGxIdG1sID0gJyc7XG5cdFx0dmFyIGk7XG5cdFx0dmFyIHNrZWxldG9uRWw7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgdGhpcy5jb2xDbnQ7IGkrKykge1xuXHRcdFx0Y2VsbEh0bWwgKz1cblx0XHRcdFx0Jzx0ZD4nICtcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWNvbnRlbnQtY29sXCI+JyArXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWV2ZW50LWNvbnRhaW5lciBmYy1oZWxwZXItY29udGFpbmVyXCI+PC9kaXY+JyArXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWV2ZW50LWNvbnRhaW5lclwiPjwvZGl2PicgK1xuXHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1oaWdobGlnaHQtY29udGFpbmVyXCI+PC9kaXY+JyArXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWJnZXZlbnQtY29udGFpbmVyXCI+PC9kaXY+JyArXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWJ1c2luZXNzLWNvbnRhaW5lclwiPjwvZGl2PicgK1xuXHRcdFx0XHRcdCc8L2Rpdj4nICtcblx0XHRcdFx0JzwvdGQ+Jztcblx0XHR9XG5cblx0XHRza2VsZXRvbkVsID0gJChcblx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtY29udGVudC1za2VsZXRvblwiPicgK1xuXHRcdFx0XHQnPHRhYmxlPicgK1xuXHRcdFx0XHRcdCc8dHI+JyArIGNlbGxIdG1sICsgJzwvdHI+JyArXG5cdFx0XHRcdCc8L3RhYmxlPicgK1xuXHRcdFx0JzwvZGl2Pidcblx0XHQpO1xuXG5cdFx0dGhpcy5jb2xDb250YWluZXJFbHMgPSBza2VsZXRvbkVsLmZpbmQoJy5mYy1jb250ZW50LWNvbCcpO1xuXHRcdHRoaXMuaGVscGVyQ29udGFpbmVyRWxzID0gc2tlbGV0b25FbC5maW5kKCcuZmMtaGVscGVyLWNvbnRhaW5lcicpO1xuXHRcdHRoaXMuZmdDb250YWluZXJFbHMgPSBza2VsZXRvbkVsLmZpbmQoJy5mYy1ldmVudC1jb250YWluZXI6bm90KC5mYy1oZWxwZXItY29udGFpbmVyKScpO1xuXHRcdHRoaXMuYmdDb250YWluZXJFbHMgPSBza2VsZXRvbkVsLmZpbmQoJy5mYy1iZ2V2ZW50LWNvbnRhaW5lcicpO1xuXHRcdHRoaXMuaGlnaGxpZ2h0Q29udGFpbmVyRWxzID0gc2tlbGV0b25FbC5maW5kKCcuZmMtaGlnaGxpZ2h0LWNvbnRhaW5lcicpO1xuXHRcdHRoaXMuYnVzaW5lc3NDb250YWluZXJFbHMgPSBza2VsZXRvbkVsLmZpbmQoJy5mYy1idXNpbmVzcy1jb250YWluZXInKTtcblxuXHRcdHRoaXMuYm9va2VuZENlbGxzKHNrZWxldG9uRWwuZmluZCgndHInKSk7IC8vIFRPRE86IGRvIHRoaXMgb24gc3RyaW5nIGxldmVsXG5cdFx0dGhpcy5lbC5hcHBlbmQoc2tlbGV0b25FbCk7XG5cdH0sXG5cblxuXHQvKiBGb3JlZ3JvdW5kIEV2ZW50c1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmVuZGVyRmdTZWdzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0c2VncyA9IHRoaXMucmVuZGVyRmdTZWdzSW50b0NvbnRhaW5lcnMoc2VncywgdGhpcy5mZ0NvbnRhaW5lckVscyk7XG5cdFx0dGhpcy5mZ1NlZ3MgPSBzZWdzO1xuXHRcdHJldHVybiBzZWdzOyAvLyBuZWVkZWQgZm9yIEdyaWQ6OnJlbmRlckV2ZW50c1xuXHR9LFxuXG5cblx0dW5yZW5kZXJGZ1NlZ3M6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJOYW1lZFNlZ3MoJ2ZnU2VncycpO1xuXHR9LFxuXG5cblx0LyogRm9yZWdyb3VuZCBIZWxwZXIgRXZlbnRzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyZW5kZXJIZWxwZXJTZWdzOiBmdW5jdGlvbihzZWdzLCBzb3VyY2VTZWcpIHtcblx0XHR2YXIgaGVscGVyRWxzID0gW107XG5cdFx0dmFyIGksIHNlZztcblx0XHR2YXIgc291cmNlRWw7XG5cblx0XHRzZWdzID0gdGhpcy5yZW5kZXJGZ1NlZ3NJbnRvQ29udGFpbmVycyhzZWdzLCB0aGlzLmhlbHBlckNvbnRhaW5lckVscyk7XG5cblx0XHQvLyBUcnkgdG8gbWFrZSB0aGUgc2VnbWVudCB0aGF0IGlzIGluIHRoZSBzYW1lIHJvdyBhcyBzb3VyY2VTZWcgbG9vayB0aGUgc2FtZVxuXHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzZWcgPSBzZWdzW2ldO1xuXHRcdFx0aWYgKHNvdXJjZVNlZyAmJiBzb3VyY2VTZWcuY29sID09PSBzZWcuY29sKSB7XG5cdFx0XHRcdHNvdXJjZUVsID0gc291cmNlU2VnLmVsO1xuXHRcdFx0XHRzZWcuZWwuY3NzKHtcblx0XHRcdFx0XHRsZWZ0OiBzb3VyY2VFbC5jc3MoJ2xlZnQnKSxcblx0XHRcdFx0XHRyaWdodDogc291cmNlRWwuY3NzKCdyaWdodCcpLFxuXHRcdFx0XHRcdCdtYXJnaW4tbGVmdCc6IHNvdXJjZUVsLmNzcygnbWFyZ2luLWxlZnQnKSxcblx0XHRcdFx0XHQnbWFyZ2luLXJpZ2h0Jzogc291cmNlRWwuY3NzKCdtYXJnaW4tcmlnaHQnKVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGhlbHBlckVscy5wdXNoKHNlZy5lbFswXSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5oZWxwZXJTZWdzID0gc2VncztcblxuXHRcdHJldHVybiAkKGhlbHBlckVscyk7IC8vIG11c3QgcmV0dXJuIHJlbmRlcmVkIGhlbHBlcnNcblx0fSxcblxuXG5cdHVucmVuZGVySGVscGVyU2VnczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlck5hbWVkU2VncygnaGVscGVyU2VncycpO1xuXHR9LFxuXG5cblx0LyogQmFja2dyb3VuZCBFdmVudHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHJlbmRlckJnU2VnczogZnVuY3Rpb24oc2Vncykge1xuXHRcdHNlZ3MgPSB0aGlzLnJlbmRlckZpbGxTZWdFbHMoJ2JnRXZlbnQnLCBzZWdzKTsgLy8gVE9ETzogb2xkIGZpbGwgc3lzdGVtXG5cdFx0dGhpcy51cGRhdGVTZWdWZXJ0aWNhbHMoc2Vncyk7XG5cdFx0dGhpcy5hdHRhY2hTZWdzQnlDb2wodGhpcy5ncm91cFNlZ3NCeUNvbChzZWdzKSwgdGhpcy5iZ0NvbnRhaW5lckVscyk7XG5cdFx0dGhpcy5iZ1NlZ3MgPSBzZWdzO1xuXHRcdHJldHVybiBzZWdzOyAvLyBuZWVkZWQgZm9yIEdyaWQ6OnJlbmRlckV2ZW50c1xuXHR9LFxuXG5cblx0dW5yZW5kZXJCZ1NlZ3M6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudW5yZW5kZXJOYW1lZFNlZ3MoJ2JnU2VncycpO1xuXHR9LFxuXG5cblx0LyogSGlnaGxpZ2h0XG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRyZW5kZXJIaWdobGlnaHRTZWdzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0c2VncyA9IHRoaXMucmVuZGVyRmlsbFNlZ0VscygnaGlnaGxpZ2h0Jywgc2Vncyk7IC8vIFRPRE86IG9sZCBmaWxsIHN5c3RlbVxuXHRcdHRoaXMudXBkYXRlU2VnVmVydGljYWxzKHNlZ3MpO1xuXHRcdHRoaXMuYXR0YWNoU2Vnc0J5Q29sKHRoaXMuZ3JvdXBTZWdzQnlDb2woc2VncyksIHRoaXMuaGlnaGxpZ2h0Q29udGFpbmVyRWxzKTtcblx0XHR0aGlzLmhpZ2hsaWdodFNlZ3MgPSBzZWdzO1xuXHR9LFxuXG5cblx0dW5yZW5kZXJIaWdobGlnaHRTZWdzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVucmVuZGVyTmFtZWRTZWdzKCdoaWdobGlnaHRTZWdzJyk7XG5cdH0sXG5cblxuXHQvKiBCdXNpbmVzcyBIb3Vyc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmVuZGVyQnVzaW5lc3NTZWdzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0c2VncyA9IHRoaXMucmVuZGVyRmlsbFNlZ0VscygnYnVzaW5lc3NIb3VycycsIHNlZ3MpOyAvLyBUT0RPOiBvbGQgZmlsbCBzeXN0ZW1cblx0XHR0aGlzLnVwZGF0ZVNlZ1ZlcnRpY2FscyhzZWdzKTtcblx0XHR0aGlzLmF0dGFjaFNlZ3NCeUNvbCh0aGlzLmdyb3VwU2Vnc0J5Q29sKHNlZ3MpLCB0aGlzLmJ1c2luZXNzQ29udGFpbmVyRWxzKTtcblx0XHR0aGlzLmJ1c2luZXNzU2VncyA9IHNlZ3M7XG5cdH0sXG5cblxuXHR1bnJlbmRlckJ1c2luZXNzU2VnczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnJlbmRlck5hbWVkU2VncygnYnVzaW5lc3NTZWdzJyk7XG5cdH0sXG5cblxuXHQvKiBTZWcgUmVuZGVyaW5nIFV0aWxzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBHaXZlbiBhIGZsYXQgYXJyYXkgb2Ygc2VnbWVudHMsIHJldHVybiBhbiBhcnJheSBvZiBzdWItYXJyYXlzLCBncm91cGVkIGJ5IGVhY2ggc2VnbWVudCdzIGNvbFxuXHRncm91cFNlZ3NCeUNvbDogZnVuY3Rpb24oc2Vncykge1xuXHRcdHZhciBzZWdzQnlDb2wgPSBbXTtcblx0XHR2YXIgaTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLmNvbENudDsgaSsrKSB7XG5cdFx0XHRzZWdzQnlDb2wucHVzaChbXSk7XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNlZ3NCeUNvbFtzZWdzW2ldLmNvbF0ucHVzaChzZWdzW2ldKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gc2Vnc0J5Q29sO1xuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gc2VnbWVudHMgZ3JvdXBlZCBieSBjb2x1bW4sIGluc2VydCB0aGUgc2VnbWVudHMnIGVsZW1lbnRzIGludG8gYSBwYXJhbGxlbCBhcnJheSBvZiBjb250YWluZXJcblx0Ly8gZWxlbWVudHMsIGVhY2ggbGl2aW5nIHdpdGhpbiBhIGNvbHVtbi5cblx0YXR0YWNoU2Vnc0J5Q29sOiBmdW5jdGlvbihzZWdzQnlDb2wsIGNvbnRhaW5lckVscykge1xuXHRcdHZhciBjb2w7XG5cdFx0dmFyIHNlZ3M7XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGNvbCA9IDA7IGNvbCA8IHRoaXMuY29sQ250OyBjb2wrKykgeyAvLyBpdGVyYXRlIGVhY2ggY29sdW1uIGdyb3VwaW5nXG5cdFx0XHRzZWdzID0gc2Vnc0J5Q29sW2NvbF07XG5cblx0XHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGNvbnRhaW5lckVscy5lcShjb2wpLmFwcGVuZChzZWdzW2ldLmVsKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBHaXZlbiB0aGUgbmFtZSBvZiBhIHByb3BlcnR5IG9mIGB0aGlzYCBvYmplY3QsIGFzc3VtZWQgdG8gYmUgYW4gYXJyYXkgb2Ygc2VnbWVudHMsXG5cdC8vIGxvb3BzIHRocm91Z2ggZWFjaCBzZWdtZW50IGFuZCByZW1vdmVzIGZyb20gRE9NLiBXaWxsIG51bGwtb3V0IHRoZSBwcm9wZXJ0eSBhZnRlcndhcmRzLlxuXHR1bnJlbmRlck5hbWVkU2VnczogZnVuY3Rpb24ocHJvcE5hbWUpIHtcblx0XHR2YXIgc2VncyA9IHRoaXNbcHJvcE5hbWVdO1xuXHRcdHZhciBpO1xuXG5cdFx0aWYgKHNlZ3MpIHtcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHNlZ3NbaV0uZWwucmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzW3Byb3BOYW1lXSA9IG51bGw7XG5cdFx0fVxuXHR9LFxuXG5cblxuXHQvKiBGb3JlZ3JvdW5kIEV2ZW50IFJlbmRlcmluZyBVdGlsc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gR2l2ZW4gYW4gYXJyYXkgb2YgZm9yZWdyb3VuZCBzZWdtZW50cywgcmVuZGVyIGEgRE9NIGVsZW1lbnQgZm9yIGVhY2gsIGNvbXB1dGVzIHBvc2l0aW9uLFxuXHQvLyBhbmQgYXR0YWNoZXMgdG8gdGhlIGNvbHVtbiBpbm5lci1jb250YWluZXIgZWxlbWVudHMuXG5cdHJlbmRlckZnU2Vnc0ludG9Db250YWluZXJzOiBmdW5jdGlvbihzZWdzLCBjb250YWluZXJFbHMpIHtcblx0XHR2YXIgc2Vnc0J5Q29sO1xuXHRcdHZhciBjb2w7XG5cblx0XHRzZWdzID0gdGhpcy5yZW5kZXJGZ1NlZ0VscyhzZWdzKTsgLy8gd2lsbCBjYWxsIGZnU2VnSHRtbFxuXHRcdHNlZ3NCeUNvbCA9IHRoaXMuZ3JvdXBTZWdzQnlDb2woc2Vncyk7XG5cblx0XHRmb3IgKGNvbCA9IDA7IGNvbCA8IHRoaXMuY29sQ250OyBjb2wrKykge1xuXHRcdFx0dGhpcy51cGRhdGVGZ1NlZ0Nvb3JkcyhzZWdzQnlDb2xbY29sXSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5hdHRhY2hTZWdzQnlDb2woc2Vnc0J5Q29sLCBjb250YWluZXJFbHMpO1xuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblxuXHQvLyBSZW5kZXJzIHRoZSBIVE1MIGZvciBhIHNpbmdsZSBldmVudCBzZWdtZW50J3MgZGVmYXVsdCByZW5kZXJpbmdcblx0ZmdTZWdIdG1sOiBmdW5jdGlvbihzZWcsIGRpc2FibGVSZXNpemluZykge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBldmVudCA9IHNlZy5ldmVudDtcblx0XHR2YXIgaXNEcmFnZ2FibGUgPSB2aWV3LmlzRXZlbnREcmFnZ2FibGUoZXZlbnQpO1xuXHRcdHZhciBpc1Jlc2l6YWJsZUZyb21TdGFydCA9ICFkaXNhYmxlUmVzaXppbmcgJiYgc2VnLmlzU3RhcnQgJiYgdmlldy5pc0V2ZW50UmVzaXphYmxlRnJvbVN0YXJ0KGV2ZW50KTtcblx0XHR2YXIgaXNSZXNpemFibGVGcm9tRW5kID0gIWRpc2FibGVSZXNpemluZyAmJiBzZWcuaXNFbmQgJiYgdmlldy5pc0V2ZW50UmVzaXphYmxlRnJvbUVuZChldmVudCk7XG5cdFx0dmFyIGNsYXNzZXMgPSB0aGlzLmdldFNlZ0NsYXNzZXMoc2VnLCBpc0RyYWdnYWJsZSwgaXNSZXNpemFibGVGcm9tU3RhcnQgfHwgaXNSZXNpemFibGVGcm9tRW5kKTtcblx0XHR2YXIgc2tpbkNzcyA9IGNzc1RvU3RyKHRoaXMuZ2V0U2VnU2tpbkNzcyhzZWcpKTtcblx0XHR2YXIgdGltZVRleHQ7XG5cdFx0dmFyIGZ1bGxUaW1lVGV4dDsgLy8gbW9yZSB2ZXJib3NlIHRpbWUgdGV4dC4gZm9yIHRoZSBwcmludCBzdHlsZXNoZWV0XG5cdFx0dmFyIHN0YXJ0VGltZVRleHQ7IC8vIGp1c3QgdGhlIHN0YXJ0IHRpbWUgdGV4dFxuXG5cdFx0Y2xhc3Nlcy51bnNoaWZ0KCdmYy10aW1lLWdyaWQtZXZlbnQnLCAnZmMtdi1ldmVudCcpO1xuXG5cdFx0aWYgKHZpZXcuaXNNdWx0aURheUV2ZW50KGV2ZW50KSkgeyAvLyBpZiB0aGUgZXZlbnQgYXBwZWFycyB0byBzcGFuIG1vcmUgdGhhbiBvbmUgZGF5Li4uXG5cdFx0XHQvLyBEb24ndCBkaXNwbGF5IHRpbWUgdGV4dCBvbiBzZWdtZW50cyB0aGF0IHJ1biBlbnRpcmVseSB0aHJvdWdoIGEgZGF5LlxuXHRcdFx0Ly8gVGhhdCB3b3VsZCBhcHBlYXIgYXMgbWlkbmlnaHQtbWlkbmlnaHQgYW5kIHdvdWxkIGxvb2sgZHVtYi5cblx0XHRcdC8vIE90aGVyd2lzZSwgZGlzcGxheSB0aGUgdGltZSB0ZXh0IGZvciB0aGUgKnNlZ21lbnQncyogdGltZXMgKGxpa2UgNnBtLW1pZG5pZ2h0IG9yIG1pZG5pZ2h0LTEwYW0pXG5cdFx0XHRpZiAoc2VnLmlzU3RhcnQgfHwgc2VnLmlzRW5kKSB7XG5cdFx0XHRcdHRpbWVUZXh0ID0gdGhpcy5nZXRFdmVudFRpbWVUZXh0KHNlZyk7XG5cdFx0XHRcdGZ1bGxUaW1lVGV4dCA9IHRoaXMuZ2V0RXZlbnRUaW1lVGV4dChzZWcsICdMVCcpO1xuXHRcdFx0XHRzdGFydFRpbWVUZXh0ID0gdGhpcy5nZXRFdmVudFRpbWVUZXh0KHNlZywgbnVsbCwgZmFsc2UpOyAvLyBkaXNwbGF5RW5kPWZhbHNlXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIERpc3BsYXkgdGhlIG5vcm1hbCB0aW1lIHRleHQgZm9yIHRoZSAqZXZlbnQncyogdGltZXNcblx0XHRcdHRpbWVUZXh0ID0gdGhpcy5nZXRFdmVudFRpbWVUZXh0KGV2ZW50KTtcblx0XHRcdGZ1bGxUaW1lVGV4dCA9IHRoaXMuZ2V0RXZlbnRUaW1lVGV4dChldmVudCwgJ0xUJyk7XG5cdFx0XHRzdGFydFRpbWVUZXh0ID0gdGhpcy5nZXRFdmVudFRpbWVUZXh0KGV2ZW50LCBudWxsLCBmYWxzZSk7IC8vIGRpc3BsYXlFbmQ9ZmFsc2Vcblx0XHR9XG5cblx0XHRyZXR1cm4gJzxhIGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiJyArXG5cdFx0XHQoZXZlbnQudXJsID9cblx0XHRcdFx0JyBocmVmPVwiJyArIGh0bWxFc2NhcGUoZXZlbnQudXJsKSArICdcIicgOlxuXHRcdFx0XHQnJ1xuXHRcdFx0XHQpICtcblx0XHRcdChza2luQ3NzID9cblx0XHRcdFx0JyBzdHlsZT1cIicgKyBza2luQ3NzICsgJ1wiJyA6XG5cdFx0XHRcdCcnXG5cdFx0XHRcdCkgK1xuXHRcdFx0Jz4nICtcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1jb250ZW50XCI+JyArXG5cdFx0XHRcdFx0KHRpbWVUZXh0ID9cblx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtdGltZVwiJyArXG5cdFx0XHRcdFx0XHQnIGRhdGEtc3RhcnQ9XCInICsgaHRtbEVzY2FwZShzdGFydFRpbWVUZXh0KSArICdcIicgK1xuXHRcdFx0XHRcdFx0JyBkYXRhLWZ1bGw9XCInICsgaHRtbEVzY2FwZShmdWxsVGltZVRleHQpICsgJ1wiJyArXG5cdFx0XHRcdFx0XHQnPicgK1xuXHRcdFx0XHRcdFx0XHQnPHNwYW4+JyArIGh0bWxFc2NhcGUodGltZVRleHQpICsgJzwvc3Bhbj4nICtcblx0XHRcdFx0XHRcdCc8L2Rpdj4nIDpcblx0XHRcdFx0XHRcdCcnXG5cdFx0XHRcdFx0XHQpICtcblx0XHRcdFx0XHQoZXZlbnQudGl0bGUgP1xuXHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy10aXRsZVwiPicgK1xuXHRcdFx0XHRcdFx0XHRodG1sRXNjYXBlKGV2ZW50LnRpdGxlKSArXG5cdFx0XHRcdFx0XHQnPC9kaXY+JyA6XG5cdFx0XHRcdFx0XHQnJ1xuXHRcdFx0XHRcdFx0KSArXG5cdFx0XHRcdCc8L2Rpdj4nICtcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1iZ1wiLz4nICtcblx0XHRcdFx0LyogVE9ETzogd3JpdGUgQ1NTIGZvciB0aGlzXG5cdFx0XHRcdChpc1Jlc2l6YWJsZUZyb21TdGFydCA/XG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1yZXNpemVyIGZjLXN0YXJ0LXJlc2l6ZXJcIiAvPicgOlxuXHRcdFx0XHRcdCcnXG5cdFx0XHRcdFx0KSArXG5cdFx0XHRcdCovXG5cdFx0XHRcdChpc1Jlc2l6YWJsZUZyb21FbmQgP1xuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtcmVzaXplciBmYy1lbmQtcmVzaXplclwiIC8+JyA6XG5cdFx0XHRcdFx0Jydcblx0XHRcdFx0XHQpICtcblx0XHRcdCc8L2E+Jztcblx0fSxcblxuXG5cdC8qIFNlZyBQb3NpdGlvbiBVdGlsc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVmcmVzaGVzIHRoZSBDU1MgdG9wL2JvdHRvbSBjb29yZGluYXRlcyBmb3IgZWFjaCBzZWdtZW50IGVsZW1lbnQuXG5cdC8vIFdvcmtzIHdoZW4gY2FsbGVkIGFmdGVyIGluaXRpYWwgcmVuZGVyLCBhZnRlciBhIHdpbmRvdyByZXNpemUvem9vbSBmb3IgZXhhbXBsZS5cblx0dXBkYXRlU2VnVmVydGljYWxzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0dGhpcy5jb21wdXRlU2VnVmVydGljYWxzKHNlZ3MpO1xuXHRcdHRoaXMuYXNzaWduU2VnVmVydGljYWxzKHNlZ3MpO1xuXHR9LFxuXG5cblx0Ly8gRm9yIGVhY2ggc2VnbWVudCBpbiBhbiBhcnJheSwgY29tcHV0ZXMgYW5kIGFzc2lnbnMgaXRzIHRvcCBhbmQgYm90dG9tIHByb3BlcnRpZXNcblx0Y29tcHV0ZVNlZ1ZlcnRpY2FsczogZnVuY3Rpb24oc2Vncykge1xuXHRcdHZhciBpLCBzZWc7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2VnID0gc2Vnc1tpXTtcblx0XHRcdHNlZy50b3AgPSB0aGlzLmNvbXB1dGVEYXRlVG9wKHNlZy5zdGFydCwgc2VnLnN0YXJ0KTtcblx0XHRcdHNlZy5ib3R0b20gPSB0aGlzLmNvbXB1dGVEYXRlVG9wKHNlZy5lbmQsIHNlZy5zdGFydCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gc2VnbWVudHMgdGhhdCBhbHJlYWR5IGhhdmUgdGhlaXIgdG9wL2JvdHRvbSBwcm9wZXJ0aWVzIGNvbXB1dGVkLCBhcHBsaWVzIHRob3NlIHZhbHVlcyB0b1xuXHQvLyB0aGUgc2VnbWVudHMnIGVsZW1lbnRzLlxuXHRhc3NpZ25TZWdWZXJ0aWNhbHM6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHR2YXIgaSwgc2VnO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNlZyA9IHNlZ3NbaV07XG5cdFx0XHRzZWcuZWwuY3NzKHRoaXMuZ2VuZXJhdGVTZWdWZXJ0aWNhbENzcyhzZWcpKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgYW4gb2JqZWN0IHdpdGggQ1NTIHByb3BlcnRpZXMgZm9yIHRoZSB0b3AvYm90dG9tIGNvb3JkaW5hdGVzIG9mIGEgc2VnbWVudCBlbGVtZW50XG5cdGdlbmVyYXRlU2VnVmVydGljYWxDc3M6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IHNlZy50b3AsXG5cdFx0XHRib3R0b206IC1zZWcuYm90dG9tIC8vIGZsaXBwZWQgYmVjYXVzZSBuZWVkcyB0byBiZSBzcGFjZSBiZXlvbmQgYm90dG9tIGVkZ2Ugb2YgZXZlbnQgY29udGFpbmVyXG5cdFx0fTtcblx0fSxcblxuXG5cdC8qIEZvcmVncm91bmQgRXZlbnQgUG9zaXRpb25pbmcgVXRpbHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEdpdmVuIHNlZ21lbnRzIHRoYXQgYXJlIGFzc3VtZWQgdG8gYWxsIGxpdmUgaW4gdGhlICpzYW1lIGNvbHVtbiosXG5cdC8vIGNvbXB1dGUgdGhlaXIgdmVyaWNhbC9ob3Jpem9udGFsIGNvb3JkaW5hdGVzIGFuZCBhc3NpZ24gdG8gdGhlaXIgZWxlbWVudHMuXG5cdHVwZGF0ZUZnU2VnQ29vcmRzOiBmdW5jdGlvbihzZWdzKSB7XG5cdFx0dGhpcy5jb21wdXRlU2VnVmVydGljYWxzKHNlZ3MpOyAvLyBob3Jpem9udGFscyByZWxpZXMgb24gdGhpc1xuXHRcdHRoaXMuY29tcHV0ZUZnU2VnSG9yaXpvbnRhbHMoc2Vncyk7IC8vIGNvbXB1dGUgaG9yaXpvbnRhbCBjb29yZGluYXRlcywgei1pbmRleCdzLCBhbmQgcmVvcmRlciB0aGUgYXJyYXlcblx0XHR0aGlzLmFzc2lnblNlZ1ZlcnRpY2FscyhzZWdzKTtcblx0XHR0aGlzLmFzc2lnbkZnU2VnSG9yaXpvbnRhbHMoc2Vncyk7XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhbiBhcnJheSBvZiBzZWdtZW50cyB0aGF0IGFyZSBhbGwgaW4gdGhlIHNhbWUgY29sdW1uLCBzZXRzIHRoZSBiYWNrd2FyZENvb3JkIGFuZCBmb3J3YXJkQ29vcmQgb24gZWFjaC5cblx0Ly8gTk9URTogQWxzbyByZW9yZGVycyB0aGUgZ2l2ZW4gYXJyYXkgYnkgZGF0ZSFcblx0Y29tcHV0ZUZnU2VnSG9yaXpvbnRhbHM6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHR2YXIgbGV2ZWxzO1xuXHRcdHZhciBsZXZlbDA7XG5cdFx0dmFyIGk7XG5cblx0XHR0aGlzLnNvcnRFdmVudFNlZ3Moc2Vncyk7IC8vIG9yZGVyIGJ5IGNlcnRhaW4gY3JpdGVyaWFcblx0XHRsZXZlbHMgPSBidWlsZFNsb3RTZWdMZXZlbHMoc2Vncyk7XG5cdFx0Y29tcHV0ZUZvcndhcmRTbG90U2VncyhsZXZlbHMpO1xuXG5cdFx0aWYgKChsZXZlbDAgPSBsZXZlbHNbMF0pKSB7XG5cblx0XHRcdGZvciAoaSA9IDA7IGkgPCBsZXZlbDAubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y29tcHV0ZVNsb3RTZWdQcmVzc3VyZXMobGV2ZWwwW2ldKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGxldmVsMC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLmNvbXB1dGVGZ1NlZ0ZvcndhcmRCYWNrKGxldmVsMFtpXSwgMCwgMCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gQ2FsY3VsYXRlIHNlZy5mb3J3YXJkQ29vcmQgYW5kIHNlZy5iYWNrd2FyZENvb3JkIGZvciB0aGUgc2VnbWVudCwgd2hlcmUgYm90aCB2YWx1ZXMgcmFuZ2Vcblx0Ly8gZnJvbSAwIHRvIDEuIElmIHRoZSBjYWxlbmRhciBpcyBsZWZ0LXRvLXJpZ2h0LCB0aGUgc2VnLmJhY2t3YXJkQ29vcmQgbWFwcyB0byBcImxlZnRcIiBhbmRcblx0Ly8gc2VnLmZvcndhcmRDb29yZCBtYXBzIHRvIFwicmlnaHRcIiAodmlhIHBlcmNlbnRhZ2UpLiBWaWNlLXZlcnNhIGlmIHRoZSBjYWxlbmRhciBpcyByaWdodC10by1sZWZ0LlxuXHQvL1xuXHQvLyBUaGUgc2VnbWVudCBtaWdodCBiZSBwYXJ0IG9mIGEgXCJzZXJpZXNcIiwgd2hpY2ggbWVhbnMgY29uc2VjdXRpdmUgc2VnbWVudHMgd2l0aCB0aGUgc2FtZSBwcmVzc3VyZVxuXHQvLyB3aG8ncyB3aWR0aCBpcyB1bmtub3duIHVudGlsIGFuIGVkZ2UgaGFzIGJlZW4gaGl0LiBgc2VyaWVzQmFja3dhcmRQcmVzc3VyZWAgaXMgdGhlIG51bWJlciBvZlxuXHQvLyBzZWdtZW50cyBiZWhpbmQgdGhpcyBvbmUgaW4gdGhlIGN1cnJlbnQgc2VyaWVzLCBhbmQgYHNlcmllc0JhY2t3YXJkQ29vcmRgIGlzIHRoZSBzdGFydGluZ1xuXHQvLyBjb29yZGluYXRlIG9mIHRoZSBmaXJzdCBzZWdtZW50IGluIHRoZSBzZXJpZXMuXG5cdGNvbXB1dGVGZ1NlZ0ZvcndhcmRCYWNrOiBmdW5jdGlvbihzZWcsIHNlcmllc0JhY2t3YXJkUHJlc3N1cmUsIHNlcmllc0JhY2t3YXJkQ29vcmQpIHtcblx0XHR2YXIgZm9yd2FyZFNlZ3MgPSBzZWcuZm9yd2FyZFNlZ3M7XG5cdFx0dmFyIGk7XG5cblx0XHRpZiAoc2VnLmZvcndhcmRDb29yZCA9PT0gdW5kZWZpbmVkKSB7IC8vIG5vdCBhbHJlYWR5IGNvbXB1dGVkXG5cblx0XHRcdGlmICghZm9yd2FyZFNlZ3MubGVuZ3RoKSB7XG5cblx0XHRcdFx0Ly8gaWYgdGhlcmUgYXJlIG5vIGZvcndhcmQgc2VnbWVudHMsIHRoaXMgc2VnbWVudCBzaG91bGQgYnV0dCB1cCBhZ2FpbnN0IHRoZSBlZGdlXG5cdFx0XHRcdHNlZy5mb3J3YXJkQ29vcmQgPSAxO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cblx0XHRcdFx0Ly8gc29ydCBoaWdoZXN0IHByZXNzdXJlIGZpcnN0XG5cdFx0XHRcdHRoaXMuc29ydEZvcndhcmRTZWdzKGZvcndhcmRTZWdzKTtcblxuXHRcdFx0XHQvLyB0aGlzIHNlZ21lbnQncyBmb3J3YXJkQ29vcmQgd2lsbCBiZSBjYWxjdWxhdGVkIGZyb20gdGhlIGJhY2t3YXJkQ29vcmQgb2YgdGhlXG5cdFx0XHRcdC8vIGhpZ2hlc3QtcHJlc3N1cmUgZm9yd2FyZCBzZWdtZW50LlxuXHRcdFx0XHR0aGlzLmNvbXB1dGVGZ1NlZ0ZvcndhcmRCYWNrKGZvcndhcmRTZWdzWzBdLCBzZXJpZXNCYWNrd2FyZFByZXNzdXJlICsgMSwgc2VyaWVzQmFja3dhcmRDb29yZCk7XG5cdFx0XHRcdHNlZy5mb3J3YXJkQ29vcmQgPSBmb3J3YXJkU2Vnc1swXS5iYWNrd2FyZENvb3JkO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBjYWxjdWxhdGUgdGhlIGJhY2t3YXJkQ29vcmQgZnJvbSB0aGUgZm9yd2FyZENvb3JkLiBjb25zaWRlciB0aGUgc2VyaWVzXG5cdFx0XHRzZWcuYmFja3dhcmRDb29yZCA9IHNlZy5mb3J3YXJkQ29vcmQgLVxuXHRcdFx0XHQoc2VnLmZvcndhcmRDb29yZCAtIHNlcmllc0JhY2t3YXJkQ29vcmQpIC8gLy8gYXZhaWxhYmxlIHdpZHRoIGZvciBzZXJpZXNcblx0XHRcdFx0KHNlcmllc0JhY2t3YXJkUHJlc3N1cmUgKyAxKTsgLy8gIyBvZiBzZWdtZW50cyBpbiB0aGUgc2VyaWVzXG5cblx0XHRcdC8vIHVzZSB0aGlzIHNlZ21lbnQncyBjb29yZGluYXRlcyB0byBjb21wdXRlZCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGxlc3MtcHJlc3N1cml6ZWRcblx0XHRcdC8vIGZvcndhcmQgc2VnbWVudHNcblx0XHRcdGZvciAoaT0wOyBpPGZvcndhcmRTZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuY29tcHV0ZUZnU2VnRm9yd2FyZEJhY2soZm9yd2FyZFNlZ3NbaV0sIDAsIHNlZy5mb3J3YXJkQ29vcmQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdHNvcnRGb3J3YXJkU2VnczogZnVuY3Rpb24oZm9yd2FyZFNlZ3MpIHtcblx0XHRmb3J3YXJkU2Vncy5zb3J0KHByb3h5KHRoaXMsICdjb21wYXJlRm9yd2FyZFNlZ3MnKSk7XG5cdH0sXG5cblxuXHQvLyBBIGNtcCBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hpY2ggZm9yd2FyZCBzZWdtZW50IHRvIHJlbHkgb24gbW9yZSB3aGVuIGNvbXB1dGluZyBjb29yZGluYXRlcy5cblx0Y29tcGFyZUZvcndhcmRTZWdzOiBmdW5jdGlvbihzZWcxLCBzZWcyKSB7XG5cdFx0Ly8gcHV0IGhpZ2hlci1wcmVzc3VyZSBmaXJzdFxuXHRcdHJldHVybiBzZWcyLmZvcndhcmRQcmVzc3VyZSAtIHNlZzEuZm9yd2FyZFByZXNzdXJlIHx8XG5cdFx0XHQvLyBwdXQgc2VnbWVudHMgdGhhdCBhcmUgY2xvc2VyIHRvIGluaXRpYWwgZWRnZSBmaXJzdCAoYW5kIGZhdm9yIG9uZXMgd2l0aCBubyBjb29yZHMgeWV0KVxuXHRcdFx0KHNlZzEuYmFja3dhcmRDb29yZCB8fCAwKSAtIChzZWcyLmJhY2t3YXJkQ29vcmQgfHwgMCkgfHxcblx0XHRcdC8vIGRvIG5vcm1hbCBzb3J0aW5nLi4uXG5cdFx0XHR0aGlzLmNvbXBhcmVFdmVudFNlZ3Moc2VnMSwgc2VnMik7XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBmb3JlZ3JvdW5kIGV2ZW50IHNlZ21lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGhhZCB0aGVpciBwb3NpdGlvbiBjb29yZGluYXRlcyBjb21wdXRlZCxcblx0Ly8gYXNzaWducyBwb3NpdGlvbi1yZWxhdGVkIENTUyB2YWx1ZXMgdG8gdGhlaXIgZWxlbWVudHMuXG5cdGFzc2lnbkZnU2VnSG9yaXpvbnRhbHM6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHR2YXIgaSwgc2VnO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNlZyA9IHNlZ3NbaV07XG5cdFx0XHRzZWcuZWwuY3NzKHRoaXMuZ2VuZXJhdGVGZ1NlZ0hvcml6b250YWxDc3Moc2VnKSk7XG5cblx0XHRcdC8vIGlmIHRoZSBoZWlnaHQgaXMgc2hvcnQsIGFkZCBhIGNsYXNzTmFtZSBmb3IgYWx0ZXJuYXRlIHN0eWxpbmdcblx0XHRcdGlmIChzZWcuYm90dG9tIC0gc2VnLnRvcCA8IDMwKSB7XG5cdFx0XHRcdHNlZy5lbC5hZGRDbGFzcygnZmMtc2hvcnQnKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgYW4gb2JqZWN0IHdpdGggQ1NTIHByb3BlcnRpZXMvdmFsdWVzIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gYW4gZXZlbnQgc2VnbWVudCBlbGVtZW50LlxuXHQvLyBDb250YWlucyBpbXBvcnRhbnQgcG9zaXRpb25pbmctcmVsYXRlZCBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gYW55IGV2ZW50IGVsZW1lbnQsIGN1c3RvbWl6ZWQgb3Igbm90LlxuXHRnZW5lcmF0ZUZnU2VnSG9yaXpvbnRhbENzczogZnVuY3Rpb24oc2VnKSB7XG5cdFx0dmFyIHNob3VsZE92ZXJsYXAgPSB0aGlzLnZpZXcub3B0KCdzbG90RXZlbnRPdmVybGFwJyk7XG5cdFx0dmFyIGJhY2t3YXJkQ29vcmQgPSBzZWcuYmFja3dhcmRDb29yZDsgLy8gdGhlIGxlZnQgc2lkZSBpZiBMVFIuIHRoZSByaWdodCBzaWRlIGlmIFJUTC4gZmxvYXRpbmctcG9pbnRcblx0XHR2YXIgZm9yd2FyZENvb3JkID0gc2VnLmZvcndhcmRDb29yZDsgLy8gdGhlIHJpZ2h0IHNpZGUgaWYgTFRSLiB0aGUgbGVmdCBzaWRlIGlmIFJUTC4gZmxvYXRpbmctcG9pbnRcblx0XHR2YXIgcHJvcHMgPSB0aGlzLmdlbmVyYXRlU2VnVmVydGljYWxDc3Moc2VnKTsgLy8gZ2V0IHRvcC9ib3R0b20gZmlyc3Rcblx0XHR2YXIgbGVmdDsgLy8gYW1vdW50IG9mIHNwYWNlIGZyb20gbGVmdCBlZGdlLCBhIGZyYWN0aW9uIG9mIHRoZSB0b3RhbCB3aWR0aFxuXHRcdHZhciByaWdodDsgLy8gYW1vdW50IG9mIHNwYWNlIGZyb20gcmlnaHQgZWRnZSwgYSBmcmFjdGlvbiBvZiB0aGUgdG90YWwgd2lkdGhcblxuXHRcdGlmIChzaG91bGRPdmVybGFwKSB7XG5cdFx0XHQvLyBkb3VibGUgdGhlIHdpZHRoLCBidXQgZG9uJ3QgZ28gYmV5b25kIHRoZSBtYXhpbXVtIGZvcndhcmQgY29vcmRpbmF0ZSAoMS4wKVxuXHRcdFx0Zm9yd2FyZENvb3JkID0gTWF0aC5taW4oMSwgYmFja3dhcmRDb29yZCArIChmb3J3YXJkQ29vcmQgLSBiYWNrd2FyZENvb3JkKSAqIDIpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmlzUlRMKSB7XG5cdFx0XHRsZWZ0ID0gMSAtIGZvcndhcmRDb29yZDtcblx0XHRcdHJpZ2h0ID0gYmFja3dhcmRDb29yZDtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRsZWZ0ID0gYmFja3dhcmRDb29yZDtcblx0XHRcdHJpZ2h0ID0gMSAtIGZvcndhcmRDb29yZDtcblx0XHR9XG5cblx0XHRwcm9wcy56SW5kZXggPSBzZWcubGV2ZWwgKyAxOyAvLyBjb252ZXJ0IGZyb20gMC1iYXNlIHRvIDEtYmFzZWRcblx0XHRwcm9wcy5sZWZ0ID0gbGVmdCAqIDEwMCArICclJztcblx0XHRwcm9wcy5yaWdodCA9IHJpZ2h0ICogMTAwICsgJyUnO1xuXG5cdFx0aWYgKHNob3VsZE92ZXJsYXAgJiYgc2VnLmZvcndhcmRQcmVzc3VyZSkge1xuXHRcdFx0Ly8gYWRkIHBhZGRpbmcgdG8gdGhlIGVkZ2Ugc28gdGhhdCBmb3J3YXJkIHN0YWNrZWQgZXZlbnRzIGRvbid0IGNvdmVyIHRoZSByZXNpemVyJ3MgaWNvblxuXHRcdFx0cHJvcHNbdGhpcy5pc1JUTCA/ICdtYXJnaW5MZWZ0JyA6ICdtYXJnaW5SaWdodCddID0gMTAgKiAyOyAvLyAxMCBpcyBhIGd1ZXNzdGltYXRlIG9mIHRoZSBpY29uJ3Mgd2lkdGhcblx0XHR9XG5cblx0XHRyZXR1cm4gcHJvcHM7XG5cdH1cblxufSk7XG5cblxuLy8gQnVpbGRzIGFuIGFycmF5IG9mIHNlZ21lbnRzIFwibGV2ZWxzXCIuIFRoZSBmaXJzdCBsZXZlbCB3aWxsIGJlIHRoZSBsZWZ0bW9zdCB0aWVyIG9mIHNlZ21lbnRzIGlmIHRoZSBjYWxlbmRhciBpc1xuLy8gbGVmdC10by1yaWdodCwgb3IgdGhlIHJpZ2h0bW9zdCBpZiB0aGUgY2FsZW5kYXIgaXMgcmlnaHQtdG8tbGVmdC4gQXNzdW1lcyB0aGUgc2VnbWVudHMgYXJlIGFscmVhZHkgb3JkZXJlZCBieSBkYXRlLlxuZnVuY3Rpb24gYnVpbGRTbG90U2VnTGV2ZWxzKHNlZ3MpIHtcblx0dmFyIGxldmVscyA9IFtdO1xuXHR2YXIgaSwgc2VnO1xuXHR2YXIgajtcblxuXHRmb3IgKGk9MDsgaTxzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0c2VnID0gc2Vnc1tpXTtcblxuXHRcdC8vIGdvIHRocm91Z2ggYWxsIHRoZSBsZXZlbHMgYW5kIHN0b3Agb24gdGhlIGZpcnN0IGxldmVsIHdoZXJlIHRoZXJlIGFyZSBubyBjb2xsaXNpb25zXG5cdFx0Zm9yIChqPTA7IGo8bGV2ZWxzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoIWNvbXB1dGVTbG90U2VnQ29sbGlzaW9ucyhzZWcsIGxldmVsc1tqXSkubGVuZ3RoKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHNlZy5sZXZlbCA9IGo7XG5cblx0XHQobGV2ZWxzW2pdIHx8IChsZXZlbHNbal0gPSBbXSkpLnB1c2goc2VnKTtcblx0fVxuXG5cdHJldHVybiBsZXZlbHM7XG59XG5cblxuLy8gRm9yIGV2ZXJ5IHNlZ21lbnQsIGZpZ3VyZSBvdXQgdGhlIG90aGVyIHNlZ21lbnRzIHRoYXQgYXJlIGluIHN1YnNlcXVlbnRcbi8vIGxldmVscyB0aGF0IGFsc28gb2NjdXB5IHRoZSBzYW1lIHZlcnRpY2FsIHNwYWNlLiBBY2N1bXVsYXRlIGluIHNlZy5mb3J3YXJkU2Vnc1xuZnVuY3Rpb24gY29tcHV0ZUZvcndhcmRTbG90U2VncyhsZXZlbHMpIHtcblx0dmFyIGksIGxldmVsO1xuXHR2YXIgaiwgc2VnO1xuXHR2YXIgaztcblxuXHRmb3IgKGk9MDsgaTxsZXZlbHMubGVuZ3RoOyBpKyspIHtcblx0XHRsZXZlbCA9IGxldmVsc1tpXTtcblxuXHRcdGZvciAoaj0wOyBqPGxldmVsLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRzZWcgPSBsZXZlbFtqXTtcblxuXHRcdFx0c2VnLmZvcndhcmRTZWdzID0gW107XG5cdFx0XHRmb3IgKGs9aSsxOyBrPGxldmVscy5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRjb21wdXRlU2xvdFNlZ0NvbGxpc2lvbnMoc2VnLCBsZXZlbHNba10sIHNlZy5mb3J3YXJkU2Vncyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cblxuLy8gRmlndXJlIG91dCB3aGljaCBwYXRoIGZvcndhcmQgKHZpYSBzZWcuZm9yd2FyZFNlZ3MpIHJlc3VsdHMgaW4gdGhlIGxvbmdlc3QgcGF0aCB1bnRpbFxuLy8gdGhlIGZ1cnRoZXN0IGVkZ2UgaXMgcmVhY2hlZC4gVGhlIG51bWJlciBvZiBzZWdtZW50cyBpbiB0aGlzIHBhdGggd2lsbCBiZSBzZWcuZm9yd2FyZFByZXNzdXJlXG5mdW5jdGlvbiBjb21wdXRlU2xvdFNlZ1ByZXNzdXJlcyhzZWcpIHtcblx0dmFyIGZvcndhcmRTZWdzID0gc2VnLmZvcndhcmRTZWdzO1xuXHR2YXIgZm9yd2FyZFByZXNzdXJlID0gMDtcblx0dmFyIGksIGZvcndhcmRTZWc7XG5cblx0aWYgKHNlZy5mb3J3YXJkUHJlc3N1cmUgPT09IHVuZGVmaW5lZCkgeyAvLyBub3QgYWxyZWFkeSBjb21wdXRlZFxuXG5cdFx0Zm9yIChpPTA7IGk8Zm9yd2FyZFNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGZvcndhcmRTZWcgPSBmb3J3YXJkU2Vnc1tpXTtcblxuXHRcdFx0Ly8gZmlndXJlIG91dCB0aGUgY2hpbGQncyBtYXhpbXVtIGZvcndhcmQgcGF0aFxuXHRcdFx0Y29tcHV0ZVNsb3RTZWdQcmVzc3VyZXMoZm9yd2FyZFNlZyk7XG5cblx0XHRcdC8vIGVpdGhlciB1c2UgdGhlIGV4aXN0aW5nIG1heGltdW0sIG9yIHVzZSB0aGUgY2hpbGQncyBmb3J3YXJkIHByZXNzdXJlXG5cdFx0XHQvLyBwbHVzIG9uZSAoZm9yIHRoZSBmb3J3YXJkU2VnIGl0c2VsZilcblx0XHRcdGZvcndhcmRQcmVzc3VyZSA9IE1hdGgubWF4KFxuXHRcdFx0XHRmb3J3YXJkUHJlc3N1cmUsXG5cdFx0XHRcdDEgKyBmb3J3YXJkU2VnLmZvcndhcmRQcmVzc3VyZVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRzZWcuZm9yd2FyZFByZXNzdXJlID0gZm9yd2FyZFByZXNzdXJlO1xuXHR9XG59XG5cblxuLy8gRmluZCBhbGwgdGhlIHNlZ21lbnRzIGluIGBvdGhlclNlZ3NgIHRoYXQgdmVydGljYWxseSBjb2xsaWRlIHdpdGggYHNlZ2AuXG4vLyBBcHBlbmQgaW50byBhbiBvcHRpb25hbGx5LXN1cHBsaWVkIGByZXN1bHRzYCBhcnJheSBhbmQgcmV0dXJuLlxuZnVuY3Rpb24gY29tcHV0ZVNsb3RTZWdDb2xsaXNpb25zKHNlZywgb3RoZXJTZWdzLCByZXN1bHRzKSB7XG5cdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG5cdGZvciAodmFyIGk9MDsgaTxvdGhlclNlZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoaXNTbG90U2VnQ29sbGlzaW9uKHNlZywgb3RoZXJTZWdzW2ldKSkge1xuXHRcdFx0cmVzdWx0cy5wdXNoKG90aGVyU2Vnc1tpXSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59XG5cblxuLy8gRG8gdGhlc2Ugc2VnbWVudHMgb2NjdXB5IHRoZSBzYW1lIHZlcnRpY2FsIHNwYWNlP1xuZnVuY3Rpb24gaXNTbG90U2VnQ29sbGlzaW9uKHNlZzEsIHNlZzIpIHtcblx0cmV0dXJuIHNlZzEuYm90dG9tID4gc2VnMi50b3AgJiYgc2VnMS50b3AgPCBzZWcyLmJvdHRvbTtcbn1cblxuOztcblxuLyogQW4gYWJzdHJhY3QgY2xhc3MgZnJvbSB3aGljaCBvdGhlciB2aWV3cyBpbmhlcml0IGZyb21cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG52YXIgVmlldyA9IEZDLlZpZXcgPSBDbGFzcy5leHRlbmQoRW1pdHRlck1peGluLCBMaXN0ZW5lck1peGluLCB7XG5cblx0dHlwZTogbnVsbCwgLy8gc3ViY2xhc3MnIHZpZXcgbmFtZSAoc3RyaW5nKVxuXHRuYW1lOiBudWxsLCAvLyBkZXByZWNhdGVkLiB1c2UgYHR5cGVgIGluc3RlYWRcblx0dGl0bGU6IG51bGwsIC8vIHRoZSB0ZXh0IHRoYXQgd2lsbCBiZSBkaXNwbGF5ZWQgaW4gdGhlIGhlYWRlcidzIHRpdGxlXG5cblx0Y2FsZW5kYXI6IG51bGwsIC8vIG93bmVyIENhbGVuZGFyIG9iamVjdFxuXHRvcHRpb25zOiBudWxsLCAvLyBoYXNoIGNvbnRhaW5pbmcgYWxsIG9wdGlvbnMuIGFscmVhZHkgbWVyZ2VkIHdpdGggdmlldy1zcGVjaWZpYy1vcHRpb25zXG5cdGVsOiBudWxsLCAvLyB0aGUgdmlldydzIGNvbnRhaW5pbmcgZWxlbWVudC4gc2V0IGJ5IENhbGVuZGFyXG5cblx0aXNEYXRlU2V0OiBmYWxzZSxcblx0aXNEYXRlUmVuZGVyZWQ6IGZhbHNlLFxuXHRkYXRlUmVuZGVyUXVldWU6IG51bGwsXG5cblx0aXNFdmVudHNCb3VuZDogZmFsc2UsXG5cdGlzRXZlbnRzU2V0OiBmYWxzZSxcblx0aXNFdmVudHNSZW5kZXJlZDogZmFsc2UsXG5cdGV2ZW50UmVuZGVyUXVldWU6IG51bGwsXG5cblx0Ly8gcmFuZ2UgdGhlIHZpZXcgaXMgYWN0dWFsbHkgZGlzcGxheWluZyAobW9tZW50cylcblx0c3RhcnQ6IG51bGwsXG5cdGVuZDogbnVsbCwgLy8gZXhjbHVzaXZlXG5cblx0Ly8gcmFuZ2UgdGhlIHZpZXcgaXMgZm9ybWFsbHkgcmVzcG9uc2libGUgZm9yIChtb21lbnRzKVxuXHQvLyBtYXkgYmUgZGlmZmVyZW50IGZyb20gc3RhcnQvZW5kLiBmb3IgZXhhbXBsZSwgYSBtb250aCB2aWV3IG1pZ2h0IGhhdmUgMXN0LTMxc3QsIGV4Y2x1ZGluZyBwYWRkZWQgZGF0ZXNcblx0aW50ZXJ2YWxTdGFydDogbnVsbCxcblx0aW50ZXJ2YWxFbmQ6IG51bGwsIC8vIGV4Y2x1c2l2ZVxuXHRpbnRlcnZhbER1cmF0aW9uOiBudWxsLFxuXHRpbnRlcnZhbFVuaXQ6IG51bGwsIC8vIG5hbWUgb2YgbGFyZ2VzdCB1bml0IGJlaW5nIGRpc3BsYXllZCwgbGlrZSBcIm1vbnRoXCIgb3IgXCJ3ZWVrXCJcblxuXHRpc1JUTDogZmFsc2UsXG5cdGlzU2VsZWN0ZWQ6IGZhbHNlLCAvLyBib29sZWFuIHdoZXRoZXIgYSByYW5nZSBvZiB0aW1lIGlzIHVzZXItc2VsZWN0ZWQgb3Igbm90XG5cdHNlbGVjdGVkRXZlbnQ6IG51bGwsXG5cblx0ZXZlbnRPcmRlclNwZWNzOiBudWxsLCAvLyBjcml0ZXJpYSBmb3Igb3JkZXJpbmcgZXZlbnRzIHdoZW4gdGhleSBoYXZlIHNhbWUgZGF0ZS90aW1lXG5cblx0Ly8gY2xhc3NOYW1lcyBzdHlsZWQgYnkganF1aSB0aGVtZXNcblx0d2lkZ2V0SGVhZGVyQ2xhc3M6IG51bGwsXG5cdHdpZGdldENvbnRlbnRDbGFzczogbnVsbCxcblx0aGlnaGxpZ2h0U3RhdGVDbGFzczogbnVsbCxcblxuXHQvLyBmb3IgZGF0ZSB1dGlscywgY29tcHV0ZWQgZnJvbSBvcHRpb25zXG5cdG5leHREYXlUaHJlc2hvbGQ6IG51bGwsXG5cdGlzSGlkZGVuRGF5SGFzaDogbnVsbCxcblxuXHQvLyBub3cgaW5kaWNhdG9yXG5cdGlzTm93SW5kaWNhdG9yUmVuZGVyZWQ6IG51bGwsXG5cdGluaXRpYWxOb3dEYXRlOiBudWxsLCAvLyByZXN1bHQgZmlyc3QgZ2V0Tm93IGNhbGxcblx0aW5pdGlhbE5vd1F1ZXJpZWRNczogbnVsbCwgLy8gbXMgdGltZSB0aGUgZ2V0Tm93IHdhcyBjYWxsZWRcblx0bm93SW5kaWNhdG9yVGltZW91dElEOiBudWxsLCAvLyBmb3IgcmVmcmVzaCB0aW1pbmcgb2Ygbm93IGluZGljYXRvclxuXHRub3dJbmRpY2F0b3JJbnRlcnZhbElEOiBudWxsLCAvLyBcIlxuXG5cblx0Y29uc3RydWN0b3I6IGZ1bmN0aW9uKGNhbGVuZGFyLCB0eXBlLCBvcHRpb25zLCBpbnRlcnZhbER1cmF0aW9uKSB7XG5cblx0XHR0aGlzLmNhbGVuZGFyID0gY2FsZW5kYXI7XG5cdFx0dGhpcy50eXBlID0gdGhpcy5uYW1lID0gdHlwZTsgLy8gLm5hbWUgaXMgZGVwcmVjYXRlZFxuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5pbnRlcnZhbER1cmF0aW9uID0gaW50ZXJ2YWxEdXJhdGlvbiB8fCBtb21lbnQuZHVyYXRpb24oMSwgJ2RheScpO1xuXG5cdFx0dGhpcy5uZXh0RGF5VGhyZXNob2xkID0gbW9tZW50LmR1cmF0aW9uKHRoaXMub3B0KCduZXh0RGF5VGhyZXNob2xkJykpO1xuXHRcdHRoaXMuaW5pdFRoZW1pbmdQcm9wcygpO1xuXHRcdHRoaXMuaW5pdEhpZGRlbkRheXMoKTtcblx0XHR0aGlzLmlzUlRMID0gdGhpcy5vcHQoJ2lzUlRMJyk7XG5cblx0XHR0aGlzLmV2ZW50T3JkZXJTcGVjcyA9IHBhcnNlRmllbGRTcGVjcyh0aGlzLm9wdCgnZXZlbnRPcmRlcicpKTtcblxuXHRcdHRoaXMuZGF0ZVJlbmRlclF1ZXVlID0gbmV3IFRhc2tRdWV1ZSgpO1xuXHRcdHRoaXMuZXZlbnRSZW5kZXJRdWV1ZSA9IG5ldyBUYXNrUXVldWUodGhpcy5vcHQoJ2V2ZW50UmVuZGVyV2FpdCcpKTtcblxuXHRcdHRoaXMuaW5pdGlhbGl6ZSgpO1xuXHR9LFxuXG5cblx0Ly8gQSBnb29kIHBsYWNlIGZvciBzdWJjbGFzc2VzIHRvIGluaXRpYWxpemUgbWVtYmVyIHZhcmlhYmxlc1xuXHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIGNhbiBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFJldHJpZXZlcyBhbiBvcHRpb24gd2l0aCB0aGUgZ2l2ZW4gbmFtZVxuXHRvcHQ6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zW25hbWVdO1xuXHR9LFxuXG5cblx0Ly8gVHJpZ2dlcnMgaGFuZGxlcnMgdGhhdCBhcmUgdmlldy1yZWxhdGVkLiBNb2RpZmllcyBhcmdzIGJlZm9yZSBwYXNzaW5nIHRvIGNhbGVuZGFyLlxuXHRwdWJsaWNseVRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUsIHRoaXNPYmopIHsgLy8gYXJndW1lbnRzIGJleW9uZCB0aGlzT2JqIGFyZSBwYXNzZWQgYWxvbmdcblx0XHR2YXIgY2FsZW5kYXIgPSB0aGlzLmNhbGVuZGFyO1xuXG5cdFx0cmV0dXJuIGNhbGVuZGFyLnB1YmxpY2x5VHJpZ2dlci5hcHBseShcblx0XHRcdGNhbGVuZGFyLFxuXHRcdFx0W25hbWUsIHRoaXNPYmogfHwgdGhpc10uY29uY2F0KFxuXHRcdFx0XHRBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLCAvLyBhcmd1bWVudHMgYmV5b25kIHRoaXNPYmpcblx0XHRcdFx0WyB0aGlzIF0gLy8gYWx3YXlzIG1ha2UgdGhlIGxhc3QgYXJndW1lbnQgYSByZWZlcmVuY2UgdG8gdGhlIHZpZXcuIFRPRE86IGRlcHJlY2F0ZVxuXHRcdFx0KVxuXHRcdCk7XG5cdH0sXG5cblxuXHQvLyBSZXR1cm5zIGEgcHJveHkgb2YgdGhlIGdpdmVuIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlamVjdGVkIGlmIHRoZSBnaXZlbiBldmVudCBmaXJlc1xuXHQvLyBiZWZvcmUgdGhlIHByb21pc2UgcmVzb2x2ZXMuXG5cdHJlamVjdE9uOiBmdW5jdGlvbihldmVudE5hbWUsIHByb21pc2UpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0X3RoaXMub25lKGV2ZW50TmFtZSwgcmVqZWN0KTtcblxuXHRcdFx0ZnVuY3Rpb24gY2xlYW51cCgpIHtcblx0XHRcdFx0X3RoaXMub2ZmKGV2ZW50TmFtZSwgcmVqZWN0KTtcblx0XHRcdH1cblxuXHRcdFx0cHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlcykgeyAvLyBzdWNjZXNzXG5cdFx0XHRcdGNsZWFudXAoKTtcblx0XHRcdFx0cmVzb2x2ZShyZXMpO1xuXHRcdFx0fSwgZnVuY3Rpb24oKSB7IC8vIGZhaWx1cmVcblx0XHRcdFx0Y2xlYW51cCgpO1xuXHRcdFx0XHRyZWplY3QoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9LFxuXG5cblx0LyogRGF0ZSBDb21wdXRhdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gVXBkYXRlcyBhbGwgaW50ZXJuYWwgZGF0ZXMgZm9yIGRpc3BsYXlpbmcgdGhlIGdpdmVuIHVuem9uZWQgcmFuZ2UuXG5cdHNldFJhbmdlOiBmdW5jdGlvbihyYW5nZSkge1xuXHRcdCQuZXh0ZW5kKHRoaXMsIHJhbmdlKTsgLy8gYXNzaWducyBldmVyeSBwcm9wZXJ0eSB0byB0aGlzIG9iamVjdCdzIG1lbWJlciB2YXJpYWJsZXNcblx0XHR0aGlzLnVwZGF0ZVRpdGxlKCk7XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhIHNpbmdsZSBjdXJyZW50IHVuem9uZWQgZGF0ZSwgcHJvZHVjZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IHJhbmdlIHRvIGRpc3BsYXkuXG5cdC8vIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlLiBNdXN0IHJldHVybiBhbGwgcHJvcGVydGllcy5cblx0Y29tcHV0ZVJhbmdlOiBmdW5jdGlvbihkYXRlKSB7XG5cdFx0dmFyIGludGVydmFsVW5pdCA9IGNvbXB1dGVJbnRlcnZhbFVuaXQodGhpcy5pbnRlcnZhbER1cmF0aW9uKTtcblx0XHR2YXIgaW50ZXJ2YWxTdGFydCA9IGRhdGUuY2xvbmUoKS5zdGFydE9mKGludGVydmFsVW5pdCk7XG5cdFx0dmFyIGludGVydmFsRW5kID0gaW50ZXJ2YWxTdGFydC5jbG9uZSgpLmFkZCh0aGlzLmludGVydmFsRHVyYXRpb24pO1xuXHRcdHZhciBzdGFydCwgZW5kO1xuXG5cdFx0Ly8gbm9ybWFsaXplIHRoZSByYW5nZSdzIHRpbWUtYW1iaWd1aXR5XG5cdFx0aWYgKC95ZWFyfG1vbnRofHdlZWt8ZGF5Ly50ZXN0KGludGVydmFsVW5pdCkpIHsgLy8gd2hvbGUtZGF5cz9cblx0XHRcdGludGVydmFsU3RhcnQuc3RyaXBUaW1lKCk7XG5cdFx0XHRpbnRlcnZhbEVuZC5zdHJpcFRpbWUoKTtcblx0XHR9XG5cdFx0ZWxzZSB7IC8vIG5lZWRzIHRvIGhhdmUgYSB0aW1lP1xuXHRcdFx0aWYgKCFpbnRlcnZhbFN0YXJ0Lmhhc1RpbWUoKSkge1xuXHRcdFx0XHRpbnRlcnZhbFN0YXJ0ID0gdGhpcy5jYWxlbmRhci50aW1lKDApOyAvLyBnaXZlIDAwOjAwIHRpbWVcblx0XHRcdH1cblx0XHRcdGlmICghaW50ZXJ2YWxFbmQuaGFzVGltZSgpKSB7XG5cdFx0XHRcdGludGVydmFsRW5kID0gdGhpcy5jYWxlbmRhci50aW1lKDApOyAvLyBnaXZlIDAwOjAwIHRpbWVcblx0XHRcdH1cblx0XHR9XG5cblx0XHRzdGFydCA9IGludGVydmFsU3RhcnQuY2xvbmUoKTtcblx0XHRzdGFydCA9IHRoaXMuc2tpcEhpZGRlbkRheXMoc3RhcnQpO1xuXHRcdGVuZCA9IGludGVydmFsRW5kLmNsb25lKCk7XG5cdFx0ZW5kID0gdGhpcy5za2lwSGlkZGVuRGF5cyhlbmQsIC0xLCB0cnVlKTsgLy8gZXhjbHVzaXZlbHkgbW92ZSBiYWNrd2FyZHNcblxuXHRcdHJldHVybiB7XG5cdFx0XHRpbnRlcnZhbFVuaXQ6IGludGVydmFsVW5pdCxcblx0XHRcdGludGVydmFsU3RhcnQ6IGludGVydmFsU3RhcnQsXG5cdFx0XHRpbnRlcnZhbEVuZDogaW50ZXJ2YWxFbmQsXG5cdFx0XHRzdGFydDogc3RhcnQsXG5cdFx0XHRlbmQ6IGVuZFxuXHRcdH07XG5cdH0sXG5cblxuXHQvLyBDb21wdXRlcyB0aGUgbmV3IGRhdGUgd2hlbiB0aGUgdXNlciBoaXRzIHRoZSBwcmV2IGJ1dHRvbiwgZ2l2ZW4gdGhlIGN1cnJlbnQgZGF0ZVxuXHRjb21wdXRlUHJldkRhdGU6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXNzYWdlQ3VycmVudERhdGUoXG5cdFx0XHRkYXRlLmNsb25lKCkuc3RhcnRPZih0aGlzLmludGVydmFsVW5pdCkuc3VidHJhY3QodGhpcy5pbnRlcnZhbER1cmF0aW9uKSwgLTFcblx0XHQpO1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgdGhlIG5ldyBkYXRlIHdoZW4gdGhlIHVzZXIgaGl0cyB0aGUgbmV4dCBidXR0b24sIGdpdmVuIHRoZSBjdXJyZW50IGRhdGVcblx0Y29tcHV0ZU5leHREYXRlOiBmdW5jdGlvbihkYXRlKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFzc2FnZUN1cnJlbnREYXRlKFxuXHRcdFx0ZGF0ZS5jbG9uZSgpLnN0YXJ0T2YodGhpcy5pbnRlcnZhbFVuaXQpLmFkZCh0aGlzLmludGVydmFsRHVyYXRpb24pXG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIEdpdmVuIGFuIGFyYml0cmFyaWx5IGNhbGN1bGF0ZWQgY3VycmVudCBkYXRlIG9mIHRoZSBjYWxlbmRhciwgcmV0dXJucyBhIGRhdGUgdGhhdCBpcyBlbnN1cmVkIHRvIGJlIGNvbXBsZXRlbHlcblx0Ly8gdmlzaWJsZS4gYGRpcmVjdGlvbmAgaXMgb3B0aW9uYWwgYW5kIGluZGljYXRlcyB3aGljaCBkaXJlY3Rpb24gdGhlIGN1cnJlbnQgZGF0ZSB3YXMgYmVpbmdcblx0Ly8gaW5jcmVtZW50ZWQgb3IgZGVjcmVtZW50ZWQgKDEgb3IgLTEpLlxuXHRtYXNzYWdlQ3VycmVudERhdGU6IGZ1bmN0aW9uKGRhdGUsIGRpcmVjdGlvbikge1xuXHRcdGlmICh0aGlzLmludGVydmFsRHVyYXRpb24uYXMoJ2RheXMnKSA8PSAxKSB7IC8vIGlmIHRoZSB2aWV3IGRpc3BsYXlzIGEgc2luZ2xlIGRheSBvciBzbWFsbGVyXG5cdFx0XHRpZiAodGhpcy5pc0hpZGRlbkRheShkYXRlKSkge1xuXHRcdFx0XHRkYXRlID0gdGhpcy5za2lwSGlkZGVuRGF5cyhkYXRlLCBkaXJlY3Rpb24pO1xuXHRcdFx0XHRkYXRlLnN0YXJ0T2YoJ2RheScpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBkYXRlO1xuXHR9LFxuXG5cblx0LyogVGl0bGUgYW5kIERhdGUgRm9ybWF0dGluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gU2V0cyB0aGUgdmlldydzIHRpdGxlIHByb3BlcnR5IHRvIHRoZSBtb3N0IHVwZGF0ZWQgY29tcHV0ZWQgdmFsdWVcblx0dXBkYXRlVGl0bGU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudGl0bGUgPSB0aGlzLmNvbXB1dGVUaXRsZSgpO1xuXHRcdHRoaXMuY2FsZW5kYXIuc2V0VG9vbGJhcnNUaXRsZSh0aGlzLnRpdGxlKTtcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIHdoYXQgdGhlIHRpdGxlIGF0IHRoZSB0b3Agb2YgdGhlIGNhbGVuZGFyIHNob3VsZCBiZSBmb3IgdGhpcyB2aWV3XG5cdGNvbXB1dGVUaXRsZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZm9ybWF0UmFuZ2UoXG5cdFx0XHR7XG5cdFx0XHRcdC8vIGluIGNhc2UgaW50ZXJ2YWxTdGFydC9FbmQgaGFzIGEgdGltZSwgbWFrZSBzdXJlIHRpbWV6b25lIGlzIGNvcnJlY3Rcblx0XHRcdFx0c3RhcnQ6IHRoaXMuY2FsZW5kYXIuYXBwbHlUaW1lem9uZSh0aGlzLmludGVydmFsU3RhcnQpLFxuXHRcdFx0XHRlbmQ6IHRoaXMuY2FsZW5kYXIuYXBwbHlUaW1lem9uZSh0aGlzLmludGVydmFsRW5kKVxuXHRcdFx0fSxcblx0XHRcdHRoaXMub3B0KCd0aXRsZUZvcm1hdCcpIHx8IHRoaXMuY29tcHV0ZVRpdGxlRm9ybWF0KCksXG5cdFx0XHR0aGlzLm9wdCgndGl0bGVSYW5nZVNlcGFyYXRvcicpXG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgZm9ybWF0IHN0cmluZyB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSB0aXRsZSBmb3IgdGhlIGN1cnJlbnQgZGF0ZSByYW5nZS5cblx0Ly8gQXR0ZW1wdHMgdG8gY29tcHV0ZSB0aGUgbW9zdCBhcHByb3ByaWF0ZSBmb3JtYXQgaWYgbm90IGV4cGxpY2l0bHkgc3BlY2lmaWVkIHdpdGggYHRpdGxlRm9ybWF0YC5cblx0Y29tcHV0ZVRpdGxlRm9ybWF0OiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5pbnRlcnZhbFVuaXQgPT0gJ3llYXInKSB7XG5cdFx0XHRyZXR1cm4gJ1lZWVknO1xuXHRcdH1cblx0XHRlbHNlIGlmICh0aGlzLmludGVydmFsVW5pdCA9PSAnbW9udGgnKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5vcHQoJ21vbnRoWWVhckZvcm1hdCcpOyAvLyBsaWtlIFwiU2VwdGVtYmVyIDIwMTRcIlxuXHRcdH1cblx0XHRlbHNlIGlmICh0aGlzLmludGVydmFsRHVyYXRpb24uYXMoJ2RheXMnKSA+IDEpIHtcblx0XHRcdHJldHVybiAnbGwnOyAvLyBtdWx0aS1kYXkgcmFuZ2UuIHNob3J0ZXIsIGxpa2UgXCJTZXAgOSAtIDEwIDIwMTRcIlxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiAnTEwnOyAvLyBvbmUgZGF5LiBsb25nZXIsIGxpa2UgXCJTZXB0ZW1iZXIgOSAyMDE0XCJcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBVdGlsaXR5IGZvciBmb3JtYXR0aW5nIGEgcmFuZ2UuIEFjY2VwdHMgYSByYW5nZSBvYmplY3QsIGZvcm1hdHRpbmcgc3RyaW5nLCBhbmQgb3B0aW9uYWwgc2VwYXJhdG9yLlxuXHQvLyBEaXNwbGF5cyBhbGwtZGF5IHJhbmdlcyBuYXR1cmFsbHksIHdpdGggYW4gaW5jbHVzaXZlIGVuZC4gVGFrZXMgdGhlIGN1cnJlbnQgaXNSVEwgaW50byBhY2NvdW50LlxuXHQvLyBUaGUgdGltZXpvbmVzIG9mIHRoZSBkYXRlcyB3aXRoaW4gYHJhbmdlYCB3aWxsIGJlIHJlc3BlY3RlZC5cblx0Zm9ybWF0UmFuZ2U6IGZ1bmN0aW9uKHJhbmdlLCBmb3JtYXRTdHIsIHNlcGFyYXRvcikge1xuXHRcdHZhciBlbmQgPSByYW5nZS5lbmQ7XG5cblx0XHRpZiAoIWVuZC5oYXNUaW1lKCkpIHsgLy8gYWxsLWRheT9cblx0XHRcdGVuZCA9IGVuZC5jbG9uZSgpLnN1YnRyYWN0KDEpOyAvLyBjb252ZXJ0IHRvIGluY2x1c2l2ZS4gbGFzdCBtcyBvZiBwcmV2aW91cyBkYXlcblx0XHR9XG5cblx0XHRyZXR1cm4gZm9ybWF0UmFuZ2UocmFuZ2Uuc3RhcnQsIGVuZCwgZm9ybWF0U3RyLCBzZXBhcmF0b3IsIHRoaXMub3B0KCdpc1JUTCcpKTtcblx0fSxcblxuXG5cdGdldEFsbERheUh0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm9wdCgnYWxsRGF5SHRtbCcpIHx8IGh0bWxFc2NhcGUodGhpcy5vcHQoJ2FsbERheVRleHQnKSk7XG5cdH0sXG5cblxuXHQvKiBOYXZpZ2F0aW9uXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBHZW5lcmF0ZXMgSFRNTCBmb3IgYW4gYW5jaG9yIHRvIGFub3RoZXIgdmlldyBpbnRvIHRoZSBjYWxlbmRhci5cblx0Ly8gV2lsbCBlaXRoZXIgZ2VuZXJhdGUgYW4gPGE+IHRhZyBvciBhIG5vbi1jbGlja2FibGUgPHNwYW4+IHRhZywgZGVwZW5kaW5nIG9uIGVuYWJsZWQgc2V0dGluZ3MuXG5cdC8vIGBnb3RvT3B0aW9uc2AgY2FuIGVpdGhlciBiZSBhIG1vbWVudCBpbnB1dCwgb3IgYW4gb2JqZWN0IHdpdGggdGhlIGZvcm06XG5cdC8vIHsgZGF0ZSwgdHlwZSwgZm9yY2VPZmYgfVxuXHQvLyBgdHlwZWAgaXMgYSB2aWV3LXR5cGUgbGlrZSBcImRheVwiIG9yIFwid2Vla1wiLiBkZWZhdWx0IHZhbHVlIGlzIFwiZGF5XCIuXG5cdC8vIGBhdHRyc2AgYW5kIGBpbm5lckh0bWxgIGFyZSB1c2UgdG8gZ2VuZXJhdGUgdGhlIHJlc3Qgb2YgdGhlIEhUTUwgdGFnLlxuXHRidWlsZEdvdG9BbmNob3JIdG1sOiBmdW5jdGlvbihnb3RvT3B0aW9ucywgYXR0cnMsIGlubmVySHRtbCkge1xuXHRcdHZhciBkYXRlLCB0eXBlLCBmb3JjZU9mZjtcblx0XHR2YXIgZmluYWxPcHRpb25zO1xuXG5cdFx0aWYgKCQuaXNQbGFpbk9iamVjdChnb3RvT3B0aW9ucykpIHtcblx0XHRcdGRhdGUgPSBnb3RvT3B0aW9ucy5kYXRlO1xuXHRcdFx0dHlwZSA9IGdvdG9PcHRpb25zLnR5cGU7XG5cdFx0XHRmb3JjZU9mZiA9IGdvdG9PcHRpb25zLmZvcmNlT2ZmO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGRhdGUgPSBnb3RvT3B0aW9uczsgLy8gYSBzaW5nbGUgbW9tZW50IGlucHV0XG5cdFx0fVxuXHRcdGRhdGUgPSBGQy5tb21lbnQoZGF0ZSk7IC8vIGlmIGEgc3RyaW5nLCBwYXJzZSBpdFxuXG5cdFx0ZmluYWxPcHRpb25zID0geyAvLyBmb3Igc2VyaWFsaXphdGlvbiBpbnRvIHRoZSBsaW5rXG5cdFx0XHRkYXRlOiBkYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpLFxuXHRcdFx0dHlwZTogdHlwZSB8fCAnZGF5J1xuXHRcdH07XG5cblx0XHRpZiAodHlwZW9mIGF0dHJzID09PSAnc3RyaW5nJykge1xuXHRcdFx0aW5uZXJIdG1sID0gYXR0cnM7XG5cdFx0XHRhdHRycyA9IG51bGw7XG5cdFx0fVxuXG5cdFx0YXR0cnMgPSBhdHRycyA/ICcgJyArIGF0dHJzVG9TdHIoYXR0cnMpIDogJyc7IC8vIHdpbGwgaGF2ZSBhIGxlYWRpbmcgc3BhY2Vcblx0XHRpbm5lckh0bWwgPSBpbm5lckh0bWwgfHwgJyc7XG5cblx0XHRpZiAoIWZvcmNlT2ZmICYmIHRoaXMub3B0KCduYXZMaW5rcycpKSB7XG5cdFx0XHRyZXR1cm4gJzxhJyArIGF0dHJzICtcblx0XHRcdFx0JyBkYXRhLWdvdG89XCInICsgaHRtbEVzY2FwZShKU09OLnN0cmluZ2lmeShmaW5hbE9wdGlvbnMpKSArICdcIj4nICtcblx0XHRcdFx0aW5uZXJIdG1sICtcblx0XHRcdFx0JzwvYT4nO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiAnPHNwYW4nICsgYXR0cnMgKyAnPicgK1xuXHRcdFx0XHRpbm5lckh0bWwgK1xuXHRcdFx0XHQnPC9zcGFuPic7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gUmVuZGVyaW5nIE5vbi1kYXRlLXJlbGF0ZWQgQ29udGVudFxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0Ly8gU2V0cyB0aGUgY29udGFpbmVyIGVsZW1lbnQgdGhhdCB0aGUgdmlldyBzaG91bGQgcmVuZGVyIGluc2lkZSBvZiwgZG9lcyBnbG9iYWwgRE9NLXJlbGF0ZWQgaW5pdGlhbGl6YXRpb25zLFxuXHQvLyBhbmQgcmVuZGVycyBhbGwgdGhlIG5vbi1kYXRlLXJlbGF0ZWQgY29udGVudCBpbnNpZGUuXG5cdHNldEVsZW1lbnQ6IGZ1bmN0aW9uKGVsKSB7XG5cdFx0dGhpcy5lbCA9IGVsO1xuXHRcdHRoaXMuYmluZEdsb2JhbEhhbmRsZXJzKCk7XG5cdFx0dGhpcy5yZW5kZXJTa2VsZXRvbigpO1xuXHR9LFxuXG5cblx0Ly8gUmVtb3ZlcyB0aGUgdmlldydzIGNvbnRhaW5lciBlbGVtZW50IGZyb20gdGhlIERPTSwgY2xlYXJpbmcgYW55IGNvbnRlbnQgYmVmb3JlaGFuZC5cblx0Ly8gVW5kb2VzIGFueSBvdGhlciBET00tcmVsYXRlZCBhdHRhY2htZW50cy5cblx0cmVtb3ZlRWxlbWVudDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy51bnNldERhdGUoKTtcblx0XHR0aGlzLnVucmVuZGVyU2tlbGV0b24oKTtcblxuXHRcdHRoaXMudW5iaW5kR2xvYmFsSGFuZGxlcnMoKTtcblxuXHRcdHRoaXMuZWwucmVtb3ZlKCk7XG5cdFx0Ly8gTk9URTogZG9uJ3QgbnVsbC1vdXQgdGhpcy5lbCBpbiBjYXNlIHRoZSBWaWV3IHdhcyBkZXN0cm95ZWQgd2l0aGluIGFuIEFQSSBjYWxsYmFjay5cblx0XHQvLyBXZSBkb24ndCBudWxsLW91dCB0aGUgVmlldydzIG90aGVyIGpRdWVyeSBlbGVtZW50IHJlZmVyZW5jZXMgdXBvbiBkZXN0cm95LFxuXHRcdC8vICBzbyB3ZSBzaG91bGRuJ3Qga2lsbCB0aGlzLmVsIGVpdGhlci5cblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgdGhlIGJhc2ljIHN0cnVjdHVyZSBvZiB0aGUgdmlldyBiZWZvcmUgYW55IGNvbnRlbnQgaXMgcmVuZGVyZWRcblx0cmVuZGVyU2tlbGV0b246IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIHRoZSBiYXNpYyBzdHJ1Y3R1cmUgb2YgdGhlIHZpZXdcblx0dW5yZW5kZXJTa2VsZXRvbjogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBEYXRlIFNldHRpbmcvVW5zZXR0aW5nXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHRzZXREYXRlOiBmdW5jdGlvbihkYXRlKSB7XG5cdFx0dmFyIGlzUmVzZXQgPSB0aGlzLmlzRGF0ZVNldDtcblxuXHRcdHRoaXMuaXNEYXRlU2V0ID0gdHJ1ZTtcblx0XHR0aGlzLmhhbmRsZURhdGUoZGF0ZSwgaXNSZXNldCk7XG5cdFx0dGhpcy50cmlnZ2VyKGlzUmVzZXQgPyAnZGF0ZVJlc2V0JyA6ICdkYXRlU2V0JywgZGF0ZSk7XG5cdH0sXG5cblxuXHR1bnNldERhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmlzRGF0ZVNldCkge1xuXHRcdFx0dGhpcy5pc0RhdGVTZXQgPSBmYWxzZTtcblx0XHRcdHRoaXMuaGFuZGxlRGF0ZVVuc2V0KCk7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2RhdGVVbnNldCcpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIERhdGUgSGFuZGxpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdGhhbmRsZURhdGU6IGZ1bmN0aW9uKGRhdGUsIGlzUmVzZXQpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0dGhpcy51bmJpbmRFdmVudHMoKTsgLy8gd2lsbCBkbyBub3RoaW5nIGlmIG5vdCBhbHJlYWR5IGJvdW5kXG5cdFx0dGhpcy5yZXF1ZXN0RGF0ZVJlbmRlcihkYXRlKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gd2lzaCB3ZSBjb3VsZCBzdGFydCBlYXJsaWVyLCBidXQgc2V0UmFuZ2UvY29tcHV0ZVJhbmdlIG5lZWRzIHRvIGV4ZWN1dGUgZmlyc3Rcblx0XHRcdF90aGlzLmJpbmRFdmVudHMoKTsgLy8gd2lsbCByZXF1ZXN0IGV2ZW50c1xuXHRcdH0pO1xuXHR9LFxuXG5cblx0aGFuZGxlRGF0ZVVuc2V0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnVuYmluZEV2ZW50cygpO1xuXHRcdHRoaXMucmVxdWVzdERhdGVVbnJlbmRlcigpO1xuXHR9LFxuXG5cblx0Ly8gRGF0ZSBSZW5kZXIgUXVldWluZ1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0Ly8gaWYgZGF0ZSBub3Qgc3BlY2lmaWVkLCB1c2VzIGN1cnJlbnRcblx0cmVxdWVzdERhdGVSZW5kZXI6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0cmV0dXJuIHRoaXMuZGF0ZVJlbmRlclF1ZXVlLmFkZChmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBfdGhpcy5leGVjdXRlRGF0ZVJlbmRlcihkYXRlKTtcblx0XHR9KTtcblx0fSxcblxuXG5cdHJlcXVlc3REYXRlVW5yZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRyZXR1cm4gdGhpcy5kYXRlUmVuZGVyUXVldWUuYWRkKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIF90aGlzLmV4ZWN1dGVEYXRlVW5yZW5kZXIoKTtcblx0XHR9KTtcblx0fSxcblxuXG5cdC8vIERhdGUgSGlnaC1sZXZlbCBSZW5kZXJpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdC8vIGlmIGRhdGUgbm90IHNwZWNpZmllZCwgdXNlcyBjdXJyZW50XG5cdGV4ZWN1dGVEYXRlUmVuZGVyOiBmdW5jdGlvbihkYXRlKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdC8vIGlmIHJlbmRlcmluZyBhIG5ldyBkYXRlLCByZXNldCBzY3JvbGwgdG8gaW5pdGlhbCBzdGF0ZSAoc2Nyb2xsVGltZSlcblx0XHRpZiAoZGF0ZSkge1xuXHRcdFx0dGhpcy5jYXB0dXJlSW5pdGlhbFNjcm9sbCgpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRoaXMuY2FwdHVyZVNjcm9sbCgpOyAvLyBhIHJlcmVuZGVyIG9mIHRoZSBjdXJyZW50IGRhdGVcblx0XHR9XG5cblx0XHR0aGlzLmZyZWV6ZUhlaWdodCgpO1xuXG5cdFx0cmV0dXJuIHRoaXMuZXhlY3V0ZURhdGVVbnJlbmRlcigpLnRoZW4oZnVuY3Rpb24oKSB7XG5cblx0XHRcdGlmIChkYXRlKSB7XG5cdFx0XHRcdF90aGlzLnNldFJhbmdlKF90aGlzLmNvbXB1dGVSYW5nZShkYXRlKSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChfdGhpcy5yZW5kZXIpIHtcblx0XHRcdFx0X3RoaXMucmVuZGVyKCk7IC8vIFRPRE86IGRlcHJlY2F0ZVxuXHRcdFx0fVxuXG5cdFx0XHRfdGhpcy5yZW5kZXJEYXRlcygpO1xuXHRcdFx0X3RoaXMudXBkYXRlU2l6ZSgpO1xuXHRcdFx0X3RoaXMucmVuZGVyQnVzaW5lc3NIb3VycygpOyAvLyBtaWdodCBuZWVkIGNvb3JkaW5hdGVzLCBzbyBzaG91bGQgZ28gYWZ0ZXIgdXBkYXRlU2l6ZSgpXG5cdFx0XHRfdGhpcy5zdGFydE5vd0luZGljYXRvcigpO1xuXG5cdFx0XHRfdGhpcy50aGF3SGVpZ2h0KCk7XG5cdFx0XHRfdGhpcy5yZWxlYXNlU2Nyb2xsKCk7XG5cblx0XHRcdF90aGlzLmlzRGF0ZVJlbmRlcmVkID0gdHJ1ZTtcblx0XHRcdF90aGlzLm9uRGF0ZVJlbmRlcigpO1xuXHRcdFx0X3RoaXMudHJpZ2dlcignZGF0ZVJlbmRlcicpO1xuXHRcdH0pO1xuXHR9LFxuXG5cblx0ZXhlY3V0ZURhdGVVbnJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdGlmIChfdGhpcy5pc0RhdGVSZW5kZXJlZCkge1xuXHRcdFx0cmV0dXJuIHRoaXMucmVxdWVzdEV2ZW50c1VucmVuZGVyKCkudGhlbihmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRfdGhpcy51bnNlbGVjdCgpO1xuXHRcdFx0XHRfdGhpcy5zdG9wTm93SW5kaWNhdG9yKCk7XG5cdFx0XHRcdF90aGlzLnRyaWdnZXJVbnJlbmRlcigpO1xuXHRcdFx0XHRfdGhpcy51bnJlbmRlckJ1c2luZXNzSG91cnMoKTtcblx0XHRcdFx0X3RoaXMudW5yZW5kZXJEYXRlcygpO1xuXG5cdFx0XHRcdGlmIChfdGhpcy5kZXN0cm95KSB7XG5cdFx0XHRcdFx0X3RoaXMuZGVzdHJveSgpOyAvLyBUT0RPOiBkZXByZWNhdGVcblx0XHRcdFx0fVxuXG5cdFx0XHRcdF90aGlzLmlzRGF0ZVJlbmRlcmVkID0gZmFsc2U7XG5cdFx0XHRcdF90aGlzLnRyaWdnZXIoJ2RhdGVVbnJlbmRlcicpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIERhdGUgUmVuZGVyaW5nIFRyaWdnZXJzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHRvbkRhdGVSZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudHJpZ2dlclJlbmRlcigpO1xuXHR9LFxuXG5cblx0Ly8gRGF0ZSBMb3ctbGV2ZWwgUmVuZGVyaW5nXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBkYXRlLWNlbGwgY29udGVudCBvbmx5XG5cdHJlbmRlckRhdGVzOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIGRhdGUtY2VsbCBjb250ZW50IG9ubHlcblx0dW5yZW5kZXJEYXRlczogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGVcblx0fSxcblxuXG5cdC8vIE1pc2MgdmlldyByZW5kZXJpbmcgdXRpbHNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0Ly8gU2lnbmFscyB0aGF0IHRoZSB2aWV3J3MgY29udGVudCBoYXMgYmVlbiByZW5kZXJlZFxuXHR0cmlnZ2VyUmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcigndmlld1JlbmRlcicsIHRoaXMsIHRoaXMsIHRoaXMuZWwpO1xuXHR9LFxuXG5cblx0Ly8gU2lnbmFscyB0aGF0IHRoZSB2aWV3J3MgY29udGVudCBpcyBhYm91dCB0byBiZSB1bnJlbmRlcmVkXG5cdHRyaWdnZXJVbnJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5wdWJsaWNseVRyaWdnZXIoJ3ZpZXdEZXN0cm95JywgdGhpcywgdGhpcywgdGhpcy5lbCk7XG5cdH0sXG5cblxuXHQvLyBCaW5kcyBET00gaGFuZGxlcnMgdG8gZWxlbWVudHMgdGhhdCByZXNpZGUgb3V0c2lkZSB0aGUgdmlldyBjb250YWluZXIsIHN1Y2ggYXMgdGhlIGRvY3VtZW50XG5cdGJpbmRHbG9iYWxIYW5kbGVyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5saXN0ZW5UbygkKGRvY3VtZW50KSwgJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlRG9jdW1lbnRNb3VzZWRvd24pO1xuXHRcdHRoaXMubGlzdGVuVG8oJChkb2N1bWVudCksICd0b3VjaHN0YXJ0JywgdGhpcy5wcm9jZXNzVW5zZWxlY3QpO1xuXHR9LFxuXG5cblx0Ly8gVW5iaW5kcyBET00gaGFuZGxlcnMgZnJvbSBlbGVtZW50cyB0aGF0IHJlc2lkZSBvdXRzaWRlIHRoZSB2aWV3IGNvbnRhaW5lclxuXHR1bmJpbmRHbG9iYWxIYW5kbGVyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zdG9wTGlzdGVuaW5nVG8oJChkb2N1bWVudCkpO1xuXHR9LFxuXG5cblx0Ly8gSW5pdGlhbGl6ZXMgaW50ZXJuYWwgdmFyaWFibGVzIHJlbGF0ZWQgdG8gdGhlbWluZ1xuXHRpbml0VGhlbWluZ1Byb3BzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdG0gPSB0aGlzLm9wdCgndGhlbWUnKSA/ICd1aScgOiAnZmMnO1xuXG5cdFx0dGhpcy53aWRnZXRIZWFkZXJDbGFzcyA9IHRtICsgJy13aWRnZXQtaGVhZGVyJztcblx0XHR0aGlzLndpZGdldENvbnRlbnRDbGFzcyA9IHRtICsgJy13aWRnZXQtY29udGVudCc7XG5cdFx0dGhpcy5oaWdobGlnaHRTdGF0ZUNsYXNzID0gdG0gKyAnLXN0YXRlLWhpZ2hsaWdodCc7XG5cdH0sXG5cblxuXHQvKiBCdXNpbmVzcyBIb3Vyc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBidXNpbmVzcy1ob3VycyBvbnRvIHRoZSB2aWV3LiBBc3N1bWVzIHVwZGF0ZVNpemUgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQuXG5cdHJlbmRlckJ1c2luZXNzSG91cnM6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gVW5yZW5kZXJzIHByZXZpb3VzbHktcmVuZGVyZWQgYnVzaW5lc3MtaG91cnNcblx0dW5yZW5kZXJCdXNpbmVzc0hvdXJzOiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8qIE5vdyBJbmRpY2F0b3Jcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIEltbWVkaWF0ZWx5IHJlbmRlciB0aGUgY3VycmVudCB0aW1lIGluZGljYXRvciBhbmQgYmVnaW5zIHJlLXJlbmRlcmluZyBpdCBhdCBhbiBpbnRlcnZhbCxcblx0Ly8gd2hpY2ggaXMgZGVmaW5lZCBieSB0aGlzLmdldE5vd0luZGljYXRvclVuaXQoKS5cblx0Ly8gVE9ETzogc29tZWhvdyBkbyB0aGlzIGZvciB0aGUgY3VycmVudCB3aG9sZSBkYXkncyBiYWNrZ3JvdW5kIHRvb1xuXHRzdGFydE5vd0luZGljYXRvcjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdW5pdDtcblx0XHR2YXIgdXBkYXRlO1xuXHRcdHZhciBkZWxheTsgLy8gbXMgd2FpdCB2YWx1ZVxuXG5cdFx0aWYgKHRoaXMub3B0KCdub3dJbmRpY2F0b3InKSkge1xuXHRcdFx0dW5pdCA9IHRoaXMuZ2V0Tm93SW5kaWNhdG9yVW5pdCgpO1xuXHRcdFx0aWYgKHVuaXQpIHtcblx0XHRcdFx0dXBkYXRlID0gcHJveHkodGhpcywgJ3VwZGF0ZU5vd0luZGljYXRvcicpOyAvLyBiaW5kIHRvIGB0aGlzYFxuXG5cdFx0XHRcdHRoaXMuaW5pdGlhbE5vd0RhdGUgPSB0aGlzLmNhbGVuZGFyLmdldE5vdygpO1xuXHRcdFx0XHR0aGlzLmluaXRpYWxOb3dRdWVyaWVkTXMgPSArbmV3IERhdGUoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJOb3dJbmRpY2F0b3IodGhpcy5pbml0aWFsTm93RGF0ZSk7XG5cdFx0XHRcdHRoaXMuaXNOb3dJbmRpY2F0b3JSZW5kZXJlZCA9IHRydWU7XG5cblx0XHRcdFx0Ly8gd2FpdCB1bnRpbCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBuZXh0IGludGVydmFsXG5cdFx0XHRcdGRlbGF5ID0gdGhpcy5pbml0aWFsTm93RGF0ZS5jbG9uZSgpLnN0YXJ0T2YodW5pdCkuYWRkKDEsIHVuaXQpIC0gdGhpcy5pbml0aWFsTm93RGF0ZTtcblx0XHRcdFx0dGhpcy5ub3dJbmRpY2F0b3JUaW1lb3V0SUQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdF90aGlzLm5vd0luZGljYXRvclRpbWVvdXRJRCA9IG51bGw7XG5cdFx0XHRcdFx0dXBkYXRlKCk7XG5cdFx0XHRcdFx0ZGVsYXkgPSArbW9tZW50LmR1cmF0aW9uKDEsIHVuaXQpO1xuXHRcdFx0XHRcdGRlbGF5ID0gTWF0aC5tYXgoMTAwLCBkZWxheSk7IC8vIHByZXZlbnQgdG9vIGZyZXF1ZW50XG5cdFx0XHRcdFx0X3RoaXMubm93SW5kaWNhdG9ySW50ZXJ2YWxJRCA9IHNldEludGVydmFsKHVwZGF0ZSwgZGVsYXkpOyAvLyB1cGRhdGUgZXZlcnkgaW50ZXJ2YWxcblx0XHRcdFx0fSwgZGVsYXkpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8vIHJlcmVuZGVycyB0aGUgbm93IGluZGljYXRvciwgY29tcHV0aW5nIHRoZSBuZXcgY3VycmVudCB0aW1lIGZyb20gdGhlIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzIHBhc3NlZFxuXHQvLyBzaW5jZSB0aGUgaW5pdGlhbCBnZXROb3cgY2FsbC5cblx0dXBkYXRlTm93SW5kaWNhdG9yOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5pc05vd0luZGljYXRvclJlbmRlcmVkKSB7XG5cdFx0XHR0aGlzLnVucmVuZGVyTm93SW5kaWNhdG9yKCk7XG5cdFx0XHR0aGlzLnJlbmRlck5vd0luZGljYXRvcihcblx0XHRcdFx0dGhpcy5pbml0aWFsTm93RGF0ZS5jbG9uZSgpLmFkZChuZXcgRGF0ZSgpIC0gdGhpcy5pbml0aWFsTm93UXVlcmllZE1zKSAvLyBhZGQgbXNcblx0XHRcdCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gSW1tZWRpYXRlbHkgdW5yZW5kZXJzIHRoZSB2aWV3J3MgY3VycmVudCB0aW1lIGluZGljYXRvciBhbmQgc3RvcHMgYW55IHJlLXJlbmRlcmluZyB0aW1lcnMuXG5cdC8vIFdvbid0IGNhdXNlIHNpZGUgZWZmZWN0cyBpZiBpbmRpY2F0b3IgaXNuJ3QgcmVuZGVyZWQuXG5cdHN0b3BOb3dJbmRpY2F0b3I6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmlzTm93SW5kaWNhdG9yUmVuZGVyZWQpIHtcblxuXHRcdFx0aWYgKHRoaXMubm93SW5kaWNhdG9yVGltZW91dElEKSB7XG5cdFx0XHRcdGNsZWFyVGltZW91dCh0aGlzLm5vd0luZGljYXRvclRpbWVvdXRJRCk7XG5cdFx0XHRcdHRoaXMubm93SW5kaWNhdG9yVGltZW91dElEID0gbnVsbDtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLm5vd0luZGljYXRvckludGVydmFsSUQpIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMubm93SW5kaWNhdG9ySW50ZXJ2YWxJRCk7XG5cdFx0XHRcdHRoaXMubm93SW5kaWNhdG9ySW50ZXJ2YWxJRCA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMudW5yZW5kZXJOb3dJbmRpY2F0b3IoKTtcblx0XHRcdHRoaXMuaXNOb3dJbmRpY2F0b3JSZW5kZXJlZCA9IGZhbHNlO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFJldHVybnMgYSBzdHJpbmcgdW5pdCwgbGlrZSAnc2Vjb25kJyBvciAnbWludXRlJyB0aGF0IGRlZmluZWQgaG93IG9mdGVuIHRoZSBjdXJyZW50IHRpbWUgaW5kaWNhdG9yXG5cdC8vIHNob3VsZCBiZSByZWZyZXNoZWQuIElmIHNvbWV0aGluZyBmYWxzeSBpcyByZXR1cm5lZCwgbm8gdGltZSBpbmRpY2F0b3IgaXMgcmVuZGVyZWQgYXQgYWxsLlxuXHRnZXROb3dJbmRpY2F0b3JVbml0OiBmdW5jdGlvbigpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgYSBjdXJyZW50IHRpbWUgaW5kaWNhdG9yIGF0IHRoZSBnaXZlbiBkYXRldGltZVxuXHRyZW5kZXJOb3dJbmRpY2F0b3I6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFVuZG9lcyB0aGUgcmVuZGVyaW5nIGFjdGlvbnMgZnJvbSByZW5kZXJOb3dJbmRpY2F0b3Jcblx0dW5yZW5kZXJOb3dJbmRpY2F0b3I6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0LyogRGltZW5zaW9uc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVmcmVzaGVzIGFueXRoaW5nIGRlcGVuZGFudCB1cG9uIHNpemluZyBvZiB0aGUgY29udGFpbmVyIGVsZW1lbnQgb2YgdGhlIGdyaWRcblx0dXBkYXRlU2l6ZTogZnVuY3Rpb24oaXNSZXNpemUpIHtcblxuXHRcdGlmIChpc1Jlc2l6ZSkge1xuXHRcdFx0dGhpcy5jYXB0dXJlU2Nyb2xsKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy51cGRhdGVIZWlnaHQoaXNSZXNpemUpO1xuXHRcdHRoaXMudXBkYXRlV2lkdGgoaXNSZXNpemUpO1xuXHRcdHRoaXMudXBkYXRlTm93SW5kaWNhdG9yKCk7XG5cblx0XHRpZiAoaXNSZXNpemUpIHtcblx0XHRcdHRoaXMucmVsZWFzZVNjcm9sbCgpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFJlZnJlc2hlcyB0aGUgaG9yaXpvbnRhbCBkaW1lbnNpb25zIG9mIHRoZSBjYWxlbmRhclxuXHR1cGRhdGVXaWR0aDogZnVuY3Rpb24oaXNSZXNpemUpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFJlZnJlc2hlcyB0aGUgdmVydGljYWwgZGltZW5zaW9ucyBvZiB0aGUgY2FsZW5kYXJcblx0dXBkYXRlSGVpZ2h0OiBmdW5jdGlvbihpc1Jlc2l6ZSkge1xuXHRcdHZhciBjYWxlbmRhciA9IHRoaXMuY2FsZW5kYXI7IC8vIHdlIHBvbGwgdGhlIGNhbGVuZGFyIGZvciBoZWlnaHQgaW5mb3JtYXRpb25cblxuXHRcdHRoaXMuc2V0SGVpZ2h0KFxuXHRcdFx0Y2FsZW5kYXIuZ2V0U3VnZ2VzdGVkVmlld0hlaWdodCgpLFxuXHRcdFx0Y2FsZW5kYXIuaXNIZWlnaHRBdXRvKClcblx0XHQpO1xuXHR9LFxuXG5cblx0Ly8gVXBkYXRlcyB0aGUgdmVydGljYWwgZGltZW5zaW9ucyBvZiB0aGUgY2FsZW5kYXIgdG8gdGhlIHNwZWNpZmllZCBoZWlnaHQuXG5cdC8vIGlmIGBpc0F1dG9gIGlzIHNldCB0byB0cnVlLCBoZWlnaHQgYmVjb21lcyBtZXJlbHkgYSBzdWdnZXN0aW9uIGFuZCB0aGUgdmlldyBzaG91bGQgdXNlIGl0cyBcIm5hdHVyYWxcIiBoZWlnaHQuXG5cdHNldEhlaWdodDogZnVuY3Rpb24oaGVpZ2h0LCBpc0F1dG8pIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8qIFNjcm9sbGVyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRjYXB0dXJlZFNjcm9sbDogbnVsbCxcblx0Y2FwdHVyZWRTY3JvbGxEZXB0aDogMCxcblxuXG5cdGNhcHR1cmVTY3JvbGw6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghKHRoaXMuY2FwdHVyZWRTY3JvbGxEZXB0aCsrKSkge1xuXHRcdFx0dGhpcy5jYXB0dXJlZFNjcm9sbCA9IHRoaXMuaXNEYXRlUmVuZGVyZWQgPyB0aGlzLnF1ZXJ5U2Nyb2xsKCkgOiB7fTsgLy8gcmVxdWlyZSBhIHJlbmRlciBmaXJzdFxuXHRcdFx0cmV0dXJuIHRydWU7IC8vIHJvb3Q/XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXG5cdGNhcHR1cmVJbml0aWFsU2Nyb2xsOiBmdW5jdGlvbihmb3JjZWRTY3JvbGwpIHtcblx0XHRpZiAodGhpcy5jYXB0dXJlU2Nyb2xsKCkpIHsgLy8gcm9vdD9cblx0XHRcdHRoaXMuY2FwdHVyZWRTY3JvbGwuaXNJbml0aWFsID0gdHJ1ZTtcblxuXHRcdFx0aWYgKGZvcmNlZFNjcm9sbCkge1xuXHRcdFx0XHQkLmV4dGVuZCh0aGlzLmNhcHR1cmVkU2Nyb2xsLCBmb3JjZWRTY3JvbGwpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHRoaXMuY2FwdHVyZWRTY3JvbGwuaXNDb21wdXRlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0cmVsZWFzZVNjcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNjcm9sbCA9IHRoaXMuY2FwdHVyZWRTY3JvbGw7XG5cdFx0dmFyIGlzUm9vdCA9IHRoaXMuZGlzY2FyZFNjcm9sbCgpO1xuXG5cdFx0aWYgKHNjcm9sbC5pc0NvbXB1dGVkKSB7XG5cdFx0XHRpZiAoaXNSb290KSB7XG5cdFx0XHRcdC8vIG9ubHkgY29tcHV0ZSBpbml0aWFsIHNjcm9sbCBpZiBpdCB3aWxsIGFjdHVhbGx5IGJlIHVzZWQgKGlzIHRoZSByb290IGNhcHR1cmUpXG5cdFx0XHRcdCQuZXh0ZW5kKHNjcm9sbCwgdGhpcy5jb21wdXRlSW5pdGlhbFNjcm9sbCgpKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRzY3JvbGwgPSBudWxsOyAvLyBzY3JvbGwgY291bGRuJ3QgYmUgY29tcHV0ZWQuIGRvbid0IGFwcGx5IGl0IHRvIHRoZSBET01cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoc2Nyb2xsKSB7XG5cdFx0XHQvLyB3ZSBhY3QgaW1tZWRpYXRlbHkgb24gYSByZWxlYXNlU2Nyb2xsIG9wZXJhdGlvbiwgYXMgb3Bwb3NlZCB0byBjYXB0dXJlU2Nyb2xsLlxuXHRcdFx0Ly8gaWYgY2FwdHVyZS9yZWxlYXNlIHdyYXBzIGEgcmVuZGVyIG9wZXJhdGlvbiB0aGF0IHNjcmV3cyB1cCB0aGUgc2Nyb2xsLFxuXHRcdFx0Ly8gd2Ugc3RpbGwgd2FudCB0byByZXN0b3JlIGl0IGEgZ29vZCBzdGF0ZSBhZnRlciwgcmVnYXJkbGVzcyBvZiBkZXB0aC5cblxuXHRcdFx0aWYgKHNjcm9sbC5pc0luaXRpYWwpIHtcblx0XHRcdFx0dGhpcy5oYXJkU2V0U2Nyb2xsKHNjcm9sbCk7IC8vIG91dHNtYXJ0IGhvdyBicm93c2VycyBzZXQgc2Nyb2xsIG9uIGluaXRpYWwgRE9NXG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dGhpcy5zZXRTY3JvbGwoc2Nyb2xsKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHRkaXNjYXJkU2Nyb2xsOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoISgtLXRoaXMuY2FwdHVyZWRTY3JvbGxEZXB0aCkpIHtcblx0XHRcdHRoaXMuY2FwdHVyZWRTY3JvbGwgPSBudWxsO1xuXHRcdFx0cmV0dXJuIHRydWU7IC8vIHJvb3Q/XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXG5cdGNvbXB1dGVJbml0aWFsU2Nyb2xsOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4ge307XG5cdH0sXG5cblxuXHRxdWVyeVNjcm9sbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHt9O1xuXHR9LFxuXG5cblx0aGFyZFNldFNjcm9sbDogZnVuY3Rpb24oc2Nyb2xsKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgZXhlYyA9IGZ1bmN0aW9uKCkgeyBfdGhpcy5zZXRTY3JvbGwoc2Nyb2xsKTsgfTtcblx0XHRleGVjKCk7XG5cdFx0c2V0VGltZW91dChleGVjLCAwKTsgLy8gdG8gc3VyZWx5IGNsZWFyIHRoZSBicm93c2VyJ3MgaW5pdGlhbCBzY3JvbGwgZm9yIHRoZSBET01cblx0fSxcblxuXG5cdHNldFNjcm9sbDogZnVuY3Rpb24oc2Nyb2xsKSB7XG5cdH0sXG5cblxuXHQvKiBIZWlnaHQgRnJlZXppbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdGZyZWV6ZUhlaWdodDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5jYWxlbmRhci5mcmVlemVDb250ZW50SGVpZ2h0KCk7XG5cdH0sXG5cblxuXHR0aGF3SGVpZ2h0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmNhbGVuZGFyLnRoYXdDb250ZW50SGVpZ2h0KCk7XG5cdH0sXG5cblxuXHQvLyBFdmVudCBCaW5kaW5nL1VuYmluZGluZ1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0YmluZEV2ZW50czogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdGlmICghdGhpcy5pc0V2ZW50c0JvdW5kKSB7XG5cdFx0XHR0aGlzLmlzRXZlbnRzQm91bmQgPSB0cnVlO1xuXHRcdFx0dGhpcy5yZWplY3RPbignZXZlbnRzVW5iaW5kJywgdGhpcy5yZXF1ZXN0RXZlbnRzKCkpLnRoZW4oZnVuY3Rpb24oZXZlbnRzKSB7IC8vIFRPRE86IHRlc3QgcmVqZWN0aW9uXG5cdFx0XHRcdF90aGlzLmxpc3RlblRvKF90aGlzLmNhbGVuZGFyLCAnZXZlbnRzUmVzZXQnLCBfdGhpcy5zZXRFdmVudHMpO1xuXHRcdFx0XHRfdGhpcy5zZXRFdmVudHMoZXZlbnRzKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSxcblxuXG5cdHVuYmluZEV2ZW50czogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaXNFdmVudHNCb3VuZCkge1xuXHRcdFx0dGhpcy5pc0V2ZW50c0JvdW5kID0gZmFsc2U7XG5cdFx0XHR0aGlzLnN0b3BMaXN0ZW5pbmdUbyh0aGlzLmNhbGVuZGFyLCAnZXZlbnRzUmVzZXQnKTtcblx0XHRcdHRoaXMudW5zZXRFdmVudHMoKTtcblx0XHRcdHRoaXMudHJpZ2dlcignZXZlbnRzVW5iaW5kJyk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gRXZlbnQgU2V0dGluZy9VbnNldHRpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdHNldEV2ZW50czogZnVuY3Rpb24oZXZlbnRzKSB7XG5cdFx0dmFyIGlzUmVzZXQgPSB0aGlzLmlzRXZlbnRTZXQ7XG5cblx0XHR0aGlzLmlzRXZlbnRzU2V0ID0gdHJ1ZTtcblx0XHR0aGlzLmhhbmRsZUV2ZW50cyhldmVudHMsIGlzUmVzZXQpO1xuXHRcdHRoaXMudHJpZ2dlcihpc1Jlc2V0ID8gJ2V2ZW50c1Jlc2V0JyA6ICdldmVudHNTZXQnLCBldmVudHMpO1xuXHR9LFxuXG5cblx0dW5zZXRFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmlzRXZlbnRzU2V0KSB7XG5cdFx0XHR0aGlzLmlzRXZlbnRzU2V0ID0gZmFsc2U7XG5cdFx0XHR0aGlzLmhhbmRsZUV2ZW50c1Vuc2V0KCk7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2V2ZW50c1Vuc2V0Jyk7XG5cdFx0fVxuXHR9LFxuXG5cblx0d2hlbkV2ZW50c1NldDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdGlmICh0aGlzLmlzRXZlbnRzU2V0KSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuZ2V0Q3VycmVudEV2ZW50cygpKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuXHRcdFx0XHRfdGhpcy5vbmUoJ2V2ZW50c1NldCcsIHJlc29sdmUpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gRXZlbnQgSGFuZGxpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdGhhbmRsZUV2ZW50czogZnVuY3Rpb24oZXZlbnRzLCBpc1Jlc2V0KSB7XG5cdFx0dGhpcy5yZXF1ZXN0RXZlbnRzUmVuZGVyKGV2ZW50cyk7XG5cdH0sXG5cblxuXHRoYW5kbGVFdmVudHNVbnNldDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5yZXF1ZXN0RXZlbnRzVW5yZW5kZXIoKTtcblx0fSxcblxuXG5cdC8vIEV2ZW50IFJlbmRlciBRdWV1aW5nXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBhc3N1bWVzIGFueSBwcmV2aW91cyBldmVudCByZW5kZXJzIGhhdmUgYmVlbiBjbGVhcmVkIGFscmVhZHlcblx0cmVxdWVzdEV2ZW50c1JlbmRlcjogZnVuY3Rpb24oZXZlbnRzKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdHJldHVybiB0aGlzLmV2ZW50UmVuZGVyUXVldWUuYWRkKGZ1bmN0aW9uKCkgeyAvLyBtaWdodCBub3QgcmV0dXJuIGEgcHJvbWlzZSBpZiBkZWJvdW5jZWQhPyBiYWRcblx0XHRcdHJldHVybiBfdGhpcy5leGVjdXRlRXZlbnRzUmVuZGVyKGV2ZW50cyk7XG5cdFx0fSk7XG5cdH0sXG5cblxuXHRyZXF1ZXN0RXZlbnRzVW5yZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRpZiAodGhpcy5pc0V2ZW50c1JlbmRlcmVkKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5ldmVudFJlbmRlclF1ZXVlLmFkZFF1aWNrbHkoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBfdGhpcy5leGVjdXRlRXZlbnRzVW5yZW5kZXIoKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0XHR9XG5cdH0sXG5cblxuXHRyZXF1ZXN0Q3VycmVudEV2ZW50c1JlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuaXNFdmVudHNTZXQpIHtcblx0XHRcdHRoaXMucmVxdWVzdEV2ZW50c1JlbmRlcih0aGlzLmdldEN1cnJlbnRFdmVudHMoKSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gRXZlbnQgSGlnaC1sZXZlbCBSZW5kZXJpbmdcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdGV4ZWN1dGVFdmVudHNSZW5kZXI6IGZ1bmN0aW9uKGV2ZW50cykge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHR0aGlzLmNhcHR1cmVTY3JvbGwoKTtcblx0XHR0aGlzLmZyZWV6ZUhlaWdodCgpO1xuXG5cdFx0cmV0dXJuIHRoaXMuZXhlY3V0ZUV2ZW50c1VucmVuZGVyKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdF90aGlzLnJlbmRlckV2ZW50cyhldmVudHMpO1xuXG5cdFx0XHRfdGhpcy50aGF3SGVpZ2h0KCk7XG5cdFx0XHRfdGhpcy5yZWxlYXNlU2Nyb2xsKCk7XG5cblx0XHRcdF90aGlzLmlzRXZlbnRzUmVuZGVyZWQgPSB0cnVlO1xuXHRcdFx0X3RoaXMub25FdmVudHNSZW5kZXIoKTtcblx0XHRcdF90aGlzLnRyaWdnZXIoJ2V2ZW50c1JlbmRlcicpO1xuXHRcdH0pO1xuXHR9LFxuXG5cblx0ZXhlY3V0ZUV2ZW50c1VucmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5pc0V2ZW50c1JlbmRlcmVkKSB7XG5cdFx0XHR0aGlzLm9uQmVmb3JlRXZlbnRzVW5yZW5kZXIoKTtcblxuXHRcdFx0dGhpcy5jYXB0dXJlU2Nyb2xsKCk7XG5cdFx0XHR0aGlzLmZyZWV6ZUhlaWdodCgpO1xuXG5cdFx0XHRpZiAodGhpcy5kZXN0cm95RXZlbnRzKSB7XG5cdFx0XHRcdHRoaXMuZGVzdHJveUV2ZW50cygpOyAvLyBUT0RPOiBkZXByZWNhdGVcblx0XHRcdH1cblxuXHRcdFx0dGhpcy51bnJlbmRlckV2ZW50cygpO1xuXG5cdFx0XHR0aGlzLnRoYXdIZWlnaHQoKTtcblx0XHRcdHRoaXMucmVsZWFzZVNjcm9sbCgpO1xuXG5cdFx0XHR0aGlzLmlzRXZlbnRzUmVuZGVyZWQgPSBmYWxzZTtcblx0XHRcdHRoaXMudHJpZ2dlcignZXZlbnRzVW5yZW5kZXInKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7IC8vIGFsd2F5cyBzeW5jaHJvbm91c1xuXHR9LFxuXG5cblx0Ly8gRXZlbnQgUmVuZGVyaW5nIFRyaWdnZXJzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBTaWduYWxzIHRoYXQgYWxsIGV2ZW50cyBoYXZlIGJlZW4gcmVuZGVyZWRcblx0b25FdmVudHNSZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMucmVuZGVyZWRFdmVudFNlZ0VhY2goZnVuY3Rpb24oc2VnKSB7XG5cdFx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcignZXZlbnRBZnRlclJlbmRlcicsIHNlZy5ldmVudCwgc2VnLmV2ZW50LCBzZWcuZWwpO1xuXHRcdH0pO1xuXHRcdHRoaXMucHVibGljbHlUcmlnZ2VyKCdldmVudEFmdGVyQWxsUmVuZGVyJyk7XG5cdH0sXG5cblxuXHQvLyBTaWduYWxzIHRoYXQgYWxsIGV2ZW50IGVsZW1lbnRzIGFyZSBhYm91dCB0byBiZSByZW1vdmVkXG5cdG9uQmVmb3JlRXZlbnRzVW5yZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMucmVuZGVyZWRFdmVudFNlZ0VhY2goZnVuY3Rpb24oc2VnKSB7XG5cdFx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcignZXZlbnREZXN0cm95Jywgc2VnLmV2ZW50LCBzZWcuZXZlbnQsIHNlZy5lbCk7XG5cdFx0fSk7XG5cdH0sXG5cblxuXHQvLyBFdmVudCBMb3ctbGV2ZWwgUmVuZGVyaW5nXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBSZW5kZXJzIHRoZSBldmVudHMgb250byB0aGUgdmlldy5cblx0cmVuZGVyRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcblx0XHQvLyBzdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnRcblx0fSxcblxuXG5cdC8vIFJlbW92ZXMgZXZlbnQgZWxlbWVudHMgZnJvbSB0aGUgdmlldy5cblx0dW5yZW5kZXJFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gRXZlbnQgRGF0YSBBY2Nlc3Ncblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdHJlcXVlc3RFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmNhbGVuZGFyLnJlcXVlc3RFdmVudHModGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXHR9LFxuXG5cblx0Z2V0Q3VycmVudEV2ZW50czogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuY2FsZW5kYXIuZ2V0UHJ1bmVkRXZlbnRDYWNoZSgpO1xuXHR9LFxuXG5cblx0Ly8gRXZlbnQgUmVuZGVyaW5nIFV0aWxzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBHaXZlbiBhbiBldmVudCBhbmQgdGhlIGRlZmF1bHQgZWxlbWVudCB1c2VkIGZvciByZW5kZXJpbmcsIHJldHVybnMgdGhlIGVsZW1lbnQgdGhhdCBzaG91bGQgYWN0dWFsbHkgYmUgdXNlZC5cblx0Ly8gQmFzaWNhbGx5IHJ1bnMgZXZlbnRzIGFuZCBlbGVtZW50cyB0aHJvdWdoIHRoZSBldmVudFJlbmRlciBob29rLlxuXHRyZXNvbHZlRXZlbnRFbDogZnVuY3Rpb24oZXZlbnQsIGVsKSB7XG5cdFx0dmFyIGN1c3RvbSA9IHRoaXMucHVibGljbHlUcmlnZ2VyKCdldmVudFJlbmRlcicsIGV2ZW50LCBldmVudCwgZWwpO1xuXG5cdFx0aWYgKGN1c3RvbSA9PT0gZmFsc2UpIHsgLy8gbWVhbnMgZG9uJ3QgcmVuZGVyIGF0IGFsbFxuXHRcdFx0ZWwgPSBudWxsO1xuXHRcdH1cblx0XHRlbHNlIGlmIChjdXN0b20gJiYgY3VzdG9tICE9PSB0cnVlKSB7XG5cdFx0XHRlbCA9ICQoY3VzdG9tKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZWw7XG5cdH0sXG5cblxuXHQvLyBIaWRlcyBhbGwgcmVuZGVyZWQgZXZlbnQgc2VnbWVudHMgbGlua2VkIHRvIHRoZSBnaXZlbiBldmVudFxuXHRzaG93RXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dGhpcy5yZW5kZXJlZEV2ZW50U2VnRWFjaChmdW5jdGlvbihzZWcpIHtcblx0XHRcdHNlZy5lbC5jc3MoJ3Zpc2liaWxpdHknLCAnJyk7XG5cdFx0fSwgZXZlbnQpO1xuXHR9LFxuXG5cblx0Ly8gU2hvd3MgYWxsIHJlbmRlcmVkIGV2ZW50IHNlZ21lbnRzIGxpbmtlZCB0byB0aGUgZ2l2ZW4gZXZlbnRcblx0aGlkZUV2ZW50OiBmdW5jdGlvbihldmVudCkge1xuXHRcdHRoaXMucmVuZGVyZWRFdmVudFNlZ0VhY2goZnVuY3Rpb24oc2VnKSB7XG5cdFx0XHRzZWcuZWwuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuXHRcdH0sIGV2ZW50KTtcblx0fSxcblxuXG5cdC8vIEl0ZXJhdGVzIHRocm91Z2ggZXZlbnQgc2VnbWVudHMgdGhhdCBoYXZlIGJlZW4gcmVuZGVyZWQgKGhhdmUgYW4gZWwpLiBHb2VzIHRocm91Z2ggYWxsIGJ5IGRlZmF1bHQuXG5cdC8vIElmIHRoZSBvcHRpb25hbCBgZXZlbnRgIGFyZ3VtZW50IGlzIHNwZWNpZmllZCwgb25seSBpdGVyYXRlcyB0aHJvdWdoIHNlZ21lbnRzIGxpbmtlZCB0byB0aGF0IGV2ZW50LlxuXHQvLyBUaGUgYHRoaXNgIHZhbHVlIG9mIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIHRoZSB2aWV3LlxuXHRyZW5kZXJlZEV2ZW50U2VnRWFjaDogZnVuY3Rpb24oZnVuYywgZXZlbnQpIHtcblx0XHR2YXIgc2VncyA9IHRoaXMuZ2V0RXZlbnRTZWdzKCk7XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgc2Vncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKCFldmVudCB8fCBzZWdzW2ldLmV2ZW50Ll9pZCA9PT0gZXZlbnQuX2lkKSB7XG5cdFx0XHRcdGlmIChzZWdzW2ldLmVsKSB7XG5cdFx0XHRcdFx0ZnVuYy5jYWxsKHRoaXMsIHNlZ3NbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gUmV0cmlldmVzIGFsbCB0aGUgcmVuZGVyZWQgc2VnbWVudCBvYmplY3RzIGZvciB0aGUgdmlld1xuXHRnZXRFdmVudFNlZ3M6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnRcblx0XHRyZXR1cm4gW107XG5cdH0sXG5cblxuXHQvKiBFdmVudCBEcmFnLW4tRHJvcFxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQ29tcHV0ZXMgaWYgdGhlIGdpdmVuIGV2ZW50IGlzIGFsbG93ZWQgdG8gYmUgZHJhZ2dlZCBieSB0aGUgdXNlclxuXHRpc0V2ZW50RHJhZ2dhYmxlOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHJldHVybiB0aGlzLmlzRXZlbnRTdGFydEVkaXRhYmxlKGV2ZW50KTtcblx0fSxcblxuXG5cdGlzRXZlbnRTdGFydEVkaXRhYmxlOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHJldHVybiBmaXJzdERlZmluZWQoXG5cdFx0XHRldmVudC5zdGFydEVkaXRhYmxlLFxuXHRcdFx0KGV2ZW50LnNvdXJjZSB8fCB7fSkuc3RhcnRFZGl0YWJsZSxcblx0XHRcdHRoaXMub3B0KCdldmVudFN0YXJ0RWRpdGFibGUnKSxcblx0XHRcdHRoaXMuaXNFdmVudEdlbmVyYWxseUVkaXRhYmxlKGV2ZW50KVxuXHRcdCk7XG5cdH0sXG5cblxuXHRpc0V2ZW50R2VuZXJhbGx5RWRpdGFibGU6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0cmV0dXJuIGZpcnN0RGVmaW5lZChcblx0XHRcdGV2ZW50LmVkaXRhYmxlLFxuXHRcdFx0KGV2ZW50LnNvdXJjZSB8fCB7fSkuZWRpdGFibGUsXG5cdFx0XHR0aGlzLm9wdCgnZWRpdGFibGUnKVxuXHRcdCk7XG5cdH0sXG5cblxuXHQvLyBNdXN0IGJlIGNhbGxlZCB3aGVuIGFuIGV2ZW50IGluIHRoZSB2aWV3IGlzIGRyb3BwZWQgb250byBuZXcgbG9jYXRpb24uXG5cdC8vIGBkcm9wTG9jYXRpb25gIGlzIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBuZXcgem9uZWQgc3RhcnQvZW5kL2FsbERheSB2YWx1ZXMgZm9yIHRoZSBldmVudC5cblx0cmVwb3J0RXZlbnREcm9wOiBmdW5jdGlvbihldmVudCwgZHJvcExvY2F0aW9uLCBsYXJnZVVuaXQsIGVsLCBldikge1xuXHRcdHZhciBjYWxlbmRhciA9IHRoaXMuY2FsZW5kYXI7XG5cdFx0dmFyIG11dGF0ZVJlc3VsdCA9IGNhbGVuZGFyLm11dGF0ZUV2ZW50KGV2ZW50LCBkcm9wTG9jYXRpb24sIGxhcmdlVW5pdCk7XG5cdFx0dmFyIHVuZG9GdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRtdXRhdGVSZXN1bHQudW5kbygpO1xuXHRcdFx0Y2FsZW5kYXIucmVwb3J0RXZlbnRDaGFuZ2UoKTtcblx0XHR9O1xuXG5cdFx0dGhpcy50cmlnZ2VyRXZlbnREcm9wKGV2ZW50LCBtdXRhdGVSZXN1bHQuZGF0ZURlbHRhLCB1bmRvRnVuYywgZWwsIGV2KTtcblx0XHRjYWxlbmRhci5yZXBvcnRFdmVudENoYW5nZSgpOyAvLyB3aWxsIHJlcmVuZGVyIGV2ZW50c1xuXHR9LFxuXG5cblx0Ly8gVHJpZ2dlcnMgZXZlbnQtZHJvcCBoYW5kbGVycyB0aGF0IGhhdmUgc3Vic2NyaWJlZCB2aWEgdGhlIEFQSVxuXHR0cmlnZ2VyRXZlbnREcm9wOiBmdW5jdGlvbihldmVudCwgZGF0ZURlbHRhLCB1bmRvRnVuYywgZWwsIGV2KSB7XG5cdFx0dGhpcy5wdWJsaWNseVRyaWdnZXIoJ2V2ZW50RHJvcCcsIGVsWzBdLCBldmVudCwgZGF0ZURlbHRhLCB1bmRvRnVuYywgZXYsIHt9KTsgLy8ge30gPSBqcXVpIGR1bW15XG5cdH0sXG5cblxuXHQvKiBFeHRlcm5hbCBFbGVtZW50IERyYWctbi1Ecm9wXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBNdXN0IGJlIGNhbGxlZCB3aGVuIGFuIGV4dGVybmFsIGVsZW1lbnQsIHZpYSBqUXVlcnkgVUksIGhhcyBiZWVuIGRyb3BwZWQgb250byB0aGUgY2FsZW5kYXIuXG5cdC8vIGBtZXRhYCBpcyB0aGUgcGFyc2VkIGRhdGEgdGhhdCBoYXMgYmVlbiBlbWJlZGRlZCBpbnRvIHRoZSBkcmFnZ2luZyBldmVudC5cblx0Ly8gYGRyb3BMb2NhdGlvbmAgaXMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIG5ldyB6b25lZCBzdGFydC9lbmQvYWxsRGF5IHZhbHVlcyBmb3IgdGhlIGV2ZW50LlxuXHRyZXBvcnRFeHRlcm5hbERyb3A6IGZ1bmN0aW9uKG1ldGEsIGRyb3BMb2NhdGlvbiwgZWwsIGV2LCB1aSkge1xuXHRcdHZhciBldmVudFByb3BzID0gbWV0YS5ldmVudFByb3BzO1xuXHRcdHZhciBldmVudElucHV0O1xuXHRcdHZhciBldmVudDtcblxuXHRcdC8vIFRyeSB0byBidWlsZCBhbiBldmVudCBvYmplY3QgYW5kIHJlbmRlciBpdC4gVE9ETzogZGVjb3VwbGUgdGhlIHR3b1xuXHRcdGlmIChldmVudFByb3BzKSB7XG5cdFx0XHRldmVudElucHV0ID0gJC5leHRlbmQoe30sIGV2ZW50UHJvcHMsIGRyb3BMb2NhdGlvbik7XG5cdFx0XHRldmVudCA9IHRoaXMuY2FsZW5kYXIucmVuZGVyRXZlbnQoZXZlbnRJbnB1dCwgbWV0YS5zdGljaylbMF07IC8vIHJlbmRlckV2ZW50IHJldHVybnMgYW4gYXJyYXlcblx0XHR9XG5cblx0XHR0aGlzLnRyaWdnZXJFeHRlcm5hbERyb3AoZXZlbnQsIGRyb3BMb2NhdGlvbiwgZWwsIGV2LCB1aSk7XG5cdH0sXG5cblxuXHQvLyBUcmlnZ2VycyBleHRlcm5hbC1kcm9wIGhhbmRsZXJzIHRoYXQgaGF2ZSBzdWJzY3JpYmVkIHZpYSB0aGUgQVBJXG5cdHRyaWdnZXJFeHRlcm5hbERyb3A6IGZ1bmN0aW9uKGV2ZW50LCBkcm9wTG9jYXRpb24sIGVsLCBldiwgdWkpIHtcblxuXHRcdC8vIHRyaWdnZXIgJ2Ryb3AnIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBlbGVtZW50IHJlcHJlc2VudHMgYW4gZXZlbnRcblx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcignZHJvcCcsIGVsWzBdLCBkcm9wTG9jYXRpb24uc3RhcnQsIGV2LCB1aSk7XG5cblx0XHRpZiAoZXZlbnQpIHtcblx0XHRcdHRoaXMucHVibGljbHlUcmlnZ2VyKCdldmVudFJlY2VpdmUnLCBudWxsLCBldmVudCk7IC8vIHNpZ25hbCBhbiBleHRlcm5hbCBldmVudCBsYW5kZWRcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBEcmFnLW4tRHJvcCBSZW5kZXJpbmcgKGZvciBib3RoIGV2ZW50cyBhbmQgZXh0ZXJuYWwgZWxlbWVudHMpXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2YgYSBldmVudCBvciBleHRlcm5hbC1lbGVtZW50IGRyYWcgb3ZlciB0aGUgZ2l2ZW4gZHJvcCB6b25lLlxuXHQvLyBJZiBhbiBleHRlcm5hbC1lbGVtZW50LCBzZWcgd2lsbCBiZSBgbnVsbGAuXG5cdC8vIE11c3QgcmV0dXJuIGVsZW1lbnRzIHVzZWQgZm9yIGFueSBtb2NrIGV2ZW50cy5cblx0cmVuZGVyRHJhZzogZnVuY3Rpb24oZHJvcExvY2F0aW9uLCBzZWcpIHtcblx0XHQvLyBzdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiBhbiBldmVudCBvciBleHRlcm5hbC1lbGVtZW50IGJlaW5nIGRyYWdnZWQuXG5cdHVucmVuZGVyRHJhZzogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudFxuXHR9LFxuXG5cblx0LyogRXZlbnQgUmVzaXppbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIENvbXB1dGVzIGlmIHRoZSBnaXZlbiBldmVudCBpcyBhbGxvd2VkIHRvIGJlIHJlc2l6ZWQgZnJvbSBpdHMgc3RhcnRpbmcgZWRnZVxuXHRpc0V2ZW50UmVzaXphYmxlRnJvbVN0YXJ0OiBmdW5jdGlvbihldmVudCkge1xuXHRcdHJldHVybiB0aGlzLm9wdCgnZXZlbnRSZXNpemFibGVGcm9tU3RhcnQnKSAmJiB0aGlzLmlzRXZlbnRSZXNpemFibGUoZXZlbnQpO1xuXHR9LFxuXG5cblx0Ly8gQ29tcHV0ZXMgaWYgdGhlIGdpdmVuIGV2ZW50IGlzIGFsbG93ZWQgdG8gYmUgcmVzaXplZCBmcm9tIGl0cyBlbmRpbmcgZWRnZVxuXHRpc0V2ZW50UmVzaXphYmxlRnJvbUVuZDogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRyZXR1cm4gdGhpcy5pc0V2ZW50UmVzaXphYmxlKGV2ZW50KTtcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIGlmIHRoZSBnaXZlbiBldmVudCBpcyBhbGxvd2VkIHRvIGJlIHJlc2l6ZWQgYnkgdGhlIHVzZXIgYXQgYWxsXG5cdGlzRXZlbnRSZXNpemFibGU6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyIHNvdXJjZSA9IGV2ZW50LnNvdXJjZSB8fCB7fTtcblxuXHRcdHJldHVybiBmaXJzdERlZmluZWQoXG5cdFx0XHRldmVudC5kdXJhdGlvbkVkaXRhYmxlLFxuXHRcdFx0c291cmNlLmR1cmF0aW9uRWRpdGFibGUsXG5cdFx0XHR0aGlzLm9wdCgnZXZlbnREdXJhdGlvbkVkaXRhYmxlJyksXG5cdFx0XHRldmVudC5lZGl0YWJsZSxcblx0XHRcdHNvdXJjZS5lZGl0YWJsZSxcblx0XHRcdHRoaXMub3B0KCdlZGl0YWJsZScpXG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIE11c3QgYmUgY2FsbGVkIHdoZW4gYW4gZXZlbnQgaW4gdGhlIHZpZXcgaGFzIGJlZW4gcmVzaXplZCB0byBhIG5ldyBsZW5ndGhcblx0cmVwb3J0RXZlbnRSZXNpemU6IGZ1bmN0aW9uKGV2ZW50LCByZXNpemVMb2NhdGlvbiwgbGFyZ2VVbml0LCBlbCwgZXYpIHtcblx0XHR2YXIgY2FsZW5kYXIgPSB0aGlzLmNhbGVuZGFyO1xuXHRcdHZhciBtdXRhdGVSZXN1bHQgPSBjYWxlbmRhci5tdXRhdGVFdmVudChldmVudCwgcmVzaXplTG9jYXRpb24sIGxhcmdlVW5pdCk7XG5cdFx0dmFyIHVuZG9GdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRtdXRhdGVSZXN1bHQudW5kbygpO1xuXHRcdFx0Y2FsZW5kYXIucmVwb3J0RXZlbnRDaGFuZ2UoKTtcblx0XHR9O1xuXG5cdFx0dGhpcy50cmlnZ2VyRXZlbnRSZXNpemUoZXZlbnQsIG11dGF0ZVJlc3VsdC5kdXJhdGlvbkRlbHRhLCB1bmRvRnVuYywgZWwsIGV2KTtcblx0XHRjYWxlbmRhci5yZXBvcnRFdmVudENoYW5nZSgpOyAvLyB3aWxsIHJlcmVuZGVyIGV2ZW50c1xuXHR9LFxuXG5cblx0Ly8gVHJpZ2dlcnMgZXZlbnQtcmVzaXplIGhhbmRsZXJzIHRoYXQgaGF2ZSBzdWJzY3JpYmVkIHZpYSB0aGUgQVBJXG5cdHRyaWdnZXJFdmVudFJlc2l6ZTogZnVuY3Rpb24oZXZlbnQsIGR1cmF0aW9uRGVsdGEsIHVuZG9GdW5jLCBlbCwgZXYpIHtcblx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcignZXZlbnRSZXNpemUnLCBlbFswXSwgZXZlbnQsIGR1cmF0aW9uRGVsdGEsIHVuZG9GdW5jLCBldiwge30pOyAvLyB7fSA9IGpxdWkgZHVtbXlcblx0fSxcblxuXG5cdC8qIFNlbGVjdGlvbiAodGltZSByYW5nZSlcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFNlbGVjdHMgYSBkYXRlIHNwYW4gb24gdGhlIHZpZXcuIGBzdGFydGAgYW5kIGBlbmRgIGFyZSBib3RoIE1vbWVudHMuXG5cdC8vIGBldmAgaXMgdGhlIG5hdGl2ZSBtb3VzZSBldmVudCB0aGF0IGJlZ2luIHRoZSBpbnRlcmFjdGlvbi5cblx0c2VsZWN0OiBmdW5jdGlvbihzcGFuLCBldikge1xuXHRcdHRoaXMudW5zZWxlY3QoZXYpO1xuXHRcdHRoaXMucmVuZGVyU2VsZWN0aW9uKHNwYW4pO1xuXHRcdHRoaXMucmVwb3J0U2VsZWN0aW9uKHNwYW4sIGV2KTtcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbiBvZiB0aGUgc2VsZWN0aW9uXG5cdHJlbmRlclNlbGVjdGlvbjogZnVuY3Rpb24oc3Bhbikge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIGltcGxlbWVudFxuXHR9LFxuXG5cblx0Ly8gQ2FsbGVkIHdoZW4gYSBuZXcgc2VsZWN0aW9uIGlzIG1hZGUuIFVwZGF0ZXMgaW50ZXJuYWwgc3RhdGUgYW5kIHRyaWdnZXJzIGhhbmRsZXJzLlxuXHRyZXBvcnRTZWxlY3Rpb246IGZ1bmN0aW9uKHNwYW4sIGV2KSB7XG5cdFx0dGhpcy5pc1NlbGVjdGVkID0gdHJ1ZTtcblx0XHR0aGlzLnRyaWdnZXJTZWxlY3Qoc3BhbiwgZXYpO1xuXHR9LFxuXG5cblx0Ly8gVHJpZ2dlcnMgaGFuZGxlcnMgdG8gJ3NlbGVjdCdcblx0dHJpZ2dlclNlbGVjdDogZnVuY3Rpb24oc3BhbiwgZXYpIHtcblx0XHR0aGlzLnB1YmxpY2x5VHJpZ2dlcihcblx0XHRcdCdzZWxlY3QnLFxuXHRcdFx0bnVsbCxcblx0XHRcdHRoaXMuY2FsZW5kYXIuYXBwbHlUaW1lem9uZShzcGFuLnN0YXJ0KSwgLy8gY29udmVydCB0byBjYWxlbmRhcidzIHR6IGZvciBleHRlcm5hbCBBUElcblx0XHRcdHRoaXMuY2FsZW5kYXIuYXBwbHlUaW1lem9uZShzcGFuLmVuZCksIC8vIFwiXG5cdFx0XHRldlxuXHRcdCk7XG5cdH0sXG5cblxuXHQvLyBVbmRvZXMgYSBzZWxlY3Rpb24uIHVwZGF0ZXMgaW4gdGhlIGludGVybmFsIHN0YXRlIGFuZCB0cmlnZ2VycyBoYW5kbGVycy5cblx0Ly8gYGV2YCBpcyB0aGUgbmF0aXZlIG1vdXNlIGV2ZW50IHRoYXQgYmVnYW4gdGhlIGludGVyYWN0aW9uLlxuXHR1bnNlbGVjdDogZnVuY3Rpb24oZXYpIHtcblx0XHRpZiAodGhpcy5pc1NlbGVjdGVkKSB7XG5cdFx0XHR0aGlzLmlzU2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdGlmICh0aGlzLmRlc3Ryb3lTZWxlY3Rpb24pIHtcblx0XHRcdFx0dGhpcy5kZXN0cm95U2VsZWN0aW9uKCk7IC8vIFRPRE86IGRlcHJlY2F0ZVxuXHRcdFx0fVxuXHRcdFx0dGhpcy51bnJlbmRlclNlbGVjdGlvbigpO1xuXHRcdFx0dGhpcy5wdWJsaWNseVRyaWdnZXIoJ3Vuc2VsZWN0JywgbnVsbCwgZXYpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIHNlbGVjdGlvblxuXHR1bnJlbmRlclNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gc3ViY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50XG5cdH0sXG5cblxuXHQvKiBFdmVudCBTZWxlY3Rpb25cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdHNlbGVjdEV2ZW50OiBmdW5jdGlvbihldmVudCkge1xuXHRcdGlmICghdGhpcy5zZWxlY3RlZEV2ZW50IHx8IHRoaXMuc2VsZWN0ZWRFdmVudCAhPT0gZXZlbnQpIHtcblx0XHRcdHRoaXMudW5zZWxlY3RFdmVudCgpO1xuXHRcdFx0dGhpcy5yZW5kZXJlZEV2ZW50U2VnRWFjaChmdW5jdGlvbihzZWcpIHtcblx0XHRcdFx0c2VnLmVsLmFkZENsYXNzKCdmYy1zZWxlY3RlZCcpO1xuXHRcdFx0fSwgZXZlbnQpO1xuXHRcdFx0dGhpcy5zZWxlY3RlZEV2ZW50ID0gZXZlbnQ7XG5cdFx0fVxuXHR9LFxuXG5cblx0dW5zZWxlY3RFdmVudDogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRFdmVudCkge1xuXHRcdFx0dGhpcy5yZW5kZXJlZEV2ZW50U2VnRWFjaChmdW5jdGlvbihzZWcpIHtcblx0XHRcdFx0c2VnLmVsLnJlbW92ZUNsYXNzKCdmYy1zZWxlY3RlZCcpO1xuXHRcdFx0fSwgdGhpcy5zZWxlY3RlZEV2ZW50KTtcblx0XHRcdHRoaXMuc2VsZWN0ZWRFdmVudCA9IG51bGw7XG5cdFx0fVxuXHR9LFxuXG5cblx0aXNFdmVudFNlbGVjdGVkOiBmdW5jdGlvbihldmVudCkge1xuXHRcdC8vIGV2ZW50IHJlZmVyZW5jZXMgbWlnaHQgY2hhbmdlIG9uIHJlZmV0Y2hFdmVudHMoKSwgd2hpbGUgc2VsZWN0ZWRFdmVudCBkb2Vzbid0LFxuXHRcdC8vIHNvIGNvbXBhcmUgSURzXG5cdFx0cmV0dXJuIHRoaXMuc2VsZWN0ZWRFdmVudCAmJiB0aGlzLnNlbGVjdGVkRXZlbnQuX2lkID09PSBldmVudC5faWQ7XG5cdH0sXG5cblxuXHQvKiBNb3VzZSAvIFRvdWNoIFVuc2VsZWN0aW5nICh0aW1lIHJhbmdlICYgZXZlbnQgdW5zZWxlY3Rpb24pXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdC8vIFRPRE86IG1vdmUgY29uc2lzdGVudGx5IHRvIGRvd24vc3RhcnQgb3IgdXAvZW5kP1xuXHQvLyBUT0RPOiBkb24ndCBraWxsIHByZXZpb3VzIHNlbGVjdGlvbiBpZiB0b3VjaCBzY3JvbGxpbmdcblxuXG5cdGhhbmRsZURvY3VtZW50TW91c2Vkb3duOiBmdW5jdGlvbihldikge1xuXHRcdGlmIChpc1ByaW1hcnlNb3VzZUJ1dHRvbihldikpIHtcblx0XHRcdHRoaXMucHJvY2Vzc1Vuc2VsZWN0KGV2KTtcblx0XHR9XG5cdH0sXG5cblxuXHRwcm9jZXNzVW5zZWxlY3Q6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dGhpcy5wcm9jZXNzUmFuZ2VVbnNlbGVjdChldik7XG5cdFx0dGhpcy5wcm9jZXNzRXZlbnRVbnNlbGVjdChldik7XG5cdH0sXG5cblxuXHRwcm9jZXNzUmFuZ2VVbnNlbGVjdDogZnVuY3Rpb24oZXYpIHtcblx0XHR2YXIgaWdub3JlO1xuXG5cdFx0Ly8gaXMgdGhlcmUgYSB0aW1lLXJhbmdlIHNlbGVjdGlvbj9cblx0XHRpZiAodGhpcy5pc1NlbGVjdGVkICYmIHRoaXMub3B0KCd1bnNlbGVjdEF1dG8nKSkge1xuXHRcdFx0Ly8gb25seSB1bnNlbGVjdCBpZiB0aGUgY2xpY2tlZCBlbGVtZW50IGlzIG5vdCBpZGVudGljYWwgdG8gb3IgaW5zaWRlIG9mIGFuICd1bnNlbGVjdENhbmNlbCcgZWxlbWVudFxuXHRcdFx0aWdub3JlID0gdGhpcy5vcHQoJ3Vuc2VsZWN0Q2FuY2VsJyk7XG5cdFx0XHRpZiAoIWlnbm9yZSB8fCAhJChldi50YXJnZXQpLmNsb3Nlc3QoaWdub3JlKS5sZW5ndGgpIHtcblx0XHRcdFx0dGhpcy51bnNlbGVjdChldik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cblx0cHJvY2Vzc0V2ZW50VW5zZWxlY3Q6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRFdmVudCkge1xuXHRcdFx0aWYgKCEkKGV2LnRhcmdldCkuY2xvc2VzdCgnLmZjLXNlbGVjdGVkJykubGVuZ3RoKSB7XG5cdFx0XHRcdHRoaXMudW5zZWxlY3RFdmVudCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXG5cdC8qIERheSBDbGlja1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gVHJpZ2dlcnMgaGFuZGxlcnMgdG8gJ2RheUNsaWNrJ1xuXHQvLyBTcGFuIGhhcyBzdGFydC9lbmQgb2YgdGhlIGNsaWNrZWQgYXJlYS4gT25seSB0aGUgc3RhcnQgaXMgdXNlZnVsLlxuXHR0cmlnZ2VyRGF5Q2xpY2s6IGZ1bmN0aW9uKHNwYW4sIGRheUVsLCBldikge1xuXHRcdHRoaXMucHVibGljbHlUcmlnZ2VyKFxuXHRcdFx0J2RheUNsaWNrJyxcblx0XHRcdGRheUVsLFxuXHRcdFx0dGhpcy5jYWxlbmRhci5hcHBseVRpbWV6b25lKHNwYW4uc3RhcnQpLCAvLyBjb252ZXJ0IHRvIGNhbGVuZGFyJ3MgdGltZXpvbmUgZm9yIGV4dGVybmFsIEFQSVxuXHRcdFx0ZXZcblx0XHQpO1xuXHR9LFxuXG5cblx0LyogRGF0ZSBVdGlsc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gSW5pdGlhbGl6ZXMgaW50ZXJuYWwgdmFyaWFibGVzIHJlbGF0ZWQgdG8gY2FsY3VsYXRpbmcgaGlkZGVuIGRheXMtb2Ytd2Vla1xuXHRpbml0SGlkZGVuRGF5czogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGhpZGRlbkRheXMgPSB0aGlzLm9wdCgnaGlkZGVuRGF5cycpIHx8IFtdOyAvLyBhcnJheSBvZiBkYXktb2Ytd2VlayBpbmRpY2VzIHRoYXQgYXJlIGhpZGRlblxuXHRcdHZhciBpc0hpZGRlbkRheUhhc2ggPSBbXTsgLy8gaXMgdGhlIGRheS1vZi13ZWVrIGhpZGRlbj8gKGhhc2ggd2l0aCBkYXktb2Ytd2Vlay1pbmRleCAtPiBib29sKVxuXHRcdHZhciBkYXlDbnQgPSAwO1xuXHRcdHZhciBpO1xuXG5cdFx0aWYgKHRoaXMub3B0KCd3ZWVrZW5kcycpID09PSBmYWxzZSkge1xuXHRcdFx0aGlkZGVuRGF5cy5wdXNoKDAsIDYpOyAvLyAwPXN1bmRheSwgNj1zYXR1cmRheVxuXHRcdH1cblxuXHRcdGZvciAoaSA9IDA7IGkgPCA3OyBpKyspIHtcblx0XHRcdGlmIChcblx0XHRcdFx0IShpc0hpZGRlbkRheUhhc2hbaV0gPSAkLmluQXJyYXkoaSwgaGlkZGVuRGF5cykgIT09IC0xKVxuXHRcdFx0KSB7XG5cdFx0XHRcdGRheUNudCsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghZGF5Q250KSB7XG5cdFx0XHR0aHJvdyAnaW52YWxpZCBoaWRkZW5EYXlzJzsgLy8gYWxsIGRheXMgd2VyZSBoaWRkZW4/IGJhZC5cblx0XHR9XG5cblx0XHR0aGlzLmlzSGlkZGVuRGF5SGFzaCA9IGlzSGlkZGVuRGF5SGFzaDtcblx0fSxcblxuXG5cdC8vIElzIHRoZSBjdXJyZW50IGRheSBoaWRkZW4/XG5cdC8vIGBkYXlgIGlzIGEgZGF5LW9mLXdlZWsgaW5kZXggKDAtNiksIG9yIGEgTW9tZW50XG5cdGlzSGlkZGVuRGF5OiBmdW5jdGlvbihkYXkpIHtcblx0XHRpZiAobW9tZW50LmlzTW9tZW50KGRheSkpIHtcblx0XHRcdGRheSA9IGRheS5kYXkoKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuaXNIaWRkZW5EYXlIYXNoW2RheV07XG5cdH0sXG5cblxuXHQvLyBJbmNyZW1lbnRpbmcgdGhlIGN1cnJlbnQgZGF5IHVudGlsIGl0IGlzIG5vIGxvbmdlciBhIGhpZGRlbiBkYXksIHJldHVybmluZyBhIGNvcHkuXG5cdC8vIElmIHRoZSBpbml0aWFsIHZhbHVlIG9mIGBkYXRlYCBpcyBub3QgYSBoaWRkZW4gZGF5LCBkb24ndCBkbyBhbnl0aGluZy5cblx0Ly8gUGFzcyBgaXNFeGNsdXNpdmVgIGFzIGB0cnVlYCBpZiB5b3UgYXJlIGRlYWxpbmcgd2l0aCBhbiBlbmQgZGF0ZS5cblx0Ly8gYGluY2AgZGVmYXVsdHMgdG8gYDFgIChpbmNyZW1lbnQgb25lIGRheSBmb3J3YXJkIGVhY2ggdGltZSlcblx0c2tpcEhpZGRlbkRheXM6IGZ1bmN0aW9uKGRhdGUsIGluYywgaXNFeGNsdXNpdmUpIHtcblx0XHR2YXIgb3V0ID0gZGF0ZS5jbG9uZSgpO1xuXHRcdGluYyA9IGluYyB8fCAxO1xuXHRcdHdoaWxlIChcblx0XHRcdHRoaXMuaXNIaWRkZW5EYXlIYXNoWyhvdXQuZGF5KCkgKyAoaXNFeGNsdXNpdmUgPyBpbmMgOiAwKSArIDcpICUgN11cblx0XHQpIHtcblx0XHRcdG91dC5hZGQoaW5jLCAnZGF5cycpO1xuXHRcdH1cblx0XHRyZXR1cm4gb3V0O1xuXHR9LFxuXG5cblx0Ly8gUmV0dXJucyB0aGUgZGF0ZSByYW5nZSBvZiB0aGUgZnVsbCBkYXlzIHRoZSBnaXZlbiByYW5nZSB2aXN1YWxseSBhcHBlYXJzIHRvIG9jY3VweS5cblx0Ly8gUmV0dXJucyBhIG5ldyByYW5nZSBvYmplY3QuXG5cdGNvbXB1dGVEYXlSYW5nZTogZnVuY3Rpb24ocmFuZ2UpIHtcblx0XHR2YXIgc3RhcnREYXkgPSByYW5nZS5zdGFydC5jbG9uZSgpLnN0cmlwVGltZSgpOyAvLyB0aGUgYmVnaW5uaW5nIG9mIHRoZSBkYXkgdGhlIHJhbmdlIHN0YXJ0c1xuXHRcdHZhciBlbmQgPSByYW5nZS5lbmQ7XG5cdFx0dmFyIGVuZERheSA9IG51bGw7XG5cdFx0dmFyIGVuZFRpbWVNUztcblxuXHRcdGlmIChlbmQpIHtcblx0XHRcdGVuZERheSA9IGVuZC5jbG9uZSgpLnN0cmlwVGltZSgpOyAvLyB0aGUgYmVnaW5uaW5nIG9mIHRoZSBkYXkgdGhlIHJhbmdlIGV4Y2x1c2l2ZWx5IGVuZHNcblx0XHRcdGVuZFRpbWVNUyA9ICtlbmQudGltZSgpOyAvLyAjIG9mIG1pbGxpc2Vjb25kcyBpbnRvIGBlbmREYXlgXG5cblx0XHRcdC8vIElmIHRoZSBlbmQgdGltZSBpcyBhY3R1YWxseSBpbmNsdXNpdmVseSBwYXJ0IG9mIHRoZSBuZXh0IGRheSBhbmQgaXMgZXF1YWwgdG8gb3Jcblx0XHRcdC8vIGJleW9uZCB0aGUgbmV4dCBkYXkgdGhyZXNob2xkLCBhZGp1c3QgdGhlIGVuZCB0byBiZSB0aGUgZXhjbHVzaXZlIGVuZCBvZiBgZW5kRGF5YC5cblx0XHRcdC8vIE90aGVyd2lzZSwgbGVhdmluZyBpdCBhcyBpbmNsdXNpdmUgd2lsbCBjYXVzZSBpdCB0byBleGNsdWRlIGBlbmREYXlgLlxuXHRcdFx0aWYgKGVuZFRpbWVNUyAmJiBlbmRUaW1lTVMgPj0gdGhpcy5uZXh0RGF5VGhyZXNob2xkKSB7XG5cdFx0XHRcdGVuZERheS5hZGQoMSwgJ2RheXMnKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJZiBubyBlbmQgd2FzIHNwZWNpZmllZCwgb3IgaWYgaXQgaXMgd2l0aGluIGBzdGFydERheWAgYnV0IG5vdCBwYXN0IG5leHREYXlUaHJlc2hvbGQsXG5cdFx0Ly8gYXNzaWduIHRoZSBkZWZhdWx0IGR1cmF0aW9uIG9mIG9uZSBkYXkuXG5cdFx0aWYgKCFlbmQgfHwgZW5kRGF5IDw9IHN0YXJ0RGF5KSB7XG5cdFx0XHRlbmREYXkgPSBzdGFydERheS5jbG9uZSgpLmFkZCgxLCAnZGF5cycpO1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN0YXJ0OiBzdGFydERheSwgZW5kOiBlbmREYXkgfTtcblx0fSxcblxuXG5cdC8vIERvZXMgdGhlIGdpdmVuIGV2ZW50IHZpc3VhbGx5IGFwcGVhciB0byBvY2N1cHkgbW9yZSB0aGFuIG9uZSBkYXk/XG5cdGlzTXVsdGlEYXlFdmVudDogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgcmFuZ2UgPSB0aGlzLmNvbXB1dGVEYXlSYW5nZShldmVudCk7IC8vIGV2ZW50IGlzIHJhbmdlLWlzaFxuXG5cdFx0cmV0dXJuIHJhbmdlLmVuZC5kaWZmKHJhbmdlLnN0YXJ0LCAnZGF5cycpID4gMTtcblx0fVxuXG59KTtcblxuOztcblxuLypcbkVtYm9kaWVzIGEgZGl2IHRoYXQgaGFzIHBvdGVudGlhbCBzY3JvbGxiYXJzXG4qL1xudmFyIFNjcm9sbGVyID0gRkMuU2Nyb2xsZXIgPSBDbGFzcy5leHRlbmQoe1xuXG5cdGVsOiBudWxsLCAvLyB0aGUgZ3VhcmFudGVlZCBvdXRlciBlbGVtZW50XG5cdHNjcm9sbEVsOiBudWxsLCAvLyB0aGUgZWxlbWVudCB3aXRoIHRoZSBzY3JvbGxiYXJzXG5cdG92ZXJmbG93WDogbnVsbCxcblx0b3ZlcmZsb3dZOiBudWxsLFxuXG5cblx0Y29uc3RydWN0b3I6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XHR0aGlzLm92ZXJmbG93WCA9IG9wdGlvbnMub3ZlcmZsb3dYIHx8IG9wdGlvbnMub3ZlcmZsb3cgfHwgJ2F1dG8nO1xuXHRcdHRoaXMub3ZlcmZsb3dZID0gb3B0aW9ucy5vdmVyZmxvd1kgfHwgb3B0aW9ucy5vdmVyZmxvdyB8fCAnYXV0byc7XG5cdH0sXG5cblxuXHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZWwgPSB0aGlzLnJlbmRlckVsKCk7XG5cdFx0dGhpcy5hcHBseU92ZXJmbG93KCk7XG5cdH0sXG5cblxuXHRyZW5kZXJFbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICh0aGlzLnNjcm9sbEVsID0gJCgnPGRpdiBjbGFzcz1cImZjLXNjcm9sbGVyXCI+PC9kaXY+JykpO1xuXHR9LFxuXG5cblx0Ly8gc2V0cyB0byBuYXR1cmFsIGhlaWdodCwgdW5sb2NrcyBvdmVyZmxvd1xuXHRjbGVhcjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zZXRIZWlnaHQoJ2F1dG8nKTtcblx0XHR0aGlzLmFwcGx5T3ZlcmZsb3coKTtcblx0fSxcblxuXG5cdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZWwucmVtb3ZlKCk7XG5cdH0sXG5cblxuXHQvLyBPdmVyZmxvd1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0YXBwbHlPdmVyZmxvdzogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zY3JvbGxFbC5jc3Moe1xuXHRcdFx0J292ZXJmbG93LXgnOiB0aGlzLm92ZXJmbG93WCxcblx0XHRcdCdvdmVyZmxvdy15JzogdGhpcy5vdmVyZmxvd1lcblx0XHR9KTtcblx0fSxcblxuXG5cdC8vIENhdXNlcyBhbnkgJ2F1dG8nIG92ZXJmbG93IHZhbHVlcyB0byByZXNvbHZlcyB0byAnc2Nyb2xsJyBvciAnaGlkZGVuJy5cblx0Ly8gVXNlZnVsIGZvciBwcmVzZXJ2aW5nIHNjcm9sbGJhciB3aWR0aHMgcmVnYXJkbGVzcyBvZiBmdXR1cmUgcmVzaXplcy5cblx0Ly8gQ2FuIHBhc3MgaW4gc2Nyb2xsYmFyV2lkdGhzIGZvciBvcHRpbWl6YXRpb24uXG5cdGxvY2tPdmVyZmxvdzogZnVuY3Rpb24oc2Nyb2xsYmFyV2lkdGhzKSB7XG5cdFx0dmFyIG92ZXJmbG93WCA9IHRoaXMub3ZlcmZsb3dYO1xuXHRcdHZhciBvdmVyZmxvd1kgPSB0aGlzLm92ZXJmbG93WTtcblxuXHRcdHNjcm9sbGJhcldpZHRocyA9IHNjcm9sbGJhcldpZHRocyB8fCB0aGlzLmdldFNjcm9sbGJhcldpZHRocygpO1xuXG5cdFx0aWYgKG92ZXJmbG93WCA9PT0gJ2F1dG8nKSB7XG5cdFx0XHRvdmVyZmxvd1ggPSAoXG5cdFx0XHRcdFx0c2Nyb2xsYmFyV2lkdGhzLnRvcCB8fCBzY3JvbGxiYXJXaWR0aHMuYm90dG9tIHx8IC8vIGhvcml6b250YWwgc2Nyb2xsYmFycz9cblx0XHRcdFx0XHQvLyBPUiBzY3JvbGxpbmcgcGFuZSB3aXRoIG1hc3NsZXNzIHNjcm9sbGJhcnM/XG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxFbFswXS5zY3JvbGxXaWR0aCAtIDEgPiB0aGlzLnNjcm9sbEVsWzBdLmNsaWVudFdpZHRoXG5cdFx0XHRcdFx0XHQvLyBzdWJ0cmFjdCAxIGJlY2F1c2Ugb2YgSUUgb2ZmLWJ5LW9uZSBpc3N1ZVxuXHRcdFx0XHQpID8gJ3Njcm9sbCcgOiAnaGlkZGVuJztcblx0XHR9XG5cblx0XHRpZiAob3ZlcmZsb3dZID09PSAnYXV0bycpIHtcblx0XHRcdG92ZXJmbG93WSA9IChcblx0XHRcdFx0XHRzY3JvbGxiYXJXaWR0aHMubGVmdCB8fCBzY3JvbGxiYXJXaWR0aHMucmlnaHQgfHwgLy8gdmVydGljYWwgc2Nyb2xsYmFycz9cblx0XHRcdFx0XHQvLyBPUiBzY3JvbGxpbmcgcGFuZSB3aXRoIG1hc3NsZXNzIHNjcm9sbGJhcnM/XG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxFbFswXS5zY3JvbGxIZWlnaHQgLSAxID4gdGhpcy5zY3JvbGxFbFswXS5jbGllbnRIZWlnaHRcblx0XHRcdFx0XHRcdC8vIHN1YnRyYWN0IDEgYmVjYXVzZSBvZiBJRSBvZmYtYnktb25lIGlzc3VlXG5cdFx0XHRcdCkgPyAnc2Nyb2xsJyA6ICdoaWRkZW4nO1xuXHRcdH1cblxuXHRcdHRoaXMuc2Nyb2xsRWwuY3NzKHsgJ292ZXJmbG93LXgnOiBvdmVyZmxvd1gsICdvdmVyZmxvdy15Jzogb3ZlcmZsb3dZIH0pO1xuXHR9LFxuXG5cblx0Ly8gR2V0dGVycyAvIFNldHRlcnNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdHNldEhlaWdodDogZnVuY3Rpb24oaGVpZ2h0KSB7XG5cdFx0dGhpcy5zY3JvbGxFbC5oZWlnaHQoaGVpZ2h0KTtcblx0fSxcblxuXG5cdGdldFNjcm9sbFRvcDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuc2Nyb2xsRWwuc2Nyb2xsVG9wKCk7XG5cdH0sXG5cblxuXHRzZXRTY3JvbGxUb3A6IGZ1bmN0aW9uKHRvcCkge1xuXHRcdHRoaXMuc2Nyb2xsRWwuc2Nyb2xsVG9wKHRvcCk7XG5cdH0sXG5cblxuXHRnZXRDbGllbnRXaWR0aDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuc2Nyb2xsRWxbMF0uY2xpZW50V2lkdGg7XG5cdH0sXG5cblxuXHRnZXRDbGllbnRIZWlnaHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnNjcm9sbEVsWzBdLmNsaWVudEhlaWdodDtcblx0fSxcblxuXG5cdGdldFNjcm9sbGJhcldpZHRoczogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGdldFNjcm9sbGJhcldpZHRocyh0aGlzLnNjcm9sbEVsKTtcblx0fVxuXG59KTtcblxuOztcbmZ1bmN0aW9uIEl0ZXJhdG9yKGl0ZW1zKSB7XG4gICAgdGhpcy5pdGVtcyA9IGl0ZW1zIHx8IFtdO1xufVxuXG5cbi8qIENhbGxzIGEgbWV0aG9kIG9uIGV2ZXJ5IGl0ZW0gcGFzc2luZyB0aGUgYXJndW1lbnRzIHRocm91Z2ggKi9cbkl0ZXJhdG9yLnByb3RvdHlwZS5wcm94eUNhbGwgPSBmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHZhciByZXN1bHRzID0gW107XG5cbiAgICB0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICByZXN1bHRzLnB1c2goaXRlbVttZXRob2ROYW1lXS5hcHBseShpdGVtLCBhcmdzKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbn07XG5cbjs7XG5cbi8qIFRvb2xiYXIgd2l0aCBidXR0b25zIGFuZCB0aXRsZVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmZ1bmN0aW9uIFRvb2xiYXIoY2FsZW5kYXIsIHRvb2xiYXJPcHRpb25zKSB7XG5cdHZhciB0ID0gdGhpcztcblxuXHQvLyBleHBvcnRzXG5cdHQuc2V0VG9vbGJhck9wdGlvbnMgPSBzZXRUb29sYmFyT3B0aW9ucztcblx0dC5yZW5kZXIgPSByZW5kZXI7XG5cdHQucmVtb3ZlRWxlbWVudCA9IHJlbW92ZUVsZW1lbnQ7XG5cdHQudXBkYXRlVGl0bGUgPSB1cGRhdGVUaXRsZTtcblx0dC5hY3RpdmF0ZUJ1dHRvbiA9IGFjdGl2YXRlQnV0dG9uO1xuXHR0LmRlYWN0aXZhdGVCdXR0b24gPSBkZWFjdGl2YXRlQnV0dG9uO1xuXHR0LmRpc2FibGVCdXR0b24gPSBkaXNhYmxlQnV0dG9uO1xuXHR0LmVuYWJsZUJ1dHRvbiA9IGVuYWJsZUJ1dHRvbjtcblx0dC5nZXRWaWV3c1dpdGhCdXR0b25zID0gZ2V0Vmlld3NXaXRoQnV0dG9ucztcblx0dC5lbCA9IG51bGw7IC8vIG1pcnJvcnMgbG9jYWwgYGVsYFxuXG5cdC8vIGxvY2Fsc1xuXHR2YXIgZWw7XG5cdHZhciB2aWV3c1dpdGhCdXR0b25zID0gW107XG5cdHZhciB0bTtcblxuXHQvLyBtZXRob2QgdG8gdXBkYXRlIHRvb2xiYXItc3BlY2lmaWMgb3B0aW9ucywgbm90IGNhbGVuZGFyLXdpZGUgb3B0aW9uc1xuXHRmdW5jdGlvbiBzZXRUb29sYmFyT3B0aW9ucyhuZXdUb29sYmFyT3B0aW9ucykge1xuXHRcdHRvb2xiYXJPcHRpb25zID0gbmV3VG9vbGJhck9wdGlvbnM7XG5cdH1cblxuXHQvLyBjYW4gYmUgY2FsbGVkIHJlcGVhdGVkbHkgYW5kIHdpbGwgcmVyZW5kZXJcblx0ZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcdHZhciBzZWN0aW9ucyA9IHRvb2xiYXJPcHRpb25zLmxheW91dDtcblxuXHRcdHRtID0gY2FsZW5kYXIub3B0aW9ucy50aGVtZSA/ICd1aScgOiAnZmMnO1xuXG5cdFx0aWYgKHNlY3Rpb25zKSB7XG5cdFx0XHRpZiAoIWVsKSB7XG5cdFx0XHRcdGVsID0gdGhpcy5lbCA9ICQoXCI8ZGl2IGNsYXNzPSdmYy10b29sYmFyIFwiKyB0b29sYmFyT3B0aW9ucy5leHRyYUNsYXNzZXMgKyBcIicvPlwiKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRlbC5lbXB0eSgpO1xuXHRcdFx0fVxuXHRcdFx0ZWwuYXBwZW5kKHJlbmRlclNlY3Rpb24oJ2xlZnQnKSlcblx0XHRcdFx0LmFwcGVuZChyZW5kZXJTZWN0aW9uKCdyaWdodCcpKVxuXHRcdFx0XHQuYXBwZW5kKHJlbmRlclNlY3Rpb24oJ2NlbnRlcicpKVxuXHRcdFx0XHQuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZmMtY2xlYXJcIi8+Jyk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmVtb3ZlRWxlbWVudCgpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gcmVtb3ZlRWxlbWVudCgpIHtcblx0XHRpZiAoZWwpIHtcblx0XHRcdGVsLnJlbW92ZSgpO1xuXHRcdFx0ZWwgPSB0LmVsID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHJlbmRlclNlY3Rpb24ocG9zaXRpb24pIHtcblx0XHR2YXIgc2VjdGlvbkVsID0gJCgnPGRpdiBjbGFzcz1cImZjLScgKyBwb3NpdGlvbiArICdcIi8+Jyk7XG5cdFx0dmFyIGJ1dHRvblN0ciA9IHRvb2xiYXJPcHRpb25zLmxheW91dFtwb3NpdGlvbl07XG5cblx0XHRpZiAoYnV0dG9uU3RyKSB7XG5cdFx0XHQkLmVhY2goYnV0dG9uU3RyLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGkpIHtcblx0XHRcdFx0dmFyIGdyb3VwQ2hpbGRyZW4gPSAkKCk7XG5cdFx0XHRcdHZhciBpc09ubHlCdXR0b25zID0gdHJ1ZTtcblx0XHRcdFx0dmFyIGdyb3VwRWw7XG5cblx0XHRcdFx0JC5lYWNoKHRoaXMuc3BsaXQoJywnKSwgZnVuY3Rpb24oaiwgYnV0dG9uTmFtZSkge1xuXHRcdFx0XHRcdHZhciBjdXN0b21CdXR0b25Qcm9wcztcblx0XHRcdFx0XHR2YXIgdmlld1NwZWM7XG5cdFx0XHRcdFx0dmFyIGJ1dHRvbkNsaWNrO1xuXHRcdFx0XHRcdHZhciBvdmVycmlkZVRleHQ7IC8vIHRleHQgZXhwbGljaXRseSBzZXQgYnkgY2FsZW5kYXIncyBjb25zdHJ1Y3RvciBvcHRpb25zLiBvdmVyY29tZXMgaWNvbnNcblx0XHRcdFx0XHR2YXIgZGVmYXVsdFRleHQ7XG5cdFx0XHRcdFx0dmFyIHRoZW1lSWNvbjtcblx0XHRcdFx0XHR2YXIgbm9ybWFsSWNvbjtcblx0XHRcdFx0XHR2YXIgaW5uZXJIdG1sO1xuXHRcdFx0XHRcdHZhciBjbGFzc2VzO1xuXHRcdFx0XHRcdHZhciBidXR0b247IC8vIHRoZSBlbGVtZW50XG5cblx0XHRcdFx0XHRpZiAoYnV0dG9uTmFtZSA9PSAndGl0bGUnKSB7XG5cdFx0XHRcdFx0XHRncm91cENoaWxkcmVuID0gZ3JvdXBDaGlsZHJlbi5hZGQoJCgnPGgyPiZuYnNwOzwvaDI+JykpOyAvLyB3ZSBhbHdheXMgd2FudCBpdCB0byB0YWtlIHVwIGhlaWdodFxuXHRcdFx0XHRcdFx0aXNPbmx5QnV0dG9ucyA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdGlmICgoY3VzdG9tQnV0dG9uUHJvcHMgPSAoY2FsZW5kYXIub3B0aW9ucy5jdXN0b21CdXR0b25zIHx8IHt9KVtidXR0b25OYW1lXSkpIHtcblx0XHRcdFx0XHRcdFx0YnV0dG9uQ2xpY2sgPSBmdW5jdGlvbihldikge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChjdXN0b21CdXR0b25Qcm9wcy5jbGljaykge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VzdG9tQnV0dG9uUHJvcHMuY2xpY2suY2FsbChidXR0b25bMF0sIGV2KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdG92ZXJyaWRlVGV4dCA9ICcnOyAvLyBpY29ucyB3aWxsIG92ZXJyaWRlIHRleHRcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdFRleHQgPSBjdXN0b21CdXR0b25Qcm9wcy50ZXh0O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoKHZpZXdTcGVjID0gY2FsZW5kYXIuZ2V0Vmlld1NwZWMoYnV0dG9uTmFtZSkpKSB7XG5cdFx0XHRcdFx0XHRcdGJ1dHRvbkNsaWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsZW5kYXIuY2hhbmdlVmlldyhidXR0b25OYW1lKTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0dmlld3NXaXRoQnV0dG9ucy5wdXNoKGJ1dHRvbk5hbWUpO1xuXHRcdFx0XHRcdFx0XHRvdmVycmlkZVRleHQgPSB2aWV3U3BlYy5idXR0b25UZXh0T3ZlcnJpZGU7XG5cdFx0XHRcdFx0XHRcdGRlZmF1bHRUZXh0ID0gdmlld1NwZWMuYnV0dG9uVGV4dERlZmF1bHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChjYWxlbmRhcltidXR0b25OYW1lXSkgeyAvLyBhIGNhbGVuZGFyIG1ldGhvZFxuXHRcdFx0XHRcdFx0XHRidXR0b25DbGljayA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdGNhbGVuZGFyW2J1dHRvbk5hbWVdKCk7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdG92ZXJyaWRlVGV4dCA9IChjYWxlbmRhci5vdmVycmlkZXMuYnV0dG9uVGV4dCB8fCB7fSlbYnV0dG9uTmFtZV07XG5cdFx0XHRcdFx0XHRcdGRlZmF1bHRUZXh0ID0gY2FsZW5kYXIub3B0aW9ucy5idXR0b25UZXh0W2J1dHRvbk5hbWVdOyAvLyBldmVyeXRoaW5nIGVsc2UgaXMgY29uc2lkZXJlZCBkZWZhdWx0XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChidXR0b25DbGljaykge1xuXG5cdFx0XHRcdFx0XHRcdHRoZW1lSWNvbiA9XG5cdFx0XHRcdFx0XHRcdFx0Y3VzdG9tQnV0dG9uUHJvcHMgP1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VzdG9tQnV0dG9uUHJvcHMudGhlbWVJY29uIDpcblx0XHRcdFx0XHRcdFx0XHRcdGNhbGVuZGFyLm9wdGlvbnMudGhlbWVCdXR0b25JY29uc1tidXR0b25OYW1lXTtcblxuXHRcdFx0XHRcdFx0XHRub3JtYWxJY29uID1cblx0XHRcdFx0XHRcdFx0XHRjdXN0b21CdXR0b25Qcm9wcyA/XG5cdFx0XHRcdFx0XHRcdFx0XHRjdXN0b21CdXR0b25Qcm9wcy5pY29uIDpcblx0XHRcdFx0XHRcdFx0XHRcdGNhbGVuZGFyLm9wdGlvbnMuYnV0dG9uSWNvbnNbYnV0dG9uTmFtZV07XG5cblx0XHRcdFx0XHRcdFx0aWYgKG92ZXJyaWRlVGV4dCkge1xuXHRcdFx0XHRcdFx0XHRcdGlubmVySHRtbCA9IGh0bWxFc2NhcGUob3ZlcnJpZGVUZXh0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmICh0aGVtZUljb24gJiYgY2FsZW5kYXIub3B0aW9ucy50aGVtZSkge1xuXHRcdFx0XHRcdFx0XHRcdGlubmVySHRtbCA9IFwiPHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1cIiArIHRoZW1lSWNvbiArIFwiJz48L3NwYW4+XCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAobm9ybWFsSWNvbiAmJiAhY2FsZW5kYXIub3B0aW9ucy50aGVtZSkge1xuXHRcdFx0XHRcdFx0XHRcdGlubmVySHRtbCA9IFwiPHNwYW4gY2xhc3M9J2ZjLWljb24gZmMtaWNvbi1cIiArIG5vcm1hbEljb24gKyBcIic+PC9zcGFuPlwiO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGlubmVySHRtbCA9IGh0bWxFc2NhcGUoZGVmYXVsdFRleHQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Y2xhc3NlcyA9IFtcblx0XHRcdFx0XHRcdFx0XHQnZmMtJyArIGJ1dHRvbk5hbWUgKyAnLWJ1dHRvbicsXG5cdFx0XHRcdFx0XHRcdFx0dG0gKyAnLWJ1dHRvbicsXG5cdFx0XHRcdFx0XHRcdFx0dG0gKyAnLXN0YXRlLWRlZmF1bHQnXG5cdFx0XHRcdFx0XHRcdF07XG5cblx0XHRcdFx0XHRcdFx0YnV0dG9uID0gJCggLy8gdHlwZT1cImJ1dHRvblwiIHNvIHRoYXQgaXQgZG9lc24ndCBzdWJtaXQgYSBmb3JtXG5cdFx0XHRcdFx0XHRcdFx0JzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiJyArIGNsYXNzZXMuam9pbignICcpICsgJ1wiPicgK1xuXHRcdFx0XHRcdFx0XHRcdFx0aW5uZXJIdG1sICtcblx0XHRcdFx0XHRcdFx0XHQnPC9idXR0b24+J1xuXHRcdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdFx0XHQuY2xpY2soZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGRvbid0IHByb2Nlc3MgY2xpY2tzIGZvciBkaXNhYmxlZCBidXR0b25zXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWJ1dHRvbi5oYXNDbGFzcyh0bSArICctc3RhdGUtZGlzYWJsZWQnKSkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvbkNsaWNrKGV2KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhZnRlciB0aGUgY2xpY2sgYWN0aW9uLCBpZiB0aGUgYnV0dG9uIGJlY29tZXMgdGhlIFwiYWN0aXZlXCIgdGFiLCBvciBkaXNhYmxlZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaXQgc2hvdWxkIG5ldmVyIGhhdmUgYSBob3ZlciBjbGFzcywgc28gcmVtb3ZlIGl0IG5vdy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5oYXNDbGFzcyh0bSArICctc3RhdGUtYWN0aXZlJykgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRidXR0b24uaGFzQ2xhc3ModG0gKyAnLXN0YXRlLWRpc2FibGVkJylcblx0XHRcdFx0XHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnJlbW92ZUNsYXNzKHRtICsgJy1zdGF0ZS1ob3ZlcicpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHQubW91c2Vkb3duKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gdGhlICpkb3duKiBlZmZlY3QgKG1vdXNlIHByZXNzZWQgaW4pLlxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gb25seSBvbiBidXR0b25zIHRoYXQgYXJlIG5vdCB0aGUgXCJhY3RpdmVcIiB0YWIsIG9yIGRpc2FibGVkXG5cdFx0XHRcdFx0XHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHRcdFx0XHRcdFx0Lm5vdCgnLicgKyB0bSArICctc3RhdGUtYWN0aXZlJylcblx0XHRcdFx0XHRcdFx0XHRcdFx0Lm5vdCgnLicgKyB0bSArICctc3RhdGUtZGlzYWJsZWQnKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3ModG0gKyAnLXN0YXRlLWRvd24nKTtcblx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdC5tb3VzZXVwKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gdW5kbyB0aGUgKmRvd24qIGVmZmVjdFxuXHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnJlbW92ZUNsYXNzKHRtICsgJy1zdGF0ZS1kb3duJyk7XG5cdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHQuaG92ZXIoXG5cdFx0XHRcdFx0XHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gdGhlICpob3ZlciogZWZmZWN0LlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBvbmx5IG9uIGJ1dHRvbnMgdGhhdCBhcmUgbm90IHRoZSBcImFjdGl2ZVwiIHRhYiwgb3IgZGlzYWJsZWRcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Lm5vdCgnLicgKyB0bSArICctc3RhdGUtYWN0aXZlJylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQubm90KCcuJyArIHRtICsgJy1zdGF0ZS1kaXNhYmxlZCcpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKHRtICsgJy1zdGF0ZS1ob3ZlcicpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB1bmRvIHRoZSAqaG92ZXIqIGVmZmVjdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRidXR0b25cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3ModG0gKyAnLXN0YXRlLWhvdmVyJylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3ModG0gKyAnLXN0YXRlLWRvd24nKTsgLy8gaWYgbW91c2VsZWF2ZSBoYXBwZW5zIGJlZm9yZSBtb3VzZXVwXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0XHRncm91cENoaWxkcmVuID0gZ3JvdXBDaGlsZHJlbi5hZGQoYnV0dG9uKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmIChpc09ubHlCdXR0b25zKSB7XG5cdFx0XHRcdFx0Z3JvdXBDaGlsZHJlblxuXHRcdFx0XHRcdFx0LmZpcnN0KCkuYWRkQ2xhc3ModG0gKyAnLWNvcm5lci1sZWZ0JykuZW5kKClcblx0XHRcdFx0XHRcdC5sYXN0KCkuYWRkQ2xhc3ModG0gKyAnLWNvcm5lci1yaWdodCcpLmVuZCgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGdyb3VwQ2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdGdyb3VwRWwgPSAkKCc8ZGl2Lz4nKTtcblx0XHRcdFx0XHRpZiAoaXNPbmx5QnV0dG9ucykge1xuXHRcdFx0XHRcdFx0Z3JvdXBFbC5hZGRDbGFzcygnZmMtYnV0dG9uLWdyb3VwJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGdyb3VwRWwuYXBwZW5kKGdyb3VwQ2hpbGRyZW4pO1xuXHRcdFx0XHRcdHNlY3Rpb25FbC5hcHBlbmQoZ3JvdXBFbCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0c2VjdGlvbkVsLmFwcGVuZChncm91cENoaWxkcmVuKTsgLy8gMSBvciAwIGNoaWxkcmVuXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBzZWN0aW9uRWw7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVRpdGxlKHRleHQpIHtcblx0XHRpZiAoZWwpIHtcblx0XHRcdGVsLmZpbmQoJ2gyJykudGV4dCh0ZXh0KTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGFjdGl2YXRlQnV0dG9uKGJ1dHRvbk5hbWUpIHtcblx0XHRpZiAoZWwpIHtcblx0XHRcdGVsLmZpbmQoJy5mYy0nICsgYnV0dG9uTmFtZSArICctYnV0dG9uJylcblx0XHRcdFx0LmFkZENsYXNzKHRtICsgJy1zdGF0ZS1hY3RpdmUnKTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGRlYWN0aXZhdGVCdXR0b24oYnV0dG9uTmFtZSkge1xuXHRcdGlmIChlbCkge1xuXHRcdFx0ZWwuZmluZCgnLmZjLScgKyBidXR0b25OYW1lICsgJy1idXR0b24nKVxuXHRcdFx0XHQucmVtb3ZlQ2xhc3ModG0gKyAnLXN0YXRlLWFjdGl2ZScpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gZGlzYWJsZUJ1dHRvbihidXR0b25OYW1lKSB7XG5cdFx0aWYgKGVsKSB7XG5cdFx0XHRlbC5maW5kKCcuZmMtJyArIGJ1dHRvbk5hbWUgKyAnLWJ1dHRvbicpXG5cdFx0XHRcdC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG5cdFx0XHRcdC5hZGRDbGFzcyh0bSArICctc3RhdGUtZGlzYWJsZWQnKTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGVuYWJsZUJ1dHRvbihidXR0b25OYW1lKSB7XG5cdFx0aWYgKGVsKSB7XG5cdFx0XHRlbC5maW5kKCcuZmMtJyArIGJ1dHRvbk5hbWUgKyAnLWJ1dHRvbicpXG5cdFx0XHRcdC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKVxuXHRcdFx0XHQucmVtb3ZlQ2xhc3ModG0gKyAnLXN0YXRlLWRpc2FibGVkJyk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBnZXRWaWV3c1dpdGhCdXR0b25zKCkge1xuXHRcdHJldHVybiB2aWV3c1dpdGhCdXR0b25zO1xuXHR9XG5cbn1cblxuOztcblxudmFyIENhbGVuZGFyID0gRkMuQ2FsZW5kYXIgPSBDbGFzcy5leHRlbmQoe1xuXG5cdGRpckRlZmF1bHRzOiBudWxsLCAvLyBvcHRpb24gZGVmYXVsdHMgcmVsYXRlZCB0byBMVFIgb3IgUlRMXG5cdGxvY2FsZURlZmF1bHRzOiBudWxsLCAvLyBvcHRpb24gZGVmYXVsdHMgcmVsYXRlZCB0byBjdXJyZW50IGxvY2FsZVxuXHRvdmVycmlkZXM6IG51bGwsIC8vIG9wdGlvbiBvdmVycmlkZXMgZ2l2ZW4gdG8gdGhlIGZ1bGxDYWxlbmRhciBjb25zdHJ1Y3RvclxuXHRkeW5hbWljT3ZlcnJpZGVzOiBudWxsLCAvLyBvcHRpb25zIHNldCB3aXRoIGR5bmFtaWMgc2V0dGVyIG1ldGhvZC4gaGlnaGVyIHByZWNlZGVuY2UgdGhhbiB2aWV3IG92ZXJyaWRlcy5cblx0b3B0aW9uczogbnVsbCwgLy8gYWxsIGRlZmF1bHRzIGNvbWJpbmVkIHdpdGggb3ZlcnJpZGVzXG5cdHZpZXdTcGVjQ2FjaGU6IG51bGwsIC8vIGNhY2hlIG9mIHZpZXcgZGVmaW5pdGlvbnNcblx0dmlldzogbnVsbCwgLy8gY3VycmVudCBWaWV3IG9iamVjdFxuXHRoZWFkZXI6IG51bGwsXG5cdGZvb3RlcjogbnVsbCxcblx0bG9hZGluZ0xldmVsOiAwLCAvLyBudW1iZXIgb2Ygc2ltdWx0YW5lb3VzIGxvYWRpbmcgdGFza3NcblxuXG5cdC8vIGEgbG90IG9mIHRoaXMgY2xhc3MnIE9PUCBsb2dpYyBpcyBzY29wZWQgd2l0aGluIHRoaXMgY29uc3RydWN0b3IgZnVuY3Rpb24sXG5cdC8vIGJ1dCBpbiB0aGUgZnV0dXJlLCB3cml0ZSBpbmRpdmlkdWFsIG1ldGhvZHMgb24gdGhlIHByb3RvdHlwZS5cblx0Y29uc3RydWN0b3I6IENhbGVuZGFyX2NvbnN0cnVjdG9yLFxuXG5cblx0Ly8gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb24gbG9naWMgYWZ0ZXIgdGhlIGNvbnN0cnVjdG9yIGhhcyBiZWVuIGNhbGxlZFxuXHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIHRoZSBmbGF0dGVuZWQgb3B0aW9ucyBoYXNoIGZvciB0aGUgY2FsZW5kYXIgYW5kIGFzc2lnbnMgdG8gYHRoaXMub3B0aW9uc2AuXG5cdC8vIEFzc3VtZXMgdGhpcy5vdmVycmlkZXMgYW5kIHRoaXMuZHluYW1pY092ZXJyaWRlcyBoYXZlIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC5cblx0cG9wdWxhdGVPcHRpb25zSGFzaDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGxvY2FsZSwgbG9jYWxlRGVmYXVsdHM7XG5cdFx0dmFyIGlzUlRMLCBkaXJEZWZhdWx0cztcblxuXHRcdGxvY2FsZSA9IGZpcnN0RGVmaW5lZCggLy8gZXhwbGljaXQgbG9jYWxlIG9wdGlvbiBnaXZlbj9cblx0XHRcdHRoaXMuZHluYW1pY092ZXJyaWRlcy5sb2NhbGUsXG5cdFx0XHR0aGlzLm92ZXJyaWRlcy5sb2NhbGVcblx0XHQpO1xuXHRcdGxvY2FsZURlZmF1bHRzID0gbG9jYWxlT3B0aW9uSGFzaFtsb2NhbGVdO1xuXHRcdGlmICghbG9jYWxlRGVmYXVsdHMpIHsgLy8gZXhwbGljaXQgbG9jYWxlIG9wdGlvbiBub3QgZ2l2ZW4gb3IgaW52YWxpZD9cblx0XHRcdGxvY2FsZSA9IENhbGVuZGFyLmRlZmF1bHRzLmxvY2FsZTtcblx0XHRcdGxvY2FsZURlZmF1bHRzID0gbG9jYWxlT3B0aW9uSGFzaFtsb2NhbGVdIHx8IHt9O1xuXHRcdH1cblxuXHRcdGlzUlRMID0gZmlyc3REZWZpbmVkKCAvLyBiYXNlZCBvbiBvcHRpb25zIGNvbXB1dGVkIHNvIGZhciwgaXMgZGlyZWN0aW9uIFJUTD9cblx0XHRcdHRoaXMuZHluYW1pY092ZXJyaWRlcy5pc1JUTCxcblx0XHRcdHRoaXMub3ZlcnJpZGVzLmlzUlRMLFxuXHRcdFx0bG9jYWxlRGVmYXVsdHMuaXNSVEwsXG5cdFx0XHRDYWxlbmRhci5kZWZhdWx0cy5pc1JUTFxuXHRcdCk7XG5cdFx0ZGlyRGVmYXVsdHMgPSBpc1JUTCA/IENhbGVuZGFyLnJ0bERlZmF1bHRzIDoge307XG5cblx0XHR0aGlzLmRpckRlZmF1bHRzID0gZGlyRGVmYXVsdHM7XG5cdFx0dGhpcy5sb2NhbGVEZWZhdWx0cyA9IGxvY2FsZURlZmF1bHRzO1xuXHRcdHRoaXMub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhbIC8vIG1lcmdlIGRlZmF1bHRzIGFuZCBvdmVycmlkZXMuIGxvd2VzdCB0byBoaWdoZXN0IHByZWNlZGVuY2Vcblx0XHRcdENhbGVuZGFyLmRlZmF1bHRzLCAvLyBnbG9iYWwgZGVmYXVsdHNcblx0XHRcdGRpckRlZmF1bHRzLFxuXHRcdFx0bG9jYWxlRGVmYXVsdHMsXG5cdFx0XHR0aGlzLm92ZXJyaWRlcyxcblx0XHRcdHRoaXMuZHluYW1pY092ZXJyaWRlc1xuXHRcdF0pO1xuXHRcdHBvcHVsYXRlSW5zdGFuY2VDb21wdXRhYmxlT3B0aW9ucyh0aGlzLm9wdGlvbnMpOyAvLyBmaWxsIGluIGdhcHMgd2l0aCBjb21wdXRlZCBvcHRpb25zXG5cdH0sXG5cblxuXHQvLyBHZXRzIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0byBjcmVhdGUgYSB2aWV3LiBXaWxsIHVzZSBhIGNhY2hlLlxuXHRnZXRWaWV3U3BlYzogZnVuY3Rpb24odmlld1R5cGUpIHtcblx0XHR2YXIgY2FjaGUgPSB0aGlzLnZpZXdTcGVjQ2FjaGU7XG5cblx0XHRyZXR1cm4gY2FjaGVbdmlld1R5cGVdIHx8IChjYWNoZVt2aWV3VHlwZV0gPSB0aGlzLmJ1aWxkVmlld1NwZWModmlld1R5cGUpKTtcblx0fSxcblxuXG5cdC8vIEdpdmVuIGEgZHVyYXRpb24gc2luZ3VsYXIgdW5pdCwgbGlrZSBcIndlZWtcIiBvciBcImRheVwiLCBmaW5kcyBhIG1hdGNoaW5nIHZpZXcgc3BlYy5cblx0Ly8gUHJlZmVyZW5jZSBpcyBnaXZlbiB0byB2aWV3cyB0aGF0IGhhdmUgY29ycmVzcG9uZGluZyBidXR0b25zLlxuXHRnZXRVbml0Vmlld1NwZWM6IGZ1bmN0aW9uKHVuaXQpIHtcblx0XHR2YXIgdmlld1R5cGVzO1xuXHRcdHZhciBpO1xuXHRcdHZhciBzcGVjO1xuXG5cdFx0aWYgKCQuaW5BcnJheSh1bml0LCBpbnRlcnZhbFVuaXRzKSAhPSAtMSkge1xuXG5cdFx0XHQvLyBwdXQgdmlld3MgdGhhdCBoYXZlIGJ1dHRvbnMgZmlyc3QuIHRoZXJlIHdpbGwgYmUgZHVwbGljYXRlcywgYnV0IG9oIHdlbGxcblx0XHRcdHZpZXdUeXBlcyA9IHRoaXMuaGVhZGVyLmdldFZpZXdzV2l0aEJ1dHRvbnMoKTsgLy8gVE9ETzogaW5jbHVkZSBmb290ZXIgYXMgd2VsbD9cblx0XHRcdCQuZWFjaChGQy52aWV3cywgZnVuY3Rpb24odmlld1R5cGUpIHsgLy8gYWxsIHZpZXdzXG5cdFx0XHRcdHZpZXdUeXBlcy5wdXNoKHZpZXdUeXBlKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgdmlld1R5cGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHNwZWMgPSB0aGlzLmdldFZpZXdTcGVjKHZpZXdUeXBlc1tpXSk7XG5cdFx0XHRcdGlmIChzcGVjKSB7XG5cdFx0XHRcdFx0aWYgKHNwZWMuc2luZ2xlVW5pdCA9PSB1bml0KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gc3BlYztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBCdWlsZHMgYW4gb2JqZWN0IHdpdGggaW5mb3JtYXRpb24gb24gaG93IHRvIGNyZWF0ZSBhIGdpdmVuIHZpZXdcblx0YnVpbGRWaWV3U3BlYzogZnVuY3Rpb24ocmVxdWVzdGVkVmlld1R5cGUpIHtcblx0XHR2YXIgdmlld092ZXJyaWRlcyA9IHRoaXMub3ZlcnJpZGVzLnZpZXdzIHx8IHt9O1xuXHRcdHZhciBzcGVjQ2hhaW4gPSBbXTsgLy8gZm9yIHRoZSB2aWV3LiBsb3dlc3QgdG8gaGlnaGVzdCBwcmlvcml0eVxuXHRcdHZhciBkZWZhdWx0c0NoYWluID0gW107IC8vIGZvciB0aGUgdmlldy4gbG93ZXN0IHRvIGhpZ2hlc3QgcHJpb3JpdHlcblx0XHR2YXIgb3ZlcnJpZGVzQ2hhaW4gPSBbXTsgLy8gZm9yIHRoZSB2aWV3LiBsb3dlc3QgdG8gaGlnaGVzdCBwcmlvcml0eVxuXHRcdHZhciB2aWV3VHlwZSA9IHJlcXVlc3RlZFZpZXdUeXBlO1xuXHRcdHZhciBzcGVjOyAvLyBmb3IgdGhlIHZpZXdcblx0XHR2YXIgb3ZlcnJpZGVzOyAvLyBmb3IgdGhlIHZpZXdcblx0XHR2YXIgZHVyYXRpb247XG5cdFx0dmFyIHVuaXQ7XG5cblx0XHQvLyBpdGVyYXRlIGZyb20gdGhlIHNwZWNpZmljIHZpZXcgZGVmaW5pdGlvbiB0byBhIG1vcmUgZ2VuZXJhbCBvbmUgdW50aWwgd2UgaGl0IGFuIGFjdHVhbCBWaWV3IGNsYXNzXG5cdFx0d2hpbGUgKHZpZXdUeXBlKSB7XG5cdFx0XHRzcGVjID0gZmNWaWV3c1t2aWV3VHlwZV07XG5cdFx0XHRvdmVycmlkZXMgPSB2aWV3T3ZlcnJpZGVzW3ZpZXdUeXBlXTtcblx0XHRcdHZpZXdUeXBlID0gbnVsbDsgLy8gY2xlYXIuIG1pZ2h0IHJlcG9wdWxhdGUgZm9yIGFub3RoZXIgaXRlcmF0aW9uXG5cblx0XHRcdGlmICh0eXBlb2Ygc3BlYyA9PT0gJ2Z1bmN0aW9uJykgeyAvLyBUT0RPOiBkZXByZWNhdGVcblx0XHRcdFx0c3BlYyA9IHsgJ2NsYXNzJzogc3BlYyB9O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc3BlYykge1xuXHRcdFx0XHRzcGVjQ2hhaW4udW5zaGlmdChzcGVjKTtcblx0XHRcdFx0ZGVmYXVsdHNDaGFpbi51bnNoaWZ0KHNwZWMuZGVmYXVsdHMgfHwge30pO1xuXHRcdFx0XHRkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IHNwZWMuZHVyYXRpb247XG5cdFx0XHRcdHZpZXdUeXBlID0gdmlld1R5cGUgfHwgc3BlYy50eXBlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAob3ZlcnJpZGVzKSB7XG5cdFx0XHRcdG92ZXJyaWRlc0NoYWluLnVuc2hpZnQob3ZlcnJpZGVzKTsgLy8gdmlldy1zcGVjaWZpYyBvcHRpb24gaGFzaGVzIGhhdmUgb3B0aW9ucyBhdCB6ZXJvLWxldmVsXG5cdFx0XHRcdGR1cmF0aW9uID0gZHVyYXRpb24gfHwgb3ZlcnJpZGVzLmR1cmF0aW9uO1xuXHRcdFx0XHR2aWV3VHlwZSA9IHZpZXdUeXBlIHx8IG92ZXJyaWRlcy50eXBlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHNwZWMgPSBtZXJnZVByb3BzKHNwZWNDaGFpbik7XG5cdFx0c3BlYy50eXBlID0gcmVxdWVzdGVkVmlld1R5cGU7XG5cdFx0aWYgKCFzcGVjWydjbGFzcyddKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0aWYgKGR1cmF0aW9uKSB7XG5cdFx0XHRkdXJhdGlvbiA9IG1vbWVudC5kdXJhdGlvbihkdXJhdGlvbik7XG5cdFx0XHRpZiAoZHVyYXRpb24udmFsdWVPZigpKSB7IC8vIHZhbGlkP1xuXHRcdFx0XHRzcGVjLmR1cmF0aW9uID0gZHVyYXRpb247XG5cdFx0XHRcdHVuaXQgPSBjb21wdXRlSW50ZXJ2YWxVbml0KGR1cmF0aW9uKTtcblxuXHRcdFx0XHQvLyB2aWV3IGlzIGEgc2luZ2xlLXVuaXQgZHVyYXRpb24sIGxpa2UgXCJ3ZWVrXCIgb3IgXCJkYXlcIlxuXHRcdFx0XHQvLyBpbmNvcnBvcmF0ZSBvcHRpb25zIGZvciB0aGlzLiBsb3dlc3QgcHJpb3JpdHlcblx0XHRcdFx0aWYgKGR1cmF0aW9uLmFzKHVuaXQpID09PSAxKSB7XG5cdFx0XHRcdFx0c3BlYy5zaW5nbGVVbml0ID0gdW5pdDtcblx0XHRcdFx0XHRvdmVycmlkZXNDaGFpbi51bnNoaWZ0KHZpZXdPdmVycmlkZXNbdW5pdF0gfHwge30pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0c3BlYy5kZWZhdWx0cyA9IG1lcmdlT3B0aW9ucyhkZWZhdWx0c0NoYWluKTtcblx0XHRzcGVjLm92ZXJyaWRlcyA9IG1lcmdlT3B0aW9ucyhvdmVycmlkZXNDaGFpbik7XG5cblx0XHR0aGlzLmJ1aWxkVmlld1NwZWNPcHRpb25zKHNwZWMpO1xuXHRcdHRoaXMuYnVpbGRWaWV3U3BlY0J1dHRvblRleHQoc3BlYywgcmVxdWVzdGVkVmlld1R5cGUpO1xuXG5cdFx0cmV0dXJuIHNwZWM7XG5cdH0sXG5cblxuXHQvLyBCdWlsZHMgYW5kIGFzc2lnbnMgYSB2aWV3IHNwZWMncyBvcHRpb25zIG9iamVjdCBmcm9tIGl0cyBhbHJlYWR5LWFzc2lnbmVkIGRlZmF1bHRzIGFuZCBvdmVycmlkZXNcblx0YnVpbGRWaWV3U3BlY09wdGlvbnM6IGZ1bmN0aW9uKHNwZWMpIHtcblx0XHRzcGVjLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoWyAvLyBsb3dlc3QgdG8gaGlnaGVzdCBwcmlvcml0eVxuXHRcdFx0Q2FsZW5kYXIuZGVmYXVsdHMsIC8vIGdsb2JhbCBkZWZhdWx0c1xuXHRcdFx0c3BlYy5kZWZhdWx0cywgLy8gdmlldydzIGRlZmF1bHRzIChmcm9tIFZpZXdTdWJjbGFzcy5kZWZhdWx0cylcblx0XHRcdHRoaXMuZGlyRGVmYXVsdHMsXG5cdFx0XHR0aGlzLmxvY2FsZURlZmF1bHRzLCAvLyBsb2NhbGUgYW5kIGRpciB0YWtlIHByZWNlZGVuY2Ugb3ZlciB2aWV3J3MgZGVmYXVsdHMhXG5cdFx0XHR0aGlzLm92ZXJyaWRlcywgLy8gY2FsZW5kYXIncyBvdmVycmlkZXMgKG9wdGlvbnMgZ2l2ZW4gdG8gY29uc3RydWN0b3IpXG5cdFx0XHRzcGVjLm92ZXJyaWRlcywgLy8gdmlldydzIG92ZXJyaWRlcyAodmlldy1zcGVjaWZpYyBvcHRpb25zKVxuXHRcdFx0dGhpcy5keW5hbWljT3ZlcnJpZGVzIC8vIGR5bmFtaWNhbGx5IHNldCB2aWEgc2V0dGVyLiBoaWdoZXN0IHByZWNlZGVuY2Vcblx0XHRdKTtcblx0XHRwb3B1bGF0ZUluc3RhbmNlQ29tcHV0YWJsZU9wdGlvbnMoc3BlYy5vcHRpb25zKTtcblx0fSxcblxuXG5cdC8vIENvbXB1dGVzIGFuZCBhc3NpZ25zIGEgdmlldyBzcGVjJ3MgYnV0dG9uVGV4dC1yZWxhdGVkIG9wdGlvbnNcblx0YnVpbGRWaWV3U3BlY0J1dHRvblRleHQ6IGZ1bmN0aW9uKHNwZWMsIHJlcXVlc3RlZFZpZXdUeXBlKSB7XG5cblx0XHQvLyBnaXZlbiBhbiBvcHRpb25zIG9iamVjdCB3aXRoIGEgcG9zc2libGUgYGJ1dHRvblRleHRgIGhhc2gsIGxvb2t1cCB0aGUgYnV0dG9uVGV4dCBmb3IgdGhlXG5cdFx0Ly8gcmVxdWVzdGVkIHZpZXcsIGZhbGxpbmcgYmFjayB0byBhIGdlbmVyaWMgdW5pdCBlbnRyeSBsaWtlIFwid2Vla1wiIG9yIFwiZGF5XCJcblx0XHRmdW5jdGlvbiBxdWVyeUJ1dHRvblRleHQob3B0aW9ucykge1xuXHRcdFx0dmFyIGJ1dHRvblRleHQgPSBvcHRpb25zLmJ1dHRvblRleHQgfHwge307XG5cdFx0XHRyZXR1cm4gYnV0dG9uVGV4dFtyZXF1ZXN0ZWRWaWV3VHlwZV0gfHxcblx0XHRcdFx0Ly8gdmlldyBjYW4gZGVjaWRlIHRvIGxvb2sgdXAgYSBjZXJ0YWluIGtleVxuXHRcdFx0XHQoc3BlYy5idXR0b25UZXh0S2V5ID8gYnV0dG9uVGV4dFtzcGVjLmJ1dHRvblRleHRLZXldIDogbnVsbCkgfHxcblx0XHRcdFx0Ly8gYSBrZXkgbGlrZSBcIm1vbnRoXCJcblx0XHRcdFx0KHNwZWMuc2luZ2xlVW5pdCA/IGJ1dHRvblRleHRbc3BlYy5zaW5nbGVVbml0XSA6IG51bGwpO1xuXHRcdH1cblxuXHRcdC8vIGhpZ2hlc3QgdG8gbG93ZXN0IHByaW9yaXR5XG5cdFx0c3BlYy5idXR0b25UZXh0T3ZlcnJpZGUgPVxuXHRcdFx0cXVlcnlCdXR0b25UZXh0KHRoaXMuZHluYW1pY092ZXJyaWRlcykgfHxcblx0XHRcdHF1ZXJ5QnV0dG9uVGV4dCh0aGlzLm92ZXJyaWRlcykgfHwgLy8gY29uc3RydWN0b3Itc3BlY2lmaWVkIGJ1dHRvblRleHQgbG9va3VwIGhhc2ggdGFrZXMgcHJlY2VkZW5jZVxuXHRcdFx0c3BlYy5vdmVycmlkZXMuYnV0dG9uVGV4dDsgLy8gYGJ1dHRvblRleHRgIGZvciB2aWV3LXNwZWNpZmljIG9wdGlvbnMgaXMgYSBzdHJpbmdcblxuXHRcdC8vIGhpZ2hlc3QgdG8gbG93ZXN0IHByaW9yaXR5LiBtaXJyb3JzIGJ1aWxkVmlld1NwZWNPcHRpb25zXG5cdFx0c3BlYy5idXR0b25UZXh0RGVmYXVsdCA9XG5cdFx0XHRxdWVyeUJ1dHRvblRleHQodGhpcy5sb2NhbGVEZWZhdWx0cykgfHxcblx0XHRcdHF1ZXJ5QnV0dG9uVGV4dCh0aGlzLmRpckRlZmF1bHRzKSB8fFxuXHRcdFx0c3BlYy5kZWZhdWx0cy5idXR0b25UZXh0IHx8IC8vIGEgc2luZ2xlIHN0cmluZy4gZnJvbSBWaWV3U3ViY2xhc3MuZGVmYXVsdHNcblx0XHRcdHF1ZXJ5QnV0dG9uVGV4dChDYWxlbmRhci5kZWZhdWx0cykgfHxcblx0XHRcdChzcGVjLmR1cmF0aW9uID8gdGhpcy5odW1hbml6ZUR1cmF0aW9uKHNwZWMuZHVyYXRpb24pIDogbnVsbCkgfHwgLy8gbGlrZSBcIjMgZGF5c1wiXG5cdFx0XHRyZXF1ZXN0ZWRWaWV3VHlwZTsgLy8gZmFsbCBiYWNrIHRvIGdpdmVuIHZpZXcgbmFtZVxuXHR9LFxuXG5cblx0Ly8gR2l2ZW4gYSB2aWV3IG5hbWUgZm9yIGEgY3VzdG9tIHZpZXcgb3IgYSBzdGFuZGFyZCB2aWV3LCBjcmVhdGVzIGEgcmVhZHktdG8tZ28gVmlldyBvYmplY3Rcblx0aW5zdGFudGlhdGVWaWV3OiBmdW5jdGlvbih2aWV3VHlwZSkge1xuXHRcdHZhciBzcGVjID0gdGhpcy5nZXRWaWV3U3BlYyh2aWV3VHlwZSk7XG5cblx0XHRyZXR1cm4gbmV3IHNwZWNbJ2NsYXNzJ10odGhpcywgdmlld1R5cGUsIHNwZWMub3B0aW9ucywgc3BlYy5kdXJhdGlvbik7XG5cdH0sXG5cblxuXHQvLyBSZXR1cm5zIGEgYm9vbGVhbiBhYm91dCB3aGV0aGVyIHRoZSB2aWV3IGlzIG9rYXkgdG8gaW5zdGFudGlhdGUgYXQgc29tZSBwb2ludFxuXHRpc1ZhbGlkVmlld1R5cGU6IGZ1bmN0aW9uKHZpZXdUeXBlKSB7XG5cdFx0cmV0dXJuIEJvb2xlYW4odGhpcy5nZXRWaWV3U3BlYyh2aWV3VHlwZSkpO1xuXHR9LFxuXG5cblx0Ly8gU2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFueSB0eXBlIG9mIGFzeW5jIGRhdGEgZmV0Y2hpbmcgYmVnaW5zXG5cdHB1c2hMb2FkaW5nOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoISh0aGlzLmxvYWRpbmdMZXZlbCsrKSkge1xuXHRcdFx0dGhpcy5wdWJsaWNseVRyaWdnZXIoJ2xvYWRpbmcnLCBudWxsLCB0cnVlLCB0aGlzLnZpZXcpO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIFNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbnkgdHlwZSBvZiBhc3luYyBkYXRhIGZldGNoaW5nIGNvbXBsZXRlc1xuXHRwb3BMb2FkaW5nOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoISgtLXRoaXMubG9hZGluZ0xldmVsKSkge1xuXHRcdFx0dGhpcy5wdWJsaWNseVRyaWdnZXIoJ2xvYWRpbmcnLCBudWxsLCBmYWxzZSwgdGhpcy52aWV3KTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBHaXZlbiBhcmd1bWVudHMgdG8gdGhlIHNlbGVjdCBtZXRob2QgaW4gdGhlIEFQSSwgcmV0dXJucyBhIHNwYW4gKHVuem9uZWQgc3RhcnQvZW5kIGFuZCBvdGhlciBpbmZvKVxuXHRidWlsZFNlbGVjdFNwYW46IGZ1bmN0aW9uKHpvbmVkU3RhcnRJbnB1dCwgem9uZWRFbmRJbnB1dCkge1xuXHRcdHZhciBzdGFydCA9IHRoaXMubW9tZW50KHpvbmVkU3RhcnRJbnB1dCkuc3RyaXBab25lKCk7XG5cdFx0dmFyIGVuZDtcblxuXHRcdGlmICh6b25lZEVuZElucHV0KSB7XG5cdFx0XHRlbmQgPSB0aGlzLm1vbWVudCh6b25lZEVuZElucHV0KS5zdHJpcFpvbmUoKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoc3RhcnQuaGFzVGltZSgpKSB7XG5cdFx0XHRlbmQgPSBzdGFydC5jbG9uZSgpLmFkZCh0aGlzLmRlZmF1bHRUaW1lZEV2ZW50RHVyYXRpb24pO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGVuZCA9IHN0YXJ0LmNsb25lKCkuYWRkKHRoaXMuZGVmYXVsdEFsbERheUV2ZW50RHVyYXRpb24pO1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQgfTtcblx0fVxuXG59KTtcblxuXG5DYWxlbmRhci5taXhpbihFbWl0dGVyTWl4aW4pO1xuXG5cbmZ1bmN0aW9uIENhbGVuZGFyX2NvbnN0cnVjdG9yKGVsZW1lbnQsIG92ZXJyaWRlcykge1xuXHR2YXIgdCA9IHRoaXM7XG5cblxuXHQvLyBFeHBvcnRzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0dC5yZW5kZXIgPSByZW5kZXI7XG5cdHQuZGVzdHJveSA9IGRlc3Ryb3k7XG5cdHQucmVyZW5kZXJFdmVudHMgPSByZXJlbmRlckV2ZW50cztcblx0dC5jaGFuZ2VWaWV3ID0gcmVuZGVyVmlldzsgLy8gYHJlbmRlclZpZXdgIHdpbGwgc3dpdGNoIHRvIGFub3RoZXIgdmlld1xuXHR0LnNlbGVjdCA9IHNlbGVjdDtcblx0dC51bnNlbGVjdCA9IHVuc2VsZWN0O1xuXHR0LnByZXYgPSBwcmV2O1xuXHR0Lm5leHQgPSBuZXh0O1xuXHR0LnByZXZZZWFyID0gcHJldlllYXI7XG5cdHQubmV4dFllYXIgPSBuZXh0WWVhcjtcblx0dC50b2RheSA9IHRvZGF5O1xuXHR0LmdvdG9EYXRlID0gZ290b0RhdGU7XG5cdHQuaW5jcmVtZW50RGF0ZSA9IGluY3JlbWVudERhdGU7XG5cdHQuem9vbVRvID0gem9vbVRvO1xuXHR0LmdldERhdGUgPSBnZXREYXRlO1xuXHR0LmdldENhbGVuZGFyID0gZ2V0Q2FsZW5kYXI7XG5cdHQuZ2V0VmlldyA9IGdldFZpZXc7XG5cdHQub3B0aW9uID0gb3B0aW9uOyAvLyBnZXR0ZXIvc2V0dGVyIG1ldGhvZFxuXHR0LnB1YmxpY2x5VHJpZ2dlciA9IHB1YmxpY2x5VHJpZ2dlcjtcblxuXG5cdC8vIE9wdGlvbnNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHR0LmR5bmFtaWNPdmVycmlkZXMgPSB7fTtcblx0dC52aWV3U3BlY0NhY2hlID0ge307XG5cdHQub3B0aW9uSGFuZGxlcnMgPSB7fTsgLy8gZm9yIENhbGVuZGFyLm9wdGlvbnMuanNcblx0dC5vdmVycmlkZXMgPSAkLmV4dGVuZCh7fSwgb3ZlcnJpZGVzKTsgLy8gbWFrZSBhIGNvcHlcblxuXHR0LnBvcHVsYXRlT3B0aW9uc0hhc2goKTsgLy8gc2V0cyB0aGlzLm9wdGlvbnNcblxuXG5cblx0Ly8gTG9jYWxlLWRhdGEgSW50ZXJuYWxzXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIEFwcGx5IG92ZXJyaWRlcyB0byB0aGUgY3VycmVudCBsb2NhbGUncyBkYXRhXG5cblx0dmFyIGxvY2FsZURhdGE7XG5cblx0Ly8gQ2FsbGVkIGltbWVkaWF0ZWx5LCBhbmQgd2hlbiBhbnkgb2YgdGhlIG9wdGlvbnMgY2hhbmdlLlxuXHQvLyBIYXBwZW5zIGJlZm9yZSBhbnkgaW50ZXJuYWwgb2JqZWN0cyByZWJ1aWxkIG9yIHJlcmVuZGVyLCBiZWNhdXNlIHRoaXMgaXMgdmVyeSBjb3JlLlxuXHR0LmJpbmRPcHRpb25zKFtcblx0XHQnbG9jYWxlJywgJ21vbnRoTmFtZXMnLCAnbW9udGhOYW1lc1Nob3J0JywgJ2RheU5hbWVzJywgJ2RheU5hbWVzU2hvcnQnLCAnZmlyc3REYXknLCAnd2Vla051bWJlckNhbGN1bGF0aW9uJ1xuXHRdLCBmdW5jdGlvbihsb2NhbGUsIG1vbnRoTmFtZXMsIG1vbnRoTmFtZXNTaG9ydCwgZGF5TmFtZXMsIGRheU5hbWVzU2hvcnQsIGZpcnN0RGF5LCB3ZWVrTnVtYmVyQ2FsY3VsYXRpb24pIHtcblxuXHRcdC8vIG5vcm1hbGl6ZVxuXHRcdGlmICh3ZWVrTnVtYmVyQ2FsY3VsYXRpb24gPT09ICdpc28nKSB7XG5cdFx0XHR3ZWVrTnVtYmVyQ2FsY3VsYXRpb24gPSAnSVNPJzsgLy8gbm9ybWFsaXplXG5cdFx0fVxuXG5cdFx0bG9jYWxlRGF0YSA9IGNyZWF0ZU9iamVjdCggLy8gbWFrZSBhIGNoZWFwIGNvcHlcblx0XHRcdGdldE1vbWVudExvY2FsZURhdGEobG9jYWxlKSAvLyB3aWxsIGZhbGwgYmFjayB0byBlblxuXHRcdCk7XG5cblx0XHRpZiAobW9udGhOYW1lcykge1xuXHRcdFx0bG9jYWxlRGF0YS5fbW9udGhzID0gbW9udGhOYW1lcztcblx0XHR9XG5cdFx0aWYgKG1vbnRoTmFtZXNTaG9ydCkge1xuXHRcdFx0bG9jYWxlRGF0YS5fbW9udGhzU2hvcnQgPSBtb250aE5hbWVzU2hvcnQ7XG5cdFx0fVxuXHRcdGlmIChkYXlOYW1lcykge1xuXHRcdFx0bG9jYWxlRGF0YS5fd2Vla2RheXMgPSBkYXlOYW1lcztcblx0XHR9XG5cdFx0aWYgKGRheU5hbWVzU2hvcnQpIHtcblx0XHRcdGxvY2FsZURhdGEuX3dlZWtkYXlzU2hvcnQgPSBkYXlOYW1lc1Nob3J0O1xuXHRcdH1cblxuXHRcdGlmIChmaXJzdERheSA9PSBudWxsICYmIHdlZWtOdW1iZXJDYWxjdWxhdGlvbiA9PT0gJ0lTTycpIHtcblx0XHRcdGZpcnN0RGF5ID0gMTtcblx0XHR9XG5cdFx0aWYgKGZpcnN0RGF5ICE9IG51bGwpIHtcblx0XHRcdHZhciBfd2VlayA9IGNyZWF0ZU9iamVjdChsb2NhbGVEYXRhLl93ZWVrKTsgLy8gX3dlZWs6IHsgZG93OiAjIH1cblx0XHRcdF93ZWVrLmRvdyA9IGZpcnN0RGF5O1xuXHRcdFx0bG9jYWxlRGF0YS5fd2VlayA9IF93ZWVrO1xuXHRcdH1cblxuXHRcdGlmICggLy8gd2hpdGVsaXN0IGNlcnRhaW4ga2luZHMgb2YgaW5wdXRcblx0XHRcdHdlZWtOdW1iZXJDYWxjdWxhdGlvbiA9PT0gJ0lTTycgfHxcblx0XHRcdHdlZWtOdW1iZXJDYWxjdWxhdGlvbiA9PT0gJ2xvY2FsJyB8fFxuXHRcdFx0dHlwZW9mIHdlZWtOdW1iZXJDYWxjdWxhdGlvbiA9PT0gJ2Z1bmN0aW9uJ1xuXHRcdCkge1xuXHRcdFx0bG9jYWxlRGF0YS5fZnVsbENhbGVuZGFyX3dlZWtDYWxjID0gd2Vla051bWJlckNhbGN1bGF0aW9uOyAvLyBtb21lbnQtZXh0IHdpbGwga25vdyB3aGF0IHRvIGRvIHdpdGggaXRcblx0XHR9XG5cblx0XHQvLyBJZiB0aGUgaW50ZXJuYWwgY3VycmVudCBkYXRlIG9iamVjdCBhbHJlYWR5IGV4aXN0cywgbW92ZSB0byBuZXcgbG9jYWxlLlxuXHRcdC8vIFdlIGRvIE5PVCBuZWVkIHRvIGRvIHRoaXMgdGVjaG5pcXVlIGZvciBldmVudCBkYXRlcywgYmVjYXVzZSB0aGlzIGhhcHBlbnMgd2hlbiBjb252ZXJ0aW5nIHRvIFwic2VnbWVudHNcIi5cblx0XHRpZiAoZGF0ZSkge1xuXHRcdFx0bG9jYWxpemVNb21lbnQoZGF0ZSk7IC8vIHNldHMgdG8gbG9jYWxlRGF0YVxuXHRcdH1cblx0fSk7XG5cblxuXHQvLyBDYWxlbmRhci1zcGVjaWZpYyBEYXRlIFV0aWxpdGllc1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0dC5kZWZhdWx0QWxsRGF5RXZlbnREdXJhdGlvbiA9IG1vbWVudC5kdXJhdGlvbih0Lm9wdGlvbnMuZGVmYXVsdEFsbERheUV2ZW50RHVyYXRpb24pO1xuXHR0LmRlZmF1bHRUaW1lZEV2ZW50RHVyYXRpb24gPSBtb21lbnQuZHVyYXRpb24odC5vcHRpb25zLmRlZmF1bHRUaW1lZEV2ZW50RHVyYXRpb24pO1xuXG5cblx0Ly8gQnVpbGRzIGEgbW9tZW50IHVzaW5nIHRoZSBzZXR0aW5ncyBvZiB0aGUgY3VycmVudCBjYWxlbmRhcjogdGltZXpvbmUgYW5kIGxvY2FsZS5cblx0Ly8gQWNjZXB0cyBhbnl0aGluZyB0aGUgdmFuaWxsYSBtb21lbnQoKSBjb25zdHJ1Y3RvciBhY2NlcHRzLlxuXHR0Lm1vbWVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtb207XG5cblx0XHRpZiAodC5vcHRpb25zLnRpbWV6b25lID09PSAnbG9jYWwnKSB7XG5cdFx0XHRtb20gPSBGQy5tb21lbnQuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcblxuXHRcdFx0Ly8gRm9yY2UgdGhlIG1vbWVudCB0byBiZSBsb2NhbCwgYmVjYXVzZSBGQy5tb21lbnQgZG9lc24ndCBndWFyYW50ZWUgaXQuXG5cdFx0XHRpZiAobW9tLmhhc1RpbWUoKSkgeyAvLyBkb24ndCBnaXZlIGFtYmlndW91c2x5LXRpbWVkIG1vbWVudHMgYSBsb2NhbCB6b25lXG5cdFx0XHRcdG1vbS5sb2NhbCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmICh0Lm9wdGlvbnMudGltZXpvbmUgPT09ICdVVEMnKSB7XG5cdFx0XHRtb20gPSBGQy5tb21lbnQudXRjLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IC8vIHByb2Nlc3MgYXMgVVRDXG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0bW9tID0gRkMubW9tZW50LnBhcnNlWm9uZS5hcHBseShudWxsLCBhcmd1bWVudHMpOyAvLyBsZXQgdGhlIGlucHV0IGRlY2lkZSB0aGUgem9uZVxuXHRcdH1cblxuXHRcdGxvY2FsaXplTW9tZW50KG1vbSk7XG5cblx0XHRyZXR1cm4gbW9tO1xuXHR9O1xuXG5cblx0Ly8gVXBkYXRlcyB0aGUgZ2l2ZW4gbW9tZW50J3MgbG9jYWxlIHNldHRpbmdzIHRvIHRoZSBjdXJyZW50IGNhbGVuZGFyIGxvY2FsZSBzZXR0aW5ncy5cblx0ZnVuY3Rpb24gbG9jYWxpemVNb21lbnQobW9tKSB7XG5cdFx0bW9tLl9sb2NhbGUgPSBsb2NhbGVEYXRhO1xuXHR9XG5cdHQubG9jYWxpemVNb21lbnQgPSBsb2NhbGl6ZU1vbWVudDtcblxuXG5cdC8vIFJldHVybnMgYSBib29sZWFuIGFib3V0IHdoZXRoZXIgb3Igbm90IHRoZSBjYWxlbmRhciBrbm93cyBob3cgdG8gY2FsY3VsYXRlXG5cdC8vIHRoZSB0aW1lem9uZSBvZmZzZXQgb2YgYXJiaXRyYXJ5IGRhdGVzIGluIHRoZSBjdXJyZW50IHRpbWV6b25lLlxuXHR0LmdldElzQW1iaWdUaW1lem9uZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0Lm9wdGlvbnMudGltZXpvbmUgIT09ICdsb2NhbCcgJiYgdC5vcHRpb25zLnRpbWV6b25lICE9PSAnVVRDJztcblx0fTtcblxuXG5cdC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBjdXJyZW50IHRpbWV6b25lLiBIYXMgbm8gZWZmZWN0IG9uIGRhdGVzIHdpdGhvdXQgdGltZXMuXG5cdHQuYXBwbHlUaW1lem9uZSA9IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHRpZiAoIWRhdGUuaGFzVGltZSgpKSB7XG5cdFx0XHRyZXR1cm4gZGF0ZS5jbG9uZSgpO1xuXHRcdH1cblxuXHRcdHZhciB6b25lZERhdGUgPSB0Lm1vbWVudChkYXRlLnRvQXJyYXkoKSk7XG5cdFx0dmFyIHRpbWVBZGp1c3QgPSBkYXRlLnRpbWUoKSAtIHpvbmVkRGF0ZS50aW1lKCk7XG5cdFx0dmFyIGFkanVzdGVkWm9uZWREYXRlO1xuXG5cdFx0Ly8gU2FmYXJpIHNvbWV0aW1lcyBoYXMgcHJvYmxlbXMgd2l0aCB0aGlzIGNvZXJzaW9uIHdoZW4gbmVhciBEU1QuIEFkanVzdCBpZiBuZWNlc3NhcnkuIChidWcgIzIzOTYpXG5cdFx0aWYgKHRpbWVBZGp1c3QpIHsgLy8gaXMgdGhlIHRpbWUgcmVzdWx0IGRpZmZlcmVudCB0aGFuIGV4cGVjdGVkP1xuXHRcdFx0YWRqdXN0ZWRab25lZERhdGUgPSB6b25lZERhdGUuY2xvbmUoKS5hZGQodGltZUFkanVzdCk7IC8vIGFkZCBtaWxsaXNlY29uZHNcblx0XHRcdGlmIChkYXRlLnRpbWUoKSAtIGFkanVzdGVkWm9uZWREYXRlLnRpbWUoKSA9PT0gMCkgeyAvLyBkb2VzIGl0IG1hdGNoIHBlcmZlY3RseSBub3c/XG5cdFx0XHRcdHpvbmVkRGF0ZSA9IGFkanVzdGVkWm9uZWREYXRlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB6b25lZERhdGU7XG5cdH07XG5cblxuXHQvLyBSZXR1cm5zIGEgbW9tZW50IGZvciB0aGUgY3VycmVudCBkYXRlLCBhcyBkZWZpbmVkIGJ5IHRoZSBjbGllbnQncyBjb21wdXRlciBvciBmcm9tIHRoZSBgbm93YCBvcHRpb24uXG5cdC8vIFdpbGwgcmV0dXJuIGFuIG1vbWVudCB3aXRoIGFuIGFtYmlndW91cyB0aW1lem9uZS5cblx0dC5nZXROb3cgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbm93ID0gdC5vcHRpb25zLm5vdztcblx0XHRpZiAodHlwZW9mIG5vdyA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0bm93ID0gbm93KCk7XG5cdFx0fVxuXHRcdHJldHVybiB0Lm1vbWVudChub3cpLnN0cmlwWm9uZSgpO1xuXHR9O1xuXG5cblx0Ly8gR2V0IGFuIGV2ZW50J3Mgbm9ybWFsaXplZCBlbmQgZGF0ZS4gSWYgbm90IHByZXNlbnQsIGNhbGN1bGF0ZSBpdCBmcm9tIHRoZSBkZWZhdWx0cy5cblx0dC5nZXRFdmVudEVuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0aWYgKGV2ZW50LmVuZCkge1xuXHRcdFx0cmV0dXJuIGV2ZW50LmVuZC5jbG9uZSgpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiB0LmdldERlZmF1bHRFdmVudEVuZChldmVudC5hbGxEYXksIGV2ZW50LnN0YXJ0KTtcblx0XHR9XG5cdH07XG5cblxuXHQvLyBHaXZlbiBhbiBldmVudCdzIGFsbERheSBzdGF0dXMgYW5kIHN0YXJ0IGRhdGUsIHJldHVybiB3aGF0IGl0cyBmYWxsYmFjayBlbmQgZGF0ZSBzaG91bGQgYmUuXG5cdC8vIFRPRE86IHJlbmFtZSB0byBjb21wdXRlRGVmYXVsdEV2ZW50RW5kXG5cdHQuZ2V0RGVmYXVsdEV2ZW50RW5kID0gZnVuY3Rpb24oYWxsRGF5LCB6b25lZFN0YXJ0KSB7XG5cdFx0dmFyIGVuZCA9IHpvbmVkU3RhcnQuY2xvbmUoKTtcblxuXHRcdGlmIChhbGxEYXkpIHtcblx0XHRcdGVuZC5zdHJpcFRpbWUoKS5hZGQodC5kZWZhdWx0QWxsRGF5RXZlbnREdXJhdGlvbik7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZW5kLmFkZCh0LmRlZmF1bHRUaW1lZEV2ZW50RHVyYXRpb24pO1xuXHRcdH1cblxuXHRcdGlmICh0LmdldElzQW1iaWdUaW1lem9uZSgpKSB7XG5cdFx0XHRlbmQuc3RyaXBab25lKCk7IC8vIHdlIGRvbid0IGtub3cgd2hhdCB0aGUgdHpvIHNob3VsZCBiZVxuXHRcdH1cblxuXHRcdHJldHVybiBlbmQ7XG5cdH07XG5cblxuXHQvLyBQcm9kdWNlcyBhIGh1bWFuLXJlYWRhYmxlIHN0cmluZyBmb3IgdGhlIGdpdmVuIGR1cmF0aW9uLlxuXHQvLyBTaWRlLWVmZmVjdDogY2hhbmdlcyB0aGUgbG9jYWxlIG9mIHRoZSBnaXZlbiBkdXJhdGlvbi5cblx0dC5odW1hbml6ZUR1cmF0aW9uID0gZnVuY3Rpb24oZHVyYXRpb24pIHtcblx0XHRyZXR1cm4gZHVyYXRpb24ubG9jYWxlKHQub3B0aW9ucy5sb2NhbGUpLmh1bWFuaXplKCk7XG5cdH07XG5cblxuXG5cdC8vIEltcG9ydHNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdEV2ZW50TWFuYWdlci5jYWxsKHQpO1xuXG5cblxuXHQvLyBMb2NhbHNcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5cdHZhciBfZWxlbWVudCA9IGVsZW1lbnRbMF07XG5cdHZhciB0b29sYmFyc01hbmFnZXI7XG5cdHZhciBoZWFkZXI7XG5cdHZhciBmb290ZXI7XG5cdHZhciBjb250ZW50O1xuXHR2YXIgdG07IC8vIGZvciBtYWtpbmcgdGhlbWUgY2xhc3Nlc1xuXHR2YXIgY3VycmVudFZpZXc7IC8vIE5PVEU6IGtlZXAgdGhpcyBpbiBzeW5jIHdpdGggdGhpcy52aWV3XG5cdHZhciB2aWV3c0J5VHlwZSA9IHt9OyAvLyBob2xkcyBhbGwgaW5zdGFudGlhdGVkIHZpZXcgaW5zdGFuY2VzLCBjdXJyZW50IG9yIG5vdFxuXHR2YXIgc3VnZ2VzdGVkVmlld0hlaWdodDtcblx0dmFyIHdpbmRvd1Jlc2l6ZVByb3h5OyAvLyB3cmFwcyB0aGUgd2luZG93UmVzaXplIGZ1bmN0aW9uXG5cdHZhciBpZ25vcmVXaW5kb3dSZXNpemUgPSAwO1xuXHR2YXIgZGF0ZTsgLy8gdW56b25lZFxuXG5cblxuXHQvLyBNYWluIFJlbmRlcmluZ1xuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblx0Ly8gY29tcHV0ZSB0aGUgaW5pdGlhbCBhbWJpZy10aW1lem9uZSBkYXRlXG5cdGlmICh0Lm9wdGlvbnMuZGVmYXVsdERhdGUgIT0gbnVsbCkge1xuXHRcdGRhdGUgPSB0Lm1vbWVudCh0Lm9wdGlvbnMuZGVmYXVsdERhdGUpLnN0cmlwWm9uZSgpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdGRhdGUgPSB0LmdldE5vdygpOyAvLyBnZXROb3cgYWxyZWFkeSByZXR1cm5zIHVuem9uZWRcblx0fVxuXG5cblx0ZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcdGlmICghY29udGVudCkge1xuXHRcdFx0aW5pdGlhbFJlbmRlcigpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChlbGVtZW50VmlzaWJsZSgpKSB7XG5cdFx0XHQvLyBtYWlubHkgZm9yIHRoZSBwdWJsaWMgQVBJXG5cdFx0XHRjYWxjU2l6ZSgpO1xuXHRcdFx0cmVuZGVyVmlldygpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gaW5pdGlhbFJlbmRlcigpIHtcblx0XHRlbGVtZW50LmFkZENsYXNzKCdmYycpO1xuXG5cdFx0Ly8gZXZlbnQgZGVsZWdhdGlvbiBmb3IgbmF2IGxpbmtzXG5cdFx0ZWxlbWVudC5vbignY2xpY2suZmMnLCAnYVtkYXRhLWdvdG9dJywgZnVuY3Rpb24oZXYpIHtcblx0XHRcdHZhciBhbmNob3JFbCA9ICQodGhpcyk7XG5cdFx0XHR2YXIgZ290b09wdGlvbnMgPSBhbmNob3JFbC5kYXRhKCdnb3RvJyk7IC8vIHdpbGwgYXV0b21hdGljYWxseSBwYXJzZSBKU09OXG5cdFx0XHR2YXIgZGF0ZSA9IHQubW9tZW50KGdvdG9PcHRpb25zLmRhdGUpO1xuXHRcdFx0dmFyIHZpZXdUeXBlID0gZ290b09wdGlvbnMudHlwZTtcblxuXHRcdFx0Ly8gcHJvcGVydHkgbGlrZSBcIm5hdkxpbmtEYXlDbGlja1wiLiBtaWdodCBiZSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uXG5cdFx0XHR2YXIgY3VzdG9tQWN0aW9uID0gY3VycmVudFZpZXcub3B0KCduYXZMaW5rJyArIGNhcGl0YWxpc2VGaXJzdExldHRlcih2aWV3VHlwZSkgKyAnQ2xpY2snKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBjdXN0b21BY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0Y3VzdG9tQWN0aW9uKGRhdGUsIGV2KTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRpZiAodHlwZW9mIGN1c3RvbUFjdGlvbiA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHR2aWV3VHlwZSA9IGN1c3RvbUFjdGlvbjtcblx0XHRcdFx0fVxuXHRcdFx0XHR6b29tVG8oZGF0ZSwgdmlld1R5cGUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gY2FsbGVkIGltbWVkaWF0ZWx5LCBhbmQgdXBvbiBvcHRpb24gY2hhbmdlXG5cdFx0dC5iaW5kT3B0aW9uKCd0aGVtZScsIGZ1bmN0aW9uKHRoZW1lKSB7XG5cdFx0XHR0bSA9IHRoZW1lID8gJ3VpJyA6ICdmYyc7IC8vIGFmZmVjdHMgYSBsYXJnZXIgc2NvcGVcblx0XHRcdGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ3VpLXdpZGdldCcsIHRoZW1lKTtcblx0XHRcdGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ2ZjLXVudGhlbWVkJywgIXRoZW1lKTtcblx0XHR9KTtcblxuXHRcdC8vIGNhbGxlZCBpbW1lZGlhdGVseSwgYW5kIHVwb24gb3B0aW9uIGNoYW5nZS5cblx0XHQvLyBIQUNLOiBsb2NhbGUgb2Z0ZW4gYWZmZWN0cyBpc1JUTCwgc28gd2UgZXhwbGljaXRseSBsaXN0ZW4gdG8gdGhhdCB0b28uXG5cdFx0dC5iaW5kT3B0aW9ucyhbICdpc1JUTCcsICdsb2NhbGUnIF0sIGZ1bmN0aW9uKGlzUlRMKSB7XG5cdFx0XHRlbGVtZW50LnRvZ2dsZUNsYXNzKCdmYy1sdHInLCAhaXNSVEwpO1xuXHRcdFx0ZWxlbWVudC50b2dnbGVDbGFzcygnZmMtcnRsJywgaXNSVEwpO1xuXHRcdH0pO1xuXG5cdFx0Y29udGVudCA9ICQoXCI8ZGl2IGNsYXNzPSdmYy12aWV3LWNvbnRhaW5lcicvPlwiKS5wcmVwZW5kVG8oZWxlbWVudCk7XG5cblx0XHR2YXIgdG9vbGJhcnMgPSBidWlsZFRvb2xiYXJzKCk7XG5cdFx0dG9vbGJhcnNNYW5hZ2VyID0gbmV3IEl0ZXJhdG9yKHRvb2xiYXJzKTtcblxuXHRcdGhlYWRlciA9IHQuaGVhZGVyID0gdG9vbGJhcnNbMF07XG5cdFx0Zm9vdGVyID0gdC5mb290ZXIgPSB0b29sYmFyc1sxXTtcblxuXHRcdHJlbmRlckhlYWRlcigpO1xuXHRcdHJlbmRlckZvb3RlcigpO1xuXHRcdHJlbmRlclZpZXcodC5vcHRpb25zLmRlZmF1bHRWaWV3KTtcblxuXHRcdGlmICh0Lm9wdGlvbnMuaGFuZGxlV2luZG93UmVzaXplKSB7XG5cdFx0XHR3aW5kb3dSZXNpemVQcm94eSA9IGRlYm91bmNlKHdpbmRvd1Jlc2l6ZSwgdC5vcHRpb25zLndpbmRvd1Jlc2l6ZURlbGF5KTsgLy8gcHJldmVudHMgcmFwaWQgY2FsbHNcblx0XHRcdCQod2luZG93KS5yZXNpemUod2luZG93UmVzaXplUHJveHkpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblxuXHRcdGlmIChjdXJyZW50Vmlldykge1xuXHRcdFx0Y3VycmVudFZpZXcucmVtb3ZlRWxlbWVudCgpO1xuXG5cdFx0XHQvLyBOT1RFOiBkb24ndCBudWxsLW91dCBjdXJyZW50Vmlldy90LnZpZXcgaW4gY2FzZSBBUEkgbWV0aG9kcyBhcmUgY2FsbGVkIGFmdGVyIGRlc3Ryb3kuXG5cdFx0XHQvLyBJdCBpcyBzdGlsbCB0aGUgXCJjdXJyZW50XCIgdmlldywganVzdCBub3QgcmVuZGVyZWQuXG5cdFx0fVxuXG5cdFx0dG9vbGJhcnNNYW5hZ2VyLnByb3h5Q2FsbCgncmVtb3ZlRWxlbWVudCcpO1xuXHRcdGNvbnRlbnQucmVtb3ZlKCk7XG5cdFx0ZWxlbWVudC5yZW1vdmVDbGFzcygnZmMgZmMtbHRyIGZjLXJ0bCBmYy11bnRoZW1lZCB1aS13aWRnZXQnKTtcblxuXHRcdGVsZW1lbnQub2ZmKCcuZmMnKTsgLy8gdW5iaW5kIG5hdiBsaW5rIGhhbmRsZXJzXG5cblx0XHRpZiAod2luZG93UmVzaXplUHJveHkpIHtcblx0XHRcdCQod2luZG93KS51bmJpbmQoJ3Jlc2l6ZScsIHdpbmRvd1Jlc2l6ZVByb3h5KTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGVsZW1lbnRWaXNpYmxlKCkge1xuXHRcdHJldHVybiBlbGVtZW50LmlzKCc6dmlzaWJsZScpO1xuXHR9XG5cblxuXG5cdC8vIFZpZXcgUmVuZGVyaW5nXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHQvLyBSZW5kZXJzIGEgdmlldyBiZWNhdXNlIG9mIGEgZGF0ZSBjaGFuZ2UsIHZpZXctdHlwZSBjaGFuZ2UsIG9yIGZvciB0aGUgZmlyc3QgdGltZS5cblx0Ly8gSWYgbm90IGdpdmVuIGEgdmlld1R5cGUsIGtlZXAgdGhlIGN1cnJlbnQgdmlldyBidXQgcmVuZGVyIGRpZmZlcmVudCBkYXRlcy5cblx0Ly8gQWNjZXB0cyBhbiBvcHRpb25hbCBzY3JvbGwgc3RhdGUgdG8gcmVzdG9yZSB0by5cblx0ZnVuY3Rpb24gcmVuZGVyVmlldyh2aWV3VHlwZSwgZm9yY2VkU2Nyb2xsKSB7XG5cdFx0aWdub3JlV2luZG93UmVzaXplKys7XG5cblx0XHR2YXIgbmVlZHNDbGVhclZpZXcgPSBjdXJyZW50VmlldyAmJiB2aWV3VHlwZSAmJiBjdXJyZW50Vmlldy50eXBlICE9PSB2aWV3VHlwZTtcblxuXHRcdC8vIGlmIHZpZXdUeXBlIGlzIGNoYW5naW5nLCByZW1vdmUgdGhlIG9sZCB2aWV3J3MgcmVuZGVyaW5nXG5cdFx0aWYgKG5lZWRzQ2xlYXJWaWV3KSB7XG5cdFx0XHRmcmVlemVDb250ZW50SGVpZ2h0KCk7IC8vIHByZXZlbnQgYSBzY3JvbGwganVtcCB3aGVuIHZpZXcgZWxlbWVudCBpcyByZW1vdmVkXG5cdFx0XHRjbGVhclZpZXcoKTtcblx0XHR9XG5cblx0XHQvLyBpZiB2aWV3VHlwZSBjaGFuZ2VkLCBvciB0aGUgdmlldyB3YXMgbmV2ZXIgY3JlYXRlZCwgY3JlYXRlIGEgZnJlc2ggdmlld1xuXHRcdGlmICghY3VycmVudFZpZXcgJiYgdmlld1R5cGUpIHtcblx0XHRcdGN1cnJlbnRWaWV3ID0gdC52aWV3ID1cblx0XHRcdFx0dmlld3NCeVR5cGVbdmlld1R5cGVdIHx8XG5cdFx0XHRcdCh2aWV3c0J5VHlwZVt2aWV3VHlwZV0gPSB0Lmluc3RhbnRpYXRlVmlldyh2aWV3VHlwZSkpO1xuXG5cdFx0XHRjdXJyZW50Vmlldy5zZXRFbGVtZW50KFxuXHRcdFx0XHQkKFwiPGRpdiBjbGFzcz0nZmMtdmlldyBmYy1cIiArIHZpZXdUeXBlICsgXCItdmlldycgLz5cIikuYXBwZW5kVG8oY29udGVudClcblx0XHRcdCk7XG5cdFx0XHR0b29sYmFyc01hbmFnZXIucHJveHlDYWxsKCdhY3RpdmF0ZUJ1dHRvbicsIHZpZXdUeXBlKTtcblx0XHR9XG5cblx0XHRpZiAoY3VycmVudFZpZXcpIHtcblxuXHRcdFx0Ly8gaW4gY2FzZSB0aGUgdmlldyBzaG91bGQgcmVuZGVyIGEgcGVyaW9kIG9mIHRpbWUgdGhhdCBpcyBjb21wbGV0ZWx5IGhpZGRlblxuXHRcdFx0ZGF0ZSA9IGN1cnJlbnRWaWV3Lm1hc3NhZ2VDdXJyZW50RGF0ZShkYXRlKTtcblxuXHRcdFx0Ly8gcmVuZGVyIG9yIHJlcmVuZGVyIHRoZSB2aWV3XG5cdFx0XHRpZiAoXG5cdFx0XHRcdCFjdXJyZW50Vmlldy5pc0RhdGVTZXQgfHxcblx0XHRcdFx0ISggLy8gTk9UIHdpdGhpbiBpbnRlcnZhbCByYW5nZSBzaWduYWxzIGFuIGltcGxpY2l0IGRhdGUgd2luZG93IGNoYW5nZVxuXHRcdFx0XHRcdGRhdGUgPj0gY3VycmVudFZpZXcuaW50ZXJ2YWxTdGFydCAmJlxuXHRcdFx0XHRcdGRhdGUgPCBjdXJyZW50Vmlldy5pbnRlcnZhbEVuZFxuXHRcdFx0XHQpXG5cdFx0XHQpIHtcblx0XHRcdFx0aWYgKGVsZW1lbnRWaXNpYmxlKCkpIHtcblxuXHRcdFx0XHRcdGlmIChmb3JjZWRTY3JvbGwpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRWaWV3LmNhcHR1cmVJbml0aWFsU2Nyb2xsKGZvcmNlZFNjcm9sbCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y3VycmVudFZpZXcuc2V0RGF0ZShkYXRlLCBmb3JjZWRTY3JvbGwpO1xuXG5cdFx0XHRcdFx0aWYgKGZvcmNlZFNjcm9sbCkge1xuXHRcdFx0XHRcdFx0Y3VycmVudFZpZXcucmVsZWFzZVNjcm9sbCgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIG5lZWQgdG8gZG8gdGhpcyBhZnRlciBWaWV3OjpyZW5kZXIsIHNvIGRhdGVzIGFyZSBjYWxjdWxhdGVkXG5cdFx0XHRcdFx0Ly8gTk9URTogdmlldyB1cGRhdGVzIHRpdGxlIHRleHQgcHJvYWN0aXZlbHlcblx0XHRcdFx0XHR1cGRhdGVUb29sYmFyc1RvZGF5QnV0dG9uKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAobmVlZHNDbGVhclZpZXcpIHtcblx0XHRcdHRoYXdDb250ZW50SGVpZ2h0KCk7XG5cdFx0fVxuXG5cdFx0aWdub3JlV2luZG93UmVzaXplLS07XG5cdH1cblxuXG5cdC8vIFVucmVuZGVycyB0aGUgY3VycmVudCB2aWV3IGFuZCByZWZsZWN0cyB0aGlzIGNoYW5nZSBpbiB0aGUgSGVhZGVyLlxuXHQvLyBVbnJlZ3NpdGVycyB0aGUgYGN1cnJlbnRWaWV3YCwgYnV0IGRvZXMgbm90IHJlbW92ZSBmcm9tIHZpZXdCeVR5cGUgaGFzaC5cblx0ZnVuY3Rpb24gY2xlYXJWaWV3KCkge1xuXHRcdHRvb2xiYXJzTWFuYWdlci5wcm94eUNhbGwoJ2RlYWN0aXZhdGVCdXR0b24nLCBjdXJyZW50Vmlldy50eXBlKTtcblx0XHRjdXJyZW50Vmlldy5yZW1vdmVFbGVtZW50KCk7XG5cdFx0Y3VycmVudFZpZXcgPSB0LnZpZXcgPSBudWxsO1xuXHR9XG5cblxuXHQvLyBEZXN0cm95cyB0aGUgdmlldywgaW5jbHVkaW5nIHRoZSB2aWV3IG9iamVjdC4gVGhlbiwgcmUtaW5zdGFudGlhdGVzIGl0IGFuZCByZW5kZXJzIGl0LlxuXHQvLyBNYWludGFpbnMgdGhlIHNhbWUgc2Nyb2xsIHN0YXRlLlxuXHQvLyBUT0RPOiBtYWludGFpbiBhbnkgb3RoZXIgdXNlci1tYW5pcHVsYXRlZCBzdGF0ZS5cblx0ZnVuY3Rpb24gcmVpbml0VmlldygpIHtcblx0XHRpZ25vcmVXaW5kb3dSZXNpemUrKztcblx0XHRmcmVlemVDb250ZW50SGVpZ2h0KCk7XG5cblx0XHR2YXIgdmlld1R5cGUgPSBjdXJyZW50Vmlldy50eXBlO1xuXHRcdHZhciBzY3JvbGxTdGF0ZSA9IGN1cnJlbnRWaWV3LnF1ZXJ5U2Nyb2xsKCk7XG5cdFx0Y2xlYXJWaWV3KCk7XG5cdFx0Y2FsY1NpemUoKTtcblx0XHRyZW5kZXJWaWV3KHZpZXdUeXBlLCBzY3JvbGxTdGF0ZSk7XG5cblx0XHR0aGF3Q29udGVudEhlaWdodCgpO1xuXHRcdGlnbm9yZVdpbmRvd1Jlc2l6ZS0tO1xuXHR9XG5cblxuXG5cdC8vIFJlc2l6aW5nXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXHR0LmdldFN1Z2dlc3RlZFZpZXdIZWlnaHQgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoc3VnZ2VzdGVkVmlld0hlaWdodCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRjYWxjU2l6ZSgpO1xuXHRcdH1cblx0XHRyZXR1cm4gc3VnZ2VzdGVkVmlld0hlaWdodDtcblx0fTtcblxuXG5cdHQuaXNIZWlnaHRBdXRvID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHQub3B0aW9ucy5jb250ZW50SGVpZ2h0ID09PSAnYXV0bycgfHwgdC5vcHRpb25zLmhlaWdodCA9PT0gJ2F1dG8nO1xuXHR9O1xuXG5cblx0ZnVuY3Rpb24gdXBkYXRlU2l6ZShzaG91bGRSZWNhbGMpIHtcblx0XHRpZiAoZWxlbWVudFZpc2libGUoKSkge1xuXG5cdFx0XHRpZiAoc2hvdWxkUmVjYWxjKSB7XG5cdFx0XHRcdF9jYWxjU2l6ZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZ25vcmVXaW5kb3dSZXNpemUrKztcblx0XHRcdGN1cnJlbnRWaWV3LnVwZGF0ZVNpemUodHJ1ZSk7IC8vIGlzUmVzaXplPXRydWUuIHdpbGwgcG9sbCBnZXRTdWdnZXN0ZWRWaWV3SGVpZ2h0KCkgYW5kIGlzSGVpZ2h0QXV0bygpXG5cdFx0XHRpZ25vcmVXaW5kb3dSZXNpemUtLTtcblxuXHRcdFx0cmV0dXJuIHRydWU7IC8vIHNpZ25hbCBzdWNjZXNzXG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBjYWxjU2l6ZSgpIHtcblx0XHRpZiAoZWxlbWVudFZpc2libGUoKSkge1xuXHRcdFx0X2NhbGNTaXplKCk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBfY2FsY1NpemUoKSB7IC8vIGFzc3VtZXMgZWxlbWVudFZpc2libGVcblx0XHR2YXIgY29udGVudEhlaWdodElucHV0ID0gdC5vcHRpb25zLmNvbnRlbnRIZWlnaHQ7XG5cdFx0dmFyIGhlaWdodElucHV0ID0gdC5vcHRpb25zLmhlaWdodDtcblxuXHRcdGlmICh0eXBlb2YgY29udGVudEhlaWdodElucHV0ID09PSAnbnVtYmVyJykgeyAvLyBleGlzdHMgYW5kIG5vdCAnYXV0bydcblx0XHRcdHN1Z2dlc3RlZFZpZXdIZWlnaHQgPSBjb250ZW50SGVpZ2h0SW5wdXQ7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHR5cGVvZiBjb250ZW50SGVpZ2h0SW5wdXQgPT09ICdmdW5jdGlvbicpIHsgLy8gZXhpc3RzIGFuZCBpcyBhIGZ1bmN0aW9uXG5cdFx0XHRzdWdnZXN0ZWRWaWV3SGVpZ2h0ID0gY29udGVudEhlaWdodElucHV0KCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHR5cGVvZiBoZWlnaHRJbnB1dCA9PT0gJ251bWJlcicpIHsgLy8gZXhpc3RzIGFuZCBub3QgJ2F1dG8nXG5cdFx0XHRzdWdnZXN0ZWRWaWV3SGVpZ2h0ID0gaGVpZ2h0SW5wdXQgLSBxdWVyeVRvb2xiYXJzSGVpZ2h0KCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHR5cGVvZiBoZWlnaHRJbnB1dCA9PT0gJ2Z1bmN0aW9uJykgeyAvLyBleGlzdHMgYW5kIGlzIGEgZnVuY3Rpb25cblx0XHRcdHN1Z2dlc3RlZFZpZXdIZWlnaHQgPSBoZWlnaHRJbnB1dCgpIC0gcXVlcnlUb29sYmFyc0hlaWdodCgpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChoZWlnaHRJbnB1dCA9PT0gJ3BhcmVudCcpIHsgLy8gc2V0IHRvIGhlaWdodCBvZiBwYXJlbnQgZWxlbWVudFxuXHRcdFx0c3VnZ2VzdGVkVmlld0hlaWdodCA9IGVsZW1lbnQucGFyZW50KCkuaGVpZ2h0KCkgLSBxdWVyeVRvb2xiYXJzSGVpZ2h0KCk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0c3VnZ2VzdGVkVmlld0hlaWdodCA9IE1hdGgucm91bmQoY29udGVudC53aWR0aCgpIC8gTWF0aC5tYXgodC5vcHRpb25zLmFzcGVjdFJhdGlvLCAuNSkpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gcXVlcnlUb29sYmFyc0hlaWdodCgpIHtcblx0XHRyZXR1cm4gdG9vbGJhcnNNYW5hZ2VyLml0ZW1zLnJlZHVjZShmdW5jdGlvbihhY2N1bXVsYXRvciwgdG9vbGJhcikge1xuXHRcdFx0dmFyIHRvb2xiYXJIZWlnaHQgPSB0b29sYmFyLmVsID8gdG9vbGJhci5lbC5vdXRlckhlaWdodCh0cnVlKSA6IDA7IC8vIGluY2x1ZGVzIG1hcmdpblxuXHRcdFx0cmV0dXJuIGFjY3VtdWxhdG9yICsgdG9vbGJhckhlaWdodDtcblx0XHR9LCAwKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gd2luZG93UmVzaXplKGV2KSB7XG5cdFx0aWYgKFxuXHRcdFx0IWlnbm9yZVdpbmRvd1Jlc2l6ZSAmJlxuXHRcdFx0ZXYudGFyZ2V0ID09PSB3aW5kb3cgJiYgLy8gc28gd2UgZG9uJ3QgcHJvY2VzcyBqcXVpIFwicmVzaXplXCIgZXZlbnRzIHRoYXQgaGF2ZSBidWJibGVkIHVwXG5cdFx0XHRjdXJyZW50Vmlldy5zdGFydCAvLyB2aWV3IGhhcyBhbHJlYWR5IGJlZW4gcmVuZGVyZWRcblx0XHQpIHtcblx0XHRcdGlmICh1cGRhdGVTaXplKHRydWUpKSB7XG5cdFx0XHRcdGN1cnJlbnRWaWV3LnB1YmxpY2x5VHJpZ2dlcignd2luZG93UmVzaXplJywgX2VsZW1lbnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cblxuXHQvKiBFdmVudCBSZW5kZXJpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0ZnVuY3Rpb24gcmVyZW5kZXJFdmVudHMoKSB7IC8vIEFQSSBtZXRob2QuIGRlc3Ryb3lzIG9sZCBldmVudHMgaWYgcHJldmlvdXNseSByZW5kZXJlZC5cblx0XHRpZiAoZWxlbWVudFZpc2libGUoKSkge1xuXHRcdFx0dC5yZXBvcnRFdmVudENoYW5nZSgpOyAvLyB3aWxsIHJlLXRyYXNtaXQgZXZlbnRzIHRvIHRoZSB2aWV3LCBjYXVzaW5nIGEgcmVyZW5kZXJcblx0XHR9XG5cdH1cblxuXG5cblx0LyogVG9vbGJhcnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0ZnVuY3Rpb24gYnVpbGRUb29sYmFycygpIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0bmV3IFRvb2xiYXIodCwgY29tcHV0ZUhlYWRlck9wdGlvbnMoKSksXG5cdFx0XHRuZXcgVG9vbGJhcih0LCBjb21wdXRlRm9vdGVyT3B0aW9ucygpKVxuXHRcdF07XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGNvbXB1dGVIZWFkZXJPcHRpb25zKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRleHRyYUNsYXNzZXM6ICdmYy1oZWFkZXItdG9vbGJhcicsXG5cdFx0XHRsYXlvdXQ6IHQub3B0aW9ucy5oZWFkZXJcblx0XHR9O1xuXHR9XG5cblxuXHRmdW5jdGlvbiBjb21wdXRlRm9vdGVyT3B0aW9ucygpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0ZXh0cmFDbGFzc2VzOiAnZmMtZm9vdGVyLXRvb2xiYXInLFxuXHRcdFx0bGF5b3V0OiB0Lm9wdGlvbnMuZm9vdGVyXG5cdFx0fTtcblx0fVxuXG5cblx0Ly8gY2FuIGJlIGNhbGxlZCByZXBlYXRlZGx5IGFuZCBIZWFkZXIgd2lsbCByZXJlbmRlclxuXHRmdW5jdGlvbiByZW5kZXJIZWFkZXIoKSB7XG5cdFx0aGVhZGVyLnNldFRvb2xiYXJPcHRpb25zKGNvbXB1dGVIZWFkZXJPcHRpb25zKCkpO1xuXHRcdGhlYWRlci5yZW5kZXIoKTtcblx0XHRpZiAoaGVhZGVyLmVsKSB7XG5cdFx0XHRlbGVtZW50LnByZXBlbmQoaGVhZGVyLmVsKTtcblx0XHR9XG5cdH1cblxuXG5cdC8vIGNhbiBiZSBjYWxsZWQgcmVwZWF0ZWRseSBhbmQgRm9vdGVyIHdpbGwgcmVyZW5kZXJcblx0ZnVuY3Rpb24gcmVuZGVyRm9vdGVyKCkge1xuXHRcdGZvb3Rlci5zZXRUb29sYmFyT3B0aW9ucyhjb21wdXRlRm9vdGVyT3B0aW9ucygpKTtcblx0XHRmb290ZXIucmVuZGVyKCk7XG5cdFx0aWYgKGZvb3Rlci5lbCkge1xuXHRcdFx0ZWxlbWVudC5hcHBlbmQoZm9vdGVyLmVsKTtcblx0XHR9XG5cdH1cblxuXG5cdHQuc2V0VG9vbGJhcnNUaXRsZSA9IGZ1bmN0aW9uKHRpdGxlKSB7XG5cdFx0dG9vbGJhcnNNYW5hZ2VyLnByb3h5Q2FsbCgndXBkYXRlVGl0bGUnLCB0aXRsZSk7XG5cdH07XG5cblxuXHRmdW5jdGlvbiB1cGRhdGVUb29sYmFyc1RvZGF5QnV0dG9uKCkge1xuXHRcdHZhciBub3cgPSB0LmdldE5vdygpO1xuXHRcdGlmIChub3cgPj0gY3VycmVudFZpZXcuaW50ZXJ2YWxTdGFydCAmJiBub3cgPCBjdXJyZW50Vmlldy5pbnRlcnZhbEVuZCkge1xuXHRcdFx0dG9vbGJhcnNNYW5hZ2VyLnByb3h5Q2FsbCgnZGlzYWJsZUJ1dHRvbicsICd0b2RheScpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRvb2xiYXJzTWFuYWdlci5wcm94eUNhbGwoJ2VuYWJsZUJ1dHRvbicsICd0b2RheScpO1xuXHRcdH1cblx0fVxuXG5cblxuXHQvKiBTZWxlY3Rpb25cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gdGhpcyBwdWJsaWMgbWV0aG9kIHJlY2VpdmVzIHN0YXJ0L2VuZCBkYXRlcyBpbiBhbnkgZm9ybWF0LCB3aXRoIGFueSB0aW1lem9uZVxuXHRmdW5jdGlvbiBzZWxlY3Qoem9uZWRTdGFydElucHV0LCB6b25lZEVuZElucHV0KSB7XG5cdFx0Y3VycmVudFZpZXcuc2VsZWN0KFxuXHRcdFx0dC5idWlsZFNlbGVjdFNwYW4uYXBwbHkodCwgYXJndW1lbnRzKVxuXHRcdCk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHVuc2VsZWN0KCkgeyAvLyBzYWZlIHRvIGJlIGNhbGxlZCBiZWZvcmUgcmVuZGVyVmlld1xuXHRcdGlmIChjdXJyZW50Vmlldykge1xuXHRcdFx0Y3VycmVudFZpZXcudW5zZWxlY3QoKTtcblx0XHR9XG5cdH1cblxuXG5cblx0LyogRGF0ZVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRmdW5jdGlvbiBwcmV2KCkge1xuXHRcdGRhdGUgPSBjdXJyZW50Vmlldy5jb21wdXRlUHJldkRhdGUoZGF0ZSk7XG5cdFx0cmVuZGVyVmlldygpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBuZXh0KCkge1xuXHRcdGRhdGUgPSBjdXJyZW50Vmlldy5jb21wdXRlTmV4dERhdGUoZGF0ZSk7XG5cdFx0cmVuZGVyVmlldygpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBwcmV2WWVhcigpIHtcblx0XHRkYXRlLmFkZCgtMSwgJ3llYXJzJyk7XG5cdFx0cmVuZGVyVmlldygpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBuZXh0WWVhcigpIHtcblx0XHRkYXRlLmFkZCgxLCAneWVhcnMnKTtcblx0XHRyZW5kZXJWaWV3KCk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHRvZGF5KCkge1xuXHRcdGRhdGUgPSB0LmdldE5vdygpO1xuXHRcdHJlbmRlclZpZXcoKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gZ290b0RhdGUoem9uZWREYXRlSW5wdXQpIHtcblx0XHRkYXRlID0gdC5tb21lbnQoem9uZWREYXRlSW5wdXQpLnN0cmlwWm9uZSgpO1xuXHRcdHJlbmRlclZpZXcoKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gaW5jcmVtZW50RGF0ZShkZWx0YSkge1xuXHRcdGRhdGUuYWRkKG1vbWVudC5kdXJhdGlvbihkZWx0YSkpO1xuXHRcdHJlbmRlclZpZXcoKTtcblx0fVxuXG5cblx0Ly8gRm9yY2VzIG5hdmlnYXRpb24gdG8gYSB2aWV3IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cblx0Ly8gYHZpZXdUeXBlYCBjYW4gYmUgYSBzcGVjaWZpYyB2aWV3IG5hbWUgb3IgYSBnZW5lcmljIG9uZSBsaWtlIFwid2Vla1wiIG9yIFwiZGF5XCIuXG5cdGZ1bmN0aW9uIHpvb21UbyhuZXdEYXRlLCB2aWV3VHlwZSkge1xuXHRcdHZhciBzcGVjO1xuXG5cdFx0dmlld1R5cGUgPSB2aWV3VHlwZSB8fCAnZGF5JzsgLy8gZGF5IGlzIGRlZmF1bHQgem9vbVxuXHRcdHNwZWMgPSB0LmdldFZpZXdTcGVjKHZpZXdUeXBlKSB8fCB0LmdldFVuaXRWaWV3U3BlYyh2aWV3VHlwZSk7XG5cblx0XHRkYXRlID0gbmV3RGF0ZS5jbG9uZSgpO1xuXHRcdHJlbmRlclZpZXcoc3BlYyA/IHNwZWMudHlwZSA6IG51bGwpO1xuXHR9XG5cblxuXHQvLyBmb3IgZXh0ZXJuYWwgQVBJXG5cdGZ1bmN0aW9uIGdldERhdGUoKSB7XG5cdFx0cmV0dXJuIHQuYXBwbHlUaW1lem9uZShkYXRlKTsgLy8gaW5mdXNlIHRoZSBjYWxlbmRhcidzIHRpbWV6b25lXG5cdH1cblxuXG5cblx0LyogSGVpZ2h0IFwiRnJlZXppbmdcIlxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHR0LmZyZWV6ZUNvbnRlbnRIZWlnaHQgPSBmcmVlemVDb250ZW50SGVpZ2h0O1xuXHR0LnRoYXdDb250ZW50SGVpZ2h0ID0gdGhhd0NvbnRlbnRIZWlnaHQ7XG5cblx0dmFyIGZyZWV6ZUNvbnRlbnRIZWlnaHREZXB0aCA9IDA7XG5cblxuXHRmdW5jdGlvbiBmcmVlemVDb250ZW50SGVpZ2h0KCkge1xuXHRcdGlmICghKGZyZWV6ZUNvbnRlbnRIZWlnaHREZXB0aCsrKSkge1xuXHRcdFx0Y29udGVudC5jc3Moe1xuXHRcdFx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdFx0XHRoZWlnaHQ6IGNvbnRlbnQuaGVpZ2h0KCksXG5cdFx0XHRcdG92ZXJmbG93OiAnaGlkZGVuJ1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiB0aGF3Q29udGVudEhlaWdodCgpIHtcblx0XHRpZiAoISgtLWZyZWV6ZUNvbnRlbnRIZWlnaHREZXB0aCkpIHtcblx0XHRcdGNvbnRlbnQuY3NzKHtcblx0XHRcdFx0d2lkdGg6ICcnLFxuXHRcdFx0XHRoZWlnaHQ6ICcnLFxuXHRcdFx0XHRvdmVyZmxvdzogJydcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cblxuXHQvKiBNaXNjXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdGZ1bmN0aW9uIGdldENhbGVuZGFyKCkge1xuXHRcdHJldHVybiB0O1xuXHR9XG5cblxuXHRmdW5jdGlvbiBnZXRWaWV3KCkge1xuXHRcdHJldHVybiBjdXJyZW50Vmlldztcblx0fVxuXG5cblx0ZnVuY3Rpb24gb3B0aW9uKG5hbWUsIHZhbHVlKSB7XG5cdFx0dmFyIG5ld09wdGlvbkhhc2g7XG5cblx0XHRpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgeyAvLyBnZXR0ZXJcblx0XHRcdFx0cmV0dXJuIHQub3B0aW9uc1tuYW1lXTtcblx0XHRcdH1cblx0XHRcdGVsc2UgeyAvLyBzZXR0ZXIgZm9yIGluZGl2aWR1YWwgb3B0aW9uXG5cdFx0XHRcdG5ld09wdGlvbkhhc2ggPSB7fTtcblx0XHRcdFx0bmV3T3B0aW9uSGFzaFtuYW1lXSA9IHZhbHVlO1xuXHRcdFx0XHRzZXRPcHRpb25zKG5ld09wdGlvbkhhc2gpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHsgLy8gY29tcG91bmQgc2V0dGVyIHdpdGggb2JqZWN0IGlucHV0XG5cdFx0XHRzZXRPcHRpb25zKG5hbWUpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gc2V0T3B0aW9ucyhuZXdPcHRpb25IYXNoKSB7XG5cdFx0dmFyIG9wdGlvbkNudCA9IDA7XG5cdFx0dmFyIG9wdGlvbk5hbWU7XG5cblx0XHRmb3IgKG9wdGlvbk5hbWUgaW4gbmV3T3B0aW9uSGFzaCkge1xuXHRcdFx0dC5keW5hbWljT3ZlcnJpZGVzW29wdGlvbk5hbWVdID0gbmV3T3B0aW9uSGFzaFtvcHRpb25OYW1lXTtcblx0XHR9XG5cblx0XHR0LnZpZXdTcGVjQ2FjaGUgPSB7fTsgLy8gdGhlIGR5bmFtaWMgb3ZlcnJpZGUgaW52YWxpZGF0ZXMgdGhlIG9wdGlvbnMgaW4gdGhpcyBjYWNoZSwgc28ganVzdCBjbGVhciBpdFxuXHRcdHQucG9wdWxhdGVPcHRpb25zSGFzaCgpOyAvLyB0aGlzLm9wdGlvbnMgbmVlZHMgdG8gYmUgcmVjb21wdXRlZCBhZnRlciB0aGUgZHluYW1pYyBvdmVycmlkZVxuXG5cdFx0Ly8gdHJpZ2dlciBoYW5kbGVycyBhZnRlciB0aGlzLm9wdGlvbnMgaGFzIGJlZW4gdXBkYXRlZFxuXHRcdGZvciAob3B0aW9uTmFtZSBpbiBuZXdPcHRpb25IYXNoKSB7XG5cdFx0XHR0LnRyaWdnZXJPcHRpb25IYW5kbGVycyhvcHRpb25OYW1lKTsgLy8gcmVjYWxsIGJpbmRPcHRpb24vYmluZE9wdGlvbnNcblx0XHRcdG9wdGlvbkNudCsrO1xuXHRcdH1cblxuXHRcdC8vIHNwZWNpYWwtY2FzZSBoYW5kbGluZyBvZiBzaW5nbGUgb3B0aW9uIGNoYW5nZS5cblx0XHQvLyBpZiBvbmx5IG9uZSBvcHRpb24gY2hhbmdlLCBgb3B0aW9uTmFtZWAgd2lsbCBiZSBpdHMgbmFtZS5cblx0XHRpZiAob3B0aW9uQ250ID09PSAxKSB7XG5cdFx0XHRpZiAob3B0aW9uTmFtZSA9PT0gJ2hlaWdodCcgfHwgb3B0aW9uTmFtZSA9PT0gJ2NvbnRlbnRIZWlnaHQnIHx8IG9wdGlvbk5hbWUgPT09ICdhc3BlY3RSYXRpbycpIHtcblx0XHRcdFx0dXBkYXRlU2l6ZSh0cnVlKTsgLy8gdHJ1ZSA9IGFsbG93IHJlY2FsY3VsYXRpb24gb2YgaGVpZ2h0XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKG9wdGlvbk5hbWUgPT09ICdkZWZhdWx0RGF0ZScpIHtcblx0XHRcdFx0cmV0dXJuOyAvLyBjYW4ndCBjaGFuZ2UgZGF0ZSB0aGlzIHdheS4gdXNlIGdvdG9EYXRlIGluc3RlYWRcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKG9wdGlvbk5hbWUgPT09ICdidXNpbmVzc0hvdXJzJykge1xuXHRcdFx0XHRpZiAoY3VycmVudFZpZXcpIHtcblx0XHRcdFx0XHRjdXJyZW50Vmlldy51bnJlbmRlckJ1c2luZXNzSG91cnMoKTtcblx0XHRcdFx0XHRjdXJyZW50Vmlldy5yZW5kZXJCdXNpbmVzc0hvdXJzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAob3B0aW9uTmFtZSA9PT0gJ3RpbWV6b25lJykge1xuXHRcdFx0XHR0LnJlem9uZUFycmF5RXZlbnRTb3VyY2VzKCk7XG5cdFx0XHRcdHQucmVmZXRjaEV2ZW50cygpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gY2F0Y2gtYWxsLiByZXJlbmRlciB0aGUgaGVhZGVyIGFuZCBmb290ZXIgYW5kIHJlYnVpbGQvcmVyZW5kZXIgdGhlIGN1cnJlbnQgdmlld1xuXHRcdHJlbmRlckhlYWRlcigpO1xuXHRcdHJlbmRlckZvb3RlcigpO1xuXHRcdHZpZXdzQnlUeXBlID0ge307IC8vIGV2ZW4gbm9uLWN1cnJlbnQgdmlld3Mgd2lsbCBiZSBhZmZlY3RlZCBieSB0aGlzIG9wdGlvbiBjaGFuZ2UuIGRvIGJlZm9yZSByZXJlbmRlclxuXHRcdHJlaW5pdFZpZXcoKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gcHVibGljbHlUcmlnZ2VyKG5hbWUsIHRoaXNPYmopIHtcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG5cblx0XHR0aGlzT2JqID0gdGhpc09iaiB8fCBfZWxlbWVudDtcblx0XHR0aGlzLnRyaWdnZXJXaXRoKG5hbWUsIHRoaXNPYmosIGFyZ3MpOyAvLyBFbWl0dGVyJ3MgbWV0aG9kXG5cblx0XHRpZiAodC5vcHRpb25zW25hbWVdKSB7XG5cdFx0XHRyZXR1cm4gdC5vcHRpb25zW25hbWVdLmFwcGx5KHRoaXNPYmosIGFyZ3MpO1xuXHRcdH1cblx0fVxuXG5cdHQuaW5pdGlhbGl6ZSgpO1xufVxuXG47O1xuLypcbk9wdGlvbnMgYmluZGluZy90cmlnZ2VyaW5nIHN5c3RlbS5cbiovXG5DYWxlbmRhci5taXhpbih7XG5cblx0Ly8gQSBtYXAgb2Ygb3B0aW9uIG5hbWVzIHRvIGFycmF5cyBvZiBoYW5kbGVyIG9iamVjdHMuIEluaXRpYWxpemVkIHRvIHt9IGluIENhbGVuZGFyLlxuXHQvLyBGb3JtYXQgZm9yIGEgaGFuZGxlciBvYmplY3Q6XG5cdC8vIHtcblx0Ly8gICBmdW5jIC8vIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB1cG9uIGNoYW5nZVxuXHQvLyAgIG5hbWVzIC8vIG9wdGlvbiBuYW1lcyB3aG9zZSB2YWx1ZXMgc2hvdWxkIGJlIGdpdmVuIHRvIGZ1bmNcblx0Ly8gfVxuXHRvcHRpb25IYW5kbGVyczogbnVsbCxcblxuXHQvLyBDYWxscyBoYW5kbGVyRnVuYyBpbW1lZGlhdGVseSwgYW5kIHdoZW4gdGhlIGdpdmVuIG9wdGlvbiBoYXMgY2hhbmdlZC5cblx0Ly8gaGFuZGxlckZ1bmMgd2lsbCBiZSBnaXZlbiB0aGUgb3B0aW9uIHZhbHVlLlxuXHRiaW5kT3B0aW9uOiBmdW5jdGlvbihvcHRpb25OYW1lLCBoYW5kbGVyRnVuYykge1xuXHRcdHRoaXMuYmluZE9wdGlvbnMoWyBvcHRpb25OYW1lIF0sIGhhbmRsZXJGdW5jKTtcblx0fSxcblxuXHQvLyBDYWxscyBoYW5kbGVyRnVuYyBpbW1lZGlhdGVseSwgYW5kIHdoZW4gYW55IG9mIHRoZSBnaXZlbiBvcHRpb25zIGNoYW5nZS5cblx0Ly8gaGFuZGxlckZ1bmMgd2lsbCBiZSBnaXZlbiBlYWNoIG9wdGlvbiB2YWx1ZSBhcyBvcmRlcmVkIGZ1bmN0aW9uIGFyZ3VtZW50cy5cblx0YmluZE9wdGlvbnM6IGZ1bmN0aW9uKG9wdGlvbk5hbWVzLCBoYW5kbGVyRnVuYykge1xuXHRcdHZhciBoYW5kbGVyT2JqID0geyBmdW5jOiBoYW5kbGVyRnVuYywgbmFtZXM6IG9wdGlvbk5hbWVzIH07XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgb3B0aW9uTmFtZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRoaXMucmVnaXN0ZXJPcHRpb25IYW5kbGVyT2JqKG9wdGlvbk5hbWVzW2ldLCBoYW5kbGVyT2JqKTtcblx0XHR9XG5cblx0XHR0aGlzLnRyaWdnZXJPcHRpb25IYW5kbGVyT2JqKGhhbmRsZXJPYmopO1xuXHR9LFxuXG5cdC8vIFB1dHMgdGhlIGdpdmVuIGhhbmRsZXIgb2JqZWN0IGludG8gdGhlIGludGVybmFsIGhhc2hcblx0cmVnaXN0ZXJPcHRpb25IYW5kbGVyT2JqOiBmdW5jdGlvbihvcHRpb25OYW1lLCBoYW5kbGVyT2JqKSB7XG5cdFx0KHRoaXMub3B0aW9uSGFuZGxlcnNbb3B0aW9uTmFtZV0gfHwgKHRoaXMub3B0aW9uSGFuZGxlcnNbb3B0aW9uTmFtZV0gPSBbXSkpXG5cdFx0XHQucHVzaChoYW5kbGVyT2JqKTtcblx0fSxcblxuXHQvLyBSZXBvcnRzIHRoYXQgdGhlIGdpdmVuIG9wdGlvbiBoYXMgY2hhbmdlZCwgYW5kIGNhbGxzIGFsbCBhcHByb3ByaWF0ZSBoYW5kbGVycy5cblx0dHJpZ2dlck9wdGlvbkhhbmRsZXJzOiBmdW5jdGlvbihvcHRpb25OYW1lKSB7XG5cdFx0dmFyIGhhbmRsZXJPYmpzID0gdGhpcy5vcHRpb25IYW5kbGVyc1tvcHRpb25OYW1lXSB8fCBbXTtcblx0XHR2YXIgaTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBoYW5kbGVyT2Jqcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dGhpcy50cmlnZ2VyT3B0aW9uSGFuZGxlck9iaihoYW5kbGVyT2Jqc1tpXSk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIENhbGxzIHRoZSBjYWxsYmFjayBmb3IgYSBzcGVjaWZpYyBoYW5kbGVyIG9iamVjdCwgcGFzc2luZyBpbiB0aGUgYXBwcm9wcmlhdGUgYXJndW1lbnRzLlxuXHR0cmlnZ2VyT3B0aW9uSGFuZGxlck9iajogZnVuY3Rpb24oaGFuZGxlck9iaikge1xuXHRcdHZhciBvcHRpb25OYW1lcyA9IGhhbmRsZXJPYmoubmFtZXM7XG5cdFx0dmFyIG9wdGlvblZhbHVlcyA9IFtdO1xuXHRcdHZhciBpO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IG9wdGlvbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRvcHRpb25WYWx1ZXMucHVzaCh0aGlzLm9wdGlvbnNbb3B0aW9uTmFtZXNbaV1dKTtcblx0XHR9XG5cblx0XHRoYW5kbGVyT2JqLmZ1bmMuYXBwbHkodGhpcywgb3B0aW9uVmFsdWVzKTsgLy8gbWFpbnRhaW4gdGhlIENhbGVuZGFyJ3MgYHRoaXNgIGNvbnRleHRcblx0fVxuXG59KTtcblxuOztcblxuQ2FsZW5kYXIuZGVmYXVsdHMgPSB7XG5cblx0dGl0bGVSYW5nZVNlcGFyYXRvcjogJyBcXHUyMDEzICcsIC8vIGVuIGRhc2hcblx0bW9udGhZZWFyRm9ybWF0OiAnTU1NTSBZWVlZJywgLy8gcmVxdWlyZWQgZm9yIGVuLiBvdGhlciBsb2NhbGVzIHJlbHkgb24gZGF0ZXBpY2tlciBjb21wdXRhYmxlIG9wdGlvblxuXG5cdGRlZmF1bHRUaW1lZEV2ZW50RHVyYXRpb246ICcwMjowMDowMCcsXG5cdGRlZmF1bHRBbGxEYXlFdmVudER1cmF0aW9uOiB7IGRheXM6IDEgfSxcblx0Zm9yY2VFdmVudER1cmF0aW9uOiBmYWxzZSxcblx0bmV4dERheVRocmVzaG9sZDogJzA5OjAwOjAwJywgLy8gOWFtXG5cblx0Ly8gZGlzcGxheVxuXHRkZWZhdWx0VmlldzogJ21vbnRoJyxcblx0YXNwZWN0UmF0aW86IDEuMzUsXG5cdGhlYWRlcjoge1xuXHRcdGxlZnQ6ICd0aXRsZScsXG5cdFx0Y2VudGVyOiAnJyxcblx0XHRyaWdodDogJ3RvZGF5IHByZXYsbmV4dCdcblx0fSxcblx0d2Vla2VuZHM6IHRydWUsXG5cdHdlZWtOdW1iZXJzOiBmYWxzZSxcblxuXHR3ZWVrTnVtYmVyVGl0bGU6ICdXJyxcblx0d2Vla051bWJlckNhbGN1bGF0aW9uOiAnbG9jYWwnLFxuXG5cdC8vZWRpdGFibGU6IGZhbHNlLFxuXG5cdC8vbm93SW5kaWNhdG9yOiBmYWxzZSxcblxuXHRzY3JvbGxUaW1lOiAnMDY6MDA6MDAnLFxuXG5cdC8vIGV2ZW50IGFqYXhcblx0bGF6eUZldGNoaW5nOiB0cnVlLFxuXHRzdGFydFBhcmFtOiAnc3RhcnQnLFxuXHRlbmRQYXJhbTogJ2VuZCcsXG5cdHRpbWV6b25lUGFyYW06ICd0aW1lem9uZScsXG5cblx0dGltZXpvbmU6IGZhbHNlLFxuXG5cdC8vYWxsRGF5RGVmYXVsdDogdW5kZWZpbmVkLFxuXG5cdC8vIGxvY2FsZVxuXHRpc1JUTDogZmFsc2UsXG5cdGJ1dHRvblRleHQ6IHtcblx0XHRwcmV2OiBcInByZXZcIixcblx0XHRuZXh0OiBcIm5leHRcIixcblx0XHRwcmV2WWVhcjogXCJwcmV2IHllYXJcIixcblx0XHRuZXh0WWVhcjogXCJuZXh0IHllYXJcIixcblx0XHR5ZWFyOiAneWVhcicsIC8vIFRPRE86IGxvY2FsZSBmaWxlcyBuZWVkIHRvIHNwZWNpZnkgdGhpc1xuXHRcdHRvZGF5OiAndG9kYXknLFxuXHRcdG1vbnRoOiAnbW9udGgnLFxuXHRcdHdlZWs6ICd3ZWVrJyxcblx0XHRkYXk6ICdkYXknXG5cdH0sXG5cblx0YnV0dG9uSWNvbnM6IHtcblx0XHRwcmV2OiAnbGVmdC1zaW5nbGUtYXJyb3cnLFxuXHRcdG5leHQ6ICdyaWdodC1zaW5nbGUtYXJyb3cnLFxuXHRcdHByZXZZZWFyOiAnbGVmdC1kb3VibGUtYXJyb3cnLFxuXHRcdG5leHRZZWFyOiAncmlnaHQtZG91YmxlLWFycm93J1xuXHR9LFxuXG5cdGFsbERheVRleHQ6ICdhbGwtZGF5JyxcblxuXHQvLyBqcXVlcnktdWkgdGhlbWluZ1xuXHR0aGVtZTogZmFsc2UsXG5cdHRoZW1lQnV0dG9uSWNvbnM6IHtcblx0XHRwcmV2OiAnY2lyY2xlLXRyaWFuZ2xlLXcnLFxuXHRcdG5leHQ6ICdjaXJjbGUtdHJpYW5nbGUtZScsXG5cdFx0cHJldlllYXI6ICdzZWVrLXByZXYnLFxuXHRcdG5leHRZZWFyOiAnc2Vlay1uZXh0J1xuXHR9LFxuXG5cdC8vZXZlbnRSZXNpemFibGVGcm9tU3RhcnQ6IGZhbHNlLFxuXHRkcmFnT3BhY2l0eTogLjc1LFxuXHRkcmFnUmV2ZXJ0RHVyYXRpb246IDUwMCxcblx0ZHJhZ1Njcm9sbDogdHJ1ZSxcblxuXHQvL3NlbGVjdGFibGU6IGZhbHNlLFxuXHR1bnNlbGVjdEF1dG86IHRydWUsXG5cblx0ZHJvcEFjY2VwdDogJyonLFxuXG5cdGV2ZW50T3JkZXI6ICd0aXRsZScsXG5cdC8vZXZlbnRSZW5kZXJXYWl0OiBudWxsLFxuXG5cdGV2ZW50TGltaXQ6IGZhbHNlLFxuXHRldmVudExpbWl0VGV4dDogJ21vcmUnLFxuXHRldmVudExpbWl0Q2xpY2s6ICdwb3BvdmVyJyxcblx0ZGF5UG9wb3ZlckZvcm1hdDogJ0xMJyxcblxuXHRoYW5kbGVXaW5kb3dSZXNpemU6IHRydWUsXG5cdHdpbmRvd1Jlc2l6ZURlbGF5OiAxMDAsIC8vIG1pbGxpc2Vjb25kcyBiZWZvcmUgYW4gdXBkYXRlU2l6ZSBoYXBwZW5zXG5cblx0bG9uZ1ByZXNzRGVsYXk6IDEwMDBcblxufTtcblxuXG5DYWxlbmRhci5lbmdsaXNoRGVmYXVsdHMgPSB7IC8vIHVzZWQgYnkgbG9jYWxlLmpzXG5cdGRheVBvcG92ZXJGb3JtYXQ6ICdkZGRkLCBNTU1NIEQnXG59O1xuXG5cbkNhbGVuZGFyLnJ0bERlZmF1bHRzID0geyAvLyByaWdodC10by1sZWZ0IGRlZmF1bHRzXG5cdGhlYWRlcjogeyAvLyBUT0RPOiBzbWFydGVyIHNvbHV0aW9uIChmaXJzdC9jZW50ZXIvbGFzdCA/KVxuXHRcdGxlZnQ6ICduZXh0LHByZXYgdG9kYXknLFxuXHRcdGNlbnRlcjogJycsXG5cdFx0cmlnaHQ6ICd0aXRsZSdcblx0fSxcblx0YnV0dG9uSWNvbnM6IHtcblx0XHRwcmV2OiAncmlnaHQtc2luZ2xlLWFycm93Jyxcblx0XHRuZXh0OiAnbGVmdC1zaW5nbGUtYXJyb3cnLFxuXHRcdHByZXZZZWFyOiAncmlnaHQtZG91YmxlLWFycm93Jyxcblx0XHRuZXh0WWVhcjogJ2xlZnQtZG91YmxlLWFycm93J1xuXHR9LFxuXHR0aGVtZUJ1dHRvbkljb25zOiB7XG5cdFx0cHJldjogJ2NpcmNsZS10cmlhbmdsZS1lJyxcblx0XHRuZXh0OiAnY2lyY2xlLXRyaWFuZ2xlLXcnLFxuXHRcdG5leHRZZWFyOiAnc2Vlay1wcmV2Jyxcblx0XHRwcmV2WWVhcjogJ3NlZWstbmV4dCdcblx0fVxufTtcblxuOztcblxudmFyIGxvY2FsZU9wdGlvbkhhc2ggPSBGQy5sb2NhbGVzID0ge307IC8vIGluaXRpYWxpemUgYW5kIGV4cG9zZVxuXG5cbi8vIFRPRE86IGRvY3VtZW50IHRoZSBzdHJ1Y3R1cmUgYW5kIG9yZGVyaW5nIG9mIGEgRnVsbENhbGVuZGFyIGxvY2FsZSBmaWxlXG5cblxuLy8gSW5pdGlhbGl6ZSBqUXVlcnkgVUkgZGF0ZXBpY2tlciB0cmFuc2xhdGlvbnMgd2hpbGUgdXNpbmcgc29tZSBvZiB0aGUgdHJhbnNsYXRpb25zXG4vLyBXaWxsIHNldCB0aGlzIGFzIHRoZSBkZWZhdWx0IGxvY2FsZXMgZm9yIGRhdGVwaWNrZXIuXG5GQy5kYXRlcGlja2VyTG9jYWxlID0gZnVuY3Rpb24obG9jYWxlQ29kZSwgZHBMb2NhbGVDb2RlLCBkcE9wdGlvbnMpIHtcblxuXHQvLyBnZXQgdGhlIEZ1bGxDYWxlbmRhciBpbnRlcm5hbCBvcHRpb24gaGFzaCBmb3IgdGhpcyBsb2NhbGUuIGNyZWF0ZSBpZiBuZWNlc3Nhcnlcblx0dmFyIGZjT3B0aW9ucyA9IGxvY2FsZU9wdGlvbkhhc2hbbG9jYWxlQ29kZV0gfHwgKGxvY2FsZU9wdGlvbkhhc2hbbG9jYWxlQ29kZV0gPSB7fSk7XG5cblx0Ly8gdHJhbnNmZXIgc29tZSBzaW1wbGUgb3B0aW9ucyBmcm9tIGRhdGVwaWNrZXIgdG8gZmNcblx0ZmNPcHRpb25zLmlzUlRMID0gZHBPcHRpb25zLmlzUlRMO1xuXHRmY09wdGlvbnMud2Vla051bWJlclRpdGxlID0gZHBPcHRpb25zLndlZWtIZWFkZXI7XG5cblx0Ly8gY29tcHV0ZSBzb21lIG1vcmUgY29tcGxleCBvcHRpb25zIGZyb20gZGF0ZXBpY2tlclxuXHQkLmVhY2goZHBDb21wdXRhYmxlT3B0aW9ucywgZnVuY3Rpb24obmFtZSwgZnVuYykge1xuXHRcdGZjT3B0aW9uc1tuYW1lXSA9IGZ1bmMoZHBPcHRpb25zKTtcblx0fSk7XG5cblx0Ly8gaXMgalF1ZXJ5IFVJIERhdGVwaWNrZXIgaXMgb24gdGhlIHBhZ2U/XG5cdGlmICgkLmRhdGVwaWNrZXIpIHtcblxuXHRcdC8vIFJlZ2lzdGVyIHRoZSBsb2NhbGUgZGF0YS5cblx0XHQvLyBGdWxsQ2FsZW5kYXIgYW5kIE1vbWVudEpTIHVzZSBsb2NhbGUgY29kZXMgbGlrZSBcInB0LWJyXCIgYnV0IERhdGVwaWNrZXJcblx0XHQvLyBkb2VzIGl0IGxpa2UgXCJwdC1CUlwiIG9yIGlmIGl0IGRvZXNuJ3QgaGF2ZSB0aGUgbG9jYWxlLCBtYXliZSBqdXN0IFwicHRcIi5cblx0XHQvLyBNYWtlIGFuIGFsaWFzIHNvIHRoZSBsb2NhbGUgY2FuIGJlIHJlZmVyZW5jZWQgZWl0aGVyIHdheS5cblx0XHQkLmRhdGVwaWNrZXIucmVnaW9uYWxbZHBMb2NhbGVDb2RlXSA9XG5cdFx0XHQkLmRhdGVwaWNrZXIucmVnaW9uYWxbbG9jYWxlQ29kZV0gPSAvLyBhbGlhc1xuXHRcdFx0XHRkcE9wdGlvbnM7XG5cblx0XHQvLyBBbGlhcyAnZW4nIHRvIHRoZSBkZWZhdWx0IGxvY2FsZSBkYXRhLiBEbyB0aGlzIGV2ZXJ5IHRpbWUuXG5cdFx0JC5kYXRlcGlja2VyLnJlZ2lvbmFsLmVuID0gJC5kYXRlcGlja2VyLnJlZ2lvbmFsWycnXTtcblxuXHRcdC8vIFNldCBhcyBEYXRlcGlja2VyJ3MgZ2xvYmFsIGRlZmF1bHRzLlxuXHRcdCQuZGF0ZXBpY2tlci5zZXREZWZhdWx0cyhkcE9wdGlvbnMpO1xuXHR9XG59O1xuXG5cbi8vIFNldHMgRnVsbENhbGVuZGFyLXNwZWNpZmljIHRyYW5zbGF0aW9ucy4gV2lsbCBzZXQgdGhlIGxvY2FsZXMgYXMgdGhlIGdsb2JhbCBkZWZhdWx0LlxuRkMubG9jYWxlID0gZnVuY3Rpb24obG9jYWxlQ29kZSwgbmV3RmNPcHRpb25zKSB7XG5cdHZhciBmY09wdGlvbnM7XG5cdHZhciBtb21PcHRpb25zO1xuXG5cdC8vIGdldCB0aGUgRnVsbENhbGVuZGFyIGludGVybmFsIG9wdGlvbiBoYXNoIGZvciB0aGlzIGxvY2FsZS4gY3JlYXRlIGlmIG5lY2Vzc2FyeVxuXHRmY09wdGlvbnMgPSBsb2NhbGVPcHRpb25IYXNoW2xvY2FsZUNvZGVdIHx8IChsb2NhbGVPcHRpb25IYXNoW2xvY2FsZUNvZGVdID0ge30pO1xuXG5cdC8vIHByb3ZpZGVkIG5ldyBvcHRpb25zIGZvciB0aGlzIGxvY2FsZXM/IG1lcmdlIHRoZW0gaW5cblx0aWYgKG5ld0ZjT3B0aW9ucykge1xuXHRcdGZjT3B0aW9ucyA9IGxvY2FsZU9wdGlvbkhhc2hbbG9jYWxlQ29kZV0gPSBtZXJnZU9wdGlvbnMoWyBmY09wdGlvbnMsIG5ld0ZjT3B0aW9ucyBdKTtcblx0fVxuXG5cdC8vIGNvbXB1dGUgbG9jYWxlIG9wdGlvbnMgdGhhdCB3ZXJlbid0IGRlZmluZWQuXG5cdC8vIGFsd2F5cyBkbyB0aGlzLiBuZXdGY09wdGlvbnMgY2FuIGJlIHVuZGVmaW5lZCB3aGVuIGluaXRpYWxpemluZyBmcm9tIGkxOG4gZmlsZSxcblx0Ly8gc28gbm8gd2F5IHRvIHRlbGwgaWYgdGhpcyBpcyBhbiBpbml0aWFsaXphdGlvbiBvciBhIGRlZmF1bHQtc2V0dGluZy5cblx0bW9tT3B0aW9ucyA9IGdldE1vbWVudExvY2FsZURhdGEobG9jYWxlQ29kZSk7IC8vIHdpbGwgZmFsbCBiYWNrIHRvIGVuXG5cdCQuZWFjaChtb21Db21wdXRhYmxlT3B0aW9ucywgZnVuY3Rpb24obmFtZSwgZnVuYykge1xuXHRcdGlmIChmY09wdGlvbnNbbmFtZV0gPT0gbnVsbCkge1xuXHRcdFx0ZmNPcHRpb25zW25hbWVdID0gZnVuYyhtb21PcHRpb25zLCBmY09wdGlvbnMpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gc2V0IGl0IGFzIHRoZSBkZWZhdWx0IGxvY2FsZSBmb3IgRnVsbENhbGVuZGFyXG5cdENhbGVuZGFyLmRlZmF1bHRzLmxvY2FsZSA9IGxvY2FsZUNvZGU7XG59O1xuXG5cbi8vIE5PVEU6IGNhbid0IGd1YXJhbnRlZSBhbnkgb2YgdGhlc2UgY29tcHV0YXRpb25zIHdpbGwgcnVuIGJlY2F1c2Ugbm90IGV2ZXJ5IGxvY2FsZSBoYXMgZGF0ZXBpY2tlclxuLy8gY29uZmlncywgc28gbWFrZSBzdXJlIHRoZXJlIGFyZSBFbmdsaXNoIGZhbGxiYWNrcyBmb3IgdGhlc2UgaW4gdGhlIGRlZmF1bHRzIGZpbGUuXG52YXIgZHBDb21wdXRhYmxlT3B0aW9ucyA9IHtcblxuXHRidXR0b25UZXh0OiBmdW5jdGlvbihkcE9wdGlvbnMpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Ly8gdGhlIHRyYW5zbGF0aW9ucyBzb21ldGltZXMgd3JvbmdseSBjb250YWluIEhUTUwgZW50aXRpZXNcblx0XHRcdHByZXY6IHN0cmlwSHRtbEVudGl0aWVzKGRwT3B0aW9ucy5wcmV2VGV4dCksXG5cdFx0XHRuZXh0OiBzdHJpcEh0bWxFbnRpdGllcyhkcE9wdGlvbnMubmV4dFRleHQpLFxuXHRcdFx0dG9kYXk6IHN0cmlwSHRtbEVudGl0aWVzKGRwT3B0aW9ucy5jdXJyZW50VGV4dClcblx0XHR9O1xuXHR9LFxuXG5cdC8vIFByb2R1Y2VzIGZvcm1hdCBzdHJpbmdzIGxpa2UgXCJNTU1NIFlZWVlcIiAtPiBcIlNlcHRlbWJlciAyMDE0XCJcblx0bW9udGhZZWFyRm9ybWF0OiBmdW5jdGlvbihkcE9wdGlvbnMpIHtcblx0XHRyZXR1cm4gZHBPcHRpb25zLnNob3dNb250aEFmdGVyWWVhciA/XG5cdFx0XHQnWVlZWVsnICsgZHBPcHRpb25zLnllYXJTdWZmaXggKyAnXSBNTU1NJyA6XG5cdFx0XHQnTU1NTSBZWVlZWycgKyBkcE9wdGlvbnMueWVhclN1ZmZpeCArICddJztcblx0fVxuXG59O1xuXG52YXIgbW9tQ29tcHV0YWJsZU9wdGlvbnMgPSB7XG5cblx0Ly8gUHJvZHVjZXMgZm9ybWF0IHN0cmluZ3MgbGlrZSBcImRkZCBNL0RcIiAtPiBcIkZyaSA5LzE1XCJcblx0ZGF5T2ZNb250aEZvcm1hdDogZnVuY3Rpb24obW9tT3B0aW9ucywgZmNPcHRpb25zKSB7XG5cdFx0dmFyIGZvcm1hdCA9IG1vbU9wdGlvbnMubG9uZ0RhdGVGb3JtYXQoJ2wnKTsgLy8gZm9yIHRoZSBmb3JtYXQgbGlrZSBcIk0vRC9ZWVlZXCJcblxuXHRcdC8vIHN0cmlwIHRoZSB5ZWFyIG9mZiB0aGUgZWRnZSwgYXMgd2VsbCBhcyBvdGhlciBtaXNjIG5vbi13aGl0ZXNwYWNlIGNoYXJzXG5cdFx0Zm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoL15ZK1teXFx3XFxzXSp8W15cXHdcXHNdKlkrJC9nLCAnJyk7XG5cblx0XHRpZiAoZmNPcHRpb25zLmlzUlRMKSB7XG5cdFx0XHRmb3JtYXQgKz0gJyBkZGQnOyAvLyBmb3IgUlRMLCBhZGQgZGF5LW9mLXdlZWsgdG8gZW5kXG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Zm9ybWF0ID0gJ2RkZCAnICsgZm9ybWF0OyAvLyBmb3IgTFRSLCBhZGQgZGF5LW9mLXdlZWsgdG8gYmVnaW5uaW5nXG5cdFx0fVxuXHRcdHJldHVybiBmb3JtYXQ7XG5cdH0sXG5cblx0Ly8gUHJvZHVjZXMgZm9ybWF0IHN0cmluZ3MgbGlrZSBcImg6bW1hXCIgLT4gXCI2OjAwcG1cIlxuXHRtZWRpdW1UaW1lRm9ybWF0OiBmdW5jdGlvbihtb21PcHRpb25zKSB7IC8vIGNhbid0IGJlIGNhbGxlZCBgdGltZUZvcm1hdGAgYmVjYXVzZSBjb2xsaWRlcyB3aXRoIG9wdGlvblxuXHRcdHJldHVybiBtb21PcHRpb25zLmxvbmdEYXRlRm9ybWF0KCdMVCcpXG5cdFx0XHQucmVwbGFjZSgvXFxzKmEkL2ksICdhJyk7IC8vIGNvbnZlcnQgQU0vUE0vYW0vcG0gdG8gbG93ZXJjYXNlLiByZW1vdmUgYW55IHNwYWNlcyBiZWZvcmVoYW5kXG5cdH0sXG5cblx0Ly8gUHJvZHVjZXMgZm9ybWF0IHN0cmluZ3MgbGlrZSBcImgoOm1tKWFcIiAtPiBcIjZwbVwiIC8gXCI2OjMwcG1cIlxuXHRzbWFsbFRpbWVGb3JtYXQ6IGZ1bmN0aW9uKG1vbU9wdGlvbnMpIHtcblx0XHRyZXR1cm4gbW9tT3B0aW9ucy5sb25nRGF0ZUZvcm1hdCgnTFQnKVxuXHRcdFx0LnJlcGxhY2UoJzptbScsICcoOm1tKScpXG5cdFx0XHQucmVwbGFjZSgvKFxcV21tKSQvLCAnKCQxKScpIC8vIGxpa2UgYWJvdmUsIGJ1dCBmb3IgZm9yZWlnbiBsb2NhbGVzXG5cdFx0XHQucmVwbGFjZSgvXFxzKmEkL2ksICdhJyk7IC8vIGNvbnZlcnQgQU0vUE0vYW0vcG0gdG8gbG93ZXJjYXNlLiByZW1vdmUgYW55IHNwYWNlcyBiZWZvcmVoYW5kXG5cdH0sXG5cblx0Ly8gUHJvZHVjZXMgZm9ybWF0IHN0cmluZ3MgbGlrZSBcImgoOm1tKXRcIiAtPiBcIjZwXCIgLyBcIjY6MzBwXCJcblx0ZXh0cmFTbWFsbFRpbWVGb3JtYXQ6IGZ1bmN0aW9uKG1vbU9wdGlvbnMpIHtcblx0XHRyZXR1cm4gbW9tT3B0aW9ucy5sb25nRGF0ZUZvcm1hdCgnTFQnKVxuXHRcdFx0LnJlcGxhY2UoJzptbScsICcoOm1tKScpXG5cdFx0XHQucmVwbGFjZSgvKFxcV21tKSQvLCAnKCQxKScpIC8vIGxpa2UgYWJvdmUsIGJ1dCBmb3IgZm9yZWlnbiBsb2NhbGVzXG5cdFx0XHQucmVwbGFjZSgvXFxzKmEkL2ksICd0Jyk7IC8vIGNvbnZlcnQgdG8gQU0vUE0vYW0vcG0gdG8gbG93ZXJjYXNlIG9uZS1sZXR0ZXIuIHJlbW92ZSBhbnkgc3BhY2VzIGJlZm9yZWhhbmRcblx0fSxcblxuXHQvLyBQcm9kdWNlcyBmb3JtYXQgc3RyaW5ncyBsaWtlIFwiaGFcIiAvIFwiSFwiIC0+IFwiNnBtXCIgLyBcIjE4XCJcblx0aG91ckZvcm1hdDogZnVuY3Rpb24obW9tT3B0aW9ucykge1xuXHRcdHJldHVybiBtb21PcHRpb25zLmxvbmdEYXRlRm9ybWF0KCdMVCcpXG5cdFx0XHQucmVwbGFjZSgnOm1tJywgJycpXG5cdFx0XHQucmVwbGFjZSgvKFxcV21tKSQvLCAnJykgLy8gbGlrZSBhYm92ZSwgYnV0IGZvciBmb3JlaWduIGxvY2FsZXNcblx0XHRcdC5yZXBsYWNlKC9cXHMqYSQvaSwgJ2EnKTsgLy8gY29udmVydCBBTS9QTS9hbS9wbSB0byBsb3dlcmNhc2UuIHJlbW92ZSBhbnkgc3BhY2VzIGJlZm9yZWhhbmRcblx0fSxcblxuXHQvLyBQcm9kdWNlcyBmb3JtYXQgc3RyaW5ncyBsaWtlIFwiaDptbVwiIC0+IFwiNjozMFwiICh3aXRoIG5vIEFNL1BNKVxuXHRub01lcmlkaWVtVGltZUZvcm1hdDogZnVuY3Rpb24obW9tT3B0aW9ucykge1xuXHRcdHJldHVybiBtb21PcHRpb25zLmxvbmdEYXRlRm9ybWF0KCdMVCcpXG5cdFx0XHQucmVwbGFjZSgvXFxzKmEkL2ksICcnKTsgLy8gcmVtb3ZlIHRyYWlsaW5nIEFNL1BNXG5cdH1cblxufTtcblxuXG4vLyBvcHRpb25zIHRoYXQgc2hvdWxkIGJlIGNvbXB1dGVkIG9mZiBsaXZlIGNhbGVuZGFyIG9wdGlvbnMgKGNvbnNpZGVycyBvdmVycmlkZSBvcHRpb25zKVxuLy8gVE9ETzogYmVzdCBwbGFjZSBmb3IgdGhpcz8gcmVsYXRlZCB0byBsb2NhbGU/XG4vLyBUT0RPOiBmbGlwcGluZyB0ZXh0IGJhc2VkIG9uIGlzUlRMIGlzIGEgYmFkIGlkZWEgYmVjYXVzZSB0aGUgQ1NTIGBkaXJlY3Rpb25gIG1pZ2h0IHdhbnQgdG8gaGFuZGxlIGl0XG52YXIgaW5zdGFuY2VDb21wdXRhYmxlT3B0aW9ucyA9IHtcblxuXHQvLyBQcm9kdWNlcyBmb3JtYXQgc3RyaW5ncyBmb3IgcmVzdWx0cyBsaWtlIFwiTW8gMTZcIlxuXHRzbWFsbERheURhdGVGb3JtYXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gb3B0aW9ucy5pc1JUTCA/XG5cdFx0XHQnRCBkZCcgOlxuXHRcdFx0J2RkIEQnO1xuXHR9LFxuXG5cdC8vIFByb2R1Y2VzIGZvcm1hdCBzdHJpbmdzIGZvciByZXN1bHRzIGxpa2UgXCJXayA1XCJcblx0d2Vla0Zvcm1hdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdHJldHVybiBvcHRpb25zLmlzUlRMID9cblx0XHRcdCd3WyAnICsgb3B0aW9ucy53ZWVrTnVtYmVyVGl0bGUgKyAnXScgOlxuXHRcdFx0J1snICsgb3B0aW9ucy53ZWVrTnVtYmVyVGl0bGUgKyAnIF13Jztcblx0fSxcblxuXHQvLyBQcm9kdWNlcyBmb3JtYXQgc3RyaW5ncyBmb3IgcmVzdWx0cyBsaWtlIFwiV2s1XCJcblx0c21hbGxXZWVrRm9ybWF0OiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0cmV0dXJuIG9wdGlvbnMuaXNSVEwgP1xuXHRcdFx0J3dbJyArIG9wdGlvbnMud2Vla051bWJlclRpdGxlICsgJ10nIDpcblx0XHRcdCdbJyArIG9wdGlvbnMud2Vla051bWJlclRpdGxlICsgJ113Jztcblx0fVxuXG59O1xuXG5mdW5jdGlvbiBwb3B1bGF0ZUluc3RhbmNlQ29tcHV0YWJsZU9wdGlvbnMob3B0aW9ucykge1xuXHQkLmVhY2goaW5zdGFuY2VDb21wdXRhYmxlT3B0aW9ucywgZnVuY3Rpb24obmFtZSwgZnVuYykge1xuXHRcdGlmIChvcHRpb25zW25hbWVdID09IG51bGwpIHtcblx0XHRcdG9wdGlvbnNbbmFtZV0gPSBmdW5jKG9wdGlvbnMpO1xuXHRcdH1cblx0fSk7XG59XG5cblxuLy8gUmV0dXJucyBtb21lbnQncyBpbnRlcm5hbCBsb2NhbGUgZGF0YS4gSWYgZG9lc24ndCBleGlzdCwgcmV0dXJucyBFbmdsaXNoLlxuZnVuY3Rpb24gZ2V0TW9tZW50TG9jYWxlRGF0YShsb2NhbGVDb2RlKSB7XG5cdHJldHVybiBtb21lbnQubG9jYWxlRGF0YShsb2NhbGVDb2RlKSB8fCBtb21lbnQubG9jYWxlRGF0YSgnZW4nKTtcbn1cblxuXG4vLyBJbml0aWFsaXplIEVuZ2xpc2ggYnkgZm9yY2luZyBjb21wdXRhdGlvbiBvZiBtb21lbnQtZGVyaXZlZCBvcHRpb25zLlxuLy8gQWxzbywgc2V0cyBpdCBhcyB0aGUgZGVmYXVsdC5cbkZDLmxvY2FsZSgnZW4nLCBDYWxlbmRhci5lbmdsaXNoRGVmYXVsdHMpO1xuXG47O1xuXG5GQy5zb3VyY2VOb3JtYWxpemVycyA9IFtdO1xuRkMuc291cmNlRmV0Y2hlcnMgPSBbXTtcblxudmFyIGFqYXhEZWZhdWx0cyA9IHtcblx0ZGF0YVR5cGU6ICdqc29uJyxcblx0Y2FjaGU6IGZhbHNlXG59O1xuXG52YXIgZXZlbnRHVUlEID0gMTtcblxuXG5mdW5jdGlvbiBFdmVudE1hbmFnZXIoKSB7IC8vIGFzc3VtZWQgdG8gYmUgYSBjYWxlbmRhclxuXHR2YXIgdCA9IHRoaXM7XG5cblxuXHQvLyBleHBvcnRzXG5cdHQucmVxdWVzdEV2ZW50cyA9IHJlcXVlc3RFdmVudHM7XG5cdHQucmVwb3J0RXZlbnRDaGFuZ2UgPSByZXBvcnRFdmVudENoYW5nZTtcblx0dC5pc0ZldGNoTmVlZGVkID0gaXNGZXRjaE5lZWRlZDtcblx0dC5mZXRjaEV2ZW50cyA9IGZldGNoRXZlbnRzO1xuXHR0LmZldGNoRXZlbnRTb3VyY2VzID0gZmV0Y2hFdmVudFNvdXJjZXM7XG5cdHQucmVmZXRjaEV2ZW50cyA9IHJlZmV0Y2hFdmVudHM7XG5cdHQucmVmZXRjaEV2ZW50U291cmNlcyA9IHJlZmV0Y2hFdmVudFNvdXJjZXM7XG5cdHQuZ2V0RXZlbnRTb3VyY2VzID0gZ2V0RXZlbnRTb3VyY2VzO1xuXHR0LmdldEV2ZW50U291cmNlQnlJZCA9IGdldEV2ZW50U291cmNlQnlJZDtcblx0dC5hZGRFdmVudFNvdXJjZSA9IGFkZEV2ZW50U291cmNlO1xuXHR0LnJlbW92ZUV2ZW50U291cmNlID0gcmVtb3ZlRXZlbnRTb3VyY2U7XG5cdHQucmVtb3ZlRXZlbnRTb3VyY2VzID0gcmVtb3ZlRXZlbnRTb3VyY2VzO1xuXHR0LnVwZGF0ZUV2ZW50ID0gdXBkYXRlRXZlbnQ7XG5cdHQudXBkYXRlRXZlbnRzID0gdXBkYXRlRXZlbnRzO1xuXHR0LnJlbmRlckV2ZW50ID0gcmVuZGVyRXZlbnQ7XG5cdHQucmVuZGVyRXZlbnRzID0gcmVuZGVyRXZlbnRzO1xuXHR0LnJlbW92ZUV2ZW50cyA9IHJlbW92ZUV2ZW50cztcblx0dC5jbGllbnRFdmVudHMgPSBjbGllbnRFdmVudHM7XG5cdHQubXV0YXRlRXZlbnQgPSBtdXRhdGVFdmVudDtcblx0dC5ub3JtYWxpemVFdmVudERhdGVzID0gbm9ybWFsaXplRXZlbnREYXRlcztcblx0dC5ub3JtYWxpemVFdmVudFRpbWVzID0gbm9ybWFsaXplRXZlbnRUaW1lcztcblxuXG5cdC8vIGxvY2Fsc1xuXHR2YXIgc3RpY2t5U291cmNlID0geyBldmVudHM6IFtdIH07XG5cdHZhciBzb3VyY2VzID0gWyBzdGlja3lTb3VyY2UgXTtcblx0dmFyIHJhbmdlU3RhcnQsIHJhbmdlRW5kO1xuXHR2YXIgcGVuZGluZ1NvdXJjZUNudCA9IDA7IC8vIG91dHN0YW5kaW5nIGZldGNoIHJlcXVlc3RzLCBtYXggb25lIHBlciBzb3VyY2Vcblx0dmFyIGNhY2hlID0gW107IC8vIGhvbGRzIGV2ZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGV4cGFuZGVkXG5cdHZhciBwcnVuZWRDYWNoZTsgLy8gbGlrZSBjYWNoZSwgYnV0IG9ubHkgZXZlbnRzIHRoYXQgaW50ZXJzZWN0IHdpdGggcmFuZ2VTdGFydC9yYW5nZUVuZFxuXG5cblx0JC5lYWNoKFxuXHRcdCh0Lm9wdGlvbnMuZXZlbnRzID8gWyB0Lm9wdGlvbnMuZXZlbnRzIF0gOiBbXSkuY29uY2F0KHQub3B0aW9ucy5ldmVudFNvdXJjZXMgfHwgW10pLFxuXHRcdGZ1bmN0aW9uKGksIHNvdXJjZUlucHV0KSB7XG5cdFx0XHR2YXIgc291cmNlID0gYnVpbGRFdmVudFNvdXJjZShzb3VyY2VJbnB1dCk7XG5cdFx0XHRpZiAoc291cmNlKSB7XG5cdFx0XHRcdHNvdXJjZXMucHVzaChzb3VyY2UpO1xuXHRcdFx0fVxuXHRcdH1cblx0KTtcblxuXG5cblx0ZnVuY3Rpb24gcmVxdWVzdEV2ZW50cyhzdGFydCwgZW5kKSB7XG5cdFx0aWYgKCF0Lm9wdGlvbnMubGF6eUZldGNoaW5nIHx8IGlzRmV0Y2hOZWVkZWQoc3RhcnQsIGVuZCkpIHtcblx0XHRcdHJldHVybiBmZXRjaEV2ZW50cyhzdGFydCwgZW5kKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHBydW5lZENhY2hlKTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHJlcG9ydEV2ZW50Q2hhbmdlKCkge1xuXHRcdHBydW5lZENhY2hlID0gZmlsdGVyRXZlbnRzV2l0aGluUmFuZ2UoY2FjaGUpO1xuXHRcdHQudHJpZ2dlcignZXZlbnRzUmVzZXQnLCBwcnVuZWRDYWNoZSk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGZpbHRlckV2ZW50c1dpdGhpblJhbmdlKGV2ZW50cykge1xuXHRcdHZhciBmaWx0ZXJlZEV2ZW50cyA9IFtdO1xuXHRcdHZhciBpLCBldmVudDtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGV2ZW50ID0gZXZlbnRzW2ldO1xuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGV2ZW50LnN0YXJ0LmNsb25lKCkuc3RyaXBab25lKCkgPCByYW5nZUVuZCAmJlxuXHRcdFx0XHR0LmdldEV2ZW50RW5kKGV2ZW50KS5zdHJpcFpvbmUoKSA+IHJhbmdlU3RhcnRcblx0XHRcdCkge1xuXHRcdFx0XHRmaWx0ZXJlZEV2ZW50cy5wdXNoKGV2ZW50KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmlsdGVyZWRFdmVudHM7XG5cdH1cblxuXG5cdHQuZ2V0RXZlbnRDYWNoZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBjYWNoZTtcblx0fTtcblxuXG5cdHQuZ2V0UHJ1bmVkRXZlbnRDYWNoZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBwcnVuZWRDYWNoZTtcblx0fTtcblxuXG5cblx0LyogRmV0Y2hpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gc3RhcnQgYW5kIGVuZCBhcmUgYXNzdW1lZCB0byBiZSB1bnpvbmVkXG5cdGZ1bmN0aW9uIGlzRmV0Y2hOZWVkZWQoc3RhcnQsIGVuZCkge1xuXHRcdHJldHVybiAhcmFuZ2VTdGFydCB8fCAvLyBub3RoaW5nIGhhcyBiZWVuIGZldGNoZWQgeWV0P1xuXHRcdFx0c3RhcnQgPCByYW5nZVN0YXJ0IHx8IGVuZCA+IHJhbmdlRW5kOyAvLyBpcyBwYXJ0IG9mIHRoZSBuZXcgcmFuZ2Ugb3V0c2lkZSBvZiB0aGUgb2xkIHJhbmdlP1xuXHR9XG5cblxuXHRmdW5jdGlvbiBmZXRjaEV2ZW50cyhzdGFydCwgZW5kKSB7XG5cdFx0cmFuZ2VTdGFydCA9IHN0YXJ0O1xuXHRcdHJhbmdlRW5kID0gZW5kO1xuXHRcdHJldHVybiByZWZldGNoRXZlbnRzKCk7XG5cdH1cblxuXG5cdC8vIHBvb3JseSBuYW1lZC4gZmV0Y2hlcyBhbGwgc291cmNlcyB3aXRoIGN1cnJlbnQgYHJhbmdlU3RhcnRgIGFuZCBgcmFuZ2VFbmRgLlxuXHRmdW5jdGlvbiByZWZldGNoRXZlbnRzKCkge1xuXHRcdHJldHVybiBmZXRjaEV2ZW50U291cmNlcyhzb3VyY2VzLCAncmVzZXQnKTtcblx0fVxuXG5cblx0Ly8gcG9vcmx5IG5hbWVkLiBmZXRjaGVzIGEgc3Vic2V0IG9mIGV2ZW50IHNvdXJjZXMuXG5cdGZ1bmN0aW9uIHJlZmV0Y2hFdmVudFNvdXJjZXMobWF0Y2hJbnB1dHMpIHtcblx0XHRyZXR1cm4gZmV0Y2hFdmVudFNvdXJjZXMoZ2V0RXZlbnRTb3VyY2VzQnlNYXRjaEFycmF5KG1hdGNoSW5wdXRzKSk7XG5cdH1cblxuXG5cdC8vIGV4cGVjdHMgYW4gYXJyYXkgb2YgZXZlbnQgc291cmNlIG9iamVjdHMgKHRoZSBvcmlnaW5hbHMsIG5vdCBjb3BpZXMpXG5cdC8vIGBzcGVjaWFsRmV0Y2hUeXBlYCBpcyBhbiBvcHRpbWl6YXRpb24gcGFyYW1ldGVyIHRoYXQgYWZmZWN0cyBwdXJnaW5nIG9mIHRoZSBldmVudCBjYWNoZS5cblx0ZnVuY3Rpb24gZmV0Y2hFdmVudFNvdXJjZXMoc3BlY2lmaWNTb3VyY2VzLCBzcGVjaWFsRmV0Y2hUeXBlKSB7XG5cdFx0dmFyIGksIHNvdXJjZTtcblxuXHRcdGlmIChzcGVjaWFsRmV0Y2hUeXBlID09PSAncmVzZXQnKSB7XG5cdFx0XHRjYWNoZSA9IFtdO1xuXHRcdH1cblx0XHRlbHNlIGlmIChzcGVjaWFsRmV0Y2hUeXBlICE9PSAnYWRkJykge1xuXHRcdFx0Y2FjaGUgPSBleGNsdWRlRXZlbnRzQnlTb3VyY2VzKGNhY2hlLCBzcGVjaWZpY1NvdXJjZXMpO1xuXHRcdH1cblxuXHRcdGZvciAoaSA9IDA7IGkgPCBzcGVjaWZpY1NvdXJjZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNvdXJjZSA9IHNwZWNpZmljU291cmNlc1tpXTtcblxuXHRcdFx0Ly8gYWxyZWFkeS1wZW5kaW5nIHNvdXJjZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYWNjb3VudGVkIGZvciBpbiBwZW5kaW5nU291cmNlQ250XG5cdFx0XHRpZiAoc291cmNlLl9zdGF0dXMgIT09ICdwZW5kaW5nJykge1xuXHRcdFx0XHRwZW5kaW5nU291cmNlQ250Kys7XG5cdFx0XHR9XG5cblx0XHRcdHNvdXJjZS5fZmV0Y2hJZCA9IChzb3VyY2UuX2ZldGNoSWQgfHwgMCkgKyAxO1xuXHRcdFx0c291cmNlLl9zdGF0dXMgPSAncGVuZGluZyc7XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNwZWNpZmljU291cmNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c291cmNlID0gc3BlY2lmaWNTb3VyY2VzW2ldO1xuXHRcdFx0dHJ5RmV0Y2hFdmVudFNvdXJjZShzb3VyY2UsIHNvdXJjZS5fZmV0Y2hJZCk7XG5cdFx0fVxuXG5cdFx0aWYgKHBlbmRpbmdTb3VyY2VDbnQpIHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG5cdFx0XHRcdHQub25lKCdldmVudHNSZWNlaXZlZCcsIHJlc29sdmUpOyAvLyB3aWxsIHNlbmQgcHJ1bmVkQ2FjaGVcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRlbHNlIHsgLy8gZXhlY3V0ZWQgYWxsIHN5bmNocm9ub3VzbHksIG9yIG5vIHNvdXJjZXMgYXQgYWxsXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHBydW5lZENhY2hlKTtcblx0XHR9XG5cdH1cblxuXG5cdC8vIGZldGNoZXMgYW4gZXZlbnQgc291cmNlIGFuZCBwcm9jZXNzZXMgaXRzIHJlc3VsdCBPTkxZIGlmIGl0IGlzIHN0aWxsIHRoZSBjdXJyZW50IGZldGNoLlxuXHQvLyBjYWxsZXIgaXMgcmVzcG9uc2libGUgZm9yIGluY3JlbWVudGluZyBwZW5kaW5nU291cmNlQ250IGZpcnN0LlxuXHRmdW5jdGlvbiB0cnlGZXRjaEV2ZW50U291cmNlKHNvdXJjZSwgZmV0Y2hJZCkge1xuXHRcdF9mZXRjaEV2ZW50U291cmNlKHNvdXJjZSwgZnVuY3Rpb24oZXZlbnRJbnB1dHMpIHtcblx0XHRcdHZhciBpc0FycmF5U291cmNlID0gJC5pc0FycmF5KHNvdXJjZS5ldmVudHMpO1xuXHRcdFx0dmFyIGksIGV2ZW50SW5wdXQ7XG5cdFx0XHR2YXIgYWJzdHJhY3RFdmVudDtcblxuXHRcdFx0aWYgKFxuXHRcdFx0XHQvLyBpcyB0aGlzIHRoZSBzb3VyY2UncyBtb3N0IHJlY2VudCBmZXRjaD9cblx0XHRcdFx0Ly8gaWYgbm90LCByZWx5IG9uIGFuIHVwY29taW5nIGZldGNoIG9mIHRoaXMgc291cmNlIHRvIGRlY3JlbWVudCBwZW5kaW5nU291cmNlQ250XG5cdFx0XHRcdGZldGNoSWQgPT09IHNvdXJjZS5fZmV0Y2hJZCAmJlxuXHRcdFx0XHQvLyBldmVudCBzb3VyY2Ugbm8gbG9uZ2VyIHZhbGlkP1xuXHRcdFx0XHRzb3VyY2UuX3N0YXR1cyAhPT0gJ3JlamVjdGVkJ1xuXHRcdFx0KSB7XG5cdFx0XHRcdHNvdXJjZS5fc3RhdHVzID0gJ3Jlc29sdmVkJztcblxuXHRcdFx0XHRpZiAoZXZlbnRJbnB1dHMpIHtcblx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgZXZlbnRJbnB1dHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGV2ZW50SW5wdXQgPSBldmVudElucHV0c1tpXTtcblxuXHRcdFx0XHRcdFx0aWYgKGlzQXJyYXlTb3VyY2UpIHsgLy8gYXJyYXkgc291cmNlcyBoYXZlIGFscmVhZHkgYmVlbiBjb252ZXJ0IHRvIEV2ZW50IE9iamVjdHNcblx0XHRcdFx0XHRcdFx0YWJzdHJhY3RFdmVudCA9IGV2ZW50SW5wdXQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0YWJzdHJhY3RFdmVudCA9IGJ1aWxkRXZlbnRGcm9tSW5wdXQoZXZlbnRJbnB1dCwgc291cmNlKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGFic3RyYWN0RXZlbnQpIHsgLy8gbm90IGZhbHNlIChhbiBpbnZhbGlkIGV2ZW50KVxuXHRcdFx0XHRcdFx0XHRjYWNoZS5wdXNoLmFwcGx5KCAvLyBhcHBlbmRcblx0XHRcdFx0XHRcdFx0XHRjYWNoZSxcblx0XHRcdFx0XHRcdFx0XHRleHBhbmRFdmVudChhYnN0cmFjdEV2ZW50KSAvLyBhZGQgaW5kaXZpZHVhbCBleHBhbmRlZCBldmVudHMgdG8gdGhlIGNhY2hlXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGVjcmVtZW50UGVuZGluZ1NvdXJjZUNudCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblxuXHRmdW5jdGlvbiByZWplY3RFdmVudFNvdXJjZShzb3VyY2UpIHtcblx0XHR2YXIgd2FzUGVuZGluZyA9IHNvdXJjZS5fc3RhdHVzID09PSAncGVuZGluZyc7XG5cblx0XHRzb3VyY2UuX3N0YXR1cyA9ICdyZWplY3RlZCc7XG5cblx0XHRpZiAod2FzUGVuZGluZykge1xuXHRcdFx0ZGVjcmVtZW50UGVuZGluZ1NvdXJjZUNudCgpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gZGVjcmVtZW50UGVuZGluZ1NvdXJjZUNudCgpIHtcblx0XHRwZW5kaW5nU291cmNlQ250LS07XG5cdFx0aWYgKCFwZW5kaW5nU291cmNlQ250KSB7XG5cdFx0XHRyZXBvcnRFdmVudENoYW5nZShjYWNoZSk7IC8vIHVwZGF0ZXMgcHJ1bmVkQ2FjaGVcblx0XHRcdHQudHJpZ2dlcignZXZlbnRzUmVjZWl2ZWQnLCBwcnVuZWRDYWNoZSk7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBfZmV0Y2hFdmVudFNvdXJjZShzb3VyY2UsIGNhbGxiYWNrKSB7XG5cdFx0dmFyIGk7XG5cdFx0dmFyIGZldGNoZXJzID0gRkMuc291cmNlRmV0Y2hlcnM7XG5cdFx0dmFyIHJlcztcblxuXHRcdGZvciAoaT0wOyBpPGZldGNoZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRyZXMgPSBmZXRjaGVyc1tpXS5jYWxsKFxuXHRcdFx0XHR0LCAvLyB0aGlzLCB0aGUgQ2FsZW5kYXIgb2JqZWN0XG5cdFx0XHRcdHNvdXJjZSxcblx0XHRcdFx0cmFuZ2VTdGFydC5jbG9uZSgpLFxuXHRcdFx0XHRyYW5nZUVuZC5jbG9uZSgpLFxuXHRcdFx0XHR0Lm9wdGlvbnMudGltZXpvbmUsXG5cdFx0XHRcdGNhbGxiYWNrXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAocmVzID09PSB0cnVlKSB7XG5cdFx0XHRcdC8vIHRoZSBmZXRjaGVyIGlzIGluIGNoYXJnZS4gbWFkZSBpdHMgb3duIGFzeW5jIHJlcXVlc3Rcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIHJlcyA9PSAnb2JqZWN0Jykge1xuXHRcdFx0XHQvLyB0aGUgZmV0Y2hlciByZXR1cm5lZCBhIG5ldyBzb3VyY2UuIHByb2Nlc3MgaXRcblx0XHRcdFx0X2ZldGNoRXZlbnRTb3VyY2UocmVzLCBjYWxsYmFjayk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2YXIgZXZlbnRzID0gc291cmNlLmV2ZW50cztcblx0XHRpZiAoZXZlbnRzKSB7XG5cdFx0XHRpZiAoJC5pc0Z1bmN0aW9uKGV2ZW50cykpIHtcblx0XHRcdFx0dC5wdXNoTG9hZGluZygpO1xuXHRcdFx0XHRldmVudHMuY2FsbChcblx0XHRcdFx0XHR0LCAvLyB0aGlzLCB0aGUgQ2FsZW5kYXIgb2JqZWN0XG5cdFx0XHRcdFx0cmFuZ2VTdGFydC5jbG9uZSgpLFxuXHRcdFx0XHRcdHJhbmdlRW5kLmNsb25lKCksXG5cdFx0XHRcdFx0dC5vcHRpb25zLnRpbWV6b25lLFxuXHRcdFx0XHRcdGZ1bmN0aW9uKGV2ZW50cykge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soZXZlbnRzKTtcblx0XHRcdFx0XHRcdHQucG9wTG9hZGluZygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKCQuaXNBcnJheShldmVudHMpKSB7XG5cdFx0XHRcdGNhbGxiYWNrKGV2ZW50cyk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdH1cblx0XHR9ZWxzZXtcblx0XHRcdHZhciB1cmwgPSBzb3VyY2UudXJsO1xuXHRcdFx0aWYgKHVybCkge1xuXHRcdFx0XHR2YXIgc3VjY2VzcyA9IHNvdXJjZS5zdWNjZXNzO1xuXHRcdFx0XHR2YXIgZXJyb3IgPSBzb3VyY2UuZXJyb3I7XG5cdFx0XHRcdHZhciBjb21wbGV0ZSA9IHNvdXJjZS5jb21wbGV0ZTtcblxuXHRcdFx0XHQvLyByZXRyaWV2ZSBhbnkgb3V0Ym91bmQgR0VUL1BPU1QgJC5hamF4IGRhdGEgZnJvbSB0aGUgb3B0aW9uc1xuXHRcdFx0XHR2YXIgY3VzdG9tRGF0YTtcblx0XHRcdFx0aWYgKCQuaXNGdW5jdGlvbihzb3VyY2UuZGF0YSkpIHtcblx0XHRcdFx0XHQvLyBzdXBwbGllZCBhcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGtleS92YWx1ZSBvYmplY3Rcblx0XHRcdFx0XHRjdXN0b21EYXRhID0gc291cmNlLmRhdGEoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQvLyBzdXBwbGllZCBhcyBhIHN0cmFpZ2h0IGtleS92YWx1ZSBvYmplY3Rcblx0XHRcdFx0XHRjdXN0b21EYXRhID0gc291cmNlLmRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyB1c2UgYSBjb3B5IG9mIHRoZSBjdXN0b20gZGF0YSBzbyB3ZSBjYW4gbW9kaWZ5IHRoZSBwYXJhbWV0ZXJzXG5cdFx0XHRcdC8vIGFuZCBub3QgYWZmZWN0IHRoZSBwYXNzZWQtaW4gb2JqZWN0LlxuXHRcdFx0XHR2YXIgZGF0YSA9ICQuZXh0ZW5kKHt9LCBjdXN0b21EYXRhIHx8IHt9KTtcblxuXHRcdFx0XHR2YXIgc3RhcnRQYXJhbSA9IGZpcnN0RGVmaW5lZChzb3VyY2Uuc3RhcnRQYXJhbSwgdC5vcHRpb25zLnN0YXJ0UGFyYW0pO1xuXHRcdFx0XHR2YXIgZW5kUGFyYW0gPSBmaXJzdERlZmluZWQoc291cmNlLmVuZFBhcmFtLCB0Lm9wdGlvbnMuZW5kUGFyYW0pO1xuXHRcdFx0XHR2YXIgdGltZXpvbmVQYXJhbSA9IGZpcnN0RGVmaW5lZChzb3VyY2UudGltZXpvbmVQYXJhbSwgdC5vcHRpb25zLnRpbWV6b25lUGFyYW0pO1xuXG5cdFx0XHRcdGlmIChzdGFydFBhcmFtKSB7XG5cdFx0XHRcdFx0ZGF0YVtzdGFydFBhcmFtXSA9IHJhbmdlU3RhcnQuZm9ybWF0KCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGVuZFBhcmFtKSB7XG5cdFx0XHRcdFx0ZGF0YVtlbmRQYXJhbV0gPSByYW5nZUVuZC5mb3JtYXQoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodC5vcHRpb25zLnRpbWV6b25lICYmIHQub3B0aW9ucy50aW1lem9uZSAhPSAnbG9jYWwnKSB7XG5cdFx0XHRcdFx0ZGF0YVt0aW1lem9uZVBhcmFtXSA9IHQub3B0aW9ucy50aW1lem9uZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHQucHVzaExvYWRpbmcoKTtcblx0XHRcdFx0JC5hamF4KCQuZXh0ZW5kKHt9LCBhamF4RGVmYXVsdHMsIHNvdXJjZSwge1xuXHRcdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oZXZlbnRzKSB7XG5cdFx0XHRcdFx0XHRldmVudHMgPSBldmVudHMgfHwgW107XG5cdFx0XHRcdFx0XHR2YXIgcmVzID0gYXBwbHlBbGwoc3VjY2VzcywgdGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0XHRcdGlmICgkLmlzQXJyYXkocmVzKSkge1xuXHRcdFx0XHRcdFx0XHRldmVudHMgPSByZXM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjYWxsYmFjayhldmVudHMpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0YXBwbHlBbGwoZXJyb3IsIHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0YXBwbHlBbGwoY29tcGxldGUsIHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdFx0XHR0LnBvcExvYWRpbmcoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pKTtcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cblxuXHQvKiBTb3VyY2VzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdGZ1bmN0aW9uIGFkZEV2ZW50U291cmNlKHNvdXJjZUlucHV0KSB7XG5cdFx0dmFyIHNvdXJjZSA9IGJ1aWxkRXZlbnRTb3VyY2Uoc291cmNlSW5wdXQpO1xuXHRcdGlmIChzb3VyY2UpIHtcblx0XHRcdHNvdXJjZXMucHVzaChzb3VyY2UpO1xuXHRcdFx0ZmV0Y2hFdmVudFNvdXJjZXMoWyBzb3VyY2UgXSwgJ2FkZCcpOyAvLyB3aWxsIGV2ZW50dWFsbHkgY2FsbCByZXBvcnRFdmVudENoYW5nZVxuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gYnVpbGRFdmVudFNvdXJjZShzb3VyY2VJbnB1dCkgeyAvLyB3aWxsIHJldHVybiB1bmRlZmluZWQgaWYgaW52YWxpZCBzb3VyY2Vcblx0XHR2YXIgbm9ybWFsaXplcnMgPSBGQy5zb3VyY2VOb3JtYWxpemVycztcblx0XHR2YXIgc291cmNlO1xuXHRcdHZhciBpO1xuXG5cdFx0aWYgKCQuaXNGdW5jdGlvbihzb3VyY2VJbnB1dCkgfHwgJC5pc0FycmF5KHNvdXJjZUlucHV0KSkge1xuXHRcdFx0c291cmNlID0geyBldmVudHM6IHNvdXJjZUlucHV0IH07XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHR5cGVvZiBzb3VyY2VJbnB1dCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdHNvdXJjZSA9IHsgdXJsOiBzb3VyY2VJbnB1dCB9O1xuXHRcdH1cblx0XHRlbHNlIGlmICh0eXBlb2Ygc291cmNlSW5wdXQgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRzb3VyY2UgPSAkLmV4dGVuZCh7fSwgc291cmNlSW5wdXQpOyAvLyBzaGFsbG93IGNvcHlcblx0XHR9XG5cblx0XHRpZiAoc291cmNlKSB7XG5cblx0XHRcdC8vIFRPRE86IHJlcGVhdCBjb2RlLCBzYW1lIGNvZGUgZm9yIGV2ZW50IGNsYXNzTmFtZXNcblx0XHRcdGlmIChzb3VyY2UuY2xhc3NOYW1lKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygc291cmNlLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHRzb3VyY2UuY2xhc3NOYW1lID0gc291cmNlLmNsYXNzTmFtZS5zcGxpdCgvXFxzKy8pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIG90aGVyd2lzZSwgYXNzdW1lZCB0byBiZSBhbiBhcnJheVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHNvdXJjZS5jbGFzc05hbWUgPSBbXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gZm9yIGFycmF5IHNvdXJjZXMsIHdlIGNvbnZlcnQgdG8gc3RhbmRhcmQgRXZlbnQgT2JqZWN0cyB1cCBmcm9udFxuXHRcdFx0aWYgKCQuaXNBcnJheShzb3VyY2UuZXZlbnRzKSkge1xuXHRcdFx0XHRzb3VyY2Uub3JpZ0FycmF5ID0gc291cmNlLmV2ZW50czsgLy8gZm9yIHJlbW92ZUV2ZW50U291cmNlXG5cdFx0XHRcdHNvdXJjZS5ldmVudHMgPSAkLm1hcChzb3VyY2UuZXZlbnRzLCBmdW5jdGlvbihldmVudElucHV0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1aWxkRXZlbnRGcm9tSW5wdXQoZXZlbnRJbnB1dCwgc291cmNlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvciAoaT0wOyBpPG5vcm1hbGl6ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdG5vcm1hbGl6ZXJzW2ldLmNhbGwodCwgc291cmNlKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHNvdXJjZTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHJlbW92ZUV2ZW50U291cmNlKG1hdGNoSW5wdXQpIHtcblx0XHRyZW1vdmVTcGVjaWZpY0V2ZW50U291cmNlcyhcblx0XHRcdGdldEV2ZW50U291cmNlc0J5TWF0Y2gobWF0Y2hJbnB1dClcblx0XHQpO1xuXHR9XG5cblxuXHQvLyBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIHJlbW92ZXMgYWxsLlxuXHRmdW5jdGlvbiByZW1vdmVFdmVudFNvdXJjZXMobWF0Y2hJbnB1dHMpIHtcblx0XHRpZiAobWF0Y2hJbnB1dHMgPT0gbnVsbCkge1xuXHRcdFx0cmVtb3ZlU3BlY2lmaWNFdmVudFNvdXJjZXMoc291cmNlcywgdHJ1ZSk7IC8vIGlzQWxsPXRydWVcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZW1vdmVTcGVjaWZpY0V2ZW50U291cmNlcyhcblx0XHRcdFx0Z2V0RXZlbnRTb3VyY2VzQnlNYXRjaEFycmF5KG1hdGNoSW5wdXRzKVxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHJlbW92ZVNwZWNpZmljRXZlbnRTb3VyY2VzKHRhcmdldFNvdXJjZXMsIGlzQWxsKSB7XG5cdFx0dmFyIGk7XG5cblx0XHQvLyBjYW5jZWwgcGVuZGluZyByZXF1ZXN0c1xuXHRcdGZvciAoaSA9IDA7IGkgPCB0YXJnZXRTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRyZWplY3RFdmVudFNvdXJjZSh0YXJnZXRTb3VyY2VzW2ldKTtcblx0XHR9XG5cblx0XHRpZiAoaXNBbGwpIHsgLy8gYW4gb3B0aW1pemF0aW9uXG5cdFx0XHRzb3VyY2VzID0gW107XG5cdFx0XHRjYWNoZSA9IFtdO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdC8vIHJlbW92ZSBmcm9tIHBlcnNpc3RlZCBzb3VyY2UgbGlzdFxuXHRcdFx0c291cmNlcyA9ICQuZ3JlcChzb3VyY2VzLCBmdW5jdGlvbihzb3VyY2UpIHtcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IHRhcmdldFNvdXJjZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpZiAoc291cmNlID09PSB0YXJnZXRTb3VyY2VzW2ldKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7IC8vIGV4Y2x1ZGVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7IC8vIGluY2x1ZGVcblx0XHRcdH0pO1xuXG5cdFx0XHRjYWNoZSA9IGV4Y2x1ZGVFdmVudHNCeVNvdXJjZXMoY2FjaGUsIHRhcmdldFNvdXJjZXMpO1xuXHRcdH1cblxuXHRcdHJlcG9ydEV2ZW50Q2hhbmdlKCk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIGdldEV2ZW50U291cmNlcygpIHtcblx0XHRyZXR1cm4gc291cmNlcy5zbGljZSgxKTsgLy8gcmV0dXJucyBhIHNoYWxsb3cgY29weSBvZiBzb3VyY2VzIHdpdGggc3RpY2t5U291cmNlIHJlbW92ZWRcblx0fVxuXG5cblx0ZnVuY3Rpb24gZ2V0RXZlbnRTb3VyY2VCeUlkKGlkKSB7XG5cdFx0cmV0dXJuICQuZ3JlcChzb3VyY2VzLCBmdW5jdGlvbihzb3VyY2UpIHtcblx0XHRcdHJldHVybiBzb3VyY2UuaWQgJiYgc291cmNlLmlkID09PSBpZDtcblx0XHR9KVswXTtcblx0fVxuXG5cblx0Ly8gbGlrZSBnZXRFdmVudFNvdXJjZXNCeU1hdGNoLCBidXQgYWNjZXB0cyBtdWx0cGxlIG1hdGNoIGNyaXRlcmlhIChsaWtlIG11bHRpcGxlIElEcylcblx0ZnVuY3Rpb24gZ2V0RXZlbnRTb3VyY2VzQnlNYXRjaEFycmF5KG1hdGNoSW5wdXRzKSB7XG5cblx0XHQvLyBjb2VyY2UgaW50byBhbiBhcnJheVxuXHRcdGlmICghbWF0Y2hJbnB1dHMpIHtcblx0XHRcdG1hdGNoSW5wdXRzID0gW107XG5cdFx0fVxuXHRcdGVsc2UgaWYgKCEkLmlzQXJyYXkobWF0Y2hJbnB1dHMpKSB7XG5cdFx0XHRtYXRjaElucHV0cyA9IFsgbWF0Y2hJbnB1dHMgXTtcblx0XHR9XG5cblx0XHR2YXIgbWF0Y2hpbmdTb3VyY2VzID0gW107XG5cdFx0dmFyIGk7XG5cblx0XHQvLyByZXNvbHZlIHJhdyBpbnB1dHMgdG8gcmVhbCBldmVudCBzb3VyY2Ugb2JqZWN0c1xuXHRcdGZvciAoaSA9IDA7IGkgPCBtYXRjaElucHV0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bWF0Y2hpbmdTb3VyY2VzLnB1c2guYXBwbHkoIC8vIGFwcGVuZFxuXHRcdFx0XHRtYXRjaGluZ1NvdXJjZXMsXG5cdFx0XHRcdGdldEV2ZW50U291cmNlc0J5TWF0Y2gobWF0Y2hJbnB1dHNbaV0pXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGluZ1NvdXJjZXM7XG5cdH1cblxuXG5cdC8vIG1hdGNoSW5wdXQgY2FuIGVpdGhlciBieSBhIHJlYWwgZXZlbnQgc291cmNlIG9iamVjdCwgYW4gSUQsIG9yIHRoZSBmdW5jdGlvbi9VUkwgZm9yIHRoZSBzb3VyY2UuXG5cdC8vIHJldHVybnMgYW4gYXJyYXkgb2YgbWF0Y2hpbmcgc291cmNlIG9iamVjdHMuXG5cdGZ1bmN0aW9uIGdldEV2ZW50U291cmNlc0J5TWF0Y2gobWF0Y2hJbnB1dCkge1xuXHRcdHZhciBpLCBzb3VyY2U7XG5cblx0XHQvLyBnaXZlbiBhbiBwcm9wZXIgZXZlbnQgc291cmNlIG9iamVjdFxuXHRcdGZvciAoaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzb3VyY2UgPSBzb3VyY2VzW2ldO1xuXHRcdFx0aWYgKHNvdXJjZSA9PT0gbWF0Y2hJbnB1dCkge1xuXHRcdFx0XHRyZXR1cm4gWyBzb3VyY2UgXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBhbiBJRCBtYXRjaFxuXHRcdHNvdXJjZSA9IGdldEV2ZW50U291cmNlQnlJZChtYXRjaElucHV0KTtcblx0XHRpZiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gWyBzb3VyY2UgXTtcblx0XHR9XG5cblx0XHRyZXR1cm4gJC5ncmVwKHNvdXJjZXMsIGZ1bmN0aW9uKHNvdXJjZSkge1xuXHRcdFx0cmV0dXJuIGlzU291cmNlc0VxdWl2YWxlbnQobWF0Y2hJbnB1dCwgc291cmNlKTtcblx0XHR9KTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gaXNTb3VyY2VzRXF1aXZhbGVudChzb3VyY2UxLCBzb3VyY2UyKSB7XG5cdFx0cmV0dXJuIHNvdXJjZTEgJiYgc291cmNlMiAmJiBnZXRTb3VyY2VQcmltaXRpdmUoc291cmNlMSkgPT0gZ2V0U291cmNlUHJpbWl0aXZlKHNvdXJjZTIpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBnZXRTb3VyY2VQcmltaXRpdmUoc291cmNlKSB7XG5cdFx0cmV0dXJuIChcblx0XHRcdCh0eXBlb2Ygc291cmNlID09PSAnb2JqZWN0JykgPyAvLyBhIG5vcm1hbGl6ZWQgZXZlbnQgc291cmNlP1xuXHRcdFx0XHQoc291cmNlLm9yaWdBcnJheSB8fCBzb3VyY2UuZ29vZ2xlQ2FsZW5kYXJJZCB8fCBzb3VyY2UudXJsIHx8IHNvdXJjZS5ldmVudHMpIDogLy8gZ2V0IHRoZSBwcmltaXRpdmVcblx0XHRcdFx0bnVsbFxuXHRcdCkgfHxcblx0XHRzb3VyY2U7IC8vIHRoZSBnaXZlbiBhcmd1bWVudCAqaXMqIHRoZSBwcmltaXRpdmVcblx0fVxuXG5cblx0Ly8gdXRpbFxuXHQvLyByZXR1cm5zIGEgZmlsdGVyZWQgYXJyYXkgd2l0aG91dCBldmVudHMgdGhhdCBhcmUgcGFydCBvZiBhbnkgb2YgdGhlIGdpdmVuIHNvdXJjZXNcblx0ZnVuY3Rpb24gZXhjbHVkZUV2ZW50c0J5U291cmNlcyhzcGVjaWZpY0V2ZW50cywgc3BlY2lmaWNTb3VyY2VzKSB7XG5cdFx0cmV0dXJuICQuZ3JlcChzcGVjaWZpY0V2ZW50cywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3BlY2lmaWNTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChldmVudC5zb3VyY2UgPT09IHNwZWNpZmljU291cmNlc1tpXSkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTsgLy8gZXhjbHVkZVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTsgLy8ga2VlcFxuXHRcdH0pO1xuXHR9XG5cblxuXG5cdC8qIE1hbmlwdWxhdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBPbmx5IGV2ZXIgY2FsbGVkIGZyb20gdGhlIGV4dGVybmFsbHktZmFjaW5nIEFQSVxuXHRmdW5jdGlvbiB1cGRhdGVFdmVudChldmVudCkge1xuXHRcdHVwZGF0ZUV2ZW50cyhbIGV2ZW50IF0pO1xuXHR9XG5cblxuXHQvLyBPbmx5IGV2ZXIgY2FsbGVkIGZyb20gdGhlIGV4dGVybmFsbHktZmFjaW5nIEFQSVxuXHRmdW5jdGlvbiB1cGRhdGVFdmVudHMoZXZlbnRzKSB7XG5cdFx0dmFyIGksIGV2ZW50O1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0ZXZlbnQgPSBldmVudHNbaV07XG5cblx0XHRcdC8vIG1hc3NhZ2Ugc3RhcnQvZW5kIHZhbHVlcywgZXZlbiBpZiBkYXRlIHN0cmluZyB2YWx1ZXNcblx0XHRcdGV2ZW50LnN0YXJ0ID0gdC5tb21lbnQoZXZlbnQuc3RhcnQpO1xuXHRcdFx0aWYgKGV2ZW50LmVuZCkge1xuXHRcdFx0XHRldmVudC5lbmQgPSB0Lm1vbWVudChldmVudC5lbmQpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGV2ZW50LmVuZCA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdG11dGF0ZUV2ZW50KGV2ZW50LCBnZXRNaXNjRXZlbnRQcm9wcyhldmVudCkpOyAvLyB3aWxsIGhhbmRsZSBzdGFydC9lbmQvYWxsRGF5IG5vcm1hbGl6YXRpb25cblx0XHR9XG5cblx0XHRyZXBvcnRFdmVudENoYW5nZSgpOyAvLyByZXBvcnRzIGV2ZW50IG1vZGlmaWNhdGlvbnMgKHNvIHdlIGNhbiByZWRyYXcpXG5cdH1cblxuXG5cdC8vIFJldHVybnMgYSBoYXNoIG9mIG1pc2MgZXZlbnQgcHJvcGVydGllcyB0aGF0IHNob3VsZCBiZSBjb3BpZWQgb3ZlciB0byByZWxhdGVkIGV2ZW50cy5cblx0ZnVuY3Rpb24gZ2V0TWlzY0V2ZW50UHJvcHMoZXZlbnQpIHtcblx0XHR2YXIgcHJvcHMgPSB7fTtcblxuXHRcdCQuZWFjaChldmVudCwgZnVuY3Rpb24obmFtZSwgdmFsKSB7XG5cdFx0XHRpZiAoaXNNaXNjRXZlbnRQcm9wTmFtZShuYW1lKSkge1xuXHRcdFx0XHRpZiAodmFsICE9PSB1bmRlZmluZWQgJiYgaXNBdG9taWModmFsKSkgeyAvLyBhIGRlZmluZWQgbm9uLW9iamVjdFxuXHRcdFx0XHRcdHByb3BzW25hbWVdID0gdmFsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcHJvcHM7XG5cdH1cblxuXHQvLyBub24tZGF0ZS1yZWxhdGVkLCBub24taWQtcmVsYXRlZCwgbm9uLXNlY3JldFxuXHRmdW5jdGlvbiBpc01pc2NFdmVudFByb3BOYW1lKG5hbWUpIHtcblx0XHRyZXR1cm4gIS9eX3xeKGlkfGFsbERheXxzdGFydHxlbmQpJC8udGVzdChuYW1lKTtcblx0fVxuXG5cblx0Ly8gcmV0dXJucyB0aGUgZXhwYW5kZWQgZXZlbnRzIHRoYXQgd2VyZSBjcmVhdGVkXG5cdGZ1bmN0aW9uIHJlbmRlckV2ZW50KGV2ZW50SW5wdXQsIHN0aWNrKSB7XG5cdFx0cmV0dXJuIHJlbmRlckV2ZW50cyhbIGV2ZW50SW5wdXQgXSwgc3RpY2spO1xuXHR9XG5cblxuXHQvLyByZXR1cm5zIHRoZSBleHBhbmRlZCBldmVudHMgdGhhdCB3ZXJlIGNyZWF0ZWRcblx0ZnVuY3Rpb24gcmVuZGVyRXZlbnRzKGV2ZW50SW5wdXRzLCBzdGljaykge1xuXHRcdHZhciByZW5kZXJlZEV2ZW50cyA9IFtdO1xuXHRcdHZhciByZW5kZXJhYmxlRXZlbnRzO1xuXHRcdHZhciBhYnN0cmFjdEV2ZW50O1xuXHRcdHZhciBpLCBqLCBldmVudDtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBldmVudElucHV0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0YWJzdHJhY3RFdmVudCA9IGJ1aWxkRXZlbnRGcm9tSW5wdXQoZXZlbnRJbnB1dHNbaV0pO1xuXG5cdFx0XHRpZiAoYWJzdHJhY3RFdmVudCkgeyAvLyBub3QgZmFsc2UgKGEgdmFsaWQgaW5wdXQpXG5cdFx0XHRcdHJlbmRlcmFibGVFdmVudHMgPSBleHBhbmRFdmVudChhYnN0cmFjdEV2ZW50KTtcblxuXHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgcmVuZGVyYWJsZUV2ZW50cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGV2ZW50ID0gcmVuZGVyYWJsZUV2ZW50c1tqXTtcblxuXHRcdFx0XHRcdGlmICghZXZlbnQuc291cmNlKSB7XG5cdFx0XHRcdFx0XHRpZiAoc3RpY2spIHtcblx0XHRcdFx0XHRcdFx0c3RpY2t5U291cmNlLmV2ZW50cy5wdXNoKGV2ZW50KTtcblx0XHRcdFx0XHRcdFx0ZXZlbnQuc291cmNlID0gc3RpY2t5U291cmNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y2FjaGUucHVzaChldmVudCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVuZGVyZWRFdmVudHMgPSByZW5kZXJlZEV2ZW50cy5jb25jYXQocmVuZGVyYWJsZUV2ZW50cyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHJlbmRlcmVkRXZlbnRzLmxlbmd0aCkgeyAvLyBhbnkgbmV3IGV2ZW50cyByZW5kZXJlZD9cblx0XHRcdHJlcG9ydEV2ZW50Q2hhbmdlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlbmRlcmVkRXZlbnRzO1xuXHR9XG5cblxuXHRmdW5jdGlvbiByZW1vdmVFdmVudHMoZmlsdGVyKSB7XG5cdFx0dmFyIGV2ZW50SUQ7XG5cdFx0dmFyIGk7XG5cblx0XHRpZiAoZmlsdGVyID09IG51bGwpIHsgLy8gbnVsbCBvciB1bmRlZmluZWQuIHJlbW92ZSBhbGwgZXZlbnRzXG5cdFx0XHRmaWx0ZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH07IC8vIHdpbGwgYWx3YXlzIG1hdGNoXG5cdFx0fVxuXHRcdGVsc2UgaWYgKCEkLmlzRnVuY3Rpb24oZmlsdGVyKSkgeyAvLyBhbiBldmVudCBJRFxuXHRcdFx0ZXZlbnRJRCA9IGZpbHRlciArICcnO1xuXHRcdFx0ZmlsdGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0cmV0dXJuIGV2ZW50Ll9pZCA9PSBldmVudElEO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHQvLyBQdXJnZSBldmVudChzKSBmcm9tIG91ciBsb2NhbCBjYWNoZVxuXHRcdGNhY2hlID0gJC5ncmVwKGNhY2hlLCBmaWx0ZXIsIHRydWUpOyAvLyBpbnZlcnNlPXRydWVcblxuXHRcdC8vIFJlbW92ZSBldmVudHMgZnJvbSBhcnJheSBzb3VyY2VzLlxuXHRcdC8vIFRoaXMgd29ya3MgYmVjYXVzZSB0aGV5IGhhdmUgYmVlbiBjb252ZXJ0ZWQgdG8gb2ZmaWNpYWwgRXZlbnQgT2JqZWN0cyB1cCBmcm9udC5cblx0XHQvLyAoYW5kIGFzIGEgcmVzdWx0LCBldmVudC5faWQgaGFzIGJlZW4gY2FsY3VsYXRlZCkuXG5cdFx0Zm9yIChpPTA7IGk8c291cmNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKCQuaXNBcnJheShzb3VyY2VzW2ldLmV2ZW50cykpIHtcblx0XHRcdFx0c291cmNlc1tpXS5ldmVudHMgPSAkLmdyZXAoc291cmNlc1tpXS5ldmVudHMsIGZpbHRlciwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmVwb3J0RXZlbnRDaGFuZ2UoKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gY2xpZW50RXZlbnRzKGZpbHRlcikge1xuXHRcdGlmICgkLmlzRnVuY3Rpb24oZmlsdGVyKSkge1xuXHRcdFx0cmV0dXJuICQuZ3JlcChjYWNoZSwgZmlsdGVyKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoZmlsdGVyICE9IG51bGwpIHsgLy8gbm90IG51bGwsIG5vdCB1bmRlZmluZWQuIGFuIGV2ZW50IElEXG5cdFx0XHRmaWx0ZXIgKz0gJyc7XG5cdFx0XHRyZXR1cm4gJC5ncmVwKGNhY2hlLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdHJldHVybiBlLl9pZCA9PSBmaWx0ZXI7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0cmV0dXJuIGNhY2hlOyAvLyBlbHNlLCByZXR1cm4gYWxsXG5cdH1cblxuXG5cdC8vIE1ha2VzIHN1cmUgYWxsIGFycmF5IGV2ZW50IHNvdXJjZXMgaGF2ZSB0aGVpciBpbnRlcm5hbCBldmVudCBvYmplY3RzXG5cdC8vIGNvbnZlcnRlZCBvdmVyIHRvIHRoZSBDYWxlbmRhcidzIGN1cnJlbnQgdGltZXpvbmUuXG5cdHQucmV6b25lQXJyYXlFdmVudFNvdXJjZXMgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgaTtcblx0XHR2YXIgZXZlbnRzO1xuXHRcdHZhciBqO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNvdXJjZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGV2ZW50cyA9IHNvdXJjZXNbaV0uZXZlbnRzO1xuXHRcdFx0aWYgKCQuaXNBcnJheShldmVudHMpKSB7XG5cblx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IGV2ZW50cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdHJlem9uZUV2ZW50RGF0ZXMoZXZlbnRzW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRmdW5jdGlvbiByZXpvbmVFdmVudERhdGVzKGV2ZW50KSB7XG5cdFx0ZXZlbnQuc3RhcnQgPSB0Lm1vbWVudChldmVudC5zdGFydCk7XG5cdFx0aWYgKGV2ZW50LmVuZCkge1xuXHRcdFx0ZXZlbnQuZW5kID0gdC5tb21lbnQoZXZlbnQuZW5kKTtcblx0XHR9XG5cdFx0YmFja3VwRXZlbnREYXRlcyhldmVudCk7XG5cdH1cblxuXG5cdC8qIEV2ZW50IE5vcm1hbGl6YXRpb25cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gR2l2ZW4gYSByYXcgb2JqZWN0IHdpdGgga2V5L3ZhbHVlIHByb3BlcnRpZXMsIHJldHVybnMgYW4gXCJhYnN0cmFjdFwiIEV2ZW50IG9iamVjdC5cblx0Ly8gQW4gXCJhYnN0cmFjdFwiIGV2ZW50IGlzIGFuIGV2ZW50IHRoYXQsIGlmIHJlY3VycmluZywgd2lsbCBub3QgaGF2ZSBiZWVuIGV4cGFuZGVkIHlldC5cblx0Ly8gV2lsbCByZXR1cm4gYGZhbHNlYCB3aGVuIGlucHV0IGlzIGludmFsaWQuXG5cdC8vIGBzb3VyY2VgIGlzIG9wdGlvbmFsXG5cdGZ1bmN0aW9uIGJ1aWxkRXZlbnRGcm9tSW5wdXQoaW5wdXQsIHNvdXJjZSkge1xuXHRcdHZhciBvdXQgPSB7fTtcblx0XHR2YXIgc3RhcnQsIGVuZDtcblx0XHR2YXIgYWxsRGF5O1xuXG5cdFx0aWYgKHQub3B0aW9ucy5ldmVudERhdGFUcmFuc2Zvcm0pIHtcblx0XHRcdGlucHV0ID0gdC5vcHRpb25zLmV2ZW50RGF0YVRyYW5zZm9ybShpbnB1dCk7XG5cdFx0fVxuXHRcdGlmIChzb3VyY2UgJiYgc291cmNlLmV2ZW50RGF0YVRyYW5zZm9ybSkge1xuXHRcdFx0aW5wdXQgPSBzb3VyY2UuZXZlbnREYXRhVHJhbnNmb3JtKGlucHV0KTtcblx0XHR9XG5cblx0XHQvLyBDb3B5IGFsbCBwcm9wZXJ0aWVzIG92ZXIgdG8gdGhlIHJlc3VsdGluZyBvYmplY3QuXG5cdFx0Ly8gVGhlIHNwZWNpYWwtY2FzZSBwcm9wZXJ0aWVzIHdpbGwgYmUgY29waWVkIG92ZXIgYWZ0ZXJ3YXJkcy5cblx0XHQkLmV4dGVuZChvdXQsIGlucHV0KTtcblxuXHRcdGlmIChzb3VyY2UpIHtcblx0XHRcdG91dC5zb3VyY2UgPSBzb3VyY2U7XG5cdFx0fVxuXG5cdFx0b3V0Ll9pZCA9IGlucHV0Ll9pZCB8fCAoaW5wdXQuaWQgPT09IHVuZGVmaW5lZCA/ICdfZmMnICsgZXZlbnRHVUlEKysgOiBpbnB1dC5pZCArICcnKTtcblxuXHRcdGlmIChpbnB1dC5jbGFzc05hbWUpIHtcblx0XHRcdGlmICh0eXBlb2YgaW5wdXQuY2xhc3NOYW1lID09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdG91dC5jbGFzc05hbWUgPSBpbnB1dC5jbGFzc05hbWUuc3BsaXQoL1xccysvKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgeyAvLyBhc3N1bWVkIHRvIGJlIGFuIGFycmF5XG5cdFx0XHRcdG91dC5jbGFzc05hbWUgPSBpbnB1dC5jbGFzc05hbWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0b3V0LmNsYXNzTmFtZSA9IFtdO1xuXHRcdH1cblxuXHRcdHN0YXJ0ID0gaW5wdXQuc3RhcnQgfHwgaW5wdXQuZGF0ZTsgLy8gXCJkYXRlXCIgaXMgYW4gYWxpYXMgZm9yIFwic3RhcnRcIlxuXHRcdGVuZCA9IGlucHV0LmVuZDtcblxuXHRcdC8vIHBhcnNlIGFzIGEgdGltZSAoRHVyYXRpb24pIGlmIGFwcGxpY2FibGVcblx0XHRpZiAoaXNUaW1lU3RyaW5nKHN0YXJ0KSkge1xuXHRcdFx0c3RhcnQgPSBtb21lbnQuZHVyYXRpb24oc3RhcnQpO1xuXHRcdH1cblx0XHRpZiAoaXNUaW1lU3RyaW5nKGVuZCkpIHtcblx0XHRcdGVuZCA9IG1vbWVudC5kdXJhdGlvbihlbmQpO1xuXHRcdH1cblxuXHRcdGlmIChpbnB1dC5kb3cgfHwgbW9tZW50LmlzRHVyYXRpb24oc3RhcnQpIHx8IG1vbWVudC5pc0R1cmF0aW9uKGVuZCkpIHtcblxuXHRcdFx0Ly8gdGhlIGV2ZW50IGlzIFwiYWJzdHJhY3RcIiAocmVjdXJyaW5nKSBzbyBkb24ndCBjYWxjdWxhdGUgZXhhY3Qgc3RhcnQvZW5kIGRhdGVzIGp1c3QgeWV0XG5cdFx0XHRvdXQuc3RhcnQgPSBzdGFydCA/IG1vbWVudC5kdXJhdGlvbihzdGFydCkgOiBudWxsOyAvLyB3aWxsIGJlIGEgRHVyYXRpb24gb3IgbnVsbFxuXHRcdFx0b3V0LmVuZCA9IGVuZCA/IG1vbWVudC5kdXJhdGlvbihlbmQpIDogbnVsbDsgLy8gd2lsbCBiZSBhIER1cmF0aW9uIG9yIG51bGxcblx0XHRcdG91dC5fcmVjdXJyaW5nID0gdHJ1ZTsgLy8gb3VyIGludGVybmFsIG1hcmtlclxuXHRcdH1cblx0XHRlbHNlIHtcblxuXHRcdFx0aWYgKHN0YXJ0KSB7XG5cdFx0XHRcdHN0YXJ0ID0gdC5tb21lbnQoc3RhcnQpO1xuXHRcdFx0XHRpZiAoIXN0YXJ0LmlzVmFsaWQoKSkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZW5kKSB7XG5cdFx0XHRcdGVuZCA9IHQubW9tZW50KGVuZCk7XG5cdFx0XHRcdGlmICghZW5kLmlzVmFsaWQoKSkge1xuXHRcdFx0XHRcdGVuZCA9IG51bGw7IC8vIGxldCBkZWZhdWx0cyB0YWtlIG92ZXJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRhbGxEYXkgPSBpbnB1dC5hbGxEYXk7XG5cdFx0XHRpZiAoYWxsRGF5ID09PSB1bmRlZmluZWQpIHsgLy8gc3RpbGwgdW5kZWZpbmVkPyBmYWxsYmFjayB0byBkZWZhdWx0XG5cdFx0XHRcdGFsbERheSA9IGZpcnN0RGVmaW5lZChcblx0XHRcdFx0XHRzb3VyY2UgPyBzb3VyY2UuYWxsRGF5RGVmYXVsdCA6IHVuZGVmaW5lZCxcblx0XHRcdFx0XHR0Lm9wdGlvbnMuYWxsRGF5RGVmYXVsdFxuXHRcdFx0XHQpO1xuXHRcdFx0XHQvLyBzdGlsbCB1bmRlZmluZWQ/IG5vcm1hbGl6ZUV2ZW50RGF0ZXMgd2lsbCBjYWxjdWxhdGUgaXRcblx0XHRcdH1cblxuXHRcdFx0YXNzaWduRGF0ZXNUb0V2ZW50KHN0YXJ0LCBlbmQsIGFsbERheSwgb3V0KTtcblx0XHR9XG5cblx0XHR0Lm5vcm1hbGl6ZUV2ZW50KG91dCk7IC8vIGhvb2sgZm9yIGV4dGVybmFsIHVzZS4gYSBwcm90b3R5cGUgbWV0aG9kXG5cblx0XHRyZXR1cm4gb3V0O1xuXHR9XG5cdHQuYnVpbGRFdmVudEZyb21JbnB1dCA9IGJ1aWxkRXZlbnRGcm9tSW5wdXQ7XG5cblxuXHQvLyBOb3JtYWxpemVzIGFuZCBhc3NpZ25zIHRoZSBnaXZlbiBkYXRlcyB0byB0aGUgZ2l2ZW4gcGFydGlhbGx5LWZvcm1lZCBldmVudCBvYmplY3QuXG5cdC8vIE5PVEU6IG11dGF0ZXMgdGhlIGdpdmVuIHN0YXJ0L2VuZCBtb21lbnRzLiBkb2VzIG5vdCBtYWtlIGEgY29weS5cblx0ZnVuY3Rpb24gYXNzaWduRGF0ZXNUb0V2ZW50KHN0YXJ0LCBlbmQsIGFsbERheSwgZXZlbnQpIHtcblx0XHRldmVudC5zdGFydCA9IHN0YXJ0O1xuXHRcdGV2ZW50LmVuZCA9IGVuZDtcblx0XHRldmVudC5hbGxEYXkgPSBhbGxEYXk7XG5cdFx0bm9ybWFsaXplRXZlbnREYXRlcyhldmVudCk7XG5cdFx0YmFja3VwRXZlbnREYXRlcyhldmVudCk7XG5cdH1cblxuXG5cdC8vIEVuc3VyZXMgcHJvcGVyIHZhbHVlcyBmb3IgYWxsRGF5L3N0YXJ0L2VuZC4gQWNjZXB0cyBhbiBFdmVudCBvYmplY3QsIG9yIGEgcGxhaW4gb2JqZWN0IHdpdGggZXZlbnQtaXNoIHByb3BlcnRpZXMuXG5cdC8vIE5PVEU6IFdpbGwgbW9kaWZ5IHRoZSBnaXZlbiBvYmplY3QuXG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZUV2ZW50RGF0ZXMoZXZlbnRQcm9wcykge1xuXG5cdFx0bm9ybWFsaXplRXZlbnRUaW1lcyhldmVudFByb3BzKTtcblxuXHRcdGlmIChldmVudFByb3BzLmVuZCAmJiAhZXZlbnRQcm9wcy5lbmQuaXNBZnRlcihldmVudFByb3BzLnN0YXJ0KSkge1xuXHRcdFx0ZXZlbnRQcm9wcy5lbmQgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmICghZXZlbnRQcm9wcy5lbmQpIHtcblx0XHRcdGlmICh0Lm9wdGlvbnMuZm9yY2VFdmVudER1cmF0aW9uKSB7XG5cdFx0XHRcdGV2ZW50UHJvcHMuZW5kID0gdC5nZXREZWZhdWx0RXZlbnRFbmQoZXZlbnRQcm9wcy5hbGxEYXksIGV2ZW50UHJvcHMuc3RhcnQpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGV2ZW50UHJvcHMuZW5kID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXG5cdC8vIEVuc3VyZXMgdGhlIGFsbERheSBwcm9wZXJ0eSBleGlzdHMgYW5kIHRoZSB0aW1lbGluZXNzIG9mIHRoZSBzdGFydC9lbmQgZGF0ZXMgYXJlIGNvbnNpc3RlbnRcblx0ZnVuY3Rpb24gbm9ybWFsaXplRXZlbnRUaW1lcyhldmVudFByb3BzKSB7XG5cdFx0aWYgKGV2ZW50UHJvcHMuYWxsRGF5ID09IG51bGwpIHtcblx0XHRcdGV2ZW50UHJvcHMuYWxsRGF5ID0gIShldmVudFByb3BzLnN0YXJ0Lmhhc1RpbWUoKSB8fCAoZXZlbnRQcm9wcy5lbmQgJiYgZXZlbnRQcm9wcy5lbmQuaGFzVGltZSgpKSk7XG5cdFx0fVxuXG5cdFx0aWYgKGV2ZW50UHJvcHMuYWxsRGF5KSB7XG5cdFx0XHRldmVudFByb3BzLnN0YXJ0LnN0cmlwVGltZSgpO1xuXHRcdFx0aWYgKGV2ZW50UHJvcHMuZW5kKSB7XG5cdFx0XHRcdC8vIFRPRE86IGNvbnNpZGVyIG5leHREYXlUaHJlc2hvbGQgaGVyZT8gSWYgc28sIHdpbGwgcmVxdWlyZSBhIGxvdCBvZiB0ZXN0aW5nIGFuZCBhZGp1c3RtZW50XG5cdFx0XHRcdGV2ZW50UHJvcHMuZW5kLnN0cmlwVGltZSgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGlmICghZXZlbnRQcm9wcy5zdGFydC5oYXNUaW1lKCkpIHtcblx0XHRcdFx0ZXZlbnRQcm9wcy5zdGFydCA9IHQuYXBwbHlUaW1lem9uZShldmVudFByb3BzLnN0YXJ0LnRpbWUoMCkpOyAvLyB3aWxsIGFzc2lnbiBhIDAwOjAwIHRpbWVcblx0XHRcdH1cblx0XHRcdGlmIChldmVudFByb3BzLmVuZCAmJiAhZXZlbnRQcm9wcy5lbmQuaGFzVGltZSgpKSB7XG5cdFx0XHRcdGV2ZW50UHJvcHMuZW5kID0gdC5hcHBseVRpbWV6b25lKGV2ZW50UHJvcHMuZW5kLnRpbWUoMCkpOyAvLyB3aWxsIGFzc2lnbiBhIDAwOjAwIHRpbWVcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXG5cdC8vIElmIHRoZSBnaXZlbiBldmVudCBpcyBhIHJlY3VycmluZyBldmVudCwgYnJlYWsgaXQgZG93biBpbnRvIGFuIGFycmF5IG9mIGluZGl2aWR1YWwgaW5zdGFuY2VzLlxuXHQvLyBJZiBub3QgYSByZWN1cnJpbmcgZXZlbnQsIHJldHVybiBhbiBhcnJheSB3aXRoIHRoZSBzaW5nbGUgb3JpZ2luYWwgZXZlbnQuXG5cdC8vIElmIGdpdmVuIGEgZmFsc3kgaW5wdXQgKHByb2JhYmx5IGJlY2F1c2Ugb2YgYSBmYWlsZWQgYnVpbGRFdmVudEZyb21JbnB1dCBjYWxsKSwgcmV0dXJucyBhbiBlbXB0eSBhcnJheS5cblx0Ly8gSEFDSzogY2FuIG92ZXJyaWRlIHRoZSByZWN1cnJpbmcgd2luZG93IGJ5IHByb3ZpZGluZyBjdXN0b20gcmFuZ2VTdGFydC9yYW5nZUVuZCAoZm9yIGJ1c2luZXNzSG91cnMpLlxuXHRmdW5jdGlvbiBleHBhbmRFdmVudChhYnN0cmFjdEV2ZW50LCBfcmFuZ2VTdGFydCwgX3JhbmdlRW5kKSB7XG5cdFx0dmFyIGV2ZW50cyA9IFtdO1xuXHRcdHZhciBkb3dIYXNoO1xuXHRcdHZhciBkb3c7XG5cdFx0dmFyIGk7XG5cdFx0dmFyIGRhdGU7XG5cdFx0dmFyIHN0YXJ0VGltZSwgZW5kVGltZTtcblx0XHR2YXIgc3RhcnQsIGVuZDtcblx0XHR2YXIgZXZlbnQ7XG5cblx0XHRfcmFuZ2VTdGFydCA9IF9yYW5nZVN0YXJ0IHx8IHJhbmdlU3RhcnQ7XG5cdFx0X3JhbmdlRW5kID0gX3JhbmdlRW5kIHx8IHJhbmdlRW5kO1xuXG5cdFx0aWYgKGFic3RyYWN0RXZlbnQpIHtcblx0XHRcdGlmIChhYnN0cmFjdEV2ZW50Ll9yZWN1cnJpbmcpIHtcblxuXHRcdFx0XHQvLyBtYWtlIGEgYm9vbGVhbiBoYXNoIGFzIHRvIHdoZXRoZXIgdGhlIGV2ZW50IG9jY3VycyBvbiBlYWNoIGRheS1vZi13ZWVrXG5cdFx0XHRcdGlmICgoZG93ID0gYWJzdHJhY3RFdmVudC5kb3cpKSB7XG5cdFx0XHRcdFx0ZG93SGFzaCA9IHt9O1xuXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBkb3cubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGRvd0hhc2hbZG93W2ldXSA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaXRlcmF0ZSB0aHJvdWdoIGV2ZXJ5IGRheSBpbiB0aGUgY3VycmVudCByYW5nZVxuXHRcdFx0XHRkYXRlID0gX3JhbmdlU3RhcnQuY2xvbmUoKS5zdHJpcFRpbWUoKTsgLy8gaG9sZHMgdGhlIGRhdGUgb2YgdGhlIGN1cnJlbnQgZGF5XG5cdFx0XHRcdHdoaWxlIChkYXRlLmlzQmVmb3JlKF9yYW5nZUVuZCkpIHtcblxuXHRcdFx0XHRcdGlmICghZG93SGFzaCB8fCBkb3dIYXNoW2RhdGUuZGF5KCldKSB7IC8vIGlmIGV2ZXJ5ZGF5LCBvciB0aGlzIHBhcnRpY3VsYXIgZGF5LW9mLXdlZWtcblxuXHRcdFx0XHRcdFx0c3RhcnRUaW1lID0gYWJzdHJhY3RFdmVudC5zdGFydDsgLy8gdGhlIHN0b3JlZCBzdGFydCBhbmQgZW5kIHByb3BlcnRpZXMgYXJlIHRpbWVzIChEdXJhdGlvbnMpXG5cdFx0XHRcdFx0XHRlbmRUaW1lID0gYWJzdHJhY3RFdmVudC5lbmQ7IC8vIFwiXG5cdFx0XHRcdFx0XHRzdGFydCA9IGRhdGUuY2xvbmUoKTtcblx0XHRcdFx0XHRcdGVuZCA9IG51bGw7XG5cblx0XHRcdFx0XHRcdGlmIChzdGFydFRpbWUpIHtcblx0XHRcdFx0XHRcdFx0c3RhcnQgPSBzdGFydC50aW1lKHN0YXJ0VGltZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoZW5kVGltZSkge1xuXHRcdFx0XHRcdFx0XHRlbmQgPSBkYXRlLmNsb25lKCkudGltZShlbmRUaW1lKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZXZlbnQgPSAkLmV4dGVuZCh7fSwgYWJzdHJhY3RFdmVudCk7IC8vIG1ha2UgYSBjb3B5IG9mIHRoZSBvcmlnaW5hbFxuXHRcdFx0XHRcdFx0YXNzaWduRGF0ZXNUb0V2ZW50KFxuXHRcdFx0XHRcdFx0XHRzdGFydCwgZW5kLFxuXHRcdFx0XHRcdFx0XHQhc3RhcnRUaW1lICYmICFlbmRUaW1lLCAvLyBhbGxEYXk/XG5cdFx0XHRcdFx0XHRcdGV2ZW50XG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0ZXZlbnRzLnB1c2goZXZlbnQpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGRhdGUuYWRkKDEsICdkYXlzJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRldmVudHMucHVzaChhYnN0cmFjdEV2ZW50KTsgLy8gcmV0dXJuIHRoZSBvcmlnaW5hbCBldmVudC4gd2lsbCBiZSBhIG9uZS1pdGVtIGFycmF5XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50cztcblx0fVxuXHR0LmV4cGFuZEV2ZW50ID0gZXhwYW5kRXZlbnQ7XG5cblxuXG5cdC8qIEV2ZW50IE1vZGlmaWNhdGlvbiBNYXRoXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIE1vZGlmaWVzIGFuIGV2ZW50IGFuZCBhbGwgcmVsYXRlZCBldmVudHMgYnkgYXBwbHlpbmcgdGhlIGdpdmVuIHByb3BlcnRpZXMuXG5cdC8vIFNwZWNpYWwgZGF0ZS1kaWZmaW5nIGxvZ2ljIGlzIHVzZWQgZm9yIG1hbmlwdWxhdGlvbiBvZiBkYXRlcy5cblx0Ly8gSWYgYHByb3BzYCBkb2VzIG5vdCBjb250YWluIHN0YXJ0L2VuZCBkYXRlcywgdGhlIHVwZGF0ZWQgdmFsdWVzIGFyZSBhc3N1bWVkIHRvIGJlIHRoZSBldmVudCdzIGN1cnJlbnQgc3RhcnQvZW5kLlxuXHQvLyBBbGwgZGF0ZSBjb21wYXJpc29ucyBhcmUgZG9uZSBhZ2FpbnN0IHRoZSBldmVudCdzIHByaXN0aW5lIF9zdGFydCBhbmQgX2VuZCBkYXRlcy5cblx0Ly8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBkZWx0YSBpbmZvcm1hdGlvbiBhbmQgYSBmdW5jdGlvbiB0byB1bmRvIGFsbCBvcGVyYXRpb25zLlxuXHQvLyBGb3IgbWFraW5nIGNvbXB1dGF0aW9ucyBpbiBhIGdyYW51bGFyaXR5IGdyZWF0ZXIgdGhhbiBkYXkvdGltZSwgc3BlY2lmeSBsYXJnZVVuaXQuXG5cdC8vIE5PVEU6IFRoZSBnaXZlbiBgbmV3UHJvcHNgIG1pZ2h0IGJlIG11dGF0ZWQgZm9yIG5vcm1hbGl6YXRpb24gcHVycG9zZXMuXG5cdGZ1bmN0aW9uIG11dGF0ZUV2ZW50KGV2ZW50LCBuZXdQcm9wcywgbGFyZ2VVbml0KSB7XG5cdFx0dmFyIG1pc2NQcm9wcyA9IHt9O1xuXHRcdHZhciBvbGRQcm9wcztcblx0XHR2YXIgY2xlYXJFbmQ7XG5cdFx0dmFyIHN0YXJ0RGVsdGE7XG5cdFx0dmFyIGVuZERlbHRhO1xuXHRcdHZhciBkdXJhdGlvbkRlbHRhO1xuXHRcdHZhciB1bmRvRnVuYztcblxuXHRcdC8vIGRpZmZzIHRoZSBkYXRlcyBpbiB0aGUgYXBwcm9wcmlhdGUgd2F5LCByZXR1cm5pbmcgYSBkdXJhdGlvblxuXHRcdGZ1bmN0aW9uIGRpZmZEYXRlcyhkYXRlMSwgZGF0ZTApIHsgLy8gZGF0ZTEgLSBkYXRlMFxuXHRcdFx0aWYgKGxhcmdlVW5pdCkge1xuXHRcdFx0XHRyZXR1cm4gZGlmZkJ5VW5pdChkYXRlMSwgZGF0ZTAsIGxhcmdlVW5pdCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChuZXdQcm9wcy5hbGxEYXkpIHtcblx0XHRcdFx0cmV0dXJuIGRpZmZEYXkoZGF0ZTEsIGRhdGUwKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZGlmZkRheVRpbWUoZGF0ZTEsIGRhdGUwKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRuZXdQcm9wcyA9IG5ld1Byb3BzIHx8IHt9O1xuXG5cdFx0Ly8gbm9ybWFsaXplIG5ldyBkYXRlLXJlbGF0ZWQgcHJvcGVydGllc1xuXHRcdGlmICghbmV3UHJvcHMuc3RhcnQpIHtcblx0XHRcdG5ld1Byb3BzLnN0YXJ0ID0gZXZlbnQuc3RhcnQuY2xvbmUoKTtcblx0XHR9XG5cdFx0aWYgKG5ld1Byb3BzLmVuZCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRuZXdQcm9wcy5lbmQgPSBldmVudC5lbmQgPyBldmVudC5lbmQuY2xvbmUoKSA6IG51bGw7XG5cdFx0fVxuXHRcdGlmIChuZXdQcm9wcy5hbGxEYXkgPT0gbnVsbCkgeyAvLyBpcyBudWxsIG9yIHVuZGVmaW5lZD9cblx0XHRcdG5ld1Byb3BzLmFsbERheSA9IGV2ZW50LmFsbERheTtcblx0XHR9XG5cdFx0bm9ybWFsaXplRXZlbnREYXRlcyhuZXdQcm9wcyk7XG5cblx0XHQvLyBjcmVhdGUgbm9ybWFsaXplZCB2ZXJzaW9ucyBvZiB0aGUgb3JpZ2luYWwgcHJvcHMgdG8gY29tcGFyZSBhZ2FpbnN0XG5cdFx0Ly8gbmVlZCBhIHJlYWwgZW5kIHZhbHVlLCBmb3IgZGlmZmluZ1xuXHRcdG9sZFByb3BzID0ge1xuXHRcdFx0c3RhcnQ6IGV2ZW50Ll9zdGFydC5jbG9uZSgpLFxuXHRcdFx0ZW5kOiBldmVudC5fZW5kID8gZXZlbnQuX2VuZC5jbG9uZSgpIDogdC5nZXREZWZhdWx0RXZlbnRFbmQoZXZlbnQuX2FsbERheSwgZXZlbnQuX3N0YXJ0KSxcblx0XHRcdGFsbERheTogbmV3UHJvcHMuYWxsRGF5IC8vIG5vcm1hbGl6ZSB0aGUgZGF0ZXMgaW4gdGhlIHNhbWUgcmVnYXJkIGFzIHRoZSBuZXcgcHJvcGVydGllc1xuXHRcdH07XG5cdFx0bm9ybWFsaXplRXZlbnREYXRlcyhvbGRQcm9wcyk7XG5cblx0XHQvLyBuZWVkIHRvIGNsZWFyIHRoZSBlbmQgZGF0ZSBpZiBleHBsaWNpdGx5IGNoYW5nZWQgdG8gbnVsbFxuXHRcdGNsZWFyRW5kID0gZXZlbnQuX2VuZCAhPT0gbnVsbCAmJiBuZXdQcm9wcy5lbmQgPT09IG51bGw7XG5cblx0XHQvLyBjb21wdXRlIHRoZSBkZWx0YSBmb3IgbW92aW5nIHRoZSBzdGFydCBkYXRlXG5cdFx0c3RhcnREZWx0YSA9IGRpZmZEYXRlcyhuZXdQcm9wcy5zdGFydCwgb2xkUHJvcHMuc3RhcnQpO1xuXG5cdFx0Ly8gY29tcHV0ZSB0aGUgZGVsdGEgZm9yIG1vdmluZyB0aGUgZW5kIGRhdGVcblx0XHRpZiAobmV3UHJvcHMuZW5kKSB7XG5cdFx0XHRlbmREZWx0YSA9IGRpZmZEYXRlcyhuZXdQcm9wcy5lbmQsIG9sZFByb3BzLmVuZCk7XG5cdFx0XHRkdXJhdGlvbkRlbHRhID0gZW5kRGVsdGEuc3VidHJhY3Qoc3RhcnREZWx0YSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZHVyYXRpb25EZWx0YSA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gZ2F0aGVyIGFsbCBub24tZGF0ZS1yZWxhdGVkIHByb3BlcnRpZXNcblx0XHQkLmVhY2gobmV3UHJvcHMsIGZ1bmN0aW9uKG5hbWUsIHZhbCkge1xuXHRcdFx0aWYgKGlzTWlzY0V2ZW50UHJvcE5hbWUobmFtZSkpIHtcblx0XHRcdFx0aWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0bWlzY1Byb3BzW25hbWVdID0gdmFsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBhcHBseSB0aGUgb3BlcmF0aW9ucyB0byB0aGUgZXZlbnQgYW5kIGFsbCByZWxhdGVkIGV2ZW50c1xuXHRcdHVuZG9GdW5jID0gbXV0YXRlRXZlbnRzKFxuXHRcdFx0Y2xpZW50RXZlbnRzKGV2ZW50Ll9pZCksIC8vIGdldCBldmVudHMgd2l0aCB0aGlzIElEXG5cdFx0XHRjbGVhckVuZCxcblx0XHRcdG5ld1Byb3BzLmFsbERheSxcblx0XHRcdHN0YXJ0RGVsdGEsXG5cdFx0XHRkdXJhdGlvbkRlbHRhLFxuXHRcdFx0bWlzY1Byb3BzXG5cdFx0KTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRkYXRlRGVsdGE6IHN0YXJ0RGVsdGEsXG5cdFx0XHRkdXJhdGlvbkRlbHRhOiBkdXJhdGlvbkRlbHRhLFxuXHRcdFx0dW5kbzogdW5kb0Z1bmNcblx0XHR9O1xuXHR9XG5cblxuXHQvLyBNb2RpZmllcyBhbiBhcnJheSBvZiBldmVudHMgaW4gdGhlIGZvbGxvd2luZyB3YXlzIChvcGVyYXRpb25zIGFyZSBpbiBvcmRlcik6XG5cdC8vIC0gY2xlYXIgdGhlIGV2ZW50J3MgYGVuZGBcblx0Ly8gLSBjb252ZXJ0IHRoZSBldmVudCB0byBhbGxEYXlcblx0Ly8gLSBhZGQgYGRhdGVEZWx0YWAgdG8gdGhlIHN0YXJ0IGFuZCBlbmRcblx0Ly8gLSBhZGQgYGR1cmF0aW9uRGVsdGFgIHRvIHRoZSBldmVudCdzIGR1cmF0aW9uXG5cdC8vIC0gYXNzaWduIGBtaXNjUHJvcHNgIHRvIHRoZSBldmVudFxuXHQvL1xuXHQvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkIHRvIHVuZG8gYWxsIHRoZSBvcGVyYXRpb25zLlxuXHQvL1xuXHQvLyBUT0RPOiBkb24ndCB1c2Ugc28gbWFueSBjbG9zdXJlcy4gcG9zc2libGUgbWVtb3J5IGlzc3VlcyB3aGVuIGxvdHMgb2YgZXZlbnRzIHdpdGggc2FtZSBJRC5cblx0Ly9cblx0ZnVuY3Rpb24gbXV0YXRlRXZlbnRzKGV2ZW50cywgY2xlYXJFbmQsIGFsbERheSwgZGF0ZURlbHRhLCBkdXJhdGlvbkRlbHRhLCBtaXNjUHJvcHMpIHtcblx0XHR2YXIgaXNBbWJpZ1RpbWV6b25lID0gdC5nZXRJc0FtYmlnVGltZXpvbmUoKTtcblx0XHR2YXIgdW5kb0Z1bmN0aW9ucyA9IFtdO1xuXG5cdFx0Ly8gbm9ybWFsaXplIHplcm8tbGVuZ3RoIGRlbHRhcyB0byBiZSBudWxsXG5cdFx0aWYgKGRhdGVEZWx0YSAmJiAhZGF0ZURlbHRhLnZhbHVlT2YoKSkgeyBkYXRlRGVsdGEgPSBudWxsOyB9XG5cdFx0aWYgKGR1cmF0aW9uRGVsdGEgJiYgIWR1cmF0aW9uRGVsdGEudmFsdWVPZigpKSB7IGR1cmF0aW9uRGVsdGEgPSBudWxsOyB9XG5cblx0XHQkLmVhY2goZXZlbnRzLCBmdW5jdGlvbihpLCBldmVudCkge1xuXHRcdFx0dmFyIG9sZFByb3BzO1xuXHRcdFx0dmFyIG5ld1Byb3BzO1xuXG5cdFx0XHQvLyBidWlsZCBhbiBvYmplY3QgaG9sZGluZyBhbGwgdGhlIG9sZCB2YWx1ZXMsIGJvdGggZGF0ZS1yZWxhdGVkIGFuZCBtaXNjLlxuXHRcdFx0Ly8gZm9yIHRoZSB1bmRvIGZ1bmN0aW9uLlxuXHRcdFx0b2xkUHJvcHMgPSB7XG5cdFx0XHRcdHN0YXJ0OiBldmVudC5zdGFydC5jbG9uZSgpLFxuXHRcdFx0XHRlbmQ6IGV2ZW50LmVuZCA/IGV2ZW50LmVuZC5jbG9uZSgpIDogbnVsbCxcblx0XHRcdFx0YWxsRGF5OiBldmVudC5hbGxEYXlcblx0XHRcdH07XG5cdFx0XHQkLmVhY2gobWlzY1Byb3BzLCBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRcdG9sZFByb3BzW25hbWVdID0gZXZlbnRbbmFtZV07XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gbmV3IGRhdGUtcmVsYXRlZCBwcm9wZXJ0aWVzLiB3b3JrIG9mZiB0aGUgb3JpZ2luYWwgZGF0ZSBzbmFwc2hvdC5cblx0XHRcdC8vIG9rIHRvIHVzZSByZWZlcmVuY2VzIGJlY2F1c2UgdGhleSB3aWxsIGJlIHRocm93biBhd2F5IHdoZW4gYmFja3VwRXZlbnREYXRlcyBpcyBjYWxsZWQuXG5cdFx0XHRuZXdQcm9wcyA9IHtcblx0XHRcdFx0c3RhcnQ6IGV2ZW50Ll9zdGFydCxcblx0XHRcdFx0ZW5kOiBldmVudC5fZW5kLFxuXHRcdFx0XHRhbGxEYXk6IGFsbERheSAvLyBub3JtYWxpemUgdGhlIGRhdGVzIGluIHRoZSBzYW1lIHJlZ2FyZCBhcyB0aGUgbmV3IHByb3BlcnRpZXNcblx0XHRcdH07XG5cdFx0XHRub3JtYWxpemVFdmVudERhdGVzKG5ld1Byb3BzKTsgLy8gbWFzc2FnZXMgc3RhcnQvZW5kL2FsbERheVxuXG5cdFx0XHQvLyBzdHJpcCBvciBlbnN1cmUgdGhlIGVuZCBkYXRlXG5cdFx0XHRpZiAoY2xlYXJFbmQpIHtcblx0XHRcdFx0bmV3UHJvcHMuZW5kID0gbnVsbDtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGR1cmF0aW9uRGVsdGEgJiYgIW5ld1Byb3BzLmVuZCkgeyAvLyB0aGUgZHVyYXRpb24gdHJhbnNsYXRpb24gcmVxdWlyZXMgYW4gZW5kIGRhdGVcblx0XHRcdFx0bmV3UHJvcHMuZW5kID0gdC5nZXREZWZhdWx0RXZlbnRFbmQobmV3UHJvcHMuYWxsRGF5LCBuZXdQcm9wcy5zdGFydCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChkYXRlRGVsdGEpIHtcblx0XHRcdFx0bmV3UHJvcHMuc3RhcnQuYWRkKGRhdGVEZWx0YSk7XG5cdFx0XHRcdGlmIChuZXdQcm9wcy5lbmQpIHtcblx0XHRcdFx0XHRuZXdQcm9wcy5lbmQuYWRkKGRhdGVEZWx0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKGR1cmF0aW9uRGVsdGEpIHtcblx0XHRcdFx0bmV3UHJvcHMuZW5kLmFkZChkdXJhdGlvbkRlbHRhKTsgLy8gZW5kIGFscmVhZHkgZW5zdXJlZCBhYm92ZVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBpZiB0aGUgZGF0ZXMgaGF2ZSBjaGFuZ2VkLCBhbmQgd2Uga25vdyBpdCBpcyBpbXBvc3NpYmxlIHRvIHJlY29tcHV0ZSB0aGVcblx0XHRcdC8vIHRpbWV6b25lIG9mZnNldHMsIHN0cmlwIHRoZSB6b25lLlxuXHRcdFx0aWYgKFxuXHRcdFx0XHRpc0FtYmlnVGltZXpvbmUgJiZcblx0XHRcdFx0IW5ld1Byb3BzLmFsbERheSAmJlxuXHRcdFx0XHQoZGF0ZURlbHRhIHx8IGR1cmF0aW9uRGVsdGEpXG5cdFx0XHQpIHtcblx0XHRcdFx0bmV3UHJvcHMuc3RhcnQuc3RyaXBab25lKCk7XG5cdFx0XHRcdGlmIChuZXdQcm9wcy5lbmQpIHtcblx0XHRcdFx0XHRuZXdQcm9wcy5lbmQuc3RyaXBab25lKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0JC5leHRlbmQoZXZlbnQsIG1pc2NQcm9wcywgbmV3UHJvcHMpOyAvLyBjb3B5IG92ZXIgbWlzYyBwcm9wcywgdGhlbiBkYXRlLXJlbGF0ZWQgcHJvcHNcblx0XHRcdGJhY2t1cEV2ZW50RGF0ZXMoZXZlbnQpOyAvLyByZWdlbmVyYXRlIGludGVybmFsIF9zdGFydC9fZW5kL19hbGxEYXlcblxuXHRcdFx0dW5kb0Z1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkLmV4dGVuZChldmVudCwgb2xkUHJvcHMpO1xuXHRcdFx0XHRiYWNrdXBFdmVudERhdGVzKGV2ZW50KTsgLy8gcmVnZW5lcmF0ZSBpbnRlcm5hbCBfc3RhcnQvX2VuZC9fYWxsRGF5XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdW5kb0Z1bmN0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR1bmRvRnVuY3Rpb25zW2ldKCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG59XG5cblxuLy8gaG9vayBmb3IgZXh0ZXJuYWwgbGlicyB0byBtYW5pcHVsYXRlIGV2ZW50IHByb3BlcnRpZXMgdXBvbiBjcmVhdGlvbi5cbi8vIHNob3VsZCBtYW5pcHVsYXRlIHRoZSBldmVudCBpbi1wbGFjZS5cbkNhbGVuZGFyLnByb3RvdHlwZS5ub3JtYWxpemVFdmVudCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG59O1xuXG5cbi8vIERvZXMgdGhlIGdpdmVuIHNwYW4gKHN0YXJ0LCBlbmQsIGFuZCBvdGhlciBsb2NhdGlvbiBpbmZvcm1hdGlvbilcbi8vIGZ1bGx5IGNvbnRhaW4gdGhlIG90aGVyP1xuQ2FsZW5kYXIucHJvdG90eXBlLnNwYW5Db250YWluc1NwYW4gPSBmdW5jdGlvbihvdXRlclNwYW4sIGlubmVyU3Bhbikge1xuXHR2YXIgZXZlbnRTdGFydCA9IG91dGVyU3Bhbi5zdGFydC5jbG9uZSgpLnN0cmlwWm9uZSgpO1xuXHR2YXIgZXZlbnRFbmQgPSB0aGlzLmdldEV2ZW50RW5kKG91dGVyU3Bhbikuc3RyaXBab25lKCk7XG5cblx0cmV0dXJuIGlubmVyU3Bhbi5zdGFydCA+PSBldmVudFN0YXJ0ICYmIGlubmVyU3Bhbi5lbmQgPD0gZXZlbnRFbmQ7XG59O1xuXG5cbi8vIFJldHVybnMgYSBsaXN0IG9mIGV2ZW50cyB0aGF0IHRoZSBnaXZlbiBldmVudCBzaG91bGQgYmUgY29tcGFyZWQgYWdhaW5zdCB3aGVuIGJlaW5nIGNvbnNpZGVyZWQgZm9yIGEgbW92ZSB0b1xuLy8gdGhlIHNwZWNpZmllZCBzcGFuLiBBdHRhY2hlZCB0byB0aGUgQ2FsZW5kYXIncyBwcm90b3R5cGUgYmVjYXVzZSBFdmVudE1hbmFnZXIgaXMgYSBtaXhpbiBmb3IgYSBDYWxlbmRhci5cbkNhbGVuZGFyLnByb3RvdHlwZS5nZXRQZWVyRXZlbnRzID0gZnVuY3Rpb24oc3BhbiwgZXZlbnQpIHtcblx0dmFyIGNhY2hlID0gdGhpcy5nZXRFdmVudENhY2hlKCk7XG5cdHZhciBwZWVyRXZlbnRzID0gW107XG5cdHZhciBpLCBvdGhlckV2ZW50O1xuXG5cdGZvciAoaSA9IDA7IGkgPCBjYWNoZS5sZW5ndGg7IGkrKykge1xuXHRcdG90aGVyRXZlbnQgPSBjYWNoZVtpXTtcblx0XHRpZiAoXG5cdFx0XHQhZXZlbnQgfHxcblx0XHRcdGV2ZW50Ll9pZCAhPT0gb3RoZXJFdmVudC5faWQgLy8gZG9uJ3QgY29tcGFyZSB0aGUgZXZlbnQgdG8gaXRzZWxmIG9yIG90aGVyIHJlbGF0ZWQgW3JlcGVhdGluZ10gZXZlbnRzXG5cdFx0KSB7XG5cdFx0XHRwZWVyRXZlbnRzLnB1c2gob3RoZXJFdmVudCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHBlZXJFdmVudHM7XG59O1xuXG5cbi8vIHVwZGF0ZXMgdGhlIFwiYmFja3VwXCIgcHJvcGVydGllcywgd2hpY2ggYXJlIHByZXNlcnZlZCBpbiBvcmRlciB0byBjb21wdXRlIGRpZmZzIGxhdGVyIG9uLlxuZnVuY3Rpb24gYmFja3VwRXZlbnREYXRlcyhldmVudCkge1xuXHRldmVudC5fYWxsRGF5ID0gZXZlbnQuYWxsRGF5O1xuXHRldmVudC5fc3RhcnQgPSBldmVudC5zdGFydC5jbG9uZSgpO1xuXHRldmVudC5fZW5kID0gZXZlbnQuZW5kID8gZXZlbnQuZW5kLmNsb25lKCkgOiBudWxsO1xufVxuXG5cbi8qIE92ZXJsYXBwaW5nIC8gQ29uc3RyYWluaW5nXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuLy8gRGV0ZXJtaW5lcyBpZiB0aGUgZ2l2ZW4gZXZlbnQgY2FuIGJlIHJlbG9jYXRlZCB0byB0aGUgZ2l2ZW4gc3BhbiAodW56b25lZCBzdGFydC9lbmQgd2l0aCBvdGhlciBtaXNjIGRhdGEpXG5DYWxlbmRhci5wcm90b3R5cGUuaXNFdmVudFNwYW5BbGxvd2VkID0gZnVuY3Rpb24oc3BhbiwgZXZlbnQpIHtcblx0dmFyIHNvdXJjZSA9IGV2ZW50LnNvdXJjZSB8fCB7fTtcblxuXHR2YXIgY29uc3RyYWludCA9IGZpcnN0RGVmaW5lZChcblx0XHRldmVudC5jb25zdHJhaW50LFxuXHRcdHNvdXJjZS5jb25zdHJhaW50LFxuXHRcdHRoaXMub3B0aW9ucy5ldmVudENvbnN0cmFpbnRcblx0KTtcblxuXHR2YXIgb3ZlcmxhcCA9IGZpcnN0RGVmaW5lZChcblx0XHRldmVudC5vdmVybGFwLFxuXHRcdHNvdXJjZS5vdmVybGFwLFxuXHRcdHRoaXMub3B0aW9ucy5ldmVudE92ZXJsYXBcblx0KTtcblxuXHRyZXR1cm4gdGhpcy5pc1NwYW5BbGxvd2VkKHNwYW4sIGNvbnN0cmFpbnQsIG92ZXJsYXAsIGV2ZW50KSAmJlxuXHRcdCghdGhpcy5vcHRpb25zLmV2ZW50QWxsb3cgfHwgdGhpcy5vcHRpb25zLmV2ZW50QWxsb3coc3BhbiwgZXZlbnQpICE9PSBmYWxzZSk7XG59O1xuXG5cbi8vIERldGVybWluZXMgaWYgYW4gZXh0ZXJuYWwgZXZlbnQgY2FuIGJlIHJlbG9jYXRlZCB0byB0aGUgZ2l2ZW4gc3BhbiAodW56b25lZCBzdGFydC9lbmQgd2l0aCBvdGhlciBtaXNjIGRhdGEpXG5DYWxlbmRhci5wcm90b3R5cGUuaXNFeHRlcm5hbFNwYW5BbGxvd2VkID0gZnVuY3Rpb24oZXZlbnRTcGFuLCBldmVudExvY2F0aW9uLCBldmVudFByb3BzKSB7XG5cdHZhciBldmVudElucHV0O1xuXHR2YXIgZXZlbnQ7XG5cblx0Ly8gbm90ZTogdmVyeSBzaW1pbGFyIGxvZ2ljIGlzIGluIFZpZXcncyByZXBvcnRFeHRlcm5hbERyb3Bcblx0aWYgKGV2ZW50UHJvcHMpIHtcblx0XHRldmVudElucHV0ID0gJC5leHRlbmQoe30sIGV2ZW50UHJvcHMsIGV2ZW50TG9jYXRpb24pO1xuXHRcdGV2ZW50ID0gdGhpcy5leHBhbmRFdmVudChcblx0XHRcdHRoaXMuYnVpbGRFdmVudEZyb21JbnB1dChldmVudElucHV0KVxuXHRcdClbMF07XG5cdH1cblxuXHRpZiAoZXZlbnQpIHtcblx0XHRyZXR1cm4gdGhpcy5pc0V2ZW50U3BhbkFsbG93ZWQoZXZlbnRTcGFuLCBldmVudCk7XG5cdH1cblx0ZWxzZSB7IC8vIHRyZWF0IGl0IGFzIGEgc2VsZWN0aW9uXG5cblx0XHRyZXR1cm4gdGhpcy5pc1NlbGVjdGlvblNwYW5BbGxvd2VkKGV2ZW50U3Bhbik7XG5cdH1cbn07XG5cblxuLy8gRGV0ZXJtaW5lcyB0aGUgZ2l2ZW4gc3BhbiAodW56b25lZCBzdGFydC9lbmQgd2l0aCBvdGhlciBtaXNjIGRhdGEpIGNhbiBiZSBzZWxlY3RlZC5cbkNhbGVuZGFyLnByb3RvdHlwZS5pc1NlbGVjdGlvblNwYW5BbGxvd2VkID0gZnVuY3Rpb24oc3Bhbikge1xuXHRyZXR1cm4gdGhpcy5pc1NwYW5BbGxvd2VkKHNwYW4sIHRoaXMub3B0aW9ucy5zZWxlY3RDb25zdHJhaW50LCB0aGlzLm9wdGlvbnMuc2VsZWN0T3ZlcmxhcCkgJiZcblx0XHQoIXRoaXMub3B0aW9ucy5zZWxlY3RBbGxvdyB8fCB0aGlzLm9wdGlvbnMuc2VsZWN0QWxsb3coc3BhbikgIT09IGZhbHNlKTtcbn07XG5cblxuLy8gUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBzcGFuIChjYXVzZWQgYnkgYW4gZXZlbnQgZHJvcC9yZXNpemUgb3IgYSBzZWxlY3Rpb24pIGlzIGFsbG93ZWQgdG8gZXhpc3Rcbi8vIGFjY29yZGluZyB0byB0aGUgY29uc3RyYWludC9vdmVybGFwIHNldHRpbmdzLlxuLy8gYGV2ZW50YCBpcyBub3QgcmVxdWlyZWQgaWYgY2hlY2tpbmcgYSBzZWxlY3Rpb24uXG5DYWxlbmRhci5wcm90b3R5cGUuaXNTcGFuQWxsb3dlZCA9IGZ1bmN0aW9uKHNwYW4sIGNvbnN0cmFpbnQsIG92ZXJsYXAsIGV2ZW50KSB7XG5cdHZhciBjb25zdHJhaW50RXZlbnRzO1xuXHR2YXIgYW55Q29udGFpbm1lbnQ7XG5cdHZhciBwZWVyRXZlbnRzO1xuXHR2YXIgaSwgcGVlckV2ZW50O1xuXHR2YXIgcGVlck92ZXJsYXA7XG5cblx0Ly8gdGhlIHJhbmdlIG11c3QgYmUgZnVsbHkgY29udGFpbmVkIGJ5IGF0IGxlYXN0IG9uZSBvZiBwcm9kdWNlZCBjb25zdHJhaW50IGV2ZW50c1xuXHRpZiAoY29uc3RyYWludCAhPSBudWxsKSB7XG5cblx0XHQvLyBub3QgdHJlYXRlZCBhcyBhbiBldmVudCEgaW50ZXJtZWRpYXRlIGRhdGEgc3RydWN0dXJlXG5cdFx0Ly8gVE9ETzogdXNlIHJhbmdlcyBpbiB0aGUgZnV0dXJlXG5cdFx0Y29uc3RyYWludEV2ZW50cyA9IHRoaXMuY29uc3RyYWludFRvRXZlbnRzKGNvbnN0cmFpbnQpO1xuXHRcdGlmIChjb25zdHJhaW50RXZlbnRzKSB7IC8vIG5vdCBpbnZhbGlkXG5cblx0XHRcdGFueUNvbnRhaW5tZW50ID0gZmFsc2U7XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgY29uc3RyYWludEV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAodGhpcy5zcGFuQ29udGFpbnNTcGFuKGNvbnN0cmFpbnRFdmVudHNbaV0sIHNwYW4pKSB7XG5cdFx0XHRcdFx0YW55Q29udGFpbm1lbnQgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICghYW55Q29udGFpbm1lbnQpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHBlZXJFdmVudHMgPSB0aGlzLmdldFBlZXJFdmVudHMoc3BhbiwgZXZlbnQpO1xuXG5cdGZvciAoaSA9IDA7IGkgPCBwZWVyRXZlbnRzLmxlbmd0aDsgaSsrKSAge1xuXHRcdHBlZXJFdmVudCA9IHBlZXJFdmVudHNbaV07XG5cblx0XHQvLyB0aGVyZSBuZWVkcyB0byBiZSBhbiBhY3R1YWwgaW50ZXJzZWN0aW9uIGJlZm9yZSBkaXNhbGxvd2luZyBhbnl0aGluZ1xuXHRcdGlmICh0aGlzLmV2ZW50SW50ZXJzZWN0c1JhbmdlKHBlZXJFdmVudCwgc3BhbikpIHtcblxuXHRcdFx0Ly8gZXZhbHVhdGUgb3ZlcmxhcCBmb3IgdGhlIGdpdmVuIHJhbmdlIGFuZCBzaG9ydC1jaXJjdWl0IGlmIG5lY2Vzc2FyeVxuXHRcdFx0aWYgKG92ZXJsYXAgPT09IGZhbHNlKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdC8vIGlmIHRoZSBldmVudCdzIG92ZXJsYXAgaXMgYSB0ZXN0IGZ1bmN0aW9uLCBwYXNzIHRoZSBwZWVyIGV2ZW50IGluIHF1ZXN0aW9uIGFzIHRoZSBmaXJzdCBwYXJhbVxuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIG92ZXJsYXAgPT09ICdmdW5jdGlvbicgJiYgIW92ZXJsYXAocGVlckV2ZW50LCBldmVudCkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBpZiB3ZSBhcmUgY29tcHV0aW5nIGlmIHRoZSBnaXZlbiByYW5nZSBpcyBhbGxvd2FibGUgZm9yIGFuIGV2ZW50LCBjb25zaWRlciB0aGUgb3RoZXIgZXZlbnQnc1xuXHRcdFx0Ly8gRXZlbnRPYmplY3Qtc3BlY2lmaWMgb3IgU291cmNlLXNwZWNpZmljIGBvdmVybGFwYCBwcm9wZXJ0eVxuXHRcdFx0aWYgKGV2ZW50KSB7XG5cdFx0XHRcdHBlZXJPdmVybGFwID0gZmlyc3REZWZpbmVkKFxuXHRcdFx0XHRcdHBlZXJFdmVudC5vdmVybGFwLFxuXHRcdFx0XHRcdChwZWVyRXZlbnQuc291cmNlIHx8IHt9KS5vdmVybGFwXG5cdFx0XHRcdFx0Ly8gd2UgYWxyZWFkeSBjb25zaWRlcmVkIHRoZSBnbG9iYWwgYGV2ZW50T3ZlcmxhcGBcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKHBlZXJPdmVybGFwID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBpZiB0aGUgcGVlciBldmVudCdzIG92ZXJsYXAgaXMgYSB0ZXN0IGZ1bmN0aW9uLCBwYXNzIHRoZSBzdWJqZWN0IGV2ZW50IGFzIHRoZSBmaXJzdCBwYXJhbVxuXHRcdFx0XHRpZiAodHlwZW9mIHBlZXJPdmVybGFwID09PSAnZnVuY3Rpb24nICYmICFwZWVyT3ZlcmxhcChldmVudCwgcGVlckV2ZW50KSkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0cnVlO1xufTtcblxuXG4vLyBHaXZlbiBhbiBldmVudCBpbnB1dCBmcm9tIHRoZSBBUEksIHByb2R1Y2VzIGFuIGFycmF5IG9mIGV2ZW50IG9iamVjdHMuIFBvc3NpYmxlIGV2ZW50IGlucHV0czpcbi8vICdidXNpbmVzc0hvdXJzJ1xuLy8gQW4gZXZlbnQgSUQgKG51bWJlciBvciBzdHJpbmcpXG4vLyBBbiBvYmplY3Qgd2l0aCBzcGVjaWZpYyBzdGFydC9lbmQgZGF0ZXMgb3IgYSByZWN1cnJpbmcgZXZlbnQgKGxpa2Ugd2hhdCBidXNpbmVzc0hvdXJzIGFjY2VwdHMpXG5DYWxlbmRhci5wcm90b3R5cGUuY29uc3RyYWludFRvRXZlbnRzID0gZnVuY3Rpb24oY29uc3RyYWludElucHV0KSB7XG5cblx0aWYgKGNvbnN0cmFpbnRJbnB1dCA9PT0gJ2J1c2luZXNzSG91cnMnKSB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q3VycmVudEJ1c2luZXNzSG91ckV2ZW50cygpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBjb25zdHJhaW50SW5wdXQgPT09ICdvYmplY3QnKSB7XG5cdFx0aWYgKGNvbnN0cmFpbnRJbnB1dC5zdGFydCAhPSBudWxsKSB7IC8vIG5lZWRzIHRvIGJlIGV2ZW50LWxpa2UgaW5wdXRcblx0XHRcdHJldHVybiB0aGlzLmV4cGFuZEV2ZW50KHRoaXMuYnVpbGRFdmVudEZyb21JbnB1dChjb25zdHJhaW50SW5wdXQpKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gbnVsbDsgLy8gaW52YWxpZFxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0aGlzLmNsaWVudEV2ZW50cyhjb25zdHJhaW50SW5wdXQpOyAvLyBwcm9iYWJseSBhbiBJRFxufTtcblxuXG4vLyBEb2VzIHRoZSBldmVudCdzIGRhdGUgcmFuZ2UgaW50ZXJzZWN0IHdpdGggdGhlIGdpdmVuIHJhbmdlP1xuLy8gc3RhcnQvZW5kIGFscmVhZHkgYXNzdW1lZCB0byBoYXZlIHN0cmlwcGVkIHpvbmVzIDooXG5DYWxlbmRhci5wcm90b3R5cGUuZXZlbnRJbnRlcnNlY3RzUmFuZ2UgPSBmdW5jdGlvbihldmVudCwgcmFuZ2UpIHtcblx0dmFyIGV2ZW50U3RhcnQgPSBldmVudC5zdGFydC5jbG9uZSgpLnN0cmlwWm9uZSgpO1xuXHR2YXIgZXZlbnRFbmQgPSB0aGlzLmdldEV2ZW50RW5kKGV2ZW50KS5zdHJpcFpvbmUoKTtcblxuXHRyZXR1cm4gcmFuZ2Uuc3RhcnQgPCBldmVudEVuZCAmJiByYW5nZS5lbmQgPiBldmVudFN0YXJ0O1xufTtcblxuXG4vKiBCdXNpbmVzcyBIb3Vyc1xuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG52YXIgQlVTSU5FU1NfSE9VUl9FVkVOVF9ERUZBVUxUUyA9IHtcblx0aWQ6ICdfZmNCdXNpbmVzc0hvdXJzJywgLy8gd2lsbCByZWxhdGUgZXZlbnRzIGZyb20gZGlmZmVyZW50IGNhbGxzIHRvIGV4cGFuZEV2ZW50XG5cdHN0YXJ0OiAnMDk6MDAnLFxuXHRlbmQ6ICcxNzowMCcsXG5cdGRvdzogWyAxLCAyLCAzLCA0LCA1IF0sIC8vIG1vbmRheSAtIGZyaWRheVxuXHRyZW5kZXJpbmc6ICdpbnZlcnNlLWJhY2tncm91bmQnXG5cdC8vIGNsYXNzTmFtZXMgYXJlIGRlZmluZWQgaW4gYnVzaW5lc3NIb3Vyc1NlZ0NsYXNzZXNcbn07XG5cbi8vIFJldHVybiBldmVudHMgb2JqZWN0cyBmb3IgYnVzaW5lc3MgaG91cnMgd2l0aGluIHRoZSBjdXJyZW50IHZpZXcuXG4vLyBBYnVzZSBvZiBvdXIgZXZlbnQgc3lzdGVtIDooXG5DYWxlbmRhci5wcm90b3R5cGUuZ2V0Q3VycmVudEJ1c2luZXNzSG91ckV2ZW50cyA9IGZ1bmN0aW9uKHdob2xlRGF5KSB7XG5cdHJldHVybiB0aGlzLmNvbXB1dGVCdXNpbmVzc0hvdXJFdmVudHMod2hvbGVEYXksIHRoaXMub3B0aW9ucy5idXNpbmVzc0hvdXJzKTtcbn07XG5cbi8vIEdpdmVuIGEgcmF3IGlucHV0IHZhbHVlIGZyb20gb3B0aW9ucywgcmV0dXJuIGV2ZW50cyBvYmplY3RzIGZvciBidXNpbmVzcyBob3VycyB3aXRoaW4gdGhlIGN1cnJlbnQgdmlldy5cbkNhbGVuZGFyLnByb3RvdHlwZS5jb21wdXRlQnVzaW5lc3NIb3VyRXZlbnRzID0gZnVuY3Rpb24od2hvbGVEYXksIGlucHV0KSB7XG5cdGlmIChpbnB1dCA9PT0gdHJ1ZSkge1xuXHRcdHJldHVybiB0aGlzLmV4cGFuZEJ1c2luZXNzSG91ckV2ZW50cyh3aG9sZURheSwgWyB7fSBdKTtcblx0fVxuXHRlbHNlIGlmICgkLmlzUGxhaW5PYmplY3QoaW5wdXQpKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXhwYW5kQnVzaW5lc3NIb3VyRXZlbnRzKHdob2xlRGF5LCBbIGlucHV0IF0pO1xuXHR9XG5cdGVsc2UgaWYgKCQuaXNBcnJheShpbnB1dCkpIHtcblx0XHRyZXR1cm4gdGhpcy5leHBhbmRCdXNpbmVzc0hvdXJFdmVudHMod2hvbGVEYXksIGlucHV0LCB0cnVlKTtcblx0fVxuXHRlbHNlIHtcblx0XHRyZXR1cm4gW107XG5cdH1cbn07XG5cbi8vIGlucHV0cyBleHBlY3RlZCB0byBiZSBhbiBhcnJheSBvZiBvYmplY3RzLlxuLy8gaWYgaWdub3JlTm9Eb3cgaXMgdHJ1ZSwgd2lsbCBpZ25vcmUgZW50cmllcyB0aGF0IGRvbid0IHNwZWNpZnkgYSBkYXktb2Ytd2VlayAoZG93KSBrZXkuXG5DYWxlbmRhci5wcm90b3R5cGUuZXhwYW5kQnVzaW5lc3NIb3VyRXZlbnRzID0gZnVuY3Rpb24od2hvbGVEYXksIGlucHV0cywgaWdub3JlTm9Eb3cpIHtcblx0dmFyIHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcblx0dmFyIGV2ZW50cyA9IFtdO1xuXHR2YXIgaSwgaW5wdXQ7XG5cblx0Zm9yIChpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuXHRcdGlucHV0ID0gaW5wdXRzW2ldO1xuXG5cdFx0aWYgKGlnbm9yZU5vRG93ICYmICFpbnB1dC5kb3cpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIGdpdmUgZGVmYXVsdHMuIHdpbGwgbWFrZSBhIGNvcHlcblx0XHRpbnB1dCA9ICQuZXh0ZW5kKHt9LCBCVVNJTkVTU19IT1VSX0VWRU5UX0RFRkFVTFRTLCBpbnB1dCk7XG5cblx0XHQvLyBpZiBhIHdob2xlLWRheSBzZXJpZXMgaXMgcmVxdWVzdGVkLCBjbGVhciB0aGUgc3RhcnQvZW5kIHRpbWVzXG5cdFx0aWYgKHdob2xlRGF5KSB7XG5cdFx0XHRpbnB1dC5zdGFydCA9IG51bGw7XG5cdFx0XHRpbnB1dC5lbmQgPSBudWxsO1xuXHRcdH1cblxuXHRcdGV2ZW50cy5wdXNoLmFwcGx5KGV2ZW50cywgLy8gYXBwZW5kXG5cdFx0XHR0aGlzLmV4cGFuZEV2ZW50KFxuXHRcdFx0XHR0aGlzLmJ1aWxkRXZlbnRGcm9tSW5wdXQoaW5wdXQpLFxuXHRcdFx0XHR2aWV3LnN0YXJ0LFxuXHRcdFx0XHR2aWV3LmVuZFxuXHRcdFx0KVxuXHRcdCk7XG5cdH1cblxuXHRyZXR1cm4gZXZlbnRzO1xufTtcblxuOztcblxuLyogQW4gYWJzdHJhY3QgY2xhc3MgZm9yIHRoZSBcImJhc2ljXCIgdmlld3MsIGFzIHdlbGwgYXMgbW9udGggdmlldy4gUmVuZGVycyBvbmUgb3IgbW9yZSByb3dzIG9mIGRheSBjZWxscy5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLy8gSXQgaXMgYSBtYW5hZ2VyIGZvciBhIERheUdyaWQgc3ViY29tcG9uZW50LCB3aGljaCBkb2VzIG1vc3Qgb2YgdGhlIGhlYXZ5IGxpZnRpbmcuXG4vLyBJdCBpcyByZXNwb25zaWJsZSBmb3IgbWFuYWdpbmcgd2lkdGgvaGVpZ2h0LlxuXG52YXIgQmFzaWNWaWV3ID0gRkMuQmFzaWNWaWV3ID0gVmlldy5leHRlbmQoe1xuXG5cdHNjcm9sbGVyOiBudWxsLFxuXG5cdGRheUdyaWRDbGFzczogRGF5R3JpZCwgLy8gY2xhc3MgdGhlIGRheUdyaWQgd2lsbCBiZSBpbnN0YW50aWF0ZWQgZnJvbSAob3ZlcnJpZGFibGUgYnkgc3ViY2xhc3Nlcylcblx0ZGF5R3JpZDogbnVsbCwgLy8gdGhlIG1haW4gc3ViY29tcG9uZW50IHRoYXQgZG9lcyBtb3N0IG9mIHRoZSBoZWF2eSBsaWZ0aW5nXG5cblx0ZGF5TnVtYmVyc1Zpc2libGU6IGZhbHNlLCAvLyBkaXNwbGF5IGRheSBudW1iZXJzIG9uIGVhY2ggZGF5IGNlbGw/XG5cdGNvbFdlZWtOdW1iZXJzVmlzaWJsZTogZmFsc2UsIC8vIGRpc3BsYXkgd2VlayBudW1iZXJzIGFsb25nIHRoZSBzaWRlP1xuXHRjZWxsV2Vla051bWJlcnNWaXNpYmxlOiBmYWxzZSwgLy8gZGlzcGxheSB3ZWVrIG51bWJlcnMgaW4gZGF5IGNlbGw/XG5cblx0d2Vla051bWJlcldpZHRoOiBudWxsLCAvLyB3aWR0aCBvZiBhbGwgdGhlIHdlZWstbnVtYmVyIGNlbGxzIHJ1bm5pbmcgZG93biB0aGUgc2lkZVxuXG5cdGhlYWRDb250YWluZXJFbDogbnVsbCwgLy8gZGl2IHRoYXQgaG9sZCdzIHRoZSBkYXlHcmlkJ3MgcmVuZGVyZWQgZGF0ZSBoZWFkZXJcblx0aGVhZFJvd0VsOiBudWxsLCAvLyB0aGUgZmFrZSByb3cgZWxlbWVudCBvZiB0aGUgZGF5LW9mLXdlZWsgaGVhZGVyXG5cblxuXHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmRheUdyaWQgPSB0aGlzLmluc3RhbnRpYXRlRGF5R3JpZCgpO1xuXG5cdFx0dGhpcy5zY3JvbGxlciA9IG5ldyBTY3JvbGxlcih7XG5cdFx0XHRvdmVyZmxvd1g6ICdoaWRkZW4nLFxuXHRcdFx0b3ZlcmZsb3dZOiAnYXV0bydcblx0XHR9KTtcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgRGF5R3JpZCBvYmplY3QgdGhpcyB2aWV3IG5lZWRzLiBEcmF3cyBmcm9tIHRoaXMuZGF5R3JpZENsYXNzXG5cdGluc3RhbnRpYXRlRGF5R3JpZDogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gZ2VuZXJhdGUgYSBzdWJjbGFzcyBvbiB0aGUgZmx5IHdpdGggQmFzaWNWaWV3LXNwZWNpZmljIGJlaGF2aW9yXG5cdFx0Ly8gVE9ETzogY2FjaGUgdGhpcyBzdWJjbGFzc1xuXHRcdHZhciBzdWJjbGFzcyA9IHRoaXMuZGF5R3JpZENsYXNzLmV4dGVuZChiYXNpY0RheUdyaWRNZXRob2RzKTtcblxuXHRcdHJldHVybiBuZXcgc3ViY2xhc3ModGhpcyk7XG5cdH0sXG5cblxuXHQvLyBTZXRzIHRoZSBkaXNwbGF5IHJhbmdlIGFuZCBjb21wdXRlcyBhbGwgbmVjZXNzYXJ5IGRhdGVzXG5cdHNldFJhbmdlOiBmdW5jdGlvbihyYW5nZSkge1xuXHRcdFZpZXcucHJvdG90eXBlLnNldFJhbmdlLmNhbGwodGhpcywgcmFuZ2UpOyAvLyBjYWxsIHRoZSBzdXBlci1tZXRob2RcblxuXHRcdHRoaXMuZGF5R3JpZC5icmVha09uV2Vla3MgPSAveWVhcnxtb250aHx3ZWVrLy50ZXN0KHRoaXMuaW50ZXJ2YWxVbml0KTsgLy8gZG8gYmVmb3JlIHNldFJhbmdlXG5cdFx0dGhpcy5kYXlHcmlkLnNldFJhbmdlKHJhbmdlKTtcblx0fSxcblxuXG5cdC8vIENvbXB1dGUgdGhlIHZhbHVlIHRvIGZlZWQgaW50byBzZXRSYW5nZS4gT3ZlcnJpZGVzIHN1cGVyY2xhc3MuXG5cdGNvbXB1dGVSYW5nZTogZnVuY3Rpb24oZGF0ZSkge1xuXHRcdHZhciByYW5nZSA9IFZpZXcucHJvdG90eXBlLmNvbXB1dGVSYW5nZS5jYWxsKHRoaXMsIGRhdGUpOyAvLyBnZXQgdmFsdWUgZnJvbSB0aGUgc3VwZXItbWV0aG9kXG5cblx0XHQvLyB5ZWFyIGFuZCBtb250aCB2aWV3cyBzaG91bGQgYmUgYWxpZ25lZCB3aXRoIHdlZWtzLiB0aGlzIGlzIGFscmVhZHkgZG9uZSBmb3Igd2Vla1xuXHRcdGlmICgveWVhcnxtb250aC8udGVzdChyYW5nZS5pbnRlcnZhbFVuaXQpKSB7XG5cdFx0XHRyYW5nZS5zdGFydC5zdGFydE9mKCd3ZWVrJyk7XG5cdFx0XHRyYW5nZS5zdGFydCA9IHRoaXMuc2tpcEhpZGRlbkRheXMocmFuZ2Uuc3RhcnQpO1xuXG5cdFx0XHQvLyBtYWtlIGVuZC1vZi13ZWVrIGlmIG5vdCBhbHJlYWR5XG5cdFx0XHRpZiAocmFuZ2UuZW5kLndlZWtkYXkoKSkge1xuXHRcdFx0XHRyYW5nZS5lbmQuYWRkKDEsICd3ZWVrJykuc3RhcnRPZignd2VlaycpO1xuXHRcdFx0XHRyYW5nZS5lbmQgPSB0aGlzLnNraXBIaWRkZW5EYXlzKHJhbmdlLmVuZCwgLTEsIHRydWUpOyAvLyBleGNsdXNpdmVseSBtb3ZlIGJhY2t3YXJkc1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByYW5nZTtcblx0fSxcblxuXG5cdC8vIFJlbmRlcnMgdGhlIHZpZXcgaW50byBgdGhpcy5lbGAsIHdoaWNoIHNob3VsZCBhbHJlYWR5IGJlIGFzc2lnbmVkXG5cdHJlbmRlckRhdGVzOiBmdW5jdGlvbigpIHtcblxuXHRcdHRoaXMuZGF5TnVtYmVyc1Zpc2libGUgPSB0aGlzLmRheUdyaWQucm93Q250ID4gMTsgLy8gVE9ETzogbWFrZSBncmlkIHJlc3BvbnNpYmxlXG5cdFx0aWYgKHRoaXMub3B0KCd3ZWVrTnVtYmVycycpKSB7XG5cdFx0XHRpZiAodGhpcy5vcHQoJ3dlZWtOdW1iZXJzV2l0aGluRGF5cycpKSB7XG5cdFx0XHRcdHRoaXMuY2VsbFdlZWtOdW1iZXJzVmlzaWJsZSA9IHRydWU7XG5cdFx0XHRcdHRoaXMuY29sV2Vla051bWJlcnNWaXNpYmxlID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dGhpcy5jZWxsV2Vla051bWJlcnNWaXNpYmxlID0gZmFsc2U7XG5cdFx0XHRcdHRoaXMuY29sV2Vla051bWJlcnNWaXNpYmxlID0gdHJ1ZTtcblx0XHRcdH07XG5cdFx0fVxuXHRcdHRoaXMuZGF5R3JpZC5udW1iZXJzVmlzaWJsZSA9IHRoaXMuZGF5TnVtYmVyc1Zpc2libGUgfHxcblx0XHRcdHRoaXMuY2VsbFdlZWtOdW1iZXJzVmlzaWJsZSB8fCB0aGlzLmNvbFdlZWtOdW1iZXJzVmlzaWJsZTtcblxuXHRcdHRoaXMuZWwuYWRkQ2xhc3MoJ2ZjLWJhc2ljLXZpZXcnKS5odG1sKHRoaXMucmVuZGVyU2tlbGV0b25IdG1sKCkpO1xuXHRcdHRoaXMucmVuZGVySGVhZCgpO1xuXG5cdFx0dGhpcy5zY3JvbGxlci5yZW5kZXIoKTtcblx0XHR2YXIgZGF5R3JpZENvbnRhaW5lckVsID0gdGhpcy5zY3JvbGxlci5lbC5hZGRDbGFzcygnZmMtZGF5LWdyaWQtY29udGFpbmVyJyk7XG5cdFx0dmFyIGRheUdyaWRFbCA9ICQoJzxkaXYgY2xhc3M9XCJmYy1kYXktZ3JpZFwiIC8+JykuYXBwZW5kVG8oZGF5R3JpZENvbnRhaW5lckVsKTtcblx0XHR0aGlzLmVsLmZpbmQoJy5mYy1ib2R5ID4gdHIgPiB0ZCcpLmFwcGVuZChkYXlHcmlkQ29udGFpbmVyRWwpO1xuXG5cdFx0dGhpcy5kYXlHcmlkLnNldEVsZW1lbnQoZGF5R3JpZEVsKTtcblx0XHR0aGlzLmRheUdyaWQucmVuZGVyRGF0ZXModGhpcy5oYXNSaWdpZFJvd3MoKSk7XG5cdH0sXG5cblxuXHQvLyByZW5kZXIgdGhlIGRheS1vZi13ZWVrIGhlYWRlcnNcblx0cmVuZGVySGVhZDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5oZWFkQ29udGFpbmVyRWwgPVxuXHRcdFx0dGhpcy5lbC5maW5kKCcuZmMtaGVhZC1jb250YWluZXInKVxuXHRcdFx0XHQuaHRtbCh0aGlzLmRheUdyaWQucmVuZGVySGVhZEh0bWwoKSk7XG5cdFx0dGhpcy5oZWFkUm93RWwgPSB0aGlzLmhlYWRDb250YWluZXJFbC5maW5kKCcuZmMtcm93Jyk7XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgdGhlIGNvbnRlbnQgb2YgdGhlIHZpZXcuIFNpbmNlIHdlIGhhdmVuJ3Qgc2VwYXJhdGVkIHNrZWxldG9uIHJlbmRlcmluZyBmcm9tIGRhdGUgcmVuZGVyaW5nLFxuXHQvLyBhbHdheXMgY29tcGxldGVseSBraWxsIHRoZSBkYXlHcmlkJ3MgcmVuZGVyaW5nLlxuXHR1bnJlbmRlckRhdGVzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmRheUdyaWQudW5yZW5kZXJEYXRlcygpO1xuXHRcdHRoaXMuZGF5R3JpZC5yZW1vdmVFbGVtZW50KCk7XG5cdFx0dGhpcy5zY3JvbGxlci5kZXN0cm95KCk7XG5cdH0sXG5cblxuXHRyZW5kZXJCdXNpbmVzc0hvdXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmRheUdyaWQucmVuZGVyQnVzaW5lc3NIb3VycygpO1xuXHR9LFxuXG5cblx0dW5yZW5kZXJCdXNpbmVzc0hvdXJzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmRheUdyaWQudW5yZW5kZXJCdXNpbmVzc0hvdXJzKCk7XG5cdH0sXG5cblxuXHQvLyBCdWlsZHMgdGhlIEhUTUwgc2tlbGV0b24gZm9yIHRoZSB2aWV3LlxuXHQvLyBUaGUgZGF5LWdyaWQgY29tcG9uZW50IHdpbGwgcmVuZGVyIGluc2lkZSBvZiBhIGNvbnRhaW5lciBkZWZpbmVkIGJ5IHRoaXMgSFRNTC5cblx0cmVuZGVyU2tlbGV0b25IdG1sOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gJycgK1xuXHRcdFx0Jzx0YWJsZT4nICtcblx0XHRcdFx0Jzx0aGVhZCBjbGFzcz1cImZjLWhlYWRcIj4nICtcblx0XHRcdFx0XHQnPHRyPicgK1xuXHRcdFx0XHRcdFx0Jzx0ZCBjbGFzcz1cImZjLWhlYWQtY29udGFpbmVyICcgKyB0aGlzLndpZGdldEhlYWRlckNsYXNzICsgJ1wiPjwvdGQ+JyArXG5cdFx0XHRcdFx0JzwvdHI+JyArXG5cdFx0XHRcdCc8L3RoZWFkPicgK1xuXHRcdFx0XHQnPHRib2R5IGNsYXNzPVwiZmMtYm9keVwiPicgK1xuXHRcdFx0XHRcdCc8dHI+JyArXG5cdFx0XHRcdFx0XHQnPHRkIGNsYXNzPVwiJyArIHRoaXMud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiPjwvdGQ+JyArXG5cdFx0XHRcdFx0JzwvdHI+JyArXG5cdFx0XHRcdCc8L3Rib2R5PicgK1xuXHRcdFx0JzwvdGFibGU+Jztcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyBhbiBIVE1MIGF0dHJpYnV0ZSBzdHJpbmcgZm9yIHNldHRpbmcgdGhlIHdpZHRoIG9mIHRoZSB3ZWVrIG51bWJlciBjb2x1bW4sIGlmIGl0IGlzIGtub3duXG5cdHdlZWtOdW1iZXJTdHlsZUF0dHI6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLndlZWtOdW1iZXJXaWR0aCAhPT0gbnVsbCkge1xuXHRcdFx0cmV0dXJuICdzdHlsZT1cIndpZHRoOicgKyB0aGlzLndlZWtOdW1iZXJXaWR0aCArICdweFwiJztcblx0XHR9XG5cdFx0cmV0dXJuICcnO1xuXHR9LFxuXG5cblx0Ly8gRGV0ZXJtaW5lcyB3aGV0aGVyIGVhY2ggcm93IHNob3VsZCBoYXZlIGEgY29uc3RhbnQgaGVpZ2h0XG5cdGhhc1JpZ2lkUm93czogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGV2ZW50TGltaXQgPSB0aGlzLm9wdCgnZXZlbnRMaW1pdCcpO1xuXHRcdHJldHVybiBldmVudExpbWl0ICYmIHR5cGVvZiBldmVudExpbWl0ICE9PSAnbnVtYmVyJztcblx0fSxcblxuXG5cdC8qIERpbWVuc2lvbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlZnJlc2hlcyB0aGUgaG9yaXpvbnRhbCBkaW1lbnNpb25zIG9mIHRoZSB2aWV3XG5cdHVwZGF0ZVdpZHRoOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5jb2xXZWVrTnVtYmVyc1Zpc2libGUpIHtcblx0XHRcdC8vIE1ha2Ugc3VyZSBhbGwgd2VlayBudW1iZXIgY2VsbHMgcnVubmluZyBkb3duIHRoZSBzaWRlIGhhdmUgdGhlIHNhbWUgd2lkdGguXG5cdFx0XHQvLyBSZWNvcmQgdGhlIHdpZHRoIGZvciBjZWxscyBjcmVhdGVkIGxhdGVyLlxuXHRcdFx0dGhpcy53ZWVrTnVtYmVyV2lkdGggPSBtYXRjaENlbGxXaWR0aHMoXG5cdFx0XHRcdHRoaXMuZWwuZmluZCgnLmZjLXdlZWstbnVtYmVyJylcblx0XHRcdCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gQWRqdXN0cyB0aGUgdmVydGljYWwgZGltZW5zaW9ucyBvZiB0aGUgdmlldyB0byB0aGUgc3BlY2lmaWVkIHZhbHVlc1xuXHRzZXRIZWlnaHQ6IGZ1bmN0aW9uKHRvdGFsSGVpZ2h0LCBpc0F1dG8pIHtcblx0XHR2YXIgZXZlbnRMaW1pdCA9IHRoaXMub3B0KCdldmVudExpbWl0Jyk7XG5cdFx0dmFyIHNjcm9sbGVySGVpZ2h0O1xuXHRcdHZhciBzY3JvbGxiYXJXaWR0aHM7XG5cblx0XHQvLyByZXNldCBhbGwgaGVpZ2h0cyB0byBiZSBuYXR1cmFsXG5cdFx0dGhpcy5zY3JvbGxlci5jbGVhcigpO1xuXHRcdHVuY29tcGVuc2F0ZVNjcm9sbCh0aGlzLmhlYWRSb3dFbCk7XG5cblx0XHR0aGlzLmRheUdyaWQucmVtb3ZlU2VnUG9wb3ZlcigpOyAvLyBraWxsIHRoZSBcIm1vcmVcIiBwb3BvdmVyIGlmIGRpc3BsYXllZFxuXG5cdFx0Ly8gaXMgdGhlIGV2ZW50IGxpbWl0IGEgY29uc3RhbnQgbGV2ZWwgbnVtYmVyP1xuXHRcdGlmIChldmVudExpbWl0ICYmIHR5cGVvZiBldmVudExpbWl0ID09PSAnbnVtYmVyJykge1xuXHRcdFx0dGhpcy5kYXlHcmlkLmxpbWl0Um93cyhldmVudExpbWl0KTsgLy8gbGltaXQgdGhlIGxldmVscyBmaXJzdCBzbyB0aGUgaGVpZ2h0IGNhbiByZWRpc3RyaWJ1dGUgYWZ0ZXJcblx0XHR9XG5cblx0XHQvLyBkaXN0cmlidXRlIHRoZSBoZWlnaHQgdG8gdGhlIHJvd3Ncblx0XHQvLyAodG90YWxIZWlnaHQgaXMgYSBcInJlY29tbWVuZGVkXCIgdmFsdWUgaWYgaXNBdXRvKVxuXHRcdHNjcm9sbGVySGVpZ2h0ID0gdGhpcy5jb21wdXRlU2Nyb2xsZXJIZWlnaHQodG90YWxIZWlnaHQpO1xuXHRcdHRoaXMuc2V0R3JpZEhlaWdodChzY3JvbGxlckhlaWdodCwgaXNBdXRvKTtcblxuXHRcdC8vIGlzIHRoZSBldmVudCBsaW1pdCBkeW5hbWljYWxseSBjYWxjdWxhdGVkP1xuXHRcdGlmIChldmVudExpbWl0ICYmIHR5cGVvZiBldmVudExpbWl0ICE9PSAnbnVtYmVyJykge1xuXHRcdFx0dGhpcy5kYXlHcmlkLmxpbWl0Um93cyhldmVudExpbWl0KTsgLy8gbGltaXQgdGhlIGxldmVscyBhZnRlciB0aGUgZ3JpZCdzIHJvdyBoZWlnaHRzIGhhdmUgYmVlbiBzZXRcblx0XHR9XG5cblx0XHRpZiAoIWlzQXV0bykgeyAvLyBzaG91bGQgd2UgZm9yY2UgZGltZW5zaW9ucyBvZiB0aGUgc2Nyb2xsIGNvbnRhaW5lcj9cblxuXHRcdFx0dGhpcy5zY3JvbGxlci5zZXRIZWlnaHQoc2Nyb2xsZXJIZWlnaHQpO1xuXHRcdFx0c2Nyb2xsYmFyV2lkdGhzID0gdGhpcy5zY3JvbGxlci5nZXRTY3JvbGxiYXJXaWR0aHMoKTtcblxuXHRcdFx0aWYgKHNjcm9sbGJhcldpZHRocy5sZWZ0IHx8IHNjcm9sbGJhcldpZHRocy5yaWdodCkgeyAvLyB1c2luZyBzY3JvbGxiYXJzP1xuXG5cdFx0XHRcdGNvbXBlbnNhdGVTY3JvbGwodGhpcy5oZWFkUm93RWwsIHNjcm9sbGJhcldpZHRocyk7XG5cblx0XHRcdFx0Ly8gZG9pbmcgdGhlIHNjcm9sbGJhciBjb21wZW5zYXRpb24gbWlnaHQgaGF2ZSBjcmVhdGVkIHRleHQgb3ZlcmZsb3cgd2hpY2ggY3JlYXRlZCBtb3JlIGhlaWdodC4gcmVkb1xuXHRcdFx0XHRzY3JvbGxlckhlaWdodCA9IHRoaXMuY29tcHV0ZVNjcm9sbGVySGVpZ2h0KHRvdGFsSGVpZ2h0KTtcblx0XHRcdFx0dGhpcy5zY3JvbGxlci5zZXRIZWlnaHQoc2Nyb2xsZXJIZWlnaHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBndWFyYW50ZWVzIHRoZSBzYW1lIHNjcm9sbGJhciB3aWR0aHNcblx0XHRcdHRoaXMuc2Nyb2xsZXIubG9ja092ZXJmbG93KHNjcm9sbGJhcldpZHRocyk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gZ2l2ZW4gYSBkZXNpcmVkIHRvdGFsIGhlaWdodCBvZiB0aGUgdmlldywgcmV0dXJucyB3aGF0IHRoZSBoZWlnaHQgb2YgdGhlIHNjcm9sbGVyIHNob3VsZCBiZVxuXHRjb21wdXRlU2Nyb2xsZXJIZWlnaHQ6IGZ1bmN0aW9uKHRvdGFsSGVpZ2h0KSB7XG5cdFx0cmV0dXJuIHRvdGFsSGVpZ2h0IC1cblx0XHRcdHN1YnRyYWN0SW5uZXJFbEhlaWdodCh0aGlzLmVsLCB0aGlzLnNjcm9sbGVyLmVsKTsgLy8gZXZlcnl0aGluZyB0aGF0J3MgTk9UIHRoZSBzY3JvbGxlclxuXHR9LFxuXG5cblx0Ly8gU2V0cyB0aGUgaGVpZ2h0IG9mIGp1c3QgdGhlIERheUdyaWQgY29tcG9uZW50IGluIHRoaXMgdmlld1xuXHRzZXRHcmlkSGVpZ2h0OiBmdW5jdGlvbihoZWlnaHQsIGlzQXV0bykge1xuXHRcdGlmIChpc0F1dG8pIHtcblx0XHRcdHVuZGlzdHJpYnV0ZUhlaWdodCh0aGlzLmRheUdyaWQucm93RWxzKTsgLy8gbGV0IHRoZSByb3dzIGJlIHRoZWlyIG5hdHVyYWwgaGVpZ2h0IHdpdGggbm8gZXhwYW5kaW5nXG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZGlzdHJpYnV0ZUhlaWdodCh0aGlzLmRheUdyaWQucm93RWxzLCBoZWlnaHQsIHRydWUpOyAvLyB0cnVlID0gY29tcGVuc2F0ZSBmb3IgaGVpZ2h0LWhvZ2dpbmcgcm93c1xuXHRcdH1cblx0fSxcblxuXG5cdC8qIFNjcm9sbFxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Y29tcHV0ZUluaXRpYWxTY3JvbGw6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB7IHRvcDogMCB9O1xuXHR9LFxuXG5cblx0cXVlcnlTY3JvbGw6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB7IHRvcDogdGhpcy5zY3JvbGxlci5nZXRTY3JvbGxUb3AoKSB9O1xuXHR9LFxuXG5cblx0c2V0U2Nyb2xsOiBmdW5jdGlvbihzY3JvbGwpIHtcblx0XHR0aGlzLnNjcm9sbGVyLnNldFNjcm9sbFRvcChzY3JvbGwudG9wKTtcblx0fSxcblxuXG5cdC8qIEhpdCBBcmVhc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHQvLyBmb3J3YXJkIGFsbCBoaXQtcmVsYXRlZCBtZXRob2QgY2FsbHMgdG8gZGF5R3JpZFxuXG5cblx0cHJlcGFyZUhpdHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZGF5R3JpZC5wcmVwYXJlSGl0cygpO1xuXHR9LFxuXG5cblx0cmVsZWFzZUhpdHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZGF5R3JpZC5yZWxlYXNlSGl0cygpO1xuXHR9LFxuXG5cblx0cXVlcnlIaXQ6IGZ1bmN0aW9uKGxlZnQsIHRvcCkge1xuXHRcdHJldHVybiB0aGlzLmRheUdyaWQucXVlcnlIaXQobGVmdCwgdG9wKTtcblx0fSxcblxuXG5cdGdldEhpdFNwYW46IGZ1bmN0aW9uKGhpdCkge1xuXHRcdHJldHVybiB0aGlzLmRheUdyaWQuZ2V0SGl0U3BhbihoaXQpO1xuXHR9LFxuXG5cblx0Z2V0SGl0RWw6IGZ1bmN0aW9uKGhpdCkge1xuXHRcdHJldHVybiB0aGlzLmRheUdyaWQuZ2V0SGl0RWwoaGl0KTtcblx0fSxcblxuXG5cdC8qIEV2ZW50c1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyB0aGUgZ2l2ZW4gZXZlbnRzIG9udG8gdGhlIHZpZXcgYW5kIHBvcHVsYXRlcyB0aGUgc2VnbWVudHMgYXJyYXlcblx0cmVuZGVyRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcblx0XHR0aGlzLmRheUdyaWQucmVuZGVyRXZlbnRzKGV2ZW50cyk7XG5cblx0XHR0aGlzLnVwZGF0ZUhlaWdodCgpOyAvLyBtdXN0IGNvbXBlbnNhdGUgZm9yIGV2ZW50cyB0aGF0IG92ZXJmbG93IHRoZSByb3dcblx0fSxcblxuXG5cdC8vIFJldHJpZXZlcyBhbGwgc2VnbWVudCBvYmplY3RzIHRoYXQgYXJlIHJlbmRlcmVkIGluIHRoZSB2aWV3XG5cdGdldEV2ZW50U2VnczogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZGF5R3JpZC5nZXRFdmVudFNlZ3MoKTtcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhbGwgZXZlbnQgZWxlbWVudHMgYW5kIGNsZWFycyBpbnRlcm5hbCBzZWdtZW50IGRhdGFcblx0dW5yZW5kZXJFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlckV2ZW50cygpO1xuXG5cdFx0Ly8gd2UgRE9OJ1QgbmVlZCB0byBjYWxsIHVwZGF0ZUhlaWdodCgpIGJlY2F1c2Vcblx0XHQvLyBhIHJlbmRlckV2ZW50cygpIGNhbGwgYWx3YXlzIGhhcHBlbnMgYWZ0ZXIgdGhpcywgd2hpY2ggd2lsbCBldmVudHVhbGx5IGNhbGwgdXBkYXRlSGVpZ2h0KClcblx0fSxcblxuXG5cdC8qIERyYWdnaW5nIChmb3IgYm90aCBldmVudHMgYW5kIGV4dGVybmFsIGVsZW1lbnRzKVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQSByZXR1cm5lZCB2YWx1ZSBvZiBgdHJ1ZWAgc2lnbmFscyB0aGF0IGEgbW9jayBcImhlbHBlclwiIGV2ZW50IGhhcyBiZWVuIHJlbmRlcmVkLlxuXHRyZW5kZXJEcmFnOiBmdW5jdGlvbihkcm9wTG9jYXRpb24sIHNlZykge1xuXHRcdHJldHVybiB0aGlzLmRheUdyaWQucmVuZGVyRHJhZyhkcm9wTG9jYXRpb24sIHNlZyk7XG5cdH0sXG5cblxuXHR1bnJlbmRlckRyYWc6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlckRyYWcoKTtcblx0fSxcblxuXG5cdC8qIFNlbGVjdGlvblxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gUmVuZGVycyBhIHZpc3VhbCBpbmRpY2F0aW9uIG9mIGEgc2VsZWN0aW9uXG5cdHJlbmRlclNlbGVjdGlvbjogZnVuY3Rpb24oc3Bhbikge1xuXHRcdHRoaXMuZGF5R3JpZC5yZW5kZXJTZWxlY3Rpb24oc3Bhbik7XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbnMgb2YgYSBzZWxlY3Rpb25cblx0dW5yZW5kZXJTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlclNlbGVjdGlvbigpO1xuXHR9XG5cbn0pO1xuXG5cbi8vIE1ldGhvZHMgdGhhdCB3aWxsIGN1c3RvbWl6ZSB0aGUgcmVuZGVyaW5nIGJlaGF2aW9yIG9mIHRoZSBCYXNpY1ZpZXcncyBkYXlHcmlkXG52YXIgYmFzaWNEYXlHcmlkTWV0aG9kcyA9IHtcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgSFRNTCB0aGF0IHdpbGwgZ28gYmVmb3JlIHRoZSBkYXktb2Ygd2VlayBoZWFkZXIgY2VsbHNcblx0cmVuZGVySGVhZEludHJvSHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cblx0XHRpZiAodmlldy5jb2xXZWVrTnVtYmVyc1Zpc2libGUpIHtcblx0XHRcdHJldHVybiAnJyArXG5cdFx0XHRcdCc8dGggY2xhc3M9XCJmYy13ZWVrLW51bWJlciAnICsgdmlldy53aWRnZXRIZWFkZXJDbGFzcyArICdcIiAnICsgdmlldy53ZWVrTnVtYmVyU3R5bGVBdHRyKCkgKyAnPicgK1xuXHRcdFx0XHRcdCc8c3Bhbj4nICsgLy8gbmVlZGVkIGZvciBtYXRjaENlbGxXaWR0aHNcblx0XHRcdFx0XHRcdGh0bWxFc2NhcGUodmlldy5vcHQoJ3dlZWtOdW1iZXJUaXRsZScpKSArXG5cdFx0XHRcdFx0Jzwvc3Bhbj4nICtcblx0XHRcdFx0JzwvdGg+Jztcblx0XHR9XG5cblx0XHRyZXR1cm4gJyc7XG5cdH0sXG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgdGhhdCB3aWxsIGdvIGJlZm9yZSBjb250ZW50LXNrZWxldG9uIGNlbGxzIHRoYXQgZGlzcGxheSB0aGUgZGF5L3dlZWsgbnVtYmVyc1xuXHRyZW5kZXJOdW1iZXJJbnRyb0h0bWw6IGZ1bmN0aW9uKHJvdykge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciB3ZWVrU3RhcnQgPSB0aGlzLmdldENlbGxEYXRlKHJvdywgMCk7XG5cblx0XHRpZiAodmlldy5jb2xXZWVrTnVtYmVyc1Zpc2libGUpIHtcblx0XHRcdHJldHVybiAnJyArXG5cdFx0XHRcdCc8dGQgY2xhc3M9XCJmYy13ZWVrLW51bWJlclwiICcgKyB2aWV3LndlZWtOdW1iZXJTdHlsZUF0dHIoKSArICc+JyArXG5cdFx0XHRcdFx0dmlldy5idWlsZEdvdG9BbmNob3JIdG1sKCAvLyBhc2lkZSBmcm9tIGxpbmssIGltcG9ydGFudCBmb3IgbWF0Y2hDZWxsV2lkdGhzXG5cdFx0XHRcdFx0XHR7IGRhdGU6IHdlZWtTdGFydCwgdHlwZTogJ3dlZWsnLCBmb3JjZU9mZjogdGhpcy5jb2xDbnQgPT09IDEgfSxcblx0XHRcdFx0XHRcdHdlZWtTdGFydC5mb3JtYXQoJ3cnKSAvLyBpbm5lciBIVE1MXG5cdFx0XHRcdFx0KSArXG5cdFx0XHRcdCc8L3RkPic7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICcnO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBIVE1MIHRoYXQgZ29lcyBiZWZvcmUgdGhlIGRheSBiZyBjZWxscyBmb3IgZWFjaCBkYXktcm93XG5cdHJlbmRlckJnSW50cm9IdG1sOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblxuXHRcdGlmICh2aWV3LmNvbFdlZWtOdW1iZXJzVmlzaWJsZSkge1xuXHRcdFx0cmV0dXJuICc8dGQgY2xhc3M9XCJmYy13ZWVrLW51bWJlciAnICsgdmlldy53aWRnZXRDb250ZW50Q2xhc3MgKyAnXCIgJyArXG5cdFx0XHRcdHZpZXcud2Vla051bWJlclN0eWxlQXR0cigpICsgJz48L3RkPic7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICcnO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBIVE1MIHRoYXQgZ29lcyBiZWZvcmUgZXZlcnkgb3RoZXIgdHlwZSBvZiByb3cgZ2VuZXJhdGVkIGJ5IERheUdyaWQuXG5cdC8vIEFmZmVjdHMgaGVscGVyLXNrZWxldG9uIGFuZCBoaWdobGlnaHQtc2tlbGV0b24gcm93cy5cblx0cmVuZGVySW50cm9IdG1sOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblxuXHRcdGlmICh2aWV3LmNvbFdlZWtOdW1iZXJzVmlzaWJsZSkge1xuXHRcdFx0cmV0dXJuICc8dGQgY2xhc3M9XCJmYy13ZWVrLW51bWJlclwiICcgKyB2aWV3LndlZWtOdW1iZXJTdHlsZUF0dHIoKSArICc+PC90ZD4nO1xuXHRcdH1cblxuXHRcdHJldHVybiAnJztcblx0fVxuXG59O1xuXG47O1xuXG4vKiBBIG1vbnRoIHZpZXcgd2l0aCBkYXkgY2VsbHMgcnVubmluZyBpbiByb3dzIChvbmUtcGVyLXdlZWspIGFuZCBjb2x1bW5zXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxudmFyIE1vbnRoVmlldyA9IEZDLk1vbnRoVmlldyA9IEJhc2ljVmlldy5leHRlbmQoe1xuXG5cdC8vIFByb2R1Y2VzIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgcmFuZ2UgdG8gZGlzcGxheVxuXHRjb21wdXRlUmFuZ2U6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHR2YXIgcmFuZ2UgPSBCYXNpY1ZpZXcucHJvdG90eXBlLmNvbXB1dGVSYW5nZS5jYWxsKHRoaXMsIGRhdGUpOyAvLyBnZXQgdmFsdWUgZnJvbSBzdXBlci1tZXRob2Rcblx0XHR2YXIgcm93Q250O1xuXG5cdFx0Ly8gZW5zdXJlIDYgd2Vla3Ncblx0XHRpZiAodGhpcy5pc0ZpeGVkV2Vla3MoKSkge1xuXHRcdFx0cm93Q250ID0gTWF0aC5jZWlsKHJhbmdlLmVuZC5kaWZmKHJhbmdlLnN0YXJ0LCAnd2Vla3MnLCB0cnVlKSk7IC8vIGNvdWxkIGJlIHBhcnRpYWwgd2Vla3MgZHVlIHRvIGhpZGRlbkRheXNcblx0XHRcdHJhbmdlLmVuZC5hZGQoNiAtIHJvd0NudCwgJ3dlZWtzJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJhbmdlO1xuXHR9LFxuXG5cblx0Ly8gT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IEJhc2ljVmlldyBiZWhhdmlvciB0byBoYXZlIHNwZWNpYWwgbXVsdGktd2VlayBhdXRvLWhlaWdodCBsb2dpY1xuXHRzZXRHcmlkSGVpZ2h0OiBmdW5jdGlvbihoZWlnaHQsIGlzQXV0bykge1xuXG5cdFx0Ly8gaWYgYXV0bywgbWFrZSB0aGUgaGVpZ2h0IG9mIGVhY2ggcm93IHRoZSBoZWlnaHQgdGhhdCBpdCB3b3VsZCBiZSBpZiB0aGVyZSB3ZXJlIDYgd2Vla3Ncblx0XHRpZiAoaXNBdXRvKSB7XG5cdFx0XHRoZWlnaHQgKj0gdGhpcy5yb3dDbnQgLyA2O1xuXHRcdH1cblxuXHRcdGRpc3RyaWJ1dGVIZWlnaHQodGhpcy5kYXlHcmlkLnJvd0VscywgaGVpZ2h0LCAhaXNBdXRvKTsgLy8gaWYgYXV0bywgZG9uJ3QgY29tcGVuc2F0ZSBmb3IgaGVpZ2h0LWhvZ2dpbmcgcm93c1xuXHR9LFxuXG5cblx0aXNGaXhlZFdlZWtzOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5vcHQoJ2ZpeGVkV2Vla0NvdW50Jyk7XG5cdH1cblxufSk7XG5cbjs7XG5cbmZjVmlld3MuYmFzaWMgPSB7XG5cdCdjbGFzcyc6IEJhc2ljVmlld1xufTtcblxuZmNWaWV3cy5iYXNpY0RheSA9IHtcblx0dHlwZTogJ2Jhc2ljJyxcblx0ZHVyYXRpb246IHsgZGF5czogMSB9XG59O1xuXG5mY1ZpZXdzLmJhc2ljV2VlayA9IHtcblx0dHlwZTogJ2Jhc2ljJyxcblx0ZHVyYXRpb246IHsgd2Vla3M6IDEgfVxufTtcblxuZmNWaWV3cy5tb250aCA9IHtcblx0J2NsYXNzJzogTW9udGhWaWV3LFxuXHRkdXJhdGlvbjogeyBtb250aHM6IDEgfSwgLy8gaW1wb3J0YW50IGZvciBwcmV2L25leHRcblx0ZGVmYXVsdHM6IHtcblx0XHRmaXhlZFdlZWtDb3VudDogdHJ1ZVxuXHR9XG59O1xuOztcblxuLyogQW4gYWJzdHJhY3QgY2xhc3MgZm9yIGFsbCBhZ2VuZGEtcmVsYXRlZCB2aWV3cy4gRGlzcGxheXMgb25lIG1vcmUgY29sdW1ucyB3aXRoIHRpbWUgc2xvdHMgcnVubmluZyB2ZXJ0aWNhbGx5LlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vLyBJcyBhIG1hbmFnZXIgZm9yIHRoZSBUaW1lR3JpZCBzdWJjb21wb25lbnQgYW5kIHBvc3NpYmx5IHRoZSBEYXlHcmlkIHN1YmNvbXBvbmVudCAoaWYgYWxsRGF5U2xvdCBpcyBvbikuXG4vLyBSZXNwb25zaWJsZSBmb3IgbWFuYWdpbmcgd2lkdGgvaGVpZ2h0LlxuXG52YXIgQWdlbmRhVmlldyA9IEZDLkFnZW5kYVZpZXcgPSBWaWV3LmV4dGVuZCh7XG5cblx0c2Nyb2xsZXI6IG51bGwsXG5cblx0dGltZUdyaWRDbGFzczogVGltZUdyaWQsIC8vIGNsYXNzIHVzZWQgdG8gaW5zdGFudGlhdGUgdGhlIHRpbWVHcmlkLiBzdWJjbGFzc2VzIGNhbiBvdmVycmlkZVxuXHR0aW1lR3JpZDogbnVsbCwgLy8gdGhlIG1haW4gdGltZS1ncmlkIHN1YmNvbXBvbmVudCBvZiB0aGlzIHZpZXdcblxuXHRkYXlHcmlkQ2xhc3M6IERheUdyaWQsIC8vIGNsYXNzIHVzZWQgdG8gaW5zdGFudGlhdGUgdGhlIGRheUdyaWQuIHN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlXG5cdGRheUdyaWQ6IG51bGwsIC8vIHRoZSBcImFsbC1kYXlcIiBzdWJjb21wb25lbnQuIGlmIGFsbC1kYXkgaXMgdHVybmVkIG9mZiwgdGhpcyB3aWxsIGJlIG51bGxcblxuXHRheGlzV2lkdGg6IG51bGwsIC8vIHRoZSB3aWR0aCBvZiB0aGUgdGltZSBheGlzIHJ1bm5pbmcgZG93biB0aGUgc2lkZVxuXG5cdGhlYWRDb250YWluZXJFbDogbnVsbCwgLy8gZGl2IHRoYXQgaG9sZCdzIHRoZSB0aW1lR3JpZCdzIHJlbmRlcmVkIGRhdGUgaGVhZGVyXG5cdG5vU2Nyb2xsUm93RWxzOiBudWxsLCAvLyBzZXQgb2YgZmFrZSByb3cgZWxlbWVudHMgdGhhdCBtdXN0IGNvbXBlbnNhdGUgd2hlbiBzY3JvbGxlciBoYXMgc2Nyb2xsYmFyc1xuXG5cdC8vIHdoZW4gdGhlIHRpbWUtZ3JpZCBpc24ndCB0YWxsIGVub3VnaCB0byBvY2N1cHkgdGhlIGdpdmVuIGhlaWdodCwgd2UgcmVuZGVyIGFuIDxocj4gdW5kZXJuZWF0aFxuXHRib3R0b21SdWxlRWw6IG51bGwsXG5cblxuXHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnRpbWVHcmlkID0gdGhpcy5pbnN0YW50aWF0ZVRpbWVHcmlkKCk7XG5cblx0XHRpZiAodGhpcy5vcHQoJ2FsbERheVNsb3QnKSkgeyAvLyBzaG91bGQgd2UgZGlzcGxheSB0aGUgXCJhbGwtZGF5XCIgYXJlYT9cblx0XHRcdHRoaXMuZGF5R3JpZCA9IHRoaXMuaW5zdGFudGlhdGVEYXlHcmlkKCk7IC8vIHRoZSBhbGwtZGF5IHN1YmNvbXBvbmVudCBvZiB0aGlzIHZpZXdcblx0XHR9XG5cblx0XHR0aGlzLnNjcm9sbGVyID0gbmV3IFNjcm9sbGVyKHtcblx0XHRcdG92ZXJmbG93WDogJ2hpZGRlbicsXG5cdFx0XHRvdmVyZmxvd1k6ICdhdXRvJ1xuXHRcdH0pO1xuXHR9LFxuXG5cblx0Ly8gSW5zdGFudGlhdGVzIHRoZSBUaW1lR3JpZCBvYmplY3QgdGhpcyB2aWV3IG5lZWRzLiBEcmF3cyBmcm9tIHRoaXMudGltZUdyaWRDbGFzc1xuXHRpbnN0YW50aWF0ZVRpbWVHcmlkOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgc3ViY2xhc3MgPSB0aGlzLnRpbWVHcmlkQ2xhc3MuZXh0ZW5kKGFnZW5kYVRpbWVHcmlkTWV0aG9kcyk7XG5cblx0XHRyZXR1cm4gbmV3IHN1YmNsYXNzKHRoaXMpO1xuXHR9LFxuXG5cblx0Ly8gSW5zdGFudGlhdGVzIHRoZSBEYXlHcmlkIG9iamVjdCB0aGlzIHZpZXcgbWlnaHQgbmVlZC4gRHJhd3MgZnJvbSB0aGlzLmRheUdyaWRDbGFzc1xuXHRpbnN0YW50aWF0ZURheUdyaWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzdWJjbGFzcyA9IHRoaXMuZGF5R3JpZENsYXNzLmV4dGVuZChhZ2VuZGFEYXlHcmlkTWV0aG9kcyk7XG5cblx0XHRyZXR1cm4gbmV3IHN1YmNsYXNzKHRoaXMpO1xuXHR9LFxuXG5cblx0LyogUmVuZGVyaW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBTZXRzIHRoZSBkaXNwbGF5IHJhbmdlIGFuZCBjb21wdXRlcyBhbGwgbmVjZXNzYXJ5IGRhdGVzXG5cdHNldFJhbmdlOiBmdW5jdGlvbihyYW5nZSkge1xuXHRcdFZpZXcucHJvdG90eXBlLnNldFJhbmdlLmNhbGwodGhpcywgcmFuZ2UpOyAvLyBjYWxsIHRoZSBzdXBlci1tZXRob2RcblxuXHRcdHRoaXMudGltZUdyaWQuc2V0UmFuZ2UocmFuZ2UpO1xuXHRcdGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHRoaXMuZGF5R3JpZC5zZXRSYW5nZShyYW5nZSk7XG5cdFx0fVxuXHR9LFxuXG5cblx0Ly8gUmVuZGVycyB0aGUgdmlldyBpbnRvIGB0aGlzLmVsYCwgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiBhc3NpZ25lZFxuXHRyZW5kZXJEYXRlczogZnVuY3Rpb24oKSB7XG5cblx0XHR0aGlzLmVsLmFkZENsYXNzKCdmYy1hZ2VuZGEtdmlldycpLmh0bWwodGhpcy5yZW5kZXJTa2VsZXRvbkh0bWwoKSk7XG5cdFx0dGhpcy5yZW5kZXJIZWFkKCk7XG5cblx0XHR0aGlzLnNjcm9sbGVyLnJlbmRlcigpO1xuXHRcdHZhciB0aW1lR3JpZFdyYXBFbCA9IHRoaXMuc2Nyb2xsZXIuZWwuYWRkQ2xhc3MoJ2ZjLXRpbWUtZ3JpZC1jb250YWluZXInKTtcblx0XHR2YXIgdGltZUdyaWRFbCA9ICQoJzxkaXYgY2xhc3M9XCJmYy10aW1lLWdyaWRcIiAvPicpLmFwcGVuZFRvKHRpbWVHcmlkV3JhcEVsKTtcblx0XHR0aGlzLmVsLmZpbmQoJy5mYy1ib2R5ID4gdHIgPiB0ZCcpLmFwcGVuZCh0aW1lR3JpZFdyYXBFbCk7XG5cblx0XHR0aGlzLnRpbWVHcmlkLnNldEVsZW1lbnQodGltZUdyaWRFbCk7XG5cdFx0dGhpcy50aW1lR3JpZC5yZW5kZXJEYXRlcygpO1xuXG5cdFx0Ly8gdGhlIDxocj4gdGhhdCBzb21ldGltZXMgZGlzcGxheXMgdW5kZXIgdGhlIHRpbWUtZ3JpZFxuXHRcdHRoaXMuYm90dG9tUnVsZUVsID0gJCgnPGhyIGNsYXNzPVwiZmMtZGl2aWRlciAnICsgdGhpcy53aWRnZXRIZWFkZXJDbGFzcyArICdcIi8+Jylcblx0XHRcdC5hcHBlbmRUbyh0aGlzLnRpbWVHcmlkLmVsKTsgLy8gaW5qZWN0IGl0IGludG8gdGhlIHRpbWUtZ3JpZFxuXG5cdFx0aWYgKHRoaXMuZGF5R3JpZCkge1xuXHRcdFx0dGhpcy5kYXlHcmlkLnNldEVsZW1lbnQodGhpcy5lbC5maW5kKCcuZmMtZGF5LWdyaWQnKSk7XG5cdFx0XHR0aGlzLmRheUdyaWQucmVuZGVyRGF0ZXMoKTtcblxuXHRcdFx0Ly8gaGF2ZSB0aGUgZGF5LWdyaWQgZXh0ZW5kIGl0J3MgY29vcmRpbmF0ZSBhcmVhIG92ZXIgdGhlIDxocj4gZGl2aWRpbmcgdGhlIHR3byBncmlkc1xuXHRcdFx0dGhpcy5kYXlHcmlkLmJvdHRvbUNvb3JkUGFkZGluZyA9IHRoaXMuZGF5R3JpZC5lbC5uZXh0KCdocicpLm91dGVySGVpZ2h0KCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5ub1Njcm9sbFJvd0VscyA9IHRoaXMuZWwuZmluZCgnLmZjLXJvdzpub3QoLmZjLXNjcm9sbGVyICopJyk7IC8vIGZha2Ugcm93cyBub3Qgd2l0aGluIHRoZSBzY3JvbGxlclxuXHR9LFxuXG5cblx0Ly8gcmVuZGVyIHRoZSBkYXktb2Ytd2VlayBoZWFkZXJzXG5cdHJlbmRlckhlYWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuaGVhZENvbnRhaW5lckVsID1cblx0XHRcdHRoaXMuZWwuZmluZCgnLmZjLWhlYWQtY29udGFpbmVyJylcblx0XHRcdFx0Lmh0bWwodGhpcy50aW1lR3JpZC5yZW5kZXJIZWFkSHRtbCgpKTtcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyB0aGUgY29udGVudCBvZiB0aGUgdmlldy4gU2luY2Ugd2UgaGF2ZW4ndCBzZXBhcmF0ZWQgc2tlbGV0b24gcmVuZGVyaW5nIGZyb20gZGF0ZSByZW5kZXJpbmcsXG5cdC8vIGFsd2F5cyBjb21wbGV0ZWx5IGtpbGwgZWFjaCBncmlkJ3MgcmVuZGVyaW5nLlxuXHR1bnJlbmRlckRhdGVzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnRpbWVHcmlkLnVucmVuZGVyRGF0ZXMoKTtcblx0XHR0aGlzLnRpbWVHcmlkLnJlbW92ZUVsZW1lbnQoKTtcblxuXHRcdGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlckRhdGVzKCk7XG5cdFx0XHR0aGlzLmRheUdyaWQucmVtb3ZlRWxlbWVudCgpO1xuXHRcdH1cblxuXHRcdHRoaXMuc2Nyb2xsZXIuZGVzdHJveSgpO1xuXHR9LFxuXG5cblx0Ly8gQnVpbGRzIHRoZSBIVE1MIHNrZWxldG9uIGZvciB0aGUgdmlldy5cblx0Ly8gVGhlIGRheS1ncmlkIGFuZCB0aW1lLWdyaWQgY29tcG9uZW50cyB3aWxsIHJlbmRlciBpbnNpZGUgY29udGFpbmVycyBkZWZpbmVkIGJ5IHRoaXMgSFRNTC5cblx0cmVuZGVyU2tlbGV0b25IdG1sOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gJycgK1xuXHRcdFx0Jzx0YWJsZT4nICtcblx0XHRcdFx0Jzx0aGVhZCBjbGFzcz1cImZjLWhlYWRcIj4nICtcblx0XHRcdFx0XHQnPHRyPicgK1xuXHRcdFx0XHRcdFx0Jzx0ZCBjbGFzcz1cImZjLWhlYWQtY29udGFpbmVyICcgKyB0aGlzLndpZGdldEhlYWRlckNsYXNzICsgJ1wiPjwvdGQ+JyArXG5cdFx0XHRcdFx0JzwvdHI+JyArXG5cdFx0XHRcdCc8L3RoZWFkPicgK1xuXHRcdFx0XHQnPHRib2R5IGNsYXNzPVwiZmMtYm9keVwiPicgK1xuXHRcdFx0XHRcdCc8dHI+JyArXG5cdFx0XHRcdFx0XHQnPHRkIGNsYXNzPVwiJyArIHRoaXMud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiPicgK1xuXHRcdFx0XHRcdFx0XHQodGhpcy5kYXlHcmlkID9cblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImZjLWRheS1ncmlkXCIvPicgK1xuXHRcdFx0XHRcdFx0XHRcdCc8aHIgY2xhc3M9XCJmYy1kaXZpZGVyICcgKyB0aGlzLndpZGdldEhlYWRlckNsYXNzICsgJ1wiLz4nIDpcblx0XHRcdFx0XHRcdFx0XHQnJ1xuXHRcdFx0XHRcdFx0XHRcdCkgK1xuXHRcdFx0XHRcdFx0JzwvdGQ+JyArXG5cdFx0XHRcdFx0JzwvdHI+JyArXG5cdFx0XHRcdCc8L3Rib2R5PicgK1xuXHRcdFx0JzwvdGFibGU+Jztcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyBhbiBIVE1MIGF0dHJpYnV0ZSBzdHJpbmcgZm9yIHNldHRpbmcgdGhlIHdpZHRoIG9mIHRoZSBheGlzLCBpZiBpdCBpcyBrbm93blxuXHRheGlzU3R5bGVBdHRyOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5heGlzV2lkdGggIT09IG51bGwpIHtcblx0XHRcdCByZXR1cm4gJ3N0eWxlPVwid2lkdGg6JyArIHRoaXMuYXhpc1dpZHRoICsgJ3B4XCInO1xuXHRcdH1cblx0XHRyZXR1cm4gJyc7XG5cdH0sXG5cblxuXHQvKiBCdXNpbmVzcyBIb3Vyc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0cmVuZGVyQnVzaW5lc3NIb3VyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50aW1lR3JpZC5yZW5kZXJCdXNpbmVzc0hvdXJzKCk7XG5cblx0XHRpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQucmVuZGVyQnVzaW5lc3NIb3VycygpO1xuXHRcdH1cblx0fSxcblxuXG5cdHVucmVuZGVyQnVzaW5lc3NIb3VyczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50aW1lR3JpZC51bnJlbmRlckJ1c2luZXNzSG91cnMoKTtcblxuXHRcdGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHRoaXMuZGF5R3JpZC51bnJlbmRlckJ1c2luZXNzSG91cnMoKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvKiBOb3cgSW5kaWNhdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHRnZXROb3dJbmRpY2F0b3JVbml0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy50aW1lR3JpZC5nZXROb3dJbmRpY2F0b3JVbml0KCk7XG5cdH0sXG5cblxuXHRyZW5kZXJOb3dJbmRpY2F0b3I6IGZ1bmN0aW9uKGRhdGUpIHtcblx0XHR0aGlzLnRpbWVHcmlkLnJlbmRlck5vd0luZGljYXRvcihkYXRlKTtcblx0fSxcblxuXG5cdHVucmVuZGVyTm93SW5kaWNhdG9yOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnRpbWVHcmlkLnVucmVuZGVyTm93SW5kaWNhdG9yKCk7XG5cdH0sXG5cblxuXHQvKiBEaW1lbnNpb25zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHR1cGRhdGVTaXplOiBmdW5jdGlvbihpc1Jlc2l6ZSkge1xuXHRcdHRoaXMudGltZUdyaWQudXBkYXRlU2l6ZShpc1Jlc2l6ZSk7XG5cblx0XHRWaWV3LnByb3RvdHlwZS51cGRhdGVTaXplLmNhbGwodGhpcywgaXNSZXNpemUpOyAvLyBjYWxsIHRoZSBzdXBlci1tZXRob2Rcblx0fSxcblxuXG5cdC8vIFJlZnJlc2hlcyB0aGUgaG9yaXpvbnRhbCBkaW1lbnNpb25zIG9mIHRoZSB2aWV3XG5cdHVwZGF0ZVdpZHRoOiBmdW5jdGlvbigpIHtcblx0XHQvLyBtYWtlIGFsbCBheGlzIGNlbGxzIGxpbmUgdXAsIGFuZCByZWNvcmQgdGhlIHdpZHRoIHNvIG5ld2x5IGNyZWF0ZWQgYXhpcyBjZWxscyB3aWxsIGhhdmUgaXRcblx0XHR0aGlzLmF4aXNXaWR0aCA9IG1hdGNoQ2VsbFdpZHRocyh0aGlzLmVsLmZpbmQoJy5mYy1heGlzJykpO1xuXHR9LFxuXG5cblx0Ly8gQWRqdXN0cyB0aGUgdmVydGljYWwgZGltZW5zaW9ucyBvZiB0aGUgdmlldyB0byB0aGUgc3BlY2lmaWVkIHZhbHVlc1xuXHRzZXRIZWlnaHQ6IGZ1bmN0aW9uKHRvdGFsSGVpZ2h0LCBpc0F1dG8pIHtcblx0XHR2YXIgZXZlbnRMaW1pdDtcblx0XHR2YXIgc2Nyb2xsZXJIZWlnaHQ7XG5cdFx0dmFyIHNjcm9sbGJhcldpZHRocztcblxuXHRcdC8vIHJlc2V0IGFsbCBkaW1lbnNpb25zIGJhY2sgdG8gdGhlIG9yaWdpbmFsIHN0YXRlXG5cdFx0dGhpcy5ib3R0b21SdWxlRWwuaGlkZSgpOyAvLyAuc2hvdygpIHdpbGwgYmUgY2FsbGVkIGxhdGVyIGlmIHRoaXMgPGhyPiBpcyBuZWNlc3Nhcnlcblx0XHR0aGlzLnNjcm9sbGVyLmNsZWFyKCk7IC8vIHNldHMgaGVpZ2h0IHRvICdhdXRvJyBhbmQgY2xlYXJzIG92ZXJmbG93XG5cdFx0dW5jb21wZW5zYXRlU2Nyb2xsKHRoaXMubm9TY3JvbGxSb3dFbHMpO1xuXG5cdFx0Ly8gbGltaXQgbnVtYmVyIG9mIGV2ZW50cyBpbiB0aGUgYWxsLWRheSBhcmVhXG5cdFx0aWYgKHRoaXMuZGF5R3JpZCkge1xuXHRcdFx0dGhpcy5kYXlHcmlkLnJlbW92ZVNlZ1BvcG92ZXIoKTsgLy8ga2lsbCB0aGUgXCJtb3JlXCIgcG9wb3ZlciBpZiBkaXNwbGF5ZWRcblxuXHRcdFx0ZXZlbnRMaW1pdCA9IHRoaXMub3B0KCdldmVudExpbWl0Jyk7XG5cdFx0XHRpZiAoZXZlbnRMaW1pdCAmJiB0eXBlb2YgZXZlbnRMaW1pdCAhPT0gJ251bWJlcicpIHtcblx0XHRcdFx0ZXZlbnRMaW1pdCA9IEFHRU5EQV9BTExfREFZX0VWRU5UX0xJTUlUOyAvLyBtYWtlIHN1cmUgXCJhdXRvXCIgZ29lcyB0byBhIHJlYWwgbnVtYmVyXG5cdFx0XHR9XG5cdFx0XHRpZiAoZXZlbnRMaW1pdCkge1xuXHRcdFx0XHR0aGlzLmRheUdyaWQubGltaXRSb3dzKGV2ZW50TGltaXQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghaXNBdXRvKSB7IC8vIHNob3VsZCB3ZSBmb3JjZSBkaW1lbnNpb25zIG9mIHRoZSBzY3JvbGwgY29udGFpbmVyP1xuXG5cdFx0XHRzY3JvbGxlckhlaWdodCA9IHRoaXMuY29tcHV0ZVNjcm9sbGVySGVpZ2h0KHRvdGFsSGVpZ2h0KTtcblx0XHRcdHRoaXMuc2Nyb2xsZXIuc2V0SGVpZ2h0KHNjcm9sbGVySGVpZ2h0KTtcblx0XHRcdHNjcm9sbGJhcldpZHRocyA9IHRoaXMuc2Nyb2xsZXIuZ2V0U2Nyb2xsYmFyV2lkdGhzKCk7XG5cblx0XHRcdGlmIChzY3JvbGxiYXJXaWR0aHMubGVmdCB8fCBzY3JvbGxiYXJXaWR0aHMucmlnaHQpIHsgLy8gdXNpbmcgc2Nyb2xsYmFycz9cblxuXHRcdFx0XHQvLyBtYWtlIHRoZSBhbGwtZGF5IGFuZCBoZWFkZXIgcm93cyBsaW5lcyB1cFxuXHRcdFx0XHRjb21wZW5zYXRlU2Nyb2xsKHRoaXMubm9TY3JvbGxSb3dFbHMsIHNjcm9sbGJhcldpZHRocyk7XG5cblx0XHRcdFx0Ly8gdGhlIHNjcm9sbGJhciBjb21wZW5zYXRpb24gbWlnaHQgaGF2ZSBjaGFuZ2VkIHRleHQgZmxvdywgd2hpY2ggbWlnaHQgYWZmZWN0IGhlaWdodCwgc28gcmVjYWxjdWxhdGVcblx0XHRcdFx0Ly8gYW5kIHJlYXBwbHkgdGhlIGRlc2lyZWQgaGVpZ2h0IHRvIHRoZSBzY3JvbGxlci5cblx0XHRcdFx0c2Nyb2xsZXJIZWlnaHQgPSB0aGlzLmNvbXB1dGVTY3JvbGxlckhlaWdodCh0b3RhbEhlaWdodCk7XG5cdFx0XHRcdHRoaXMuc2Nyb2xsZXIuc2V0SGVpZ2h0KHNjcm9sbGVySGVpZ2h0KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gZ3VhcmFudGVlcyB0aGUgc2FtZSBzY3JvbGxiYXIgd2lkdGhzXG5cdFx0XHR0aGlzLnNjcm9sbGVyLmxvY2tPdmVyZmxvdyhzY3JvbGxiYXJXaWR0aHMpO1xuXG5cdFx0XHQvLyBpZiB0aGVyZSdzIGFueSBzcGFjZSBiZWxvdyB0aGUgc2xhdHMsIHNob3cgdGhlIGhvcml6b250YWwgcnVsZS5cblx0XHRcdC8vIHRoaXMgd29uJ3QgY2F1c2UgYW55IG5ldyBvdmVyZmxvdywgYmVjYXVzZSBsb2NrT3ZlcmZsb3cgYWxyZWFkeSBjYWxsZWQuXG5cdFx0XHRpZiAodGhpcy50aW1lR3JpZC5nZXRUb3RhbFNsYXRIZWlnaHQoKSA8IHNjcm9sbGVySGVpZ2h0KSB7XG5cdFx0XHRcdHRoaXMuYm90dG9tUnVsZUVsLnNob3coKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblxuXHQvLyBnaXZlbiBhIGRlc2lyZWQgdG90YWwgaGVpZ2h0IG9mIHRoZSB2aWV3LCByZXR1cm5zIHdoYXQgdGhlIGhlaWdodCBvZiB0aGUgc2Nyb2xsZXIgc2hvdWxkIGJlXG5cdGNvbXB1dGVTY3JvbGxlckhlaWdodDogZnVuY3Rpb24odG90YWxIZWlnaHQpIHtcblx0XHRyZXR1cm4gdG90YWxIZWlnaHQgLVxuXHRcdFx0c3VidHJhY3RJbm5lckVsSGVpZ2h0KHRoaXMuZWwsIHRoaXMuc2Nyb2xsZXIuZWwpOyAvLyBldmVyeXRoaW5nIHRoYXQncyBOT1QgdGhlIHNjcm9sbGVyXG5cdH0sXG5cblxuXHQvKiBTY3JvbGxcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIENvbXB1dGVzIHRoZSBpbml0aWFsIHByZS1jb25maWd1cmVkIHNjcm9sbCBzdGF0ZSBwcmlvciB0byBhbGxvd2luZyB0aGUgdXNlciB0byBjaGFuZ2UgaXRcblx0Y29tcHV0ZUluaXRpYWxTY3JvbGw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzY3JvbGxUaW1lID0gbW9tZW50LmR1cmF0aW9uKHRoaXMub3B0KCdzY3JvbGxUaW1lJykpO1xuXHRcdHZhciB0b3AgPSB0aGlzLnRpbWVHcmlkLmNvbXB1dGVUaW1lVG9wKHNjcm9sbFRpbWUpO1xuXG5cdFx0Ly8gem9vbSBjYW4gZ2l2ZSB3ZWlyZCBmbG9hdGluZy1wb2ludCB2YWx1ZXMuIHJhdGhlciBzY3JvbGwgYSBsaXR0bGUgYml0IGZ1cnRoZXJcblx0XHR0b3AgPSBNYXRoLmNlaWwodG9wKTtcblxuXHRcdGlmICh0b3ApIHtcblx0XHRcdHRvcCsrOyAvLyB0byBvdmVyY29tZSB0b3AgYm9yZGVyIHRoYXQgc2xvdHMgYmV5b25kIHRoZSBmaXJzdCBoYXZlLiBsb29rcyBiZXR0ZXJcblx0XHR9XG5cblx0XHRyZXR1cm4geyB0b3A6IHRvcCB9O1xuXHR9LFxuXG5cblx0cXVlcnlTY3JvbGw6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB7IHRvcDogdGhpcy5zY3JvbGxlci5nZXRTY3JvbGxUb3AoKSB9O1xuXHR9LFxuXG5cblx0c2V0U2Nyb2xsOiBmdW5jdGlvbihzY3JvbGwpIHtcblx0XHR0aGlzLnNjcm9sbGVyLnNldFNjcm9sbFRvcChzY3JvbGwudG9wKTtcblx0fSxcblxuXG5cdC8qIEhpdCBBcmVhc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHQvLyBmb3J3YXJkIGFsbCBoaXQtcmVsYXRlZCBtZXRob2QgY2FsbHMgdG8gdGhlIGdyaWRzIChkYXlHcmlkIG1pZ2h0IG5vdCBiZSBkZWZpbmVkKVxuXG5cblx0cHJlcGFyZUhpdHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudGltZUdyaWQucHJlcGFyZUhpdHMoKTtcblx0XHRpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQucHJlcGFyZUhpdHMoKTtcblx0XHR9XG5cdH0sXG5cblxuXHRyZWxlYXNlSGl0czogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50aW1lR3JpZC5yZWxlYXNlSGl0cygpO1xuXHRcdGlmICh0aGlzLmRheUdyaWQpIHtcblx0XHRcdHRoaXMuZGF5R3JpZC5yZWxlYXNlSGl0cygpO1xuXHRcdH1cblx0fSxcblxuXG5cdHF1ZXJ5SGl0OiBmdW5jdGlvbihsZWZ0LCB0b3ApIHtcblx0XHR2YXIgaGl0ID0gdGhpcy50aW1lR3JpZC5xdWVyeUhpdChsZWZ0LCB0b3ApO1xuXG5cdFx0aWYgKCFoaXQgJiYgdGhpcy5kYXlHcmlkKSB7XG5cdFx0XHRoaXQgPSB0aGlzLmRheUdyaWQucXVlcnlIaXQobGVmdCwgdG9wKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaGl0O1xuXHR9LFxuXG5cblx0Z2V0SGl0U3BhbjogZnVuY3Rpb24oaGl0KSB7XG5cdFx0Ly8gVE9ETzogaGl0LmNvbXBvbmVudCBpcyBzZXQgYXMgYSBoYWNrIHRvIGlkZW50aWZ5IHdoZXJlIHRoZSBoaXQgY2FtZSBmcm9tXG5cdFx0cmV0dXJuIGhpdC5jb21wb25lbnQuZ2V0SGl0U3BhbihoaXQpO1xuXHR9LFxuXG5cblx0Z2V0SGl0RWw6IGZ1bmN0aW9uKGhpdCkge1xuXHRcdC8vIFRPRE86IGhpdC5jb21wb25lbnQgaXMgc2V0IGFzIGEgaGFjayB0byBpZGVudGlmeSB3aGVyZSB0aGUgaGl0IGNhbWUgZnJvbVxuXHRcdHJldHVybiBoaXQuY29tcG9uZW50LmdldEhpdEVsKGhpdCk7XG5cdH0sXG5cblxuXHQvKiBFdmVudHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG5cdC8vIFJlbmRlcnMgZXZlbnRzIG9udG8gdGhlIHZpZXcgYW5kIHBvcHVsYXRlcyB0aGUgVmlldydzIHNlZ21lbnQgYXJyYXlcblx0cmVuZGVyRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcblx0XHR2YXIgZGF5RXZlbnRzID0gW107XG5cdFx0dmFyIHRpbWVkRXZlbnRzID0gW107XG5cdFx0dmFyIGRheVNlZ3MgPSBbXTtcblx0XHR2YXIgdGltZWRTZWdzO1xuXHRcdHZhciBpO1xuXG5cdFx0Ly8gc2VwYXJhdGUgdGhlIGV2ZW50cyBpbnRvIGFsbC1kYXkgYW5kIHRpbWVkXG5cdFx0Zm9yIChpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGV2ZW50c1tpXS5hbGxEYXkpIHtcblx0XHRcdFx0ZGF5RXZlbnRzLnB1c2goZXZlbnRzW2ldKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR0aW1lZEV2ZW50cy5wdXNoKGV2ZW50c1tpXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gcmVuZGVyIHRoZSBldmVudHMgaW4gdGhlIHN1YmNvbXBvbmVudHNcblx0XHR0aW1lZFNlZ3MgPSB0aGlzLnRpbWVHcmlkLnJlbmRlckV2ZW50cyh0aW1lZEV2ZW50cyk7XG5cdFx0aWYgKHRoaXMuZGF5R3JpZCkge1xuXHRcdFx0ZGF5U2VncyA9IHRoaXMuZGF5R3JpZC5yZW5kZXJFdmVudHMoZGF5RXZlbnRzKTtcblx0XHR9XG5cblx0XHQvLyB0aGUgYWxsLWRheSBhcmVhIGlzIGZsZXhpYmxlIGFuZCBtaWdodCBoYXZlIGEgbG90IG9mIGV2ZW50cywgc28gc2hpZnQgdGhlIGhlaWdodFxuXHRcdHRoaXMudXBkYXRlSGVpZ2h0KCk7XG5cdH0sXG5cblxuXHQvLyBSZXRyaWV2ZXMgYWxsIHNlZ21lbnQgb2JqZWN0cyB0aGF0IGFyZSByZW5kZXJlZCBpbiB0aGUgdmlld1xuXHRnZXRFdmVudFNlZ3M6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnRpbWVHcmlkLmdldEV2ZW50U2VncygpLmNvbmNhdChcblx0XHRcdHRoaXMuZGF5R3JpZCA/IHRoaXMuZGF5R3JpZC5nZXRFdmVudFNlZ3MoKSA6IFtdXG5cdFx0KTtcblx0fSxcblxuXG5cdC8vIFVucmVuZGVycyBhbGwgZXZlbnQgZWxlbWVudHMgYW5kIGNsZWFycyBpbnRlcm5hbCBzZWdtZW50IGRhdGFcblx0dW5yZW5kZXJFdmVudHM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0Ly8gdW5yZW5kZXIgdGhlIGV2ZW50cyBpbiB0aGUgc3ViY29tcG9uZW50c1xuXHRcdHRoaXMudGltZUdyaWQudW5yZW5kZXJFdmVudHMoKTtcblx0XHRpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQudW5yZW5kZXJFdmVudHMoKTtcblx0XHR9XG5cblx0XHQvLyB3ZSBET04nVCBuZWVkIHRvIGNhbGwgdXBkYXRlSGVpZ2h0KCkgYmVjYXVzZVxuXHRcdC8vIGEgcmVuZGVyRXZlbnRzKCkgY2FsbCBhbHdheXMgaGFwcGVucyBhZnRlciB0aGlzLCB3aGljaCB3aWxsIGV2ZW50dWFsbHkgY2FsbCB1cGRhdGVIZWlnaHQoKVxuXHR9LFxuXG5cblx0LyogRHJhZ2dpbmcgKGZvciBldmVudHMgYW5kIGV4dGVybmFsIGVsZW1lbnRzKVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cblx0Ly8gQSByZXR1cm5lZCB2YWx1ZSBvZiBgdHJ1ZWAgc2lnbmFscyB0aGF0IGEgbW9jayBcImhlbHBlclwiIGV2ZW50IGhhcyBiZWVuIHJlbmRlcmVkLlxuXHRyZW5kZXJEcmFnOiBmdW5jdGlvbihkcm9wTG9jYXRpb24sIHNlZykge1xuXHRcdGlmIChkcm9wTG9jYXRpb24uc3RhcnQuaGFzVGltZSgpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy50aW1lR3JpZC5yZW5kZXJEcmFnKGRyb3BMb2NhdGlvbiwgc2VnKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5kYXlHcmlkLnJlbmRlckRyYWcoZHJvcExvY2F0aW9uLCBzZWcpO1xuXHRcdH1cblx0fSxcblxuXG5cdHVucmVuZGVyRHJhZzogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50aW1lR3JpZC51bnJlbmRlckRyYWcoKTtcblx0XHRpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQudW5yZW5kZXJEcmFnKCk7XG5cdFx0fVxuXHR9LFxuXG5cblx0LyogU2VsZWN0aW9uXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuXHQvLyBSZW5kZXJzIGEgdmlzdWFsIGluZGljYXRpb24gb2YgYSBzZWxlY3Rpb25cblx0cmVuZGVyU2VsZWN0aW9uOiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0aWYgKHNwYW4uc3RhcnQuaGFzVGltZSgpIHx8IHNwYW4uZW5kLmhhc1RpbWUoKSkge1xuXHRcdFx0dGhpcy50aW1lR3JpZC5yZW5kZXJTZWxlY3Rpb24oc3Bhbik7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHRoaXMuZGF5R3JpZCkge1xuXHRcdFx0dGhpcy5kYXlHcmlkLnJlbmRlclNlbGVjdGlvbihzcGFuKTtcblx0XHR9XG5cdH0sXG5cblxuXHQvLyBVbnJlbmRlcnMgYSB2aXN1YWwgaW5kaWNhdGlvbnMgb2YgYSBzZWxlY3Rpb25cblx0dW5yZW5kZXJTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudGltZUdyaWQudW5yZW5kZXJTZWxlY3Rpb24oKTtcblx0XHRpZiAodGhpcy5kYXlHcmlkKSB7XG5cdFx0XHR0aGlzLmRheUdyaWQudW5yZW5kZXJTZWxlY3Rpb24oKTtcblx0XHR9XG5cdH1cblxufSk7XG5cblxuLy8gTWV0aG9kcyB0aGF0IHdpbGwgY3VzdG9taXplIHRoZSByZW5kZXJpbmcgYmVoYXZpb3Igb2YgdGhlIEFnZW5kYVZpZXcncyB0aW1lR3JpZFxuLy8gVE9ETzogbW92ZSBpbnRvIFRpbWVHcmlkXG52YXIgYWdlbmRhVGltZUdyaWRNZXRob2RzID0ge1xuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBIVE1MIHRoYXQgd2lsbCBnbyBiZWZvcmUgdGhlIGRheS1vZiB3ZWVrIGhlYWRlciBjZWxsc1xuXHRyZW5kZXJIZWFkSW50cm9IdG1sOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgd2Vla1RleHQ7XG5cblx0XHRpZiAodmlldy5vcHQoJ3dlZWtOdW1iZXJzJykpIHtcblx0XHRcdHdlZWtUZXh0ID0gdGhpcy5zdGFydC5mb3JtYXQodmlldy5vcHQoJ3NtYWxsV2Vla0Zvcm1hdCcpKTtcblxuXHRcdFx0cmV0dXJuICcnICtcblx0XHRcdFx0Jzx0aCBjbGFzcz1cImZjLWF4aXMgZmMtd2Vlay1udW1iZXIgJyArIHZpZXcud2lkZ2V0SGVhZGVyQ2xhc3MgKyAnXCIgJyArIHZpZXcuYXhpc1N0eWxlQXR0cigpICsgJz4nICtcblx0XHRcdFx0XHR2aWV3LmJ1aWxkR290b0FuY2hvckh0bWwoIC8vIGFzaWRlIGZyb20gbGluaywgaW1wb3J0YW50IGZvciBtYXRjaENlbGxXaWR0aHNcblx0XHRcdFx0XHRcdHsgZGF0ZTogdGhpcy5zdGFydCwgdHlwZTogJ3dlZWsnLCBmb3JjZU9mZjogdGhpcy5jb2xDbnQgPiAxIH0sXG5cdFx0XHRcdFx0XHRodG1sRXNjYXBlKHdlZWtUZXh0KSAvLyBpbm5lciBIVE1MXG5cdFx0XHRcdFx0KSArXG5cdFx0XHRcdCc8L3RoPic7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuICc8dGggY2xhc3M9XCJmYy1heGlzICcgKyB2aWV3LndpZGdldEhlYWRlckNsYXNzICsgJ1wiICcgKyB2aWV3LmF4aXNTdHlsZUF0dHIoKSArICc+PC90aD4nO1xuXHRcdH1cblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgSFRNTCB0aGF0IGdvZXMgYmVmb3JlIHRoZSBiZyBvZiB0aGUgVGltZUdyaWQgc2xvdCBhcmVhLiBMb25nIHZlcnRpY2FsIGNvbHVtbi5cblx0cmVuZGVyQmdJbnRyb0h0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXG5cdFx0cmV0dXJuICc8dGQgY2xhc3M9XCJmYy1heGlzICcgKyB2aWV3LndpZGdldENvbnRlbnRDbGFzcyArICdcIiAnICsgdmlldy5heGlzU3R5bGVBdHRyKCkgKyAnPjwvdGQ+Jztcblx0fSxcblxuXG5cdC8vIEdlbmVyYXRlcyB0aGUgSFRNTCB0aGF0IGdvZXMgYmVmb3JlIGFsbCBvdGhlciB0eXBlcyBvZiBjZWxscy5cblx0Ly8gQWZmZWN0cyBjb250ZW50LXNrZWxldG9uLCBoZWxwZXItc2tlbGV0b24sIGhpZ2hsaWdodC1za2VsZXRvbiBmb3IgYm90aCB0aGUgdGltZS1ncmlkIGFuZCBkYXktZ3JpZC5cblx0cmVuZGVySW50cm9IdG1sOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblxuXHRcdHJldHVybiAnPHRkIGNsYXNzPVwiZmMtYXhpc1wiICcgKyB2aWV3LmF4aXNTdHlsZUF0dHIoKSArICc+PC90ZD4nO1xuXHR9XG5cbn07XG5cblxuLy8gTWV0aG9kcyB0aGF0IHdpbGwgY3VzdG9taXplIHRoZSByZW5kZXJpbmcgYmVoYXZpb3Igb2YgdGhlIEFnZW5kYVZpZXcncyBkYXlHcmlkXG52YXIgYWdlbmRhRGF5R3JpZE1ldGhvZHMgPSB7XG5cblxuXHQvLyBHZW5lcmF0ZXMgdGhlIEhUTUwgdGhhdCBnb2VzIGJlZm9yZSB0aGUgYWxsLWRheSBjZWxsc1xuXHRyZW5kZXJCZ0ludHJvSHRtbDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cblx0XHRyZXR1cm4gJycgK1xuXHRcdFx0Jzx0ZCBjbGFzcz1cImZjLWF4aXMgJyArIHZpZXcud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiICcgKyB2aWV3LmF4aXNTdHlsZUF0dHIoKSArICc+JyArXG5cdFx0XHRcdCc8c3Bhbj4nICsgLy8gbmVlZGVkIGZvciBtYXRjaENlbGxXaWR0aHNcblx0XHRcdFx0XHR2aWV3LmdldEFsbERheUh0bWwoKSArXG5cdFx0XHRcdCc8L3NwYW4+JyArXG5cdFx0XHQnPC90ZD4nO1xuXHR9LFxuXG5cblx0Ly8gR2VuZXJhdGVzIHRoZSBIVE1MIHRoYXQgZ29lcyBiZWZvcmUgYWxsIG90aGVyIHR5cGVzIG9mIGNlbGxzLlxuXHQvLyBBZmZlY3RzIGNvbnRlbnQtc2tlbGV0b24sIGhlbHBlci1za2VsZXRvbiwgaGlnaGxpZ2h0LXNrZWxldG9uIGZvciBib3RoIHRoZSB0aW1lLWdyaWQgYW5kIGRheS1ncmlkLlxuXHRyZW5kZXJJbnRyb0h0bWw6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXG5cdFx0cmV0dXJuICc8dGQgY2xhc3M9XCJmYy1heGlzXCIgJyArIHZpZXcuYXhpc1N0eWxlQXR0cigpICsgJz48L3RkPic7XG5cdH1cblxufTtcblxuOztcblxudmFyIEFHRU5EQV9BTExfREFZX0VWRU5UX0xJTUlUID0gNTtcblxuLy8gcG90ZW50aWFsIG5pY2UgdmFsdWVzIGZvciB0aGUgc2xvdC1kdXJhdGlvbiBhbmQgaW50ZXJ2YWwtZHVyYXRpb25cbi8vIGZyb20gbGFyZ2VzdCB0byBzbWFsbGVzdFxudmFyIEFHRU5EQV9TVE9DS19TVUJfRFVSQVRJT05TID0gW1xuXHR7IGhvdXJzOiAxIH0sXG5cdHsgbWludXRlczogMzAgfSxcblx0eyBtaW51dGVzOiAxNSB9LFxuXHR7IHNlY29uZHM6IDMwIH0sXG5cdHsgc2Vjb25kczogMTUgfVxuXTtcblxuZmNWaWV3cy5hZ2VuZGEgPSB7XG5cdCdjbGFzcyc6IEFnZW5kYVZpZXcsXG5cdGRlZmF1bHRzOiB7XG5cdFx0YWxsRGF5U2xvdDogdHJ1ZSxcblx0XHRzbG90RHVyYXRpb246ICcwMDozMDowMCcsXG5cdFx0bWluVGltZTogJzAwOjAwOjAwJyxcblx0XHRtYXhUaW1lOiAnMjQ6MDA6MDAnLFxuXHRcdHNsb3RFdmVudE92ZXJsYXA6IHRydWUgLy8gYSBiYWQgbmFtZS4gY29uZnVzZWQgd2l0aCBvdmVybGFwL2NvbnN0cmFpbnQgc3lzdGVtXG5cdH1cbn07XG5cbmZjVmlld3MuYWdlbmRhRGF5ID0ge1xuXHR0eXBlOiAnYWdlbmRhJyxcblx0ZHVyYXRpb246IHsgZGF5czogMSB9XG59O1xuXG5mY1ZpZXdzLmFnZW5kYVdlZWsgPSB7XG5cdHR5cGU6ICdhZ2VuZGEnLFxuXHRkdXJhdGlvbjogeyB3ZWVrczogMSB9XG59O1xuOztcblxuLypcblJlc3BvbnNpYmxlIGZvciB0aGUgc2Nyb2xsZXIsIGFuZCBmb3J3YXJkaW5nIGV2ZW50LXJlbGF0ZWQgYWN0aW9ucyBpbnRvIHRoZSBcImdyaWRcIlxuKi9cbnZhciBMaXN0VmlldyA9IFZpZXcuZXh0ZW5kKHtcblxuXHRncmlkOiBudWxsLFxuXHRzY3JvbGxlcjogbnVsbCxcblxuXHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmdyaWQgPSBuZXcgTGlzdFZpZXdHcmlkKHRoaXMpO1xuXHRcdHRoaXMuc2Nyb2xsZXIgPSBuZXcgU2Nyb2xsZXIoe1xuXHRcdFx0b3ZlcmZsb3dYOiAnaGlkZGVuJyxcblx0XHRcdG92ZXJmbG93WTogJ2F1dG8nXG5cdFx0fSk7XG5cdH0sXG5cblx0c2V0UmFuZ2U6IGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0Vmlldy5wcm90b3R5cGUuc2V0UmFuZ2UuY2FsbCh0aGlzLCByYW5nZSk7IC8vIHN1cGVyXG5cblx0XHR0aGlzLmdyaWQuc2V0UmFuZ2UocmFuZ2UpOyAvLyBuZWVkcyB0byBwcm9jZXNzIHJhbmdlLXJlbGF0ZWQgb3B0aW9uc1xuXHR9LFxuXG5cdHJlbmRlclNrZWxldG9uOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmVsLmFkZENsYXNzKFxuXHRcdFx0J2ZjLWxpc3QtdmlldyAnICtcblx0XHRcdHRoaXMud2lkZ2V0Q29udGVudENsYXNzXG5cdFx0KTtcblxuXHRcdHRoaXMuc2Nyb2xsZXIucmVuZGVyKCk7XG5cdFx0dGhpcy5zY3JvbGxlci5lbC5hcHBlbmRUbyh0aGlzLmVsKTtcblxuXHRcdHRoaXMuZ3JpZC5zZXRFbGVtZW50KHRoaXMuc2Nyb2xsZXIuc2Nyb2xsRWwpO1xuXHR9LFxuXG5cdHVucmVuZGVyU2tlbGV0b246IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuc2Nyb2xsZXIuZGVzdHJveSgpOyAvLyB3aWxsIHJlbW92ZSB0aGUgR3JpZCB0b29cblx0fSxcblxuXHRzZXRIZWlnaHQ6IGZ1bmN0aW9uKHRvdGFsSGVpZ2h0LCBpc0F1dG8pIHtcblx0XHR0aGlzLnNjcm9sbGVyLnNldEhlaWdodCh0aGlzLmNvbXB1dGVTY3JvbGxlckhlaWdodCh0b3RhbEhlaWdodCkpO1xuXHR9LFxuXG5cdGNvbXB1dGVTY3JvbGxlckhlaWdodDogZnVuY3Rpb24odG90YWxIZWlnaHQpIHtcblx0XHRyZXR1cm4gdG90YWxIZWlnaHQgLVxuXHRcdFx0c3VidHJhY3RJbm5lckVsSGVpZ2h0KHRoaXMuZWwsIHRoaXMuc2Nyb2xsZXIuZWwpOyAvLyBldmVyeXRoaW5nIHRoYXQncyBOT1QgdGhlIHNjcm9sbGVyXG5cdH0sXG5cblx0cmVuZGVyRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcblx0XHR0aGlzLmdyaWQucmVuZGVyRXZlbnRzKGV2ZW50cyk7XG5cdH0sXG5cblx0dW5yZW5kZXJFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZ3JpZC51bnJlbmRlckV2ZW50cygpO1xuXHR9LFxuXG5cdGlzRXZlbnRSZXNpemFibGU6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXG5cdGlzRXZlbnREcmFnZ2FibGU6IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cbn0pO1xuXG4vKlxuUmVzcG9uc2libGUgZm9yIGV2ZW50IHJlbmRlcmluZyBhbmQgdXNlci1pbnRlcmFjdGlvbi5cbkl0cyBcImVsXCIgaXMgdGhlIGlubmVyLWNvbnRlbnQgb2YgdGhlIGFib3ZlIHZpZXcncyBzY3JvbGxlci5cbiovXG52YXIgTGlzdFZpZXdHcmlkID0gR3JpZC5leHRlbmQoe1xuXG5cdHNlZ1NlbGVjdG9yOiAnLmZjLWxpc3QtaXRlbScsIC8vIHdoaWNoIGVsZW1lbnRzIGFjY2VwdCBldmVudCBhY3Rpb25zXG5cdGhhc0RheUludGVyYWN0aW9uczogZmFsc2UsIC8vIG5vIGRheSBzZWxlY3Rpb24gb3IgZGF5IGNsaWNraW5nXG5cblx0Ly8gc2xpY2VzIGJ5IGRheVxuXHRzcGFuVG9TZWdzOiBmdW5jdGlvbihzcGFuKSB7XG5cdFx0dmFyIHZpZXcgPSB0aGlzLnZpZXc7XG5cdFx0dmFyIGRheVN0YXJ0ID0gdmlldy5zdGFydC5jbG9uZSgpLnRpbWUoMCk7IC8vIHRpbWVkLCBzbyBzZWdzIGdldCB0aW1lcyFcblx0XHR2YXIgZGF5SW5kZXggPSAwO1xuXHRcdHZhciBzZWc7XG5cdFx0dmFyIHNlZ3MgPSBbXTtcblxuXHRcdHdoaWxlIChkYXlTdGFydCA8IHZpZXcuZW5kKSB7XG5cblx0XHRcdHNlZyA9IGludGVyc2VjdFJhbmdlcyhzcGFuLCB7XG5cdFx0XHRcdHN0YXJ0OiBkYXlTdGFydCxcblx0XHRcdFx0ZW5kOiBkYXlTdGFydC5jbG9uZSgpLmFkZCgxLCAnZGF5Jylcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoc2VnKSB7XG5cdFx0XHRcdHNlZy5kYXlJbmRleCA9IGRheUluZGV4O1xuXHRcdFx0XHRzZWdzLnB1c2goc2VnKTtcblx0XHRcdH1cblxuXHRcdFx0ZGF5U3RhcnQuYWRkKDEsICdkYXknKTtcblx0XHRcdGRheUluZGV4Kys7XG5cblx0XHRcdC8vIGRldGVjdCB3aGVuIHNwYW4gd29uJ3QgZ28gZnVsbHkgaW50byB0aGUgbmV4dCBkYXksXG5cdFx0XHQvLyBhbmQgbXV0YXRlIHRoZSBsYXRlc3Qgc2VnIHRvIHRoZSBiZSB0aGUgZW5kLlxuXHRcdFx0aWYgKFxuXHRcdFx0XHRzZWcgJiYgIXNlZy5pc0VuZCAmJiBzcGFuLmVuZC5oYXNUaW1lKCkgJiZcblx0XHRcdFx0c3Bhbi5lbmQgPCBkYXlTdGFydC5jbG9uZSgpLmFkZCh0aGlzLnZpZXcubmV4dERheVRocmVzaG9sZClcblx0XHRcdCkge1xuXHRcdFx0XHRzZWcuZW5kID0gc3Bhbi5lbmQuY2xvbmUoKTtcblx0XHRcdFx0c2VnLmlzRW5kID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblx0Ly8gbGlrZSBcIjQ6MDBhbVwiXG5cdGNvbXB1dGVFdmVudFRpbWVGb3JtYXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnZpZXcub3B0KCdtZWRpdW1UaW1lRm9ybWF0Jyk7XG5cdH0sXG5cblx0Ly8gZm9yIGV2ZW50cyB3aXRoIGEgdXJsLCB0aGUgd2hvbGUgPHRyPiBzaG91bGQgYmUgY2xpY2thYmxlLFxuXHQvLyBidXQgaXQncyBpbXBvc3NpYmxlIHRvIHdyYXAgd2l0aCBhbiA8YT4gdGFnLiBzaW11bGF0ZSB0aGlzLlxuXHRoYW5kbGVTZWdDbGljazogZnVuY3Rpb24oc2VnLCBldikge1xuXHRcdHZhciB1cmw7XG5cblx0XHRHcmlkLnByb3RvdHlwZS5oYW5kbGVTZWdDbGljay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBzdXBlci4gbWlnaHQgcHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb25cblxuXHRcdC8vIG5vdCBjbGlja2luZyBvbiBvciB3aXRoaW4gYW4gPGE+IHdpdGggYW4gaHJlZlxuXHRcdGlmICghJChldi50YXJnZXQpLmNsb3Nlc3QoJ2FbaHJlZl0nKS5sZW5ndGgpIHtcblx0XHRcdHVybCA9IHNlZy5ldmVudC51cmw7XG5cdFx0XHRpZiAodXJsICYmICFldi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgeyAvLyBqc0V2ZW50IG5vdCBjYW5jZWxsZWQgaW4gaGFuZGxlclxuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDsgLy8gc2ltdWxhdGUgbGluayBjbGlja1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyByZXR1cm5zIGxpc3Qgb2YgZm9yZWdyb3VuZCBzZWdzIHRoYXQgd2VyZSBhY3R1YWxseSByZW5kZXJlZFxuXHRyZW5kZXJGZ1NlZ3M6IGZ1bmN0aW9uKHNlZ3MpIHtcblx0XHRzZWdzID0gdGhpcy5yZW5kZXJGZ1NlZ0VscyhzZWdzKTsgLy8gbWlnaHQgZmlsdGVyIGF3YXkgaGlkZGVuIGV2ZW50c1xuXG5cdFx0aWYgKCFzZWdzLmxlbmd0aCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eU1lc3NhZ2UoKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aGlzLnJlbmRlclNlZ0xpc3Qoc2Vncyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlZ3M7XG5cdH0sXG5cblx0cmVuZGVyRW1wdHlNZXNzYWdlOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmVsLmh0bWwoXG5cdFx0XHQnPGRpdiBjbGFzcz1cImZjLWxpc3QtZW1wdHktd3JhcDJcIj4nICsgLy8gVE9ETzogdHJ5IGxlc3Mgd3JhcHNcblx0XHRcdCc8ZGl2IGNsYXNzPVwiZmMtbGlzdC1lbXB0eS13cmFwMVwiPicgK1xuXHRcdFx0JzxkaXYgY2xhc3M9XCJmYy1saXN0LWVtcHR5XCI+JyArXG5cdFx0XHRcdGh0bWxFc2NhcGUodGhpcy52aWV3Lm9wdCgnbm9FdmVudHNNZXNzYWdlJykpICtcblx0XHRcdCc8L2Rpdj4nICtcblx0XHRcdCc8L2Rpdj4nICtcblx0XHRcdCc8L2Rpdj4nXG5cdFx0KTtcblx0fSxcblxuXHQvLyByZW5kZXIgdGhlIGV2ZW50IHNlZ21lbnRzIGluIHRoZSB2aWV3XG5cdHJlbmRlclNlZ0xpc3Q6IGZ1bmN0aW9uKGFsbFNlZ3MpIHtcblx0XHR2YXIgc2Vnc0J5RGF5ID0gdGhpcy5ncm91cFNlZ3NCeURheShhbGxTZWdzKTsgLy8gc3BhcnNlIGFycmF5XG5cdFx0dmFyIGRheUluZGV4O1xuXHRcdHZhciBkYXlTZWdzO1xuXHRcdHZhciBpO1xuXHRcdHZhciB0YWJsZUVsID0gJCgnPHRhYmxlIGNsYXNzPVwiZmMtbGlzdC10YWJsZVwiPjx0Ym9keS8+PC90YWJsZT4nKTtcblx0XHR2YXIgdGJvZHlFbCA9IHRhYmxlRWwuZmluZCgndGJvZHknKTtcblxuXHRcdGZvciAoZGF5SW5kZXggPSAwOyBkYXlJbmRleCA8IHNlZ3NCeURheS5sZW5ndGg7IGRheUluZGV4KyspIHtcblx0XHRcdGRheVNlZ3MgPSBzZWdzQnlEYXlbZGF5SW5kZXhdO1xuXHRcdFx0aWYgKGRheVNlZ3MpIHsgLy8gc3BhcnNlIGFycmF5LCBzbyBtaWdodCBiZSB1bmRlZmluZWRcblxuXHRcdFx0XHQvLyBhcHBlbmQgYSBkYXkgaGVhZGVyXG5cdFx0XHRcdHRib2R5RWwuYXBwZW5kKHRoaXMuZGF5SGVhZGVySHRtbChcblx0XHRcdFx0XHR0aGlzLnZpZXcuc3RhcnQuY2xvbmUoKS5hZGQoZGF5SW5kZXgsICdkYXlzJylcblx0XHRcdFx0KSk7XG5cblx0XHRcdFx0dGhpcy5zb3J0RXZlbnRTZWdzKGRheVNlZ3MpO1xuXG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBkYXlTZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0dGJvZHlFbC5hcHBlbmQoZGF5U2Vnc1tpXS5lbCk7IC8vIGFwcGVuZCBldmVudCByb3dcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuZWwuZW1wdHkoKS5hcHBlbmQodGFibGVFbCk7XG5cdH0sXG5cblx0Ly8gUmV0dXJucyBhIHNwYXJzZSBhcnJheSBvZiBhcnJheXMsIHNlZ3MgZ3JvdXBlZCBieSB0aGVpciBkYXlJbmRleFxuXHRncm91cFNlZ3NCeURheTogZnVuY3Rpb24oc2Vncykge1xuXHRcdHZhciBzZWdzQnlEYXkgPSBbXTsgLy8gc3BhcnNlIGFycmF5XG5cdFx0dmFyIGksIHNlZztcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzZWcgPSBzZWdzW2ldO1xuXHRcdFx0KHNlZ3NCeURheVtzZWcuZGF5SW5kZXhdIHx8IChzZWdzQnlEYXlbc2VnLmRheUluZGV4XSA9IFtdKSlcblx0XHRcdFx0LnB1c2goc2VnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gc2Vnc0J5RGF5O1xuXHR9LFxuXG5cdC8vIGdlbmVyYXRlcyB0aGUgSFRNTCBmb3IgdGhlIGRheSBoZWFkZXJzIHRoYXQgbGl2ZSBhbW9uZ3N0IHRoZSBldmVudCByb3dzXG5cdGRheUhlYWRlckh0bWw6IGZ1bmN0aW9uKGRheURhdGUpIHtcblx0XHR2YXIgdmlldyA9IHRoaXMudmlldztcblx0XHR2YXIgbWFpbkZvcm1hdCA9IHZpZXcub3B0KCdsaXN0RGF5Rm9ybWF0Jyk7XG5cdFx0dmFyIGFsdEZvcm1hdCA9IHZpZXcub3B0KCdsaXN0RGF5QWx0Rm9ybWF0Jyk7XG5cblx0XHRyZXR1cm4gJzx0ciBjbGFzcz1cImZjLWxpc3QtaGVhZGluZ1wiIGRhdGEtZGF0ZT1cIicgKyBkYXlEYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpICsgJ1wiPicgK1xuXHRcdFx0Jzx0ZCBjbGFzcz1cIicgKyB2aWV3LndpZGdldEhlYWRlckNsYXNzICsgJ1wiIGNvbHNwYW49XCIzXCI+JyArXG5cdFx0XHRcdChtYWluRm9ybWF0ID9cblx0XHRcdFx0XHR2aWV3LmJ1aWxkR290b0FuY2hvckh0bWwoXG5cdFx0XHRcdFx0XHRkYXlEYXRlLFxuXHRcdFx0XHRcdFx0eyAnY2xhc3MnOiAnZmMtbGlzdC1oZWFkaW5nLW1haW4nIH0sXG5cdFx0XHRcdFx0XHRodG1sRXNjYXBlKGRheURhdGUuZm9ybWF0KG1haW5Gb3JtYXQpKSAvLyBpbm5lciBIVE1MXG5cdFx0XHRcdFx0KSA6XG5cdFx0XHRcdFx0JycpICtcblx0XHRcdFx0KGFsdEZvcm1hdCA/XG5cdFx0XHRcdFx0dmlldy5idWlsZEdvdG9BbmNob3JIdG1sKFxuXHRcdFx0XHRcdFx0ZGF5RGF0ZSxcblx0XHRcdFx0XHRcdHsgJ2NsYXNzJzogJ2ZjLWxpc3QtaGVhZGluZy1hbHQnIH0sXG5cdFx0XHRcdFx0XHRodG1sRXNjYXBlKGRheURhdGUuZm9ybWF0KGFsdEZvcm1hdCkpIC8vIGlubmVyIEhUTUxcblx0XHRcdFx0XHQpIDpcblx0XHRcdFx0XHQnJykgK1xuXHRcdFx0JzwvdGQ+JyArXG5cdFx0JzwvdHI+Jztcblx0fSxcblxuXHQvLyBnZW5lcmF0ZXMgdGhlIEhUTUwgZm9yIGEgc2luZ2xlIGV2ZW50IHJvd1xuXHRmZ1NlZ0h0bWw6IGZ1bmN0aW9uKHNlZykge1xuXHRcdHZhciB2aWV3ID0gdGhpcy52aWV3O1xuXHRcdHZhciBjbGFzc2VzID0gWyAnZmMtbGlzdC1pdGVtJyBdLmNvbmNhdCh0aGlzLmdldFNlZ0N1c3RvbUNsYXNzZXMoc2VnKSk7XG5cdFx0dmFyIGJnQ29sb3IgPSB0aGlzLmdldFNlZ0JhY2tncm91bmRDb2xvcihzZWcpO1xuXHRcdHZhciBldmVudCA9IHNlZy5ldmVudDtcblx0XHR2YXIgdXJsID0gZXZlbnQudXJsO1xuXHRcdHZhciB0aW1lSHRtbDtcblxuXHRcdGlmIChldmVudC5hbGxEYXkpIHtcblx0XHRcdHRpbWVIdG1sID0gdmlldy5nZXRBbGxEYXlIdG1sKCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHZpZXcuaXNNdWx0aURheUV2ZW50KGV2ZW50KSkgeyAvLyBpZiB0aGUgZXZlbnQgYXBwZWFycyB0byBzcGFuIG1vcmUgdGhhbiBvbmUgZGF5XG5cdFx0XHRpZiAoc2VnLmlzU3RhcnQgfHwgc2VnLmlzRW5kKSB7IC8vIG91dGVyIHNlZ21lbnQgdGhhdCBwcm9iYWJseSBsYXN0cyBwYXJ0IG9mIHRoZSBkYXlcblx0XHRcdFx0dGltZUh0bWwgPSBodG1sRXNjYXBlKHRoaXMuZ2V0RXZlbnRUaW1lVGV4dChzZWcpKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgeyAvLyBpbm5lciBzZWdtZW50IHRoYXQgbGFzdHMgdGhlIHdob2xlIGRheVxuXHRcdFx0XHR0aW1lSHRtbCA9IHZpZXcuZ2V0QWxsRGF5SHRtbCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdC8vIERpc3BsYXkgdGhlIG5vcm1hbCB0aW1lIHRleHQgZm9yIHRoZSAqZXZlbnQncyogdGltZXNcblx0XHRcdHRpbWVIdG1sID0gaHRtbEVzY2FwZSh0aGlzLmdldEV2ZW50VGltZVRleHQoZXZlbnQpKTtcblx0XHR9XG5cblx0XHRpZiAodXJsKSB7XG5cdFx0XHRjbGFzc2VzLnB1c2goJ2ZjLWhhcy11cmwnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gJzx0ciBjbGFzcz1cIicgKyBjbGFzc2VzLmpvaW4oJyAnKSArICdcIj4nICtcblx0XHRcdCh0aGlzLmRpc3BsYXlFdmVudFRpbWUgP1xuXHRcdFx0XHQnPHRkIGNsYXNzPVwiZmMtbGlzdC1pdGVtLXRpbWUgJyArIHZpZXcud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiPicgK1xuXHRcdFx0XHRcdCh0aW1lSHRtbCB8fCAnJykgK1xuXHRcdFx0XHQnPC90ZD4nIDpcblx0XHRcdFx0JycpICtcblx0XHRcdCc8dGQgY2xhc3M9XCJmYy1saXN0LWl0ZW0tbWFya2VyICcgKyB2aWV3LndpZGdldENvbnRlbnRDbGFzcyArICdcIj4nICtcblx0XHRcdFx0JzxzcGFuIGNsYXNzPVwiZmMtZXZlbnQtZG90XCInICtcblx0XHRcdFx0KGJnQ29sb3IgP1xuXHRcdFx0XHRcdCcgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicgKyBiZ0NvbG9yICsgJ1wiJyA6XG5cdFx0XHRcdFx0JycpICtcblx0XHRcdFx0Jz48L3NwYW4+JyArXG5cdFx0XHQnPC90ZD4nICtcblx0XHRcdCc8dGQgY2xhc3M9XCJmYy1saXN0LWl0ZW0tdGl0bGUgJyArIHZpZXcud2lkZ2V0Q29udGVudENsYXNzICsgJ1wiPicgK1xuXHRcdFx0XHQnPGEnICsgKHVybCA/ICcgaHJlZj1cIicgKyBodG1sRXNjYXBlKHVybCkgKyAnXCInIDogJycpICsgJz4nICtcblx0XHRcdFx0XHRodG1sRXNjYXBlKHNlZy5ldmVudC50aXRsZSB8fCAnJykgK1xuXHRcdFx0XHQnPC9hPicgK1xuXHRcdFx0JzwvdGQ+JyArXG5cdFx0JzwvdHI+Jztcblx0fVxuXG59KTtcblxuOztcblxuZmNWaWV3cy5saXN0ID0ge1xuXHQnY2xhc3MnOiBMaXN0Vmlldyxcblx0YnV0dG9uVGV4dEtleTogJ2xpc3QnLCAvLyB3aGF0IHRvIGxvb2t1cCBpbiBsb2NhbGUgZmlsZXNcblx0ZGVmYXVsdHM6IHtcblx0XHRidXR0b25UZXh0OiAnbGlzdCcsIC8vIHRleHQgdG8gZGlzcGxheSBmb3IgRW5nbGlzaFxuXHRcdGxpc3REYXlGb3JtYXQ6ICdMTCcsIC8vIGxpa2UgXCJKYW51YXJ5IDEsIDIwMTZcIlxuXHRcdG5vRXZlbnRzTWVzc2FnZTogJ05vIGV2ZW50cyB0byBkaXNwbGF5J1xuXHR9XG59O1xuXG5mY1ZpZXdzLmxpc3REYXkgPSB7XG5cdHR5cGU6ICdsaXN0Jyxcblx0ZHVyYXRpb246IHsgZGF5czogMSB9LFxuXHRkZWZhdWx0czoge1xuXHRcdGxpc3REYXlGb3JtYXQ6ICdkZGRkJyAvLyBkYXktb2Ytd2VlayBpcyBhbGwgd2UgbmVlZC4gZnVsbCBkYXRlIGlzIHByb2JhYmx5IGluIGhlYWRlclxuXHR9XG59O1xuXG5mY1ZpZXdzLmxpc3RXZWVrID0ge1xuXHR0eXBlOiAnbGlzdCcsXG5cdGR1cmF0aW9uOiB7IHdlZWtzOiAxIH0sXG5cdGRlZmF1bHRzOiB7XG5cdFx0bGlzdERheUZvcm1hdDogJ2RkZGQnLCAvLyBkYXktb2Ytd2VlayBpcyBtb3JlIGltcG9ydGFudFxuXHRcdGxpc3REYXlBbHRGb3JtYXQ6ICdMTCdcblx0fVxufTtcblxuZmNWaWV3cy5saXN0TW9udGggPSB7XG5cdHR5cGU6ICdsaXN0Jyxcblx0ZHVyYXRpb246IHsgbW9udGg6IDEgfSxcblx0ZGVmYXVsdHM6IHtcblx0XHRsaXN0RGF5QWx0Rm9ybWF0OiAnZGRkZCcgLy8gZGF5LW9mLXdlZWsgaXMgbmljZS10by1oYXZlXG5cdH1cbn07XG5cbmZjVmlld3MubGlzdFllYXIgPSB7XG5cdHR5cGU6ICdsaXN0Jyxcblx0ZHVyYXRpb246IHsgeWVhcjogMSB9LFxuXHRkZWZhdWx0czoge1xuXHRcdGxpc3REYXlBbHRGb3JtYXQ6ICdkZGRkJyAvLyBkYXktb2Ytd2VlayBpcyBuaWNlLXRvLWhhdmVcblx0fVxufTtcblxuOztcblxucmV0dXJuIEZDOyAvLyBleHBvcnQgZm9yIE5vZGUvQ29tbW9uSlNcbn0pO1xuIl19"}