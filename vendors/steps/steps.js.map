{"version":3,"sources":["build/node_modules/browser-pack/_prelude.js","build/node_modules/jquery-steps/build/jquery.steps.js","build/vendors/steps/build/vendors/steps/steps.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACz/DA,QAAQ,iCAAR","file":"steps.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*! \n * jQuery Steps v1.1.0 - 09/04/2014\n * Copyright (c) 2014 Rafael Staib (http://www.jquery-steps.com)\n * Licensed under MIT http://www.opensource.org/licenses/MIT\n */\n;(function ($, undefined)\n{\n$.fn.extend({\n    _aria: function (name, value)\n    {\n        return this.attr(\"aria-\" + name, value);\n    },\n\n    _removeAria: function (name)\n    {\n        return this.removeAttr(\"aria-\" + name);\n    },\n\n    _enableAria: function (enable)\n    {\n        return (enable == null || enable) ? \n            this.removeClass(\"disabled\")._aria(\"disabled\", \"false\") : \n            this.addClass(\"disabled\")._aria(\"disabled\", \"true\");\n    },\n\n    _showAria: function (show)\n    {\n        return (show == null || show) ? \n            this.show()._aria(\"hidden\", \"false\") : \n            this.hide()._aria(\"hidden\", \"true\");\n    },\n\n    _selectAria: function (select)\n    {\n        return (select == null || select) ? \n            this.addClass(\"current\")._aria(\"selected\", \"true\") : \n            this.removeClass(\"current\")._aria(\"selected\", \"false\");\n    },\n\n    _id: function (id)\n    {\n        return (id) ? this.attr(\"id\", id) : this.attr(\"id\");\n    }\n});\n\nif (!String.prototype.format)\n{\n    String.prototype.format = function()\n    {\n        var args = (arguments.length === 1 && $.isArray(arguments[0])) ? arguments[0] : arguments;\n        var formattedString = this;\n        for (var i = 0; i < args.length; i++)\n        {\n            var pattern = new RegExp(\"\\\\{\" + i + \"\\\\}\", \"gm\");\n            formattedString = formattedString.replace(pattern, args[i]);\n        }\n        return formattedString;\n    };\n}\n\n/**\n * A global unique id count.\n *\n * @static\n * @private\n * @property _uniqueId\n * @type Integer\n **/\nvar _uniqueId = 0;\n\n/**\n * The plugin prefix for cookies.\n *\n * @final\n * @private\n * @property _cookiePrefix\n * @type String\n **/\nvar _cookiePrefix = \"jQu3ry_5teps_St@te_\";\n\n/**\n * Suffix for the unique tab id.\n *\n * @final\n * @private\n * @property _tabSuffix\n * @type String\n * @since 0.9.7\n **/\nvar _tabSuffix = \"-t-\";\n\n/**\n * Suffix for the unique tabpanel id.\n *\n * @final\n * @private\n * @property _tabpanelSuffix\n * @type String\n * @since 0.9.7\n **/\nvar _tabpanelSuffix = \"-p-\";\n\n/**\n * Suffix for the unique title id.\n *\n * @final\n * @private\n * @property _titleSuffix\n * @type String\n * @since 0.9.7\n **/\nvar _titleSuffix = \"-h-\";\n\n/**\n * An error message for an \"index out of range\" error.\n *\n * @final\n * @private\n * @property _indexOutOfRangeErrorMessage\n * @type String\n **/\nvar _indexOutOfRangeErrorMessage = \"Index out of range.\";\n\n/**\n * An error message for an \"missing corresponding element\" error.\n *\n * @final\n * @private\n * @property _missingCorrespondingElementErrorMessage\n * @type String\n **/\nvar _missingCorrespondingElementErrorMessage = \"One or more corresponding step {0} are missing.\";\n\n/**\n * Adds a step to the cache.\n *\n * @static\n * @private\n * @method addStepToCache\n * @param wizard {Object} A jQuery wizard object\n * @param step {Object} The step object to add\n **/\nfunction addStepToCache(wizard, step)\n{\n    getSteps(wizard).push(step);\n}\n\nfunction analyzeData(wizard, options, state)\n{\n    var stepTitles = wizard.children(options.headerTag),\n        stepContents = wizard.children(options.bodyTag);\n\n    // Validate content\n    if (stepTitles.length > stepContents.length)\n    {\n        throwError(_missingCorrespondingElementErrorMessage, \"contents\");\n    }\n    else if (stepTitles.length < stepContents.length)\n    {\n        throwError(_missingCorrespondingElementErrorMessage, \"titles\");\n    }\n        \n    var startIndex = options.startIndex;\n\n    state.stepCount = stepTitles.length;\n\n    // Tries to load the saved state (step position)\n    if (options.saveState && $.cookie)\n    {\n        var savedState = $.cookie(_cookiePrefix + getUniqueId(wizard));\n        // Sets the saved position to the start index if not undefined or out of range \n        var savedIndex = parseInt(savedState, 0);\n        if (!isNaN(savedIndex) && savedIndex < state.stepCount)\n        {\n            startIndex = savedIndex;\n        }\n    }\n\n    state.currentIndex = startIndex;\n\n    stepTitles.each(function (index)\n    {\n        var item = $(this), // item == header\n            content = stepContents.eq(index),\n            modeData = content.data(\"mode\"),\n            mode = (modeData == null) ? contentMode.html : getValidEnumValue(contentMode,\n                (/^\\s*$/.test(modeData) || isNaN(modeData)) ? modeData : parseInt(modeData, 0)),\n            contentUrl = (mode === contentMode.html || content.data(\"url\") === undefined) ?\n                \"\" : content.data(\"url\"),\n            contentLoaded = (mode !== contentMode.html && content.data(\"loaded\") === \"1\"),\n            step = $.extend({}, stepModel, {\n                title: item.html(),\n                content: (mode === contentMode.html) ? content.html() : \"\",\n                contentUrl: contentUrl,\n                contentMode: mode,\n                contentLoaded: contentLoaded\n            });\n\n        addStepToCache(wizard, step);\n    });\n}\n\n/**\n * Triggers the onCanceled event.\n *\n * @static\n * @private\n * @method cancel\n * @param wizard {Object} The jQuery wizard object\n **/\nfunction cancel(wizard)\n{\n    wizard.triggerHandler(\"canceled\");\n}\n\nfunction decreaseCurrentIndexBy(state, decreaseBy)\n{\n    return state.currentIndex - decreaseBy;\n}\n\n/**\n * Removes the control functionality completely and transforms the current state to the initial HTML structure.\n *\n * @static\n * @private\n * @method destroy\n * @param wizard {Object} A jQuery wizard object\n **/\nfunction destroy(wizard, options)\n{\n    var eventNamespace = getEventNamespace(wizard);\n\n    // Remove virtual data objects from the wizard\n    wizard.unbind(eventNamespace).removeData(\"uid\").removeData(\"options\")\n        .removeData(\"state\").removeData(\"steps\").removeData(\"eventNamespace\")\n        .find(\".actions a\").unbind(eventNamespace);\n\n    // Remove attributes and CSS classes from the wizard\n    wizard.removeClass(options.clearFixCssClass + \" vertical\");\n\n    var contents = wizard.find(\".content > *\");\n\n    // Remove virtual data objects from panels and their titles\n    contents.removeData(\"loaded\").removeData(\"mode\").removeData(\"url\");\n\n    // Remove attributes, CSS classes and reset inline styles on all panels and their titles\n    contents.removeAttr(\"id\").removeAttr(\"role\").removeAttr(\"tabindex\")\n        .removeAttr(\"class\").removeAttr(\"style\")._removeAria(\"labelledby\")\n        ._removeAria(\"hidden\");\n\n    // Empty panels if the mode is set to 'async' or 'iframe'\n    wizard.find(\".content > [data-mode='async'],.content > [data-mode='iframe']\").empty();\n\n    var wizardSubstitute = $(\"<{0} class=\\\"{1}\\\"></{0}>\".format(wizard.get(0).tagName, wizard.attr(\"class\")));\n\n    var wizardId = wizard._id();\n    if (wizardId != null && wizardId !== \"\")\n    {\n        wizardSubstitute._id(wizardId);\n    }\n\n    wizardSubstitute.html(wizard.find(\".content\").html());\n    wizard.after(wizardSubstitute);\n    wizard.remove();\n\n    return wizardSubstitute;\n}\n\n/**\n * Triggers the onFinishing and onFinished event.\n *\n * @static\n * @private\n * @method finishStep\n * @param wizard {Object} The jQuery wizard object\n * @param state {Object} The state container of the current wizard\n **/\nfunction finishStep(wizard, state)\n{\n    var currentStep = wizard.find(\".steps li\").eq(state.currentIndex);\n\n    if (wizard.triggerHandler(\"finishing\", [state.currentIndex]))\n    {\n        currentStep.addClass(\"done\").removeClass(\"error\");\n        wizard.triggerHandler(\"finished\", [state.currentIndex]);\n    }\n    else\n    {\n        currentStep.addClass(\"error\");\n    }\n}\n\n/**\n * Gets or creates if not exist an unique event namespace for the given wizard instance.\n *\n * @static\n * @private\n * @method getEventNamespace\n * @param wizard {Object} A jQuery wizard object\n * @return {String} Returns the unique event namespace for the given wizard\n */\nfunction getEventNamespace(wizard)\n{\n    var eventNamespace = wizard.data(\"eventNamespace\");\n\n    if (eventNamespace == null)\n    {\n        eventNamespace = \".\" + getUniqueId(wizard);\n        wizard.data(\"eventNamespace\", eventNamespace);\n    }\n\n    return eventNamespace;\n}\n\nfunction getStepAnchor(wizard, index)\n{\n    var uniqueId = getUniqueId(wizard);\n\n    return wizard.find(\"#\" + uniqueId + _tabSuffix + index);\n}\n\nfunction getStepPanel(wizard, index)\n{\n    var uniqueId = getUniqueId(wizard);\n\n    return wizard.find(\"#\" + uniqueId + _tabpanelSuffix + index);\n}\n\nfunction getStepTitle(wizard, index)\n{\n    var uniqueId = getUniqueId(wizard);\n\n    return wizard.find(\"#\" + uniqueId + _titleSuffix + index);\n}\n\nfunction getOptions(wizard)\n{\n    return wizard.data(\"options\");\n}\n\nfunction getState(wizard)\n{\n    return wizard.data(\"state\");\n}\n\nfunction getSteps(wizard)\n{\n    return wizard.data(\"steps\");\n}\n\n/**\n * Gets a specific step object by index.\n *\n * @static\n * @private\n * @method getStep\n * @param index {Integer} An integer that belongs to the position of a step\n * @return {Object} A specific step object\n **/\nfunction getStep(wizard, index)\n{\n    var steps = getSteps(wizard);\n\n    if (index < 0 || index >= steps.length)\n    {\n        throwError(_indexOutOfRangeErrorMessage);\n    }\n\n    return steps[index];\n}\n\n/**\n * Gets or creates if not exist an unique id from the given wizard instance.\n *\n * @static\n * @private\n * @method getUniqueId\n * @param wizard {Object} A jQuery wizard object\n * @return {String} Returns the unique id for the given wizard\n */\nfunction getUniqueId(wizard)\n{\n    var uniqueId = wizard.data(\"uid\");\n\n    if (uniqueId == null)\n    {\n        uniqueId = wizard._id();\n        if (uniqueId == null)\n        {\n            uniqueId = \"steps-uid-\".concat(_uniqueId);\n            wizard._id(uniqueId);\n        }\n\n        _uniqueId++;\n        wizard.data(\"uid\", uniqueId);\n    }\n\n    return uniqueId;\n}\n\n/**\n * Gets a valid enum value by checking a specific enum key or value.\n * \n * @static\n * @private\n * @method getValidEnumValue\n * @param enumType {Object} Type of enum\n * @param keyOrValue {Object} Key as `String` or value as `Integer` to check for\n */\nfunction getValidEnumValue(enumType, keyOrValue)\n{\n    validateArgument(\"enumType\", enumType);\n    validateArgument(\"keyOrValue\", keyOrValue);\n\n    // Is key\n    if (typeof keyOrValue === \"string\")\n    {\n        var value = enumType[keyOrValue];\n        if (value === undefined)\n        {\n            throwError(\"The enum key '{0}' does not exist.\", keyOrValue);\n        }\n\n        return value;\n    }\n    // Is value\n    else if (typeof keyOrValue === \"number\")\n    {\n        for (var key in enumType)\n        {\n            if (enumType[key] === keyOrValue)\n            {\n                return keyOrValue;\n            }\n        }\n\n        throwError(\"Invalid enum value '{0}'.\", keyOrValue);\n    }\n    // Type is not supported\n    else\n    {\n        throwError(\"Invalid key or value type.\");\n    }\n}\n\n/**\n * Routes to the next step.\n *\n * @static\n * @private\n * @method goToNextStep\n * @param wizard {Object} The jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n * @return {Boolean} Indicates whether the action executed\n **/\nfunction goToNextStep(wizard, options, state)\n{\n    return paginationClick(wizard, options, state, increaseCurrentIndexBy(state, 1));\n}\n\n/**\n * Routes to the previous step.\n *\n * @static\n * @private\n * @method goToPreviousStep\n * @param wizard {Object} The jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n * @return {Boolean} Indicates whether the action executed\n **/\nfunction goToPreviousStep(wizard, options, state)\n{\n    return paginationClick(wizard, options, state, decreaseCurrentIndexBy(state, 1));\n}\n\n/**\n * Routes to a specific step by a given index.\n *\n * @static\n * @private\n * @method goToStep\n * @param wizard {Object} The jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n * @param index {Integer} The position (zero-based) to route to\n * @return {Boolean} Indicates whether the action succeeded or failed\n **/\nfunction goToStep(wizard, options, state, index)\n{\n    if (index < 0 || index >= state.stepCount)\n    {\n        throwError(_indexOutOfRangeErrorMessage);\n    }\n\n    if (options.forceMoveForward && index < state.currentIndex)\n    {\n        return;\n    }\n\n    var oldIndex = state.currentIndex;\n    if (wizard.triggerHandler(\"stepChanging\", [state.currentIndex, index]))\n    {\n        // Save new state\n        state.currentIndex = index;\n        saveCurrentStateToCookie(wizard, options, state);\n\n        // Change visualisation\n        refreshStepNavigation(wizard, options, state, oldIndex);\n        refreshPagination(wizard, options, state);\n        loadAsyncContent(wizard, options, state);\n        startTransitionEffect(wizard, options, state, index, oldIndex, function()\n        {\n            wizard.triggerHandler(\"stepChanged\", [index, oldIndex]);\n        });\n    }\n    else\n    {\n        wizard.find(\".steps li\").eq(oldIndex).addClass(\"error\");\n    }\n\n    return true;\n}\n\nfunction increaseCurrentIndexBy(state, increaseBy)\n{\n    return state.currentIndex + increaseBy;\n}\n\n/**\n * Initializes the component.\n *\n * @static\n * @private\n * @method initialize\n * @param options {Object} The component settings\n **/\nfunction initialize(options)\n{\n    /*jshint -W040 */\n    var opts = $.extend(true, {}, defaults, options);\n\n    return this.each(function ()\n    {\n        var wizard = $(this);\n        var state = {\n            currentIndex: opts.startIndex,\n            currentStep: null,\n            stepCount: 0,\n            transitionElement: null\n        };\n\n        // Create data container\n        wizard.data(\"options\", opts);\n        wizard.data(\"state\", state);\n        wizard.data(\"steps\", []);\n\n        analyzeData(wizard, opts, state);\n        render(wizard, opts, state);\n        registerEvents(wizard, opts);\n\n        // Trigger focus\n        if (opts.autoFocus && _uniqueId === 0)\n        {\n            getStepAnchor(wizard, opts.startIndex).focus();\n        }\n\n        wizard.triggerHandler(\"init\", [opts.startIndex]);\n    });\n}\n\n/**\n * Inserts a new step to a specific position.\n *\n * @static\n * @private\n * @method insertStep\n * @param wizard {Object} The jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n * @param index {Integer} The position (zero-based) to add\n * @param step {Object} The step object to add\n * @example\n *     $(\"#wizard\").steps().insert(0, {\n *         title: \"Title\",\n *         content: \"\", // optional\n *         contentMode: \"async\", // optional\n *         contentUrl: \"/Content/Step/1\" // optional\n *     });\n * @chainable\n **/\nfunction insertStep(wizard, options, state, index, step)\n{\n    if (index < 0 || index > state.stepCount)\n    {\n        throwError(_indexOutOfRangeErrorMessage);\n    }\n\n    // TODO: Validate step object\n\n    // Change data\n    step = $.extend({}, stepModel, step);\n    insertStepToCache(wizard, index, step);\n    if (state.currentIndex !== state.stepCount && state.currentIndex >= index)\n    {\n        state.currentIndex++;\n        saveCurrentStateToCookie(wizard, options, state);\n    }\n    state.stepCount++;\n\n    var contentContainer = wizard.find(\".content\"),\n        header = $(\"<{0}>{1}</{0}>\".format(options.headerTag, step.title)),\n        body = $(\"<{0}></{0}>\".format(options.bodyTag));\n\n    if (step.contentMode == null || step.contentMode === contentMode.html)\n    {\n        body.html(step.content);\n    }\n\n    if (index === 0)\n    {\n        contentContainer.prepend(body).prepend(header);\n    }\n    else\n    {\n        getStepPanel(wizard, (index - 1)).after(body).after(header);\n    }\n\n    renderBody(wizard, state, body, index);\n    renderTitle(wizard, options, state, header, index);\n    refreshSteps(wizard, options, state, index);\n    if (index === state.currentIndex)\n    {\n        refreshStepNavigation(wizard, options, state);\n    }\n    refreshPagination(wizard, options, state);\n\n    return wizard;\n}\n\n/**\n * Inserts a step object to the cache at a specific position.\n *\n * @static\n * @private\n * @method insertStepToCache\n * @param wizard {Object} A jQuery wizard object\n * @param index {Integer} The position (zero-based) to add\n * @param step {Object} The step object to add\n **/\nfunction insertStepToCache(wizard, index, step)\n{\n    getSteps(wizard).splice(index, 0, step);\n}\n\n/**\n * Handles the keyup DOM event for pagination.\n *\n * @static\n * @private\n * @event keyup\n * @param event {Object} An event object\n */\nfunction keyUpHandler(event)\n{\n    var wizard = $(this),\n        options = getOptions(wizard),\n        state = getState(wizard);\n\n    if (options.suppressPaginationOnFocus && wizard.find(\":focus\").is(\":input\"))\n    {\n        event.preventDefault();\n        return false;\n    }\n\n    var keyCodes = { left: 37, right: 39 };\n    if (event.keyCode === keyCodes.left)\n    {\n        event.preventDefault();\n        goToPreviousStep(wizard, options, state);\n    }\n    else if (event.keyCode === keyCodes.right)\n    {\n        event.preventDefault();\n        goToNextStep(wizard, options, state);\n    }\n}\n\n/**\n * Loads and includes async content.\n *\n * @static\n * @private\n * @method loadAsyncContent\n * @param wizard {Object} A jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n */\nfunction loadAsyncContent(wizard, options, state)\n{\n    if (state.stepCount > 0)\n    {\n        var currentIndex = state.currentIndex,\n            currentStep = getStep(wizard, currentIndex);\n\n        if (!options.enableContentCache || !currentStep.contentLoaded)\n        {\n            switch (getValidEnumValue(contentMode, currentStep.contentMode))\n            {\n                case contentMode.iframe:\n                    wizard.find(\".content > .body\").eq(state.currentIndex).empty()\n                        .html(\"<iframe src=\\\"\" + currentStep.contentUrl + \"\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" />\")\n                        .data(\"loaded\", \"1\");\n                    break;\n\n                case contentMode.async:\n                    var currentStepContent = getStepPanel(wizard, currentIndex)._aria(\"busy\", \"true\")\n                        .empty().append(renderTemplate(options.loadingTemplate, { text: options.labels.loading }));\n\n                    $.ajax({ url: currentStep.contentUrl, cache: false }).done(function (data)\n                    {\n                        currentStepContent.empty().html(data)._aria(\"busy\", \"false\").data(\"loaded\", \"1\");\n                        wizard.triggerHandler(\"contentLoaded\", [currentIndex]);\n                    });\n                    break;\n            }\n        }\n    }\n}\n\n/**\n * Fires the action next or previous click event.\n *\n * @static\n * @private\n * @method paginationClick\n * @param wizard {Object} The jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n * @param index {Integer} The position (zero-based) to route to\n * @return {Boolean} Indicates whether the event fired successfully or not\n **/\nfunction paginationClick(wizard, options, state, index)\n{\n    var oldIndex = state.currentIndex;\n\n    if (index >= 0 && index < state.stepCount && !(options.forceMoveForward && index < state.currentIndex))\n    {\n        var anchor = getStepAnchor(wizard, index),\n            parent = anchor.parent(),\n            isDisabled = parent.hasClass(\"disabled\");\n\n        // Enable the step to make the anchor clickable!\n        parent._enableAria();\n        anchor.click();\n\n        // An error occured\n        if (oldIndex === state.currentIndex && isDisabled)\n        {\n            // Disable the step again if current index has not changed; prevents click action.\n            parent._enableAria(false);\n            return false;\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * Fires when a pagination click happens.\n *\n * @static\n * @private\n * @event click\n * @param event {Object} An event object\n */\nfunction paginationClickHandler(event)\n{\n    event.preventDefault();\n\n    var anchor = $(this),\n        wizard = anchor.parent().parent().parent().parent(),\n        options = getOptions(wizard),\n        state = getState(wizard),\n        href = anchor.attr(\"href\");\n\n    switch (href.substring(href.lastIndexOf(\"#\") + 1))\n    {\n        case \"cancel\":\n            cancel(wizard);\n            break;\n\n        case \"finish\":\n            finishStep(wizard, state);\n            break;\n\n        case \"next\":\n            goToNextStep(wizard, options, state);\n            break;\n\n        case \"previous\":\n            goToPreviousStep(wizard, options, state);\n            break;\n    }\n}\n\n/**\n * Refreshs the visualization state for the entire pagination.\n *\n * @static\n * @private\n * @method refreshPagination\n * @param wizard {Object} A jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n */\nfunction refreshPagination(wizard, options, state)\n{\n    if (options.enablePagination)\n    {\n        var finish = wizard.find(\".actions a[href$='#finish']\").parent(),\n            next = wizard.find(\".actions a[href$='#next']\").parent();\n\n        if (!options.forceMoveForward)\n        {\n            var previous = wizard.find(\".actions a[href$='#previous']\").parent();\n            previous._enableAria(state.currentIndex > 0);\n        }\n\n        if (options.enableFinishButton && options.showFinishButtonAlways)\n        {\n            finish._enableAria(state.stepCount > 0);\n            next._enableAria(state.stepCount > 1 && state.stepCount > (state.currentIndex + 1));\n        }\n        else\n        {\n            finish._showAria(options.enableFinishButton && state.stepCount === (state.currentIndex + 1));\n            next._showAria(state.stepCount === 0 || state.stepCount > (state.currentIndex + 1)).\n                _enableAria(state.stepCount > (state.currentIndex + 1) || !options.enableFinishButton);\n        }\n    }\n}\n\n/**\n * Refreshs the visualization state for the step navigation (tabs).\n *\n * @static\n * @private\n * @method refreshStepNavigation\n * @param wizard {Object} A jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n * @param [oldIndex] {Integer} The index of the prior step\n */\nfunction refreshStepNavigation(wizard, options, state, oldIndex)\n{\n    var currentOrNewStepAnchor = getStepAnchor(wizard, state.currentIndex),\n        currentInfo = $(\"<span class=\\\"current-info audible\\\">\" + options.labels.current + \" </span>\"),\n        stepTitles = wizard.find(\".content > .title\");\n\n    if (oldIndex != null)\n    {\n        var oldStepAnchor = getStepAnchor(wizard, oldIndex);\n        oldStepAnchor.parent().addClass(\"done\").removeClass(\"error\")._selectAria(false);\n        stepTitles.eq(oldIndex).removeClass(\"current\").next(\".body\").removeClass(\"current\");\n        currentInfo = oldStepAnchor.find(\".current-info\");\n        currentOrNewStepAnchor.focus();\n    }\n\n    currentOrNewStepAnchor.prepend(currentInfo).parent()._selectAria().removeClass(\"done\")._enableAria();\n    stepTitles.eq(state.currentIndex).addClass(\"current\").next(\".body\").addClass(\"current\");\n}\n\n/**\n * Refreshes step buttons and their related titles beyond a certain position.\n *\n * @static\n * @private\n * @method refreshSteps\n * @param wizard {Object} A jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n * @param index {Integer} The start point for refreshing ids\n */\nfunction refreshSteps(wizard, options, state, index)\n{\n    var uniqueId = getUniqueId(wizard);\n\n    for (var i = index; i < state.stepCount; i++)\n    {\n        var uniqueStepId = uniqueId + _tabSuffix + i,\n            uniqueBodyId = uniqueId + _tabpanelSuffix + i,\n            uniqueHeaderId = uniqueId + _titleSuffix + i,\n            title = wizard.find(\".title\").eq(i)._id(uniqueHeaderId);\n\n        wizard.find(\".steps a\").eq(i)._id(uniqueStepId)\n            ._aria(\"controls\", uniqueBodyId).attr(\"href\", \"#\" + uniqueHeaderId)\n            .html(renderTemplate(options.titleTemplate, { index: i + 1, title: title.html() }));\n        wizard.find(\".body\").eq(i)._id(uniqueBodyId)\n            ._aria(\"labelledby\", uniqueHeaderId);\n    }\n}\n\nfunction registerEvents(wizard, options)\n{\n    var eventNamespace = getEventNamespace(wizard);\n\n    wizard.bind(\"canceled\" + eventNamespace, options.onCanceled);\n    wizard.bind(\"contentLoaded\" + eventNamespace, options.onContentLoaded);\n    wizard.bind(\"finishing\" + eventNamespace, options.onFinishing);\n    wizard.bind(\"finished\" + eventNamespace, options.onFinished);\n    wizard.bind(\"init\" + eventNamespace, options.onInit);\n    wizard.bind(\"stepChanging\" + eventNamespace, options.onStepChanging);\n    wizard.bind(\"stepChanged\" + eventNamespace, options.onStepChanged);\n\n    if (options.enableKeyNavigation)\n    {\n        wizard.bind(\"keyup\" + eventNamespace, keyUpHandler);\n    }\n\n    wizard.find(\".actions a\").bind(\"click\" + eventNamespace, paginationClickHandler);\n}\n\n/**\n * Removes a specific step by an given index.\n *\n * @static\n * @private\n * @method removeStep\n * @param wizard {Object} A jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n * @param index {Integer} The position (zero-based) of the step to remove\n * @return Indecates whether the item is removed.\n **/\nfunction removeStep(wizard, options, state, index)\n{\n    // Index out of range and try deleting current item will return false.\n    if (index < 0 || index >= state.stepCount || state.currentIndex === index)\n    {\n        return false;\n    }\n\n    // Change data\n    removeStepFromCache(wizard, index);\n    if (state.currentIndex > index)\n    {\n        state.currentIndex--;\n        saveCurrentStateToCookie(wizard, options, state);\n    }\n    state.stepCount--;\n\n    getStepTitle(wizard, index).remove();\n    getStepPanel(wizard, index).remove();\n    getStepAnchor(wizard, index).parent().remove();\n\n    // Set the \"first\" class to the new first step button \n    if (index === 0)\n    {\n        wizard.find(\".steps li\").first().addClass(\"first\");\n    }\n\n    // Set the \"last\" class to the new last step button \n    if (index === state.stepCount)\n    {\n        wizard.find(\".steps li\").eq(index).addClass(\"last\");\n    }\n\n    refreshSteps(wizard, options, state, index);\n    refreshPagination(wizard, options, state);\n\n    return true;\n}\n\nfunction removeStepFromCache(wizard, index)\n{\n    getSteps(wizard).splice(index, 1);\n}\n\n/**\n * Transforms the base html structure to a more sensible html structure.\n *\n * @static\n * @private\n * @method render\n * @param wizard {Object} A jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n **/\nfunction render(wizard, options, state)\n{\n    // Create a content wrapper and copy HTML from the intial wizard structure\n    var wrapperTemplate = \"<{0} class=\\\"{1}\\\">{2}</{0}>\",\n        orientation = getValidEnumValue(stepsOrientation, options.stepsOrientation),\n        verticalCssClass = (orientation === stepsOrientation.vertical) ? \" vertical\" : \"\",\n        contentWrapper = $(wrapperTemplate.format(options.contentContainerTag, \"content \" + options.clearFixCssClass, wizard.html())),\n        stepsWrapper = $(wrapperTemplate.format(options.stepsContainerTag, \"steps \" + options.clearFixCssClass, \"<ul role=\\\"tablist\\\"></ul>\")),\n        stepTitles = contentWrapper.children(options.headerTag),\n        stepContents = contentWrapper.children(options.bodyTag);\n\n    // Transform the wizard wrapper and remove the inner HTML\n    wizard.attr(\"role\", \"application\").empty().append(stepsWrapper).append(contentWrapper)\n        .addClass(options.cssClass + \" \" + options.clearFixCssClass + verticalCssClass);\n\n    // Add WIA-ARIA support\n    stepContents.each(function (index)\n    {\n        renderBody(wizard, state, $(this), index);\n    });\n\n    stepTitles.each(function (index)\n    {\n        renderTitle(wizard, options, state, $(this), index);\n    });\n\n    refreshStepNavigation(wizard, options, state);\n    renderPagination(wizard, options, state);\n}\n\n/**\n * Transforms the body to a proper tabpanel.\n *\n * @static\n * @private\n * @method renderBody\n * @param wizard {Object} A jQuery wizard object\n * @param body {Object} A jQuery body object\n * @param index {Integer} The position of the body\n */\nfunction renderBody(wizard, state, body, index)\n{\n    var uniqueId = getUniqueId(wizard),\n        uniqueBodyId = uniqueId + _tabpanelSuffix + index,\n        uniqueHeaderId = uniqueId + _titleSuffix + index;\n\n    body._id(uniqueBodyId).attr(\"role\", \"tabpanel\")._aria(\"labelledby\", uniqueHeaderId)\n        .addClass(\"body\")._showAria(state.currentIndex === index);\n}\n\n/**\n * Renders a pagination if enabled.\n *\n * @static\n * @private\n * @method renderPagination\n * @param wizard {Object} A jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n */\nfunction renderPagination(wizard, options, state)\n{\n    if (options.enablePagination)\n    {\n        var pagination = \"<{0} class=\\\"actions {1}\\\"><ul role=\\\"menu\\\" aria-label=\\\"{2}\\\">{3}</ul></{0}>\",\n            buttonTemplate = \"<li><a href=\\\"#{0}\\\" role=\\\"menuitem\\\">{1}</a></li>\",\n            buttons = \"\";\n\n        if (!options.forceMoveForward)\n        {\n            buttons += buttonTemplate.format(\"previous\", options.labels.previous);\n        }\n\n        buttons += buttonTemplate.format(\"next\", options.labels.next);\n\n        if (options.enableFinishButton)\n        {\n            buttons += buttonTemplate.format(\"finish\", options.labels.finish);\n        }\n\n        if (options.enableCancelButton)\n        {\n            buttons += buttonTemplate.format(\"cancel\", options.labels.cancel);\n        }\n\n        wizard.append(pagination.format(options.actionContainerTag, options.clearFixCssClass,\n            options.labels.pagination, buttons));\n\n        refreshPagination(wizard, options, state);\n        loadAsyncContent(wizard, options, state);\n    }\n}\n\n/**\n * Renders a template and replaces all placeholder.\n *\n * @static\n * @private\n * @method renderTemplate\n * @param template {String} A template\n * @param substitutes {Object} A list of substitute\n * @return {String} The rendered template\n */\nfunction renderTemplate(template, substitutes)\n{\n    var matches = template.match(/#([a-z]*)#/gi);\n\n    for (var i = 0; i < matches.length; i++)\n    {\n        var match = matches[i], \n            key = match.substring(1, match.length - 1);\n\n        if (substitutes[key] === undefined)\n        {\n            throwError(\"The key '{0}' does not exist in the substitute collection!\", key);\n        }\n\n        template = template.replace(match, substitutes[key]);\n    }\n\n    return template;\n}\n\n/**\n * Transforms the title to a step item button.\n *\n * @static\n * @private\n * @method renderTitle\n * @param wizard {Object} A jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n * @param header {Object} A jQuery header object\n * @param index {Integer} The position of the header\n */\nfunction renderTitle(wizard, options, state, header, index)\n{\n    var uniqueId = getUniqueId(wizard),\n        uniqueStepId = uniqueId + _tabSuffix + index,\n        uniqueBodyId = uniqueId + _tabpanelSuffix + index,\n        uniqueHeaderId = uniqueId + _titleSuffix + index,\n        stepCollection = wizard.find(\".steps > ul\"),\n        title = renderTemplate(options.titleTemplate, {\n            index: index + 1,\n            title: header.html()\n        }),\n        stepItem = $(\"<li role=\\\"tab\\\"><a id=\\\"\" + uniqueStepId + \"\\\" href=\\\"#\" + uniqueHeaderId + \n            \"\\\" aria-controls=\\\"\" + uniqueBodyId + \"\\\">\" + title + \"</a></li>\");\n        \n    stepItem._enableAria(options.enableAllSteps || state.currentIndex > index);\n\n    if (state.currentIndex > index)\n    {\n        stepItem.addClass(\"done\");\n    }\n\n    header._id(uniqueHeaderId).attr(\"tabindex\", \"-1\").addClass(\"title\");\n\n    if (index === 0)\n    {\n        stepCollection.prepend(stepItem);\n    }\n    else\n    {\n        stepCollection.find(\"li\").eq(index - 1).after(stepItem);\n    }\n\n    // Set the \"first\" class to the new first step button\n    if (index === 0)\n    {\n        stepCollection.find(\"li\").removeClass(\"first\").eq(index).addClass(\"first\");\n    }\n\n    // Set the \"last\" class to the new last step button\n    if (index === (state.stepCount - 1))\n    {\n        stepCollection.find(\"li\").removeClass(\"last\").eq(index).addClass(\"last\");\n    }\n\n    // Register click event\n    stepItem.children(\"a\").bind(\"click\" + getEventNamespace(wizard), stepClickHandler);\n}\n\n/**\n * Saves the current state to a cookie.\n *\n * @static\n * @private\n * @method saveCurrentStateToCookie\n * @param wizard {Object} A jQuery wizard object\n * @param options {Object} Settings of the current wizard\n * @param state {Object} The state container of the current wizard\n */\nfunction saveCurrentStateToCookie(wizard, options, state)\n{\n    if (options.saveState && $.cookie)\n    {\n        $.cookie(_cookiePrefix + getUniqueId(wizard), state.currentIndex);\n    }\n}\n\nfunction startTransitionEffect(wizard, options, state, index, oldIndex, doneCallback)\n{\n    var stepContents = wizard.find(\".content > .body\"),\n        effect = getValidEnumValue(transitionEffect, options.transitionEffect),\n        effectSpeed = options.transitionEffectSpeed,\n        newStep = stepContents.eq(index),\n        currentStep = stepContents.eq(oldIndex);\n\n    switch (effect)\n    {\n        case transitionEffect.fade:\n        case transitionEffect.slide:\n            var hide = (effect === transitionEffect.fade) ? \"fadeOut\" : \"slideUp\",\n                show = (effect === transitionEffect.fade) ? \"fadeIn\" : \"slideDown\";\n\n            state.transitionElement = newStep;\n            currentStep[hide](effectSpeed, function ()\n            {\n                var wizard = $(this)._showAria(false).parent().parent(),\n                    state = getState(wizard);\n\n                if (state.transitionElement)\n                {\n                    state.transitionElement[show](effectSpeed, function ()\n                    {\n                        $(this)._showAria();\n                    }).promise().done(doneCallback);\n                    state.transitionElement = null;\n                }\n            });\n            break;\n\n        case transitionEffect.slideLeft:\n            var outerWidth = currentStep.outerWidth(true),\n                posFadeOut = (index > oldIndex) ? -(outerWidth) : outerWidth,\n                posFadeIn = (index > oldIndex) ? outerWidth : -(outerWidth);\n\n            $.when(currentStep.animate({ left: posFadeOut }, effectSpeed, \n                    function () { $(this)._showAria(false); }),\n                newStep.css(\"left\", posFadeIn + \"px\")._showAria()\n                    .animate({ left: 0 }, effectSpeed)).done(doneCallback);\n            break;\n\n        default:\n            $.when(currentStep._showAria(false), newStep._showAria())\n                .done(doneCallback);\n            break;\n    }\n}\n\n/**\n * Fires when a step click happens.\n *\n * @static\n * @private\n * @event click\n * @param event {Object} An event object\n */\nfunction stepClickHandler(event)\n{\n    event.preventDefault();\n\n    var anchor = $(this),\n        wizard = anchor.parent().parent().parent().parent(),\n        options = getOptions(wizard),\n        state = getState(wizard),\n        oldIndex = state.currentIndex;\n\n    if (anchor.parent().is(\":not(.disabled):not(.current)\"))\n    {\n        var href = anchor.attr(\"href\"),\n            position = parseInt(href.substring(href.lastIndexOf(\"-\") + 1), 0);\n\n        goToStep(wizard, options, state, position);\n    }\n\n    // If nothing has changed\n    if (oldIndex === state.currentIndex)\n    {\n        getStepAnchor(wizard, oldIndex).focus();\n        return false;\n    }\n}\n\nfunction throwError(message)\n{\n    if (arguments.length > 1)\n    {\n        message = message.format(Array.prototype.slice.call(arguments, 1));\n    }\n\n    throw new Error(message);\n}\n\n/**\n * Checks an argument for null or undefined and throws an error if one check applies.\n *\n * @static\n * @private\n * @method validateArgument\n * @param argumentName {String} The name of the given argument\n * @param argumentValue {Object} The argument itself\n */\nfunction validateArgument(argumentName, argumentValue)\n{\n    if (argumentValue == null)\n    {\n        throwError(\"The argument '{0}' is null or undefined.\", argumentName);\n    }\n}\n\n/**\n * Represents a jQuery wizard plugin.\n *\n * @class steps\n * @constructor\n * @param [method={}] The name of the method as `String` or an JSON object for initialization\n * @param [params=]* {Array} Additional arguments for a method call\n * @chainable\n **/\n$.fn.steps = function (method)\n{\n    if ($.fn.steps[method])\n    {\n        return $.fn.steps[method].apply(this, Array.prototype.slice.call(arguments, 1));\n    }\n    else if (typeof method === \"object\" || !method)\n    {\n        return initialize.apply(this, arguments);\n    }\n    else\n    {\n        $.error(\"Method \" + method + \" does not exist on jQuery.steps\");\n    }\n};\n\n/**\n * Adds a new step.\n *\n * @method add\n * @param step {Object} The step object to add\n * @chainable\n **/\n$.fn.steps.add = function (step)\n{\n    var state = getState(this);\n    return insertStep(this, getOptions(this), state, state.stepCount, step);\n};\n\n/**\n * Removes the control functionality completely and transforms the current state to the initial HTML structure.\n *\n * @method destroy\n * @chainable\n **/\n$.fn.steps.destroy = function ()\n{\n    return destroy(this, getOptions(this));\n};\n\n/**\n * Triggers the onFinishing and onFinished event.\n *\n * @method finish\n **/\n$.fn.steps.finish = function ()\n{\n    finishStep(this, getState(this));\n};\n\n/**\n * Gets the current step index.\n *\n * @method getCurrentIndex\n * @return {Integer} The actual step index (zero-based)\n * @for steps\n **/\n$.fn.steps.getCurrentIndex = function ()\n{\n    return getState(this).currentIndex;\n};\n\n/**\n * Gets the current step object.\n *\n * @method getCurrentStep\n * @return {Object} The actual step object\n **/\n$.fn.steps.getCurrentStep = function ()\n{\n    return getStep(this, getState(this).currentIndex);\n};\n\n/**\n * Gets a specific step object by index.\n *\n * @method getStep\n * @param index {Integer} An integer that belongs to the position of a step\n * @return {Object} A specific step object\n **/\n$.fn.steps.getStep = function (index)\n{\n    return getStep(this, index);\n};\n\n/**\n * Inserts a new step to a specific position.\n *\n * @method insert\n * @param index {Integer} The position (zero-based) to add\n * @param step {Object} The step object to add\n * @example\n *     $(\"#wizard\").steps().insert(0, {\n *         title: \"Title\",\n *         content: \"\", // optional\n *         contentMode: \"async\", // optional\n *         contentUrl: \"/Content/Step/1\" // optional\n *     });\n * @chainable\n **/\n$.fn.steps.insert = function (index, step)\n{\n    return insertStep(this, getOptions(this), getState(this), index, step);\n};\n\n/**\n * Routes to the next step.\n *\n * @method next\n * @return {Boolean} Indicates whether the action executed\n **/\n$.fn.steps.next = function ()\n{\n    return goToNextStep(this, getOptions(this), getState(this));\n};\n\n/**\n * Routes to the previous step.\n *\n * @method previous\n * @return {Boolean} Indicates whether the action executed\n **/\n$.fn.steps.previous = function ()\n{\n    return goToPreviousStep(this, getOptions(this), getState(this));\n};\n\n/**\n * Removes a specific step by an given index.\n *\n * @method remove\n * @param index {Integer} The position (zero-based) of the step to remove\n * @return Indecates whether the item is removed.\n **/\n$.fn.steps.remove = function (index)\n{\n    return removeStep(this, getOptions(this), getState(this), index);\n};\n\n/**\n * Sets a specific step object by index.\n *\n * @method setStep\n * @param index {Integer} An integer that belongs to the position of a step\n * @param step {Object} The step object to change\n **/\n$.fn.steps.setStep = function (index, step)\n{\n    throw new Error(\"Not yet implemented!\");\n};\n\n/**\n * Skips an certain amount of steps.\n *\n * @method skip\n * @param count {Integer} The amount of steps that should be skipped\n * @return {Boolean} Indicates whether the action executed\n **/\n$.fn.steps.skip = function (count)\n{\n    throw new Error(\"Not yet implemented!\");\n};\n\n/**\n * An enum represents the different content types of a step and their loading mechanisms.\n *\n * @class contentMode\n * @for steps\n **/\nvar contentMode = $.fn.steps.contentMode = {\n    /**\n     * HTML embedded content\n     *\n     * @readOnly\n     * @property html\n     * @type Integer\n     * @for contentMode\n     **/\n    html: 0,\n\n    /**\n     * IFrame embedded content\n     *\n     * @readOnly\n     * @property iframe\n     * @type Integer\n     * @for contentMode\n     **/\n    iframe: 1,\n\n    /**\n     * Async embedded content\n     *\n     * @readOnly\n     * @property async\n     * @type Integer\n     * @for contentMode\n     **/\n    async: 2\n};\n\n/**\n * An enum represents the orientation of the steps navigation.\n *\n * @class stepsOrientation\n * @for steps\n **/\nvar stepsOrientation = $.fn.steps.stepsOrientation = {\n    /**\n     * Horizontal orientation\n     *\n     * @readOnly\n     * @property horizontal\n     * @type Integer\n     * @for stepsOrientation\n     **/\n    horizontal: 0,\n\n    /**\n     * Vertical orientation\n     *\n     * @readOnly\n     * @property vertical\n     * @type Integer\n     * @for stepsOrientation\n     **/\n    vertical: 1\n};\n\n/**\n * An enum that represents the various transition animations.\n *\n * @class transitionEffect\n * @for steps\n **/\nvar transitionEffect = $.fn.steps.transitionEffect = {\n    /**\n     * No transition animation\n     *\n     * @readOnly\n     * @property none\n     * @type Integer\n     * @for transitionEffect\n     **/\n    none: 0,\n\n    /**\n     * Fade in transition\n     *\n     * @readOnly\n     * @property fade\n     * @type Integer\n     * @for transitionEffect\n     **/\n    fade: 1,\n\n    /**\n     * Slide up transition\n     *\n     * @readOnly\n     * @property slide\n     * @type Integer\n     * @for transitionEffect\n     **/\n    slide: 2,\n\n    /**\n     * Slide left transition\n     *\n     * @readOnly\n     * @property slideLeft\n     * @type Integer\n     * @for transitionEffect\n     **/\n    slideLeft: 3\n};\n\nvar stepModel = $.fn.steps.stepModel = {\n    title: \"\",\n    content: \"\",\n    contentUrl: \"\",\n    contentMode: contentMode.html,\n    contentLoaded: false\n};\n\n/**\n * An object that represents the default settings.\n * There are two possibities to override the sub-properties.\n * Either by doing it generally (global) or on initialization.\n *\n * @static\n * @class defaults\n * @for steps\n * @example\n *   // Global approach\n *   $.steps.defaults.headerTag = \"h3\";\n * @example\n *   // Initialization approach\n *   $(\"#wizard\").steps({ headerTag: \"h3\" });\n **/\nvar defaults = $.fn.steps.defaults = {\n    /**\n     * The header tag is used to find the step button text within the declared wizard area.\n     *\n     * @property headerTag\n     * @type String\n     * @default \"h1\"\n     * @for defaults\n     **/\n    headerTag: \"h1\",\n\n    /**\n     * The body tag is used to find the step content within the declared wizard area.\n     *\n     * @property bodyTag\n     * @type String\n     * @default \"div\"\n     * @for defaults\n     **/\n    bodyTag: \"div\",\n\n    /**\n     * The content container tag which will be used to wrap all step contents.\n     *\n     * @property contentContainerTag\n     * @type String\n     * @default \"div\"\n     * @for defaults\n     **/\n    contentContainerTag: \"div\",\n\n    /**\n     * The action container tag which will be used to wrap the pagination navigation.\n     *\n     * @property actionContainerTag\n     * @type String\n     * @default \"div\"\n     * @for defaults\n     **/\n    actionContainerTag: \"div\",\n\n    /**\n     * The steps container tag which will be used to wrap the steps navigation.\n     *\n     * @property stepsContainerTag\n     * @type String\n     * @default \"div\"\n     * @for defaults\n     **/\n    stepsContainerTag: \"div\",\n\n    /**\n     * The css class which will be added to the outer component wrapper.\n     *\n     * @property cssClass\n     * @type String\n     * @default \"wizard\"\n     * @for defaults\n     * @example\n     *     <div class=\"wizard\">\n     *         ...\n     *     </div>\n     **/\n    cssClass: \"wizard\",\n\n    /**\n     * The css class which will be used for floating scenarios.\n     *\n     * @property clearFixCssClass\n     * @type String\n     * @default \"clearfix\"\n     * @for defaults\n     **/\n    clearFixCssClass: \"clearfix\",\n\n    /**\n     * Determines whether the steps are vertically or horizontally oriented.\n     *\n     * @property stepsOrientation\n     * @type stepsOrientation\n     * @default horizontal\n     * @for defaults\n     * @since 1.0.0\n     **/\n    stepsOrientation: stepsOrientation.horizontal,\n\n    /*\n     * Tempplates\n     */\n\n    /**\n     * The title template which will be used to create a step button.\n     *\n     * @property titleTemplate\n     * @type String\n     * @default \"<span class=\\\"number\\\">#index#.</span> #title#\"\n     * @for defaults\n     **/\n    titleTemplate: \"<span class=\\\"number\\\">#index#.</span> #title#\",\n\n    /**\n     * The loading template which will be used to create the loading animation.\n     *\n     * @property loadingTemplate\n     * @type String\n     * @default \"<span class=\\\"spinner\\\"></span> #text#\"\n     * @for defaults\n     **/\n    loadingTemplate: \"<span class=\\\"spinner\\\"></span> #text#\",\n\n    /*\n     * Behaviour\n     */\n\n    /**\n     * Sets the focus to the first wizard instance in order to enable the key navigation from the begining if `true`. \n     *\n     * @property autoFocus\n     * @type Boolean\n     * @default false\n     * @for defaults\n     * @since 0.9.4\n     **/\n    autoFocus: false,\n\n    /**\n     * Enables all steps from the begining if `true` (all steps are clickable).\n     *\n     * @property enableAllSteps\n     * @type Boolean\n     * @default false\n     * @for defaults\n     **/\n    enableAllSteps: false,\n\n    /**\n     * Enables keyboard navigation if `true` (arrow left and arrow right).\n     *\n     * @property enableKeyNavigation\n     * @type Boolean\n     * @default true\n     * @for defaults\n     **/\n    enableKeyNavigation: true,\n\n    /**\n     * Enables pagination if `true`.\n     *\n     * @property enablePagination\n     * @type Boolean\n     * @default true\n     * @for defaults\n     **/\n    enablePagination: true,\n\n    /**\n     * Suppresses pagination if a form field is focused.\n     *\n     * @property suppressPaginationOnFocus\n     * @type Boolean\n     * @default true\n     * @for defaults\n     **/\n    suppressPaginationOnFocus: true,\n\n    /**\n     * Enables cache for async loaded or iframe embedded content.\n     *\n     * @property enableContentCache\n     * @type Boolean\n     * @default true\n     * @for defaults\n     **/\n    enableContentCache: true,\n\n    /**\n     * Shows the cancel button if enabled.\n     *\n     * @property enableCancelButton\n     * @type Boolean\n     * @default false\n     * @for defaults\n     **/\n    enableCancelButton: false,\n\n    /**\n     * Shows the finish button if enabled.\n     *\n     * @property enableFinishButton\n     * @type Boolean\n     * @default true\n     * @for defaults\n     **/\n    enableFinishButton: true,\n\n    /**\n     * Not yet implemented.\n     *\n     * @property preloadContent\n     * @type Boolean\n     * @default false\n     * @for defaults\n     **/\n    preloadContent: false,\n\n    /**\n     * Shows the finish button always (on each step; right beside the next button) if `true`. \n     * Otherwise the next button will be replaced by the finish button if the last step becomes active.\n     *\n     * @property showFinishButtonAlways\n     * @type Boolean\n     * @default false\n     * @for defaults\n     **/\n    showFinishButtonAlways: false,\n\n    /**\n     * Prevents jumping to a previous step.\n     *\n     * @property forceMoveForward\n     * @type Boolean\n     * @default false\n     * @for defaults\n     **/\n    forceMoveForward: false,\n\n    /**\n     * Saves the current state (step position) to a cookie.\n     * By coming next time the last active step becomes activated.\n     *\n     * @property saveState\n     * @type Boolean\n     * @default false\n     * @for defaults\n     **/\n    saveState: false,\n\n    /**\n     * The position to start on (zero-based).\n     *\n     * @property startIndex\n     * @type Integer\n     * @default 0\n     * @for defaults\n     **/\n    startIndex: 0,\n\n    /*\n     * Animation Effect Configuration\n     */\n\n    /**\n     * The animation effect which will be used for step transitions.\n     *\n     * @property transitionEffect\n     * @type transitionEffect\n     * @default none\n     * @for defaults\n     **/\n    transitionEffect: transitionEffect.none,\n\n    /**\n     * Animation speed for step transitions (in milliseconds).\n     *\n     * @property transitionEffectSpeed\n     * @type Integer\n     * @default 200\n     * @for defaults\n     **/\n    transitionEffectSpeed: 200,\n\n    /*\n     * Events\n     */\n\n    /**\n     * Fires before the step changes and can be used to prevent step changing by returning `false`. \n     * Very useful for form validation. \n     *\n     * @property onStepChanging\n     * @type Event\n     * @default function (event, currentIndex, newIndex) { return true; }\n     * @for defaults\n     **/\n    onStepChanging: function (event, currentIndex, newIndex) { return true; },\n\n    /**\n     * Fires after the step has change. \n     *\n     * @property onStepChanged\n     * @type Event\n     * @default function (event, currentIndex, priorIndex) { }\n     * @for defaults\n     **/\n    onStepChanged: function (event, currentIndex, priorIndex) { },\n\n    /**\n     * Fires after cancelation. \n     *\n     * @property onCanceled\n     * @type Event\n     * @default function (event) { }\n     * @for defaults\n     **/\n    onCanceled: function (event) { },\n\n    /**\n     * Fires before finishing and can be used to prevent completion by returning `false`. \n     * Very useful for form validation. \n     *\n     * @property onFinishing\n     * @type Event\n     * @default function (event, currentIndex) { return true; }\n     * @for defaults\n     **/\n    onFinishing: function (event, currentIndex) { return true; },\n\n    /**\n     * Fires after completion. \n     *\n     * @property onFinished\n     * @type Event\n     * @default function (event, currentIndex) { }\n     * @for defaults\n     **/\n    onFinished: function (event, currentIndex) { },\n\n    /**\n     * Fires after async content is loaded. \n     *\n     * @property onContentLoaded\n     * @type Event\n     * @default function (event, index) { }\n     * @for defaults\n     **/\n    onContentLoaded: function (event, currentIndex) { },\n\n    /**\n     * Fires when the wizard is initialized. \n     *\n     * @property onInit\n     * @type Event\n     * @default function (event) { }\n     * @for defaults\n     **/\n    onInit: function (event, currentIndex) { },\n\n    /**\n     * Contains all labels. \n     *\n     * @property labels\n     * @type Object\n     * @for defaults\n     **/\n    labels: {\n        /**\n         * Label for the cancel button.\n         *\n         * @property cancel\n         * @type String\n         * @default \"Cancel\"\n         * @for defaults\n         **/\n        cancel: \"Cancel\",\n\n        /**\n         * This label is important for accessability reasons.\n         * Indicates which step is activated.\n         *\n         * @property current\n         * @type String\n         * @default \"current step:\"\n         * @for defaults\n         **/\n        current: \"current step:\",\n\n        /**\n         * This label is important for accessability reasons and describes the kind of navigation.\n         *\n         * @property pagination\n         * @type String\n         * @default \"Pagination\"\n         * @for defaults\n         * @since 0.9.7\n         **/\n        pagination: \"Pagination\",\n\n        /**\n         * Label for the finish button.\n         *\n         * @property finish\n         * @type String\n         * @default \"Finish\"\n         * @for defaults\n         **/\n        finish: \"Finish\",\n\n        /**\n         * Label for the next button.\n         *\n         * @property next\n         * @type String\n         * @default \"Next\"\n         * @for defaults\n         **/\n        next: \"Next\",\n\n        /**\n         * Label for the previous button.\n         *\n         * @property previous\n         * @type String\n         * @default \"Previous\"\n         * @for defaults\n         **/\n        previous: \"Previous\",\n\n        /**\n         * Label for the loading animation.\n         *\n         * @property loading\n         * @type String\n         * @default \"Loading ...\"\n         * @for defaults\n         **/\n        loading: \"Loading ...\"\n    }\n};\n})(jQuery);","require('jquery-steps/build/jquery.steps');\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvanF1ZXJ5LXN0ZXBzL2J1aWxkL2pxdWVyeS5zdGVwcy5qcyIsImJ1aWxkL3ZlbmRvcnMvc3RlcHMvc3RlcHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDei9EQSxRQUFRLGlDQUFSIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qISBcbiAqIGpRdWVyeSBTdGVwcyB2MS4xLjAgLSAwOS8wNC8yMDE0XG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgUmFmYWVsIFN0YWliIChodHRwOi8vd3d3LmpxdWVyeS1zdGVwcy5jb20pXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqL1xuOyhmdW5jdGlvbiAoJCwgdW5kZWZpbmVkKVxue1xuJC5mbi5leHRlbmQoe1xuICAgIF9hcmlhOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyKFwiYXJpYS1cIiArIG5hbWUsIHZhbHVlKTtcbiAgICB9LFxuXG4gICAgX3JlbW92ZUFyaWE6IGZ1bmN0aW9uIChuYW1lKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXR0cihcImFyaWEtXCIgKyBuYW1lKTtcbiAgICB9LFxuXG4gICAgX2VuYWJsZUFyaWE6IGZ1bmN0aW9uIChlbmFibGUpXG4gICAge1xuICAgICAgICByZXR1cm4gKGVuYWJsZSA9PSBudWxsIHx8IGVuYWJsZSkgPyBcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKS5fYXJpYShcImRpc2FibGVkXCIsIFwiZmFsc2VcIikgOiBcbiAgICAgICAgICAgIHRoaXMuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKS5fYXJpYShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcbiAgICB9LFxuXG4gICAgX3Nob3dBcmlhOiBmdW5jdGlvbiAoc2hvdylcbiAgICB7XG4gICAgICAgIHJldHVybiAoc2hvdyA9PSBudWxsIHx8IHNob3cpID8gXG4gICAgICAgICAgICB0aGlzLnNob3coKS5fYXJpYShcImhpZGRlblwiLCBcImZhbHNlXCIpIDogXG4gICAgICAgICAgICB0aGlzLmhpZGUoKS5fYXJpYShcImhpZGRlblwiLCBcInRydWVcIik7XG4gICAgfSxcblxuICAgIF9zZWxlY3RBcmlhOiBmdW5jdGlvbiAoc2VsZWN0KVxuICAgIHtcbiAgICAgICAgcmV0dXJuIChzZWxlY3QgPT0gbnVsbCB8fCBzZWxlY3QpID8gXG4gICAgICAgICAgICB0aGlzLmFkZENsYXNzKFwiY3VycmVudFwiKS5fYXJpYShcInNlbGVjdGVkXCIsIFwidHJ1ZVwiKSA6IFxuICAgICAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhcImN1cnJlbnRcIikuX2FyaWEoXCJzZWxlY3RlZFwiLCBcImZhbHNlXCIpO1xuICAgIH0sXG5cbiAgICBfaWQ6IGZ1bmN0aW9uIChpZClcbiAgICB7XG4gICAgICAgIHJldHVybiAoaWQpID8gdGhpcy5hdHRyKFwiaWRcIiwgaWQpIDogdGhpcy5hdHRyKFwiaWRcIik7XG4gICAgfVxufSk7XG5cbmlmICghU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQpXG57XG4gICAgU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB2YXIgYXJncyA9IChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmICQuaXNBcnJheShhcmd1bWVudHNbMF0pKSA/IGFyZ3VtZW50c1swXSA6IGFyZ3VtZW50cztcbiAgICAgICAgdmFyIGZvcm1hdHRlZFN0cmluZyA9IHRoaXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXFxcXHtcIiArIGkgKyBcIlxcXFx9XCIsIFwiZ21cIik7XG4gICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSBmb3JtYXR0ZWRTdHJpbmcucmVwbGFjZShwYXR0ZXJuLCBhcmdzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkU3RyaW5nO1xuICAgIH07XG59XG5cbi8qKlxuICogQSBnbG9iYWwgdW5pcXVlIGlkIGNvdW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAcHJvcGVydHkgX3VuaXF1ZUlkXG4gKiBAdHlwZSBJbnRlZ2VyXG4gKiovXG52YXIgX3VuaXF1ZUlkID0gMDtcblxuLyoqXG4gKiBUaGUgcGx1Z2luIHByZWZpeCBmb3IgY29va2llcy5cbiAqXG4gKiBAZmluYWxcbiAqIEBwcml2YXRlXG4gKiBAcHJvcGVydHkgX2Nvb2tpZVByZWZpeFxuICogQHR5cGUgU3RyaW5nXG4gKiovXG52YXIgX2Nvb2tpZVByZWZpeCA9IFwialF1M3J5XzV0ZXBzX1N0QHRlX1wiO1xuXG4vKipcbiAqIFN1ZmZpeCBmb3IgdGhlIHVuaXF1ZSB0YWIgaWQuXG4gKlxuICogQGZpbmFsXG4gKiBAcHJpdmF0ZVxuICogQHByb3BlcnR5IF90YWJTdWZmaXhcbiAqIEB0eXBlIFN0cmluZ1xuICogQHNpbmNlIDAuOS43XG4gKiovXG52YXIgX3RhYlN1ZmZpeCA9IFwiLXQtXCI7XG5cbi8qKlxuICogU3VmZml4IGZvciB0aGUgdW5pcXVlIHRhYnBhbmVsIGlkLlxuICpcbiAqIEBmaW5hbFxuICogQHByaXZhdGVcbiAqIEBwcm9wZXJ0eSBfdGFicGFuZWxTdWZmaXhcbiAqIEB0eXBlIFN0cmluZ1xuICogQHNpbmNlIDAuOS43XG4gKiovXG52YXIgX3RhYnBhbmVsU3VmZml4ID0gXCItcC1cIjtcblxuLyoqXG4gKiBTdWZmaXggZm9yIHRoZSB1bmlxdWUgdGl0bGUgaWQuXG4gKlxuICogQGZpbmFsXG4gKiBAcHJpdmF0ZVxuICogQHByb3BlcnR5IF90aXRsZVN1ZmZpeFxuICogQHR5cGUgU3RyaW5nXG4gKiBAc2luY2UgMC45LjdcbiAqKi9cbnZhciBfdGl0bGVTdWZmaXggPSBcIi1oLVwiO1xuXG4vKipcbiAqIEFuIGVycm9yIG1lc3NhZ2UgZm9yIGFuIFwiaW5kZXggb3V0IG9mIHJhbmdlXCIgZXJyb3IuXG4gKlxuICogQGZpbmFsXG4gKiBAcHJpdmF0ZVxuICogQHByb3BlcnR5IF9pbmRleE91dE9mUmFuZ2VFcnJvck1lc3NhZ2VcbiAqIEB0eXBlIFN0cmluZ1xuICoqL1xudmFyIF9pbmRleE91dE9mUmFuZ2VFcnJvck1lc3NhZ2UgPSBcIkluZGV4IG91dCBvZiByYW5nZS5cIjtcblxuLyoqXG4gKiBBbiBlcnJvciBtZXNzYWdlIGZvciBhbiBcIm1pc3NpbmcgY29ycmVzcG9uZGluZyBlbGVtZW50XCIgZXJyb3IuXG4gKlxuICogQGZpbmFsXG4gKiBAcHJpdmF0ZVxuICogQHByb3BlcnR5IF9taXNzaW5nQ29ycmVzcG9uZGluZ0VsZW1lbnRFcnJvck1lc3NhZ2VcbiAqIEB0eXBlIFN0cmluZ1xuICoqL1xudmFyIF9taXNzaW5nQ29ycmVzcG9uZGluZ0VsZW1lbnRFcnJvck1lc3NhZ2UgPSBcIk9uZSBvciBtb3JlIGNvcnJlc3BvbmRpbmcgc3RlcCB7MH0gYXJlIG1pc3NpbmcuXCI7XG5cbi8qKlxuICogQWRkcyBhIHN0ZXAgdG8gdGhlIGNhY2hlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIGFkZFN0ZXBUb0NhY2hlXG4gKiBAcGFyYW0gd2l6YXJkIHtPYmplY3R9IEEgalF1ZXJ5IHdpemFyZCBvYmplY3RcbiAqIEBwYXJhbSBzdGVwIHtPYmplY3R9IFRoZSBzdGVwIG9iamVjdCB0byBhZGRcbiAqKi9cbmZ1bmN0aW9uIGFkZFN0ZXBUb0NhY2hlKHdpemFyZCwgc3RlcClcbntcbiAgICBnZXRTdGVwcyh3aXphcmQpLnB1c2goc3RlcCk7XG59XG5cbmZ1bmN0aW9uIGFuYWx5emVEYXRhKHdpemFyZCwgb3B0aW9ucywgc3RhdGUpXG57XG4gICAgdmFyIHN0ZXBUaXRsZXMgPSB3aXphcmQuY2hpbGRyZW4ob3B0aW9ucy5oZWFkZXJUYWcpLFxuICAgICAgICBzdGVwQ29udGVudHMgPSB3aXphcmQuY2hpbGRyZW4ob3B0aW9ucy5ib2R5VGFnKTtcblxuICAgIC8vIFZhbGlkYXRlIGNvbnRlbnRcbiAgICBpZiAoc3RlcFRpdGxlcy5sZW5ndGggPiBzdGVwQ29udGVudHMubGVuZ3RoKVxuICAgIHtcbiAgICAgICAgdGhyb3dFcnJvcihfbWlzc2luZ0NvcnJlc3BvbmRpbmdFbGVtZW50RXJyb3JNZXNzYWdlLCBcImNvbnRlbnRzXCIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdGVwVGl0bGVzLmxlbmd0aCA8IHN0ZXBDb250ZW50cy5sZW5ndGgpXG4gICAge1xuICAgICAgICB0aHJvd0Vycm9yKF9taXNzaW5nQ29ycmVzcG9uZGluZ0VsZW1lbnRFcnJvck1lc3NhZ2UsIFwidGl0bGVzXCIpO1xuICAgIH1cbiAgICAgICAgXG4gICAgdmFyIHN0YXJ0SW5kZXggPSBvcHRpb25zLnN0YXJ0SW5kZXg7XG5cbiAgICBzdGF0ZS5zdGVwQ291bnQgPSBzdGVwVGl0bGVzLmxlbmd0aDtcblxuICAgIC8vIFRyaWVzIHRvIGxvYWQgdGhlIHNhdmVkIHN0YXRlIChzdGVwIHBvc2l0aW9uKVxuICAgIGlmIChvcHRpb25zLnNhdmVTdGF0ZSAmJiAkLmNvb2tpZSlcbiAgICB7XG4gICAgICAgIHZhciBzYXZlZFN0YXRlID0gJC5jb29raWUoX2Nvb2tpZVByZWZpeCArIGdldFVuaXF1ZUlkKHdpemFyZCkpO1xuICAgICAgICAvLyBTZXRzIHRoZSBzYXZlZCBwb3NpdGlvbiB0byB0aGUgc3RhcnQgaW5kZXggaWYgbm90IHVuZGVmaW5lZCBvciBvdXQgb2YgcmFuZ2UgXG4gICAgICAgIHZhciBzYXZlZEluZGV4ID0gcGFyc2VJbnQoc2F2ZWRTdGF0ZSwgMCk7XG4gICAgICAgIGlmICghaXNOYU4oc2F2ZWRJbmRleCkgJiYgc2F2ZWRJbmRleCA8IHN0YXRlLnN0ZXBDb3VudClcbiAgICAgICAge1xuICAgICAgICAgICAgc3RhcnRJbmRleCA9IHNhdmVkSW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0ZS5jdXJyZW50SW5kZXggPSBzdGFydEluZGV4O1xuXG4gICAgc3RlcFRpdGxlcy5lYWNoKGZ1bmN0aW9uIChpbmRleClcbiAgICB7XG4gICAgICAgIHZhciBpdGVtID0gJCh0aGlzKSwgLy8gaXRlbSA9PSBoZWFkZXJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBzdGVwQ29udGVudHMuZXEoaW5kZXgpLFxuICAgICAgICAgICAgbW9kZURhdGEgPSBjb250ZW50LmRhdGEoXCJtb2RlXCIpLFxuICAgICAgICAgICAgbW9kZSA9IChtb2RlRGF0YSA9PSBudWxsKSA/IGNvbnRlbnRNb2RlLmh0bWwgOiBnZXRWYWxpZEVudW1WYWx1ZShjb250ZW50TW9kZSxcbiAgICAgICAgICAgICAgICAoL15cXHMqJC8udGVzdChtb2RlRGF0YSkgfHwgaXNOYU4obW9kZURhdGEpKSA/IG1vZGVEYXRhIDogcGFyc2VJbnQobW9kZURhdGEsIDApKSxcbiAgICAgICAgICAgIGNvbnRlbnRVcmwgPSAobW9kZSA9PT0gY29udGVudE1vZGUuaHRtbCB8fCBjb250ZW50LmRhdGEoXCJ1cmxcIikgPT09IHVuZGVmaW5lZCkgP1xuICAgICAgICAgICAgICAgIFwiXCIgOiBjb250ZW50LmRhdGEoXCJ1cmxcIiksXG4gICAgICAgICAgICBjb250ZW50TG9hZGVkID0gKG1vZGUgIT09IGNvbnRlbnRNb2RlLmh0bWwgJiYgY29udGVudC5kYXRhKFwibG9hZGVkXCIpID09PSBcIjFcIiksXG4gICAgICAgICAgICBzdGVwID0gJC5leHRlbmQoe30sIHN0ZXBNb2RlbCwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBpdGVtLmh0bWwoKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiAobW9kZSA9PT0gY29udGVudE1vZGUuaHRtbCkgPyBjb250ZW50Lmh0bWwoKSA6IFwiXCIsXG4gICAgICAgICAgICAgICAgY29udGVudFVybDogY29udGVudFVybCxcbiAgICAgICAgICAgICAgICBjb250ZW50TW9kZTogbW9kZSxcbiAgICAgICAgICAgICAgICBjb250ZW50TG9hZGVkOiBjb250ZW50TG9hZGVkXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBhZGRTdGVwVG9DYWNoZSh3aXphcmQsIHN0ZXApO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBvbkNhbmNlbGVkIGV2ZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIGNhbmNlbFxuICogQHBhcmFtIHdpemFyZCB7T2JqZWN0fSBUaGUgalF1ZXJ5IHdpemFyZCBvYmplY3RcbiAqKi9cbmZ1bmN0aW9uIGNhbmNlbCh3aXphcmQpXG57XG4gICAgd2l6YXJkLnRyaWdnZXJIYW5kbGVyKFwiY2FuY2VsZWRcIik7XG59XG5cbmZ1bmN0aW9uIGRlY3JlYXNlQ3VycmVudEluZGV4Qnkoc3RhdGUsIGRlY3JlYXNlQnkpXG57XG4gICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRJbmRleCAtIGRlY3JlYXNlQnk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgY29udHJvbCBmdW5jdGlvbmFsaXR5IGNvbXBsZXRlbHkgYW5kIHRyYW5zZm9ybXMgdGhlIGN1cnJlbnQgc3RhdGUgdG8gdGhlIGluaXRpYWwgSFRNTCBzdHJ1Y3R1cmUuXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgZGVzdHJveVxuICogQHBhcmFtIHdpemFyZCB7T2JqZWN0fSBBIGpRdWVyeSB3aXphcmQgb2JqZWN0XG4gKiovXG5mdW5jdGlvbiBkZXN0cm95KHdpemFyZCwgb3B0aW9ucylcbntcbiAgICB2YXIgZXZlbnROYW1lc3BhY2UgPSBnZXRFdmVudE5hbWVzcGFjZSh3aXphcmQpO1xuXG4gICAgLy8gUmVtb3ZlIHZpcnR1YWwgZGF0YSBvYmplY3RzIGZyb20gdGhlIHdpemFyZFxuICAgIHdpemFyZC51bmJpbmQoZXZlbnROYW1lc3BhY2UpLnJlbW92ZURhdGEoXCJ1aWRcIikucmVtb3ZlRGF0YShcIm9wdGlvbnNcIilcbiAgICAgICAgLnJlbW92ZURhdGEoXCJzdGF0ZVwiKS5yZW1vdmVEYXRhKFwic3RlcHNcIikucmVtb3ZlRGF0YShcImV2ZW50TmFtZXNwYWNlXCIpXG4gICAgICAgIC5maW5kKFwiLmFjdGlvbnMgYVwiKS51bmJpbmQoZXZlbnROYW1lc3BhY2UpO1xuXG4gICAgLy8gUmVtb3ZlIGF0dHJpYnV0ZXMgYW5kIENTUyBjbGFzc2VzIGZyb20gdGhlIHdpemFyZFxuICAgIHdpemFyZC5yZW1vdmVDbGFzcyhvcHRpb25zLmNsZWFyRml4Q3NzQ2xhc3MgKyBcIiB2ZXJ0aWNhbFwiKTtcblxuICAgIHZhciBjb250ZW50cyA9IHdpemFyZC5maW5kKFwiLmNvbnRlbnQgPiAqXCIpO1xuXG4gICAgLy8gUmVtb3ZlIHZpcnR1YWwgZGF0YSBvYmplY3RzIGZyb20gcGFuZWxzIGFuZCB0aGVpciB0aXRsZXNcbiAgICBjb250ZW50cy5yZW1vdmVEYXRhKFwibG9hZGVkXCIpLnJlbW92ZURhdGEoXCJtb2RlXCIpLnJlbW92ZURhdGEoXCJ1cmxcIik7XG5cbiAgICAvLyBSZW1vdmUgYXR0cmlidXRlcywgQ1NTIGNsYXNzZXMgYW5kIHJlc2V0IGlubGluZSBzdHlsZXMgb24gYWxsIHBhbmVscyBhbmQgdGhlaXIgdGl0bGVzXG4gICAgY29udGVudHMucmVtb3ZlQXR0cihcImlkXCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpLnJlbW92ZUF0dHIoXCJ0YWJpbmRleFwiKVxuICAgICAgICAucmVtb3ZlQXR0cihcImNsYXNzXCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKS5fcmVtb3ZlQXJpYShcImxhYmVsbGVkYnlcIilcbiAgICAgICAgLl9yZW1vdmVBcmlhKFwiaGlkZGVuXCIpO1xuXG4gICAgLy8gRW1wdHkgcGFuZWxzIGlmIHRoZSBtb2RlIGlzIHNldCB0byAnYXN5bmMnIG9yICdpZnJhbWUnXG4gICAgd2l6YXJkLmZpbmQoXCIuY29udGVudCA+IFtkYXRhLW1vZGU9J2FzeW5jJ10sLmNvbnRlbnQgPiBbZGF0YS1tb2RlPSdpZnJhbWUnXVwiKS5lbXB0eSgpO1xuXG4gICAgdmFyIHdpemFyZFN1YnN0aXR1dGUgPSAkKFwiPHswfSBjbGFzcz1cXFwiezF9XFxcIj48L3swfT5cIi5mb3JtYXQod2l6YXJkLmdldCgwKS50YWdOYW1lLCB3aXphcmQuYXR0cihcImNsYXNzXCIpKSk7XG5cbiAgICB2YXIgd2l6YXJkSWQgPSB3aXphcmQuX2lkKCk7XG4gICAgaWYgKHdpemFyZElkICE9IG51bGwgJiYgd2l6YXJkSWQgIT09IFwiXCIpXG4gICAge1xuICAgICAgICB3aXphcmRTdWJzdGl0dXRlLl9pZCh3aXphcmRJZCk7XG4gICAgfVxuXG4gICAgd2l6YXJkU3Vic3RpdHV0ZS5odG1sKHdpemFyZC5maW5kKFwiLmNvbnRlbnRcIikuaHRtbCgpKTtcbiAgICB3aXphcmQuYWZ0ZXIod2l6YXJkU3Vic3RpdHV0ZSk7XG4gICAgd2l6YXJkLnJlbW92ZSgpO1xuXG4gICAgcmV0dXJuIHdpemFyZFN1YnN0aXR1dGU7XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIG9uRmluaXNoaW5nIGFuZCBvbkZpbmlzaGVkIGV2ZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIGZpbmlzaFN0ZXBcbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gVGhlIGpRdWVyeSB3aXphcmQgb2JqZWN0XG4gKiBAcGFyYW0gc3RhdGUge09iamVjdH0gVGhlIHN0YXRlIGNvbnRhaW5lciBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqKi9cbmZ1bmN0aW9uIGZpbmlzaFN0ZXAod2l6YXJkLCBzdGF0ZSlcbntcbiAgICB2YXIgY3VycmVudFN0ZXAgPSB3aXphcmQuZmluZChcIi5zdGVwcyBsaVwiKS5lcShzdGF0ZS5jdXJyZW50SW5kZXgpO1xuXG4gICAgaWYgKHdpemFyZC50cmlnZ2VySGFuZGxlcihcImZpbmlzaGluZ1wiLCBbc3RhdGUuY3VycmVudEluZGV4XSkpXG4gICAge1xuICAgICAgICBjdXJyZW50U3RlcC5hZGRDbGFzcyhcImRvbmVcIikucmVtb3ZlQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgd2l6YXJkLnRyaWdnZXJIYW5kbGVyKFwiZmluaXNoZWRcIiwgW3N0YXRlLmN1cnJlbnRJbmRleF0pO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICBjdXJyZW50U3RlcC5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBHZXRzIG9yIGNyZWF0ZXMgaWYgbm90IGV4aXN0IGFuIHVuaXF1ZSBldmVudCBuYW1lc3BhY2UgZm9yIHRoZSBnaXZlbiB3aXphcmQgaW5zdGFuY2UuXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgZ2V0RXZlbnROYW1lc3BhY2VcbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gQSBqUXVlcnkgd2l6YXJkIG9iamVjdFxuICogQHJldHVybiB7U3RyaW5nfSBSZXR1cm5zIHRoZSB1bmlxdWUgZXZlbnQgbmFtZXNwYWNlIGZvciB0aGUgZ2l2ZW4gd2l6YXJkXG4gKi9cbmZ1bmN0aW9uIGdldEV2ZW50TmFtZXNwYWNlKHdpemFyZClcbntcbiAgICB2YXIgZXZlbnROYW1lc3BhY2UgPSB3aXphcmQuZGF0YShcImV2ZW50TmFtZXNwYWNlXCIpO1xuXG4gICAgaWYgKGV2ZW50TmFtZXNwYWNlID09IG51bGwpXG4gICAge1xuICAgICAgICBldmVudE5hbWVzcGFjZSA9IFwiLlwiICsgZ2V0VW5pcXVlSWQod2l6YXJkKTtcbiAgICAgICAgd2l6YXJkLmRhdGEoXCJldmVudE5hbWVzcGFjZVwiLCBldmVudE5hbWVzcGFjZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50TmFtZXNwYWNlO1xufVxuXG5mdW5jdGlvbiBnZXRTdGVwQW5jaG9yKHdpemFyZCwgaW5kZXgpXG57XG4gICAgdmFyIHVuaXF1ZUlkID0gZ2V0VW5pcXVlSWQod2l6YXJkKTtcblxuICAgIHJldHVybiB3aXphcmQuZmluZChcIiNcIiArIHVuaXF1ZUlkICsgX3RhYlN1ZmZpeCArIGluZGV4KTtcbn1cblxuZnVuY3Rpb24gZ2V0U3RlcFBhbmVsKHdpemFyZCwgaW5kZXgpXG57XG4gICAgdmFyIHVuaXF1ZUlkID0gZ2V0VW5pcXVlSWQod2l6YXJkKTtcblxuICAgIHJldHVybiB3aXphcmQuZmluZChcIiNcIiArIHVuaXF1ZUlkICsgX3RhYnBhbmVsU3VmZml4ICsgaW5kZXgpO1xufVxuXG5mdW5jdGlvbiBnZXRTdGVwVGl0bGUod2l6YXJkLCBpbmRleClcbntcbiAgICB2YXIgdW5pcXVlSWQgPSBnZXRVbmlxdWVJZCh3aXphcmQpO1xuXG4gICAgcmV0dXJuIHdpemFyZC5maW5kKFwiI1wiICsgdW5pcXVlSWQgKyBfdGl0bGVTdWZmaXggKyBpbmRleCk7XG59XG5cbmZ1bmN0aW9uIGdldE9wdGlvbnMod2l6YXJkKVxue1xuICAgIHJldHVybiB3aXphcmQuZGF0YShcIm9wdGlvbnNcIik7XG59XG5cbmZ1bmN0aW9uIGdldFN0YXRlKHdpemFyZClcbntcbiAgICByZXR1cm4gd2l6YXJkLmRhdGEoXCJzdGF0ZVwiKTtcbn1cblxuZnVuY3Rpb24gZ2V0U3RlcHMod2l6YXJkKVxue1xuICAgIHJldHVybiB3aXphcmQuZGF0YShcInN0ZXBzXCIpO1xufVxuXG4vKipcbiAqIEdldHMgYSBzcGVjaWZpYyBzdGVwIG9iamVjdCBieSBpbmRleC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCBnZXRTdGVwXG4gKiBAcGFyYW0gaW5kZXgge0ludGVnZXJ9IEFuIGludGVnZXIgdGhhdCBiZWxvbmdzIHRvIHRoZSBwb3NpdGlvbiBvZiBhIHN0ZXBcbiAqIEByZXR1cm4ge09iamVjdH0gQSBzcGVjaWZpYyBzdGVwIG9iamVjdFxuICoqL1xuZnVuY3Rpb24gZ2V0U3RlcCh3aXphcmQsIGluZGV4KVxue1xuICAgIHZhciBzdGVwcyA9IGdldFN0ZXBzKHdpemFyZCk7XG5cbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHN0ZXBzLmxlbmd0aClcbiAgICB7XG4gICAgICAgIHRocm93RXJyb3IoX2luZGV4T3V0T2ZSYW5nZUVycm9yTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0ZXBzW2luZGV4XTtcbn1cblxuLyoqXG4gKiBHZXRzIG9yIGNyZWF0ZXMgaWYgbm90IGV4aXN0IGFuIHVuaXF1ZSBpZCBmcm9tIHRoZSBnaXZlbiB3aXphcmQgaW5zdGFuY2UuXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgZ2V0VW5pcXVlSWRcbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gQSBqUXVlcnkgd2l6YXJkIG9iamVjdFxuICogQHJldHVybiB7U3RyaW5nfSBSZXR1cm5zIHRoZSB1bmlxdWUgaWQgZm9yIHRoZSBnaXZlbiB3aXphcmRcbiAqL1xuZnVuY3Rpb24gZ2V0VW5pcXVlSWQod2l6YXJkKVxue1xuICAgIHZhciB1bmlxdWVJZCA9IHdpemFyZC5kYXRhKFwidWlkXCIpO1xuXG4gICAgaWYgKHVuaXF1ZUlkID09IG51bGwpXG4gICAge1xuICAgICAgICB1bmlxdWVJZCA9IHdpemFyZC5faWQoKTtcbiAgICAgICAgaWYgKHVuaXF1ZUlkID09IG51bGwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVuaXF1ZUlkID0gXCJzdGVwcy11aWQtXCIuY29uY2F0KF91bmlxdWVJZCk7XG4gICAgICAgICAgICB3aXphcmQuX2lkKHVuaXF1ZUlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF91bmlxdWVJZCsrO1xuICAgICAgICB3aXphcmQuZGF0YShcInVpZFwiLCB1bmlxdWVJZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuaXF1ZUlkO1xufVxuXG4vKipcbiAqIEdldHMgYSB2YWxpZCBlbnVtIHZhbHVlIGJ5IGNoZWNraW5nIGEgc3BlY2lmaWMgZW51bSBrZXkgb3IgdmFsdWUuXG4gKiBcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIGdldFZhbGlkRW51bVZhbHVlXG4gKiBAcGFyYW0gZW51bVR5cGUge09iamVjdH0gVHlwZSBvZiBlbnVtXG4gKiBAcGFyYW0ga2V5T3JWYWx1ZSB7T2JqZWN0fSBLZXkgYXMgYFN0cmluZ2Agb3IgdmFsdWUgYXMgYEludGVnZXJgIHRvIGNoZWNrIGZvclxuICovXG5mdW5jdGlvbiBnZXRWYWxpZEVudW1WYWx1ZShlbnVtVHlwZSwga2V5T3JWYWx1ZSlcbntcbiAgICB2YWxpZGF0ZUFyZ3VtZW50KFwiZW51bVR5cGVcIiwgZW51bVR5cGUpO1xuICAgIHZhbGlkYXRlQXJndW1lbnQoXCJrZXlPclZhbHVlXCIsIGtleU9yVmFsdWUpO1xuXG4gICAgLy8gSXMga2V5XG4gICAgaWYgKHR5cGVvZiBrZXlPclZhbHVlID09PSBcInN0cmluZ1wiKVxuICAgIHtcbiAgICAgICAgdmFyIHZhbHVlID0gZW51bVR5cGVba2V5T3JWYWx1ZV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKFwiVGhlIGVudW0ga2V5ICd7MH0nIGRvZXMgbm90IGV4aXN0LlwiLCBrZXlPclZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLy8gSXMgdmFsdWVcbiAgICBlbHNlIGlmICh0eXBlb2Yga2V5T3JWYWx1ZSA9PT0gXCJudW1iZXJcIilcbiAgICB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBlbnVtVHlwZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGVudW1UeXBlW2tleV0gPT09IGtleU9yVmFsdWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleU9yVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvd0Vycm9yKFwiSW52YWxpZCBlbnVtIHZhbHVlICd7MH0nLlwiLCBrZXlPclZhbHVlKTtcbiAgICB9XG4gICAgLy8gVHlwZSBpcyBub3Qgc3VwcG9ydGVkXG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgdGhyb3dFcnJvcihcIkludmFsaWQga2V5IG9yIHZhbHVlIHR5cGUuXCIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSb3V0ZXMgdG8gdGhlIG5leHQgc3RlcC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCBnb1RvTmV4dFN0ZXBcbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gVGhlIGpRdWVyeSB3aXphcmQgb2JqZWN0XG4gKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBTZXR0aW5ncyBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqIEBwYXJhbSBzdGF0ZSB7T2JqZWN0fSBUaGUgc3RhdGUgY29udGFpbmVyIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHJldHVybiB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGFjdGlvbiBleGVjdXRlZFxuICoqL1xuZnVuY3Rpb24gZ29Ub05leHRTdGVwKHdpemFyZCwgb3B0aW9ucywgc3RhdGUpXG57XG4gICAgcmV0dXJuIHBhZ2luYXRpb25DbGljayh3aXphcmQsIG9wdGlvbnMsIHN0YXRlLCBpbmNyZWFzZUN1cnJlbnRJbmRleEJ5KHN0YXRlLCAxKSk7XG59XG5cbi8qKlxuICogUm91dGVzIHRvIHRoZSBwcmV2aW91cyBzdGVwLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIGdvVG9QcmV2aW91c1N0ZXBcbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gVGhlIGpRdWVyeSB3aXphcmQgb2JqZWN0XG4gKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBTZXR0aW5ncyBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqIEBwYXJhbSBzdGF0ZSB7T2JqZWN0fSBUaGUgc3RhdGUgY29udGFpbmVyIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHJldHVybiB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGFjdGlvbiBleGVjdXRlZFxuICoqL1xuZnVuY3Rpb24gZ29Ub1ByZXZpb3VzU3RlcCh3aXphcmQsIG9wdGlvbnMsIHN0YXRlKVxue1xuICAgIHJldHVybiBwYWdpbmF0aW9uQ2xpY2sod2l6YXJkLCBvcHRpb25zLCBzdGF0ZSwgZGVjcmVhc2VDdXJyZW50SW5kZXhCeShzdGF0ZSwgMSkpO1xufVxuXG4vKipcbiAqIFJvdXRlcyB0byBhIHNwZWNpZmljIHN0ZXAgYnkgYSBnaXZlbiBpbmRleC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCBnb1RvU3RlcFxuICogQHBhcmFtIHdpemFyZCB7T2JqZWN0fSBUaGUgalF1ZXJ5IHdpemFyZCBvYmplY3RcbiAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IFNldHRpbmdzIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHBhcmFtIHN0YXRlIHtPYmplY3R9IFRoZSBzdGF0ZSBjb250YWluZXIgb2YgdGhlIGN1cnJlbnQgd2l6YXJkXG4gKiBAcGFyYW0gaW5kZXgge0ludGVnZXJ9IFRoZSBwb3NpdGlvbiAoemVyby1iYXNlZCkgdG8gcm91dGUgdG9cbiAqIEByZXR1cm4ge0Jvb2xlYW59IEluZGljYXRlcyB3aGV0aGVyIHRoZSBhY3Rpb24gc3VjY2VlZGVkIG9yIGZhaWxlZFxuICoqL1xuZnVuY3Rpb24gZ29Ub1N0ZXAod2l6YXJkLCBvcHRpb25zLCBzdGF0ZSwgaW5kZXgpXG57XG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBzdGF0ZS5zdGVwQ291bnQpXG4gICAge1xuICAgICAgICB0aHJvd0Vycm9yKF9pbmRleE91dE9mUmFuZ2VFcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmZvcmNlTW92ZUZvcndhcmQgJiYgaW5kZXggPCBzdGF0ZS5jdXJyZW50SW5kZXgpXG4gICAge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG9sZEluZGV4ID0gc3RhdGUuY3VycmVudEluZGV4O1xuICAgIGlmICh3aXphcmQudHJpZ2dlckhhbmRsZXIoXCJzdGVwQ2hhbmdpbmdcIiwgW3N0YXRlLmN1cnJlbnRJbmRleCwgaW5kZXhdKSlcbiAgICB7XG4gICAgICAgIC8vIFNhdmUgbmV3IHN0YXRlXG4gICAgICAgIHN0YXRlLmN1cnJlbnRJbmRleCA9IGluZGV4O1xuICAgICAgICBzYXZlQ3VycmVudFN0YXRlVG9Db29raWUod2l6YXJkLCBvcHRpb25zLCBzdGF0ZSk7XG5cbiAgICAgICAgLy8gQ2hhbmdlIHZpc3VhbGlzYXRpb25cbiAgICAgICAgcmVmcmVzaFN0ZXBOYXZpZ2F0aW9uKHdpemFyZCwgb3B0aW9ucywgc3RhdGUsIG9sZEluZGV4KTtcbiAgICAgICAgcmVmcmVzaFBhZ2luYXRpb24od2l6YXJkLCBvcHRpb25zLCBzdGF0ZSk7XG4gICAgICAgIGxvYWRBc3luY0NvbnRlbnQod2l6YXJkLCBvcHRpb25zLCBzdGF0ZSk7XG4gICAgICAgIHN0YXJ0VHJhbnNpdGlvbkVmZmVjdCh3aXphcmQsIG9wdGlvbnMsIHN0YXRlLCBpbmRleCwgb2xkSW5kZXgsIGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgd2l6YXJkLnRyaWdnZXJIYW5kbGVyKFwic3RlcENoYW5nZWRcIiwgW2luZGV4LCBvbGRJbmRleF0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgd2l6YXJkLmZpbmQoXCIuc3RlcHMgbGlcIikuZXEob2xkSW5kZXgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGluY3JlYXNlQ3VycmVudEluZGV4Qnkoc3RhdGUsIGluY3JlYXNlQnkpXG57XG4gICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRJbmRleCArIGluY3JlYXNlQnk7XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIGNvbXBvbmVudC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCBpbml0aWFsaXplXG4gKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBUaGUgY29tcG9uZW50IHNldHRpbmdzXG4gKiovXG5mdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpXG57XG4gICAgLypqc2hpbnQgLVcwNDAgKi9cbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpXG4gICAge1xuICAgICAgICB2YXIgd2l6YXJkID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICAgICAgY3VycmVudEluZGV4OiBvcHRzLnN0YXJ0SW5kZXgsXG4gICAgICAgICAgICBjdXJyZW50U3RlcDogbnVsbCxcbiAgICAgICAgICAgIHN0ZXBDb3VudDogMCxcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbGVtZW50OiBudWxsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ3JlYXRlIGRhdGEgY29udGFpbmVyXG4gICAgICAgIHdpemFyZC5kYXRhKFwib3B0aW9uc1wiLCBvcHRzKTtcbiAgICAgICAgd2l6YXJkLmRhdGEoXCJzdGF0ZVwiLCBzdGF0ZSk7XG4gICAgICAgIHdpemFyZC5kYXRhKFwic3RlcHNcIiwgW10pO1xuXG4gICAgICAgIGFuYWx5emVEYXRhKHdpemFyZCwgb3B0cywgc3RhdGUpO1xuICAgICAgICByZW5kZXIod2l6YXJkLCBvcHRzLCBzdGF0ZSk7XG4gICAgICAgIHJlZ2lzdGVyRXZlbnRzKHdpemFyZCwgb3B0cyk7XG5cbiAgICAgICAgLy8gVHJpZ2dlciBmb2N1c1xuICAgICAgICBpZiAob3B0cy5hdXRvRm9jdXMgJiYgX3VuaXF1ZUlkID09PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBnZXRTdGVwQW5jaG9yKHdpemFyZCwgb3B0cy5zdGFydEluZGV4KS5mb2N1cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgd2l6YXJkLnRyaWdnZXJIYW5kbGVyKFwiaW5pdFwiLCBbb3B0cy5zdGFydEluZGV4XSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogSW5zZXJ0cyBhIG5ldyBzdGVwIHRvIGEgc3BlY2lmaWMgcG9zaXRpb24uXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgaW5zZXJ0U3RlcFxuICogQHBhcmFtIHdpemFyZCB7T2JqZWN0fSBUaGUgalF1ZXJ5IHdpemFyZCBvYmplY3RcbiAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IFNldHRpbmdzIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHBhcmFtIHN0YXRlIHtPYmplY3R9IFRoZSBzdGF0ZSBjb250YWluZXIgb2YgdGhlIGN1cnJlbnQgd2l6YXJkXG4gKiBAcGFyYW0gaW5kZXgge0ludGVnZXJ9IFRoZSBwb3NpdGlvbiAoemVyby1iYXNlZCkgdG8gYWRkXG4gKiBAcGFyYW0gc3RlcCB7T2JqZWN0fSBUaGUgc3RlcCBvYmplY3QgdG8gYWRkXG4gKiBAZXhhbXBsZVxuICogICAgICQoXCIjd2l6YXJkXCIpLnN0ZXBzKCkuaW5zZXJ0KDAsIHtcbiAqICAgICAgICAgdGl0bGU6IFwiVGl0bGVcIixcbiAqICAgICAgICAgY29udGVudDogXCJcIiwgLy8gb3B0aW9uYWxcbiAqICAgICAgICAgY29udGVudE1vZGU6IFwiYXN5bmNcIiwgLy8gb3B0aW9uYWxcbiAqICAgICAgICAgY29udGVudFVybDogXCIvQ29udGVudC9TdGVwLzFcIiAvLyBvcHRpb25hbFxuICogICAgIH0pO1xuICogQGNoYWluYWJsZVxuICoqL1xuZnVuY3Rpb24gaW5zZXJ0U3RlcCh3aXphcmQsIG9wdGlvbnMsIHN0YXRlLCBpbmRleCwgc3RlcClcbntcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gc3RhdGUuc3RlcENvdW50KVxuICAgIHtcbiAgICAgICAgdGhyb3dFcnJvcihfaW5kZXhPdXRPZlJhbmdlRXJyb3JNZXNzYWdlKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBWYWxpZGF0ZSBzdGVwIG9iamVjdFxuXG4gICAgLy8gQ2hhbmdlIGRhdGFcbiAgICBzdGVwID0gJC5leHRlbmQoe30sIHN0ZXBNb2RlbCwgc3RlcCk7XG4gICAgaW5zZXJ0U3RlcFRvQ2FjaGUod2l6YXJkLCBpbmRleCwgc3RlcCk7XG4gICAgaWYgKHN0YXRlLmN1cnJlbnRJbmRleCAhPT0gc3RhdGUuc3RlcENvdW50ICYmIHN0YXRlLmN1cnJlbnRJbmRleCA+PSBpbmRleClcbiAgICB7XG4gICAgICAgIHN0YXRlLmN1cnJlbnRJbmRleCsrO1xuICAgICAgICBzYXZlQ3VycmVudFN0YXRlVG9Db29raWUod2l6YXJkLCBvcHRpb25zLCBzdGF0ZSk7XG4gICAgfVxuICAgIHN0YXRlLnN0ZXBDb3VudCsrO1xuXG4gICAgdmFyIGNvbnRlbnRDb250YWluZXIgPSB3aXphcmQuZmluZChcIi5jb250ZW50XCIpLFxuICAgICAgICBoZWFkZXIgPSAkKFwiPHswfT57MX08L3swfT5cIi5mb3JtYXQob3B0aW9ucy5oZWFkZXJUYWcsIHN0ZXAudGl0bGUpKSxcbiAgICAgICAgYm9keSA9ICQoXCI8ezB9PjwvezB9PlwiLmZvcm1hdChvcHRpb25zLmJvZHlUYWcpKTtcblxuICAgIGlmIChzdGVwLmNvbnRlbnRNb2RlID09IG51bGwgfHwgc3RlcC5jb250ZW50TW9kZSA9PT0gY29udGVudE1vZGUuaHRtbClcbiAgICB7XG4gICAgICAgIGJvZHkuaHRtbChzdGVwLmNvbnRlbnQpO1xuICAgIH1cblxuICAgIGlmIChpbmRleCA9PT0gMClcbiAgICB7XG4gICAgICAgIGNvbnRlbnRDb250YWluZXIucHJlcGVuZChib2R5KS5wcmVwZW5kKGhlYWRlcik7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIGdldFN0ZXBQYW5lbCh3aXphcmQsIChpbmRleCAtIDEpKS5hZnRlcihib2R5KS5hZnRlcihoZWFkZXIpO1xuICAgIH1cblxuICAgIHJlbmRlckJvZHkod2l6YXJkLCBzdGF0ZSwgYm9keSwgaW5kZXgpO1xuICAgIHJlbmRlclRpdGxlKHdpemFyZCwgb3B0aW9ucywgc3RhdGUsIGhlYWRlciwgaW5kZXgpO1xuICAgIHJlZnJlc2hTdGVwcyh3aXphcmQsIG9wdGlvbnMsIHN0YXRlLCBpbmRleCk7XG4gICAgaWYgKGluZGV4ID09PSBzdGF0ZS5jdXJyZW50SW5kZXgpXG4gICAge1xuICAgICAgICByZWZyZXNoU3RlcE5hdmlnYXRpb24od2l6YXJkLCBvcHRpb25zLCBzdGF0ZSk7XG4gICAgfVxuICAgIHJlZnJlc2hQYWdpbmF0aW9uKHdpemFyZCwgb3B0aW9ucywgc3RhdGUpO1xuXG4gICAgcmV0dXJuIHdpemFyZDtcbn1cblxuLyoqXG4gKiBJbnNlcnRzIGEgc3RlcCBvYmplY3QgdG8gdGhlIGNhY2hlIGF0IGEgc3BlY2lmaWMgcG9zaXRpb24uXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgaW5zZXJ0U3RlcFRvQ2FjaGVcbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gQSBqUXVlcnkgd2l6YXJkIG9iamVjdFxuICogQHBhcmFtIGluZGV4IHtJbnRlZ2VyfSBUaGUgcG9zaXRpb24gKHplcm8tYmFzZWQpIHRvIGFkZFxuICogQHBhcmFtIHN0ZXAge09iamVjdH0gVGhlIHN0ZXAgb2JqZWN0IHRvIGFkZFxuICoqL1xuZnVuY3Rpb24gaW5zZXJ0U3RlcFRvQ2FjaGUod2l6YXJkLCBpbmRleCwgc3RlcClcbntcbiAgICBnZXRTdGVwcyh3aXphcmQpLnNwbGljZShpbmRleCwgMCwgc3RlcCk7XG59XG5cbi8qKlxuICogSGFuZGxlcyB0aGUga2V5dXAgRE9NIGV2ZW50IGZvciBwYWdpbmF0aW9uLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAZXZlbnQga2V5dXBcbiAqIEBwYXJhbSBldmVudCB7T2JqZWN0fSBBbiBldmVudCBvYmplY3RcbiAqL1xuZnVuY3Rpb24ga2V5VXBIYW5kbGVyKGV2ZW50KVxue1xuICAgIHZhciB3aXphcmQgPSAkKHRoaXMpLFxuICAgICAgICBvcHRpb25zID0gZ2V0T3B0aW9ucyh3aXphcmQpLFxuICAgICAgICBzdGF0ZSA9IGdldFN0YXRlKHdpemFyZCk7XG5cbiAgICBpZiAob3B0aW9ucy5zdXBwcmVzc1BhZ2luYXRpb25PbkZvY3VzICYmIHdpemFyZC5maW5kKFwiOmZvY3VzXCIpLmlzKFwiOmlucHV0XCIpKVxuICAgIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBrZXlDb2RlcyA9IHsgbGVmdDogMzcsIHJpZ2h0OiAzOSB9O1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSBrZXlDb2Rlcy5sZWZ0KVxuICAgIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZ29Ub1ByZXZpb3VzU3RlcCh3aXphcmQsIG9wdGlvbnMsIHN0YXRlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0ga2V5Q29kZXMucmlnaHQpXG4gICAge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBnb1RvTmV4dFN0ZXAod2l6YXJkLCBvcHRpb25zLCBzdGF0ZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIExvYWRzIGFuZCBpbmNsdWRlcyBhc3luYyBjb250ZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIGxvYWRBc3luY0NvbnRlbnRcbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gQSBqUXVlcnkgd2l6YXJkIG9iamVjdFxuICogQHBhcmFtIG9wdGlvbnMge09iamVjdH0gU2V0dGluZ3Mgb2YgdGhlIGN1cnJlbnQgd2l6YXJkXG4gKiBAcGFyYW0gc3RhdGUge09iamVjdH0gVGhlIHN0YXRlIGNvbnRhaW5lciBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqL1xuZnVuY3Rpb24gbG9hZEFzeW5jQ29udGVudCh3aXphcmQsIG9wdGlvbnMsIHN0YXRlKVxue1xuICAgIGlmIChzdGF0ZS5zdGVwQ291bnQgPiAwKVxuICAgIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHN0YXRlLmN1cnJlbnRJbmRleCxcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwID0gZ2V0U3RlcCh3aXphcmQsIGN1cnJlbnRJbmRleCk7XG5cbiAgICAgICAgaWYgKCFvcHRpb25zLmVuYWJsZUNvbnRlbnRDYWNoZSB8fCAhY3VycmVudFN0ZXAuY29udGVudExvYWRlZClcbiAgICAgICAge1xuICAgICAgICAgICAgc3dpdGNoIChnZXRWYWxpZEVudW1WYWx1ZShjb250ZW50TW9kZSwgY3VycmVudFN0ZXAuY29udGVudE1vZGUpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhc2UgY29udGVudE1vZGUuaWZyYW1lOlxuICAgICAgICAgICAgICAgICAgICB3aXphcmQuZmluZChcIi5jb250ZW50ID4gLmJvZHlcIikuZXEoc3RhdGUuY3VycmVudEluZGV4KS5lbXB0eSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChcIjxpZnJhbWUgc3JjPVxcXCJcIiArIGN1cnJlbnRTdGVwLmNvbnRlbnRVcmwgKyBcIlxcXCIgZnJhbWVib3JkZXI9XFxcIjBcXFwiIHNjcm9sbGluZz1cXFwibm9cXFwiIC8+XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShcImxvYWRlZFwiLCBcIjFcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBjb250ZW50TW9kZS5hc3luYzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGVwQ29udGVudCA9IGdldFN0ZXBQYW5lbCh3aXphcmQsIGN1cnJlbnRJbmRleCkuX2FyaWEoXCJidXN5XCIsIFwidHJ1ZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVtcHR5KCkuYXBwZW5kKHJlbmRlclRlbXBsYXRlKG9wdGlvbnMubG9hZGluZ1RlbXBsYXRlLCB7IHRleHQ6IG9wdGlvbnMubGFiZWxzLmxvYWRpbmcgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7IHVybDogY3VycmVudFN0ZXAuY29udGVudFVybCwgY2FjaGU6IGZhbHNlIH0pLmRvbmUoZnVuY3Rpb24gKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwQ29udGVudC5lbXB0eSgpLmh0bWwoZGF0YSkuX2FyaWEoXCJidXN5XCIsIFwiZmFsc2VcIikuZGF0YShcImxvYWRlZFwiLCBcIjFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aXphcmQudHJpZ2dlckhhbmRsZXIoXCJjb250ZW50TG9hZGVkXCIsIFtjdXJyZW50SW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEZpcmVzIHRoZSBhY3Rpb24gbmV4dCBvciBwcmV2aW91cyBjbGljayBldmVudC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCBwYWdpbmF0aW9uQ2xpY2tcbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gVGhlIGpRdWVyeSB3aXphcmQgb2JqZWN0XG4gKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBTZXR0aW5ncyBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqIEBwYXJhbSBzdGF0ZSB7T2JqZWN0fSBUaGUgc3RhdGUgY29udGFpbmVyIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHBhcmFtIGluZGV4IHtJbnRlZ2VyfSBUaGUgcG9zaXRpb24gKHplcm8tYmFzZWQpIHRvIHJvdXRlIHRvXG4gKiBAcmV0dXJuIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgZXZlbnQgZmlyZWQgc3VjY2Vzc2Z1bGx5IG9yIG5vdFxuICoqL1xuZnVuY3Rpb24gcGFnaW5hdGlvbkNsaWNrKHdpemFyZCwgb3B0aW9ucywgc3RhdGUsIGluZGV4KVxue1xuICAgIHZhciBvbGRJbmRleCA9IHN0YXRlLmN1cnJlbnRJbmRleDtcblxuICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgc3RhdGUuc3RlcENvdW50ICYmICEob3B0aW9ucy5mb3JjZU1vdmVGb3J3YXJkICYmIGluZGV4IDwgc3RhdGUuY3VycmVudEluZGV4KSlcbiAgICB7XG4gICAgICAgIHZhciBhbmNob3IgPSBnZXRTdGVwQW5jaG9yKHdpemFyZCwgaW5kZXgpLFxuICAgICAgICAgICAgcGFyZW50ID0gYW5jaG9yLnBhcmVudCgpLFxuICAgICAgICAgICAgaXNEaXNhYmxlZCA9IHBhcmVudC5oYXNDbGFzcyhcImRpc2FibGVkXCIpO1xuXG4gICAgICAgIC8vIEVuYWJsZSB0aGUgc3RlcCB0byBtYWtlIHRoZSBhbmNob3IgY2xpY2thYmxlIVxuICAgICAgICBwYXJlbnQuX2VuYWJsZUFyaWEoKTtcbiAgICAgICAgYW5jaG9yLmNsaWNrKCk7XG5cbiAgICAgICAgLy8gQW4gZXJyb3Igb2NjdXJlZFxuICAgICAgICBpZiAob2xkSW5kZXggPT09IHN0YXRlLmN1cnJlbnRJbmRleCAmJiBpc0Rpc2FibGVkKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBEaXNhYmxlIHRoZSBzdGVwIGFnYWluIGlmIGN1cnJlbnQgaW5kZXggaGFzIG5vdCBjaGFuZ2VkOyBwcmV2ZW50cyBjbGljayBhY3Rpb24uXG4gICAgICAgICAgICBwYXJlbnQuX2VuYWJsZUFyaWEoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEZpcmVzIHdoZW4gYSBwYWdpbmF0aW9uIGNsaWNrIGhhcHBlbnMuXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBldmVudCBjbGlja1xuICogQHBhcmFtIGV2ZW50IHtPYmplY3R9IEFuIGV2ZW50IG9iamVjdFxuICovXG5mdW5jdGlvbiBwYWdpbmF0aW9uQ2xpY2tIYW5kbGVyKGV2ZW50KVxue1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgYW5jaG9yID0gJCh0aGlzKSxcbiAgICAgICAgd2l6YXJkID0gYW5jaG9yLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLFxuICAgICAgICBvcHRpb25zID0gZ2V0T3B0aW9ucyh3aXphcmQpLFxuICAgICAgICBzdGF0ZSA9IGdldFN0YXRlKHdpemFyZCksXG4gICAgICAgIGhyZWYgPSBhbmNob3IuYXR0cihcImhyZWZcIik7XG5cbiAgICBzd2l0Y2ggKGhyZWYuc3Vic3RyaW5nKGhyZWYubGFzdEluZGV4T2YoXCIjXCIpICsgMSkpXG4gICAge1xuICAgICAgICBjYXNlIFwiY2FuY2VsXCI6XG4gICAgICAgICAgICBjYW5jZWwod2l6YXJkKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJmaW5pc2hcIjpcbiAgICAgICAgICAgIGZpbmlzaFN0ZXAod2l6YXJkLCBzdGF0ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwibmV4dFwiOlxuICAgICAgICAgICAgZ29Ub05leHRTdGVwKHdpemFyZCwgb3B0aW9ucywgc3RhdGUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInByZXZpb3VzXCI6XG4gICAgICAgICAgICBnb1RvUHJldmlvdXNTdGVwKHdpemFyZCwgb3B0aW9ucywgc3RhdGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlZnJlc2hzIHRoZSB2aXN1YWxpemF0aW9uIHN0YXRlIGZvciB0aGUgZW50aXJlIHBhZ2luYXRpb24uXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgcmVmcmVzaFBhZ2luYXRpb25cbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gQSBqUXVlcnkgd2l6YXJkIG9iamVjdFxuICogQHBhcmFtIG9wdGlvbnMge09iamVjdH0gU2V0dGluZ3Mgb2YgdGhlIGN1cnJlbnQgd2l6YXJkXG4gKiBAcGFyYW0gc3RhdGUge09iamVjdH0gVGhlIHN0YXRlIGNvbnRhaW5lciBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqL1xuZnVuY3Rpb24gcmVmcmVzaFBhZ2luYXRpb24od2l6YXJkLCBvcHRpb25zLCBzdGF0ZSlcbntcbiAgICBpZiAob3B0aW9ucy5lbmFibGVQYWdpbmF0aW9uKVxuICAgIHtcbiAgICAgICAgdmFyIGZpbmlzaCA9IHdpemFyZC5maW5kKFwiLmFjdGlvbnMgYVtocmVmJD0nI2ZpbmlzaCddXCIpLnBhcmVudCgpLFxuICAgICAgICAgICAgbmV4dCA9IHdpemFyZC5maW5kKFwiLmFjdGlvbnMgYVtocmVmJD0nI25leHQnXVwiKS5wYXJlbnQoKTtcblxuICAgICAgICBpZiAoIW9wdGlvbnMuZm9yY2VNb3ZlRm9yd2FyZClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzID0gd2l6YXJkLmZpbmQoXCIuYWN0aW9ucyBhW2hyZWYkPScjcHJldmlvdXMnXVwiKS5wYXJlbnQoKTtcbiAgICAgICAgICAgIHByZXZpb3VzLl9lbmFibGVBcmlhKHN0YXRlLmN1cnJlbnRJbmRleCA+IDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlRmluaXNoQnV0dG9uICYmIG9wdGlvbnMuc2hvd0ZpbmlzaEJ1dHRvbkFsd2F5cylcbiAgICAgICAge1xuICAgICAgICAgICAgZmluaXNoLl9lbmFibGVBcmlhKHN0YXRlLnN0ZXBDb3VudCA+IDApO1xuICAgICAgICAgICAgbmV4dC5fZW5hYmxlQXJpYShzdGF0ZS5zdGVwQ291bnQgPiAxICYmIHN0YXRlLnN0ZXBDb3VudCA+IChzdGF0ZS5jdXJyZW50SW5kZXggKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBmaW5pc2guX3Nob3dBcmlhKG9wdGlvbnMuZW5hYmxlRmluaXNoQnV0dG9uICYmIHN0YXRlLnN0ZXBDb3VudCA9PT0gKHN0YXRlLmN1cnJlbnRJbmRleCArIDEpKTtcbiAgICAgICAgICAgIG5leHQuX3Nob3dBcmlhKHN0YXRlLnN0ZXBDb3VudCA9PT0gMCB8fCBzdGF0ZS5zdGVwQ291bnQgPiAoc3RhdGUuY3VycmVudEluZGV4ICsgMSkpLlxuICAgICAgICAgICAgICAgIF9lbmFibGVBcmlhKHN0YXRlLnN0ZXBDb3VudCA+IChzdGF0ZS5jdXJyZW50SW5kZXggKyAxKSB8fCAhb3B0aW9ucy5lbmFibGVGaW5pc2hCdXR0b24pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFJlZnJlc2hzIHRoZSB2aXN1YWxpemF0aW9uIHN0YXRlIGZvciB0aGUgc3RlcCBuYXZpZ2F0aW9uICh0YWJzKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCByZWZyZXNoU3RlcE5hdmlnYXRpb25cbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gQSBqUXVlcnkgd2l6YXJkIG9iamVjdFxuICogQHBhcmFtIG9wdGlvbnMge09iamVjdH0gU2V0dGluZ3Mgb2YgdGhlIGN1cnJlbnQgd2l6YXJkXG4gKiBAcGFyYW0gc3RhdGUge09iamVjdH0gVGhlIHN0YXRlIGNvbnRhaW5lciBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqIEBwYXJhbSBbb2xkSW5kZXhdIHtJbnRlZ2VyfSBUaGUgaW5kZXggb2YgdGhlIHByaW9yIHN0ZXBcbiAqL1xuZnVuY3Rpb24gcmVmcmVzaFN0ZXBOYXZpZ2F0aW9uKHdpemFyZCwgb3B0aW9ucywgc3RhdGUsIG9sZEluZGV4KVxue1xuICAgIHZhciBjdXJyZW50T3JOZXdTdGVwQW5jaG9yID0gZ2V0U3RlcEFuY2hvcih3aXphcmQsIHN0YXRlLmN1cnJlbnRJbmRleCksXG4gICAgICAgIGN1cnJlbnRJbmZvID0gJChcIjxzcGFuIGNsYXNzPVxcXCJjdXJyZW50LWluZm8gYXVkaWJsZVxcXCI+XCIgKyBvcHRpb25zLmxhYmVscy5jdXJyZW50ICsgXCIgPC9zcGFuPlwiKSxcbiAgICAgICAgc3RlcFRpdGxlcyA9IHdpemFyZC5maW5kKFwiLmNvbnRlbnQgPiAudGl0bGVcIik7XG5cbiAgICBpZiAob2xkSW5kZXggIT0gbnVsbClcbiAgICB7XG4gICAgICAgIHZhciBvbGRTdGVwQW5jaG9yID0gZ2V0U3RlcEFuY2hvcih3aXphcmQsIG9sZEluZGV4KTtcbiAgICAgICAgb2xkU3RlcEFuY2hvci5wYXJlbnQoKS5hZGRDbGFzcyhcImRvbmVcIikucmVtb3ZlQ2xhc3MoXCJlcnJvclwiKS5fc2VsZWN0QXJpYShmYWxzZSk7XG4gICAgICAgIHN0ZXBUaXRsZXMuZXEob2xkSW5kZXgpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKS5uZXh0KFwiLmJvZHlcIikucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xuICAgICAgICBjdXJyZW50SW5mbyA9IG9sZFN0ZXBBbmNob3IuZmluZChcIi5jdXJyZW50LWluZm9cIik7XG4gICAgICAgIGN1cnJlbnRPck5ld1N0ZXBBbmNob3IuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBjdXJyZW50T3JOZXdTdGVwQW5jaG9yLnByZXBlbmQoY3VycmVudEluZm8pLnBhcmVudCgpLl9zZWxlY3RBcmlhKCkucmVtb3ZlQ2xhc3MoXCJkb25lXCIpLl9lbmFibGVBcmlhKCk7XG4gICAgc3RlcFRpdGxlcy5lcShzdGF0ZS5jdXJyZW50SW5kZXgpLmFkZENsYXNzKFwiY3VycmVudFwiKS5uZXh0KFwiLmJvZHlcIikuYWRkQ2xhc3MoXCJjdXJyZW50XCIpO1xufVxuXG4vKipcbiAqIFJlZnJlc2hlcyBzdGVwIGJ1dHRvbnMgYW5kIHRoZWlyIHJlbGF0ZWQgdGl0bGVzIGJleW9uZCBhIGNlcnRhaW4gcG9zaXRpb24uXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgcmVmcmVzaFN0ZXBzXG4gKiBAcGFyYW0gd2l6YXJkIHtPYmplY3R9IEEgalF1ZXJ5IHdpemFyZCBvYmplY3RcbiAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IFNldHRpbmdzIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHBhcmFtIHN0YXRlIHtPYmplY3R9IFRoZSBzdGF0ZSBjb250YWluZXIgb2YgdGhlIGN1cnJlbnQgd2l6YXJkXG4gKiBAcGFyYW0gaW5kZXgge0ludGVnZXJ9IFRoZSBzdGFydCBwb2ludCBmb3IgcmVmcmVzaGluZyBpZHNcbiAqL1xuZnVuY3Rpb24gcmVmcmVzaFN0ZXBzKHdpemFyZCwgb3B0aW9ucywgc3RhdGUsIGluZGV4KVxue1xuICAgIHZhciB1bmlxdWVJZCA9IGdldFVuaXF1ZUlkKHdpemFyZCk7XG5cbiAgICBmb3IgKHZhciBpID0gaW5kZXg7IGkgPCBzdGF0ZS5zdGVwQ291bnQ7IGkrKylcbiAgICB7XG4gICAgICAgIHZhciB1bmlxdWVTdGVwSWQgPSB1bmlxdWVJZCArIF90YWJTdWZmaXggKyBpLFxuICAgICAgICAgICAgdW5pcXVlQm9keUlkID0gdW5pcXVlSWQgKyBfdGFicGFuZWxTdWZmaXggKyBpLFxuICAgICAgICAgICAgdW5pcXVlSGVhZGVySWQgPSB1bmlxdWVJZCArIF90aXRsZVN1ZmZpeCArIGksXG4gICAgICAgICAgICB0aXRsZSA9IHdpemFyZC5maW5kKFwiLnRpdGxlXCIpLmVxKGkpLl9pZCh1bmlxdWVIZWFkZXJJZCk7XG5cbiAgICAgICAgd2l6YXJkLmZpbmQoXCIuc3RlcHMgYVwiKS5lcShpKS5faWQodW5pcXVlU3RlcElkKVxuICAgICAgICAgICAgLl9hcmlhKFwiY29udHJvbHNcIiwgdW5pcXVlQm9keUlkKS5hdHRyKFwiaHJlZlwiLCBcIiNcIiArIHVuaXF1ZUhlYWRlcklkKVxuICAgICAgICAgICAgLmh0bWwocmVuZGVyVGVtcGxhdGUob3B0aW9ucy50aXRsZVRlbXBsYXRlLCB7IGluZGV4OiBpICsgMSwgdGl0bGU6IHRpdGxlLmh0bWwoKSB9KSk7XG4gICAgICAgIHdpemFyZC5maW5kKFwiLmJvZHlcIikuZXEoaSkuX2lkKHVuaXF1ZUJvZHlJZClcbiAgICAgICAgICAgIC5fYXJpYShcImxhYmVsbGVkYnlcIiwgdW5pcXVlSGVhZGVySWQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJFdmVudHMod2l6YXJkLCBvcHRpb25zKVxue1xuICAgIHZhciBldmVudE5hbWVzcGFjZSA9IGdldEV2ZW50TmFtZXNwYWNlKHdpemFyZCk7XG5cbiAgICB3aXphcmQuYmluZChcImNhbmNlbGVkXCIgKyBldmVudE5hbWVzcGFjZSwgb3B0aW9ucy5vbkNhbmNlbGVkKTtcbiAgICB3aXphcmQuYmluZChcImNvbnRlbnRMb2FkZWRcIiArIGV2ZW50TmFtZXNwYWNlLCBvcHRpb25zLm9uQ29udGVudExvYWRlZCk7XG4gICAgd2l6YXJkLmJpbmQoXCJmaW5pc2hpbmdcIiArIGV2ZW50TmFtZXNwYWNlLCBvcHRpb25zLm9uRmluaXNoaW5nKTtcbiAgICB3aXphcmQuYmluZChcImZpbmlzaGVkXCIgKyBldmVudE5hbWVzcGFjZSwgb3B0aW9ucy5vbkZpbmlzaGVkKTtcbiAgICB3aXphcmQuYmluZChcImluaXRcIiArIGV2ZW50TmFtZXNwYWNlLCBvcHRpb25zLm9uSW5pdCk7XG4gICAgd2l6YXJkLmJpbmQoXCJzdGVwQ2hhbmdpbmdcIiArIGV2ZW50TmFtZXNwYWNlLCBvcHRpb25zLm9uU3RlcENoYW5naW5nKTtcbiAgICB3aXphcmQuYmluZChcInN0ZXBDaGFuZ2VkXCIgKyBldmVudE5hbWVzcGFjZSwgb3B0aW9ucy5vblN0ZXBDaGFuZ2VkKTtcblxuICAgIGlmIChvcHRpb25zLmVuYWJsZUtleU5hdmlnYXRpb24pXG4gICAge1xuICAgICAgICB3aXphcmQuYmluZChcImtleXVwXCIgKyBldmVudE5hbWVzcGFjZSwga2V5VXBIYW5kbGVyKTtcbiAgICB9XG5cbiAgICB3aXphcmQuZmluZChcIi5hY3Rpb25zIGFcIikuYmluZChcImNsaWNrXCIgKyBldmVudE5hbWVzcGFjZSwgcGFnaW5hdGlvbkNsaWNrSGFuZGxlcik7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIHNwZWNpZmljIHN0ZXAgYnkgYW4gZ2l2ZW4gaW5kZXguXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgcmVtb3ZlU3RlcFxuICogQHBhcmFtIHdpemFyZCB7T2JqZWN0fSBBIGpRdWVyeSB3aXphcmQgb2JqZWN0XG4gKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBTZXR0aW5ncyBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqIEBwYXJhbSBzdGF0ZSB7T2JqZWN0fSBUaGUgc3RhdGUgY29udGFpbmVyIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHBhcmFtIGluZGV4IHtJbnRlZ2VyfSBUaGUgcG9zaXRpb24gKHplcm8tYmFzZWQpIG9mIHRoZSBzdGVwIHRvIHJlbW92ZVxuICogQHJldHVybiBJbmRlY2F0ZXMgd2hldGhlciB0aGUgaXRlbSBpcyByZW1vdmVkLlxuICoqL1xuZnVuY3Rpb24gcmVtb3ZlU3RlcCh3aXphcmQsIG9wdGlvbnMsIHN0YXRlLCBpbmRleClcbntcbiAgICAvLyBJbmRleCBvdXQgb2YgcmFuZ2UgYW5kIHRyeSBkZWxldGluZyBjdXJyZW50IGl0ZW0gd2lsbCByZXR1cm4gZmFsc2UuXG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBzdGF0ZS5zdGVwQ291bnQgfHwgc3RhdGUuY3VycmVudEluZGV4ID09PSBpbmRleClcbiAgICB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgZGF0YVxuICAgIHJlbW92ZVN0ZXBGcm9tQ2FjaGUod2l6YXJkLCBpbmRleCk7XG4gICAgaWYgKHN0YXRlLmN1cnJlbnRJbmRleCA+IGluZGV4KVxuICAgIHtcbiAgICAgICAgc3RhdGUuY3VycmVudEluZGV4LS07XG4gICAgICAgIHNhdmVDdXJyZW50U3RhdGVUb0Nvb2tpZSh3aXphcmQsIG9wdGlvbnMsIHN0YXRlKTtcbiAgICB9XG4gICAgc3RhdGUuc3RlcENvdW50LS07XG5cbiAgICBnZXRTdGVwVGl0bGUod2l6YXJkLCBpbmRleCkucmVtb3ZlKCk7XG4gICAgZ2V0U3RlcFBhbmVsKHdpemFyZCwgaW5kZXgpLnJlbW92ZSgpO1xuICAgIGdldFN0ZXBBbmNob3Iod2l6YXJkLCBpbmRleCkucGFyZW50KCkucmVtb3ZlKCk7XG5cbiAgICAvLyBTZXQgdGhlIFwiZmlyc3RcIiBjbGFzcyB0byB0aGUgbmV3IGZpcnN0IHN0ZXAgYnV0dG9uIFxuICAgIGlmIChpbmRleCA9PT0gMClcbiAgICB7XG4gICAgICAgIHdpemFyZC5maW5kKFwiLnN0ZXBzIGxpXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJmaXJzdFwiKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIFwibGFzdFwiIGNsYXNzIHRvIHRoZSBuZXcgbGFzdCBzdGVwIGJ1dHRvbiBcbiAgICBpZiAoaW5kZXggPT09IHN0YXRlLnN0ZXBDb3VudClcbiAgICB7XG4gICAgICAgIHdpemFyZC5maW5kKFwiLnN0ZXBzIGxpXCIpLmVxKGluZGV4KS5hZGRDbGFzcyhcImxhc3RcIik7XG4gICAgfVxuXG4gICAgcmVmcmVzaFN0ZXBzKHdpemFyZCwgb3B0aW9ucywgc3RhdGUsIGluZGV4KTtcbiAgICByZWZyZXNoUGFnaW5hdGlvbih3aXphcmQsIG9wdGlvbnMsIHN0YXRlKTtcblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdGVwRnJvbUNhY2hlKHdpemFyZCwgaW5kZXgpXG57XG4gICAgZ2V0U3RlcHMod2l6YXJkKS5zcGxpY2UoaW5kZXgsIDEpO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGJhc2UgaHRtbCBzdHJ1Y3R1cmUgdG8gYSBtb3JlIHNlbnNpYmxlIGh0bWwgc3RydWN0dXJlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIHJlbmRlclxuICogQHBhcmFtIHdpemFyZCB7T2JqZWN0fSBBIGpRdWVyeSB3aXphcmQgb2JqZWN0XG4gKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBTZXR0aW5ncyBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqIEBwYXJhbSBzdGF0ZSB7T2JqZWN0fSBUaGUgc3RhdGUgY29udGFpbmVyIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICoqL1xuZnVuY3Rpb24gcmVuZGVyKHdpemFyZCwgb3B0aW9ucywgc3RhdGUpXG57XG4gICAgLy8gQ3JlYXRlIGEgY29udGVudCB3cmFwcGVyIGFuZCBjb3B5IEhUTUwgZnJvbSB0aGUgaW50aWFsIHdpemFyZCBzdHJ1Y3R1cmVcbiAgICB2YXIgd3JhcHBlclRlbXBsYXRlID0gXCI8ezB9IGNsYXNzPVxcXCJ7MX1cXFwiPnsyfTwvezB9PlwiLFxuICAgICAgICBvcmllbnRhdGlvbiA9IGdldFZhbGlkRW51bVZhbHVlKHN0ZXBzT3JpZW50YXRpb24sIG9wdGlvbnMuc3RlcHNPcmllbnRhdGlvbiksXG4gICAgICAgIHZlcnRpY2FsQ3NzQ2xhc3MgPSAob3JpZW50YXRpb24gPT09IHN0ZXBzT3JpZW50YXRpb24udmVydGljYWwpID8gXCIgdmVydGljYWxcIiA6IFwiXCIsXG4gICAgICAgIGNvbnRlbnRXcmFwcGVyID0gJCh3cmFwcGVyVGVtcGxhdGUuZm9ybWF0KG9wdGlvbnMuY29udGVudENvbnRhaW5lclRhZywgXCJjb250ZW50IFwiICsgb3B0aW9ucy5jbGVhckZpeENzc0NsYXNzLCB3aXphcmQuaHRtbCgpKSksXG4gICAgICAgIHN0ZXBzV3JhcHBlciA9ICQod3JhcHBlclRlbXBsYXRlLmZvcm1hdChvcHRpb25zLnN0ZXBzQ29udGFpbmVyVGFnLCBcInN0ZXBzIFwiICsgb3B0aW9ucy5jbGVhckZpeENzc0NsYXNzLCBcIjx1bCByb2xlPVxcXCJ0YWJsaXN0XFxcIj48L3VsPlwiKSksXG4gICAgICAgIHN0ZXBUaXRsZXMgPSBjb250ZW50V3JhcHBlci5jaGlsZHJlbihvcHRpb25zLmhlYWRlclRhZyksXG4gICAgICAgIHN0ZXBDb250ZW50cyA9IGNvbnRlbnRXcmFwcGVyLmNoaWxkcmVuKG9wdGlvbnMuYm9keVRhZyk7XG5cbiAgICAvLyBUcmFuc2Zvcm0gdGhlIHdpemFyZCB3cmFwcGVyIGFuZCByZW1vdmUgdGhlIGlubmVyIEhUTUxcbiAgICB3aXphcmQuYXR0cihcInJvbGVcIiwgXCJhcHBsaWNhdGlvblwiKS5lbXB0eSgpLmFwcGVuZChzdGVwc1dyYXBwZXIpLmFwcGVuZChjb250ZW50V3JhcHBlcilcbiAgICAgICAgLmFkZENsYXNzKG9wdGlvbnMuY3NzQ2xhc3MgKyBcIiBcIiArIG9wdGlvbnMuY2xlYXJGaXhDc3NDbGFzcyArIHZlcnRpY2FsQ3NzQ2xhc3MpO1xuXG4gICAgLy8gQWRkIFdJQS1BUklBIHN1cHBvcnRcbiAgICBzdGVwQ29udGVudHMuZWFjaChmdW5jdGlvbiAoaW5kZXgpXG4gICAge1xuICAgICAgICByZW5kZXJCb2R5KHdpemFyZCwgc3RhdGUsICQodGhpcyksIGluZGV4KTtcbiAgICB9KTtcblxuICAgIHN0ZXBUaXRsZXMuZWFjaChmdW5jdGlvbiAoaW5kZXgpXG4gICAge1xuICAgICAgICByZW5kZXJUaXRsZSh3aXphcmQsIG9wdGlvbnMsIHN0YXRlLCAkKHRoaXMpLCBpbmRleCk7XG4gICAgfSk7XG5cbiAgICByZWZyZXNoU3RlcE5hdmlnYXRpb24od2l6YXJkLCBvcHRpb25zLCBzdGF0ZSk7XG4gICAgcmVuZGVyUGFnaW5hdGlvbih3aXphcmQsIG9wdGlvbnMsIHN0YXRlKTtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBib2R5IHRvIGEgcHJvcGVyIHRhYnBhbmVsLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIHJlbmRlckJvZHlcbiAqIEBwYXJhbSB3aXphcmQge09iamVjdH0gQSBqUXVlcnkgd2l6YXJkIG9iamVjdFxuICogQHBhcmFtIGJvZHkge09iamVjdH0gQSBqUXVlcnkgYm9keSBvYmplY3RcbiAqIEBwYXJhbSBpbmRleCB7SW50ZWdlcn0gVGhlIHBvc2l0aW9uIG9mIHRoZSBib2R5XG4gKi9cbmZ1bmN0aW9uIHJlbmRlckJvZHkod2l6YXJkLCBzdGF0ZSwgYm9keSwgaW5kZXgpXG57XG4gICAgdmFyIHVuaXF1ZUlkID0gZ2V0VW5pcXVlSWQod2l6YXJkKSxcbiAgICAgICAgdW5pcXVlQm9keUlkID0gdW5pcXVlSWQgKyBfdGFicGFuZWxTdWZmaXggKyBpbmRleCxcbiAgICAgICAgdW5pcXVlSGVhZGVySWQgPSB1bmlxdWVJZCArIF90aXRsZVN1ZmZpeCArIGluZGV4O1xuXG4gICAgYm9keS5faWQodW5pcXVlQm9keUlkKS5hdHRyKFwicm9sZVwiLCBcInRhYnBhbmVsXCIpLl9hcmlhKFwibGFiZWxsZWRieVwiLCB1bmlxdWVIZWFkZXJJZClcbiAgICAgICAgLmFkZENsYXNzKFwiYm9keVwiKS5fc2hvd0FyaWEoc3RhdGUuY3VycmVudEluZGV4ID09PSBpbmRleCk7XG59XG5cbi8qKlxuICogUmVuZGVycyBhIHBhZ2luYXRpb24gaWYgZW5hYmxlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCByZW5kZXJQYWdpbmF0aW9uXG4gKiBAcGFyYW0gd2l6YXJkIHtPYmplY3R9IEEgalF1ZXJ5IHdpemFyZCBvYmplY3RcbiAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IFNldHRpbmdzIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHBhcmFtIHN0YXRlIHtPYmplY3R9IFRoZSBzdGF0ZSBjb250YWluZXIgb2YgdGhlIGN1cnJlbnQgd2l6YXJkXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclBhZ2luYXRpb24od2l6YXJkLCBvcHRpb25zLCBzdGF0ZSlcbntcbiAgICBpZiAob3B0aW9ucy5lbmFibGVQYWdpbmF0aW9uKVxuICAgIHtcbiAgICAgICAgdmFyIHBhZ2luYXRpb24gPSBcIjx7MH0gY2xhc3M9XFxcImFjdGlvbnMgezF9XFxcIj48dWwgcm9sZT1cXFwibWVudVxcXCIgYXJpYS1sYWJlbD1cXFwiezJ9XFxcIj57M308L3VsPjwvezB9PlwiLFxuICAgICAgICAgICAgYnV0dG9uVGVtcGxhdGUgPSBcIjxsaT48YSBocmVmPVxcXCIjezB9XFxcIiByb2xlPVxcXCJtZW51aXRlbVxcXCI+ezF9PC9hPjwvbGk+XCIsXG4gICAgICAgICAgICBidXR0b25zID0gXCJcIjtcblxuICAgICAgICBpZiAoIW9wdGlvbnMuZm9yY2VNb3ZlRm9yd2FyZClcbiAgICAgICAge1xuICAgICAgICAgICAgYnV0dG9ucyArPSBidXR0b25UZW1wbGF0ZS5mb3JtYXQoXCJwcmV2aW91c1wiLCBvcHRpb25zLmxhYmVscy5wcmV2aW91cyk7XG4gICAgICAgIH1cblxuICAgICAgICBidXR0b25zICs9IGJ1dHRvblRlbXBsYXRlLmZvcm1hdChcIm5leHRcIiwgb3B0aW9ucy5sYWJlbHMubmV4dCk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlRmluaXNoQnV0dG9uKVxuICAgICAgICB7XG4gICAgICAgICAgICBidXR0b25zICs9IGJ1dHRvblRlbXBsYXRlLmZvcm1hdChcImZpbmlzaFwiLCBvcHRpb25zLmxhYmVscy5maW5pc2gpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlQ2FuY2VsQnV0dG9uKVxuICAgICAgICB7XG4gICAgICAgICAgICBidXR0b25zICs9IGJ1dHRvblRlbXBsYXRlLmZvcm1hdChcImNhbmNlbFwiLCBvcHRpb25zLmxhYmVscy5jYW5jZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgd2l6YXJkLmFwcGVuZChwYWdpbmF0aW9uLmZvcm1hdChvcHRpb25zLmFjdGlvbkNvbnRhaW5lclRhZywgb3B0aW9ucy5jbGVhckZpeENzc0NsYXNzLFxuICAgICAgICAgICAgb3B0aW9ucy5sYWJlbHMucGFnaW5hdGlvbiwgYnV0dG9ucykpO1xuXG4gICAgICAgIHJlZnJlc2hQYWdpbmF0aW9uKHdpemFyZCwgb3B0aW9ucywgc3RhdGUpO1xuICAgICAgICBsb2FkQXN5bmNDb250ZW50KHdpemFyZCwgb3B0aW9ucywgc3RhdGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgdGVtcGxhdGUgYW5kIHJlcGxhY2VzIGFsbCBwbGFjZWhvbGRlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCByZW5kZXJUZW1wbGF0ZVxuICogQHBhcmFtIHRlbXBsYXRlIHtTdHJpbmd9IEEgdGVtcGxhdGVcbiAqIEBwYXJhbSBzdWJzdGl0dXRlcyB7T2JqZWN0fSBBIGxpc3Qgb2Ygc3Vic3RpdHV0ZVxuICogQHJldHVybiB7U3RyaW5nfSBUaGUgcmVuZGVyZWQgdGVtcGxhdGVcbiAqL1xuZnVuY3Rpb24gcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHN1YnN0aXR1dGVzKVxue1xuICAgIHZhciBtYXRjaGVzID0gdGVtcGxhdGUubWF0Y2goLyMoW2Etel0qKSMvZ2kpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKVxuICAgIHtcbiAgICAgICAgdmFyIG1hdGNoID0gbWF0Y2hlc1tpXSwgXG4gICAgICAgICAgICBrZXkgPSBtYXRjaC5zdWJzdHJpbmcoMSwgbWF0Y2gubGVuZ3RoIC0gMSk7XG5cbiAgICAgICAgaWYgKHN1YnN0aXR1dGVzW2tleV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihcIlRoZSBrZXkgJ3swfScgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHN1YnN0aXR1dGUgY29sbGVjdGlvbiFcIiwga2V5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZShtYXRjaCwgc3Vic3RpdHV0ZXNba2V5XSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRlbXBsYXRlO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHRpdGxlIHRvIGEgc3RlcCBpdGVtIGJ1dHRvbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCByZW5kZXJUaXRsZVxuICogQHBhcmFtIHdpemFyZCB7T2JqZWN0fSBBIGpRdWVyeSB3aXphcmQgb2JqZWN0XG4gKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBTZXR0aW5ncyBvZiB0aGUgY3VycmVudCB3aXphcmRcbiAqIEBwYXJhbSBzdGF0ZSB7T2JqZWN0fSBUaGUgc3RhdGUgY29udGFpbmVyIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHBhcmFtIGhlYWRlciB7T2JqZWN0fSBBIGpRdWVyeSBoZWFkZXIgb2JqZWN0XG4gKiBAcGFyYW0gaW5kZXgge0ludGVnZXJ9IFRoZSBwb3NpdGlvbiBvZiB0aGUgaGVhZGVyXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclRpdGxlKHdpemFyZCwgb3B0aW9ucywgc3RhdGUsIGhlYWRlciwgaW5kZXgpXG57XG4gICAgdmFyIHVuaXF1ZUlkID0gZ2V0VW5pcXVlSWQod2l6YXJkKSxcbiAgICAgICAgdW5pcXVlU3RlcElkID0gdW5pcXVlSWQgKyBfdGFiU3VmZml4ICsgaW5kZXgsXG4gICAgICAgIHVuaXF1ZUJvZHlJZCA9IHVuaXF1ZUlkICsgX3RhYnBhbmVsU3VmZml4ICsgaW5kZXgsXG4gICAgICAgIHVuaXF1ZUhlYWRlcklkID0gdW5pcXVlSWQgKyBfdGl0bGVTdWZmaXggKyBpbmRleCxcbiAgICAgICAgc3RlcENvbGxlY3Rpb24gPSB3aXphcmQuZmluZChcIi5zdGVwcyA+IHVsXCIpLFxuICAgICAgICB0aXRsZSA9IHJlbmRlclRlbXBsYXRlKG9wdGlvbnMudGl0bGVUZW1wbGF0ZSwge1xuICAgICAgICAgICAgaW5kZXg6IGluZGV4ICsgMSxcbiAgICAgICAgICAgIHRpdGxlOiBoZWFkZXIuaHRtbCgpXG4gICAgICAgIH0pLFxuICAgICAgICBzdGVwSXRlbSA9ICQoXCI8bGkgcm9sZT1cXFwidGFiXFxcIj48YSBpZD1cXFwiXCIgKyB1bmlxdWVTdGVwSWQgKyBcIlxcXCIgaHJlZj1cXFwiI1wiICsgdW5pcXVlSGVhZGVySWQgKyBcbiAgICAgICAgICAgIFwiXFxcIiBhcmlhLWNvbnRyb2xzPVxcXCJcIiArIHVuaXF1ZUJvZHlJZCArIFwiXFxcIj5cIiArIHRpdGxlICsgXCI8L2E+PC9saT5cIik7XG4gICAgICAgIFxuICAgIHN0ZXBJdGVtLl9lbmFibGVBcmlhKG9wdGlvbnMuZW5hYmxlQWxsU3RlcHMgfHwgc3RhdGUuY3VycmVudEluZGV4ID4gaW5kZXgpO1xuXG4gICAgaWYgKHN0YXRlLmN1cnJlbnRJbmRleCA+IGluZGV4KVxuICAgIHtcbiAgICAgICAgc3RlcEl0ZW0uYWRkQ2xhc3MoXCJkb25lXCIpO1xuICAgIH1cblxuICAgIGhlYWRlci5faWQodW5pcXVlSGVhZGVySWQpLmF0dHIoXCJ0YWJpbmRleFwiLCBcIi0xXCIpLmFkZENsYXNzKFwidGl0bGVcIik7XG5cbiAgICBpZiAoaW5kZXggPT09IDApXG4gICAge1xuICAgICAgICBzdGVwQ29sbGVjdGlvbi5wcmVwZW5kKHN0ZXBJdGVtKTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgc3RlcENvbGxlY3Rpb24uZmluZChcImxpXCIpLmVxKGluZGV4IC0gMSkuYWZ0ZXIoc3RlcEl0ZW0pO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgXCJmaXJzdFwiIGNsYXNzIHRvIHRoZSBuZXcgZmlyc3Qgc3RlcCBidXR0b25cbiAgICBpZiAoaW5kZXggPT09IDApXG4gICAge1xuICAgICAgICBzdGVwQ29sbGVjdGlvbi5maW5kKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJmaXJzdFwiKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJmaXJzdFwiKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIFwibGFzdFwiIGNsYXNzIHRvIHRoZSBuZXcgbGFzdCBzdGVwIGJ1dHRvblxuICAgIGlmIChpbmRleCA9PT0gKHN0YXRlLnN0ZXBDb3VudCAtIDEpKVxuICAgIHtcbiAgICAgICAgc3RlcENvbGxlY3Rpb24uZmluZChcImxpXCIpLnJlbW92ZUNsYXNzKFwibGFzdFwiKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJsYXN0XCIpO1xuICAgIH1cblxuICAgIC8vIFJlZ2lzdGVyIGNsaWNrIGV2ZW50XG4gICAgc3RlcEl0ZW0uY2hpbGRyZW4oXCJhXCIpLmJpbmQoXCJjbGlja1wiICsgZ2V0RXZlbnROYW1lc3BhY2Uod2l6YXJkKSwgc3RlcENsaWNrSGFuZGxlcik7XG59XG5cbi8qKlxuICogU2F2ZXMgdGhlIGN1cnJlbnQgc3RhdGUgdG8gYSBjb29raWUuXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2Qgc2F2ZUN1cnJlbnRTdGF0ZVRvQ29va2llXG4gKiBAcGFyYW0gd2l6YXJkIHtPYmplY3R9IEEgalF1ZXJ5IHdpemFyZCBvYmplY3RcbiAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IFNldHRpbmdzIG9mIHRoZSBjdXJyZW50IHdpemFyZFxuICogQHBhcmFtIHN0YXRlIHtPYmplY3R9IFRoZSBzdGF0ZSBjb250YWluZXIgb2YgdGhlIGN1cnJlbnQgd2l6YXJkXG4gKi9cbmZ1bmN0aW9uIHNhdmVDdXJyZW50U3RhdGVUb0Nvb2tpZSh3aXphcmQsIG9wdGlvbnMsIHN0YXRlKVxue1xuICAgIGlmIChvcHRpb25zLnNhdmVTdGF0ZSAmJiAkLmNvb2tpZSlcbiAgICB7XG4gICAgICAgICQuY29va2llKF9jb29raWVQcmVmaXggKyBnZXRVbmlxdWVJZCh3aXphcmQpLCBzdGF0ZS5jdXJyZW50SW5kZXgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3RhcnRUcmFuc2l0aW9uRWZmZWN0KHdpemFyZCwgb3B0aW9ucywgc3RhdGUsIGluZGV4LCBvbGRJbmRleCwgZG9uZUNhbGxiYWNrKVxue1xuICAgIHZhciBzdGVwQ29udGVudHMgPSB3aXphcmQuZmluZChcIi5jb250ZW50ID4gLmJvZHlcIiksXG4gICAgICAgIGVmZmVjdCA9IGdldFZhbGlkRW51bVZhbHVlKHRyYW5zaXRpb25FZmZlY3QsIG9wdGlvbnMudHJhbnNpdGlvbkVmZmVjdCksXG4gICAgICAgIGVmZmVjdFNwZWVkID0gb3B0aW9ucy50cmFuc2l0aW9uRWZmZWN0U3BlZWQsXG4gICAgICAgIG5ld1N0ZXAgPSBzdGVwQ29udGVudHMuZXEoaW5kZXgpLFxuICAgICAgICBjdXJyZW50U3RlcCA9IHN0ZXBDb250ZW50cy5lcShvbGRJbmRleCk7XG5cbiAgICBzd2l0Y2ggKGVmZmVjdClcbiAgICB7XG4gICAgICAgIGNhc2UgdHJhbnNpdGlvbkVmZmVjdC5mYWRlOlxuICAgICAgICBjYXNlIHRyYW5zaXRpb25FZmZlY3Quc2xpZGU6XG4gICAgICAgICAgICB2YXIgaGlkZSA9IChlZmZlY3QgPT09IHRyYW5zaXRpb25FZmZlY3QuZmFkZSkgPyBcImZhZGVPdXRcIiA6IFwic2xpZGVVcFwiLFxuICAgICAgICAgICAgICAgIHNob3cgPSAoZWZmZWN0ID09PSB0cmFuc2l0aW9uRWZmZWN0LmZhZGUpID8gXCJmYWRlSW5cIiA6IFwic2xpZGVEb3duXCI7XG5cbiAgICAgICAgICAgIHN0YXRlLnRyYW5zaXRpb25FbGVtZW50ID0gbmV3U3RlcDtcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwW2hpZGVdKGVmZmVjdFNwZWVkLCBmdW5jdGlvbiAoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciB3aXphcmQgPSAkKHRoaXMpLl9zaG93QXJpYShmYWxzZSkucGFyZW50KCkucGFyZW50KCksXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gZ2V0U3RhdGUod2l6YXJkKTtcblxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS50cmFuc2l0aW9uRWxlbWVudClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLnRyYW5zaXRpb25FbGVtZW50W3Nob3ddKGVmZmVjdFNwZWVkLCBmdW5jdGlvbiAoKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLl9zaG93QXJpYSgpO1xuICAgICAgICAgICAgICAgICAgICB9KS5wcm9taXNlKCkuZG9uZShkb25lQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS50cmFuc2l0aW9uRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIHRyYW5zaXRpb25FZmZlY3Quc2xpZGVMZWZ0OlxuICAgICAgICAgICAgdmFyIG91dGVyV2lkdGggPSBjdXJyZW50U3RlcC5vdXRlcldpZHRoKHRydWUpLFxuICAgICAgICAgICAgICAgIHBvc0ZhZGVPdXQgPSAoaW5kZXggPiBvbGRJbmRleCkgPyAtKG91dGVyV2lkdGgpIDogb3V0ZXJXaWR0aCxcbiAgICAgICAgICAgICAgICBwb3NGYWRlSW4gPSAoaW5kZXggPiBvbGRJbmRleCkgPyBvdXRlcldpZHRoIDogLShvdXRlcldpZHRoKTtcblxuICAgICAgICAgICAgJC53aGVuKGN1cnJlbnRTdGVwLmFuaW1hdGUoeyBsZWZ0OiBwb3NGYWRlT3V0IH0sIGVmZmVjdFNwZWVkLCBcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAkKHRoaXMpLl9zaG93QXJpYShmYWxzZSk7IH0pLFxuICAgICAgICAgICAgICAgIG5ld1N0ZXAuY3NzKFwibGVmdFwiLCBwb3NGYWRlSW4gKyBcInB4XCIpLl9zaG93QXJpYSgpXG4gICAgICAgICAgICAgICAgICAgIC5hbmltYXRlKHsgbGVmdDogMCB9LCBlZmZlY3RTcGVlZCkpLmRvbmUoZG9uZUNhbGxiYWNrKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAkLndoZW4oY3VycmVudFN0ZXAuX3Nob3dBcmlhKGZhbHNlKSwgbmV3U3RlcC5fc2hvd0FyaWEoKSlcbiAgICAgICAgICAgICAgICAuZG9uZShkb25lQ2FsbGJhY2spO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufVxuXG4vKipcbiAqIEZpcmVzIHdoZW4gYSBzdGVwIGNsaWNrIGhhcHBlbnMuXG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBldmVudCBjbGlja1xuICogQHBhcmFtIGV2ZW50IHtPYmplY3R9IEFuIGV2ZW50IG9iamVjdFxuICovXG5mdW5jdGlvbiBzdGVwQ2xpY2tIYW5kbGVyKGV2ZW50KVxue1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgYW5jaG9yID0gJCh0aGlzKSxcbiAgICAgICAgd2l6YXJkID0gYW5jaG9yLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLFxuICAgICAgICBvcHRpb25zID0gZ2V0T3B0aW9ucyh3aXphcmQpLFxuICAgICAgICBzdGF0ZSA9IGdldFN0YXRlKHdpemFyZCksXG4gICAgICAgIG9sZEluZGV4ID0gc3RhdGUuY3VycmVudEluZGV4O1xuXG4gICAgaWYgKGFuY2hvci5wYXJlbnQoKS5pcyhcIjpub3QoLmRpc2FibGVkKTpub3QoLmN1cnJlbnQpXCIpKVxuICAgIHtcbiAgICAgICAgdmFyIGhyZWYgPSBhbmNob3IuYXR0cihcImhyZWZcIiksXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHBhcnNlSW50KGhyZWYuc3Vic3RyaW5nKGhyZWYubGFzdEluZGV4T2YoXCItXCIpICsgMSksIDApO1xuXG4gICAgICAgIGdvVG9TdGVwKHdpemFyZCwgb3B0aW9ucywgc3RhdGUsIHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBJZiBub3RoaW5nIGhhcyBjaGFuZ2VkXG4gICAgaWYgKG9sZEluZGV4ID09PSBzdGF0ZS5jdXJyZW50SW5kZXgpXG4gICAge1xuICAgICAgICBnZXRTdGVwQW5jaG9yKHdpemFyZCwgb2xkSW5kZXgpLmZvY3VzKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRocm93RXJyb3IobWVzc2FnZSlcbntcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpXG4gICAge1xuICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5mb3JtYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xufVxuXG4vKipcbiAqIENoZWNrcyBhbiBhcmd1bWVudCBmb3IgbnVsbCBvciB1bmRlZmluZWQgYW5kIHRocm93cyBhbiBlcnJvciBpZiBvbmUgY2hlY2sgYXBwbGllcy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCB2YWxpZGF0ZUFyZ3VtZW50XG4gKiBAcGFyYW0gYXJndW1lbnROYW1lIHtTdHJpbmd9IFRoZSBuYW1lIG9mIHRoZSBnaXZlbiBhcmd1bWVudFxuICogQHBhcmFtIGFyZ3VtZW50VmFsdWUge09iamVjdH0gVGhlIGFyZ3VtZW50IGl0c2VsZlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUFyZ3VtZW50KGFyZ3VtZW50TmFtZSwgYXJndW1lbnRWYWx1ZSlcbntcbiAgICBpZiAoYXJndW1lbnRWYWx1ZSA9PSBudWxsKVxuICAgIHtcbiAgICAgICAgdGhyb3dFcnJvcihcIlRoZSBhcmd1bWVudCAnezB9JyBpcyBudWxsIG9yIHVuZGVmaW5lZC5cIiwgYXJndW1lbnROYW1lKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGpRdWVyeSB3aXphcmQgcGx1Z2luLlxuICpcbiAqIEBjbGFzcyBzdGVwc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gW21ldGhvZD17fV0gVGhlIG5hbWUgb2YgdGhlIG1ldGhvZCBhcyBgU3RyaW5nYCBvciBhbiBKU09OIG9iamVjdCBmb3IgaW5pdGlhbGl6YXRpb25cbiAqIEBwYXJhbSBbcGFyYW1zPV0qIHtBcnJheX0gQWRkaXRpb25hbCBhcmd1bWVudHMgZm9yIGEgbWV0aG9kIGNhbGxcbiAqIEBjaGFpbmFibGVcbiAqKi9cbiQuZm4uc3RlcHMgPSBmdW5jdGlvbiAobWV0aG9kKVxue1xuICAgIGlmICgkLmZuLnN0ZXBzW21ldGhvZF0pXG4gICAge1xuICAgICAgICByZXR1cm4gJC5mbi5zdGVwc1ttZXRob2RdLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbWV0aG9kID09PSBcIm9iamVjdFwiIHx8ICFtZXRob2QpXG4gICAge1xuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICAkLmVycm9yKFwiTWV0aG9kIFwiICsgbWV0aG9kICsgXCIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN0ZXBzXCIpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQWRkcyBhIG5ldyBzdGVwLlxuICpcbiAqIEBtZXRob2QgYWRkXG4gKiBAcGFyYW0gc3RlcCB7T2JqZWN0fSBUaGUgc3RlcCBvYmplY3QgdG8gYWRkXG4gKiBAY2hhaW5hYmxlXG4gKiovXG4kLmZuLnN0ZXBzLmFkZCA9IGZ1bmN0aW9uIChzdGVwKVxue1xuICAgIHZhciBzdGF0ZSA9IGdldFN0YXRlKHRoaXMpO1xuICAgIHJldHVybiBpbnNlcnRTdGVwKHRoaXMsIGdldE9wdGlvbnModGhpcyksIHN0YXRlLCBzdGF0ZS5zdGVwQ291bnQsIHN0ZXApO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBjb250cm9sIGZ1bmN0aW9uYWxpdHkgY29tcGxldGVseSBhbmQgdHJhbnNmb3JtcyB0aGUgY3VycmVudCBzdGF0ZSB0byB0aGUgaW5pdGlhbCBIVE1MIHN0cnVjdHVyZS5cbiAqXG4gKiBAbWV0aG9kIGRlc3Ryb3lcbiAqIEBjaGFpbmFibGVcbiAqKi9cbiQuZm4uc3RlcHMuZGVzdHJveSA9IGZ1bmN0aW9uICgpXG57XG4gICAgcmV0dXJuIGRlc3Ryb3kodGhpcywgZ2V0T3B0aW9ucyh0aGlzKSk7XG59O1xuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBvbkZpbmlzaGluZyBhbmQgb25GaW5pc2hlZCBldmVudC5cbiAqXG4gKiBAbWV0aG9kIGZpbmlzaFxuICoqL1xuJC5mbi5zdGVwcy5maW5pc2ggPSBmdW5jdGlvbiAoKVxue1xuICAgIGZpbmlzaFN0ZXAodGhpcywgZ2V0U3RhdGUodGhpcykpO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IHN0ZXAgaW5kZXguXG4gKlxuICogQG1ldGhvZCBnZXRDdXJyZW50SW5kZXhcbiAqIEByZXR1cm4ge0ludGVnZXJ9IFRoZSBhY3R1YWwgc3RlcCBpbmRleCAoemVyby1iYXNlZClcbiAqIEBmb3Igc3RlcHNcbiAqKi9cbiQuZm4uc3RlcHMuZ2V0Q3VycmVudEluZGV4ID0gZnVuY3Rpb24gKClcbntcbiAgICByZXR1cm4gZ2V0U3RhdGUodGhpcykuY3VycmVudEluZGV4O1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IHN0ZXAgb2JqZWN0LlxuICpcbiAqIEBtZXRob2QgZ2V0Q3VycmVudFN0ZXBcbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIGFjdHVhbCBzdGVwIG9iamVjdFxuICoqL1xuJC5mbi5zdGVwcy5nZXRDdXJyZW50U3RlcCA9IGZ1bmN0aW9uICgpXG57XG4gICAgcmV0dXJuIGdldFN0ZXAodGhpcywgZ2V0U3RhdGUodGhpcykuY3VycmVudEluZGV4KTtcbn07XG5cbi8qKlxuICogR2V0cyBhIHNwZWNpZmljIHN0ZXAgb2JqZWN0IGJ5IGluZGV4LlxuICpcbiAqIEBtZXRob2QgZ2V0U3RlcFxuICogQHBhcmFtIGluZGV4IHtJbnRlZ2VyfSBBbiBpbnRlZ2VyIHRoYXQgYmVsb25ncyB0byB0aGUgcG9zaXRpb24gb2YgYSBzdGVwXG4gKiBAcmV0dXJuIHtPYmplY3R9IEEgc3BlY2lmaWMgc3RlcCBvYmplY3RcbiAqKi9cbiQuZm4uc3RlcHMuZ2V0U3RlcCA9IGZ1bmN0aW9uIChpbmRleClcbntcbiAgICByZXR1cm4gZ2V0U3RlcCh0aGlzLCBpbmRleCk7XG59O1xuXG4vKipcbiAqIEluc2VydHMgYSBuZXcgc3RlcCB0byBhIHNwZWNpZmljIHBvc2l0aW9uLlxuICpcbiAqIEBtZXRob2QgaW5zZXJ0XG4gKiBAcGFyYW0gaW5kZXgge0ludGVnZXJ9IFRoZSBwb3NpdGlvbiAoemVyby1iYXNlZCkgdG8gYWRkXG4gKiBAcGFyYW0gc3RlcCB7T2JqZWN0fSBUaGUgc3RlcCBvYmplY3QgdG8gYWRkXG4gKiBAZXhhbXBsZVxuICogICAgICQoXCIjd2l6YXJkXCIpLnN0ZXBzKCkuaW5zZXJ0KDAsIHtcbiAqICAgICAgICAgdGl0bGU6IFwiVGl0bGVcIixcbiAqICAgICAgICAgY29udGVudDogXCJcIiwgLy8gb3B0aW9uYWxcbiAqICAgICAgICAgY29udGVudE1vZGU6IFwiYXN5bmNcIiwgLy8gb3B0aW9uYWxcbiAqICAgICAgICAgY29udGVudFVybDogXCIvQ29udGVudC9TdGVwLzFcIiAvLyBvcHRpb25hbFxuICogICAgIH0pO1xuICogQGNoYWluYWJsZVxuICoqL1xuJC5mbi5zdGVwcy5pbnNlcnQgPSBmdW5jdGlvbiAoaW5kZXgsIHN0ZXApXG57XG4gICAgcmV0dXJuIGluc2VydFN0ZXAodGhpcywgZ2V0T3B0aW9ucyh0aGlzKSwgZ2V0U3RhdGUodGhpcyksIGluZGV4LCBzdGVwKTtcbn07XG5cbi8qKlxuICogUm91dGVzIHRvIHRoZSBuZXh0IHN0ZXAuXG4gKlxuICogQG1ldGhvZCBuZXh0XG4gKiBAcmV0dXJuIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgYWN0aW9uIGV4ZWN1dGVkXG4gKiovXG4kLmZuLnN0ZXBzLm5leHQgPSBmdW5jdGlvbiAoKVxue1xuICAgIHJldHVybiBnb1RvTmV4dFN0ZXAodGhpcywgZ2V0T3B0aW9ucyh0aGlzKSwgZ2V0U3RhdGUodGhpcykpO1xufTtcblxuLyoqXG4gKiBSb3V0ZXMgdG8gdGhlIHByZXZpb3VzIHN0ZXAuXG4gKlxuICogQG1ldGhvZCBwcmV2aW91c1xuICogQHJldHVybiB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGFjdGlvbiBleGVjdXRlZFxuICoqL1xuJC5mbi5zdGVwcy5wcmV2aW91cyA9IGZ1bmN0aW9uICgpXG57XG4gICAgcmV0dXJuIGdvVG9QcmV2aW91c1N0ZXAodGhpcywgZ2V0T3B0aW9ucyh0aGlzKSwgZ2V0U3RhdGUodGhpcykpO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgc3BlY2lmaWMgc3RlcCBieSBhbiBnaXZlbiBpbmRleC5cbiAqXG4gKiBAbWV0aG9kIHJlbW92ZVxuICogQHBhcmFtIGluZGV4IHtJbnRlZ2VyfSBUaGUgcG9zaXRpb24gKHplcm8tYmFzZWQpIG9mIHRoZSBzdGVwIHRvIHJlbW92ZVxuICogQHJldHVybiBJbmRlY2F0ZXMgd2hldGhlciB0aGUgaXRlbSBpcyByZW1vdmVkLlxuICoqL1xuJC5mbi5zdGVwcy5yZW1vdmUgPSBmdW5jdGlvbiAoaW5kZXgpXG57XG4gICAgcmV0dXJuIHJlbW92ZVN0ZXAodGhpcywgZ2V0T3B0aW9ucyh0aGlzKSwgZ2V0U3RhdGUodGhpcyksIGluZGV4KTtcbn07XG5cbi8qKlxuICogU2V0cyBhIHNwZWNpZmljIHN0ZXAgb2JqZWN0IGJ5IGluZGV4LlxuICpcbiAqIEBtZXRob2Qgc2V0U3RlcFxuICogQHBhcmFtIGluZGV4IHtJbnRlZ2VyfSBBbiBpbnRlZ2VyIHRoYXQgYmVsb25ncyB0byB0aGUgcG9zaXRpb24gb2YgYSBzdGVwXG4gKiBAcGFyYW0gc3RlcCB7T2JqZWN0fSBUaGUgc3RlcCBvYmplY3QgdG8gY2hhbmdlXG4gKiovXG4kLmZuLnN0ZXBzLnNldFN0ZXAgPSBmdW5jdGlvbiAoaW5kZXgsIHN0ZXApXG57XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IHlldCBpbXBsZW1lbnRlZCFcIik7XG59O1xuXG4vKipcbiAqIFNraXBzIGFuIGNlcnRhaW4gYW1vdW50IG9mIHN0ZXBzLlxuICpcbiAqIEBtZXRob2Qgc2tpcFxuICogQHBhcmFtIGNvdW50IHtJbnRlZ2VyfSBUaGUgYW1vdW50IG9mIHN0ZXBzIHRoYXQgc2hvdWxkIGJlIHNraXBwZWRcbiAqIEByZXR1cm4ge0Jvb2xlYW59IEluZGljYXRlcyB3aGV0aGVyIHRoZSBhY3Rpb24gZXhlY3V0ZWRcbiAqKi9cbiQuZm4uc3RlcHMuc2tpcCA9IGZ1bmN0aW9uIChjb3VudClcbntcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgeWV0IGltcGxlbWVudGVkIVwiKTtcbn07XG5cbi8qKlxuICogQW4gZW51bSByZXByZXNlbnRzIHRoZSBkaWZmZXJlbnQgY29udGVudCB0eXBlcyBvZiBhIHN0ZXAgYW5kIHRoZWlyIGxvYWRpbmcgbWVjaGFuaXNtcy5cbiAqXG4gKiBAY2xhc3MgY29udGVudE1vZGVcbiAqIEBmb3Igc3RlcHNcbiAqKi9cbnZhciBjb250ZW50TW9kZSA9ICQuZm4uc3RlcHMuY29udGVudE1vZGUgPSB7XG4gICAgLyoqXG4gICAgICogSFRNTCBlbWJlZGRlZCBjb250ZW50XG4gICAgICpcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAcHJvcGVydHkgaHRtbFxuICAgICAqIEB0eXBlIEludGVnZXJcbiAgICAgKiBAZm9yIGNvbnRlbnRNb2RlXG4gICAgICoqL1xuICAgIGh0bWw6IDAsXG5cbiAgICAvKipcbiAgICAgKiBJRnJhbWUgZW1iZWRkZWQgY29udGVudFxuICAgICAqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHByb3BlcnR5IGlmcmFtZVxuICAgICAqIEB0eXBlIEludGVnZXJcbiAgICAgKiBAZm9yIGNvbnRlbnRNb2RlXG4gICAgICoqL1xuICAgIGlmcmFtZTogMSxcblxuICAgIC8qKlxuICAgICAqIEFzeW5jIGVtYmVkZGVkIGNvbnRlbnRcbiAgICAgKlxuICAgICAqIEByZWFkT25seVxuICAgICAqIEBwcm9wZXJ0eSBhc3luY1xuICAgICAqIEB0eXBlIEludGVnZXJcbiAgICAgKiBAZm9yIGNvbnRlbnRNb2RlXG4gICAgICoqL1xuICAgIGFzeW5jOiAyXG59O1xuXG4vKipcbiAqIEFuIGVudW0gcmVwcmVzZW50cyB0aGUgb3JpZW50YXRpb24gb2YgdGhlIHN0ZXBzIG5hdmlnYXRpb24uXG4gKlxuICogQGNsYXNzIHN0ZXBzT3JpZW50YXRpb25cbiAqIEBmb3Igc3RlcHNcbiAqKi9cbnZhciBzdGVwc09yaWVudGF0aW9uID0gJC5mbi5zdGVwcy5zdGVwc09yaWVudGF0aW9uID0ge1xuICAgIC8qKlxuICAgICAqIEhvcml6b250YWwgb3JpZW50YXRpb25cbiAgICAgKlxuICAgICAqIEByZWFkT25seVxuICAgICAqIEBwcm9wZXJ0eSBob3Jpem9udGFsXG4gICAgICogQHR5cGUgSW50ZWdlclxuICAgICAqIEBmb3Igc3RlcHNPcmllbnRhdGlvblxuICAgICAqKi9cbiAgICBob3Jpem9udGFsOiAwLFxuXG4gICAgLyoqXG4gICAgICogVmVydGljYWwgb3JpZW50YXRpb25cbiAgICAgKlxuICAgICAqIEByZWFkT25seVxuICAgICAqIEBwcm9wZXJ0eSB2ZXJ0aWNhbFxuICAgICAqIEB0eXBlIEludGVnZXJcbiAgICAgKiBAZm9yIHN0ZXBzT3JpZW50YXRpb25cbiAgICAgKiovXG4gICAgdmVydGljYWw6IDFcbn07XG5cbi8qKlxuICogQW4gZW51bSB0aGF0IHJlcHJlc2VudHMgdGhlIHZhcmlvdXMgdHJhbnNpdGlvbiBhbmltYXRpb25zLlxuICpcbiAqIEBjbGFzcyB0cmFuc2l0aW9uRWZmZWN0XG4gKiBAZm9yIHN0ZXBzXG4gKiovXG52YXIgdHJhbnNpdGlvbkVmZmVjdCA9ICQuZm4uc3RlcHMudHJhbnNpdGlvbkVmZmVjdCA9IHtcbiAgICAvKipcbiAgICAgKiBObyB0cmFuc2l0aW9uIGFuaW1hdGlvblxuICAgICAqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHByb3BlcnR5IG5vbmVcbiAgICAgKiBAdHlwZSBJbnRlZ2VyXG4gICAgICogQGZvciB0cmFuc2l0aW9uRWZmZWN0XG4gICAgICoqL1xuICAgIG5vbmU6IDAsXG5cbiAgICAvKipcbiAgICAgKiBGYWRlIGluIHRyYW5zaXRpb25cbiAgICAgKlxuICAgICAqIEByZWFkT25seVxuICAgICAqIEBwcm9wZXJ0eSBmYWRlXG4gICAgICogQHR5cGUgSW50ZWdlclxuICAgICAqIEBmb3IgdHJhbnNpdGlvbkVmZmVjdFxuICAgICAqKi9cbiAgICBmYWRlOiAxLFxuXG4gICAgLyoqXG4gICAgICogU2xpZGUgdXAgdHJhbnNpdGlvblxuICAgICAqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHByb3BlcnR5IHNsaWRlXG4gICAgICogQHR5cGUgSW50ZWdlclxuICAgICAqIEBmb3IgdHJhbnNpdGlvbkVmZmVjdFxuICAgICAqKi9cbiAgICBzbGlkZTogMixcblxuICAgIC8qKlxuICAgICAqIFNsaWRlIGxlZnQgdHJhbnNpdGlvblxuICAgICAqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQHByb3BlcnR5IHNsaWRlTGVmdFxuICAgICAqIEB0eXBlIEludGVnZXJcbiAgICAgKiBAZm9yIHRyYW5zaXRpb25FZmZlY3RcbiAgICAgKiovXG4gICAgc2xpZGVMZWZ0OiAzXG59O1xuXG52YXIgc3RlcE1vZGVsID0gJC5mbi5zdGVwcy5zdGVwTW9kZWwgPSB7XG4gICAgdGl0bGU6IFwiXCIsXG4gICAgY29udGVudDogXCJcIixcbiAgICBjb250ZW50VXJsOiBcIlwiLFxuICAgIGNvbnRlbnRNb2RlOiBjb250ZW50TW9kZS5odG1sLFxuICAgIGNvbnRlbnRMb2FkZWQ6IGZhbHNlXG59O1xuXG4vKipcbiAqIEFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIGRlZmF1bHQgc2V0dGluZ3MuXG4gKiBUaGVyZSBhcmUgdHdvIHBvc3NpYml0aWVzIHRvIG92ZXJyaWRlIHRoZSBzdWItcHJvcGVydGllcy5cbiAqIEVpdGhlciBieSBkb2luZyBpdCBnZW5lcmFsbHkgKGdsb2JhbCkgb3Igb24gaW5pdGlhbGl6YXRpb24uXG4gKlxuICogQHN0YXRpY1xuICogQGNsYXNzIGRlZmF1bHRzXG4gKiBAZm9yIHN0ZXBzXG4gKiBAZXhhbXBsZVxuICogICAvLyBHbG9iYWwgYXBwcm9hY2hcbiAqICAgJC5zdGVwcy5kZWZhdWx0cy5oZWFkZXJUYWcgPSBcImgzXCI7XG4gKiBAZXhhbXBsZVxuICogICAvLyBJbml0aWFsaXphdGlvbiBhcHByb2FjaFxuICogICAkKFwiI3dpemFyZFwiKS5zdGVwcyh7IGhlYWRlclRhZzogXCJoM1wiIH0pO1xuICoqL1xudmFyIGRlZmF1bHRzID0gJC5mbi5zdGVwcy5kZWZhdWx0cyA9IHtcbiAgICAvKipcbiAgICAgKiBUaGUgaGVhZGVyIHRhZyBpcyB1c2VkIHRvIGZpbmQgdGhlIHN0ZXAgYnV0dG9uIHRleHQgd2l0aGluIHRoZSBkZWNsYXJlZCB3aXphcmQgYXJlYS5cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBoZWFkZXJUYWdcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKiBAZGVmYXVsdCBcImgxXCJcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIGhlYWRlclRhZzogXCJoMVwiLFxuXG4gICAgLyoqXG4gICAgICogVGhlIGJvZHkgdGFnIGlzIHVzZWQgdG8gZmluZCB0aGUgc3RlcCBjb250ZW50IHdpdGhpbiB0aGUgZGVjbGFyZWQgd2l6YXJkIGFyZWEuXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgYm9keVRhZ1xuICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICAqIEBkZWZhdWx0IFwiZGl2XCJcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIGJvZHlUYWc6IFwiZGl2XCIsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBjb250YWluZXIgdGFnIHdoaWNoIHdpbGwgYmUgdXNlZCB0byB3cmFwIGFsbCBzdGVwIGNvbnRlbnRzLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGNvbnRlbnRDb250YWluZXJUYWdcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKiBAZGVmYXVsdCBcImRpdlwiXG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBjb250ZW50Q29udGFpbmVyVGFnOiBcImRpdlwiLFxuXG4gICAgLyoqXG4gICAgICogVGhlIGFjdGlvbiBjb250YWluZXIgdGFnIHdoaWNoIHdpbGwgYmUgdXNlZCB0byB3cmFwIHRoZSBwYWdpbmF0aW9uIG5hdmlnYXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgYWN0aW9uQ29udGFpbmVyVGFnXG4gICAgICogQHR5cGUgU3RyaW5nXG4gICAgICogQGRlZmF1bHQgXCJkaXZcIlxuICAgICAqIEBmb3IgZGVmYXVsdHNcbiAgICAgKiovXG4gICAgYWN0aW9uQ29udGFpbmVyVGFnOiBcImRpdlwiLFxuXG4gICAgLyoqXG4gICAgICogVGhlIHN0ZXBzIGNvbnRhaW5lciB0YWcgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIHdyYXAgdGhlIHN0ZXBzIG5hdmlnYXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgc3RlcHNDb250YWluZXJUYWdcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKiBAZGVmYXVsdCBcImRpdlwiXG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBzdGVwc0NvbnRhaW5lclRhZzogXCJkaXZcIixcblxuICAgIC8qKlxuICAgICAqIFRoZSBjc3MgY2xhc3Mgd2hpY2ggd2lsbCBiZSBhZGRlZCB0byB0aGUgb3V0ZXIgY29tcG9uZW50IHdyYXBwZXIuXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgY3NzQ2xhc3NcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKiBAZGVmYXVsdCBcIndpemFyZFwiXG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgIDxkaXYgY2xhc3M9XCJ3aXphcmRcIj5cbiAgICAgKiAgICAgICAgIC4uLlxuICAgICAqICAgICA8L2Rpdj5cbiAgICAgKiovXG4gICAgY3NzQ2xhc3M6IFwid2l6YXJkXCIsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3NzIGNsYXNzIHdoaWNoIHdpbGwgYmUgdXNlZCBmb3IgZmxvYXRpbmcgc2NlbmFyaW9zLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGNsZWFyRml4Q3NzQ2xhc3NcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKiBAZGVmYXVsdCBcImNsZWFyZml4XCJcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIGNsZWFyRml4Q3NzQ2xhc3M6IFwiY2xlYXJmaXhcIixcblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3RlcHMgYXJlIHZlcnRpY2FsbHkgb3IgaG9yaXpvbnRhbGx5IG9yaWVudGVkLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHN0ZXBzT3JpZW50YXRpb25cbiAgICAgKiBAdHlwZSBzdGVwc09yaWVudGF0aW9uXG4gICAgICogQGRlZmF1bHQgaG9yaXpvbnRhbFxuICAgICAqIEBmb3IgZGVmYXVsdHNcbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKiovXG4gICAgc3RlcHNPcmllbnRhdGlvbjogc3RlcHNPcmllbnRhdGlvbi5ob3Jpem9udGFsLFxuXG4gICAgLypcbiAgICAgKiBUZW1wcGxhdGVzXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBUaGUgdGl0bGUgdGVtcGxhdGUgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIHN0ZXAgYnV0dG9uLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHRpdGxlVGVtcGxhdGVcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKiBAZGVmYXVsdCBcIjxzcGFuIGNsYXNzPVxcXCJudW1iZXJcXFwiPiNpbmRleCMuPC9zcGFuPiAjdGl0bGUjXCJcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIHRpdGxlVGVtcGxhdGU6IFwiPHNwYW4gY2xhc3M9XFxcIm51bWJlclxcXCI+I2luZGV4Iy48L3NwYW4+ICN0aXRsZSNcIixcblxuICAgIC8qKlxuICAgICAqIFRoZSBsb2FkaW5nIHRlbXBsYXRlIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgdGhlIGxvYWRpbmcgYW5pbWF0aW9uLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGxvYWRpbmdUZW1wbGF0ZVxuICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICAqIEBkZWZhdWx0IFwiPHNwYW4gY2xhc3M9XFxcInNwaW5uZXJcXFwiPjwvc3Bhbj4gI3RleHQjXCJcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIGxvYWRpbmdUZW1wbGF0ZTogXCI8c3BhbiBjbGFzcz1cXFwic3Bpbm5lclxcXCI+PC9zcGFuPiAjdGV4dCNcIixcblxuICAgIC8qXG4gICAgICogQmVoYXZpb3VyXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBmb2N1cyB0byB0aGUgZmlyc3Qgd2l6YXJkIGluc3RhbmNlIGluIG9yZGVyIHRvIGVuYWJsZSB0aGUga2V5IG5hdmlnYXRpb24gZnJvbSB0aGUgYmVnaW5pbmcgaWYgYHRydWVgLiBcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBhdXRvRm9jdXNcbiAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICogQHNpbmNlIDAuOS40XG4gICAgICoqL1xuICAgIGF1dG9Gb2N1czogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBFbmFibGVzIGFsbCBzdGVwcyBmcm9tIHRoZSBiZWdpbmluZyBpZiBgdHJ1ZWAgKGFsbCBzdGVwcyBhcmUgY2xpY2thYmxlKS5cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBlbmFibGVBbGxTdGVwc1xuICAgICAqIEB0eXBlIEJvb2xlYW5cbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAqIEBmb3IgZGVmYXVsdHNcbiAgICAgKiovXG4gICAgZW5hYmxlQWxsU3RlcHM6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlcyBrZXlib2FyZCBuYXZpZ2F0aW9uIGlmIGB0cnVlYCAoYXJyb3cgbGVmdCBhbmQgYXJyb3cgcmlnaHQpLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGVuYWJsZUtleU5hdmlnYXRpb25cbiAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqIEBmb3IgZGVmYXVsdHNcbiAgICAgKiovXG4gICAgZW5hYmxlS2V5TmF2aWdhdGlvbjogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgcGFnaW5hdGlvbiBpZiBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgZW5hYmxlUGFnaW5hdGlvblxuICAgICAqIEB0eXBlIEJvb2xlYW5cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBlbmFibGVQYWdpbmF0aW9uOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogU3VwcHJlc3NlcyBwYWdpbmF0aW9uIGlmIGEgZm9ybSBmaWVsZCBpcyBmb2N1c2VkLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHN1cHByZXNzUGFnaW5hdGlvbk9uRm9jdXNcbiAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqIEBmb3IgZGVmYXVsdHNcbiAgICAgKiovXG4gICAgc3VwcHJlc3NQYWdpbmF0aW9uT25Gb2N1czogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgY2FjaGUgZm9yIGFzeW5jIGxvYWRlZCBvciBpZnJhbWUgZW1iZWRkZWQgY29udGVudC5cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBlbmFibGVDb250ZW50Q2FjaGVcbiAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqIEBmb3IgZGVmYXVsdHNcbiAgICAgKiovXG4gICAgZW5hYmxlQ29udGVudENhY2hlOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogU2hvd3MgdGhlIGNhbmNlbCBidXR0b24gaWYgZW5hYmxlZC5cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBlbmFibGVDYW5jZWxCdXR0b25cbiAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIGVuYWJsZUNhbmNlbEJ1dHRvbjogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBTaG93cyB0aGUgZmluaXNoIGJ1dHRvbiBpZiBlbmFibGVkLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGVuYWJsZUZpbmlzaEJ1dHRvblxuICAgICAqIEB0eXBlIEJvb2xlYW5cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBlbmFibGVGaW5pc2hCdXR0b246IHRydWUsXG5cbiAgICAvKipcbiAgICAgKiBOb3QgeWV0IGltcGxlbWVudGVkLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHByZWxvYWRDb250ZW50XG4gICAgICogQHR5cGUgQm9vbGVhblxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBwcmVsb2FkQ29udGVudDogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBTaG93cyB0aGUgZmluaXNoIGJ1dHRvbiBhbHdheXMgKG9uIGVhY2ggc3RlcDsgcmlnaHQgYmVzaWRlIHRoZSBuZXh0IGJ1dHRvbikgaWYgYHRydWVgLiBcbiAgICAgKiBPdGhlcndpc2UgdGhlIG5leHQgYnV0dG9uIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIGZpbmlzaCBidXR0b24gaWYgdGhlIGxhc3Qgc3RlcCBiZWNvbWVzIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBzaG93RmluaXNoQnV0dG9uQWx3YXlzXG4gICAgICogQHR5cGUgQm9vbGVhblxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBzaG93RmluaXNoQnV0dG9uQWx3YXlzOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIGp1bXBpbmcgdG8gYSBwcmV2aW91cyBzdGVwLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGZvcmNlTW92ZUZvcndhcmRcbiAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIGZvcmNlTW92ZUZvcndhcmQ6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogU2F2ZXMgdGhlIGN1cnJlbnQgc3RhdGUgKHN0ZXAgcG9zaXRpb24pIHRvIGEgY29va2llLlxuICAgICAqIEJ5IGNvbWluZyBuZXh0IHRpbWUgdGhlIGxhc3QgYWN0aXZlIHN0ZXAgYmVjb21lcyBhY3RpdmF0ZWQuXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgc2F2ZVN0YXRlXG4gICAgICogQHR5cGUgQm9vbGVhblxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBzYXZlU3RhdGU6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogVGhlIHBvc2l0aW9uIHRvIHN0YXJ0IG9uICh6ZXJvLWJhc2VkKS5cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBzdGFydEluZGV4XG4gICAgICogQHR5cGUgSW50ZWdlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIHN0YXJ0SW5kZXg6IDAsXG5cbiAgICAvKlxuICAgICAqIEFuaW1hdGlvbiBFZmZlY3QgQ29uZmlndXJhdGlvblxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogVGhlIGFuaW1hdGlvbiBlZmZlY3Qgd2hpY2ggd2lsbCBiZSB1c2VkIGZvciBzdGVwIHRyYW5zaXRpb25zLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHRyYW5zaXRpb25FZmZlY3RcbiAgICAgKiBAdHlwZSB0cmFuc2l0aW9uRWZmZWN0XG4gICAgICogQGRlZmF1bHQgbm9uZVxuICAgICAqIEBmb3IgZGVmYXVsdHNcbiAgICAgKiovXG4gICAgdHJhbnNpdGlvbkVmZmVjdDogdHJhbnNpdGlvbkVmZmVjdC5ub25lLFxuXG4gICAgLyoqXG4gICAgICogQW5pbWF0aW9uIHNwZWVkIGZvciBzdGVwIHRyYW5zaXRpb25zIChpbiBtaWxsaXNlY29uZHMpLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHRyYW5zaXRpb25FZmZlY3RTcGVlZFxuICAgICAqIEB0eXBlIEludGVnZXJcbiAgICAgKiBAZGVmYXVsdCAyMDBcbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIHRyYW5zaXRpb25FZmZlY3RTcGVlZDogMjAwLFxuXG4gICAgLypcbiAgICAgKiBFdmVudHNcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEZpcmVzIGJlZm9yZSB0aGUgc3RlcCBjaGFuZ2VzIGFuZCBjYW4gYmUgdXNlZCB0byBwcmV2ZW50IHN0ZXAgY2hhbmdpbmcgYnkgcmV0dXJuaW5nIGBmYWxzZWAuIFxuICAgICAqIFZlcnkgdXNlZnVsIGZvciBmb3JtIHZhbGlkYXRpb24uIFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IG9uU3RlcENoYW5naW5nXG4gICAgICogQHR5cGUgRXZlbnRcbiAgICAgKiBAZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnRJbmRleCwgbmV3SW5kZXgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIG9uU3RlcENoYW5naW5nOiBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnRJbmRleCwgbmV3SW5kZXgpIHsgcmV0dXJuIHRydWU7IH0sXG5cbiAgICAvKipcbiAgICAgKiBGaXJlcyBhZnRlciB0aGUgc3RlcCBoYXMgY2hhbmdlLiBcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBvblN0ZXBDaGFuZ2VkXG4gICAgICogQHR5cGUgRXZlbnRcbiAgICAgKiBAZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnRJbmRleCwgcHJpb3JJbmRleCkgeyB9XG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBvblN0ZXBDaGFuZ2VkOiBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnRJbmRleCwgcHJpb3JJbmRleCkgeyB9LFxuXG4gICAgLyoqXG4gICAgICogRmlyZXMgYWZ0ZXIgY2FuY2VsYXRpb24uIFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IG9uQ2FuY2VsZWRcbiAgICAgKiBAdHlwZSBFdmVudFxuICAgICAqIEBkZWZhdWx0IGZ1bmN0aW9uIChldmVudCkgeyB9XG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBvbkNhbmNlbGVkOiBmdW5jdGlvbiAoZXZlbnQpIHsgfSxcblxuICAgIC8qKlxuICAgICAqIEZpcmVzIGJlZm9yZSBmaW5pc2hpbmcgYW5kIGNhbiBiZSB1c2VkIHRvIHByZXZlbnQgY29tcGxldGlvbiBieSByZXR1cm5pbmcgYGZhbHNlYC4gXG4gICAgICogVmVyeSB1c2VmdWwgZm9yIGZvcm0gdmFsaWRhdGlvbi4gXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgb25GaW5pc2hpbmdcbiAgICAgKiBAdHlwZSBFdmVudFxuICAgICAqIEBkZWZhdWx0IGZ1bmN0aW9uIChldmVudCwgY3VycmVudEluZGV4KSB7IHJldHVybiB0cnVlOyB9XG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBvbkZpbmlzaGluZzogZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50SW5kZXgpIHsgcmV0dXJuIHRydWU7IH0sXG5cbiAgICAvKipcbiAgICAgKiBGaXJlcyBhZnRlciBjb21wbGV0aW9uLiBcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBvbkZpbmlzaGVkXG4gICAgICogQHR5cGUgRXZlbnRcbiAgICAgKiBAZGVmYXVsdCBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnRJbmRleCkgeyB9XG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBvbkZpbmlzaGVkOiBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnRJbmRleCkgeyB9LFxuXG4gICAgLyoqXG4gICAgICogRmlyZXMgYWZ0ZXIgYXN5bmMgY29udGVudCBpcyBsb2FkZWQuIFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IG9uQ29udGVudExvYWRlZFxuICAgICAqIEB0eXBlIEV2ZW50XG4gICAgICogQGRlZmF1bHQgZnVuY3Rpb24gKGV2ZW50LCBpbmRleCkgeyB9XG4gICAgICogQGZvciBkZWZhdWx0c1xuICAgICAqKi9cbiAgICBvbkNvbnRlbnRMb2FkZWQ6IGZ1bmN0aW9uIChldmVudCwgY3VycmVudEluZGV4KSB7IH0sXG5cbiAgICAvKipcbiAgICAgKiBGaXJlcyB3aGVuIHRoZSB3aXphcmQgaXMgaW5pdGlhbGl6ZWQuIFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IG9uSW5pdFxuICAgICAqIEB0eXBlIEV2ZW50XG4gICAgICogQGRlZmF1bHQgZnVuY3Rpb24gKGV2ZW50KSB7IH1cbiAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICoqL1xuICAgIG9uSW5pdDogZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50SW5kZXgpIHsgfSxcblxuICAgIC8qKlxuICAgICAqIENvbnRhaW5zIGFsbCBsYWJlbHMuIFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGxhYmVsc1xuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqIEBmb3IgZGVmYXVsdHNcbiAgICAgKiovXG4gICAgbGFiZWxzOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMYWJlbCBmb3IgdGhlIGNhbmNlbCBidXR0b24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm9wZXJ0eSBjYW5jZWxcbiAgICAgICAgICogQHR5cGUgU3RyaW5nXG4gICAgICAgICAqIEBkZWZhdWx0IFwiQ2FuY2VsXCJcbiAgICAgICAgICogQGZvciBkZWZhdWx0c1xuICAgICAgICAgKiovXG4gICAgICAgIGNhbmNlbDogXCJDYW5jZWxcIixcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBsYWJlbCBpcyBpbXBvcnRhbnQgZm9yIGFjY2Vzc2FiaWxpdHkgcmVhc29ucy5cbiAgICAgICAgICogSW5kaWNhdGVzIHdoaWNoIHN0ZXAgaXMgYWN0aXZhdGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvcGVydHkgY3VycmVudFxuICAgICAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgICAgICogQGRlZmF1bHQgXCJjdXJyZW50IHN0ZXA6XCJcbiAgICAgICAgICogQGZvciBkZWZhdWx0c1xuICAgICAgICAgKiovXG4gICAgICAgIGN1cnJlbnQ6IFwiY3VycmVudCBzdGVwOlwiLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGxhYmVsIGlzIGltcG9ydGFudCBmb3IgYWNjZXNzYWJpbGl0eSByZWFzb25zIGFuZCBkZXNjcmliZXMgdGhlIGtpbmQgb2YgbmF2aWdhdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3BlcnR5IHBhZ2luYXRpb25cbiAgICAgICAgICogQHR5cGUgU3RyaW5nXG4gICAgICAgICAqIEBkZWZhdWx0IFwiUGFnaW5hdGlvblwiXG4gICAgICAgICAqIEBmb3IgZGVmYXVsdHNcbiAgICAgICAgICogQHNpbmNlIDAuOS43XG4gICAgICAgICAqKi9cbiAgICAgICAgcGFnaW5hdGlvbjogXCJQYWdpbmF0aW9uXCIsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExhYmVsIGZvciB0aGUgZmluaXNoIGJ1dHRvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3BlcnR5IGZpbmlzaFxuICAgICAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgICAgICogQGRlZmF1bHQgXCJGaW5pc2hcIlxuICAgICAgICAgKiBAZm9yIGRlZmF1bHRzXG4gICAgICAgICAqKi9cbiAgICAgICAgZmluaXNoOiBcIkZpbmlzaFwiLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMYWJlbCBmb3IgdGhlIG5leHQgYnV0dG9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJvcGVydHkgbmV4dFxuICAgICAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgICAgICogQGRlZmF1bHQgXCJOZXh0XCJcbiAgICAgICAgICogQGZvciBkZWZhdWx0c1xuICAgICAgICAgKiovXG4gICAgICAgIG5leHQ6IFwiTmV4dFwiLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMYWJlbCBmb3IgdGhlIHByZXZpb3VzIGJ1dHRvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3BlcnR5IHByZXZpb3VzXG4gICAgICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICAgICAgKiBAZGVmYXVsdCBcIlByZXZpb3VzXCJcbiAgICAgICAgICogQGZvciBkZWZhdWx0c1xuICAgICAgICAgKiovXG4gICAgICAgIHByZXZpb3VzOiBcIlByZXZpb3VzXCIsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExhYmVsIGZvciB0aGUgbG9hZGluZyBhbmltYXRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm9wZXJ0eSBsb2FkaW5nXG4gICAgICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICAgICAgKiBAZGVmYXVsdCBcIkxvYWRpbmcgLi4uXCJcbiAgICAgICAgICogQGZvciBkZWZhdWx0c1xuICAgICAgICAgKiovXG4gICAgICAgIGxvYWRpbmc6IFwiTG9hZGluZyAuLi5cIlxuICAgIH1cbn07XG59KShqUXVlcnkpOyIsInJlcXVpcmUoJ2pxdWVyeS1zdGVwcy9idWlsZC9qcXVlcnkuc3RlcHMnKTtcclxuIl19"}